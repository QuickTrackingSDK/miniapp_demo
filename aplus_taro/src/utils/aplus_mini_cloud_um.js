/*! 2022-06-01 15:43:42 */
!function(e, t) {
    if ("object" == typeof exports && "object" == typeof module) module.exports = t(); else if ("function" == typeof define && define.amd) define([], t); else {
        var n = t();
        for (var a in n) ("object" == typeof exports ? exports : e)[a] = n[a];
    }
}(this, function() {
    return function(e) {
        function t(a) {
            if (n[a]) return n[a].exports;
            var r = n[a] = {
                exports: {},
                id: a,
                loaded: !1
            };
            return e[a].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports;
        }
        var n = {};
        return t.m = e, t.c = n, t.p = "", t(0);
    }([ function(e, t, n) {
        e.exports = n(1);
    }, function(e, t, n) {
        "use strict";
        n(2).initGlobal(), e.exports = function(e) {
            var t = n(4);
            return n(104)(e, t);
        };
    }, function(e, t, n) {
        "use strict";
        var a, r = n(3), o = r.APLUS, i = r.APLUS_QUEUE, s = r.GOLDLOG, u = r.GOLDLOG_QUEUE, c = !1;
        try {
            window && (a = window, c = !0);
        } catch (e) {
            a = {}, c = !1;
        }
        t.getContext = function() {
            return a;
        }, t.isWeb = function() {
            return window;
        }, t.initGlobal = function(e) {
            a = e ? e : {
                v: 1,
                aplus: {},
                aplus_queue: []
            };
            var t, n;
            if (c) try {
                t = a.aplus || a.goldlog || (a.aplus = {});
                var r = a.goldlog_queue || (a.goldlog_queue = []);
                n = a.aplus_queue || (a.aplus_queue = []), n = r.concat(n);
            } catch (e) {} else t = a.aplus, n = a.aplus_queue;
            return a.aplus = a.goldlog = t, a.aplus_queue = a.goldlog_queue = n, a;
        };
        var l = function(e) {
            if (e === o || e === s) {
                var t = a[o] || a[s];
                return t || (t = a[o] = a[s] = {}), t;
            }
            var n = u, r = i;
            if (e === r || e === n) {
                var c = a[r] || a[n];
                return c || (c = a[r] = a[n] = []), c;
            }
        };
        t.getGlobalValue = l, t.setGlobalValue = function(e, t) {
            a[e] = t;
        };
        var p = function(e) {
            var t;
            try {
                var n = l(o);
                t = n[e];
            } catch (e) {
                t = "";
            } finally {
                return t;
            }
        };
        t.getGoldlogVal = p;
        var f = function(e, t) {
            var n = !1;
            try {
                var a = l(o);
                e && (a[e] = t, n = !0);
            } catch (e) {
                n = !1;
            } finally {
                return n;
            }
        };
        t.setGoldlogVal = f, t.getClientInfo = function() {
            return p("_aplus_client") || {};
        };
    }, function(e, t) {
        var n = "aplus", a = "goldlog", r = n + "_queue", o = a + "_queue", i = "mw_change", s = "MetaInfo", u = "append" + s, c = "set" + s, l = "http", p = "_pubsub", f = "other", g = "2101", d = "2201", _ = "2202", h = "19999", v = "1023", m = "1010", y = 3e4, S = 18e5, b = "ekvs", P = 1e4, A = 1, E = 1, I = 3e3, T = "$$_page_start", C = "$$_page_end", x = "$$_app_start", O = "$$_app_end", M = "aplus_user_profile", U = "imprint", k = "aplus-idtype", w = "aplus-jsbridge-only", L = "aplus-page-config", R = "aplus-skip-apv-rules", N = "aplus-rhost-v", D = "aplus-rhost-g", j = "autoGetOpenid";
        e.exports = {
            PAGE_ENTER: "PAGE_ENTER",
            CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
            _ANONY_ID: "_anony_id",
            _DEV_ID: "_dev_id",
            _USER_ID: "_user_id",
            DEFAULT_CODE: f,
            OTHER: h,
            EVENT_MAP: {
                "2101": "click",
                "2201": "exposure",
                "2202": "exposure",
                "19999": f,
                "1023": "app_show",
                "1010": "app_hide_or_unload"
            },
            EVENT_ID_MAP: {
                EXP: d,
                IMPEXP: _,
                CLK: g,
                OTHER: h,
                SHOW: v,
                H_OR_U: m
            },
            APLUS: n,
            GOLDLOG: a,
            UNSUBSCRIBE: n + "." + n + p + ".unsubscribe",
            SUBSCRIBE: n + "." + n + p + ".subscribe",
            PUBLISH: n + "." + n + p + ".publish",
            CACHE_PUBS: n + "." + n + p + ".cachePubs",
            APLUS_UNIVERSAL: n + "_universal",
            APLUS_QUEUE: r,
            GOLDLOG_QUEUE: o,
            COMPLETE: "complete",
            PV_CODE: "2001",
            EXP_CODE: d,
            CLK_CODE: g,
            OTHER_CODE: h,
            CLK: "CLK",
            EXP: "EXP",
            SPM_CNT: "spm-cnt",
            SPM_URL: "spm-url",
            SPM_PRE: "spm-pre",
            MW_CHANGE_PV: i + "_pv",
            MW_CHANGE_HJLJ: i + "_hjlj",
            HTTP: l + ":",
            HTTPS: "https:",
            APPEND_META_INFO: u,
            SET_META_INFO: c,
            APLUS_APPEND_META_INFO: n + "." + u,
            APLUS_SET_META_INFO: n + "." + c,
            PVID: "pvid",
            APLUS_LOG_PIPE: "aplus-log-pipe",
            openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "requestRemoteConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM", "recordAppLink" ],
            SESSION_INTERVAL: y,
            SESSION_PAUSE_TIME: "session_pause_time",
            IMPRINT: "imprint",
            CURRENT_SESSION: "current_session",
            MAX_EVENTID_LENGTH: 128,
            MAX_PROPERTY_KEY_LENGTH: 256,
            MAX_PROPERTY_KEYS_COUNT: 100,
            FAILED_REQUESTS: "failed_requests",
            REQUESTS: "requests",
            SHARES: "shares",
            APLUS_SSRC: "_aplus_ssrc",
            EKVS: b,
            EVENT_MAX_COUNT: P,
            MEMORY_MAX_COUNT: A,
            MAX_QUEUE_COUNT: E,
            EVENT_SEND_DEFAULT_INTERVAL: I,
            PAGE_START: T,
            PAGE_END: C,
            APP_START: x,
            APP_END: O,
            USER_PROFILE_KEY: M,
            SHARE_CACHE_INTERVAL: S,
            IMPRINT: U,
            ID_TYPE: k,
            GLOBAL_PROPERTY: "globalproperty",
            JSBRIDGE_ONLY: w,
            PAGE_CONFIG: L,
            APLUS_SKIP_APV_RULES: R,
            APLUS_PV_DOMAIN: N,
            APLUS_EKV_DOMAIN: D,
            APLUS_IMPRINT_VERSION: "APLUS_IMPRINT_VERSION",
            APLUS_REMOTE_CONFIG: "APLUS_REMOTE_CONFIG",
            RANK: "ekv_rank",
            WEB_EVENT_SUFFIX: "/web_logs",
            WEB_PC_PV_SUFFIX: "v.gif",
            WEB_WAP_PV_SUFFIX: "m.gif",
            PAGE_LEAVE: "$$_page_leave",
            APLUS_AUTOTRACK_ENABLED: "aplus-autotrack-enabled",
            APLUS_AUTOTRACK_ENABLED_REMOTE: "aplus-autotrack-enabled-remote",
            APLUS_AUTOTRACK_CONFIG: "aplus-autotrack-config",
            APLUS_AUTOTRACK_CONFIG_REMOTE: "aplus-autotrack-config-remote",
            APLUS_DISABLE_AUTOEVENT: "aplus-disable-autoevent",
            APLUS_DISABLE_AUTOEVENT_REMOTE: "aplus-disable-autoevent",
            APLUS_DISABLE_AUTOPV: "aplus-disable-apv",
            APLUS_DISABLE_AUTOPV_REMOTE: "aplus-disable-apv-remote",
            APLUS_DEVICE_ENABLE: "aplus-device-enable",
            PERFORMANCE_WARING: "$$_perf_warning",
            START_ID: "START_ID",
            AUTO_GET_OPENID: j
        };
    }, function(e, t, n) {
        e.exports = {
            metaInfo: {
                "aplus-rhost-v": "",
                "aplus-rhost-g": "",
                "aplus-mmstat-timeout": "10000",
                "aplus-disable-autoevent": !1,
                "aplus-disable-apv": !1,
                "aplus-autotrack-enabled": !1,
                "aplus-device-enable": !0,
                sdkId: "aplus_mini_cloud_um"
            },
            globalConfig: {
                isAli: !1,
                isDecodeUrl: !0,
                APLUS_QUEUE: "aplus_queue",
                ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
                script_name: "aplus_mini.js",
                "aplus-globaldata": {},
                lver: "1.9.22"
            },
            plugins: [ {
                name: "inject_app_um",
                path: n(5)
            }, {
                name: "inject_page_um",
                path: n(39)
            }, {
                name: "pubsub",
                path: n(43)
            }, {
                name: "aplus_meta_inject",
                path: n(46)
            }, {
                name: "aplus_log_inject",
                path: n(50),
                deps: [ "aplus_meta_inject" ],
                config: {
                    plugins: {
                        pv: [ {
                            name: "etag",
                            path: n(51)
                        }, {
                            name: "when_to_sendpv",
                            path: n(53),
                            config: {
                                aplusWaiting: ""
                            }
                        }, {
                            name: "where_to_send",
                            path: n(54)
                        }, {
                            name: "what_to_send",
                            path: n(55),
                            config: {
                                logdataToUt: {}
                            }
                        }, {
                            name: "miniapp_data",
                            path: n(58)
                        }, {
                            name: "what_to_sendpv_userdata",
                            path: n(59),
                            deps: [ "what_to_send" ]
                        }, {
                            name: "can_to_sendpv",
                            path: n(61)
                        } ],
                        hjlj: [ {
                            name: "etag",
                            path: n(51)
                        }, {
                            name: "where_to_send",
                            path: n(54)
                        }, {
                            name: "what_to_send",
                            path: n(55),
                            deps: []
                        }, {
                            name: "miniapp_data",
                            path: n(58)
                        }, {
                            name: "what_to_hjlj_userdata",
                            path: n(65)
                        } ]
                    }
                }
            }, {
                name: "aplus_api",
                path: n(66),
                deps: [ "aplus_log_inject", "aplus_meta_inject" ]
            }, {
                name: "aplus_ac",
                path: n(74),
                deps: [ "inject_page_um" ]
            }, {
                name: "aplus_ae",
                path: n(80),
                deps: [ "inject_page_um" ]
            }, {
                name: "open_api",
                path: n(86)
            }, {
                name: "aplus_client",
                path: n(87)
            }, {
                name: "aplus_mini_spm",
                path: n(88)
            }, {
                name: "aplus_mini_report_um",
                path: n(89)
            }, {
                name: "meta_queue",
                path: n(94),
                config: {
                    isOpenApi: !0
                }
            }, {
                name: "etag",
                path: n(51)
            }, {
                name: "aplus_queue",
                path: n(96),
                config: {
                    isOpenApi: !0
                }
            }, {
                name: "auto_tracker_um",
                path: n(97),
                deps: [ "inject_page_um" ]
            } ]
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            var n = {};
            t && (n.scene = t), e && e.miniappDebugId && (n.debugId = e.miniappDebugId);
            for (var a in e) "$$_share_uid" !== a && 0 !== a.indexOf("$$_utm_") || (n[a] = e[a]);
            return n;
        }
        function r(e) {
            h().load(function() {
                v().w("cache init success"), e.query && e.query.miniappDebugId && e.query.miniappDebugId != h().get("miniappDebugId") && h().set("miniappDebugId", e.query.miniappDebugId);
            });
            var t = {}, n = p(e);
            for (var a in n) "object" == typeof n[a] ? t = y.assign(n[a], t) : n[a] && (t[a] = n[a]);
            _(l.REQUESTS).load();
            var r = function() {
                _(l.FAILED_REQUESTS).load(), _(l.FAILED_REQUESTS).send("", {}, function() {
                    v().i("send failed request queue");
                });
            }, o = g().resume(t), i = g().getCurrentSessionId();
            d().setSessionId(i), o && _(l.REQUESTS).send("", {}, r);
        }
        function o() {
            g().pause(), _(l.FAILED_REQUESTS).send("", {}, function() {
                _(l.FAILED_REQUESTS).save(), h().save();
            });
        }
        function i(e) {
            try {
                my && my.onTitleCloseClick && e && my.onTitleCloseClick(e);
            } catch (e) {}
        }
        function s() {
            var e = App, t = !1, n = !1, s = u.getContext(), p = f.getContext(), g = {
                onLaunch: function(e) {
                    f.initIsTB();
                    var t = e ? e.query : {}, n = e ? e.referrerInfo : {};
                    if (P.enableCfg(h().getSync(l.APLUS_REMOTE_CONFIG)), E += 1, s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-session-args", y.assign(n, {
                            scene: e.scene || ""
                        }) ]
                    }), t) {
                        var r = {};
                        if (t.spm && (s.aplus.spm_orign = t.spm), e.scene && (r.scene = e.scene), t.miniappDebugId) {
                            var o = t.miniappDebugId.trim(), i = o.split("_");
                            r = y.assign(r, {
                                aplus_work_no: i.length > 2 ? i[1] : o,
                                aplus_track_debug_id: o,
                                aplus_flag: "aplus_test"
                            });
                        }
                        s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-exdata", r ]
                        }), s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-cpvdata", r ]
                        }), s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-global-args", a(t, e.scene) ]
                        });
                    }
                },
                onShow: function(e) {
                    E += 1;
                    var n, o = e ? e.query : {}, i = e ? e.scene : "";
                    s.aplus_queue.push({
                        action: "aplus.setMetaInfo",
                        arguments: [ "aplus-global-args", a(o, i) ]
                    }), i && (s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-exdata", {
                            scene: i
                        } ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-cpvdata", {
                            scene: i
                        } ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-session-args", {
                            scene: i
                        } ]
                    })), 2 === E ? n = 1 : 1 === E ? n = 0 : v().w("APP_LAUNCH_TYPE should not reach this, value = " + E), 
                    c.onAplusReady(s.aplus_queue, l.SUBSCRIBE, function() {
                        t || (t = !0, r(e)), b.clear();
                        var a = A.getStartId();
                        d().setStartId(a);
                        var o = s.aplus.globalConfig || {};
                        if (!o.isAli) {
                            var i = m.getPageCode();
                            s.onAppShowTime = Date.now(), s.aplus_queue.push({
                                action: "aplus.record",
                                arguments: [ l.APP_START, "SHOW", {
                                    start_type: n,
                                    page_name: i || e.path || "-",
                                    url: e.path || "-"
                                } ]
                            });
                        }
                    });
                },
                onHide: function() {
                    c.onAplusReady(s.aplus_queue, l.SUBSCRIBE, function() {
                        var e = s.aplus.globalConfig || {}, n = m.getPageCode();
                        if (!e.isAli) {
                            var a = m.getCurrentPagePath(), r = Date.now() - s.onAppShowTime;
                            s.aplus_queue.push({
                                action: "aplus.record",
                                arguments: [ l.APP_END, "H_OR_U", {
                                    duration: r,
                                    end_type: 0,
                                    page_name: n || a || "-",
                                    url: a || "-",
                                    start_time: s.onAppShowTime
                                } ]
                            });
                        }
                        t = !1, o();
                    }), E = 0;
                }
            };
            e.after ? e.after({
                methods: {
                    onLaunch: function(e) {
                        var t = u.getContext();
                        e.thisObject && (e.thisObject.aplus = t.aplus, e.thisObject.aplus_queue = t.aplus_queue), 
                        g.onLaunch(e.args);
                    },
                    onShow: function(e) {
                        g.onShow(e.args);
                    },
                    onHide: function() {
                        g.onHide();
                    }
                }
            }) : (App = function(t) {
                var n = u.getContext();
                t.aplus = n, e(t);
            }, p.onAppShow(function(e) {
                if (!n) {
                    var t = {};
                    t = S(p.getLaunchOptionsSync) ? p.getLaunchOptionsSync() || {} : e, g.onLaunch(t), 
                    n = !0;
                }
                g.onShow(e);
            }), p.onAppHide(function() {
                g.onHide();
            }), i(g.onHide));
        }
        var u = n(2), c = n(6), l = n(3), p = n(14), f = n(9), g = n(15), d = n(19), _ = n(21), h = n(16), v = n(12), m = n(36), y = n(33), S = n(10), b = n(38), P = n(29), A = n(18), E = 0;
        e.exports = function() {
            return {
                run: function() {
                    [ "object", "function" ].indexOf(typeof App) > -1 && s();
                }
            };
        };
    }, function(e, t, n) {
        var a = n(7), r = n(9), o = n(2), i = n(3);
        e.exports = {
            resetFn: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
                e[t] = function() {
                    var e = a && a.apply(this, arguments);
                    return e ? n.call(this, e) : n.apply(this, arguments);
                };
            },
            rewriteFn: function(e, t, n) {
                var a = e[t];
                e[t] = function(e) {
                    n.call(this, e), a && a.call(this, e);
                };
            },
            onAplusReady: function(e, t, n) {
                e.push({
                    action: t,
                    arguments: [ "aplusReady", function(e) {
                        "complete" === e && "function" == typeof n && n();
                    } ]
                });
            },
            click_proxy: function(e, t) {
                var a = n(2), r = a.getGlobalValue("aplus"), o = n(13), i = e[t];
                e[t] = function() {
                    var e = i.apply(this, arguments), t = arguments[0];
                    return o.isObject(t) && r && r.record && r.record("$$_auto_clk", "CLK", {}), e;
                };
            },
            getIndexByRect: function(e, t, n) {
                var s = -1, u = o.getGlobalValue(i.APLUS);
                r.getContext().createSelectorQuery().selectAll(e).boundingClientRect().exec(function(e) {
                    a(e[0], function(e, n) {
                        u.globalConfig.isAli ? e.width === t.width && e.height === t.height && e.left === t.left && e.top === t.top && e.right === t.right && e.bottom === t.bottom && (s = n) : s = n;
                    }), n(s);
                });
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(8);
        e.exports = function(e, t) {
            if (a(e) && void 0 === e.length) for (var n in e) e.hasOwnProperty(n) && t(n, e[n], e); else {
                var r, o = e.length;
                for (r = 0; r < o; r++) {
                    var i = t(e[r], r);
                    if ("break" === i) break;
                }
            }
        };
    }, function(e, t) {
        e.exports = function(e) {
            if ("object" != typeof e || null === e) return !1;
            for (var t = e; null !== Object.getPrototypeOf(t); ) t = Object.getPrototypeOf(t);
            return Object.getPrototypeOf(e) === t;
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            if ("boolean" == typeof u) return u;
            var e = !1;
            try {
                var t = navigator ? navigator.userAgent || navigator.swuserAgent : "";
                if (e = !!/AliApp/i.test(t), /AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(t) && (e = !1), 
                /AliApp\(KB/i.test(t) && (e = !!/Mist/.test(t)), /AlipayIDE Taobao/.test(t) && (e = !0), 
                e) {
                    var n = c().ctx;
                    o(n.canIUse) && (e = !!n.canIUse("callUserTrack"));
                }
            } catch (e) {}
            return u = e, e;
        }
        function r() {
            return "boolean" == typeof u ? !!u : a();
        }
        var o = n(10), i = n(2), s = n(11);
        t.getCurrentPage = function() {
            var e = getCurrentPages();
            return e[e.length - 1] || {};
        }, t.getReferrerPage = function() {
            var e = getCurrentPages();
            return e[e.length - 2] || {};
        };
        var u;
        t.resetIsTB = function(e) {
            u = e;
        }, t.initIsTB = a;
        var c = function() {
            try {
                return {
                    ctx: dd,
                    platType: "dd",
                    sdkType: "ddmp",
                    logDomain: "/ddm_logs"
                };
            } catch (e) {
                try {
                    return {
                        ctx: my,
                        platType: my && my.tb ? "taobao" : "my",
                        sdkType: my && my.tb ? "taobaomp" : "mymp",
                        logDomain: "/alipaym_logs"
                    };
                } catch (e) {
                    try {
                        return {
                            ctx: tt,
                            platType: "tt",
                            sdkType: "ttmp",
                            logDomain: "/bytedancem_logs"
                        };
                    } catch (e) {
                        try {
                            return {
                                ctx: swan,
                                platType: "bd",
                                sdkType: "bdmp",
                                logDomain: "/baidum_logs"
                            };
                        } catch (e) {
                            try {
                                return {
                                    ctx: wx,
                                    platType: "wx",
                                    sdkType: "wxmp",
                                    logDomain: "/wxm_logs"
                                };
                            } catch (e) {
                                return {
                                    ctx: {},
                                    platType: "UNKNOW",
                                    sdkType: "UNKNOW"
                                };
                            }
                        }
                    }
                }
            }
        };
        t.isTB = r, t.getPlatformType = function() {
            return c().platType;
        }, t.getSdkType = function() {
            return c().sdkType;
        }, t.getContext = function() {
            return c().ctx;
        }, t.getLogDomain = function() {
            return c().logDomain;
        };
        var l = "httpRequest", p = "request", f = function() {};
        t.request = function(e, t, n, a) {
            var r = c().ctx;
            o(a) || (a = f), o(n) || (n = f);
            var u = t.requestMethodName || p, g = r[u];
            o(g) || u === p || (u = p, g = r[u]), o(g) || u === l || (u = l, g = r[u]);
            var d, _ = t && t.dataType ? t.dataType : "base64", h = t && t.timeout ? t.timeout : 3e3, v = t.method || "GET";
            e = s.fixDomain(e);
            var m;
            if (o(g)) {
                var y = {
                    url: e,
                    method: v,
                    dataType: _,
                    timeout: h,
                    success: function(e) {
                        d || (d = !0, n(e));
                    },
                    fail: function(e) {
                        d || (d = !0, a({
                            failure: !0,
                            data: e
                        }));
                    }
                };
                "POST" === v && "object" == typeof t.data && (y.url = y.url.split("?")[0], l === u ? (y.headers = {
                    "Content-Type": "application/json"
                }, y.dataType = "json", y.data = JSON.stringify(t.data)) : y.data = t.data);
                var S = i.getGlobalValue("aplus"), b = S.getMetaInfo("aplus-request-extinfo");
                "object" == typeof b && (y._extInfo = b), g(y);
            } else d || (d = !0, a({
                failure: !0,
                data: m
            }));
            setTimeout(function() {
                d || (d = !0, m = 'aplus log request"' + e + ' timeout", time spend' + h + "ms", 
                console && console.warn(m), a({
                    failure: !0,
                    data: m
                }));
            }, h);
        }, t.setStorageSync = function(e, t) {
            try {
                var n = c().platType, a = c().ctx;
                "my" === n ? a.setStorageSync({
                    key: e,
                    data: t
                }) : a.setStorageSync(e, t);
            } catch (e) {}
        }, t.getStorageSync = function(e) {
            try {
                var t = c().platType, n = c().ctx;
                return "my" === t ? n.getStorageSync({
                    key: e
                }).data : n.getStorageSync(e);
            } catch (e) {}
        };
    }, function(e, t) {
        "use strict";
        e.exports = function(e) {
            return "function" == typeof e;
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t, n, a, o = [], i = e.length;
            for (a = 0; a < i; a++) t = e[a][0], n = e[a][1], o.push(0 === t.indexOf(r) ? n : t + "=" + encodeURIComponent(n));
            return o.join("&");
        }
        var r = "::-plain-::";
        t.mkPlainKey = function() {
            return r + Math.random();
        }, t.s_plain_obj = r, t.mkPlainKeyForExparams = function(e) {
            var t = e || r;
            return t + "exparams";
        }, t.arr2param = a, t.param2arr = function(e) {
            for (var t, n = e.split("&"), a = 0, r = n.length, o = []; a < r; a++) t = n[a].split("="), 
            o.push([ t.shift(), t.join("=") ]);
            return o;
        }, t.arr2obj = function(e) {
            var t, n, a, r = {}, o = e.length;
            for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
            return r;
        }, t.jsonLikeStr2JSON = function(e) {
            if (!e || "string" != typeof e) return {};
            for (var t = e.replace(/['"{}]+/g, ""), n = t.split(","), a = [], r = 0; r < n.length; r++) a.push(n[r].split(":"));
            var o = this.arr2obj(a);
            return o;
        }, t.fixDomain = function(e) {
            return e.indexOf("https://") !== -1 || e.indexOf("http://") !== -1 ? e : (e = (/^\/\//.test(e) ? "" : "//") + e, 
            /^\/\/(\d+\.){3,}\d+/.test(e) ? "http:" + e : "https:" + e);
        }, t.getAppKey = function() {
            var e = n(2).getGlobalValue("aplus");
            return e.getMetaInfo("appkey") || e.getMetaInfo("appId") || e.getMetaInfo("appKey");
        }, t.checkEmptyObj = function(e) {
            return "object" != typeof e || 0 === Object.keys(e).length;
        }, t.checkDomain = function(e) {
            var t = new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)$/), a = (e.match(t) || [])[0];
            if (!e || !a) {
                var r = n(12);
                return r().tip_w(r().repeat("!")), r().tip_w("trackDomain error, please check aplus-rhost-v setting, current value is: " + e || "undefined"), 
                r().tip_w("we accept these three patterns:"), r().tip_w("eg1: https://test-qtracking-xxx.com:port, port is optional"), 
                r().tip_w("eg2: http://test-qtracking-xxx.com:port, port is optional"), r().tip_w("eg3: test-qtracking-xxx.com:port, port is optional"), 
                r().tip_w(r().repeat("!")), !1;
            }
            return !0;
        }, t.checkOpenid = function(e) {
            if (!e) {
                var t = n(12);
                return t().tip_w(t().repeat("!")), t().tip_w("QT need an unique id as QT's deviceid!!"), 
                t().tip_w("setting examples: aplus_queue.push({action: 'aplus.setMetaInfo', arguments: ['_anony_id', xxxxxx]});"), 
                t().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS"), t().tip_w(t().repeat("!")), 
                !1;
            }
            return !0;
        };
        var o = n(7);
        t.mapEventSampleRates = function(e) {
            var t = [];
            return o(e, function(e) {
                e.eventIds && e.eventIds.length > 0 && o(e.eventIds, function(n) {
                    t.push({
                        eventId: n,
                        samplingRate: e.samplingRate
                    });
                });
            }), t;
        };
    }, function(e, t) {
        var n = "[APLUS] -- ";
        e.exports = function() {
            function e() {
                this.setDebug = function(e) {
                    a = e;
                }, this.i = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                    } catch (e) {}
                }, this.e = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                    } catch (e) {}
                }, this.w = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                    } catch (e) {}
                }, this.v = function() {
                    try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                    } catch (e) {}
                }, this.tip_w = function(e) {
                    try {
                        console.log("%c " + n + e, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                    } catch (e) {}
                }, this.repeat = function(e) {
                    for (var t = e; t.length < 86; ) t += e;
                    return t;
                };
            }
            var t = null, a = !1;
            return function() {
                return null === t && (t = new e()), t;
            };
        }();
    }, function(e, t) {
        t.isObject = function(e) {
            return null !== e && "[object Object]" === Object.prototype.toString.call(e);
        }, t.isEmptyObject = function(e) {
            if (this.isObject(e)) for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
            return !0;
        };
    }, function(e, t) {
        function n(e) {
            var t, a = Array.isArray(e) ? [] : {};
            if ("object" == typeof e) {
                if (JSON && JSON.parse) t = JSON.stringify(e), a = JSON.parse(t); else for (var r in e) a[r] = "object" == typeof e[r] ? n(e[r]) : e[r];
                return a;
            }
        }
        e.exports = n;
    }, function(e, t, n) {
        var a = n(16), r = n(12), o = n(3), i = n(9), s = n(14), u = n(18), c = n(2);
        e.exports = function() {
            function e() {
                return {
                    resume: function(e) {
                        var t = !1;
                        g || (g = a().get(o.CURRENT_SESSION));
                        var r = new Date();
                        return f = r.getTime(), (!g || !g.end_time || f - g.end_time > o.SESSION_INTERVAL) && (t = !0, 
                        n(e)), t;
                    },
                    pause: function() {
                        l();
                    },
                    getCurrentSessionId: function() {
                        return (g || {}).id;
                    },
                    getCurrentSession: function() {
                        return g;
                    },
                    cloneCurrentSession: function() {
                        return s(g);
                    }
                };
            }
            function t(e) {
                var t = {};
                for (var n in e) t[n] = e[n];
                return t;
            }
            function n(e) {
                try {
                    var n = (g || {}).options || {}, a = u.assign({}, t(e.query));
                    a.path = e.path || n.path, a.scene = e.scene ? i.getPlatformType() + "_" + e.scene : n.scene;
                    var o = e.referrerInfo;
                    o && (a.referrerAppId = o.appId), r().i("current launch options: ", a);
                    var s = c.getGlobalValue("aplus"), l = s.getMetaInfo("globalproperty"), p = Date.now();
                    g = {
                        id: u.getRandomStr(10) + p,
                        start_time: p,
                        options: a,
                        state_s: 1
                    }, l && (g.gp = l);
                } catch (e) {
                    r().e("generate new session failed, errmsg: ", e);
                }
            }
            function l() {
                if (g) {
                    var e = new Date();
                    g.end_time = e.getTime(), "number" != typeof g.duration && (g.duration = 0), g.duration = g.end_time - f, 
                    g.state_s = 0, a().set(o.CURRENT_SESSION, g), r().i("session end (%s): %s ", g.id, e.toLocaleTimeString(), g);
                }
            }
            var p = null, f = null, g = null;
            return function() {
                return p || (p = e()), p;
            };
        }();
    }, function(e, t, n) {
        var a = n(9), r = n(10), o = n(17), i = n(12), s = n(11), u = n(3);
        e.exports = function() {
            function e() {
                var e = a.getContext();
                this.load = function(t) {
                    c ? (e.removeStorage({
                        key: n
                    }), r(t) && t()) : (n = "aplus_cache_" + s.getAppKey() || "", e.getStorage({
                        key: n,
                        success: function(a) {
                            c = a && a.data ? o.parse(a.data) || {} : {}, l = !0, e.removeStorage({
                                key: n
                            }), r(t) && t();
                        },
                        fail: function(a) {
                            i().w("get cache failed, errmsg = " + a.errMsg), c = {}, l = !0, e.removeStorage({
                                key: n
                            }), r(t) && t();
                        }
                    }));
                }, this.save = function() {
                    c && e.setStorage({
                        key: n,
                        data: o.stringfy(c)
                    });
                }, this.set = function(e, t) {
                    c && (c[e] = t);
                }, this.get = function(e) {
                    return (c || {})[e];
                }, this.remove = function(e) {
                    c && c[e] && delete c[e];
                }, this.getAll = function() {
                    return c;
                }, this.clear = function() {
                    c = null;
                }, this.has = function(e) {
                    return !!this.get(e);
                }, this.isLoaded = function() {
                    return l;
                }, this.getSync = function(e) {
                    try {
                        var t = a.getStorageSync(e);
                        return e === u.APLUS_IMPRINT_VERSION ? t : "string" == typeof t ? o.parse(t) : t;
                    } catch (e) {}
                }, this.setSync = function(e, t) {
                    try {
                        "object" == typeof t ? a.setStorageSync(e, JSON.stringify(t)) : a.setStorageSync(e, t);
                    } catch (e) {}
                };
            }
            var t = null, n = "", c = null, l = !1;
            return function() {
                return t || (t = new e()), t;
            };
        }();
    }, function(e, t) {
        t.stringfy = function(e) {
            if (e) try {
                return JSON.stringify(e);
            } catch (e) {}
            return "";
        }, t.parse = function(e) {
            if (e) try {
                return JSON.parse(e);
            } catch (e) {}
            return null;
        }, t.parseToArray = function(e) {
            if (e) try {
                return JSON.parse(e);
            } catch (e) {}
            return [];
        };
    }, function(e, t, n) {
        function a(e) {
            for (var t = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(e); a++) {
                var r = Math.round(Math.random() * (n.length - 1));
                t += n[r];
            }
            return t;
        }
        t.getRandomStr = a, t.startsWith = function(e, t) {
            return !(!e || !t || 0 === t.length || t.length > e.length) && e.substr(0, t.length) === t;
        }, t.assign = function(e) {
            if (void 0 === e || null === e) throw new TypeError("Cannot convert undefined or null to object");
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
            }
            return t;
        }, t.checkEvent = function(e, t) {
            var a = n(3), r = n(12), o = n(17);
            if (!e || "string" != typeof e) return r().w("event logkey is invalid, id =", e || "'' event properties = ", o.stringfy(t.cusp)), 
            !1;
            var i = [ "id", "du" ], s = {};
            if (i.forEach(function(e) {
                s[e] = 1;
            }), s[e]) return r().e("eventId has conflict with reservewords: " + i.join(",")), 
            !1;
            if (e.length > a.MAX_EVENTID_LENGTH) return r().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
            !1;
            if (t && ("object" != typeof t || Array.isArray(t)) && "string" != typeof t) return r().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
            !1;
            if ("object" == typeof t) {
                var u = 0;
                for (var c in t) if ({}.hasOwnProperty.call(t, c)) {
                    if (c.length > a.MAX_PROPERTY_KEY_LENGTH) return r().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                    !1;
                    if (u >= a.MAX_PROPERTY_KEYS_COUNT) return r().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                    !1;
                    if (s[c]) return r().e("property key has conflict with reserveWords: " + i.join(",")), 
                    !1;
                    u += 1;
                }
            }
            return !0;
        };
        var r = n(7);
        t.deleteInfo = function(e, t) {
            return r(t, function(t) {
                delete e[t];
            }), e;
        }, t.checkEmptyObj = function(e) {
            return "object" != typeof e || 0 === Object.keys(e).length;
        }, t.getStartId = function() {
            return a(10) + Date.now();
        }, t.DataType = {
            HALF_SESSION: "half_session",
            CLOSE_SESSION: "close_session",
            EKV: "ekv",
            ENTER_PAGE: "enter_page",
            LEAVE_PAGE: "leave_page"
        }, t.AccessType = {
            MOBILE_NETWORK_2G: "2g",
            MOBILE_NETWORK_3G: "3g",
            MOBILE_NETWORK_4G: "4g",
            MOBILE_NETWORK_NONE: "none"
        };
    }, function(e, t, n) {
        var a = n(16), r = n(12), o = n(3), i = n(20);
        e.exports = function() {
            function e() {
                if (p.length) {
                    var e = a().get(o.EKVS);
                    n(e) + p.length <= o.EVENT_MAX_COUNT && (e = t(e, p), a().set(o.EKVS, e));
                }
            }
            function t(e, t) {
                e = e || {};
                var n = e[c];
                return i(n) && n.length ? e[c] = n.concat(t) : e[c] = [].concat(t), e;
            }
            function n(e) {
                var t = 0;
                for (var n in e) i(e[n]) && (t += e[n].length);
                return t;
            }
            function s() {
                return {
                    addEvent: function(t) {
                        t && (c ? (p.unshift(t), p.length > o.MEMORY_MAX_COUNT && (e(c), p.length = 0)) : (r().w("session id is null: ", c), 
                        f.unshift(t)));
                    },
                    setSessionId: function(e) {
                        if (c = e, i(f) && f.length && c) {
                            for (var t = 0; t < f.length; t++) this.addEvent(f[t]);
                            f.length = 0;
                        }
                    },
                    setStartId: function(e) {
                        l = e;
                    },
                    getStartId: function() {
                        return l;
                    },
                    getEkvs: function() {
                        var e = a().get(o.EKVS);
                        return p && p.length && (e = t(e, p)), e;
                    },
                    getEkvsLen: function() {
                        var e = a().get(o.EKVS) || {}, t = e[c] || [], n = p ? p.length : 0;
                        return t.length + n;
                    },
                    clear: function() {
                        a().remove(o.EKVS), p.length = 0, f.length = 0;
                    }
                };
            }
            var u, c, l, p = [], f = [];
            return function() {
                return u || (u = s()), u;
            };
        }();
    }, function(e, t) {
        "use strict";
        e.exports = function(e) {
            return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
        };
    }, function(e, t, n) {
        var a = n(22), r = n(16), o = n(3), i = n(23), s = n(24), u = n(35), c = n(10), l = n(33), p = n(11), f = n(2);
        e.exports = function() {
            function e(e, t, r) {
                t = t || {};
                var s = i(e);
                if (s) {
                    var u = n(2), p = u.getGlobalValue(o.APLUS), f = p._aplus_client || {};
                    s.header = l.assign(s.header, a.getNetInfo(f)), s.noCache = t.noCache, y.enqueue(s);
                }
                c(r) && r();
            }
            function t(e, n) {
                var a = e === o.REQUESTS, r = a ? y : S, i = r.dequeue(), u = function() {
                    t(e, n);
                }, c = function() {
                    i && !i.noCache && m.push(i), t(e, n);
                };
                i ? s(i, u, c) : (g(), n());
            }
            function g() {
                m.forEach(function(e) {
                    S.enqueue(e);
                }), m.length = 0;
            }
            function d(e, n) {
                var a = function() {
                    c(n) && n();
                };
                t(e, a);
            }
            function _() {
                this.send = function(e, t, n) {
                    e ? this.add(e, t, function() {
                        d(h, n);
                    }) : d(h, n);
                }, this.add = function(t, n, a) {
                    var r = f.getGlobalValue(o.APLUS);
                    p.checkOpenid(r.getMetaInfo(o._ANONY_ID)) && e(t, n, a);
                }, this.load = function() {
                    var e = h === o.REQUESTS, t = e ? y : S, n = r().get(h);
                    n && n.length && n.forEach(function(e) {
                        t.enqueue(e);
                    }), r().remove(h);
                }, this.save = function() {
                    var e = r().get(o.FAILED_REQUESTS) || [], t = e.concat(S.items());
                    t && t.length && r().set(o.FAILED_REQUESTS, t), S.clear();
                };
            }
            var h = null, v = null, m = [], y = new u(), S = new u();
            return function(e) {
                return h = e, v || (v = new _()), v;
            };
        }();
    }, function(e, t, n) {
        var a = n(9), r = n(3), o = n(16), i = n(2), s = n(18), u = n(11);
        t.getNetInfo = function(e) {
            var t = {}, n = e.networkType;
            switch ("none" === n && (n = "unknown"), n = n ? n.toLowerCase() : "") {
              case s.AccessType.MOBILE_NETWORK_4G:
                t.access_subtype = "LTE", t.access = "4G";
                break;

              case s.AccessType.MOBILE_NETWORK_3G:
                t.access_subtype = "CDMA", t.access = "3G";
                break;

              case s.AccessType.MOBILE_NETWORK_2G:
                t.access_subtype = "GRPS", t.access = "2G";
                break;

              default:
                t.access = n, delete t.access_subtype;
            }
            return t;
        }, t.getHeaderInfo = function() {
            var e = {}, t = i.getGlobalValue(r.APLUS), n = t.globalConfig || {}, s = t._aplus_client || {}, c = o().get(r.IMPRINT);
            c && (e.imprint = c), e.device_type = "Phone", e.sdk_version = n.lver, e.appkey = u.getAppKey(), 
            e.device_info = "", e.appid = s.appId, e.app_env = s.appEnv, e.app_version = t.getMetaInfo("appVersion") || "devtools";
            var l = t.getMetaInfo("aplus-global-args");
            l && l.debugId ? e.miniappDebugId = l.debugId : o().get("miniappDebugId") && (e.miniappDebugId = o().get("miniappDebugId"));
            var p = s || {};
            p.safeArea = p.safeArea || {};
            var f = p.model || "", g = p.platform || "", d = p.brand || "", _ = d.toLowerCase();
            e.sdk_type = a.getSdkType(), e.platform = a.getPlatformType(), e.platform_sdk_version = p.SDKVersion, 
            e.platform_version = p.platformVersion;
            var h = Math.round(p.screenWidth * p.pixelRatio), v = Math.round(p.screenHeight * p.pixelRatio);
            e.resolution = h > v ? h + "*" + v : v + "*" + h, e.pixel_ratio = p.pixelRatio, 
            e.os = g, e.font_size_setting = p.fontSizeSetting, e.device_model = f, e.device_brand = d, 
            e.device_manufacturer = _, e.device_manuid = f, e.device_name = f, e.os_version = p.os_version, 
            e.language = p.language;
            var m = this.getNetInfo(s);
            return e.access = m.access, m.access_subtype && (e.access_subtype = m.access_subtype), 
            e;
        };
    }, function(e, t, n) {
        function a() {
            var e = null, t = i().cloneCurrentSession();
            return t && (e = {
                header: {
                    st: "1"
                },
                analytics: {
                    sessions: [ t ]
                }
            }), e;
        }
        function r() {
            var e = null, t = {}, n = i().cloneCurrentSession();
            n && (t.sessions = [ n ]);
            var a = s().getEkvs();
            return a && (t.ekvs = c(a), s().clear()), (t.sessions || t.ekvs) && (e = {
                analytics: t
            }), e;
        }
        function o() {
            var e = null, t = s().getEkvs();
            return t && (e = {
                analytics: {
                    ekvs: c(t)
                }
            }, s().clear()), e;
        }
        var i = n(15), s = n(19), u = n(18), c = n(14);
        e.exports = function(e) {
            var t = null;
            switch (e) {
              case u.DataType.HALF_SESSION:
                t = a();
                break;

              case u.DataType.CLOSE_SESSION:
                t = r();
                break;

              case u.DataType.EKV:
                t = o();
            }
            return t;
        };
    }, function(e, t, n) {
        function a() {
            var e = d.getGlobalValue(h.APLUS), t = e.getMetaInfo(h.APLUS_PV_DOMAIN);
            if (!P.checkDomain(t)) return "";
            var n = s.getLogDomain();
            return n ? P.fixDomain(t) + n : (p().tip_w("current miniapp framework is not supported!!"), 
            "");
        }
        function r(e) {
            var t = s.getContext(), n = e.success, a = e.fail, r = !1, o = null;
            e.success = function(e) {
                r || (o && clearTimeout(o), v(n) && n(e));
            }, e.fail = function() {
                r || (o && clearTimeout(o), v(a) && a(!1));
            };
            try {
                t.request(e);
            } catch (t) {
                try {
                    dd && dd.httpRequest(e);
                } catch (e) {
                    p().w("request send failed, err msg: ", e);
                }
            }
            o = setTimeout(function() {
                o && clearTimeout(o), r = !0, v(a) && a(r);
            }, e.timeout || A);
        }
        function o(e) {
            var t = y().getSync(h.APLUS_IMPRINT_VERSION);
            if (e) {
                var n = d.getGlobalValue("aplus");
                if (e.imprintVersion && e.imprintVersion !== t) {
                    var a = e.imprintVersion;
                    y().setSync(h.APLUS_IMPRINT_VERSION, a);
                    var r = n.getMetaInfo(h.APLUS_PV_DOMAIN), o = P.fixDomain(r) + a;
                    n.requestRemoteConfig(o, function(e) {
                        e.data && e.data.data && (S.enableCfg(e.data.data), y().setSync(h.APLUS_REMOTE_CONFIG, e.data.data));
                    }, function(e) {
                        p().w("remote configuration request failed, errmsg:", e);
                    });
                } else {
                    var i = y().getSync(h.APLUS_REMOTE_CONFIG);
                    S.enableCfg(i);
                }
            }
        }
        function i() {
            var e = s.getSdkType() + "/json", t = !1;
            try {
                my && (t = !0);
            } catch (e) {}
            return t ? {
                headers: {
                    "Content-Type": e,
                    "Msg-Type": e
                }
            } : {
                header: {
                    "Content-Type": e,
                    "Msg-Type": e
                }
            };
        }
        var s = n(9), u = n(22), c = n(25), l = n(26), p = n(12), f = n(17), g = n(27), d = n(2), _ = n(18), h = n(3), v = n(10), m = n(28), y = n(16), S = n(29), b = n(19), P = n(11), A = 5e3;
        e.exports = function(e, t, n, S) {
            var P = d.getGlobalValue(h.APLUS), A = u.getHeaderInfo();
            try {
                if ("my" === s.getPlatformType() || "taobao" === s.getPlatformType() ? (A.id_type = "alipay_id", 
                A.id_tracking = {
                    alipay_id: P.getMetaInfo(h._ANONY_ID) || y().get(h._ANONY_ID) || "",
                    unionid: P.getMetaInfo(h._DEV_ID) || y().get(h._DEV_ID) || "",
                    userId: P.getMetaInfo(h._USER_ID) || ""
                }) : (A.id_type = "openid", A.id_tracking = {
                    openid: P.getMetaInfo(h._ANONY_ID) || y().get(h._ANONY_ID) || "",
                    unionid: P.getMetaInfo(h._DEV_ID) || y().get(h._DEV_ID) || "",
                    userId: P.getMetaInfo(h._USER_ID) || ""
                }), l.get() && (A[h.IMPRINT] = l.get()), e.analytics) {
                    var E = P.getMetaInfo(h._USER_ID), I = P.getMetaInfo("_user_nick");
                    e.analytics.active_user = {
                        puid: E,
                        provider: I
                    };
                }
                e.header = _.assign(A, e.header, {
                    ts: Date.now(),
                    traceId: _.getRandomStr(10) + Date.now() + _.getRandomStr(9),
                    start_id: b().getStartId()
                });
                var T = c(e), C = f.stringfy(T), x = a(), O = {
                    url: x,
                    method: "POST",
                    data: g.encode(C),
                    success: function(a) {
                        var r = a.code || a.status || a.statusCode;
                        if (200 === r || 413 === r) {
                            p().i("data send success:", e, C);
                            try {
                                a.profile && (m.push({
                                    end: a.profile.responseEnd,
                                    start: a.profile.requestStart
                                }), m.needSendPerformanceEvent());
                            } catch (e) {
                                p().w("current miniapp not support profile API");
                            }
                            o(a.data || {}), v(t) && t(a);
                        } else p().w("data send failed:", C), v(n) && n();
                    },
                    fail: function(e) {
                        p().w("timeout: ", C), v(n) && n();
                    },
                    complete: function() {
                        v(S) && S();
                    }
                };
                r(_.assign(O, i()));
            } catch (e) {}
        };
    }, function(e, t) {
        function n(e, t) {
            var n = a(e, t);
            return e && e.id_tracking && (n[t.id_tracking || "id_tracking"] = a(e.id_tracking, s)), 
            n;
        }
        function a(e, t) {
            var n = {};
            for (var a in e) t[a] ? n[t[a]] = e[a] : n[a] = e[a];
            return n;
        }
        function r(e, t) {
            var n = {};
            if (e) for (var a in e) e[a] && (n[t[a]] = e[a]);
            return n;
        }
        var o = {
            sessions: "sn",
            ekvs: "e",
            active_user: "active_user"
        }, i = {
            sdk_type: "sdt",
            access: "ac",
            access_subtype: "acs",
            device_model: "dm",
            language: "lang",
            device_type: "dt",
            device_manufacturer: "dmf",
            device_name: "dn",
            platform_version: "pv",
            id_type: "it",
            font_size_setting: "fss",
            os_version: "ov",
            device_manuid: "did",
            platform_sdk_version: "psv",
            device_brand: "db",
            appkey: "ak",
            _id: "id",
            id_tracking: "itr",
            imprint: "imp",
            sdk_version: "sv",
            resolution: "rl",
            testToken: "ttn",
            miniappDebugId: "dk",
            pixel_ratio: "pr"
        }, s = {
            uuid: "ud",
            unionid: "und",
            openid: "od",
            anonymousid: "nd",
            alipay_id: "ad",
            device_id: "dd",
            userid: "puid"
        };
        e.exports = function(e) {
            return {
                h: n(e.header, i),
                a: r(e.analytics, o)
            };
        };
    }, function(e, t, n) {
        function a() {
            var e = "", t = this;
            this.set = function(t) {
                e = "string" == typeof t ? t : i.encode(JSON.stringify(t));
            }, this.get = function() {
                return e;
            }, this.getImpObj = function() {
                return o.parse(i.decode(e));
            }, this.getItem = function(e) {
                var n = t.getImpObj();
                return n ? n[e] || "" : "";
            }, this.load = function() {
                e = r().get(s.IMPRINT);
            }, this.save = function() {
                e && r().set(s.IMPRINT, e);
            };
        }
        var r = n(16), o = n(17), i = n(27), s = n(3), u = new a();
        e.exports = u;
    }, function(e, t) {
        var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(e) {
            for (var t = {}, n = 0, a = e.length; n < a; n++) t[e.charAt(n)] = n;
            return t;
        }(n), r = String.fromCharCode, o = function(e) {
            var t;
            return e.length < 2 ? (t = e.charCodeAt(0), t < 128 ? e : t < 2048 ? r(192 | t >>> 6) + r(128 | 63 & t) : r(224 | t >>> 12 & 15) + r(128 | t >>> 6 & 63) + r(128 | 63 & t)) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), 
            r(240 | t >>> 18 & 7) + r(128 | t >>> 12 & 63) + r(128 | t >>> 6 & 63) + r(128 | 63 & t));
        }, i = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, s = function(e) {
            return e.replace(i, o);
        }, u = function(e) {
            var t = [ 0, 2, 1 ][e.length % 3], a = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), r = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), t >= 2 ? "=" : n.charAt(a >>> 6 & 63), t >= 1 ? "=" : n.charAt(63 & a) ];
            return r.join("");
        }, c = function(e) {
            return e.replace(/[\s\S]{1,3}/g, u);
        }, l = function(e) {
            return c(s(e));
        }, p = function(e, t) {
            return t ? l(String(e)).replace(/[+\/]/g, function(e) {
                return "+" == e ? "-" : "_";
            }).replace(/\=/g, "") : l(String(e));
        }, f = new RegExp([ "[-][-]", "[-][-]{2}", "[-][-]{3}" ].join("|"), "g"), g = function(e) {
            switch (e.length) {
              case 4:
                var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536;
                return r((n >>> 10) + 55296) + r((1023 & n) + 56320);

              case 3:
                return r((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));

              default:
                return r((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1));
            }
        }, d = function(e) {
            return e.replace(f, g);
        }, _ = function(e) {
            var t = e.length, n = t % 4, o = (t > 0 ? a[e.charAt(0)] << 18 : 0) | (t > 1 ? a[e.charAt(1)] << 12 : 0) | (t > 2 ? a[e.charAt(2)] << 6 : 0) | (t > 3 ? a[e.charAt(3)] : 0), i = [ r(o >>> 16), r(o >>> 8 & 255), r(255 & o) ];
            return i.length -= [ 0, 0, 2, 1 ][n], i.join("");
        }, h = function(e) {
            return e.replace(/[\s\S]{1,4}/g, _);
        }, v = function(e) {
            return d(h(e));
        }, m = function(e) {
            return v(String(e).replace(/[-_]/g, function(e) {
                return "-" == e ? "+" : "/";
            }).replace(/[^A-Za-z0-9\+\/]/g, ""));
        };
        t.encode = p, t.decode = m;
    }, function(e, t, n) {
        "use strict";
        function a() {
            try {
                for (var e = u, t = [], n = -(1 / 0), a = 1 / 0, r = 0, o = 0, i = 0; i < e.length; i++) {
                    var c = e[i];
                    n < c && (n = c), a >= c && (a = c), r += c, t.push(c);
                }
                return t.length > 0 && (o = r / t.length, o = Math.floor(100 * o) / 100), {
                    max: n,
                    min: a,
                    average: o
                };
            } catch (e) {
                s().w(e);
            }
        }
        function r() {
            try {
                for (var e = performance.getEntries(), t = [], n = [ i.WEB_EVENT_SUFFIX, i.WEB_PC_PV_SUFFIX, i.WEB_WAP_PV_SUFFIX ], a = -(1 / 0), r = 1 / 0, o = 0, u = 0, c = 0; c < e.length; c++) {
                    var l = e[c], p = [ "beacon", "other", "img" ].some(function(e) {
                        return e === l.initiatorType;
                    }), f = n.some(function(e) {
                        return l.name.indexOf(e) > -1;
                    });
                    if (p && f) {
                        var g = l.duration;
                        a < g && (a = g), r >= g && (r = g), o += g, t.push(g);
                    }
                }
                return t.length > 0 && (u = o / t.length), {
                    max: a,
                    min: r,
                    average: u
                };
            } catch (e) {
                s().w(e);
            }
        }
        var o = n(2), i = n(3), s = n(12), u = [];
        t.getMetric = a, t.getMetricWeb = r, t.push = function(e) {
            var t = e.end - e.start;
            "number" == typeof t && t >= 300 ? u.push(t) : u = [];
        }, t.needSendPerformanceEvent = function() {
            if (u.length >= 10) {
                var e = o.getGlobalValue(i.APLUS);
                e._record(i.PERFORMANCE_WARING, "OTHER", {}), u = [];
            }
        }, t.clear = function() {
            u = [];
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t;
            return t = l.isWeb() ? p.getLsRemoteCfg(g) : f().getSync(c.APLUS_REMOTE_CONFIG), 
            t && t[e];
        }
        function r(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DISABLE_AUTOEVENT_REMOTE, e ]
            });
        }
        function o(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DEVICE_ENABLE, e ]
            });
        }
        function i(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DISABLE_AUTOPV_REMOTE, e ]
            });
        }
        function s(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_AUTOTRACK_ENABLED_REMOTE, e ]
            });
        }
        var u = n(11), c = n(3), l = n(2), p = n(30), f = n(16), g = "APLUS_REMOTE_CONFIG";
        t.getAutoEventStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOEVENT_REMOTE) || a("codelessClickEventStatus");
            return t;
        }, t.getDeviceStatus = function() {
            var e = l.getGlobalValue("aplus");
            return a("currentDeviceEnable") || e.getMetaInfo(c.APLUS_DEVICE_ENABLE);
        }, t.getAutoPageStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOPV_REMOTE) || a("codelessCollectorPageStatus");
            return t;
        }, t.getAutoTrackStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_AUTOTRACK_ENABLED_REMOTE) || a("codelessStatus");
            return t;
        }, t.enableCfg = function(e) {
            var t = l.getContext();
            e && (r(e.codelessClickEventStatus), i(e.codelessCollectorPageStatus), s(e.codelessStatus), 
            o(e.currentDeviceEnable), e.eventSamplingRate && e.eventSamplingRate.length > 0 && t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_EVENT_LIMITRATES, u.mapEventSampleRates(e.eventSamplingRate) ]
            }), e.codelessIgnoreComponent && e.codelessIgnoreComponent.length > 0 && t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_AUTOTRACK_CONFIG_REMOTE, e.codelessIgnoreComponent ]
            }));
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(31), r = n(32), o = n(2), i = n(33), s = n(17), u = n(11);
        e.exports = {
            tryToDecodeURIComponent: function(e, t) {
                var n = t || "";
                if (e) try {
                    n = decodeURIComponent(e);
                } catch (e) {}
                return n;
            },
            parseSemicolonContent: function(e, t, n) {
                t = t || {};
                var r, o, i = e.split(";"), s = i.length;
                for (r = 0; r < s; r++) {
                    o = i[r].split("=");
                    var u = a.trim(o.slice(1).join("="));
                    t[a.trim(o[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
                }
                return t;
            },
            nodeListToArray: function(e) {
                var t, n;
                try {
                    return t = [].slice.call(e);
                } catch (r) {
                    t = [], n = e.length;
                    for (var a = 0; a < n; a++) t.push(e[a]);
                    return t;
                }
            },
            getLsCna: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("_") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return decodeURIComponent(n);
                }
                return "";
            },
            setLsCna: function(e, t, n) {
                n && r.set && r.test() && r.set(e, t + "_" + encodeURIComponent(n));
            },
            getLsImpv: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("||") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return decodeURIComponent(n);
                }
                return "";
            },
            setLsImpv: function(e, t, n) {
                n && r.set && r.test() && r.set(e, t + "||" + encodeURIComponent(n));
            },
            setLsRemoteCfg: function(e, t, n) {
                if (n && r.set && r.test()) {
                    var a = i.cloneDeep(n);
                    "object" == typeof a && (a = JSON.stringify(a)), r.set(e, t + "||" + encodeURIComponent(a));
                }
            },
            getLsRemoteCfg: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("||") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return s.parse(decodeURIComponent(n));
                }
                return "";
            },
            getUrl: function(e) {
                var t = o.getGlobalValue("aplus"), a = n(3), r = e || "//log.mmstat.com/eg.js";
                try {
                    var i = t.getMetaInfo(a.APLUS_PV_DOMAIN);
                    i = u.fixDomain(i).replace(/\/\w+.gif$/, ""), r = i + "/eg.js";
                } catch (e) {}
                return r;
            }
        };
    }, function(e, t) {
        "use strict";
        function n(e) {
            return "string" == typeof e ? e.replace(/^\s+|\s+$/g, "") : "";
        }
        t.trim = n;
    }, function(e, t) {
        "use strict";
        e.exports = {
            set: function(e, t) {
                try {
                    return localStorage.setItem(e, t), !0;
                } catch (e) {
                    return !1;
                }
            },
            get: function(e) {
                try {
                    return localStorage.getItem(e);
                } catch (e) {
                    return "";
                }
            },
            test: function() {
                var e = "grey_test_key";
                try {
                    return localStorage.setItem(e, 1), localStorage.removeItem(e), !0;
                } catch (e) {
                    return !1;
                }
            },
            remove: function(e) {
                localStorage.removeItem(e);
            }
        };
    }, function(e, t, n) {
        "use strict";
        t.assign = n(34), t.makeCacheNum = function() {
            return Math.floor(268435456 * Math.random()).toString(16);
        }, t.isStartWith = function(e, t) {
            return 0 === e.indexOf(t);
        }, t.isEndWith = function(e, t) {
            var n = e.length, a = t.length;
            return n >= a && e.indexOf(t) == n - a;
        }, t.any = function(e, t) {
            var n, a = e.length;
            for (n = 0; n < a; n++) if (t(e[n])) return !0;
            return !1;
        }, t.isNumber = function(e) {
            return "number" == typeof e;
        }, t.isNaN = function(e) {
            return isNaN ? isNaN(e) : e !== e;
        }, t.isContain = function(e, t) {
            return e.indexOf(t) > -1;
        };
        var a = function(e) {
            var t, n = e.constructor === Array ? [] : {};
            if ("object" == typeof e) {
                if (JSON && JSON.parse) t = JSON.stringify(e), n = JSON.parse(t); else for (var r in e) n[r] = "object" == typeof e[r] ? a(e[r]) : e[r];
                return n;
            }
        };
        t.cloneDeep = a;
        var r = function() {
            for (var e, t = /[?&]([^=#]+)=([^&#]*)/g, n = window.location.href, a = {}; e = t.exec(n); ) a[e[1]] = e[2];
            return a;
        };
        t.getUrlParams = r;
        var o = function(e) {
            if (!e) return !0;
            for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
            return !0;
        };
        t.isEmptyObject = o;
    }, function(e, t) {
        e.exports = function(e, t) {
            return "function" != typeof Object.assign ? function(e) {
                for (var t = Object(e), n = 1; n < arguments.length; n++) {
                    var a = arguments[n];
                    if (null !== a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
                }
                return t;
            }(e, t) : Object.assign({}, e, t);
        };
    }, function(e, t, n) {
        var a = n(12);
        e.exports = function(e) {
            var t = e, n = [];
            this.enqueue = function(e) {
                "number" == typeof t && this.size() >= t && this.dequeue(), n.push(e);
            }, this.dequeue = function() {
                return n.shift();
            }, this.front = function() {
                return n[0];
            }, this.isEmpty = function() {
                return 0 === n.length;
            }, this.clear = function() {
                n.length = 0;
            }, this.size = function() {
                return n.length;
            }, this.items = function() {
                return n;
            }, this.print = function() {
                a().i("---queue: ", n.toString());
            };
        };
    }, function(e, t, n) {
        function a(e, t) {
            if (!e || "-" === e) return "-";
            var n = [];
            for (var a in t) n.push(a + "=" + t[a]);
            var r = n.join("&");
            return r ? e + "?" + r : e;
        }
        var r = n(2), o = "", i = {};
        t.getCurrentPagePath = function() {
            return o;
        }, t.setCurrentPath = function(e) {
            e && (o = e);
        }, t.getPageQuery = function(e) {
            if (e) return i[e];
        }, t.setPageQuery = function(e, t) {
            e && (i[e] = t);
        }, t.getFullPath = function(e) {
            return a(e, i[e]);
        }, t.getPageName = function(e) {
            var t = r.getGlobalValue("aplus"), n = t.getMetaInfo("pageConfig") || {}, a = e || o;
            n.hashMode && (a = location.hash);
            try {
                if (n && "object" == typeof n) for (var i in n) {
                    if (i === a) break;
                    if (n[i] && n[i].regRule) {
                        a = n[i].regRule.test(a) ? i : a;
                        break;
                    }
                }
            } catch (e) {}
            return n[a];
        };
        var s = n(12), u = n(37);
        t.getWxTitle = function(e) {
            if (!e) return "";
            var t = n(9), a = t.getPlatformType(), o = "";
            try {
                if ("wx" === a && __wxConfig) {
                    var i = __wxConfig, c = __wxConfig.page || {}, l = c[e] || c[e + ".html"], p = {}, f = {};
                    if (i.global && i.global.window && i.global.window.navigationBarTitleText && (p.title = i.global.window.navigationBarTitleText), 
                    l && l.window && l.window.navigationBarTitleText && (f.title = l.window.navigationBarTitleText), 
                    !f.title && __wxAppCode__) {
                        var g = __wxAppCode__[e + ".json"];
                        g && g.navigationBarTitleText && (f.title = g.navigationBarTitleText);
                    }
                    var d = r.getContext();
                    d.globalTitleMap && u(d.globalTitleMap, function(t, n) {
                        t === e && (o = n);
                    }), 0 === o.length && (o = f.title || p.title || "");
                }
                return o;
            } catch (e) {
                return s().w("current platform can not track page title"), o;
            }
        }, t.getPageCode = function(e) {
            return (this.getPageName(e) || {}).pageName;
        }, t.getPageTitle = function(e) {
            return (this.getPageName(e) || {}).pageTitle || this.getWxTitle(e);
        }, t.getVTRealtimeCode = function() {
            if (o) {
                var e = i[o] || {}, t = /^\$vt_/, n = decodeURIComponent(e.scene);
                return n && t.test(n) && n.replace(t, "");
            }
        };
    }, function(e, t) {
        "use strict";
        e.exports = function(e, t) {
            if (Object && Object.keys) for (var n = Object.keys(e), a = n.length, r = 0; r < a; r++) {
                var o = n[r];
                t(o, e[o]);
            } else for (var i in e) t(i, e[i]);
        };
    }, function(e, t, n) {
        function a() {
            var e = o.getContext();
            return e.ekvRank ? e.ekvRank++ : e.ekvRank = 1, e.ekvRank;
        }
        function r() {
            var e = o.getContext();
            e.ekvRank = 0;
        }
        var o = n(2);
        t.rank = a, t.clear = r;
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t = {};
            try {
                P(e, function(e, n) {
                    0 === e.indexOf("utm_") && (t[e] = n);
                });
            } catch (e) {}
            return t;
        }
        function r(e, t) {
            var n = y.getContext(), a = T.getCurrentPage(), r = a.route || a.is || "", o = a.options || {}, i = A.obj2param(o, !0);
            i && (r = r + "?" + i), e.query || (e.query = {}), e.query.$$_share_uid = n.aplus.getMetaInfo("_anony_id") || n.aplus.__ETAG__CNA__ID__, 
            e.query.$$_utm_medium = 3, e.query = C.assign({}, o, e.query);
            var s = e.path || r, u = "$$_share_uid=" + e.query.$$_share_uid + "&$$_utm_medium=3";
            return s.indexOf("?") > -1 ? e.path = s + "&" + u : e.path = s + "?" + u, e.status = "ready", 
            n.aplus_queue.push({
                action: S.PUBLISH,
                arguments: [ t, e ]
            }), e;
        }
        function o() {
            var e = y.getContext(), t = {
                status: "ready"
            };
            e.aplus_queue.push({
                action: S.PUBLISH,
                arguments: [ "onPullDownRefresh", t ]
            });
        }
        function i() {
            var e = y.getContext(), t = this, n = {
                status: "ready",
                context: t
            };
            e.aplus_queue.push({
                action: S.PUBLISH,
                arguments: [ "onReachBottom", n ]
            });
        }
        function s(e) {
            var t = y.getContext();
            try {
                I.setCurrentPath(this.route), e && I.setPageQuery(this.route, e), E().i("Page onLoad: ", this.route, e);
                var n = this;
                b.onAplusReady(t.aplus_queue, S.SUBSCRIBE, function() {
                    t.aplus.appendMetaInfo(S.GLOBAL_PROPERTY, a(e)), t.aplus_queue.push({
                        action: S.PUBLISH,
                        arguments: [ "onLoad", {
                            status: "ready",
                            context: n
                        } ]
                    });
                    var r = T.getCurrentPage();
                    b.resetFn(r, "setData", function(e) {
                        t.aplus_queue.push({
                            action: S.PUBLISH,
                            arguments: [ "onPageDataChanged", {
                                data: e,
                                context: n
                            } ]
                        });
                    });
                });
            } catch (e) {
                E().w("onPageLoad: ", e);
            }
        }
        function u() {
            var e = y.getContext();
            try {
                I.setCurrentPath(this.route), b.onAplusReady(e.aplus_queue, S.SUBSCRIBE, function() {
                    var t = this;
                    e.aplus_queue.push({
                        action: S.PUBLISH,
                        arguments: [ "onShow", {
                            status: "ready",
                            context: t
                        } ]
                    });
                });
            } catch (e) {
                E().w("onPageShow: ", e);
            }
        }
        function c() {
            var e = y.getContext();
            try {
                var t = this;
                e.aplus_queue.push({
                    action: S.PUBLISH,
                    arguments: [ "onReady", {
                        status: "ready",
                        context: t
                    } ]
                });
            } catch (e) {
                E().w("onPageReady: ", e);
            }
        }
        function l() {
            var e = y.getContext();
            try {
                e.aplus_queue.push({
                    action: S.PUBLISH,
                    arguments: [ "onHide", {
                        status: "ready"
                    } ]
                });
            } catch (e) {
                E().w("onPageHide: ", e);
            }
        }
        function p(e) {
            var t = y.getContext();
            t.aplus_queue.push({
                action: S.PUBLISH,
                arguments: [ "onAplusClk", {
                    status: "ready",
                    event: e,
                    context: this
                } ]
            });
        }
        function f(e) {
            var t = y.getContext(), n = this;
            t.aplus_queue.push({
                action: S.PUBLISH,
                arguments: [ "onAplusTouch", {
                    status: "ready",
                    context: n,
                    event: e
                } ]
            });
        }
        function g(e) {
            if (e.onShareAppMessage) {
                var t = e.onShareAppMessage;
                e.onShareAppMessage = function(e) {
                    var n = t.call(this, e) || {};
                    return r(n, "onShareAppMessage");
                };
            }
        }
        function d(e) {
            if (e.onShareTimeline) {
                var t = e.onShareTimeline;
                e.onShareTimeline = function(e) {
                    var n = t.call(this, e) || {};
                    return r(n, "onShareTimeline");
                };
            }
        }
        function _() {
            try {
                var e, t = Page;
                t.after && (e = t.after), Page = function(e) {
                    b.rewriteFn(e, "onShow", u), b.rewriteFn(e, "onHide", l), b.rewriteFn(e, "onUnload", l), 
                    b.rewriteFn(e, "onLoad", s), b.rewriteFn(e, "onReady", c), b.rewriteFn(e, "onPullDownRefresh", o), 
                    b.rewriteFn(e, "onReachBottom", i), b.rewriteFn(e, "onAplusClk", p), b.rewriteFn(e, "onAplusTouch", f), 
                    g(e), d(e), t(e);
                }, e && (Page.after = function() {
                    e.apply(this, arguments);
                });
            } catch (e) {
                E().w("Page hook error");
            }
        }
        function h() {
            try {
                var e = Component;
                Component = function(t) {
                    try {
                        t.methods = t.methods || {};
                        var n = t.methods;
                        b.rewriteFn(n, "onShow", u), b.rewriteFn(n, "onHide", l), b.rewriteFn(n, "onUnload", l), 
                        b.rewriteFn(n, "onLoad", s), g(n), e(t);
                    } catch (n) {
                        e(t);
                    }
                };
            } catch (e) {
                E().w("Component hook error");
            }
        }
        function v(e, t, n) {
            [ "object", "function" ].indexOf(typeof e) > -1 ? n() : E().w("typeof " + t + " is not object cant watchExp.");
        }
        function m() {
            var e = this, t = y.getContext(), a = n(9), r = a.getContext();
            try {
                if (r && r.setNavigationBarTitle) {
                    var o = r.setNavigationBarTitle;
                    Object.defineProperty(r, "setNavigationBarTitle", {
                        get: function() {
                            return function(n) {
                                var r = a.getCurrentPage(), i = r.route || r.is;
                                n = x.isObject(n) ? n : {}, O[i] = n.title, t.globalTitle = O, o.call(e, n);
                            };
                        }
                    });
                }
            } catch (e) {
                E().w(e);
            }
        }
        var y = n(2), S = n(3), b = n(40), P = n(37), A = n(42), E = n(12), I = n(36), T = n(9), C = n(18), x = n(13), O = {};
        e.exports = function() {
            return {
                run: function() {
                    v(Page, "Page", _), v(Component, "Component", h), m();
                }
            };
        };
    }, function(e, t, n) {
        t.resetFn = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
            e[t] = function() {
                var e = a && a.apply(this, arguments);
                return e ? n.call(this, e) : n.apply(this, arguments);
            };
        }, t.rewriteFn = function(e, t, n) {
            var a = e[t];
            e[t] = function(e) {
                n.call(this, e), a && a.call(this, e);
            };
        }, t.onAplusReady = function(e, t, n) {
            e.push({
                action: t,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && "function" == typeof n && n();
                } ]
            });
        };
        var a = n(41), r = n(9), o = n(12), i = n(11), s = n(37), u = n(13), c = n(34);
        t.click_proxy = function(e, t) {
            var l = n(2), p = l.getGlobalValue("aplus"), f = e[t];
            e[t] = function() {
                var e = f.apply(this, arguments), n = arguments[0];
                if (n && u.isObject(n) && p && p._record) {
                    var l = r.getCurrentPage(), g = Object.create(null);
                    n.currentTarget && (n.currentTarget.dataset && s(n.currentTarget.dataset, function(e, t) {
                        !u.isObject(t) && t && (g[e] = t);
                    }), n.currentTarget.id && (g.element_id = n.currentTarget.id));
                    var d = l.route || l.is || "unknown_page";
                    "unknown_page" === d && o().w("get pagepath failed in click_proxy", l), g = c(g, {
                        is_auto: 1
                    });
                    var _ = a.hash(d, i.getAppKey()) + a.hash(t, i.getAppKey());
                    p._record(_, "CLK", g);
                }
                return e;
            };
        };
    }, function(e, t) {
        "use strict";
        t.hash = function(e, t) {
            var n, a, r = 1315423911, o = t || r;
            for (n = e.length - 1; n >= 0; n--) a = e.charCodeAt(n), o ^= (o << 5) + a + (o >> 2);
            var i = (2147483647 & o).toString(16);
            return i;
        };
    }, function(e, t) {
        "use strict";
        function n(e, t) {
            var n, r, o, i = [], s = e.length;
            for (o = 0; o < s; o++) {
                n = e[o][0], r = e[o][1];
                var u = 0 === n.indexOf(a), c = u || t ? r : encodeURIComponent(r);
                i.push(u ? c : n + "=" + c);
            }
            return i.join("&");
        }
        t.arr2obj = function(e) {
            var t, n, a, r = {}, o = e.length;
            for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
            return r;
        }, t.param2obj = function(e) {
            if ("object" == typeof e) return e;
            var t = {};
            if (!e || "string" != typeof e) return t;
            for (var n = e.split("&"), a = 0; a < n.length; a++) {
                var r = n[a], o = r.indexOf("="), i = r.split("="), s = r.length;
                if (2 === i.length) t[i[0]] = i[1] || ""; else if (o > 0) {
                    var u = r.slice(0, o), c = r.slice(o + 1, s) || "";
                    t[u] = c;
                } else t[i[0]] = "";
            }
            return t;
        };
        var a = "::-plain-::";
        t.s_plain_obj = a, t.arr2param = n, t.obj2param = function(e, t) {
            var n, r, o, i = [];
            for (n in e) n && e.hasOwnProperty(n) && ("object" == typeof e[n] ? (r = "" + this.obj2param(e[n]), 
            o = r) : (r = "" + e[n], o = n + "=" + r), t ? i.push(o) : i.push(0 === n.indexOf(a) ? r : o));
            return i.join("&");
        }, t.encodeGokeyValue = function(e) {
            return e;
        };
    }, function(e, t, n) {
        var a = n(44), r = n(2);
        e.exports = function() {
            return {
                run: function() {
                    var e = r.getGlobalValue("aplus");
                    e.aplus_pubsub || (e.aplus_pubsub = a.create());
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(10), r = n(45), o = function(e) {
            for (var t = e.length, n = new Array(t - 1), a = 1; a < t; a++) n[a - 1] = e[a];
            return n;
        }, i = r.extend({
            callable: function(e) {
                if (!a(e)) throw new TypeError(e + " is not a function");
                return e;
            },
            create: function(e) {
                var t = new this();
                for (var n in e) t[n] = e[n];
                return t.handlers = [], t.pubs = {}, t;
            },
            setHandlers: function(e) {
                this.handlers = e;
            },
            subscribe: function(e, t) {
                this.callable(t);
                var n = this, a = n.pubs || {}, r = a[e] || [];
                if (r) for (var o = 0; o < r.length; o++) {
                    var i = r[o]();
                    t.apply(n, i);
                }
                var s = n.handlers || [];
                return e in s || (s[e] = []), s[e].push(t), n.setHandlers(s), n;
            },
            unsubscribe: function(e, t) {
                this.callable(t);
                try {
                    var n = this.handlers[e];
                    if (!n) return this;
                    if ("object" == typeof n && n.length > 0) {
                        for (var a = 0; a < n.length; a++) {
                            var r = t.toString(), o = n[a].toString();
                            r === o && n.splice(a, 1);
                        }
                        this.handlers[e] = n;
                    } else delete this.handlers[e];
                } catch (e) {}
                return this;
            },
            publish: function(e) {
                var t = o(arguments), n = this.handlers || [], r = n[e] ? n[e].length : 0;
                if (r > 0) for (var i = 0; i < r; i++) {
                    var s = n[e][i];
                    a(s) && s.apply(this, t);
                }
                return this;
            },
            cachePubs: function(e) {
                var t = this.pubs || {}, n = o(arguments);
                t[e] || (t[e] = []), t[e].push(function() {
                    return n;
                });
            }
        });
        e.exports = i;
    }, function(e, t, n) {
        "use strict";
        function a() {}
        var r = n(10);
        a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(e) {
            return this.prototype.extend.call(this, e);
        }, a.prototype.create = function(e) {
            var t = new this();
            for (var n in e) t[n] = e[n];
            return t;
        }, a.prototype.extend = function(e) {
            var t = function() {};
            try {
                r(Object.create) || (Object.create = function(e) {
                    function t() {}
                    return t.prototype = e, new t();
                }), t.prototype = Object.create(this.prototype);
                for (var n in e) t.prototype[n] = e[n];
                t.prototype.constructor = t, t.extend = t.prototype.extend, t.create = t.prototype.create;
            } catch (e) {
                console && console.log(e);
            } finally {
                return t;
            }
        }, e.exports = a;
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(47)(this.options.context.aplus_config);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(48);
        e.exports = function(e) {
            var t = a.getGlobalValue(r.APLUS), n = t._$ = t._$ || {};
            n.is_terminal = !0, n.send_pv_count = 0, n.spm = {
                data: {}
            }, n.meta_info = o.qGet() || {}, t.globalConfig = e.globalConfig;
            for (var i in e.metaInfo) o.setMetaInfo(i, e.metaInfo[i]);
            t._$ = n, t.isInternational = function() {
                return !1;
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            return i = f || {}, f;
        }
        function r() {
            return i || a();
        }
        function o(e, t) {
            return i || (i = {}), "aplus-inject-record-gokey" === e && (_("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter"), 
            p.record("/inject.record.gokey", "OTHER", "")), i[e] = t, !0;
        }
        var i, s = n(49), u = n(42), c = n(2), l = n(3), p = c.getGlobalValue(l.APLUS), f = {}, g = "object", d = "string";
        t.getInfo = a, t.qGet = r, t.setMetaInfo = o;
        var _ = function(e) {
            try {
                console && console.error(e);
            } catch (e) {}
        };
        t.catchException = _;
        var h = function(e) {
            return i || (i = {}), i[e] || "";
        };
        t.getMetaInfo = h;
        var v = function(e) {
            var t = h("aplus-inject-record-gokey");
            return "function" == typeof t ? t(e) : e.gokey;
        };
        t.getUserInjectGokey = v;
        var m = function(e, t) {
            if (e && t) {
                var n, a = function(n) {
                    try {
                        var a = typeof t === d ? JSON.parse(t) : t;
                        i(e, Object.assign({}, n, a));
                    } catch (e) {}
                }, r = function(n) {
                    try {
                        var a = typeof t === d ? JSON.parse(t) : t;
                        i(e, n.concat(a));
                    } catch (e) {}
                }, o = function(e) {
                    e.constructor === Array ? r(e) : a(e);
                }, i = function(e, t) {
                    y(e, t, {
                        from: "appendMetaInfo"
                    });
                }, s = h(e);
                if ("aplus-exinfo" === e && (i(e, Object.assign({}, s, u.param2obj(t))), n = !0), 
                "aplus-page-properties" === e) {
                    var c = t;
                    if (s) for (var l in s) t[l] ? c[l] = Object.assign({}, s[l], t[l]) : c[l] = s[l];
                    i(e, c), n = !0;
                }
                if (s) if (typeof s === g) o(s), n = !0; else try {
                    var p = JSON.parse(s);
                    typeof p === g && (o(p), n = !0);
                } catch (e) {}
                n || i(e, t);
            }
        };
        t.appendMetaInfo = m;
        var y = function(e, t) {
            var n, a, i = "OVERWRITE", u = i;
            if ("object" == typeof e ? (n = e.metaName, a = e.metaValue, u = e.mode || i) : (n = e, 
            a = t), u !== i) return m(n, a);
            if (o(n, a)) {
                var l = c.getGoldlogVal("_$") || {};
                l.meta_info = r();
                var p = c.setGoldlogVal("_$", l), f = [ "setMetaInfo", n, a, {} ];
                return s.doPubMsg(f), s.doCachePubs(f), p;
            }
        };
        t._setMetaInfo = y;
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = "function", o = function() {
            var e = a.getGlobalValue("aplus"), t = e.aplus_pubsub || {}, n = typeof t.publish === r;
            return n ? t : "";
        };
        t.doPubMsg = function(e) {
            var t = o();
            t && typeof t.publish === r && t.publish.apply(t, e);
        }, t.doCachePubs = function(e) {
            var t = o();
            t && typeof t.cachePubs === r && t.cachePubs.apply(t, e);
        }, t.doSubMsg = function(e, t) {
            var n = o();
            n && typeof n.subscribe === r && n.subscribe(e, t);
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(7);
        e.exports = function() {
            return {
                getLogConfig: function() {
                    var e = {}, t = this.options.config.plugins;
                    for (var n in t) e[n] = {
                        plugins: t[n],
                        context: {}
                    }, a(t[n], function(t) {
                        e[n].context[t.name] = t.config || {};
                    });
                    return e;
                },
                run: function() {
                    this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(9), o = n(3), i = n(52), s = n(12), u = "EMPTY_CNA";
        e.exports = function() {
            return {
                _syncEtag: function(e) {
                    var t, n = a.getGlobalValue(o.APLUS), c = this, l = function(t) {
                        var r = t && t.data ? t.data.cna : "";
                        r ? (a.setGoldlogVal(g, r), e(r)) : "Y" === n.fetchEtagStatus ? n.aplus_pubsub.subscribe("etag", function(t) {
                            e(t);
                        }) : d();
                    }, p = n.getMetaInfo(o.APLUS_PV_DOMAIN);
                    p && (t = i.getUrl({
                        egUrl: (p.indexOf("//") === -1 ? "//" + p : p) + "/eg.js"
                    }), c.options.context.etag && (c.options.context.etag.egUrl = t));
                    var f = r.getContext(), g = n.globalConfig.ETAG_STORAGE_KEY, d = function() {
                        t && (n.fetchEtagStatus = "Y", r.request(t, {
                            dataType: "text",
                            requestMethodName: "request"
                        }, function(t) {
                            n.fetchEtagStatus = "N";
                            var r = "";
                            try {
                                var o = t.data || "", i = o.split(";");
                                if (i.length > 1) {
                                    var c = i[1], l = c.split("=");
                                    r = l[1] || "", r = r.replace(/\"/g, ""), a.setGoldlogVal(g, r), f.setStorage({
                                        key: g,
                                        data: {
                                            cna: r
                                        }
                                    }), n.aplus_pubsub.publish("etag", r), n.aplus_pubsub.cachePubs("etag", r);
                                }
                            } catch (e) {
                                s().w(e);
                            }
                            r || (r = u), e(r);
                        }, function(e) {
                            s().w(e);
                        }));
                    }, _ = a.getGoldlogVal(g);
                    _ ? e(_) : f.getStorage({
                        key: g,
                        success: function(e) {
                            l(e);
                        },
                        fail: function(e) {
                            l(e);
                        }
                    });
                },
                run: function(e, t) {
                    var n = this, r = a.getGlobalValue("aplus"), o = r.getMetaInfo("aplus-etag-timeout"), i = 200, s = i;
                    try {
                        s = parseInt(o), isNaN(s) && (s = i);
                    } catch (e) {}
                    if (this._syncEtag(function(e) {
                        n.options.context.etag && (n.options.context.etag.cna = e), s >= 200 && t(e);
                    }), !(s < 200)) return s;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(30);
        t.getUrl = function(e) {
            var t = a.getUrl(e && e.egUrl);
            return t;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3);
        e.exports = function() {
            return {
                getMetaInfo: function() {
                    var e = a.getGoldlogVal("_$") || {}, t = e.meta_info;
                    return t;
                },
                getAplusWaiting: function() {
                    var e = this.getMetaInfo() || {};
                    return e["aplus-waiting"];
                },
                run: function(e, t) {
                    var n = this.options.config || {}, a = this.getAplusWaiting();
                    if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                        aplusWaiting: a
                    }, a) {
                      case r._USER_ID:
                      case r._ANONY_ID:
                      case "MAN":
                        return "done";

                      case "1":
                        return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                            t();
                        }, 6e3), 6e3;

                      default:
                        var o = 1 * a;
                        if (o + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                            t();
                        }, o), o;
                    }
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(12), o = n(9), i = n(3), s = n(11);
        e.exports = function() {
            return {
                getMetaInfo: function(e) {
                    var t = a.getGoldlogVal("_$") || {};
                    return (t.meta_info || {})[e];
                },
                getHostUrl: function() {
                    var e = this.getMetaInfo(i.APLUS_PV_DOMAIN);
                    if (s.checkDomain(e)) {
                        var t = o.getLogDomain();
                        return t ? s.fixDomain(e) + t : (r().tip_w("current miniapp framework is not supported!!"), 
                        "");
                    }
                },
                run: function() {
                    this.options.context.where_to_send.method = "POST";
                    var e = this.getHostUrl();
                    return !e || e.indexOf("https://") < 0 && e.indexOf("http://") ? (r().w("current trackDomain invalid: " + e), 
                    "done") : void (this.options.context.where_to_send.url = e);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(12), i = n(9), s = n(56), u = n(57), c = n(11), l = r.SPM_CNT, p = r.SPM_URL, f = r.SPM_PRE;
        e.exports = function() {
            return {
                getCommonParams: function() {
                    var e = a.getGlobalValue(r.APLUS), t = this.options.context || {}, g = t.etag || {}, d = t.userdata || {}, _ = a.getGoldlogVal("_$") || {}, h = _.spm || {}, v = this.options.config || {}, m = e.getMetaInfo("platformType") || i.getPlatformType(), y = {
                        _dev_id: e.getMetaInfo("_dev_id"),
                        _anony_id: e.getMetaInfo(r._ANONY_ID),
                        _user_id: e.getMetaInfo(r._USER_ID),
                        _user_nick: e.getMetaInfo("_user_nick"),
                        _session_id: e.getMetaInfo("_session_id"),
                        uaid: e.getMetaInfo("uaid") + "" == "1" ? 1 : 0
                    };
                    if (!e.globalConfig.isUM) {
                        var S = n(36), b = i.getCurrentPage(), P = b.route || b.is || "";
                        y._page_title = S.getPageTitle(P) || "";
                    }
                    var A = e._aplus_client || {}, E = e.globalConfig || {}, I = "-";
                    try {
                        var T = getCurrentPages(), C = T[T.length - 1] || {}, x = d.gokey && d.gokey.currentPath;
                        I = x || C.route || C.is;
                    } catch (e) {}
                    var O = new Date().getTime() + I, M = A.model + A.networkType + v.title + g.cna, U = (E.isDecodeUrl ? "DC_" : "") + s.getLogId(O, M), k = c.getAppKey();
                    k || o().w("please set appKey in aplus metaInfo before sendPV!");
                    var w = Object.assign({}, {
                        appKey: k,
                        cache: U,
                        cna: g.cna,
                        etag: g,
                        pre: _.page_referrer || "-",
                        sdk_info: {
                            jsver: E.script_name,
                            lver: E.lver,
                            customSdkId: e.getMetaInfo("customSdkId") || "",
                            platformType: m.toLowerCase()
                        },
                        title: v.title || "",
                        url: I || "-",
                        client: A,
                        timeZone: u.getTimeZone(),
                        gmkey: d.gmkey || "",
                        method: this.options.context.where_to_send.method
                    }, y), L = y;
                    return h.spm_url && (L[p] = h.spm_url || ""), h.spm_pre && (L[f] = h.spm_pre || ""), 
                    h.spm_cnt && (L[l] = h.spm_cnt || ""), L[r.PVID] = e.pvid || "", w.sessionArgs = e.getMetaInfo("aplus-session-args"), 
                    w.globalArgs = e.getMetaInfo("aplus-global-args"), w.gokey = L, w;
                },
                getPvParams: function() {
                    var e = a.getGlobalValue(r.APLUS), t = this.getCommonParams();
                    return this.options.config.is_auto || (t.sdk_info.mansndlog = 1), Object.assign({}, t, {
                        event_code: r.PV_CODE,
                        logtype: "1",
                        logkey: "/vx.gif",
                        event_timestamp: e._$.send_pv_count > 0 ? new Date() : e.logConfig.pageLoadTime
                    });
                },
                getHjljParams: function() {
                    var e = this.options.context || {}, t = e.userdata || {}, n = {
                        event_code: r.EVENT_ID_MAP[t.gmkey] || t.gmkey,
                        logtype: "2",
                        logkey: t.logkey,
                        event_timestamp: new Date()
                    };
                    return Object.assign({}, this.getCommonParams(), n);
                },
                run: function() {
                    var e = {};
                    e = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                    this.options.context.what_to_send.logdata = e;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t, n) {
            return e ? r.hash(encodeURIComponent(e)).substr(0, t) : n;
        }
        var r = n(41), o = function(e) {
            function t(e) {
                var t = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
                return 1 == e ? t.substr(Math.floor(60 * Math.random()), 1) : 2 == e ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
            }
            for (var n, a = "", r = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", o = !1; a.length < e; ) n = r.substr(Math.floor(62 * Math.random()), 1), 
            !o && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = t(1), 
            o = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = t(2), 
            o = !0)), a += n;
            return a;
        };
        t.getLogId = function(e, t) {
            var n = o(8), r = n.substr(0, 4), i = n.substr(0, 6);
            return [ a(e, 4, r), a(t, 4, r), i ].join("");
        };
    }, function(e, t) {
        t.getTimeZone = function() {
            var e = -new Date().getTimezoneOffset() / 60, t = "+";
            e < 0 && (t = "-");
            var n = Math.abs(parseInt(e)), a = Math.abs(parseInt(e) - e), r = "00";
            return a > 0 && (r = 60 * a), "GMT" + t + (n > 9 ? n : "0" + n) + ":" + r;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(3), r = n(2), o = n(9);
        e.exports = function() {
            return {
                run: function() {
                    var e = o.isTB(), t = r.getGlobalValue(a.APLUS), n = this.options.context.what_to_send.logdata || {}, i = getCurrentPages(), s = i[i.length - 1] || {};
                    s && !n.title && (n.title = s.route || ""), t.globalConfig.isAli && (n.url = (e ? "" : "https://" + n.client.appId + "_") + (s.route || s.is || "-"));
                    var u = "-";
                    if (i.length > 1) {
                        var c = i[i.length - 2] || {};
                        u = (!e && t.globalConfig.isAli ? "https://" + n.client.appId + "_" : "") + (c.route || c.is || "-");
                    }
                    n.pre = u, n.sdk_info && (n.sdk_info.windmill = "1"), this.options.context.what_to_send.logdata = n;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(42), r = n(20), o = n(2), i = n(3), s = n(9), u = n(60);
        e.exports = function() {
            return {
                getUserdata: function() {
                    var e = o.getGlobalValue("aplus"), t = this.options.config || {}, n = {};
                    t && !t.is_auto && t.gokey && ("string" == typeof t.gokey ? n = a.param2obj(t.gokey) : "object" == typeof t.gokey && (n = t.gokey));
                    var i = function(e) {
                        r(e) ? e.forEach(function(e) {
                            n = Object.assign({}, n, e);
                        }) : n = Object.assign({}, n, e);
                    };
                    i(e.getMetaInfo("aplus-cpvdata"));
                    var u = s.getCurrentPage(), c = u.route || u.is || "page", l = e.getMetaInfo("aplus-page-properties") || {}, p = l[c];
                    "object" == typeof p && i(p);
                    var f = this.options.context || {}, g = f.userdata || {};
                    return i(g), n;
                },
                updatePre: function(e) {
                    var t = this.options.config || {}, n = o.getGoldlogVal("_$") || {};
                    return t && t.referrer && (n.page_referrer = t.referrer, e.pre = t.referrer), o.setGoldlogVal("_$", n), 
                    e;
                },
                updateUrl: function(e) {
                    var t = this.options.config || {};
                    return t && t.pageUrl && (e.url = t.pageUrl), e;
                },
                updateSpmUrl: function(e) {
                    var t = this.options.config || {}, n = t[i.SPM_URL] || t.spmUrl;
                    return u(n) || (e.gokey[i.SPM_URL] = n), e;
                },
                updateSpmPre: function(e) {
                    var t = this.options.config || {}, n = t[i.SPM_PRE] || t.spmPre;
                    return u(n) || (e.gokey[i.SPM_PRE] = n), e;
                },
                run: function() {
                    var e = this.options.context.what_to_send.logdata, t = Object.assign({}, this.getUserdata(), e.userdata || {});
                    e.gokey = Object.assign({}, e.gokey, t), e = this.updatePre(e), e = this.updateUrl(e), 
                    e = this.updateSpmUrl(e), e = this.updateSpmPre(e), this.options.context.what_to_send.logdata = e, 
                    this.options.context.userdata = e.gokey;
                }
            };
        };
    }, function(e, t) {
        e.exports = function(e) {
            return "undefined" == typeof e;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(62);
        e.exports = function() {
            return {
                run: function() {
                    var e = a.getGoldlogVal("_$") || {}, t = this.options.context.can_to_sendpv || {}, n = e.send_pv_count || 0, o = this.options.config || {};
                    return r.canSendPV(o.track_type) ? (t.flag = "YES", this.options.context.can_to_sendpv = t, 
                    e.send_pv_count = ++n, void a.setGoldlogVal("_$", e)) : "done";
                }
            };
        };
    }, function(e, t, n) {
        function a(e) {
            var t = o.getGlobalValue(i.APLUS), n = t.getMetaInfo(i.APLUS_EVENT_LIMITRATES);
            if (n && n.length > 0) {
                var a = c.find(n, function(t) {
                    return t.eventId === e;
                });
                if (a) {
                    var r = Math.ceil(1e3 * Math.random());
                    return r < 1e3 * a.samplingRate;
                }
                return !0;
            }
            return !0;
        }
        function r() {
            var e = o.getGlobalValue("aplus"), t = e.globalConfig.isUM;
            return !!t;
        }
        var o = n(2), i = n(3), s = n(29), u = n(63), c = n(64), l = n(9), p = n(33), f = n(11);
        t.canToSendHJLJ = function(e, t) {
            var n = s.getDeviceStatus();
            if (!n) try {
                var r = l.getContext();
                return p.isEmptyObject(r) ? void 0 : t === i.APP_START || t === i.APP_END;
            } catch (e) {}
            var o = s.getAutoTrackStatus(), c = s.getAutoEventStatus(), g = u.getAutoTrackStatus(), d = {};
            if (d = "string" == typeof e ? f.arr2obj(f.param2arr(e)) : e, d.auto_element) {
                if (2 === c || 2 === o) return;
                if (!o && !g) return;
            }
            if (a(t)) return !0;
        }, t.canSendPV = function(e) {
            if (!r()) return !0;
            var t = s.getDeviceStatus(), n = s.getAutoPageStatus(), a = u.localAutoPVDisabled(), o = !0;
            if (t) {
                if ("1" === e) return !(2 === n || !n && a);
            } else o = !1;
            return o;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(3), r = n(2);
        t.localAutoEventDisabled = function() {
            var e = r.getGlobalValue("aplus");
            return !!e.getMetaInfo(a.APLUS_DISABLE_AUTOEVENT);
        }, t.localAutoPVDisabled = function() {
            var e = r.getGlobalValue("aplus");
            return !(!e.getMetaInfo(a.APLUS_DISABLE_AUTOPV) && "MAN" !== e.getMetaInfo("aplus-waiting"));
        }, t.getAutoTrackStatus = function() {
            var e = r.getGlobalValue("aplus");
            return !!e.getMetaInfo(a.APLUS_AUTOTRACK_ENABLED);
        };
    }, function(e, t) {
        "use strict";
        function n(e) {
            return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
        }
        function a(e) {
            var t = [];
            if (n(e)) for (var r = 0; r < e.length; r++) {
                var o = e[r];
                n(o) ? (e[r] = a(o), t = t.concat(e[r])) : t.push(o);
            }
            return t;
        }
        function r(e, t) {
            try {
                return e.find(t);
            } catch (r) {
                for (var n = 0; n < e.length; n++) {
                    var a = t(e[n]);
                    if (a) return e[n];
                }
            }
        }
        t.indexof = function(e, t) {
            var n = -1;
            try {
                n = e.indexOf(t);
            } catch (r) {
                for (var a = 0; a < e.length; a++) e[a] === t && (n = a);
            } finally {
                return n;
            }
        }, t.itemMatch = function(e, t) {
            var n = !1;
            try {
                if (!this.isArray(e)) return n;
                n = e.some(function(e) {
                    return e && e.length > 0 && t.indexOf(e) !== -1;
                });
            } catch (r) {
                for (var a = 0; a < e.length; a++) if (t.indexOf(e[a]) !== -1) {
                    n = !0;
                    break;
                }
            }
            return n;
        }, t.isArray = n, t.flat = a, t.find = r;
    }, function(e, t, n) {
        "use strict";
        var a = n(42), r = n(20), o = n(2);
        e.exports = function() {
            return {
                getUserData: function() {
                    var e = o.getGlobalValue("aplus"), t = this.options.context || {}, n = t.userdata || {}, i = t.what_to_send.logdata.gokey;
                    i = Object.assign({}, i, a.param2obj(n.gokey)), i = Object.assign({}, i, a.param2obj(e.getMetaInfo("aplus-exinfo") || {}));
                    var s = e.getMetaInfo("aplus-exdata");
                    return r(s) ? s.forEach(function(e) {
                        i = Object.assign({}, i, e);
                    }) : i = Object.assign({}, i, s || {}), i;
                },
                run: function() {
                    var e = this.options.context.what_to_send.logdata, t = this.getUserData();
                    "1010" === e.gmkey && (e.arg1 = t.duration || e.logkey), e.gokey = t, this.options.context.what_to_send.logdata = e;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(67)(this.options.context.logConfig);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(49), r = n(3), o = n(2);
        e.exports = function(e) {
            var t = o.getGlobalValue(r.APLUS);
            if (!t._aplus_api) {
                t._aplus_api = {
                    status: r.COMPLETE
                };
                var i = n(68).run.create({
                    logConfig: e
                });
                for (var s in i) t[s] = i[s];
                o.setGlobalValue(r.APLUS, t);
                var u = [ r.APLUS + "Ready", r.COMPLETE ];
                a.doPubMsg(u), a.doCachePubs(u);
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(10), o = n(9), i = n(20), s = n(3), u = n(49), c = n(14), l = n(2), p = n(69), f = n(48), g = n(73), d = n(12), _ = n(11), h = n(36), v = n(62), m = function(e, t) {
            my && my.call && "function" == typeof t && my.call("handleLoggingAction", {
                type: "behavior",
                subType: e.subType
            }, function(n) {
                var a = {};
                a[e.spmType] = n[e.spmType], t(a);
            });
        }, y = !0, S = !1, b = a.extend({
            _send: function(e, t, n, a, r) {
                return "object" == typeof t && "POST" === n ? o.request(e, {
                    method: n,
                    data: t,
                    dataType: "base64"
                }, a, r) : o.request(e + "?" + t, {
                    method: n,
                    dataType: "base64"
                }, a, r), e;
            },
            _requestVTConfig: function(e, t, n) {
                o.request(e, {
                    method: "GET",
                    dataType: "json"
                }, t, n);
            },
            _requestRemoteConfig: function(e, t, n) {
                o.request(e, {
                    method: "GET",
                    dataType: "json"
                }, t, n);
            },
            _sendPV: function(e, t) {
                var n = l.getGlobalValue(s.APLUS);
                e = e || {}, e.pageName && n._setMetaInfo(s.APLUS + "-pagename", e.pageName);
                var a = new p();
                e.recordType = "PV", e.method || (e.method = "GET");
                var r = n.logConfig.pv;
                return a.run({
                    plugins: r.plugins,
                    context: c(r.context)
                }, {
                    config: e,
                    userdata: t || {},
                    pubsubType: "pv",
                    middlewareMessageKey: "mw_change_pv"
                }), !0;
            },
            _combineRecord: function(e, t, n, a) {
                var r = l.getGlobalValue(s.APLUS), o = "EXP";
                if (!r.globalConfig.isAli || t !== o && "CLK" !== t) console.warn("only support EXP or CLK log to combile record!"); else if (i(n)) {
                    a || (a = "POST");
                    var u = [], c = "true";
                    n.forEach(function(e) {
                        u.push({
                            exargs: "object" == typeof e.exargs ? e.exargs : {},
                            scm: e.scm,
                            spm: e.spm,
                            aplusContentId: e.aplusContentId
                        }), "false" === e._aplus_sendtomy && "true" === c && (c = "false");
                    });
                    var p = [];
                    p.push((t === o ? "expdata=" : "clkdata=") + JSON.stringify(u)), p.push(t === o ? "_is_auto_exp=1" : "_is_auto_clk=1"), 
                    p.push("_eventType=custom"), p.push("_method=" + a), p.push("_pkgSize=" + n.length), 
                    "false" === c && p.push("_aplus_sendtomy=false"), r.record(e, t, p.join("&"), a);
                } else console.warn("type of gokeys must be ArrayObject!");
            },
            _record: function(e, t, n, a, o) {
                var i = l.getGlobalValue(s.APLUS);
                n = f.getUserInjectGokey({
                    logkey: e,
                    gmkey: t,
                    gokey: n
                }), e += "", e && 0 !== e.indexOf("/") && i.globalConfig.isAli && (e = "/" + e);
                var u = i.globalConfig.isAli, g = new p(), d = i.logConfig.hjlj;
                return u ? g.run({
                    plugins: d.plugins,
                    context: c(d.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: a || "GET"
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n
                    },
                    pubsubType: "hjlj",
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    r(o) && o();
                }) : v.canToSendHJLJ(n, e) && g.run({
                    plugins: d.plugins,
                    context: c(d.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: a || "GET"
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n
                    },
                    pubsubType: "hjlj",
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    r(o) && o();
                }), !0;
            },
            getPageSPM: function() {
                var e = l.getGlobalValue(s.APLUS), t = e._$ || {}, n = t.spm || {}, a = n.data || {};
                return [ a.a, a.b ];
            },
            _setPageSPM: function() {
                var e, t = {}, n = arguments;
                "object" == typeof n[0] ? (t = n[0], e = n[1]) : (t.spmCnt = [ n[0], n[1], "0", "0" ].join("."), 
                e = n[2]);
                var a;
                t.spmCnt || t.spmUrl || !f.getMetaInfo("pageConfig") ? (a = [ "setPageSPM", t ], 
                u.doPubMsg(a), u.doCachePubs(a)) : (a = [ "clearPageSPM" ], u.doPubMsg(a), u.doCachePubs(a));
                var r = "function" == typeof e ? e : function() {};
                r(a);
            },
            _setMetaInfo: function(e, t) {
                return f._setMetaInfo(e, t);
            },
            _updatePageProperties: function(e) {
                if ("object" == typeof e) {
                    g() ? my.reportAnalytics("updatePageProperties", e) : "my" === o.getPlatformType() && my.call("reportData", {
                        spmDetail: e,
                        ignoreDefaultPageMonitor: !0
                    });
                    var t = o.getCurrentPage(), n = t.route || t.is || "page", a = {};
                    a[n] = e, f.appendMetaInfo("aplus-page-properties", a);
                }
            },
            _updateNextPageProperties: function(e) {
                if (e || (e = {}), my) {
                    var t = {
                        type: "updateNextProp",
                        eventId: -1,
                        eventid: -1,
                        name: "",
                        pageName: "",
                        comName: "",
                        arg1: "",
                        arg2: "",
                        arg3: "",
                        param: e,
                        params: e
                    };
                    my.callUserTrack ? my.callUserTrack("commitut", t) : my.reportAnalytics && my.reportAnalytics("enter", t);
                }
            },
            _appendMetaInfo: f.appendMetaInfo,
            getMetaInfo: function(e) {
                return f.getMetaInfo(e);
            },
            cloneDeep: c,
            _skipPage: function() {
                my && my.callUserTrack && my.callUserTrack("skipPage");
            },
            _pageAppear: function() {
                my && my.callUserTrack && y && (y = !1, S = !0, my.callUserTrack("pageAppear"));
            },
            _pageDisappear: function() {
                my && my.callUserTrack && S && (y = !0, S = !1, my.callUserTrack("pageDisappear"));
            },
            _updatePageUtparam: function(e) {
                e || (e = {}), my && my.callUserTrack && my.callUserTrack("updatePageUtparam", {
                    utParamJson: JSON.stringify(e)
                });
            },
            _updateNextPageUtparam: function(e) {
                e || (e = {}), my && my.callUserTrack && my.callUserTrack("updateNextPageUtparam", {
                    utParamJson: JSON.stringify(e)
                });
            },
            _updateSessionProperties: function(e) {
                my && my.call && "object" == typeof e && my.call("handleLoggingAction", {
                    type: "behavior",
                    subType: "updateSessionProperties",
                    extData: e
                });
            },
            _getPageSpmUrl: function(e) {
                m({
                    subType: "getPageSpmUrl",
                    spmType: "spmUrl"
                }, e);
            },
            _getPageSpmPre: function(e) {
                m({
                    subType: "getPageSpmPre",
                    spmType: "spmPre"
                }, e);
            },
            _setPageName: function(e, t) {
                if (!e) return void d().w("setPageName failed:  pageName=" + e);
                var n = t || h.getCurrentPagePath(), a = c(f.getMetaInfo("pageConfig") || {});
                a[n] = e, f.appendMetaInfo("pageConfig", a);
            },
            getPageName: function(e) {
                return h.getPageCode(e);
            },
            _getElementSPM: function(e, t) {
                if (e) {
                    var n = h.getPageCode() || "";
                    if ("string" != typeof e) {
                        var a = e.dataset && e.dataset.trackerParams || "", r = _.jsonLikeStr2JSON(a);
                        return [ n, r.spmC, r.spmD ].join(".");
                    }
                    var i, s = o.getContext(), u = f.getMetaInfo("aplus-auto-clk") || [], c = f.getMetaInfo("aplus-auto-exp") || [];
                    try {
                        var l;
                        for (l = 0; l < u.length; l++) {
                            var p = u[l];
                            if (p.cssSelector === e) {
                                i = [ n, p.spmC, p.spmD ].join(".");
                                break;
                            }
                        }
                        for (l = 0; l < c.length; l++) {
                            var g = c[l];
                            if (g.cssSelector === e) {
                                i = [ n, g.spmC, g.spmD ].join(".");
                                break;
                            }
                        }
                        var v = s.createSelectorQuery().selectAll(e);
                        "function" == typeof v.fields && v.fields({
                            dataset: !0,
                            id: !0
                        }, function(e) {
                            var n = [];
                            if (e && e.length > 0) {
                                for (var a = 1; a <= e.length; a++) n.push(i + "_" + a);
                                t && "function" == typeof t && t(n);
                            }
                        }).exec();
                    } catch (e) {
                        d().w("current miniapp platform does not support dom element query, errmsg: ", e);
                    }
                }
            },
            _recordAppLink: function(e, t, n) {
                if (!e.targetAppKey) return d().w("send $$_app_link failed: targetAppKey is null"), 
                !1;
                var a = l.getGlobalValue(s.APLUS);
                return a._record("$$_app_link", "OTHER", e, t, n);
            }
        });
        t.run = b;
    }, function(e, t, n) {
        "use strict";
        var a = n(7), r = n(2), o = n(10), i = n(49), s = n(70), u = n(3), c = n(71), l = n(72), p = function() {};
        p.prototype.run = function(e, t, n) {
            var p = new l();
            p.init({
                middleware: [],
                config: t.config,
                plugins: e.plugins
            });
            var f = p.run(), g = o(e.context) ? new e.context() : e.context;
            g.userdata = t.userdata, g.logger = s.logger;
            var d = {
                context: g,
                pubsub: r.getGoldlogVal("aplus_pubsub"),
                pubsubType: t && t.pubsubType
            }, _ = new c();
            _.create(d), _.wrap(f, function() {
                d.context.status = u.COMPLETE, t && (t.middlewareMessageKey && i.doPubMsg([ t.middlewareMessageKey, d.context ]), 
                t.messageFnQueue && a(t.messageFnQueue, function(t) {
                    t(r.getGlobalValue(u.APLUS), e);
                })), o(n) && n(d.context);
            })();
        }, e.exports = p;
    }, function(e, t, n) {
        "use strict";
        var a = n(48), r = "[APLUS] -- ";
        t.logger = function(e) {
            e || (e = {});
            var t = e.level || "warn";
            console && console[t] && console[t](r + e.msg);
        }, t.log = function() {
            var e = a && a.getMetaInfo("debug");
            e && console.log.apply(console, [ r ].concat(Array.prototype.slice.apply(arguments)));
        }, t.debugLog = function(e) {
            var t = n(2).getGlobalValue("aplus");
            t && t.aplusDebug && this.logger(e);
        };
    }, function(e, t, n) {
        "use strict";
        function a() {}
        var r = n(10), o = n(64), i = n(12);
        a.prototype.create = function(e) {
            for (var t in e) "undefined" == typeof this[t] && (this[t] = e[t]);
            return this;
        }, a.prototype.calledList = [], a.prototype.setCalledList = function(e) {
            o.indexof(this.calledList, e) === -1 && this.calledList.push(e);
        }, a.prototype.resetCalledList = function() {
            this.calledList = [];
        }, a.prototype.wrap = function(e, t) {
            var n = this, a = this.context || {}, s = a.compose || {}, u = s.maxTimeout || 1e4;
            return function(a) {
                var s, c = e.length, l = 0, p = 0, f = function(g, d) {
                    if (l === c) return a = "done", n.resetCalledList(), r(t) && d !== a && t.call(n, a), 
                    void clearTimeout(s);
                    if (o.indexof(n.calledList, l) === -1) {
                        if (n.setCalledList && n.setCalledList(l), !(e && e[l] && r(e[l][0]))) return;
                        try {
                            a = e[l][0].call(n, a, function() {
                                l++, p = 1, f(l);
                            });
                        } catch (e) {
                            i().w(e);
                        }
                    }
                    var _ = "number" == typeof a;
                    if ("pause" === a || _) {
                        p = 0;
                        var h = _ ? a : u, v = e[l] ? e[l][1] : "";
                        s = setTimeout(function() {
                            0 === p && (i().w("jump the middleware about " + v + ", because waiting timeout maxTimeout = " + h), 
                            a = null, l++, f(l));
                        }, h);
                    } else "done" === a ? (l = c, f(l, a)) : (l++, f(l));
                };
                return n.calledList && n.calledList.length > 0 && n.resetCalledList(), f(l);
            };
        }, e.exports = a;
    }, function(e, t, n) {
        "use strict";
        var a = n(34), r = n(12);
        e.exports = function() {
            return {
                init: function(e) {
                    this.opts = e, e && "object" == typeof e.middleware && e.middleware.length > 0 ? this.middleware = e.middleware : this.middleware = [], 
                    this.plugins_name = [];
                },
                pubsubInfo: function(e, t) {
                    try {
                        var n = e.pubsub;
                        n && n.publish("plugins_change_" + e.pubsubType, t);
                    } catch (e) {
                        r().w(e);
                    }
                },
                run: function(e) {
                    e || (e = 0);
                    var t = this, n = this.middleware, r = this.opts || {}, o = r.plugins;
                    if (o && "object" == typeof o && o.length > 0) {
                        var i = o[e];
                        if (this.plugins_name.push(i.name), n.push([ function(e, n) {
                            t.pubsubInfo(this, i);
                            var o = new i.path();
                            return o.init || (o.init = function(e) {
                                this.options = e;
                            }), o.init({
                                context: this.context,
                                config: a(i.config || {}, r.config)
                            }), o.run(e, function(e) {
                                setTimeout(function() {
                                    n(i, e);
                                }, 1);
                            });
                        }, i.name ]), e++, o[e]) return this.run(e);
                    }
                    return n;
                }
            };
        };
    }, function(e, t) {
        function n() {
            try {
                var e = navigator ? navigator.userAgent || navigator.swuserAgent : "";
                return /Triver/g.test(e);
            } catch (e) {
                return !1;
            }
        }
        e.exports = n;
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(75)();
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(76), r = n(2), o = n(3), i = n(64), s = n(33), u = n(36), c = n(9);
        e.exports = function() {
            var e = r.getContext(), t = r.getGlobalValue("aplus"), n = [], l = function(e) {
                function r(t, r) {
                    i.isArray(t) && l.push({
                        config: r,
                        elements: t
                    }), l.length === n.length && a.watch_click(e.event, l, e.context);
                }
                n = t.getMetaInfo("aplus-auto-clk");
                var o = u.getPageCode(), l = [];
                i.isArray(n) && n.forEach(function(e) {
                    s.isStartWith(e.cssSelector, ".") || (e.cssSelector = "." + e.cssSelector), e.spmB || (e.spmB = o);
                    var t = c.getContext().createSelectorQuery().selectAll(e.cssSelector);
                    "function" == typeof t.fields ? t.fields({
                        id: !0,
                        dataset: !0,
                        rect: !0,
                        scrollOffset: !0
                    }, function(t) {
                        r(t, e);
                    }).exec() : t.boundingClientRect().exec(function(t) {
                        r(t, e);
                    });
                });
            };
            e.aplus_queue.push({
                action: o.SUBSCRIBE,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && (n = t.getMetaInfo("aplus-auto-clk"));
                } ]
            }), e.aplus_queue.push({
                action: o.SUBSCRIBE,
                arguments: [ "onAplusClk", function(e) {
                    "ready" === e.status && l(e);
                } ]
            });
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            var n = o.getGoldlogVal("_aplus_auto_exp") || {}, a = n.hashMap || {};
            for (var i in a) for (var s = a[i] || [], u = 0; u < s.length; u++) {
                var l = s[u] || {}, p = l.expConfig || {};
                if (e.cssSelector === p.cssSelector) {
                    var f = c({
                        index: t
                    }, p);
                    if (f === l.hash_value) return r(l.dataset);
                }
            }
        }
        var r = n(14), o = n(2), i = n(11), s = n(7), u = n(77), c = n(78), l = n(79);
        t.watch_click = function(e, t, n) {
            function c(e, t) {
                var n = {};
                e && (e.changedTouches ? n = e.changedTouches[0] : e.detail && (n = e.detail));
                var a = n.clientX || 0, r = n.clientY || 0, o = t.top, i = t.bottom;
                return t.scrollTop && (o += t.scrollTop, i += t.scrollTop), t.left < a && a < t.right && o < r && r < i;
            }
            var p = o.getGlobalValue("aplus"), f = [];
            s(t, function(t) {
                for (var n = t.elements, o = t.config, s = 0; s < n.length; s++) {
                    var u = n[s];
                    if (c(e, u)) {
                        var g = s + 1, d = u.dataset || a(o, g) || {}, _ = {}, h = i.jsonLikeStr2JSON(d.trackerParams) || {};
                        if (p.globalConfig.isAli) if (_ = r(p._$.spm.data || {}), document && p.getMetaInfo("aplus-vt-cfg-url")) {
                            var v = l.getDataSet(o, g - 1), m = v.spmC || o.spmC || "0", y = v.spmD || o.spmD || "0";
                            _.c = m, _.d = y, d = Object.assign(d, v);
                        } else {
                            var S = d.tracker || o.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                            if (_.c = S, _.c && "0" !== _.c) {
                                var b = "d" + g;
                                _.d = b;
                            }
                        } else _.b = o.spmB, o.spmC ? _.c = o.spmC : _.c = h.spmC ? encodeURIComponent(h.spmC) : "", 
                        o.spmD ? _.d = g ? o.spmD + "_" + g : o.spmD : _.d = h.spmD ? encodeURIComponent(h.spmD) : "";
                        f.push({
                            dataset: d,
                            config: o,
                            element: u,
                            spmData: _
                        });
                    }
                }
            });
            var g = void 0;
            1 === f.length ? g = f[0] : f.length > 1 && (g = f.reduce(function(e, t) {
                var n = e, a = e.element, r = t.element;
                return r.top >= a.top && r.right <= a.right && r.bottom <= a.bottom && r.left >= a.left && (n = t), 
                n;
            })), g && u.pushEvent("CLK", g.dataset, g.config, g.element, g.spmData, n);
        };
    }, function(e, t, n) {
        function a(e, t, n, a) {
            var r = o.getGlobalValue("aplus") || {}, u = r.getMetaInfo;
            if ("function" == typeof u) {
                var c = u(e), l = {};
                return "function" == typeof c && (l = c(t ? s(t) : {}, n, a)), i.param2obj(l);
            }
            return {};
        }
        function r(e, t) {
            var n = "";
            try {
                var a = new Number(e);
                n = parseFloat(a.toFixed(t));
            } catch (t) {
                n = e;
            }
            return n;
        }
        var o = n(2), i = n(42), s = n(14), u = n(20), c = n(45), l = n(70), p = {}, f = 3, g = "POST", d = "EXP", _ = c.extend({
            push: function(e) {
                var t = o.getGlobalValue("aplus");
                for (this.buffer.push(e); this.buffer.length >= this.pkgSize; ) {
                    var n = this.buffer.splice(0, this.pkgSize);
                    n.length > 0 && t.combineRecord(this.logkey, d, n, this.method);
                }
            }
        });
        t.pushEvent = function(e, t, n, i, c, f) {
            var _ = o.getGlobalValue("aplus"), h = !!_.globalConfig && _.globalConfig.isAli, v = n.props, m = {}, y = {};
            if (t) for (var S in t) S.toLowerCase().match(/^data-/) ? y[S.toLowerCase().replace(/^data-/, "").replace(/-/g, "")] = t[S] : y[S] = t[S];
            if (v && u(v)) for (var b = 0; b < v.length; b++) {
                var P = v[b].toLowerCase().replace(/^data-/, "").replace(/-/g, "");
                m[P] = y[P];
            } else m = Object.assign({}, y);
            i && e === d && (m = Object.assign({}, m, {
                _w: r(i.width, 2),
                _h: r(i.height, 2),
                _x: r(i.x, 2),
                _y: r(i.y, 2),
                _rate: r(i.viewabilityRate || i.intersectionRatio, 2),
                _viewability: "intersection"
            })), n._vt && (m._vt = n._vt);
            var A = e === d ? "aplus-auto-exp-userfn" : "aplus-auto-clk-userfn", E = a(A, i, n.cssSelector, c);
            E.spm || (h && c && c.a && c.b ? E.spm = [ c.a, c.b, c.c || "0", c.d || "0" ].join(".") : E.spm = c && c.b ? c : void 0);
            var I = {}, T = t.trackerParams || t["tracker-params"];
            if (T) try {
                var C = JSON.parse(T);
                m = Object.assign(m, C), delete m.trackerParams, delete m.trackerparams;
            } catch (e) {}
            if ("EXP" === e && h && p[n.logkey]) {
                var x = Object.assign({}, m, E);
                I = Object.assign({}, {
                    exargs: x
                }), l.log("auto exp:", n.logkey, x), p[n.logkey].push(s(I));
            } else if (I = Object.assign({
                is_auto: 1
            }, m, E, n.customArgs), l.log("auto clk:", n.logkey, I), f) {
                var O = f.route;
                _.record(n.logkey, e, Object.assign({}, I, {
                    currentPath: O
                }), g);
            } else _.record(n.logkey, e, I, g);
        }, t.watchRecord = function(e) {
            var t = o.getGlobalValue("aplus"), n = !!t.globalConfig && t.globalConfig.isAli;
            n && e && e.forEach(function(e) {
                p.hasOwnProperty(e.logkey) || (p[e.logkey] = _.create({
                    length: 0,
                    buffer: [],
                    logkey: e.logkey,
                    pkgSize: "number" == typeof e.pkgSize && e.pkgSize || f,
                    method: e.method || g
                }));
            });
        }, t.clearRecord = function() {
            var e = o.getGlobalValue("aplus"), t = !!e.globalConfig && e.globalConfig.isAli;
            if (t) for (var n in p) {
                var a = p[n].buffer || [];
                a.length > 0 && (e.combineRecord(n, d, a, g), p[n].buffer = []);
            }
        };
    }, function(e, t) {
        e.exports = function(e, t) {
            var n = [ t.logkey, t.cssSelector ];
            return t.positionSelector && n.push(t.positionSelector), e.id && n.push(e.id), e.index >= 0 && n.push(e.index), 
            e.dataset && e.dataset.privateNodeId && delete e.dataset.privateNodeId, e.dataset && n.push(JSON.stringify(e.dataset)), 
            n = n.join("_");
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(11), r = n(33);
        t.getDataSet = function(e, t) {
            var n, o = {};
            n = r.isStartWith(e.cssSelector, ".") ? e.cssSelector.slice(1, e.cssSelector.length) : e.cssSelector;
            var i = document.getElementsByClassName(n);
            if (i && i.length > 0) {
                var s = i[t].dataset || {};
                for (var u in s) {
                    var c = s[u];
                    switch (typeof c) {
                      case "function":
                        o[u] = c();
                        break;

                      case "object":
                        o = Object.assign(o, c);
                        break;

                      case "string":
                        if ("trackerParams" === u) {
                            var l = a.jsonLikeStr2JSON(s.trackerParams);
                            o = Object.assign(o, l);
                        } else o[u] = c;
                        break;

                      case "number":
                      case "boolean":
                        o[u] = c;
                        break;

                      default:
                        continue;
                    }
                }
            }
            return o;
        }, t.isRax = function() {
            return !!document;
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(81)();
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(82), o = n(83), i = n(3), s = n(9), u = {};
        e.exports = function() {
            function e(e, t, n) {
                var a = function(n, a) {
                    if ("aplus-auto-exp" === n) {
                        var i = o.getAutoExpConfig(a);
                        if (JSON.stringify(i) === JSON.stringify(g)) return;
                        g = i, a && g && g.length > 0 && r.watch_exposure(e, g, t);
                    }
                };
                c.aplus_queue.push({
                    action: n,
                    arguments: [ "setMetaInfo", a ]
                });
            }
            function t(e, t) {
                g = f.getMetaInfo("aplus-auto-exp"), setTimeout(function() {
                    r.watch_exposure(e, g, t);
                }, 0);
            }
            function n(e) {
                try {
                    var n = s.getCurrentPage(), a = n.route || n.is, r = u[a], o = JSON.stringify(e.data);
                    r !== o && (u[a] = o, t(e.context, 0));
                } catch (e) {}
            }
            var c = a.getContext(), l = 0, p = 0, f = a.getGlobalValue("aplus");
            if (!f._aplus_auto_exp) {
                f._aplus_auto_exp = {
                    hashMap: {}
                };
                var g = [];
                c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onShow", function(n) {
                        if ("ready" === n.status) {
                            e(n.context, 1, i.SUBSCRIBE), 0 === l ? (t(n.context, 1), l = 1) : t(n.context, 0);
                            try {
                                var a = s.getCurrentPage(), r = a.route || a.is;
                                u[r] = r;
                            } catch (e) {}
                        }
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onAplusTouch", function(e) {
                        "ready" === e.status && (0 === p ? (p = 1, t(e.context, 1)) : n(e));
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onPageDataChanged", function(e) {
                        setTimeout(function() {
                            n(e);
                        }, 200);
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onHide", function(t) {
                        "ready" === t.status && (u = {}, l = 0, p = 0, e(t.context, 1, i.UNSUBSCRIBE), r.clear());
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onUnload", function(e) {
                        "ready" === e.status && (u = {}, r.clear());
                    } ]
                });
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a, r = n(2), o = n(83), i = n(14), s = n(9), u = n(33), c = n(11), l = n(7), p = n(64), f = n(36), g = n(77), d = n(78), _ = n(79), h = n(6), v = [];
        t.watch_exposure = function(e, t, n, m) {
            function y(r) {
                function o(e) {
                    var t = c[0];
                    t && !u.isStartWith(c[0], ".") && (t = "." + t);
                    try {
                        var n = a.createSelectorQuery().selectAll(t);
                        "function" == typeof n.fields ? n.fields({
                            dataset: !0,
                            id: !0
                        }, function(t) {
                            p.isArray(t) && e({
                                elements: t,
                                type: "COMMON"
                            });
                        }).exec() : console.warn("current platform does not support auto exposure tracking!");
                    } catch (e) {
                        console.warn("current platform does not support auto exposure tracking! err = ", e);
                    }
                }
                if (r < t.length) {
                    var s = t[r];
                    T = 0, v.forEach(function(e) {
                        e.subject[0] === s.cssSelector && e.subject[1] === s.positionSelector && (T = 1);
                    });
                    var c = [ s.cssSelector, s.positionSelector ];
                    o(function(a) {
                        if (0 === T || 0 === n) {
                            var o = P(e);
                            if (o.subject = c, v.length > t.length - 1) {
                                var u = v.shift();
                                u.disconnect();
                            }
                            v.push(o), l(a.elements, function(e, t) {
                                e.index = t + 1 + "", S(e, s) || b(e, s);
                            }), A(o, s, function(e, t) {
                                h.getIndexByRect(t.cssSelector, e.boundingClientRect, function(n) {
                                    var a = n + 1;
                                    if (a) {
                                        var r = i(e);
                                        r.index = "" + a;
                                        var o = i(r.dataset);
                                        b({
                                            id: r.id,
                                            index: r.index,
                                            dataset: o
                                        }, t), E(r, o, s);
                                    }
                                });
                            });
                        }
                        y(++r);
                    });
                }
            }
            function S(e, t) {
                var n = d(e, t), a = e.index;
                return x[t.logkey] && x[t.logkey].forEach(function(e) {
                    if (e.hash_value === n && e.index === a) return !0;
                }), !1;
            }
            function b(e, t) {
                var n = d(e, t);
                try {
                    var a = e.index;
                    if (x[t.logkey]) {
                        var r = 0;
                        x[t.logkey].forEach(function(t) {
                            t.hash_value === n && (r = 1, e.id && (t.id = e.id), e.dataset && (t.dataset = e.dataset), 
                            e.status && (t.status = e.status));
                        }), r || x[t.logkey].push({
                            id: e.id,
                            hash_value: n,
                            status: 0,
                            expConfig: t,
                            dataset: e.dataset,
                            index: a
                        });
                    } else x[t.logkey] = [ {
                        id: e.id,
                        hash_value: n,
                        status: 0,
                        expConfig: t,
                        dataset: e.dataset,
                        index: a
                    } ];
                } catch (e) {
                    console.log("error === ", e);
                }
            }
            function P(e) {
                var t = {
                    thresholds: [ o.AUTO_AT_VIEW_RATE ],
                    initialRatio: 0
                }, n = !1;
                try {
                    my && (n = !0);
                } catch (e) {}
                return n ? (t.selectAll = !0, a.createIntersectionObserver(t)) : (t.observeAll = !0, 
                a.createIntersectionObserver(e, t));
            }
            function A(e, t, n) {
                var a = t.cssSelector;
                a && !u.isStartWith(a, ".") && (a = "." + a), t.positionSelector ? e.relativeTo(t.positionSelector).observe(a, function(e) {
                    try {
                        n(e, t);
                    } catch (e) {
                        console.log("errorMessage: ", e);
                    }
                }) : e.relativeToViewport().observe(a, function(e) {
                    try {
                        n(e, t);
                    } catch (e) {
                        console.log("errorMessage: ", e);
                    }
                });
            }
            function E(e, t, n) {
                var a = r.getGlobalValue("aplus"), o = new Date().getTime(), s = I(o, e, n);
                if (s && s.length > 0) {
                    var u = s[0], l = {}, p = c.jsonLikeStr2JSON(t.trackerParams || {}) || {}, d = u.index;
                    if (a.globalConfig && a.globalConfig.isAli) if (l = i(a._$.spm.data || {}), _.isRax()) {
                        var h = _.getDataSet(n, d - 1), v = h.spmC || n.spmC || "0", m = h.spmD || n.spmD || "0";
                        l.c = v, l.d = m, t = Object.assign(t, h);
                    } else {
                        var y = t.tracker || n.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                        if (l.c = y, l.c && "0" !== l.c) {
                            var S = "d" + d;
                            l.d = S;
                        }
                    } else f.getPageCode() && (l.b = f.getPageCode()), n.spmC ? l.c = n.spmC : l.c = p.spmC ? encodeURIComponent(p.spmC) : "", 
                    n.spmD ? l.d = d ? n.spmD + "_" + d : n.spmD : l.d = p.spmD ? encodeURIComponent(p.spmD) : "";
                    g.pushEvent("EXP", t, n, Object.assign({}, e, {
                        x: u.x,
                        y: u.y,
                        width: u.width,
                        height: u.height,
                        hash_value: u.hash_value
                    }), l);
                }
            }
            function I(e, t, n) {
                var a = r.getGoldlogVal("_aplus_auto_exp") || {}, i = a.hashMap || {}, s = [];
                for (var u in i) for (var c = i[u] || [], l = 0; l < c.length; l++) {
                    var p = d(t, n), f = c[l] || {};
                    if (0 === f.status && f.expConfig && p === f.hash_value) {
                        var g = t.boundingClientRect || {};
                        if (g.width && g.height) {
                            f.dataset = t.dataset, f.x = g.left, f.y = g.top, f.width = g.width, f.height = g.height, 
                            f.size = g.width * g.height;
                            var _ = o.AUTO_AT_VIEW_RATE;
                            t.intersectionRatio >= _ && (f.exposureTime = e, f.status = 1, s.push(f));
                        }
                    }
                }
                return s;
            }
            a && !m || (a = s.getContext());
            var T, C = r.getGoldlogVal("_aplus_auto_exp") || {}, x = C.hashMap || {};
            g.watchRecord(t), y(0);
        }, t.reset = function() {}, t.clear = function() {
            g.clearRecord();
            for (var e = 0; e < v.length; e++) v[e].disconnect();
            v = [];
            var t = r.getGoldlogVal("_aplus_auto_exp") || {}, n = t.hashMap || {};
            for (var a in n) delete n[a];
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            return aplus && aplus.getMetaInfo ? aplus.getMetaInfo(e) : o.getMetaCnt(e);
        }
        var r = n(64), o = n(84), i = n(12);
        t.DATA_APLUS_AE_KEY = "data-aplus-ae", t.DATA_APLUS_AC_KEY = "data-aplus-clk", t.DATA_APLUS_SPM_ANCHOR_ID_KEY = "data-spm-anchor-id", 
        t.DATA_APLUS_VT_ITEM_INDEX_KEY = "data-aplus-vt-pos", t.LOOP_TIME = 1e3, t.getDefaultRequestCfg = function() {
            return {
                method: "POST",
                pkgSize: 10
            };
        };
        var s = function(e) {
            var t = e;
            try {
                var n = a("aplus-auto-exp-visible");
                n && (t = parseFloat(n)), t <= 0 && (t = e);
            } catch (n) {
                t = e;
            } finally {
                return t;
            }
        };
        t.AUTO_AT_VIEW_RATE = s(.3);
        var u = function(e) {
            var t = e;
            try {
                var n = a("aplus-auto-exp-duration"), r = parseInt(n);
                r + "" != "NaN" && (t = r);
            } catch (e) {} finally {
                return t;
            }
        };
        t.EXP_DURATION = u(300);
        var c = function(e, t) {
            var n, o = [], s = [];
            try {
                n = t || a(e);
                var u = [];
                if (n && "string" == typeof n) try {
                    u = JSON.parse(n);
                } catch (e) {
                    u = JSON.parse(n.replace(/'/g, '"'));
                } else "object" == typeof n && n.constructor === Array && (u = n);
                if (u && u.constructor === Array) for (var c = 0; c < u.length; c++) {
                    var l = u[c] || {}, p = l.logkey || "", f = l.tag ? l.tag : "", g = l.filter, d = l.cssSelector, _ = d || f && g;
                    if (!p || !_) throw new Error("meta " + e + " config error, " + JSON.stringify(l));
                    g = "string" == typeof g ? g.split("=") : [];
                    var h = f;
                    if (g.length >= 2 ? h += "[" + g.shift() + '="' + decodeURIComponent(g.join("")) + '"]' : 1 == g.length && g[0] && (h += "[" + decodeURIComponent(g[0]) + "]"), 
                    d && (h += d), l.elementSelector = h, r.indexof(s, h) > -1) throw new Error("meta " + e + " config error, tag_filter_cssSelector " + h + " repeated");
                    s.push(h), o.push(l);
                }
            } catch (e) {
                i().w(e);
            } finally {
                return o;
            }
        };
        t.getAutoExpConfig = function(e) {
            return c("aplus-auto-exp", e) || [];
        }, t.getAutoExpUserFn = function() {
            var e = a("aplus-auto-exp-userfn");
            if (e) {
                var t = window[e] || e;
                if ("function" == typeof t) return t;
            }
            return null;
        }, t.isThrottleWatchDom = function() {
            var e = !1;
            try {
                e = "throttle" === a("aplus-auto-exp-watchdom");
            } catch (e) {}
            return e;
        }, t.getAutoClkConfig = function(e) {
            return c("aplus-auto-clk", e) || [];
        }, t.getAutoClkUserFn = function() {
            var e = a("aplus-auto-clk-userfn");
            if (e) {
                var t = window[e] || e;
                if ("function" == typeof t) return t;
            }
            return null;
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            return i = i || document.getElementsByTagName("head")[0], s && !e ? s : i ? s = i.getElementsByTagName("meta") : [];
        }
        function r(e, t) {
            var n, r, o, i = a(), s = i.length;
            for (n = 0; n < s; n++) r = i[n], u.tryToGetAttribute(r, "name") === e && (o = u.tryToGetAttribute(r, t || "content"));
            return o || "";
        }
        function o(e) {
            var t = {
                isonepage: "-1",
                urlpagename: ""
            }, n = e.qGet();
            if (n && n.hasOwnProperty("isonepage_data")) t.isonepage = n.isonepage_data.isonepage, 
            t.urlpagename = n.isonepage_data.urlpagename; else {
                var a = r("isonepage") || "-1", o = a.split("|");
                t.isonepage = o[0], t.urlpagename = o[1] ? o[1] : "";
            }
            return t;
        }
        var i, s, u = n(85);
        t.getMetaTags = a, t.getMetaCnt = r, t.getOnePageInfo = o;
    }, function(e, t) {
        "use strict";
        t.tryToGetAttribute = function(e, t) {
            return e && e.getAttribute ? e.getAttribute(t) || "" : "";
        };
        var n = function(e, t, n) {
            if (e && e.setAttribute) try {
                e.setAttribute(t, n);
            } catch (e) {}
        };
        t.tryToSetAttribute = n, t.tryToRemoveAttribute = function(e, t) {
            if (e && e.removeAttribute) try {
                e.removeAttribute(t);
            } catch (a) {
                n(e, t, "");
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(7);
        e.exports = function() {
            return {
                pushQueue: function(e, t) {
                    var n = a.getGlobalValue("aplus_queue");
                    n.push({
                        action: "aplus." + e,
                        arguments: t
                    });
                },
                run: function() {
                    var e = this, t = a.getGlobalValue(r.APLUS);
                    o(r.openAPIs, function(n) {
                        t[n] = function() {
                            var t = [];
                            o(arguments, function(e) {
                                t.push(e);
                            });
                            var a = "enter" === n ? "_sendPV" : "_" + n;
                            e.pushQueue(a, t);
                        };
                    });
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(9), r = n(2);
        e.exports = function() {
            return {
                _getNetworkType: function(e) {
                    var t = a.getContext();
                    t.getNetworkType ? t.getNetworkType({
                        success: function(t) {
                            e(t ? t.networkType : "");
                        }
                    }) : e("");
                },
                _getSystemInfo: function(e) {
                    var t = this, n = {}, r = t.SYSTEM_INFO || {};
                    if (r && r.version) e(t.SYSTEM_INFO); else try {
                        a.getContext().getSystemInfo({
                            complete: function(a) {
                                a && a.version ? t._getNetworkType(function(n) {
                                    a.networkType = n, t.SYSTEM_INFO = a, e(a);
                                }) : t._getNetworkType(function(t) {
                                    n.networkType = t, e(n);
                                });
                            }
                        });
                    } catch (t) {
                        e(n);
                    }
                },
                _getAccountInfoSync: function() {
                    var e = {};
                    try {
                        var t = a.getContext();
                        if (t.getAccountInfoSync && t.canIUse("getAccountInfoSync")) {
                            var n = t.getAccountInfoSync(), r = n.miniProgram || {}, o = n.plugin || {};
                            e.appId = r.appId, e.appVersion = r.version || r.envVersion, e.pluginAppId = o.appId, 
                            e.pluginAppVersion = o.version;
                        } else if (t.getAppIdSync && t.canIUse("getAppIdSync")) {
                            var i = t.getAppIdSync() || {};
                            e.appId = i.appId || "";
                        }
                    } catch (e) {}
                    return e;
                },
                run: function(e, t) {
                    var n = this;
                    return this._getSystemInfo(function(e) {
                        e.userAgent = "-", e.os = e.platform ? e.platform.toLocaleUpperCase() : "", e.os_version = e.system ? e.system : "", 
                        e.access = e.brand ? e.brand : "";
                        var a = "";
                        e.host && "string" == typeof e.host.env && (a = e.host.env), e.host = a;
                        var o = n._getAccountInfoSync(), i = Object.assign({}, e, o), s = r.getGlobalValue("aplus");
                        s._aplus_client = i, t();
                    }), 2e3;
                }
            };
        };
    }, function(e, t, n) {
        var a = n(2), r = n(20), o = n(3), i = n(9), s = n(12);
        e.exports = function() {
            return {
                resetLastPageSpm: function() {
                    var e = a.getGlobalValue(o.APLUS, {}), t = e._$.spm || {};
                    t.spm_cnt = "";
                },
                listen: function() {
                    var e = this, t = a.getGlobalValue(o.APLUS_QUEUE, []);
                    t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "onShow", function(e) {
                            if ("ready" === e.status) {
                                var t = a.getGlobalValue(o.APLUS, {}), n = t.getMetaInfo("pages"), s = i.getCurrentPage(), u = s.route || s.is;
                                if (r(n)) for (var c = 0; c < n.length; c++) {
                                    var l = n[c];
                                    if (l.matchUrl === u) {
                                        t.setPageSPM(l.spmA, l.spmB);
                                        break;
                                    }
                                }
                            }
                        } ]
                    }), t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "clearPageSPM", function() {
                            e.resetLastPageSpm();
                        } ]
                    }), t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "setPageSPM", function(e) {
                            try {
                                var t = a.getGlobalValue(o.APLUS, {}), n = t._$.spm || {}, r = getCurrentPages() || [], i = e.spmCnt ? e.spmCnt.split(".") : [ n.data.a || "0", n.data.b || "0" ];
                                2 === i.length && (i = i.concat([ "0", "0" ]));
                                var u = i.join("."), c = r[r.length - 1], l = r[r.length - 2] || {}, p = r[r.length - 3] || {};
                                r.length > 0 && c && (r[r.length - 1].spm = u);
                                var f = n.data && n.data.a ? [ n.data.a, n.data.b, n.data.c || "0", n.data.d || "0" ].join(".") : "";
                                n.data.a = i[0] ? "" + i[0] : "0", n.data.b = i[1] ? "" + i[1] : "0", n.data.c = "0", 
                                n.data.d = "0", n.page_referrer = r.length > 1 && c ? c.route || c.is : "", n.spm_cnt = u;
                                var g = t.spm_orign || n.spm_orign;
                                n.spm_pre = e.spmPre || n.spm_url || p.spm || "", n.spm_url = e.spmUrl || f || l.spm || g || "", 
                                t._$.spm = n;
                            } catch (e) {
                                s().w("setPageSPM error, the errorInfo is ", e);
                            }
                        } ]
                    });
                },
                run: function() {
                    this.listen();
                }
            };
        };
    }, function(e, t, n) {
        e.exports = function() {
            return {
                run: function() {
                    var e = n(90), t = this.options.context.aplus_config.metaInfo, a = e.create({
                        metaInfo: t
                    });
                    a.run(this.options);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t, a) {
            var r = p.getGlobalValue(g.APLUS);
            if (s.checkEvent(e, t)) {
                var c = n(93)(e, t);
                c.rank = _.rank(), c && c.id === g.APP_END && (c.amount = c.rank), u().i("event: ", e, t), 
                o().addEvent(c);
                var l = r.getMetaInfo("max-queue-count") || g.MAX_QUEUE_COUNT;
                (e === g.APP_END || o().getEkvsLen() >= l) && (a ? r.getMetaInfo(g._ANONY_ID) ? i(g.REQUESTS).send(s.DataType.EKV, {
                    noCache: !1
                }, function() {
                    u().i("event send success: ", e, c);
                }) : h.push({
                    action: g.SUBSCRIBE,
                    arguments: [ g.SET_META_INFO, function(t, n) {
                        t === g._ANONY_ID && n && i(g.REQUESTS).send(s.DataType.EKV, {
                            noCache: !1
                        }, function() {
                            u().i("event send success: ", e, c);
                        });
                    } ]
                }) : i(g.REQUESTS).send(s.DataType.EKV, {
                    noCache: !1
                }, function() {
                    u().i("event send success: ", e, c);
                }));
            }
        }
        var r = n(91), o = n(19), i = n(21), s = n(18), u = n(12), c = n(14), l = n(33), p = n(2), f = n(9), g = n(3), d = n(36), _ = n(38), h = p.getGlobalValue(g.APLUS_QUEUE);
        e.exports = r.extend({
            handlerMiddleware: function(e) {
                var t, n, r, o = this.metaInfo && this.metaInfo.autoGetOpenid, i = p.getGlobalValue(g.APLUS), u = e && e.userdata && e.userdata.logkey, _ = e && e.userdata && e.userdata.gmkey, h = e && e.what_to_send && e.what_to_send.logdata && e.what_to_send.logdata || {}, v = i.getMetaInfo("globalproperty");
                if ("CLK" === _ || "EXP" === _ || "OTHER" === _ || u === g.APP_START || u === g.APP_END) {
                    t = c(e && e.userdata && e.userdata.gokey) || {}, n = h.gokey || {};
                    var m, y = {};
                    "$$_share" === u && (y.refer_page = h.url, y.share_type = t.share_type), n.scene && (y.scene = f.getPlatformType() + "_" + n.scene), 
                    n.targetAppKey && (y.targetAppKey = t.targetAppKey, delete t.targetAppKey), r = t["data-pagename"] || t.page_name || t.spm && t.spm.b || i.getPageName() || h.url || "", 
                    y.page_name = r, y.url = h.url || "-", (t.page_name || t["data-pagename"]) && (delete t.page_name, 
                    delete t["data-pagename"]), l.isEmptyObject(v) || (y.gp = v), t.spm && (y["spm-cnt"] = [ encodeURIComponent(r), t.spm.c, t.spm.d ].filter(function(e) {
                        return !!e;
                    }).join("."), delete t.spm), t.page_title ? (y.page_title = t.page_title || d.getPageTitle(h.url) || "", 
                    delete t.page_title) : y.page_title = n._page_title || "", t.is_auto ? (y.is_auto = t.is_auto, 
                    y.track_type = "1", delete t.is_auto, h.event_code && (y.event_type_id = h.event_code)) : (y.is_auto = 0, 
                    y.track_type = "0");
                    var S = c(t);
                    for (var b in S) "string" == typeof b && s.startsWith(b, "_") && (y[b] = S[b], delete t[b]);
                    m = u === g.APP_START || u === g.APP_END ? l.assign(y, t) : l.assign(y, {
                        cusp: t
                    }), a(u, m, o);
                } else if ("2001" === h.event_code) {
                    var P = {}, A = g.PAGE_START;
                    n = c(h.gokey) || {}, r = n.page_name || i.getPageName() || d.getPageCode(h.url) || h.url || "", 
                    P.r = h.arg1 || h.logkey || "-", P.page_name = r, n._page_auto_pv ? (P.is_auto = 1, 
                    P.url = n.path || "-", P.ref_url = n.referrer, P.track_type = "1", delete n._page_auto_pv, 
                    delete n.referrer, delete n.path, delete n.page_name) : (P.is_auto = 0, P.url = h.url || "-", 
                    P.ref_url = h.pre, P.track_type = "0"), n.duration && (P.duration = n.duration, 
                    delete n.duration), l.isEmptyObject(v) || (P.gp = v), n.scene && (P.scene = f.getPlatformType() + "_" + n.scene), 
                    n = s.deleteInfo(n, [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "uaid", "pvid", "scene" ]), 
                    P["spm-cnt"] = encodeURIComponent(r), n._page_auto_id && (A = n._page_auto_id, delete n._page_auto_id), 
                    n.page_start && (P.page_start = n.page_start, delete n.page_start), n.page_title ? (P.page_title = n.page_title || d.getPageTitle(h.url) || "", 
                    delete n.page_title) : P.page_title = n._page_title, delete n._page_title, P.url = d.getFullPath(P.url), 
                    P.ref_url = d.getFullPath(P.ref_url), a(A, l.assign(P, {
                        cusp: n
                    }), o);
                }
            },
            run: function() {
                this.watchLOG();
            }
        });
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(92), o = n(3);
        e.exports = a.extend({
            subscribeLogs: function(e, t) {
                r.pushIntoGoldlogQueue(o.SUBSCRIBE, [ e, function(e) {
                    e.status === o.COMPLETE && t(e);
                } ]);
            },
            getLogicSymbol: function() {
                return "ALI" === this.format ? "&" : "||";
            },
            handlerMiddleware: function() {},
            watchLOG: function() {
                var e = this;
                e.subscribeLogs(o.MW_CHANGE_PV, function(t) {
                    e.handlerMiddleware(t, "pv");
                }), e.subscribeLogs(o.MW_CHANGE_HJLJ, function(t) {
                    e.handlerMiddleware(t, o.APLUS);
                });
            },
            run: function() {
                this.watchLOG();
            }
        });
    }, function(e, t, n) {
        "use strict";
        var a = n(2);
        t.pushIntoGoldlogQueue = function(e, t) {
            var n = a.getGlobalValue("aplus_queue"), r = a.getGlobalValue("aplus"), o = e.split("."), i = r[o[1]], s = i ? i[o[2]] : null;
            r && 2 === o.length && i ? i.apply(r, t) : 3 === o.length && s ? s.apply(i, t) : n.push({
                action: e,
                arguments: t
            });
        };
    }, function(e, t, n) {
        var a = n(2), r = n(33), o = n(12), i = n(17);
        e.exports = function(e, t) {
            if ("string" != typeof e || !e) return void o().w("event logkey is invalid, id =", e || "'' event properties = ", i.stringfy(t.cusp));
            var n = Object.create(null);
            n.id = e, t && t.ts || (n.ts = Date.now());
            var s = typeof t;
            if ("object" === s) for (var u in t) ({}).hasOwnProperty.call(t, u) && (n[u] = t[u]);
            var c = a.getGlobalValue("aplus"), l = c.getMetaInfo("globalproperty");
            return r.isEmptyObject(l) || (n.gp = l), n;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(95), r = n(2);
        e.exports = function() {
            return {
                run: function() {
                    var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE, n = r.getContext(), o = n[t] || [], i = a.getFormatQueue(o, "metaQueue");
                    n[t] = i.queue, a.processGoldlogQueue(i.formatQueue, this.options.config);
                }
            };
        };
    }, function(e, t, n) {
        function a() {
            var e = u.getGoldlogVal("_$") || {}, t = e.meta_info;
            return t;
        }
        function r() {
            var e = a() || {}, t = e.uaid + "";
            return "1" !== t || e._anony_id ? e._hold || e["aplus-waiting"] : "BLOCK";
        }
        function o(e) {
            var t = r(), n = a() || {}, o = !0, i = e.arguments || [], s = i[0], u = i[1], c = "START";
            if ("_hold" === s && u === c) return c;
            if ("_anony_id" === s && u) return c;
            if (e && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(e.action)) switch (t) {
              case "BLOCK":
                n[t] || (h.push(e), o = !1);
            }
            return o;
        }
        function i(e) {
            g(d, e), g(_, e), g(h, e);
        }
        function s(e, t) {
            return t && f.openAPIs.indexOf(e) > -1 && (e = "_" + e), e;
        }
        var u = n(2), c = n(64), l = n(10), p = n(12), f = n(3), g = function(e, t) {
            function n() {
                if (e && c.isArray(e) && e.length) {
                    for (var n = m(e).queue, a = {}, r = []; a = n.shift(); ) v(a, t, function(e) {
                        r.push(e);
                    });
                    r.length > 0 && setTimeout(function() {
                        for (;a = r.shift(); ) v(a, t);
                    }, 100);
                }
            }
            try {
                n();
            } catch (e) {
                p().w(e);
            }
        };
        t.processGoldlogQueue = g;
        var d = [], _ = [], h = [];
        t.subscribeAndProcessQueue = function(e, t) {
            var n = u.getGlobalValue(e);
            n.push({
                action: f.SUBSCRIBE,
                arguments: [ f.SET_META_INFO, function(e, n) {
                    e === f._USER_ID && n ? g(d, t) : e === f._ANONY_ID && n ? g(_, t) : "_hold" === e && "START" === n && i(t);
                } ]
            });
        };
        var v = function(e, t, n) {
            var a = !!t.isOpenApi, r = e ? e.action : "", f = e ? e.arguments : "", g = o(e);
            if (g) {
                var d = u.getContext();
                try {
                    if (r && f && c.isArray(f)) {
                        var _, h = r.split("."), v = d, m = d;
                        if (3 === h.length) v = d[h[0]][h[1]] || {}, _ = s(h[2], a), m = v[_] ? v[_] : ""; else for (;h.length; ) if (_ = s(h.shift(), a), 
                        m = v = v[_], !v) return void (l(n) && n(e));
                        l(m) && m.apply(v, f), "START" === g && i(t);
                    }
                } catch (e) {
                    p().w(e);
                }
            }
        };
        t.processTask = v;
        var m = function(e, t) {
            for (var n = {
                subscribeMwChangeQueue: [],
                subscribeMetaQueue: [],
                subscribeQueue: [],
                metaQueue: [],
                othersQueue: []
            }, a = [], r = {}; r = e.shift(); ) try {
                var o = r.action, i = r.arguments[0];
                /subscribe/.test(o) ? "setMetaInfo" === i ? n.subscribeMetaQueue.push(r) : i === f.MW_CHANGE_PV || i === f.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(r) : n.subscribeQueue.push(r) : /MetaInfo/.test(o) ? n.metaQueue.push(r) : n.othersQueue.push(r);
            } catch (e) {
                p().w(e), n.othersQueue.push(r);
            }
            var s;
            return t && n[t] && (s = n[t], n[t] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
            a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
            {
                queue: a,
                formatQueue: s
            };
        };
        t.getFormatQueue = m;
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(2), o = n(95), i = a.extend({
            push: function(e) {
                this.length++, o.processTask(e, this.opts);
            }
        });
        e.exports = function() {
            return {
                processAplusQueue: function(e) {
                    var t = this.options.config || {}, n = r.getGlobalValue(e);
                    o.processGoldlogQueue(n, t), r.setGlobalValue(e, i.create({
                        opts: t,
                        startLength: n.length,
                        length: 0
                    }));
                },
                run: function() {
                    var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE;
                    this.processAplusQueue(t), "aplus_queue" === t && this.processAplusQueue("goldlog_queue"), 
                    o.subscribeAndProcessQueue(t, this.options.config);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            function e() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", t = i.getCurrentPage(), n = t.route || t.is;
                switch (e) {
                  case "onPullDownRefresh":
                    y.onPullDownRefresh += 1, h.push({
                        action: "aplus.record",
                        arguments: [ s.logkey || "$$_pull_down_refresh", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onPullDownRefresh
                        } ]
                    });
                    break;

                  case "onReachBottom":
                    y.onReachBottom += 1, h.push({
                        action: "aplus.record",
                        arguments: [ a.logkey || "$$_reach_bottom", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onReachBottom
                        } ]
                    });
                    break;

                  case "onShareAppMessage":
                    y.onShareAppMessage += 1, h.push({
                        action: "aplus.record",
                        arguments: [ g.logkey || "$$_share", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onShareAppMessage,
                            share_type: 1
                        } ]
                    });
                    break;

                  case "onShareTimeline":
                    y.onShareTimeline += 1, h.push({
                        action: "aplus.record",
                        arguments: [ g.logkey || "$$_share", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onShareTimeline,
                            share_type: 0
                        } ]
                    });
                    break;

                  case "onPageShow":
                    t.route && !v && (m = {
                        path: t.route,
                        page_name: t.route
                    }, m.ts = Date.now(), v = !0);
                    break;

                  case "onPageHide":
                    if (v) {
                        var r = Date.now() - m.ts || 0, u = i.getReferrerPage().route || i.getReferrerPage().is || "-", c = (p.getPageName() || {}).extraParams, l = Object.assign({}, c, {
                            duration: r,
                            path: m.path,
                            page_name: p.getPageCode() || m.page_name,
                            page_start: m.ts,
                            isMini: !0,
                            _page_auto_id: o.PAGE_END,
                            _page_auto_pv: !0,
                            referrer: u
                        });
                        h.push({
                            action: "aplus.sendPV",
                            arguments: [ {
                                is_auto: !0,
                                track_type: "1"
                            }, l ]
                        }), m = null, v = !1;
                    }
                }
            }
            function t() {
                a = _.getMetaInfo("rb_config"), s = _.getMetaInfo("pdr_config"), g = _.getMetaInfo("share_config");
            }
            function n(e, t) {
                if (e && t) try {
                    var n = _.getMetaInfo("aplus-api-host"), a = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, r = n.match(a);
                    if (r && r[0]) {
                        var s = o.HTTPS;
                        /(\d+\.){3,}\d+/.test(r[0]) && (s = "http:");
                        var u = s + "//" + n + "/vt/loadTransferConfig?code=" + e + "&appInfoId=" + t;
                        i.request(u, {}, function(e) {
                            try {
                                var t = e.data && e.data.data && e.data.data.config || "", n = e.data && e.data.data && e.data.data.debugId || "";
                                n && _.appendMetaInfo("aplus-global-args", {
                                    debugId: n
                                });
                                var a = new Date().getTime();
                                _._minicfg_load = new Date().getTime() - a, t && (_._aplus_vt_cfg = JSON.parse(t) || {}, 
                                l.vt2autoEvent());
                            } catch (e) {
                                f().w("fetch real-time visualization verification failed, err msg:" + e);
                            }
                        });
                    }
                } catch (e) {}
            }
            var a, s, g, d = r.getContext(), _ = r.getGlobalValue(o.APLUS), h = r.getGlobalValue(o.APLUS_QUEUE), v = !1, m = {
                ts: Date.now()
            }, y = {
                onPullDownRefresh: 0,
                onShareTimeline: 0,
                onReachBottom: 0,
                onShareAppMessage: 0,
                onClick: 0
            };
            h.push({
                action: o.SUBSCRIBE,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && t();
                } ]
            }), _.aplus_pubsub.subscribe("onLoad", function(e) {
                if ("ready" === e.status) try {
                    var t = p.getVTRealtimeCode();
                    if (t) {
                        var a = _.getMetaInfo("appInfoId");
                        n(t, a);
                    } else !!_.getMetaInfo("aplus-vt-cfg-url") && l.vt2autoEvent();
                } catch (e) {
                    f().w("fetch real-time visualization verification failed, errmsg:" + e);
                }
            }), _.aplus_pubsub.subscribe("onShow", function(t) {
                if ("ready" === t.status) {
                    var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                    n && e("onPageShow");
                }
            }), _.aplus_pubsub.subscribe("onHide", function(t) {
                if ("ready" === t.status) {
                    var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                    n && e("onPageHide");
                }
            }), _.aplus_pubsub.subscribe("onPullDownRefresh", function(t) {
                "ready" === t.status && e("onPullDownRefresh");
            }), _.aplus_pubsub.subscribe("onReachBottom", function(t) {
                "ready" === t.status && e("onReachBottom");
            }), _.aplus_pubsub.subscribe("onShareAppMessage", function(t) {
                "ready" === t.status && e("onShareAppMessage");
            }), _.aplus_pubsub.subscribe("onShareTimeline", function(t) {
                "ready" === t.status && e("onShareTimeline");
            }), _.getMetaInfo("aplus-vt-cfg-url") && u.pushIntoGoldlogQueue(o.SUBSCRIBE, [ c, function(e) {
                var t = e.pageConfig;
                t && t.enabled && (_._aplus_vt_cfg = t);
            } ]);
        }
        var r = n(2), o = n(3), i = n(9), s = n(98), u = n(92), c = "MiniVtConfigFormat", l = n(101), p = n(36), f = n(12);
        e.exports = function() {
            return {
                run: function() {
                    var e = r.getGlobalValue("aplus");
                    if (a(), !e._aplus_aleady_load_minivt) {
                        e._aplus_aleady_load_minivt = 1;
                        var t = s.create();
                        t.run();
                    }
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(92), o = n(99), i = n(7), s = n(33), u = n(100), c = n(3), l = n(2), p = "MiniVtConfigBack", f = "MiniVtConfigFormat", g = c.PUBLISH;
        e.exports = a.extend(s.assign(u, {
            pathname: "",
            pageConfig: {},
            originSpm: {
                spmA: "",
                spmB: ""
            },
            updateCfgLs: function() {
                var e = this;
                setTimeout(function() {
                    e.fetchFromCdn();
                }, 1e3);
            },
            fetchFromCdn: function() {
                var e = this, t = l.getGlobalValue("aplus"), n = t.getMetaInfo("aplus-vt-cfg-url");
                if (n) {
                    var a = new Date().getTime();
                    t.requestVTConfig(n, function(n) {
                        var o = n.data;
                        if (t._minicfg_load = new Date().getTime() - a, o) try {
                            t._aplus_vt_cfg = "object" == typeof o ? o : JSON.parse(o), t._aplus_vt_cfg.points && i(t._aplus_vt_cfg.points, function(e) {
                                e.selector = decodeURIComponent(e.selector);
                            }), e.setConfigIntoLs(t._aplus_vt_cfg);
                        } catch (e) {
                            t._aplus_vt_cfg = {
                                enabled: !1
                            };
                        }
                        r.pushIntoGoldlogQueue(g, [ p, {
                            pageConfig: t._aplus_vt_cfg,
                            enable: 0
                        } ]);
                    }, function(e) {
                        t._aplus_vt_cfg && t._aplus_vt_cfg.enabled && r.pushIntoGoldlogQueue(g, [ p, {
                            pageConfig: t._aplus_vt_cfg,
                            enable: 0
                        } ]), o.catchException("getTrackerCfg", e, {
                            msg: n
                        });
                    }, {
                        timeout: 5e3
                    });
                }
            },
            getMiniVtData: function(e, t, n) {
                var a = l.getGlobalValue("aplus");
                if (a._minicfg_load = 0, e) {
                    var o = this.fetchFromLS(e);
                    if ("string" == typeof o) try {
                        o = JSON.parse(o);
                    } catch (e) {
                        o = {};
                    }
                    o && o.enabled && (a._aplus_vt_cfg = o), n ? this.fetchFromCdn(e, t) : r.pushIntoGoldlogQueue(g, [ p, {
                        pageConfig: o,
                        enable: 0
                    } ]);
                }
            },
            syncMiniVtData: function() {
                var e = this.getVtConfigPath();
                this.getMiniVtData(e, "", !0);
            },
            init: function() {
                var e = this, t = c.SUBSCRIBE;
                r.pushIntoGoldlogQueue(t, [ p, function(t) {
                    t.enable || (e.pageConfig = t.pageConfig), r.pushIntoGoldlogQueue(g, [ f, {
                        pageConfig: e.pageConfig,
                        originSpm: e.originSpm
                    } ]), !t.enable && e.setConfigIntoLs(e.pageConfig);
                } ]), e.syncMiniVtData();
            },
            run: function() {
                return this.init(), this;
            }
        }));
    }, function(e, t, n) {
        "use strict";
        var a = n(92);
        t.catchException = function(e, t) {
            var n = e;
            "object" == typeof t && t.message && (n = n + "_" + t.message), a.pushIntoGoldlogQueue("aplus._aplus_cplugin_m.do_tracker_jserror", [ {
                message: n,
                error: JSON.stringify(t),
                filename: e
            } ]);
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(9), o = n(11);
        e.exports = {
            lsMinivtConfigKey: "APLUS_MINI_CONFIG",
            getMiniVtTplCdnPath: function() {
                var e = a.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-track-config-id"), n = t && t.turnon, r = t && t.value;
                return "1" === n && r ? r : "";
            },
            getVtConfigPath: function() {
                var e, t = this.getMiniVtTplCdnPath(), n = [], a = o.getAppKey();
                return a && (e = a), e && (n = e.split(".")), 2 === n.length ? this.originSpm = {
                    spmA: n[0],
                    spmB: n[1]
                } : 1 === n.length && (this.originSpm.spmA = n[0]), t ? t : 2 === n.length ? n.join("_") : 1 === n.length ? n[0] : void 0;
            },
            fetchFromLS: function(e) {
                this.cdnpath || (this.cdnpath = e || this.getMiniVtTplCdnPath());
                var t = r.getContext();
                return decodeURIComponent(t.getStorageSync(this.lsMinivtConfigKey + "-" + e)) || {};
            },
            setConfigIntoLs: function(e) {
                this.cdnpath || (this.cdnpath = this.getVtConfigPath());
                var t = r.getContext();
                t.setStorageSync(this.lsMinivtConfigKey + "-" + this.cdnpath, encodeURIComponent(JSON.stringify(e)));
            }
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            function n(e, t) {
                for (var n = -1, a = 0; a < t.length; a++) {
                    var r = t[a];
                    if (r.cssSelector === e.cssSelector && r.logkey === e.logkey) {
                        n = a;
                        break;
                    }
                }
                return n;
            }
            e = u.isArray(e) ? e : [], t = u.isArray(t) ? t : [];
            var a = [].concat(t, e), r = a.filter(function(e, t, a) {
                return n(e, a) === t;
            });
            return r;
        }
        function r(e) {
            return u.isArray(e) ? e.filter(function(e) {
                return void 0 === e._vt;
            }) : [];
        }
        function o(e) {
            return /^[.#]/.test(e) ? e : e ? "." + e : "";
        }
        function i(e) {
            var t = s.getCurrentPage(), n = e || t.route, a = p._aplus_vt_cfg || p._aplus_tracking_cfg, r = [], i = [];
            return a && a.pages && l(a.pages, function(e) {
                p.setPageName({
                    pageName: e.spmB,
                    extraParams: e.extraParams
                }, e.matchUrl), e.matchUrl === n && (l(a.points, function(t) {
                    e.spmB === t.spmB && ("exposure" === t.trackerType ? r.push({
                        cssSelector: o(t.selector),
                        positionSelector: t.positionSelector,
                        logkey: t.logkey,
                        props: t.props,
                        spmB: t.spmB,
                        spmC: t.spmC,
                        spmD: t.spmD,
                        customArgs: t.customArgs,
                        _vt: e.template || e.stdId ? 2 : 1
                    }) : i.push({
                        cssSelector: o(t.selector),
                        logkey: t.logkey,
                        props: t.props,
                        spmB: t.spmB,
                        spmC: t.spmC,
                        spmD: t.spmD,
                        customArgs: t.customArgs,
                        _vt: e.template || e.stdId ? 2 : 1
                    }));
                }), a.common_exdata && "object" == typeof a.common_exdata && p.setMetaInfo("aplus-exdata", a.common_exdata), 
                a.common_pvdata && "object" == typeof a.common_pvdata && p.setMetaInfo("aplus-cpvdata", a.common_pvdata));
            }), {
                EXP: r,
                CLK: i
            };
        }
        var s = n(9), u = n(64), c = n(2), l = n(7), p = c.getGlobalValue("aplus"), f = n(36);
        t.getCurrentPageVTCfg = function() {
            var e = p._aplus_vt_cfg;
            if (e) for (var t = f.getCurrentPagePath(), n = 0; n < e.pages.length; n++) {
                var a = e.pages[n];
                if (a.matchUrl === t) return a;
            }
        }, t.getTrackConfigByPath = i, t.getTrackConfigByPointCssSelector = function(e, t, n) {
            var a = i(n)[t] || [], r = null;
            return l(a, function(t) {
                t.cssSelector === e && (r = t);
            }), r;
        }, t.vt2autoEvent = function() {
            var e = p._aplus_vt_cfg || p._aplus_tracking_cfg;
            if (e && e.pages) {
                var t = i(), n = r(p.getMetaInfo("aplus-auto-exp"));
                p.setMetaInfo("aplus-auto-exp", a(n, t.EXP));
                var o = r(p.getMetaInfo("aplus-auto-clk"));
                p.setMetaInfo("aplus-auto-clk", a(o, t.CLK));
            }
        };
    }, , function(e, t, n) {
        "use strict";
        var a = n(69), r = n(10), o = n(49);
        t.run = function(e, t) {
            var n = new a();
            n.run({
                plugins: e.plugins,
                context: e.context
            }, {
                config: {},
                userdata: {},
                pubsubType: "aplusinit",
                messageFnQueue: [],
                middlewareMessageKey: "mw_change_aplusinit"
            }, function(e) {
                var n = [ "aplusInitContext", e ];
                o.doPubMsg(n), o.doCachePubs(n), r(t) && t(e);
            });
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function(e, t) {
            var a = n(2), r = n(49), o = n(12);
            o().setDebug(!(!e || "object" != typeof e || !e.metaInfo.DEBUG));
            var i = n(7), s = n(9), u = n(103);
            s.initIsTB(), "object" == typeof e && (e.siteId && (t.globalConfig.siteId = e.siteId), 
            t.metaInfo = Object.assign({}, t.metaInfo, e.metaInfo));
            var c = "running", l = "complete", p = [ "aplusReady", c ];
            return r.doPubMsg(p), u.run({
                plugins: t.plugins,
                context: function() {
                    var e = {
                        PAGE_LOAD_TIME: new Date()
                    }, n = [];
                    return i(t.plugins, function(t) {
                        e[t.name] = t.config, "aplus_log_inject" === t.name && t.config && t.config.plugins && (n = t.config.plugins.pv, 
                        i(n, function(t) {
                            e[t.name] = t.config;
                        }));
                    }), Object.assign({}, e, {
                        aplus_config: t
                    });
                }
            }, function() {
                o().v("APLUS INIT SUCCESS"), p[1] = l, r.doPubMsg(p);
            }), a.getContext();
        };
    } ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9hcGx1c19taW5pX2Nsb3VkX3VtLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBhZGI5NjQ1ZTcwNDc3OGIyNDMxNSIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2FwbHVzU3RhdGljLmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19taW5pX2Nsb3VkX3VtX2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNQbGFpbk9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdWxvZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91bV9zZXNzaW9uX21hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2NhY2hlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91bV9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2JvZHlCdWlsZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9tYW5nbGVfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vaW1wcmludE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2Jhc2U2NC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFBlcmZvcm1hbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUmVtb3RlQ2ZnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFRyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTW9uaXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9mb3JtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9CYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWFpbl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21ldGFJbmZvTWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFB1YnN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfbWluaV9jbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbG9nSWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi91dGlsUGFyYW1zLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1VuZGVmaW5lZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnRMaW1pdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvY2FsQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1c19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2dnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9jbGsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19jbGsvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9jb2xsZWN0X2Nsay5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3dhdGNoVHJhY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL2dldEhhc2hLZXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS91dGlscy9yYXhVdGlsLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2V4cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fZXhwL2NvbGxlY3RfZXhwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfY29tbW9uL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbE1ldGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9vcGVuX2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL21pbmlfc3BtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fbWluaV91bV9odHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fYmFzZV9odHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsR1EuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX21pbml2dC9mZXRjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbENhdGNoLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9taW5pdnRTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvdXRpbFZULmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL2FwbHVzaW5pdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9iYXNpY191bS5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJhIiwiaSIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsImluaXRHbG9iYWwiLCJhcHBDb25maWciLCJhcGx1c19jb25maWciLCJfYXBsdXNfY29udGV4dCIsImFwbHVzU3RhdGljIiwiQVBMVVMiLCJBUExVU19RVUVVRSIsIkdPTERMT0ciLCJHT0xETE9HX1FVRVVFIiwiaXNXZWIiLCJ3aW5kb3ciLCJlIiwiZ2V0Q29udGV4dCIsImNvbnRleHQiLCJ2IiwiYXBsdXMiLCJhcGx1c19xdWV1ZSIsIl9hcGx1c0RlZmF1bHRWYWx1ZSIsIl9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlIiwiZ29sZGxvZyIsIl9nb2xkbG9nX3F1ZXVlIiwiZ29sZGxvZ19xdWV1ZSIsImNvbmNhdCIsImdldEdsb2JhbFZhbHVlIiwia2V5IiwiZyIsInEiLCJzZXRHbG9iYWxWYWx1ZSIsInZhbHVlIiwiZ2V0R29sZGxvZ1ZhbCIsInNldEdvbGRsb2dWYWwiLCJ2YWwiLCJmIiwiZ2V0Q2xpZW50SW5mbyIsIk1XX0NIQU5HRSIsIk1FVEFfSU5GTyIsIkFQUEVORF9NRVRBX0lORk8iLCJTRVRfTUVUQV9JTkZPIiwiSFRUUCIsIl9wdWJzdWIiLCJkZWZhdWx0Q29kZSIsIkNMSyIsIkVYUCIsIklNUEVYUCIsIk9USEVSIiwiQVBQX1NIT1ciLCJBUFBfSElERV9PUl9VTkxPQUQiLCJTRVNTSU9OX0lOVEVSVkFMIiwiU0hBUkVfQ0FDSEVfSU5URVJWQUwiLCJFS1ZTIiwiRVZFTlRfTUFYX0NPVU5UIiwiTUVNT1JZX01BWF9DT1VOVCIsIk1BWF9RVUVVRV9DT1VOVCIsIkVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCIsIlBBR0VfU1RBUlQiLCJQQUdFX0VORCIsIkFQUF9TVEFSVCIsIkFQUF9FTkQiLCJVU0VSX1BST0ZJTEVfS0VZIiwiSU1QUklOVCIsIklEX1RZUEUiLCJKU0JSSURHRV9PTkxZIiwiUEFHRV9DT05GSUciLCJBUExVU19TS0lQX0FQVl9SVUxFUyIsIkFQTFVTX1BWX0RPTUFJTiIsIkFQTFVTX0VLVl9ET01BSU4iLCJBVVRPX0dFVF9PUEVOSUQiLCJQQUdFX0VOVEVSIiwiQ1VSUkVOVF9QQUdFX0NPTkZJRyIsIl9BTk9OWV9JRCIsIl9ERVZfSUQiLCJfVVNFUl9JRCIsIkRFRkFVTFRfQ09ERSIsIkVWRU5UX01BUCIsIjIxMDEiLCIyMjAxIiwiMjIwMiIsIjE5OTk5IiwiMTAyMyIsIjEwMTAiLCJFVkVOVF9JRF9NQVAiLCJTSE9XIiwiSF9PUl9VIiwiVU5TVUJTQ1JJQkUiLCJTVUJTQ1JJQkUiLCJQVUJMSVNIIiwiQ0FDSEVfUFVCUyIsIkFQTFVTX1VOSVZFUlNBTCIsIkNPTVBMRVRFIiwiUFZfQ09ERSIsIkVYUF9DT0RFIiwiQ0xLX0NPREUiLCJPVEhFUl9DT0RFIiwiU1BNX0NOVCIsIlNQTV9VUkwiLCJTUE1fUFJFIiwiTVdfQ0hBTkdFX1BWIiwiTVdfQ0hBTkdFX0hKTEoiLCJIVFRQUyIsIkFQTFVTX0FQUEVORF9NRVRBX0lORk8iLCJBUExVU19TRVRfTUVUQV9JTkZPIiwiUFZJRCIsIkFQTFVTX0xPR19QSVBFIiwib3BlbkFQSXMiLCJTRVNTSU9OX1BBVVNFX1RJTUUiLCJDVVJSRU5UX1NFU1NJT04iLCJNQVhfRVZFTlRJRF9MRU5HVEgiLCJNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCIsIk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UIiwiRkFJTEVEX1JFUVVFU1RTIiwiUkVRVUVTVFMiLCJTSEFSRVMiLCJBUExVU19TU1JDIiwiR0xPQkFMX1BST1BFUlRZIiwiQVBMVVNfSU1QUklOVF9WRVJTSU9OIiwiQVBMVVNfUkVNT1RFX0NPTkZJRyIsIlJBTksiLCJXRUJfRVZFTlRfU1VGRklYIiwiV0VCX1BDX1BWX1NVRkZJWCIsIldFQl9XQVBfUFZfU1VGRklYIiwiUEFHRV9MRUFWRSIsIkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEIiwiQVBMVVNfQVVUT1RSQUNLX0VOQUJMRURfUkVNT1RFIiwiQVBMVVNfQVVUT1RSQUNLX0NPTkZJRyIsIkFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFIiwiQVBMVVNfRElTQUJMRV9BVVRPRVZFTlQiLCJBUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUiLCJBUExVU19ESVNBQkxFX0FVVE9QViIsIkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSIsIkFQTFVTX0RFVklDRV9FTkFCTEUiLCJQRVJGT1JNQU5DRV9XQVJJTkciLCJTVEFSVF9JRCIsIm1ldGFJbmZvIiwiYXBsdXMtcmhvc3QtdiIsImFwbHVzLXJob3N0LWciLCJhcGx1cy1tbXN0YXQtdGltZW91dCIsImFwbHVzLWRpc2FibGUtYXV0b2V2ZW50IiwiYXBsdXMtZGlzYWJsZS1hcHYiLCJhcGx1cy1hdXRvdHJhY2stZW5hYmxlZCIsImFwbHVzLWRldmljZS1lbmFibGUiLCJzZGtJZCIsImdsb2JhbENvbmZpZyIsImlzQWxpIiwiaXNEZWNvZGVVcmwiLCJFVEFHX1NUT1JBR0VfS0VZIiwic2NyaXB0X25hbWUiLCJhcGx1cy1nbG9iYWxkYXRhIiwibHZlciIsInBsdWdpbnMiLCJuYW1lIiwicGF0aCIsImRlcHMiLCJjb25maWciLCJwdiIsImFwbHVzV2FpdGluZyIsImxvZ2RhdGFUb1V0IiwiaGpsaiIsImlzT3BlbkFwaSIsImdldEdsb2JhbEFyZ3MiLCJxdWVyeSIsInNjZW5lIiwiZ2xvYmFsX2FyZ3MiLCJtaW5pYXBwRGVidWdJZCIsImRlYnVnSWQiLCJrIiwiaW5kZXhPZiIsInNlc3Npb25TdGFydCIsIm9wdGlvbnMiLCJjYWNoZSIsImxvYWQiLCJ1bG9nIiwidyIsImdldCIsInNldCIsIm5ld09wdGlvbnMiLCJkZWVwQ2xvbmUiLCJjbG9uZURlZXAiLCJ1dGlsRGFzaCIsImFzc2lnbiIsInJlcXVlc3RRdWV1ZSIsImNiIiwic2VuZCIsImlzTmV3U2Vzc2lvbiIsInNlc3Npb25NYW5hZ2VyIiwicmVzdW1lIiwic2Vzc2lvbklkIiwiZ2V0Q3VycmVudFNlc3Npb25JZCIsImV2ZW50TWFuYWdlciIsInNldFNlc3Npb25JZCIsInNlc3Npb25FbmQiLCJwYXVzZSIsInNhdmUiLCJhZGFwdE15QXBwSGlkZSIsIm15Iiwib25UaXRsZUNsb3NlQ2xpY2siLCJpbmplY3RBcHAiLCJhcHBCYWsiLCJBcHAiLCJhbHJlYWR5U3RhcnRlZCIsImxhbnVjaGVkIiwiY3R4IiwidXRpbEdvbGRsb2ciLCJtaW5pIiwiZm4iLCJvbkxhdW5jaCIsImluaXRJc1RCIiwicmVmZXJyZXJJbmZvIiwidXRpbFJlbW90ZUNmZyIsImVuYWJsZUNmZyIsImdldFN5bmMiLCJBUFBfTEFVTkNIX1RZUEUiLCJwdXNoIiwiYWN0aW9uIiwiYXJndW1lbnRzIiwicXVlcnlEYXRhIiwic3BtIiwic3BtX29yaWduIiwidHJpbSIsImRlYnVnSW5mb3MiLCJzcGxpdCIsImFwbHVzX3dvcmtfbm8iLCJsZW5ndGgiLCJhcGx1c190cmFja19kZWJ1Z19pZCIsImFwbHVzX2ZsYWciLCJvblNob3ciLCJvcHRzIiwic3RhcnRfdHlwZSIsInV0aWxzIiwib25BcGx1c1JlYWR5IiwidXRpbE1vbml0b3IiLCJjbGVhciIsInN0YXJ0aWQiLCJ1bVV0aWxzIiwiZ2V0U3RhcnRJZCIsInNldFN0YXJ0SWQiLCJwYWdlQ29kZSIsIlBhZ2VNYW5hZ2VyIiwiZ2V0UGFnZUNvZGUiLCJvbkFwcFNob3dUaW1lIiwiRGF0ZSIsIm5vdyIsInBhZ2VfbmFtZSIsInVybCIsIm9uSGlkZSIsImdldEN1cnJlbnRQYWdlUGF0aCIsImR1cmF0aW9uIiwiZW5kX3R5cGUiLCJzdGFydF90aW1lIiwiYWZ0ZXIiLCJtZXRob2RzIiwidCIsInRoaXNPYmplY3QiLCJhcmdzIiwib25BcHBTaG93IiwiaXNGdW5jdGlvbiIsImdldExhdW5jaE9wdGlvbnNTeW5jIiwib25BcHBIaWRlIiwicnVuIiwiZWFjaCIsInJlc2V0Rm4iLCJuIiwicnMiLCJhcHBseSIsInJld3JpdGVGbiIsIm9iaiIsIm5ld0ZuIiwib2xkRm4iLCJjYWxsYmFjayIsInN0YXR1cyIsImNsaWNrX3Byb3h5IiwibWV0aG9kIiwidXRpbE9iamVjdCIsIm9yaUZ1bmMiLCJyZXN1bHQiLCJldmVudCIsImlzT2JqZWN0IiwicmVjb3JkIiwiZ2V0SW5kZXhCeVJlY3QiLCJzZWxlY3RvciIsInRhcmdldFJlY3QiLCJ0YXJnZXRJbmRleCIsImNyZWF0ZVNlbGVjdG9yUXVlcnkiLCJzZWxlY3RBbGwiLCJib3VuZGluZ0NsaWVudFJlY3QiLCJleGVjIiwicmVjdCIsIml0ZW0iLCJpbmRleCIsIndpZHRoIiwiaGVpZ2h0IiwibGVmdCIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwiaXNQbGFpbk9iamVjdCIsImFyciIsImF0dHIiLCJoYXNPd25Qcm9wZXJ0eSIsImwiLCJwcm90byIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwiX2lzVGIiLCJVQSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInN3dXNlckFnZW50IiwidGVzdCIsImdldFBsYXRmb3JtVHlwZSIsImNhbklVc2UiLCJpc1RCIiwidXRpbCIsImdldEN1cnJlbnRQYWdlIiwicGFnZXMiLCJnZXRDdXJyZW50UGFnZXMiLCJnZXRSZWZlcnJlclBhZ2UiLCJyZXNldElzVEIiLCJkZCIsInBsYXRUeXBlIiwic2RrVHlwZSIsImxvZ0RvbWFpbiIsInRiIiwidHQiLCJzd2FuIiwid3giLCJnZXRTZGtUeXBlIiwiZ2V0TG9nRG9tYWluIiwiSFRUUF9SRVFVRVNUIiwiUkVRVUVTVCIsIkZOIiwicmVxdWVzdCIsInN1Y2Nlc3NDYWxsYmFjayIsImZhaWx1cmVDYWxsYmFjayIsIm1ldGhvZE5hbWUiLCJyZXF1ZXN0TWV0aG9kTmFtZSIsInJlcSIsImNhbGxiYWNrZWQiLCJkYXRhVHlwZSIsInRpbWVvdXQiLCJmaXhEb21haW4iLCJtc2ciLCJyZXFPcHRpb25zIiwic3VjY2VzcyIsInJlcyIsImZhaWwiLCJmYWlsdXJlIiwiZGF0YSIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJKU09OIiwic3RyaW5naWZ5IiwiX2V4dEluZm8iLCJnZXRNZXRhSW5mbyIsInNldFRpbWVvdXQiLCJjb25zb2xlIiwid2FybiIsInNldFN0b3JhZ2VTeW5jIiwicHQiLCJlcnJvciIsImdldFN0b3JhZ2VTeW5jIiwibyIsImFycjJwYXJhbSIsImxlbiIsInNfcGxhaW5fb2JqIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwiam9pbiIsIm1rUGxhaW5LZXkiLCJNYXRoIiwicmFuZG9tIiwibWtQbGFpbktleUZvckV4cGFyYW1zIiwia2V5X3ByZWZpeCIsIl9rZXkiLCJwYXJhbTJhcnIiLCJwYXJhbXMiLCJzaGlmdCIsImFycjJvYmoiLCJyZXQiLCJqc29uTGlrZVN0cjJKU09OIiwianNvblN0ciIsInN0ciIsInJlcGxhY2UiLCJhcnIxIiwiYXJyMiIsImdldEFwcEtleSIsImNoZWNrRW1wdHlPYmoiLCJrZXlzIiwiY2hlY2tEb21haW4iLCJyZWciLCJSZWdFeHAiLCJtYXRjaGVkIiwibWF0Y2giLCJ0aXBfdyIsInJlcGVhdCIsImNoZWNrT3BlbmlkIiwib2QiLCJtYXBFdmVudFNhbXBsZVJhdGVzIiwiZXZlbnRJZHMiLCJla3YiLCJldmVudElkIiwic2FtcGxpbmdSYXRlIiwiTE9HX1BSRUZJWCIsIlVMb2ciLCJzZXREZWJ1ZyIsImRlYnVnIiwiX2RlYnVnIiwiaW5mbyIsImxvZyIsImNoYXIiLCJfaW5zdGFuY2UiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImlzRW1wdHlPYmplY3QiLCJyIiwibmV3b2JqIiwiQXJyYXkiLCJpc0FycmF5IiwicGFyc2UiLCJpbml0IiwibmV3U2Vzc2lvbiIsIl9jdXJyZW50U2Vzc2lvbiIsImRhdGUiLCJfcmVzdW1lVGltZSIsImdldFRpbWUiLCJlbmRfdGltZSIsIl9jcmVhdGVOZXdTZXNzaW9uIiwiX2VuZFNlc3Npb24iLCJnZXRDdXJyZW50U2Vzc2lvbiIsImNsb25lQ3VycmVudFNlc3Npb24iLCJfZ2V0VW1QYXJhbXMiLCJhcGx1c19xdWVyeSIsInByZXZPcHRpb25zIiwibGF1bmNoT3B0aW9ucyIsInJlZmVycmVyQXBwSWQiLCJhcHBJZCIsImdwIiwidHMiLCJnZXRSYW5kb21TdHIiLCJzdGF0ZV9zIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwianNvblV0aWwiLCJDYWNoZSIsIl9kYXRhIiwicmVtb3ZlU3RvcmFnZSIsIl9uYW1lIiwiZ2V0U3RvcmFnZSIsIl9sb2FkZWQiLCJlcnJNc2ciLCJzZXRTdG9yYWdlIiwic3RyaW5nZnkiLCJyZW1vdmUiLCJnZXRBbGwiLCJoYXMiLCJpc0xvYWRlZCIsInNldFN5bmMiLCJqc29uIiwicGFyc2VUb0FycmF5IiwiTnVtYmVyIiwicG9zIiwicm91bmQiLCJzdGFydHNXaXRoIiwic2VhcmNoVmFsIiwic3Vic3RyIiwidGFyZ2V0IiwidW5kZWZpbmVkIiwiVHlwZUVycm9yIiwib3V0cHV0Iiwic291cmNlIiwibmV4dEtleSIsImNoZWNrRXZlbnQiLCJwcm9wZXJ0aWVzIiwiY3VzcCIsInJlc2VydmVXb3JkcyIsInJlc2VydmVXb3JkTWFwIiwiZm9yRWFjaCIsIndvcmQiLCJjb3VudCIsImRlbGV0ZUluZm8iLCJnb2tleSIsIkRhdGFUeXBlIiwiSEFMRl9TRVNTSU9OIiwiQ0xPU0VfU0VTU0lPTiIsIkVLViIsIkVOVEVSX1BBR0UiLCJMRUFWRV9QQUdFIiwiQWNjZXNzVHlwZSIsIk1PQklMRV9ORVRXT1JLXzJHIiwiTU9CSUxFX05FVFdPUktfM0ciLCJNT0JJTEVfTkVUV09SS180RyIsIk1PQklMRV9ORVRXT1JLX05PTkUiLCJfY2FjaGVFdmVudHMiLCJfbWVtb3J5RXZlbnRzIiwiZWt2cyIsIl9nZXRDYWNoZUV2ZW50c0xlbmd0aCIsIl9idWlsZEVrdnMiLCJtZW1vcnlFdmVudHMiLCJldmVudHMiLCJfc2Vzc2lvbklkIiwiZXZlbnRzTWFwIiwiYWRkRXZlbnQiLCJ1bnNoaWZ0IiwiX25vU2Vzc2lvbkV2ZW50cyIsInN0YXJ0SWQiLCJfc3RhcnRJZCIsImdldEVrdnMiLCJnZXRFa3ZzTGVuIiwibWVtb3J5RXZlbnRzTGVuIiwiSGVhZGVyIiwiYnVpbGRCb2R5IiwiUXVldWUiLCJfZW5xdWV1ZVJlcXVlc3QiLCJjbGllbnQiLCJfYXBsdXNfY2xpZW50IiwiaGVhZGVyIiwiZ2V0TmV0SW5mbyIsIm5vQ2FjaGUiLCJfcXVldWUiLCJlbnF1ZXVlIiwiX3NlbmRRdWV1ZSIsImNvbXBsZXRlZENhbGxiYWNrIiwiaXNOUiIsInNlbmRRdWV1ZSIsIl9mYWlsZWRRdWV1ZSIsImRlcXVldWUiLCJfZmFpbFJlcXVlc3RzIiwiX3Byb2Nlc3NGYWlsUmVxdWVzdHMiLCJfc3RhcnRTZW5kIiwiUmVxdWVzdFF1ZXVlIiwiYWRkIiwiX3JlcUtleSIsImxvYWRRdWV1ZSIsIml0ZW1zIiwiY2FjaGVkIiwibmV3Q2FjaGUiLCJyZXFLZXkiLCJhY2Nlc3MiLCJuZXR3b3JrVHlwZSIsInRvTG93ZXJDYXNlIiwiYWNjZXNzX3N1YnR5cGUiLCJnZXRIZWFkZXJJbmZvIiwiaW1wcmludCIsImRldmljZV90eXBlIiwic2RrX3ZlcnNpb24iLCJhcHBrZXkiLCJkZXZpY2VfaW5mbyIsImFwcGlkIiwiYXBwX2VudiIsImFwcEVudiIsImFwcF92ZXJzaW9uIiwic3lzdGVtSW5mbyIsInNhZmVBcmVhIiwibW9kZWwiLCJwbGF0Zm9ybSIsImJyYW5kIiwiYnJhbmRMIiwic2RrX3R5cGUiLCJwbGF0Zm9ybV9zZGtfdmVyc2lvbiIsIlNES1ZlcnNpb24iLCJwbGF0Zm9ybV92ZXJzaW9uIiwicGxhdGZvcm1WZXJzaW9uIiwic2NyZWVuV2lkdGgiLCJwaXhlbFJhdGlvIiwiaCIsInNjcmVlbkhlaWdodCIsInJlc29sdXRpb24iLCJwaXhlbF9yYXRpbyIsIm9zIiwiZm9udF9zaXplX3NldHRpbmciLCJmb250U2l6ZVNldHRpbmciLCJkZXZpY2VfbW9kZWwiLCJkZXZpY2VfYnJhbmQiLCJkZXZpY2VfbWFudWZhY3R1cmVyIiwiZGV2aWNlX21hbnVpZCIsImRldmljZV9uYW1lIiwib3NfdmVyc2lvbiIsImxhbmd1YWdlIiwibmV0SW5mbyIsIl9idWlsZEhhbGZTZXNzaW9uIiwic2Vzc2lvbiIsInN0IiwiYW5hbHl0aWNzIiwic2Vzc2lvbnMiLCJfYnVpbGRDbG9zZVNlc3Npb24iLCJfYnVpbGRFa3YiLCJnZXRVcmwiLCJyaG9zdCIsImFwbHVzVXRpbCIsIm1pbmlMb2ciLCJzZGtSZXF1ZXN0Iiwic3JjU3VjY2VzcyIsInNyY0ZhaWwiLCJpc1RpbWVvdXQiLCJyZXNwIiwiY2xlYXJUaW1lb3V0IiwiaHR0cFJlcXVlc3QiLCJNQVhfUkVRVUVTVF9USU1FT1VUIiwic2F2ZUltcHJpbnQiLCJsb2NhbEltcHYiLCJpbXByaW50VmVyc2lvbiIsInJlbW90ZUltcHYiLCJ0cmFja0RvbWFpbiIsInJlcXVlc3RSZW1vdGVDb25maWciLCJlcnIiLCJsc1JlbW90ZUNmZyIsImJ1aWxkSHR0cEhlYWRlciIsImhlYWRlclR5cGUiLCJpc015IiwiTXNnLVR5cGUiLCJtYW5nbGUiLCJpbXByaW50TWFuYWdlciIsImJhc2U2NCIsInV0aWxQZXJmb3JtYW5jZSIsImZhaWxDYWxsYmFjayIsInBfaGVhZGVyIiwiYWxpcGF5X2lkIiwidW5pb25pZCIsInVzZXJJZCIsIm9wZW5pZCIsInVzZXJfbmljayIsImFjdGl2ZV91c2VyIiwicHVpZCIsInByb3ZpZGVyIiwidHJhY2VJZCIsInN0YXJ0X2lkIiwibWFuZ2xlRGF0YSIsInJlcXVlc3REYXRhIiwiZW5jb2RlIiwic3RhdHVzQ29kZSIsImNvZGUiLCJwcm9maWxlIiwiZW5kIiwicmVzcG9uc2VFbmQiLCJzdGFydCIsInJlcXVlc3RTdGFydCIsIm5lZWRTZW5kUGVyZm9ybWFuY2VFdmVudCIsImNvbXBsZXRlIiwiX21hbmdsZUhlYWRlciIsIm1hcCIsIl9tYW5nbGVPYmoiLCJpZF90cmFja2luZyIsImlkTWFwIiwiX21hbmdsZUFuYWx5dGljcyIsInByb3AiLCJhbmFseXRpY3NNYXAiLCJoZWFkZXJNYXAiLCJpZF90eXBlIiwiX2lkIiwidGVzdFRva2VuIiwidXVpZCIsImFub255bW91c2lkIiwiZGV2aWNlX2lkIiwidXNlcmlkIiwiSW1wcmludE1hbmFnZXIiLCJfaW1wcmludCIsImdldEltcE9iaiIsImRlY29kZSIsImdldEl0ZW0iLCJpbXBvYmoiLCJiNjRjaGFycyIsImI2NHRhYiIsImJpbiIsImNoYXJBdCIsImZyb21DaGFyQ29kZSIsIlN0cmluZyIsImNiX3V0b2IiLCJjYyIsImNoYXJDb2RlQXQiLCJyZV91dG9iIiwidXRvYiIsInUiLCJjYl9lbmNvZGUiLCJjY2MiLCJwYWRsZW4iLCJvcmQiLCJjaGFycyIsImJ0b2EiLCJiIiwiX2VuY29kZSIsInVyaXNhZmUiLCJtMCIsInJlX2J0b3UiLCJjYl9idG91IiwiY2NjYyIsImNwIiwib2Zmc2V0IiwiYnRvdSIsImNiX2RlY29kZSIsImF0b2IiLCJfZGVjb2RlIiwiZ2V0TWV0cmljIiwiZW50cmllcyIsImR1cmF0aW9uQXJyYXkiLCJtYXgiLCJJbmZpbml0eSIsIm1pbiIsInN1bSIsImF2ZXJhZ2UiLCJmbG9vciIsImdldE1ldHJpY1dlYiIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllcyIsIndlYkRvbWFpbnMiLCJ0eXBlTWF0Y2giLCJzb21lIiwiaW5pdGlhdG9yVHlwZSIsImRvbWFpbk1hdGNoIiwiZCIsIl9yZWNvcmQiLCJnZXRMb2NhbFN0YXR1cyIsImxzY2ZnIiwidXRpbERhdGEiLCJnZXRMc1JlbW90ZUNmZyIsInNldEF1dG9FdmVudFN0YXR1cyIsInNldERldmljZVN0YXR1cyIsImVuYWJsZSIsInNldEF1dG9QYWdlU3RhdHVzIiwic2V0QXV0b1RyYWNrU3RhdHVzIiwiZ2V0QXV0b0V2ZW50U3RhdHVzIiwiZ2V0RGV2aWNlU3RhdHVzIiwiZ2V0QXV0b1BhZ2VTdGF0dXMiLCJnZXRBdXRvVHJhY2tTdGF0dXMiLCJjZmciLCJjb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMiLCJjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMiLCJjb2RlbGVzc1N0YXR1cyIsImN1cnJlbnREZXZpY2VFbmFibGUiLCJldmVudFNhbXBsaW5nUmF0ZSIsIkFQTFVTX0VWRU5UX0xJTUlUUkFURVMiLCJjb2RlbGVzc0lnbm9yZUNvbXBvbmVudCIsInV0aWxUcmltIiwidXRpbFN0b3JlIiwidHJ5VG9EZWNvZGVVUklDb21wb25lbnQiLCJkZWZhdWx0X3ZhbCIsImRlY29kZVVSSUNvbXBvbmVudCIsInBhcnNlU2VtaWNvbG9uQ29udGVudCIsInMiLCJkaWN0IiwidW5kZWNvZGUiLCJqIiwiYTIiLCJhX2xlbiIsIl92YWx1ZSIsInNsaWNlIiwibm9kZUxpc3RUb0FycmF5Iiwibm9kZXMiLCJnZXRMc0NuYSIsIl9sc19jbmEiLCJfYXJyIiwic2V0THNDbmEiLCJ0b2RheSIsImNuYSIsImdldExzSW1wdiIsIklNUFJJTlRfU1RPUkFHRV9LRVkiLCJfbHNfaW1wdiIsInNldExzSW1wdiIsImltcHYiLCJzZXRMc1JlbW90ZUNmZyIsIlJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVkiLCJjbG9uZUNmZyIsIl9sc19yZW1vdGVDZmciLCJlZ1VybCIsInJob3N0X3YiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwidGVzdEtleSIsInJlbW92ZUl0ZW0iLCJtYWtlQ2FjaGVOdW0iLCJpc1N0YXJ0V2l0aCIsInMxIiwiczIiLCJpc0VuZFdpdGgiLCJsMSIsImwyIiwiYW55IiwiaXNOdW1iZXIiLCJpc05hTiIsImlzQ29udGFpbiIsImNvbnN0cnVjdG9yIiwiZ2V0VXJsUGFyYW1zIiwicmVnZXgiLCJsb2NhdGlvbiIsImhyZWYiLCJ0YXJnZXRPYmoiLCJhcmdzT2JqIiwidG8iLCJuZXh0U291cmNlIiwibWF4Q291bnQiLCJfbWF4Q291bnQiLCJfaXRlbXMiLCJzaXplIiwiZnJvbnQiLCJpc0VtcHR5IiwicHJpbnQiLCJidWlsZFBhdGgiLCJxcyIsInFzcyIsImN1cnJlbnRQYXRoIiwicGFnZU9wdGlvbk1hcCIsInNldEN1cnJlbnRQYXRoIiwiZ2V0UGFnZVF1ZXJ5Iiwic2V0UGFnZVF1ZXJ5IiwiZ2V0RnVsbFBhdGgiLCJnZXRQYWdlTmFtZSIsIm1ldGEiLCJyZWFsUGF0aCIsImhhc2hNb2RlIiwiaGFzaCIsInJlZ1J1bGUiLCJlYWNoTWFwIiwiZ2V0V3hUaXRsZSIsIl9fd3hDb25maWciLCJ3eENvbmZpZyIsInBhZ2UiLCJyb3V0ZSIsImdsb2JhbCIsIm5hdmlnYXRpb25CYXJUaXRsZVRleHQiLCJ0aXRsZSIsIl9fd3hBcHBDb2RlX18iLCJhcHBKU09OIiwiZ2xvYmFsVGl0bGVNYXAiLCJwYWdlTmFtZSIsImdldFBhZ2VUaXRsZSIsInBhZ2VUaXRsZSIsImdldFZUUmVhbHRpbWVDb2RlIiwicmVnRXhwIiwiazEiLCJyYW5rIiwiZWt2UmFuayIsImdldFV0bVBhcmFtc09iaiIsImhhbmRsZXJTaGFyZUFwcE1zZyIsIm9wdCIsImlzIiwibGlua1Bhcm1hcyIsImZvcm1hdCIsIm9iajJwYXJhbSIsIiQkX3NoYXJlX3VpZCIsIl9fRVRBR19fQ05BX19JRF9fIiwiJCRfdXRtX21lZGl1bSIsImFwcGVuZFBhcmFtcyIsIm9uUHVsbERvd25SZWZyZXNoIiwib25SZWFjaEJvdHRvbSIsInRoYXQiLCJvblBhZ2VMb2FkIiwidXRpbEZ1bmN0aW9uIiwiYXBwZW5kTWV0YUluZm8iLCJfY3VycmVudFBhZ2UiLCJvblBhZ2VTaG93Iiwib25QYWdlUmVhZHkiLCJvblBhZ2VIaWRlIiwib25BcGx1c0NsayIsIm9uQXBsdXNUb3VjaCIsInJld3JpdGVTaGFyZSIsIm9uU2hhcmVBcHBNZXNzYWdlIiwib2xkT25TaGFyZUFwcE1lc3NhZ2UiLCJzaGFyZVJlc3VsdCIsInJld3JpdGVTaGFyZVRpbWVsaW5lIiwib25TaGFyZVRpbWVsaW5lIiwib2xkT25TaGFyZVRpbWVsaW5lIiwiaW5qZWN0UGFnZSIsIm9sZFBhZ2VBZnRlciIsIm9sZFBhZ2UiLCJQYWdlIiwicGFnZU9wdGlvbnMiLCJpbmplY3RDb21wb25lbnQiLCJvbGRDb21wb25lbnQiLCJDb21wb25lbnQiLCJpbmplY3RNaWR3YXkiLCJtcEN0eCIsImhvb2tTZXROYXZpZ2F0aW9uQmFyVGl0bGUiLCJwbGF0Zm9ybUN0eCIsInNldE5hdmlnYXRpb25CYXJUaXRsZSIsIm9sZEZ1bmMiLCJkZWZpbmVQcm9wZXJ0eSIsImdsb2JhbFRpdGxlIiwidXRpbEhhc2giLCJjdXJyZW50cGFnZSIsImNyZWF0ZSIsImN1cnJlbnRUYXJnZXQiLCJkYXRhc2V0IiwiaXNfYXV0byIsImV2ZW50Y29kZSIsImNoIiwiZGVmX3YiLCJza2lwRW5jb2RlIiwiaXNJblBsYW5PYmoiLCJwYXJhbTJvYmoiLCJmcmFnbWVudCIsImNvbW1UcmFuc2xhdGUiLCJfdiIsImVuY29kZUdva2V5VmFsdWUiLCJQdWJTdWIiLCJhcGx1c19wdWJzdWIiLCJCYXNlIiwiZ2V0QXJncyIsIl9hcmdzIiwiZXh0ZW5kIiwiY2FsbGFibGUiLCJwcm9wcyIsImluc3RhbmNlIiwiaGFuZGxlcnMiLCJwdWJzIiwic2V0SGFuZGxlcnMiLCJzdWJzY3JpYmUiLCJlVHlwZSIsIl9zZWxmIiwidW5zdWJzY3JpYmUiLCJoX3N0ciIsInNfc3RyIiwic3BsaWNlIiwicHVibGlzaCIsImNhY2hlUHVicyIsIlN1YkJhc2UiLCJGIiwiXyQiLCJpc190ZXJtaW5hbCIsInNlbmRfcHZfY291bnQiLCJtZXRhX2luZm8iLCJxR2V0Iiwic2V0TWV0YUluZm8iLCJpc0ludGVybmF0aW9uYWwiLCJnZXRJbmZvIiwibGFzdF9pbmZvIiwiY2F0Y2hFeGNlcHRpb24iLCJ1dGlsUHVic3ViIiwiT0JKRUNUIiwiU1RSSU5HIiwiZ2V0VXNlckluamVjdEdva2V5IiwidXNlckZuIiwiZmxhZyIsInByb2Nlc3NPYmplY3QiLCJvbGRfdmFsdWUiLCJuZXdfdmFsdWUiLCJ0b1NldE1ldGFJbmZvIiwicHJvY2Vzc0FycmF5IiwicHJvY2Vzc09iaiIsIl9zZXRNZXRhSW5mbyIsImZyb20iLCJfb2xkVmFsdWUiLCJwYWdlUHJvcGVydGllcyIsIl9rIiwidG1wX3BhcnNlIiwiYXJnMSIsImRlZmF1bHRNb2RlIiwibW9kZSIsIm1ldGFOYW1lIiwibWV0YVZhbHVlIiwibXNncyIsImRvUHViTXNnIiwiZG9DYWNoZVB1YnMiLCJnZXRQdWJzdWIiLCJwdWJzdWIiLCJkb1N1Yk1zZyIsImdldExvZ0NvbmZpZyIsImxvZ0NvbmZpZyIsInBhZ2VMb2FkVGltZSIsIlBBR0VfTE9BRF9USU1FIiwidXRpbEV0YWciLCJFTVBUWV9DTkEiLCJfc3luY0V0YWciLCJjaGVjayIsImV0YWdTdG9yYWdlS2V5IiwiZmV0Y2hFdGFnU3RhdHVzIiwidG9TeW5jRXRhZyIsImFwbHVzX3Job3N0X3YiLCJldGFnIiwiZXRhZ0tleVZhbHVlIiwiZXRhZ3MiLCJyZXMyIiwiQ05BIiwic3RhdGUiLCJldGFnVGltZW91dCIsImRlZmF1bHRUaW1lIiwidGltZSIsInBhcnNlSW50IiwiZ2V0QXBsdXNXYWl0aW5nIiwid2hlbl90b19zZW5kcHYiLCJpc1dhaXQiLCJnZXRIb3N0VXJsIiwid2hlcmVfdG9fc2VuZCIsImxvZ0lkIiwidXRpbFBhcmFtcyIsIkNOVCIsIlVSTCIsIlBSRSIsImdldENvbW1vblBhcmFtcyIsInVzZXJkYXRhIiwicGxhdGZvcm1UeXBlIiwidXNlckluZm8iLCJfZGV2X2lkIiwiX2Fub255X2lkIiwiX3VzZXJfaWQiLCJfdXNlcl9uaWNrIiwiX3Nlc3Npb25faWQiLCJ1YWlkIiwiaXNVTSIsIl9wYWdlX3RpdGxlIiwicGFnZUluc3RhbmNlIiwiY3VyUGF0aCIsImxvZ0lkS2V5IiwibG9nSWRLZXkyIiwiZ2V0TG9nSWQiLCJhcHBLZXkiLCJjb21tb25QYXJhbXMiLCJwcmUiLCJwYWdlX3JlZmVycmVyIiwic2RrX2luZm8iLCJqc3ZlciIsImN1c3RvbVNka0lkIiwidGltZVpvbmUiLCJnZXRUaW1lWm9uZSIsImdta2V5Iiwic3BtX3VybCIsInNwbV9wcmUiLCJzcG1fY250IiwicHZpZCIsInNlc3Npb25BcmdzIiwiZ2xvYmFsQXJncyIsImdldFB2UGFyYW1zIiwibWFuc25kbG9nIiwiZXZlbnRfY29kZSIsImxvZ3R5cGUiLCJsb2drZXkiLCJldmVudF90aW1lc3RhbXAiLCJnZXRIamxqUGFyYW1zIiwiaGpsalBhcmFtcyIsInJlY29yZFR5cGUiLCJ3aGF0X3RvX3NlbmQiLCJsb2dkYXRhIiwiZ2V0Q2hhcnMiLCJkZWZhdWx0VmFsIiwiZ2V0UmFuZG9tSWQiLCJoYW5kbGVQVklkIiwiY2hhclBvcyIsImNoYXJzV2l0aG91dEciLCJjaGFyc1dpdGhvdXRMIiwicm5kX3N0cnMiLCJoYW5kbGVkIiwicGFnZVVybCIsImxvZ05hbWUiLCJyYW5kb204Q2hhcnMiLCJyYW5kb200Q2hhcnMiLCJyYW5kb202Q2hhcnMiLCJfdGltZVpvbmUiLCJnZXRUaW1lem9uZU9mZnNldCIsIl9hbmQiLCJ6b25lIiwiYWJzIiwicmVtYWluZGVyIiwicmVtYWluZGVyWm9uZSIsImlzVEJFbnYiLCJjdXJyZW50UGFnZSIsInByZVBhZ2UiLCJ3aW5kbWlsbCIsImlzVW5kZWZpbmVkIiwiZ2V0VXNlcmRhdGEiLCJjb21ib1VzZXJkYXRhIiwicGFnZVByb3BlcnR5IiwidXBkYXRlUHJlIiwicmVmZXJyZXIiLCJ1cGRhdGVVcmwiLCJ1cGRhdGVTcG1VcmwiLCJzcG1VcmwiLCJ1cGRhdGVTcG1QcmUiLCJzcG1QcmUiLCJ1dGlsRXZlbnRMaW1pdCIsImNhbl90b19zZW5kcHYiLCJjYW5TZW5kUFYiLCJ0cmFja190eXBlIiwibmVlZExpbWl0U2VuZCIsImV2ZW50TGltaXRSYXRlcyIsInV0aWxBcnJheSIsImZpbmQiLCJjZWlsIiwidXRpbExvY2FsQ2ZnIiwiYXBsdXNVdGlscyIsImNhblRvU2VuZEhKTEoiLCJkZXZpY2VTdGF0dXMiLCJyZW1vdGVBdXRvdHJhY2tTdGF0dXMiLCJhdXRvZXZlbnRTdGF0dXMiLCJsb2NhbEF1dG90cmFja0VuYWJsZWQiLCJhdXRvX2VsZW1lbnQiLCJhdXRvcHZTdGF0dXMiLCJsb2NhbEF1dG9QdkRpc2FibGVkIiwibG9jYWxBdXRvUFZEaXNhYmxlZCIsImxvY2FsQXV0b0V2ZW50RGlzYWJsZWQiLCJmbGF0IiwiaW5kZXhvZiIsIml0ZW1NYXRjaCIsImdldFVzZXJEYXRhIiwiZXhkYXRhIiwiX2FwbHVzX2FwaSIsImFwbHVzT2JqIiwibXNnQXJyIiwiUmVkdWNlciIsImlzVHJpdmVyIiwiX2dldFBhZ2VTcG0iLCJ0eXBlIiwic3ViVHlwZSIsInNwbVR5cGUiLCJpc1BhZ2VEaXNBcHBlYXIiLCJpc1BhZ2VBcHBlYXIiLCJfc2VuZCIsIl9yZXF1ZXN0VlRDb25maWciLCJfcmVxdWVzdFJlbW90ZUNvbmZpZyIsIl9zZW5kUFYiLCJyZWR1Y2VyIiwicHVic3ViVHlwZSIsIm1pZGRsZXdhcmVNZXNzYWdlS2V5IiwiX2NvbWJpbmVSZWNvcmQiLCJnb2tleXMiLCJzZW5kdG9teSIsImV4YXJncyIsInNjbSIsImFwbHVzQ29udGVudElkIiwiX2FwbHVzX3NlbmR0b215IiwiX2dva2V5cyIsImdldFBhZ2VTUE0iLCJfc2V0UGFnZVNQTSIsInNwbUNudCIsIl91cGRhdGVQYWdlUHJvcGVydGllcyIsInJlcG9ydEFuYWx5dGljcyIsInNwbURldGFpbCIsImlnbm9yZURlZmF1bHRQYWdlTW9uaXRvciIsIl91cGRhdGVOZXh0UGFnZVByb3BlcnRpZXMiLCJldmVudGlkIiwiY29tTmFtZSIsImFyZzIiLCJhcmczIiwicGFyYW0iLCJjYWxsVXNlclRyYWNrIiwiX2FwcGVuZE1ldGFJbmZvIiwiX3NraXBQYWdlIiwiX3BhZ2VBcHBlYXIiLCJfcGFnZURpc2FwcGVhciIsIl91cGRhdGVQYWdlVXRwYXJhbSIsInV0UGFyYW1Kc29uIiwiX3VwZGF0ZU5leHRQYWdlVXRwYXJhbSIsIl91cGRhdGVTZXNzaW9uUHJvcGVydGllcyIsImV4dERhdGEiLCJfZ2V0UGFnZVNwbVVybCIsIl9nZXRQYWdlU3BtUHJlIiwiX3NldFBhZ2VOYW1lIiwicGFnZU1ldGEiLCJfZ2V0RWxlbWVudFNQTSIsInNwbUIiLCJ0cmFja2VyUGFyYW1zIiwic3BtQ0QiLCJzcG1DIiwic3BtRCIsInRhcmdldFNwbSIsImF1dG9fY2xrX21ldGFpbmZvIiwiYXV0b19leHBfbWV0YWluZm8iLCJjbGtfaW5mbyIsImNzc1NlbGVjdG9yIiwiZXhwX2luZm8iLCJlbGVtZW50cyIsImZpZWxkcyIsIl9yZWNvcmRBcHBMaW5rIiwidGFyZ2V0QXBwS2V5IiwidXRpbExvZ2dlciIsIkNvbXBvc2UiLCJwbHVnaW5zTG9hZGVyIiwiQ09ORklHIiwicGwiLCJtaWRkbGV3YXJlIiwibG9nZ2VyIiwiYXBwIiwiY29tcG9zZSIsIndyYXAiLCJtZXNzYWdlRm5RdWV1ZSIsInByZWZpeCIsImxldmVsIiwiZGVidWdMb2ciLCJhcGx1c0RlYnVnIiwiY2FsbGVkTGlzdCIsInNldENhbGxlZExpc3QiLCJyZXNldENhbGxlZExpc3QiLCJtdyIsIm1heFRpbWVvdXQiLCJzbGVlcEhhbmRlcjEiLCJfdGltZV9vdXQiLCJfbXdfbmFtZSIsInBsdWdpbnNfbmFtZSIsInB1YnN1YkluZm8iLCJwbHVnaW4iLCJjb2xsZWN0X2NsayIsImFwbHVzQ3R4IiwiY2xrX2NvbmZpZyIsImluaXRDbGsiLCJlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2siLCJlbGVtZW50c0dyb3VwcyIsIndhdGNoX2NsaWNrIiwic2Nyb2xsT2Zmc2V0IiwiZ2V0RGF0YVNldCIsIl9hcGx1c19hdXRvX2V4cCIsIl9oYXNoTWFwIiwiaGFzaE1hcCIsImVsZV9zIiwiZXhwQ29uZmlnIiwiZ2V0SGFzaEtleSIsImhhc2hfdmFsdWUiLCJ3YXRjaFRyYWNrZXIiLCJyYXhVdGlsIiwiY2xrSW5mbyIsInBhZ2VDdHgiLCJpc0luQXJlYSIsImVsZUluZm8iLCJjaGFuZ2VkVG91Y2giLCJjaGFuZ2VkVG91Y2hlcyIsImRldGFpbCIsIngiLCJjbGllbnRYIiwieSIsImNsaWVudFkiLCJfdG9wIiwiX2JvdHRvbSIsInNjcm9sbFRvcCIsInJlc3VsdHMiLCJncm91cCIsInNwbURhdGEiLCJfc3BtRGF0YSIsImRvY3VtZW50IiwiZG9tRGF0YVNldCIsInRyYWNrZXIiLCJlbGVtZW50IiwicmVkdWNlIiwicHJldmlvdXMiLCJjdXJyZW50IiwibWF0Y2hlZFJlc3VsdCIsInByZXZpb3VzRWxlbWVudCIsImN1cnJlbnRFbGVtZW50IiwicHVzaEV2ZW50IiwiZ2V0VXNlckluZm8iLCJ1c2VyRm5OYW1lIiwiZ2V0Rml4ZWROdW1iZXIiLCJfcmVzdWx0IiwiX251bSIsInBhcnNlRmxvYXQiLCJ0b0ZpeGVkIiwicmVjb3JkRXhwTWFwUXVldWUiLCJERUZBVUxUX1BLR19TSVpFIiwiUE9TVCIsIkV2ZW50QXJyYXkiLCJidWZmZXIiLCJwa2dTaXplIiwiY29tYmluZVJlY29yZCIsImRhdGFrZXkiLCJfdyIsIl9oIiwiX3giLCJfeSIsIl9yYXRlIiwidmlld2FiaWxpdHlSYXRlIiwiaW50ZXJzZWN0aW9uUmF0aW8iLCJfdmlld2FiaWxpdHkiLCJfdnQiLCJfdHJhY2tlclBhcmFtcyIsInRyYWNrZXJwYXJhbXMiLCJjdXN0b21BcmdzIiwiY3VyIiwid2F0Y2hSZWNvcmQiLCJjbGVhclJlY29yZCIsImVsZW1lbnRBdHRyIiwiaGFzaEtleSIsInBvc2l0aW9uU2VsZWN0b3IiLCJjbHgiLCJkb21zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInRwIiwiaXNSYXgiLCJjb2xsZWN0X2V4cCIsIlBBR0VfREFUQV9NQVAiLCJ3YXRjaE1ldGFJbmZvIiwiaXNGaXJzdCIsIndhdGNoVHlwZSIsImhhbmRsZXJNZXRhSW5mbyIsIm1ldGFLZXkiLCJfY29uZmlnMiIsImdldEF1dG9FeHBDb25maWciLCJfY29uZmlnIiwid2F0Y2hfZXhwb3N1cmUiLCJpbml0RXhwIiwicmVzZXRBdXRvRXhwIiwiX3BhdGgiLCJfY3VycmVudERhdGEiLCJpc1N0YXJ0IiwiaXNGaXJzdFRvdWNoIiwibWluaVV0aWwiLCJvYnNlcnZlcnMiLCJjb25mIiwicmVsb2FkQ3R4Iiwid2FpdCIsImhhc2hpbmciLCJzdWJqZWN0IiwiZHVwIiwibmV3T2JzZXJ2ZXIiLCJpbml0T2JzZXJ2ZXIiLCJyZW1vdmVkT2JzZXJ2ZXIiLCJkaXNjb25uZWN0IiwiY2hlY2tJc0luSGFzaE1hcCIsInVwZGF0ZUhhc2hNYXAiLCJhZGRPYnNlcnZlIiwiZW50cnkiLCJfaW5kZXgiLCJfZW50cnkiLCJleHBvc3VyZUhhbmRsZSIsImV4aXN0IiwidGhyZXNob2xkcyIsIkFVVE9fQVRfVklFV19SQVRFIiwiaW5pdGlhbFJhdGlvIiwiaXNNWSIsImNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyIiwib2JzZXJ2ZUFsbCIsIm9ic2VydmVyIiwiY3NzIiwicmVsYXRpdmVUbyIsIm9ic2VydmUiLCJyZWxhdGl2ZVRvVmlld3BvcnQiLCJleHBvc3VyZVRpbWUiLCJleHBFbGVtZW50cyIsImNoZWNrU3RhcnQiLCJ0ZW1wcyIsIl9lbGVQb3MiLCJkZWZhdWx0UmF0aW8iLCJyZXNldCIsImdldE1ldGFWYWx1ZSIsInV0aWxNZXRhIiwiZ2V0TWV0YUNudCIsIkRBVEFfQVBMVVNfQUVfS0VZIiwiREFUQV9BUExVU19BQ19LRVkiLCJEQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZIiwiREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSIsIkxPT1BfVElNRSIsImdldERlZmF1bHRSZXF1ZXN0Q2ZnIiwiZ2V0QXV0b0V4cFZpZXdSYXRlIiwiZGVmYXVsdF92YWx1ZSIsInJhdGUiLCJ2aXNpYmxlX3JhdGUiLCJnZXRBdXRvRXhwRHVyYXRpb24iLCJ0bXBfZHVyYXRpb24iLCJkdXJhdGlvbl9uIiwiRVhQX0RVUkFUSU9OIiwiZ2V0QXV0b0NvbmZpZyIsImNvbmZpZ0tleSIsIm1ldGFPYmoiLCJhcGx1c0F1dG9FeHAiLCJjb25maWdzIiwidG1wX3RhZ19maWx0ZXIiLCJ0bXAiLCJ0YWciLCJmaWx0ZXIiLCJ3aG9sZVNlbGVjdG9yIiwiRXJyb3IiLCJ0YWdfZmlsdGVyIiwiZWxlbWVudFNlbGVjdG9yIiwiZ2V0QXV0b0V4cFVzZXJGbiIsImFlQXV0b1VzZXJGbiIsImlzVGhyb3R0bGVXYXRjaERvbSIsImdldEF1dG9DbGtDb25maWciLCJnZXRBdXRvQ2xrVXNlckZuIiwiYWNBdXRvVXNlckZuIiwiZ2V0TWV0YVRhZ3MiLCJmb3JjZSIsIl9oZWFkX25vZGUiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsIl9tZXRhX25vZGVzIiwiY29udGVudCIsIm1ldGFfbm9kZXMiLCJ1dGlsQXR0cmlidXRlIiwidHJ5VG9HZXRBdHRyaWJ1dGUiLCJnZXRPbmVQYWdlSW5mbyIsImlzb25lcGFnZSIsInVybHBhZ2VuYW1lIiwiaXNvbmVwYWdlX2RhdGEiLCJhcnJfY29udGVudCIsImF0dHJfbmFtZSIsImdldEF0dHJpYnV0ZSIsInRyeVRvU2V0QXR0cmlidXRlIiwiYXR0cl92YWx1ZSIsInNldEF0dHJpYnV0ZSIsInRyeVRvUmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwicHVzaFF1ZXVlIiwiX2dldE5ldHdvcmtUeXBlIiwiZ2V0TmV0d29ya1R5cGUiLCJfZ2V0U3lzdGVtSW5mbyIsImVtcHR5T2JqIiwic3lzSW5mbyIsIlNZU1RFTV9JTkZPIiwidmVyc2lvbiIsImdldFN5c3RlbUluZm8iLCJfZ2V0QWNjb3VudEluZm9TeW5jIiwiZ2V0QWNjb3VudEluZm9TeW5jIiwiYWNjb3VudEluZm8iLCJtaW5pUHJvZ3JhbSIsImFwcFZlcnNpb24iLCJlbnZWZXJzaW9uIiwicGx1Z2luQXBwSWQiLCJwbHVnaW5BcHBWZXJzaW9uIiwiZ2V0QXBwSWRTeW5jIiwiYXBwSW5mbyIsInRvTG9jYWxlVXBwZXJDYXNlIiwic3lzdGVtIiwiaG9zdCIsImVudiIsInJlc2V0TGFzdFBhZ2VTcG0iLCJsaXN0ZW4iLCJjdXJyZW50UGFnZVBhdGgiLCJtYXRjaFVybCIsInNldFBhZ2VTUE0iLCJzcG1BIiwic3BtYWIiLCJzcG1hYnN0ciIsInByZVByZVBhZ2UiLCJjdXJyZW50UGFnZVNwbSIsIk1haW4iLCJtYWluIiwiaGFuZGxlRXZlbnQiLCJhdXRvR2V0T3BlbmlkIiwiYW1vdW50IiwibWF4UXVldWVDb3VudCIsIm1haW5fYmFzZV9odHRwIiwiaGFuZGxlck1pZGRsZXdhcmUiLCJ1c2VyRXZlbnRBcmdzIiwiZXZlbnRfYXJncyIsInNka0FyZ3MiLCJyZWZlcl9wYWdlIiwic2hhcmVfdHlwZSIsInBhZ2VfdGl0bGUiLCJldmVudF90eXBlX2lkIiwiY2xvbmVQIiwicHZhcmdzIiwicGFnZV9pZCIsIl9wYWdlX2F1dG9fcHYiLCJyZWZfdXJsIiwiX3BhZ2VfYXV0b19pZCIsInBhZ2Vfc3RhcnQiLCJ3YXRjaExPRyIsInV0aWxHUSIsInN1YnNjcmliZUxvZ3MiLCJwdXNoSW50b0dvbGRsb2dRdWV1ZSIsIm9yaURhdGFzIiwiZ2V0TG9naWNTeW1ib2wiLCJuYW1lcyIsImFwbHVzXzEiLCJhcGx1c18yIiwicHJvcHNUeXBlIiwicXVlIiwiZ2V0Rm9ybWF0UXVldWUiLCJxdWV1ZSIsInByb2Nlc3NHb2xkbG9nUXVldWUiLCJmb3JtYXRRdWV1ZSIsImdldEFwbHVzSG9sZFR5cGUiLCJmaWx0ZXJUYXNrIiwidGFzayIsImhvbGRUeXBlIiwiU1RBUlQiLCJBUExVU19IT0xEX1FVRVVFIiwicHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUiLCJBUExVU19IT0xEX1VTRVJJRF9RVUVVRSIsIkFQTFVTX0hPTERfQU5PTllfUVVFVUUiLCJnZXRNZXRob2ROYW1lIiwiUVVFVUUiLCJkZWxheVRhc2tzIiwicHJvY2Vzc1Rhc2siLCJzdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUiLCJxdWV1ZU5hbWUiLCJfZm4iLCJxdWV1ZU1hcCIsInN1YnNjcmliZU13Q2hhbmdlUXVldWUiLCJzdWJzY3JpYmVNZXRhUXVldWUiLCJzdWJzY3JpYmVRdWV1ZSIsIm1ldGFRdWV1ZSIsIm90aGVyc1F1ZXVlIiwiYWMiLCJwcm9jZXNzQXBsdXNRdWV1ZSIsInN0YXJ0TGVuZ3RoIiwiYXV0b1RyYWNrZXIiLCJldmVudEhhbmRsZSIsImV2ZW50TmFtZSIsInBkcl9jb25maWciLCJwYWdlbmFtZSIsInJiX2NvbmZpZyIsInNoYXJlX2NvbmZpZyIsIl9oYXNUcmFja2VkIiwiZXh0cmFQYXJhbXMiLCJpc01pbmkiLCJnZXRDb25maWciLCJmZXRjaFZlcmlmeUNvbmZpZyIsImFwcEluZm9JZCIsImFwaV9ob3N0IiwidmVyaWZ5X2hvc3QiLCJwcm90b2NhbCIsInZlcmlmeVVybCIsImNmZ0RhdGEiLCJfYmVnaW5Mb2FkIiwiX21pbmljZmdfbG9hZCIsIl9hcGx1c192dF9jZmciLCJ1dGlsVlQiLCJ2dDJhdXRvRXZlbnQiLCJvbkNsaWNrIiwiaXNBdXRvIiwiTUlOSV9WVF9DT05GSUdfRk9STUFUIiwicGFnZUNvbmZpZyIsImVuYWJsZWQiLCJGZXRjaENvbmZpZyIsIl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQiLCJmYyIsInV0aWxDYXRjaCIsIm1pbml2dFN0b3JlIiwiTUlOSV9WVF9DT05GSUdfQkFDSyIsIkdPTERMT0dfUFVCTElTSCIsInBhdGhuYW1lIiwib3JpZ2luU3BtIiwidXBkYXRlQ2ZnTHMiLCJmZXRjaEZyb21DZG4iLCJyZXF1ZXN0VlRDb25maWciLCJwb2ludHMiLCJzZXRDb25maWdJbnRvTHMiLCJnZXRNaW5pVnREYXRhIiwiY2RucGF0aCIsInByZVVybCIsImZyb21DRE4iLCJ2dENvbmZpZyIsImZldGNoRnJvbUxTIiwic3luY01pbmlWdERhdGEiLCJnZXRWdENvbmZpZ1BhdGgiLCJHT0xETE9HX1NVQlNDUklCRSIsImZpbGVuYW1lIiwibWVzc2FnZSIsImxzTWluaXZ0Q29uZmlnS2V5IiwiZ2V0TWluaVZ0VHBsQ2RuUGF0aCIsImFwbHVzVHJhY2tDb25maWdJZEluZm8iLCJ0dXJub24iLCJzcG1JZCIsInRlbXBsYXRlVmFsIiwic3BtQUIiLCJtZXJnZUF1dG9DZmdzIiwiY2ZnMSIsImNmZzIiLCJnZXRJbmRleCIsInRvdGFsQXV0b0NmZ3MiLCJmaW5hbEF1dG9DZmdzIiwiYXJyYXkiLCJyZW1vdmVBdXRvQ2Znc0Zyb21WdCIsImZvcm1hdFNlbGVjdG9yIiwiZ2V0VHJhY2tDb25maWdCeVBhdGgiLCJmaW5hbFBhdGgiLCJmdWxsTG93Q29kZUNvbmZpZyIsIl9hcGx1c190cmFja2luZ19jZmciLCJhdXRvRXhwQXJyIiwiYXV0b0Nsa0FyciIsInBjIiwic2V0UGFnZU5hbWUiLCJ0cmFja2VyVHlwZSIsInRlbXBsYXRlIiwic3RkSWQiLCJjb21tb25fZXhkYXRhIiwiY29tbW9uX3B2ZGF0YSIsImdldEN1cnJlbnRQYWdlVlRDZmciLCJ2dENmZyIsImdldFRyYWNrQ29uZmlnQnlQb2ludENzc1NlbGVjdG9yIiwidHJhY2tDb25maWciLCJtYXRjaGVkQ29uZmlnIiwiY29uZmlnSXRlbSIsInZ0X2NmZyIsIm9sZF9hdXRvX2V4cF9hcnIiLCJvbGRfYXV0b19jbGtfYXJyIiwiREVCVUciLCJhcGx1c2luaXQiLCJzaXRlSWQiLCJSVU5OSU5HIiwiYXBsdXNTdGF0dXMiLCJjb25maWdfcHZfY29udGV4dCIsIlBMVUdJTlNfUFYiXSwi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LEVBQUEwSTs7d0JBSUFvSixPQUFBMUgsV0FBNkJrM0M7d0JBQzdCbGlEOzs7ZUFHRztnQkFDSHdLLElBQUE1SixFQUFBLHVCQUVBcWhELEVBQUEsS0FBQTM4QyxHQUNBazBCLEVBQUF3QixTQUFBaW5CO2dCQUlBMTFDLEVBQUE3TCIsImZpbGUiOiJhcGx1c19taW5pX2Nsb3VkX3VtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIHtcblx0XHR2YXIgYSA9IGZhY3RvcnkoKTtcblx0XHRmb3IodmFyIGkgaW4gYSkgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyA/IGV4cG9ydHMgOiByb290KVtpXSA9IGFbaV07XG5cdH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdC8qKlxuXHQgKiBhcGx1c19taW5pX2Nsb3VkLmpzXG5cdCAqIOS6keS4iuWwj+eoi+W6j+aooeWdl+WMlueahGFwbHVzSnPlhaXlj6Ncblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdF9fd2VicGFja19yZXF1aXJlX18oMikuaW5pdEdsb2JhbCgpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcHBDb25maWcpIHtcblx0ICB2YXIgYXBsdXNfY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTsgXG5cdCAgcmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMTA0KShhcHBDb25maWcsYXBsdXNfY29uZmlnKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaTjeS9nGFwbHVz55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdHZhciBBUExVUyA9IGFwbHVzU3RhdGljLkFQTFVTO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblx0XG5cdHZhciBHT0xETE9HID0gYXBsdXNTdGF0aWMuR09MRExPRztcblx0dmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXHRcblx0dmFyIF9hcGx1c19jb250ZXh0O1xuXHR2YXIgaXNXZWIgPSBmYWxzZTtcblx0dHJ5IHtcblx0ICBpZiAod2luZG93KSB7XG5cdCAgICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcblx0ICAgIGlzV2ViID0gdHJ1ZTtcblx0ICB9XG5cdH0gY2F0Y2ggKGUpIHtcblx0ICBfYXBsdXNfY29udGV4dCA9IHt9O1xuXHQgIGlzV2ViID0gZmFsc2U7XG5cdH1cblx0XG5cdGV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzV2ViID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHdpbmRvdztcblx0fTtcblx0XG5cdGV4cG9ydHMuaW5pdEdsb2JhbCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG5cdCAgaWYgKGNvbnRleHQpIHtcblx0ICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcblx0ICB9IGVsc2Uge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSB7XG5cdCAgICAgIHY6IDEsXG5cdCAgICAgIGFwbHVzOiB7fSxcblx0ICAgICAgYXBsdXNfcXVldWU6IFtdXG5cdCAgICB9O1xuXHQgIH1cblx0ICB2YXIgX2FwbHVzRGVmYXVsdFZhbHVlO1xuXHQgIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBpZiAoaXNXZWIpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCBfYXBsdXNfY29udGV4dC5nb2xkbG9nIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG5cdCAgICAgIHZhciBfZ29sZGxvZ19xdWV1ZSA9IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlIHx8IChfYXBsdXNfY29udGV4dC5nb2xkbG9nX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gW10pKTtcblx0ICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcblx0ICAgIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlID0gX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWU7XG5cdCAgfVxuXHQgIFxuXHQgIF9hcGx1c19jb250ZXh0LmFwbHVzID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZyA9IF9hcGx1c0RlZmF1bHRWYWx1ZTtcblx0ICBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcblx0ICBcblx0ICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG5cdH07XG5cdFxuXHR2YXIgZ2V0R2xvYmFsVmFsdWUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgaWYgKGtleSA9PT0gQVBMVVMgfHwga2V5ID09PSBHT0xETE9HKSB7XG5cdCAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcblx0ICAgIGlmICghZykge1xuXHQgICAgICBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdID0gX2FwbHVzX2NvbnRleHRbR09MRExPR10gPSB7fTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBnO1xuXHQgIH1cblx0ICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gQVBMVVNfUVVFVUU7XG5cdCAgaWYgKGtleSA9PT0gYXBsdXNfcXVldWUgfHwga2V5ID09PSBnb2xkbG9nX3F1ZXVlKSB7XG5cdCAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcblx0ICAgIGlmICghcSkge1xuXHQgICAgICBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdID0gX2FwbHVzX2NvbnRleHRbZ29sZGxvZ19xdWV1ZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBxO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHbG9iYWxWYWx1ZSA9IGdldEdsb2JhbFZhbHVlO1xuXHRcblx0ZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgX2FwbHVzX2NvbnRleHRba2V5XSA9IHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEByZXR1cm4gW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dXG5cdCAqL1xuXHR2YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuXHQgIHZhciB2O1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG5cdCAgICB2ID0gYXBsdXNba2V5XTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB2ID0gJyc7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiB2O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRHb2xkbG9nVmFsID0gZ2V0R29sZGxvZ1ZhbDtcblx0LyoqXG5cdCAqIOiuvue9rmFwbHVz5YaF6YOo5Y+Y6YePXG5cdCAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG5cdCAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuXHQgKiBAcmV0dXJuIFtCb29sZWFuXVxuXHQgKi9cblx0dmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuXHQgIHZhciBmID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgYXBsdXNba2V5XSA9IHZhbDtcblx0ICAgICAgZiA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZiA9IGZhbHNlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gZjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuc2V0R29sZGxvZ1ZhbCA9IHNldEdvbGRsb2dWYWw7XG5cdFxuXHQvKipcblx0ICog6I635Y+WY2xpZW50SW5mbyjmtY/op4jlmajjgIHorr7lpIfnrYnkv6Hmga8pXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICogICB2ZXJzaW9uOiAyLFxuXHQgKiAgIHVhX2luZm86IHtcblx0ICogICAgIGI6IFwiY2hyb21lNThcIlxuXHQgKiAgICAgaXNtOiBcIm1hY1wiXG5cdCAqICAgICBteDogXCIzNjBlZVwiXG5cdCAqICAgICBvOiBcIm1hY1wiXG5cdCAqICAgICBwOiAxXG5cdCAqICAgICBzOiBcIjE5MjB4MTA4MFwiXG5cdCAqICAgICB3OiBcIndlYmtpdFwiXG5cdCAqICAgfVxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLmdldENsaWVudEluZm8gPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2NsaWVudCcpIHx8IHt9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBBUExVUyA9ICdhcGx1cyc7XG5cdHZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xuXHR2YXIgQVBMVVNfUVVFVUUgPSBBUExVUyArICdfcXVldWUnO1xuXHR2YXIgR09MRExPR19RVUVVRSA9IEdPTERMT0cgKyAnX3F1ZXVlJztcblx0dmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xuXHR2YXIgTUVUQV9JTkZPID0gJ01ldGFJbmZvJztcblx0dmFyIEFQUEVORF9NRVRBX0lORk8gPSAnYXBwZW5kJyArIE1FVEFfSU5GTztcblx0dmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcblx0dmFyIEhUVFAgPSAnaHR0cCc7XG5cdHZhciBfcHVic3ViID0gJ19wdWJzdWInO1xuXHRcblx0dmFyIGRlZmF1bHRDb2RlID0gJ290aGVyJztcblx0dmFyIENMSyA9ICcyMTAxJztcblx0dmFyIEVYUCA9ICcyMjAxJztcblx0dmFyIElNUEVYUCA9ICcyMjAyJztcblx0dmFyIE9USEVSID0gJzE5OTk5Jztcblx0dmFyIEFQUF9TSE9XID0gJzEwMjMnO1xuXHR2YXIgQVBQX0hJREVfT1JfVU5MT0FEID0gJzEwMTAnOyBcblx0dmFyIFNFU1NJT05fSU5URVJWQUwgPSAzMDAwMDsgLy8gc2Vzc2lvbklk6L+H5pyf5pe26Ze0IDMw56eSXG5cdHZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xuXHR2YXIgRUtWUyA9ICdla3ZzJztcblx0dmFyIEVWRU5UX01BWF9DT1VOVCA9IDEwMDAwOyAvLyDmnKzlnLDmnIDlpJrlrZjlgqjov5nkuYjlpJpla3bmlbDmja5cblx0dmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcblx0dmFyIE1BWF9RVUVVRV9DT1VOVCA9IDE7IC8vIOS4uumYsuatouWboOe9kee7nOW8guW4uOWvvOiHtOe8k+WtmOi/h+Wkp++8jOiuvue9rue8k+WtmOS4quaVsOS4iumZkFxuXHR2YXIgRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMID0gMzAwMDsgLy8gZWt26buY6K6k5Y+R6YCB6Ze06ZqU5pe26Ze0OiAz56eSXG5cdHZhciBQQUdFX1NUQVJUID0gJyQkX3BhZ2Vfc3RhcnQnO1xuXHR2YXIgUEFHRV9FTkQgPSAnJCRfcGFnZV9lbmQnO1xuXHR2YXIgQVBQX1NUQVJUID0gJyQkX2FwcF9zdGFydCc7XG5cdHZhciBBUFBfRU5EID0gJyQkX2FwcF9lbmQnO1xuXHR2YXIgVVNFUl9QUk9GSUxFX0tFWSA9ICdhcGx1c191c2VyX3Byb2ZpbGUnO1xuXHR2YXIgSU1QUklOVCA9ICdpbXByaW50Jztcblx0dmFyIElEX1RZUEUgPSAnYXBsdXMtaWR0eXBlJztcblx0dmFyIEpTQlJJREdFX09OTFkgPSAnYXBsdXMtanNicmlkZ2Utb25seSc7XG5cdHZhciBQQUdFX0NPTkZJRyA9ICdhcGx1cy1wYWdlLWNvbmZpZyc7IFxuXHR2YXIgQVBMVVNfU0tJUF9BUFZfUlVMRVMgPSAnYXBsdXMtc2tpcC1hcHYtcnVsZXMnO1xuXHR2YXIgQVBMVVNfUFZfRE9NQUlOID0gJ2FwbHVzLXJob3N0LXYnO1xuXHR2YXIgQVBMVVNfRUtWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC1nJztcblx0dmFyIEFVVE9fR0VUX09QRU5JRCA9ICdhdXRvR2V0T3BlbmlkJztcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgUEFHRV9FTlRFUjogJ1BBR0VfRU5URVInLFxuXHQgIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcblx0ICBfQU5PTllfSUQ6ICdfYW5vbnlfaWQnLFxuXHQgIF9ERVZfSUQ6ICdfZGV2X2lkJyxcblx0ICBfVVNFUl9JRDogJ191c2VyX2lkJyxcblx0ICBERUZBVUxUX0NPREU6IGRlZmF1bHRDb2RlLFxuXHQgIE9USEVSOiBPVEhFUixcblx0ICBFVkVOVF9NQVA6IHtcblx0ICAgICcyMTAxJzogJ2NsaWNrJyxcblx0ICAgICcyMjAxJzogJ2V4cG9zdXJlJyxcblx0ICAgICcyMjAyJzogJ2V4cG9zdXJlJyxcblx0ICAgICcxOTk5OSc6IGRlZmF1bHRDb2RlLFxuXHQgICAgJzEwMjMnOiAnYXBwX3Nob3cnLFxuXHQgICAgJzEwMTAnOiAnYXBwX2hpZGVfb3JfdW5sb2FkJ1xuXHQgIH0sXG5cdCAgRVZFTlRfSURfTUFQOiB7XG5cdCAgICAnRVhQJzogRVhQLFxuXHQgICAgJ0lNUEVYUCc6IElNUEVYUCxcblx0ICAgICdDTEsnOiBDTEssXG5cdCAgICAnT1RIRVInOiBPVEhFUixcblx0ICAgICdTSE9XJzogQVBQX1NIT1csXG5cdCAgICAnSF9PUl9VJzogQVBQX0hJREVfT1JfVU5MT0FEXG5cdCAgfSxcblx0ICBBUExVUzogQVBMVVMsXG5cdCAgR09MRExPRzogR09MRExPRyxcblx0ICBVTlNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnVuc3Vic2NyaWJlJyxcblx0ICBTVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5zdWJzY3JpYmUnLFxuXHQgIFBVQkxJU0g6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy5wdWJsaXNoJyxcblx0ICBDQUNIRV9QVUJTOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuY2FjaGVQdWJzJyxcblx0ICBBUExVU19VTklWRVJTQUw6IEFQTFVTICsgJ191bml2ZXJzYWwnLFxuXHQgIEFQTFVTX1FVRVVFOiBBUExVU19RVUVVRSxcblx0ICBHT0xETE9HX1FVRVVFOiBHT0xETE9HX1FVRVVFLFxuXHQgIENPTVBMRVRFOiAnY29tcGxldGUnLFxuXHQgIFBWX0NPREU6ICcyMDAxJyxcblx0ICBFWFBfQ09ERTogRVhQLFxuXHQgIENMS19DT0RFOiBDTEssXG5cdCAgT1RIRVJfQ09ERTogT1RIRVIsXG5cdCAgQ0xLOiAnQ0xLJyxcblx0ICBFWFA6ICdFWFAnLFxuXHQgIC8vIE9USEVSOiAnT1RIRVInLFxuXHQgIFNQTV9DTlQ6ICdzcG0tY250Jyxcblx0ICBTUE1fVVJMOiAnc3BtLXVybCcsXG5cdCAgU1BNX1BSRTogJ3NwbS1wcmUnLFxuXHQgIE1XX0NIQU5HRV9QVjogTVdfQ0hBTkdFICsgJ19wdicsXG5cdCAgTVdfQ0hBTkdFX0hKTEo6IE1XX0NIQU5HRSArICdfaGpsaicsXG5cdCAgSFRUUDogSFRUUCArICc6Jyxcblx0ICBIVFRQUzogJ2h0dHBzOicsXG5cdCAgQVBQRU5EX01FVEFfSU5GTzogQVBQRU5EX01FVEFfSU5GTyxcblx0ICBTRVRfTUVUQV9JTkZPOiBTRVRfTUVUQV9JTkZPLFxuXHQgIEFQTFVTX0FQUEVORF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgQVBQRU5EX01FVEFfSU5GTyxcblx0ICBBUExVU19TRVRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIFNFVF9NRVRBX0lORk8sXG5cdCAgUFZJRDoncHZpZCcsXG5cdCAgQVBMVVNfTE9HX1BJUEU6J2FwbHVzLWxvZy1waXBlJyxcblx0ICBvcGVuQVBJczogW1xuXHQgICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsIFxuXHQgICAgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJywgJ3JlcXVlc3RSZW1vdGVDb25maWcnLFxuXHQgICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgJ3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzJywgXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0ICAgICd1cGRhdGVQYWdlVXRwYXJhbScsXG5cdCAgICAndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJyxcblx0ICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuXHQgICAgJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgJ2dldFBhZ2VTcG1VcmwnLCAnZ2V0UGFnZVNwbVByZScsXG5cdCAgICAnc2V0UGFnZU5hbWUnLCAnZ2V0RWxlbWVudFNQTScsICdyZWNvcmRBcHBMaW5rJ1xuXHQgIF0sXG5cdCAgU0VTU0lPTl9JTlRFUlZBTDogU0VTU0lPTl9JTlRFUlZBTCxcblx0ICBTRVNTSU9OX1BBVVNFX1RJTUU6ICdzZXNzaW9uX3BhdXNlX3RpbWUnLFxuXHQgIElNUFJJTlQ6ICdpbXByaW50Jyxcblx0ICBDVVJSRU5UX1NFU1NJT046ICdjdXJyZW50X3Nlc3Npb24nLFxuXHQgIE1BWF9FVkVOVElEX0xFTkdUSDogMTI4LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIOiAyNTYsXG5cdCAgTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQ6IDEwMCxcblx0ICBGQUlMRURfUkVRVUVTVFM6ICdmYWlsZWRfcmVxdWVzdHMnLFxuXHQgIFJFUVVFU1RTOiAncmVxdWVzdHMnLFxuXHQgIFNIQVJFUzogJ3NoYXJlcycsXG5cdCAgQVBMVVNfU1NSQzogJ19hcGx1c19zc3JjJyxcblx0ICBFS1ZTOiBFS1ZTLFxuXHQgIEVWRU5UX01BWF9DT1VOVDogRVZFTlRfTUFYX0NPVU5ULFxuXHQgIE1FTU9SWV9NQVhfQ09VTlQ6IE1FTU9SWV9NQVhfQ09VTlQsXG5cdCAgTUFYX1FVRVVFX0NPVU5UOiBNQVhfUVVFVUVfQ09VTlQsXG5cdCAgRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMOiBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwsXG5cdCAgUEFHRV9TVEFSVDogUEFHRV9TVEFSVCxcblx0ICBQQUdFX0VORDogUEFHRV9FTkQsXG5cdCAgQVBQX1NUQVJUOiBBUFBfU1RBUlQsXG5cdCAgQVBQX0VORDogQVBQX0VORCxcblx0ICBVU0VSX1BST0ZJTEVfS0VZOiBVU0VSX1BST0ZJTEVfS0VZLFxuXHQgIFNIQVJFX0NBQ0hFX0lOVEVSVkFMOiBTSEFSRV9DQUNIRV9JTlRFUlZBTCxcblx0ICBJTVBSSU5UOiBJTVBSSU5ULFxuXHQgIElEX1RZUEU6IElEX1RZUEUsXG5cdCAgR0xPQkFMX1BST1BFUlRZOiAnZ2xvYmFscHJvcGVydHknLFxuXHQgIC8vIFVUTV9LRVlTOiBbJ3V0bV9zb3VyY2UnLCAndXRtX2NvbnRlbnQnLCAndXRtX21lZGl1bScsICd1dG1fY2FtcGFpZ24nLCAndXRtX3Rlcm0nXSxcblx0ICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuXHQgIFBBR0VfQ09ORklHOiBQQUdFX0NPTkZJRyxcblx0ICBBUExVU19TS0lQX0FQVl9SVUxFUzogQVBMVVNfU0tJUF9BUFZfUlVMRVMsXG5cdCAgQVBMVVNfUFZfRE9NQUlOOiBBUExVU19QVl9ET01BSU4sXG5cdCAgQVBMVVNfRUtWX0RPTUFJTjogQVBMVVNfRUtWX0RPTUFJTixcblx0ICBBUExVU19JTVBSSU5UX1ZFUlNJT046ICdBUExVU19JTVBSSU5UX1ZFUlNJT04nLFxuXHQgIEFQTFVTX1JFTU9URV9DT05GSUc6ICdBUExVU19SRU1PVEVfQ09ORklHJyxcblx0ICBSQU5LOiAnZWt2X3JhbmsnLFxuXHQgIFdFQl9FVkVOVF9TVUZGSVg6ICcvd2ViX2xvZ3MnLFxuXHQgIFdFQl9QQ19QVl9TVUZGSVg6ICd2LmdpZicsXG5cdCAgV0VCX1dBUF9QVl9TVUZGSVg6ICdtLmdpZicsXG5cdCAgUEFHRV9MRUFWRTogJyQkX3BhZ2VfbGVhdmUnLFxuXHQgIEFQTFVTX0FVVE9UUkFDS19FTkFCTEVEOiAnYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWQnLFxuXHQgIEFQTFVTX0FVVE9UUkFDS19FTkFCTEVEX1JFTU9URTogJ2FwbHVzLWF1dG90cmFjay1lbmFibGVkLXJlbW90ZScsXG5cdCAgQVBMVVNfQVVUT1RSQUNLX0NPTkZJRzogJ2FwbHVzLWF1dG90cmFjay1jb25maWcnLFxuXHQgIEFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZy1yZW1vdGUnLFxuXHQgIEFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UOiAnYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQnLFxuXHQgIEFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URTogJ2FwbHVzLWRpc2FibGUtYXV0b2V2ZW50Jyxcblx0ICBBUExVU19ESVNBQkxFX0FVVE9QVjogJ2FwbHVzLWRpc2FibGUtYXB2Jyxcblx0ICBBUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEU6ICdhcGx1cy1kaXNhYmxlLWFwdi1yZW1vdGUnLFxuXHQgIEFQTFVTX0RFVklDRV9FTkFCTEU6ICdhcGx1cy1kZXZpY2UtZW5hYmxlJyxcblx0ICBQRVJGT1JNQU5DRV9XQVJJTkc6ICckJF9wZXJmX3dhcm5pbmcnLFxuXHQgIFNUQVJUX0lEOiAnU1RBUlRfSUQnLFxuXHQgIEFVVE9fR0VUX09QRU5JRDogQVVUT19HRVRfT1BFTklEXG5cdH07XG5cdFxuXHQvLyB2YXIgb3BlbkFQSXMgPSBbXG5cdC8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG5cdC8vICAgJ3NldFBhZ2VTUE0nLCAnc2V0TWV0YUluZm8nLCAnYXBwZW5kTWV0YUluZm8nLFxuXHQvLyAgIFVQREFURSArICdQYWdlUHJvcGVydGllcycsXG5cdC8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG5cdC8vICAgVVBEQVRFICsgJ1BhZ2VVdHBhcmFtJyxcblx0Ly8gICBVUERBVEUgKyAnTmV4dFBhZ2VVdHBhcmFtJyxcblx0Ly8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcblx0Ly8gICAnc2tpcFBhZ2UnXG5cdC8vIF07XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIFwibWV0YUluZm9cIjoge1xuXHQgICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG5cdCAgICBcImFwbHVzLXJob3N0LWdcIjogXCJcIixcblx0ICAgIFwiYXBsdXMtbW1zdGF0LXRpbWVvdXRcIjogXCIxMDAwMFwiLFxuXHQgICAgXCJhcGx1cy1kaXNhYmxlLWF1dG9ldmVudFwiOiBmYWxzZSxcblx0ICAgIFwiYXBsdXMtZGlzYWJsZS1hcHZcIjogZmFsc2UsXG5cdCAgICBcImFwbHVzLWF1dG90cmFjay1lbmFibGVkXCI6IGZhbHNlLFxuXHQgICAgXCJhcGx1cy1kZXZpY2UtZW5hYmxlXCI6IHRydWUsXG5cdCAgICBcInNka0lkXCI6IFwiYXBsdXNfbWluaV9jbG91ZF91bVwiXG5cdCAgfSxcblx0ICBcImdsb2JhbENvbmZpZ1wiOiB7XG5cdCAgICBcImlzQWxpXCI6IGZhbHNlLFxuXHQgICAgXCJpc0RlY29kZVVybFwiOiB0cnVlLFxuXHQgICAgXCJBUExVU19RVUVVRVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICBcIkVUQUdfU1RPUkFHRV9LRVlcIjogXCJfX0VUQUdfX0NOQV9fSURfX1wiLFxuXHQgICAgXCJzY3JpcHRfbmFtZVwiOiBcImFwbHVzX21pbmkuanNcIixcblx0ICAgIFwiYXBsdXMtZ2xvYmFsZGF0YVwiOiB7fSxcblx0ICAgIFwibHZlclwiOiBcIjEuOS4yMlwiXG5cdCAgfSxcblx0ICBcInBsdWdpbnNcIjogW1xuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfYXBwX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJpbmplY3RfcGFnZV91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXygzOSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcInB1YnN1YlwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg0Mylcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX21ldGFfaW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbG9nX2luamVjdFwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MCksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG5cdCAgICAgIF0sXG5cdCAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICBcInBsdWdpbnNcIjoge1xuXHQgICAgICAgICAgXCJwdlwiOiBbXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTEpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVuX3RvX3NlbmRwdlwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUzKSxcblx0ICAgICAgICAgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgICAgICAgICBcImFwbHVzV2FpdGluZ1wiOiBcIlwiXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlcmVfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTUpLFxuXHQgICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwibG9nZGF0YVRvVXRcIjoge31cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJtaW5pYXBwX2RhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTkpLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG5cdCAgICAgICAgICAgICAgXVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY2FuX3RvX3NlbmRwdlwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDYxKVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICBdLFxuXHQgICAgICAgICAgXCJoamxqXCI6IFtcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU1KSxcblx0ICAgICAgICAgICAgICBcImRlcHNcIjogW11cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VzZXJkYXRhXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjUpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIF1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FwaVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NiksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG5cdCAgICAgIF1cblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FjXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWVcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oODApLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuXHQgICAgICBdXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJvcGVuX2FwaVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg4Nilcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX2NsaWVudFwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg4Nylcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX21pbmlfc3BtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9yZXBvcnRfdW1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oODkpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJtZXRhX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk0KSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwiaXNPcGVuQXBpXCI6IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXV0b190cmFja2VyX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDk3KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcblx0ICAgICAgXVxuXHQgICAgfVxuXHQgIF1cblx0fTtcblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qc1xuXHQgKiDmlrDniYjoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSBhcHDms6jlhaVcblx0ICpcblx0ICog6YCa6L+H6YeN5YaZd3jnmoRhcGnmnaXmqKHmi5/nlJ/lkb3lkajmnJ/vvIzku6XmraTnu5Xov4fkuInmlrnmoYbmnrblr7nnlJ/lkb3lkajmnJ/nmoTph43lhpnmnLrliLZcblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDogoblj4EgPHNpc2FuLnFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgc2Vzc2lvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgcmVxdWVzdFF1ZXVlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMSk7XG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsTW9uaXRvciA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpO1xuXHR2YXIgdXRpbFJlbW90ZUNmZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgdW1VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHRcblx0dmFyIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG5cdFxuXHRmdW5jdGlvbiBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSkge1xuXHQgIHZhciBnbG9iYWxfYXJncyA9IHt9O1xuXHQgIGlmIChzY2VuZSkge1xuXHQgICAgZ2xvYmFsX2FyZ3Muc2NlbmUgPSBzY2VuZTtcblx0ICB9XG5cdCAgaWYgKHF1ZXJ5ICYmIHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG5cdCAgICBnbG9iYWxfYXJncy5kZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQ7XG5cdCAgfVxuXHQgIGZvciAodmFyIGsgaW4gcXVlcnkpIHtcblx0ICAgIGlmIChrID09PSAnJCRfc2hhcmVfdWlkJyB8fCBrLmluZGV4T2YoJyQkX3V0bV8nKSA9PT0gMCkge1xuXHQgICAgICBnbG9iYWxfYXJnc1trXSA9IHF1ZXJ5W2tdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZ2xvYmFsX2FyZ3M7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlc3Npb25TdGFydChvcHRpb25zKSB7XG5cdCAgY2FjaGUoKS5sb2FkKGZ1bmN0aW9uKCl7XG5cdCAgICB1bG9nKCkudygnY2FjaGUgaW5pdCBzdWNjZXNzJyk7XG5cdCAgICBpZiAob3B0aW9ucy5xdWVyeSAmJiBvcHRpb25zLnF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkICYmIG9wdGlvbnMucXVlcnkubWluaWFwcERlYnVnSWQgIT0gY2FjaGUoKS5nZXQoJ21pbmlhcHBEZWJ1Z0lkJykpIHtcblx0ICAgICAgY2FjaGUoKS5zZXQoJ21pbmlhcHBEZWJ1Z0lkJywgb3B0aW9ucy5xdWVyeS5taW5pYXBwRGVidWdJZCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHZhciBuZXdPcHRpb25zID0ge307XG5cdCAgdmFyIGRlZXBDbG9uZSA9IGNsb25lRGVlcChvcHRpb25zKTtcblx0ICBmb3IgKHZhciBpIGluIGRlZXBDbG9uZSkge1xuXHQgICAgaWYgKHR5cGVvZiBkZWVwQ2xvbmVbaV0gPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIG5ld09wdGlvbnMgPSB1dGlsRGFzaC5hc3NpZ24oZGVlcENsb25lW2ldLCBuZXdPcHRpb25zKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChkZWVwQ2xvbmVbaV0pIHtcblx0ICAgICAgICBuZXdPcHRpb25zW2ldID0gZGVlcENsb25lW2ldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLlJFUVVFU1RTKS5sb2FkKCk7XG5cdCAgdmFyIGNiID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTKS5sb2FkKCk7XG5cdCAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTKS5zZW5kKCcnLCB7fSwgZnVuY3Rpb24oKSB7XG5cdCAgICAgIHVsb2coKS5pKCdzZW5kIGZhaWxlZCByZXF1ZXN0IHF1ZXVlJyk7XG5cdCAgICB9KTtcblx0ICB9O1xuXHQgIHZhciBpc05ld1Nlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLnJlc3VtZShuZXdPcHRpb25zKTtcblx0ICB2YXIgc2Vzc2lvbklkID0gc2Vzc2lvbk1hbmFnZXIoKS5nZXRDdXJyZW50U2Vzc2lvbklkKCk7XG5cdCAgZXZlbnRNYW5hZ2VyKCkuc2V0U2Vzc2lvbklkKHNlc3Npb25JZCk7XG5cdCAgaWYgKGlzTmV3U2Vzc2lvbikge1xuXHQgICAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLlJFUVVFU1RTKS5zZW5kKCcnLCB7fSwgY2IpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNlc3Npb25FbmQoKSB7XG5cdCAgc2Vzc2lvbk1hbmFnZXIoKS5wYXVzZSgpO1xuXHQgIC8vIGFwcCBoaWRl5pe25Y+R6YCB5b2T5YmN6K+35rGC6Zif5YiXJuWksei0pemYn+WIl1xuXHQgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBmdW5jdGlvbigpIHtcblx0ICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNhdmUoKTtcblx0ICAgIGNhY2hlKCkuc2F2ZSgpO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gYWRhcHRNeUFwcEhpZGUoY2IpIHtcblx0ICB0cnkge1xuXHQgICAgaWYgKG15ICYmIG15Lm9uVGl0bGVDbG9zZUNsaWNrKSB7XG5cdCAgICAgIGNiICYmIG15Lm9uVGl0bGVDbG9zZUNsaWNrKGNiKTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpe31cblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5qZWN0QXBwKCkge1xuXHQgIHZhciBhcHBCYWsgPSBBcHA7XG5cdCAgdmFyIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG5cdCAgdmFyIGxhbnVjaGVkID0gZmFsc2U7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgY29udGV4dCA9IG1pbmkuZ2V0Q29udGV4dCgpOyAgIC8vIOW5s+WPsOS4iuS4i+aWh++8miB3eOOAgWRk44CBbXnjgIF0dOOAgXN3YW5cblx0ICB2YXIgZm4gPSB7XG5cdCAgICBvbkxhdW5jaDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgICAgbWluaS5pbml0SXNUQigpO1xuXHQgICAgICB2YXIgcXVlcnkgPSBvcHRpb25zID8gb3B0aW9ucy5xdWVyeSA6IHt9O1xuXHQgICAgICB2YXIgcmVmZXJyZXJJbmZvID0gb3B0aW9ucyA/IG9wdGlvbnMucmVmZXJyZXJJbmZvIDoge307XG5cdCAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvYmFzZS9hcHAvbGlmZS1jeWNsZS93eC5nZXRMYXVuY2hPcHRpb25zU3luYy5odG1sIyVFOCVCRiU5NCVFNSU5QiU5RSVFNiU5QyU4OSVFNiU5NSU4OCUyMHJlZmVycmVySW5mbyUyMCVFNyU5QSU4NCVFNSU5QyVCQSVFNiU5OSVBRlxuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyB7T2JqZWN0fSByZWZlcnJlckluZm8ge1xuXHQgICAgICAgKiAgIGFwcElkICBzdHJpbmcgIOadpea6kOWwj+eoi+W6j+OAgeWFrOS8l+WPt+aIliBBcHAg55qEIGFwcElkXG5cdCAgICAgICAqICAgZXh0cmFEYXRhICBPYmplY3QgIOadpea6kOWwj+eoi+W6j+S8oOi/h+adpeeahOaVsOaNru+8jHNjZW5lPTEwMzfmiJYxMDM45pe25pSv5oyBXG5cdCAgICAgICAqIH1cblx0ICAgICAgICovXG5cdCAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKSk7XG5cdFxuXHQgICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcblx0XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLXNlc3Npb24tYXJncycsIHV0aWxEYXNoLmFzc2lnbihyZWZlcnJlckluZm8sIHtcblx0ICAgICAgICAgIHNjZW5lOiBvcHRpb25zLnNjZW5lIHx8ICcnXG5cdCAgICAgICAgfSldXG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgICB2YXIgcXVlcnlEYXRhID0ge307IC8vIGNsb25lRGVlcChxdWVyeSk7XG5cdCAgICAgICAgaWYgKHF1ZXJ5LnNwbSkge1xuXHQgICAgICAgICAgY3R4LmFwbHVzLnNwbV9vcmlnbiA9IHF1ZXJ5LnNwbTtcblx0ICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEuc3BtO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAob3B0aW9ucy5zY2VuZSkge1xuXHQgICAgICAgICAgcXVlcnlEYXRhLnNjZW5lID0gb3B0aW9ucy5zY2VuZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG5cdCAgICAgICAgICB2YXIgZGVidWdJZCA9IHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkLnRyaW0oKTtcblx0ICAgICAgICAgIHZhciBkZWJ1Z0luZm9zID0gZGVidWdJZC5zcGxpdCgnXycpO1xuXHQgICAgICAgICAgcXVlcnlEYXRhID0gdXRpbERhc2guYXNzaWduKHF1ZXJ5RGF0YSwge1xuXHQgICAgICAgICAgICBhcGx1c193b3JrX25vOiBkZWJ1Z0luZm9zLmxlbmd0aCA+IDIgPyBkZWJ1Z0luZm9zWzFdIDogZGVidWdJZCxcblx0ICAgICAgICAgICAgYXBsdXNfdHJhY2tfZGVidWdfaWQ6IGRlYnVnSWQsXG5cdCAgICAgICAgICAgIGFwbHVzX2ZsYWc6ICdhcGx1c190ZXN0J1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLm1pbmlhcHBEZWJ1Z0lkO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywgcXVlcnlEYXRhXVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1jcHZkYXRhJywgcXVlcnlEYXRhXVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1nbG9iYWwtYXJncycsIGdldEdsb2JhbEFyZ3MocXVlcnksIG9wdGlvbnMuc2NlbmUpXVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgb25TaG93OiBmdW5jdGlvbiAob3B0cykge1xuXHQgICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcblx0ICAgICAgdmFyIHF1ZXJ5ID0gb3B0cyA/IG9wdHMucXVlcnkgOiB7fTtcblx0ICAgICAgdmFyIHNjZW5lID0gb3B0cyA/IG9wdHMuc2NlbmUgOiAnJztcblx0ICAgICAgdmFyIHN0YXJ0X3R5cGU7IC8v5bCP56iL5bqP5ZCv5Yqo57G75Z6LIFxuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCAgLy8g5q2k5aSE6ZyA6KaB55Soc2V0TWV0YUluZm/lgZropobnm5blvI/mm7TmlrDvvIzlm6DkuLrlvq7kv6HlsI/nqIvluo/kvJrmnInnvJPlrZhcblx0ICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSldXG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoc2NlbmUpIHtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywge1xuXHQgICAgICAgICAgICBzY2VuZTogc2NlbmVcblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywge1xuXHQgICAgICAgICAgICBzY2VuZTogc2NlbmVcblx0ICAgICAgICAgIH1dXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMikge1xuXHQgICAgICAgIHN0YXJ0X3R5cGUgPSAxO1xuXHQgICAgICB9IGVsc2UgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMSkge1xuXHQgICAgICAgIHN0YXJ0X3R5cGUgPSAwO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHVsb2coKS53KCdBUFBfTEFVTkNIX1RZUEUgc2hvdWxkIG5vdCByZWFjaCB0aGlzLCB2YWx1ZSA9ICcgKyAgQVBQX0xBVU5DSF9UWVBFKTtcblx0ICAgICAgfVxuXHQgICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoIWFscmVhZHlTdGFydGVkKSB7XG5cdCAgICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IHRydWU7XG5cdCAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIEDmloflv4MgMS7liLDovr7njofmtYvor5XpnIDopoEgMi7ljZXmnaHkuovku7bnmoRsb2dpZOmcgOimgVxuXHQgICAgICAgIHV0aWxNb25pdG9yLmNsZWFyKCk7XG5cdCAgICAgICAgdmFyIHN0YXJ0aWQgPSB1bVV0aWxzLmdldFN0YXJ0SWQoKTtcblx0ICAgICAgICBldmVudE1hbmFnZXIoKS5zZXRTdGFydElkKHN0YXJ0aWQpO1xuXHQgICAgICAgIFxuXHQgICAgICAgIHZhciBnbG9iYWxDb25maWcgPSBjdHguYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHQgICAgICAgIGlmICghZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgICAgICB2YXIgcGFnZUNvZGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuXHQgICAgICAgICAgY3R4Lm9uQXBwU2hvd1RpbWUgPSBEYXRlLm5vdygpO1xuXHQgICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUFBfU1RBUlQsICdTSE9XJywge1xuXHQgICAgICAgICAgICAgIC8vIHNjZW5lOiBzY2VuZSxcblx0ICAgICAgICAgICAgICBzdGFydF90eXBlOiBzdGFydF90eXBlLFxuXHQgICAgICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUNvZGUgfHwgb3B0cy5wYXRoIHx8ICctJyxcblx0ICAgICAgICAgICAgICB1cmw6IG9wdHMucGF0aCB8fCAnLSdcblx0ICAgICAgICAgICAgfV1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgb25IaWRlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHV0aWxzLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBnbG9iYWxDb25maWcgPSBjdHguYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHQgICAgICAgIHZhciBwYWdlQ29kZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG5cdCAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICAgIHZhciB1cmwgPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblx0ICAgICAgICAgIHZhciBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBjdHgub25BcHBTaG93VGltZTtcblx0ICAgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBQX0VORCwgJ0hfT1JfVScsIHtcblx0ICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG5cdCAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCB1cmwgfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogdXJsIHx8ICctJyxcblx0ICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7ICAgICAgICAgICAgXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG5cdCAgICAgICAgc2Vzc2lvbkVuZCgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgQVBQX0xBVU5DSF9UWVBFID0gMDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBpZiAoYXBwQmFrLmFmdGVyKSB7XG5cdCAgICBhcHBCYWsuYWZ0ZXIoe1xuXHQgICAgICBtZXRob2RzOiB7XG5cdCAgICAgICAgb25MYXVuY2g6IGZ1bmN0aW9uKHQpIHsgICAgIFxuXHQgICAgICAgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTsgICAgIFxuXHQgICAgICAgICAgaWYgKHQudGhpc09iamVjdCkge1xuXHQgICAgICAgICAgICB0LnRoaXNPYmplY3QuYXBsdXMgPSBjdHguYXBsdXM7XG5cdCAgICAgICAgICAgIHQudGhpc09iamVjdC5hcGx1c19xdWV1ZSA9IGN0eC5hcGx1c19xdWV1ZTtcblx0ICAgICAgICAgIH0gXG5cdCAgICAgICAgICBmbi5vbkxhdW5jaCh0LmFyZ3MpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgb25TaG93OiBmdW5jdGlvbih0KSB7XG5cdCAgICAgICAgICBmbi5vblNob3codC5hcmdzKTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG9uSGlkZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBmbi5vbkhpZGUoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBBcHAgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBlLmFwbHVzID0gY3R4OyAvLyDms6jlhozlhajlsYDlj5jph49cblx0ICAgICAgYXBwQmFrKGUpO1xuXHQgICAgfTtcblx0XG5cdCAgICBjb250ZXh0Lm9uQXBwU2hvdyhmdW5jdGlvbiAoZSkge1xuXHQgICAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG5cdCAgICAgIGlmKCFsYW51Y2hlZCkge1xuXHQgICAgICAgIC8vIOeZvuW6puS4jeaUr+aMgWdldExhdW5jaE9wdGlvbnNTeW5j77yM55Sob25TaG9355qEb3B0aW9uc+S7o+abv1xuXHQgICAgICAgIHZhciBvcHRzID0ge307XG5cdCAgICAgICAgaWYoaXNGdW5jdGlvbihjb250ZXh0LmdldExhdW5jaE9wdGlvbnNTeW5jKSkge1xuXHQgICAgICAgICAgb3B0cyA9IGNvbnRleHQuZ2V0TGF1bmNoT3B0aW9uc1N5bmMoKSB8fCB7fTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgb3B0cyA9IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuXHQgICAgICAgIGxhbnVjaGVkID0gdHJ1ZTtcblx0ICAgICAgfTtcblx0ICAgICAgXG5cdCAgICAgIC8vIG9uU2hvd1xuXHQgICAgICBmbi5vblNob3coZSk7XG5cdCAgICB9KSxcblx0XG5cdCAgICBjb250ZXh0Lm9uQXBwSGlkZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIG9uSGlkZVxuXHQgICAgICBmbi5vbkhpZGUoKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIGFkYXB0TXlBcHBIaWRlKGZuLm9uSGlkZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBBcHApID4gLTEpIHtcblx0ICAgICAgICBpbmplY3RBcHAoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgcmVzZXRGbjogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICAgIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6ICcnLFxuXHQgICAgICBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gPyBhcmd1bWVudHNbMl0gOiBmdW5jdGlvbiAoKSB7IH0sXG5cdCAgICAgIGkgPSBlW3RdO1xuXHQgICAgZVt0XSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHJzID0gaSAmJiBpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGFwcOacrOi6q+eahGZ1bmN0aW9uXG5cdCAgICAgIGlmIChycykge1xuXHQgICAgICAgIHJldHVybiBuLmNhbGwodGhpcywgcnMpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHRhcm8xeOOAgXRhcm8yeCDlv4XpobvliqDkuKrpop3lpJbnmoTor63lj6VuLmFwcGx55omN6IO95omn6KGM77yM5q+U5aaCdHJ5Y2F0Y2jvvIzlj5jph4/lo7DmmI7nrYnvvIzmraTlpITliqDkuoZyZXR1cm5cblx0ICAgICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHJld3JpdGVGbjogZnVuY3Rpb24ob2JqLCBuYW1lLCBuZXdGbikge1xuXHQgICAgdmFyIG9sZEZuID0gb2JqW25hbWVdO1xuXHQgICAgb2JqW25hbWVdID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgbmV3Rm4uY2FsbCh0aGlzLCBlKTtcblx0ICAgICAgb2xkRm4gJiYgb2xkRm4uY2FsbCh0aGlzLCBlKTtcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgb25BcGx1c1JlYWR5OiBmdW5jdGlvbiAoYXBsdXNfcXVldWUsIFNVQlNDUklCRSwgY2FsbGJhY2spIHtcblx0ICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IFNVQlNDUklCRSxcblx0ICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJyAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XVxuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgY2xpY2tfcHJveHk6IGZ1bmN0aW9uKG9wdGlvbnMsIG1ldGhvZCkgeyAgICBcblx0ICAgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciB1dGlsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdCAgICB2YXIgb3JpRnVuYyA9IG9wdGlvbnNbbWV0aG9kXTtcblx0ICAgIG9wdGlvbnNbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgcmVzdWx0ID0gb3JpRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB2YXIgZXZlbnQgPSBhcmd1bWVudHNbMF07XG5cdCAgICAgIGlmICh1dGlsT2JqZWN0LmlzT2JqZWN0KGV2ZW50KSAmJiBhcGx1cyAmJiBhcGx1cy5yZWNvcmQpIHtcblx0ICAgICAgICBhcGx1cy5yZWNvcmQoXCIkJF9hdXRvX2Nsa1wiLCBcIkNMS1wiLCB7fSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH07XG5cdCAgfSxcblx0ICBcblx0ICBnZXRJbmRleEJ5UmVjdDogZnVuY3Rpb24oc2VsZWN0b3IsIHRhcmdldFJlY3QsIGNhbGxiYWNrKXtcblx0ICAgIHZhciB0YXJnZXRJbmRleCA9IC0xO1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChzZWxlY3RvcikuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbihyZWN0KXtcblx0ICAgICAgZWFjaChyZWN0WzBdLGZ1bmN0aW9uKGl0ZW0saW5kZXgpe1xuXHQgICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICAgIGlmKGl0ZW0ud2lkdGggPT09IHRhcmdldFJlY3Qud2lkdGggJiYgaXRlbS5oZWlnaHQgPT09IHRhcmdldFJlY3QuaGVpZ2h0ICYmIGl0ZW0ubGVmdCA9PT0gdGFyZ2V0UmVjdC5sZWZ0ICYmIGl0ZW0udG9wID09PSB0YXJnZXRSZWN0LnRvcCAmJiBpdGVtLnJpZ2h0ID09PSB0YXJnZXRSZWN0LnJpZ2h0ICYmIGl0ZW0uYm90dG9tID09PSB0YXJnZXRSZWN0LmJvdHRvbSl7XG5cdCAgICAgICAgICAgIHRhcmdldEluZGV4ID0gaW5kZXg7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRhcmdldEluZGV4ID0gaW5kZXg7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgY2FsbGJhY2sodGFyZ2V0SW5kZXgpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgaXNQbGFpbk9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG5cdCAgaWYoaXNQbGFpbk9iamVjdChhcnIpICYmIGFyci5sZW5ndGggPT09IHZvaWQgMCl7XG5cdCAgICBmb3IodmFyIGF0dHIgaW4gYXJyKXtcblx0ICAgICAgaWYoYXJyLmhhc093blByb3BlcnR5KGF0dHIpKXtcblx0ICAgICAgICBmbihhdHRyLGFyclthdHRyXSxhcnIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfWVsc2Uge1xuXHQgICAgdmFyIGk7XG5cdCAgICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBycyA9IGZuKGFycltpXSwgaSk7XG5cdCAgICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iail7XG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXHRcblx0ICB2YXIgcHJvdG8gPSBvYmo7XG5cdCAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcblx0ICAgIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqKSA9PT0gcHJvdG87XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5bCP56iL5bqP5bel5YW3XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnOyBcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRleHBvcnRzLmdldEN1cnJlbnRQYWdlID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuXHQgIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSB8fCB7fTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UmVmZXJyZXJQYWdlID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG5cdCAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuXHR9O1xuXHRcblx0dmFyIF9pc1RiO1xuXHQvLyDljZXpobXmtYvor5XpnIDopoFcblx0ZXhwb3J0cy5yZXNldElzVEIgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICBfaXNUYiA9IHZhbHVlO1xuXHR9O1xuXHRcblx0XG5cdGZ1bmN0aW9uIGluaXRJc1RCICgpIHtcblx0ICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiBfaXNUYjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIFVBID0gbmF2aWdhdG9yID8gKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnN3dXNlckFnZW50KSA6ICcnO1xuXHQgICAgICByZXN1bHQgPSAhIS9BbGlBcHAvaS50ZXN0KFVBKTtcblx0ICAgICAgaWYgKC9BbGlBcHBcXCgoQVB8RGluZ1RhbGt8QU1BUHxVQ3xRVUFSSykvaS50ZXN0KFVBKSkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICgvQWxpQXBwXFwoS0IvaS50ZXN0KFVBKSkge1xuXHQgICAgICAgIHJlc3VsdCA9ICEhL01pc3QvLnRlc3QoVUEpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vSURFLea3mOWunS3llYblrrblupTnlKjkuIvmnJ/mnJvov5Tlm550cnVlXG5cdCAgICAgIGlmKC9BbGlwYXlJREUgVGFvYmFvLy50ZXN0KFVBKSl7XG5cdCAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVzdWx0KSB7XG5cdCAgICAgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0ICAgICAgICBpZiAoaXNGdW5jdGlvbihjdHguY2FuSVVzZSkpIHtcblx0ICAgICAgICAgIHJlc3VsdCA9ICEhY3R4LmNhbklVc2UoJ2NhbGxVc2VyVHJhY2snKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICBfaXNUYiA9IHJlc3VsdDtcblx0ICAgIHJldHVybiByZXN1bHQ7ICBcblx0ICB9XG5cdH1cblx0ZXhwb3J0cy5pbml0SXNUQiA9IGluaXRJc1RCO1xuXHRcblx0ZnVuY3Rpb24gaXNUQigpIHtcblx0ICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcblx0ICAgIHJldHVybiAhIV9pc1RiOyAgXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBpbml0SXNUQigpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgY3R4OiBkZCxcblx0ICAgICAgcGxhdFR5cGU6ICdkZCcsXG5cdCAgICAgIHNka1R5cGU6ICdkZG1wJyxcblx0ICAgICAgbG9nRG9tYWluOiAnL2RkbV9sb2dzJ1xuXHQgICAgfTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGN0eDogbXksXG5cdCAgICAgICAgcGxhdFR5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2JhbycgOiAnbXknLFxuXHQgICAgICAgIHNka1R5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2Jhb21wJyA6ICdteW1wJyxcblx0ICAgICAgICBsb2dEb21haW46ICcvYWxpcGF5bV9sb2dzJ1xuXHQgICAgICB9O1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICBjdHg6IHR0LFxuXHQgICAgICAgICAgcGxhdFR5cGU6ICd0dCcsXG5cdCAgICAgICAgICBzZGtUeXBlOiAndHRtcCcsXG5cdCAgICAgICAgICBsb2dEb21haW46ICcvYnl0ZWRhbmNlbV9sb2dzJ1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgY3R4OiBzd2FuLFxuXHQgICAgICAgICAgICBwbGF0VHlwZTogJ2JkJyxcblx0ICAgICAgICAgICAgc2RrVHlwZTogJ2JkbXAnLFxuXHQgICAgICAgICAgICBsb2dEb21haW46ICcvYmFpZHVtX2xvZ3MnXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgICAgY3R4OiB3eCxcblx0ICAgICAgICAgICAgICBwbGF0VHlwZTogJ3d4Jyxcblx0ICAgICAgICAgICAgICBzZGtUeXBlOiAnd3htcCcsXG5cdCAgICAgICAgICAgICAgbG9nRG9tYWluOiAnL3d4bV9sb2dzJ1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgIGN0eDoge30sXG5cdCAgICAgICAgICAgICAgcGxhdFR5cGU6ICdVTktOT1cnLFxuXHQgICAgICAgICAgICAgIHNka1R5cGU6ICdVTktOT1cnXG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLmlzVEIgPSBpc1RCO1xuXHRleHBvcnRzLmdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkucGxhdFR5cGU7XG5cdH07XG5cdGV4cG9ydHMuZ2V0U2RrVHlwZSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuc2RrVHlwZTtcblx0fTtcblx0ZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdH07XG5cdGV4cG9ydHMuZ2V0TG9nRG9tYWluID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmxvZ0RvbWFpbjtcblx0fTtcblx0XG5cdFxuXHR2YXIgSFRUUF9SRVFVRVNUID0gJ2h0dHBSZXF1ZXN0Jztcblx0dmFyIFJFUVVFU1QgPSAncmVxdWVzdCc7XG5cdHZhciBGTiA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcblx0LyoqXG5cdCAqIOWPkemAgUdFVOivt+axglxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IHVybFxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IG9wdHMge1xuXHQgKiAgIHRpbWVvdXQ6IDUwMDBcblx0ICogfVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sge1xuXHQgKiAgIHRpbWVvdXQ6IDUwMDBcblx0ICogfVxuXHQgKi9cblx0ZXhwb3J0cy5yZXF1ZXN0ID0gZnVuY3Rpb24gKHVybCwgb3B0cywgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAvLyB2YXIgY3R4ID0gdXRpbHMuZ2V0Q29udGV4dCgpIHx8IHt9O1xuXHQgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKGZhaWx1cmVDYWxsYmFjaykpIHtcblx0ICAgIGZhaWx1cmVDYWxsYmFjayA9IEZOO1xuXHQgIH1cblx0ICBpZiAoIWlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSkge1xuXHQgICAgc3VjY2Vzc0NhbGxiYWNrID0gRk47XG5cdCAgfVxuXHRcblx0ICB2YXIgbWV0aG9kTmFtZSA9IG9wdHMucmVxdWVzdE1ldGhvZE5hbWUgfHwgUkVRVUVTVDtcblx0ICB2YXIgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXHQgIGlmICghaXNGdW5jdGlvbihyZXEpICYmIG1ldGhvZE5hbWUgIT09IFJFUVVFU1QpIHtcblx0ICAgIG1ldGhvZE5hbWUgPSBSRVFVRVNUO1xuXHQgICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuXHQgIH1cblx0ICBpZiAoIWlzRnVuY3Rpb24ocmVxKSAmJiBtZXRob2ROYW1lICE9PSBIVFRQX1JFUVVFU1QpIHtcblx0ICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCfmlrnms5VcIicgKyBtZXRob2ROYW1lICsgJ1wi5LiN5a2Y5ZyoIScpO1xuXHQgICAgbWV0aG9kTmFtZSA9IEhUVFBfUkVRVUVTVDtcblx0ICAgIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblx0ICB9XG5cdFxuXHQgIHZhciBkYXRhVHlwZSA9IG9wdHMgJiYgb3B0cy5kYXRhVHlwZSA/IG9wdHMuZGF0YVR5cGUgOiAnYmFzZTY0Jztcblx0ICB2YXIgdGltZW91dCA9IG9wdHMgJiYgb3B0cy50aW1lb3V0ID8gb3B0cy50aW1lb3V0IDogMzAwMDtcblx0ICB2YXIgbWV0aG9kID0gb3B0cy5tZXRob2QgfHwgJ0dFVCc7XG5cdFxuXHQgIHZhciBjYWxsYmFja2VkO1xuXHQgIC8vIOWmguaenHVybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgIHVybCA9IHV0aWwuZml4RG9tYWluKHVybCk7XG5cdCAgdmFyIG1zZztcblx0ICBpZiAoaXNGdW5jdGlvbihyZXEpKSB7XG5cdCAgICB2YXIgcmVxT3B0aW9ucyA9IHtcblx0ICAgICAgdXJsOiB1cmwsXG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXG5cdCAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG5cdCAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuXHQgICAgICAgICAgc3VjY2Vzc0NhbGxiYWNrKHJlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgLy8gY29uc29sZSAmJiBjb25zb2xlLndhcm4oJ2FwbHVz5pel5b+X6K+35rGCXCInICsgdXJsICsgJ1wi5aSx6LSl77yM5Y6f5Zug77yaJyArIEpTT04uc3RyaW5naWZ5KHJlcykpO1xuXHQgICAgICAgIGlmICghY2FsbGJhY2tlZCkge1xuXHQgICAgICAgICAgY2FsbGJhY2tlZCA9IHRydWU7XG5cdCAgICAgICAgICBmYWlsdXJlQ2FsbGJhY2soe1xuXHQgICAgICAgICAgICBmYWlsdXJlOiB0cnVlLFxuXHQgICAgICAgICAgICBkYXRhOiByZXNcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGlmIChtZXRob2QgPT09ICdQT1NUJyAmJiB0eXBlb2Ygb3B0cy5kYXRhID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXFPcHRpb25zLnVybCA9IHJlcU9wdGlvbnMudXJsLnNwbGl0KCc/JylbMF07XG5cdCAgICAgIGlmIChIVFRQX1JFUVVFU1QgPT09IG1ldGhvZE5hbWUpIHtcblx0ICAgICAgICAvLyDkuJPpl6jlr7npkonpkonnmoTmlK/mjIFcblx0ICAgICAgICByZXFPcHRpb25zLmhlYWRlcnMgPSB7XG5cdCAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG5cdCAgICAgICAgfTtcblx0ICAgICAgICByZXFPcHRpb25zLmRhdGFUeXBlID0gJ2pzb24nO1xuXHQgICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxT3B0aW9ucy5kYXRhID0gb3B0cy5kYXRhO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgX2V4dEluZm8gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmVxdWVzdC1leHRpbmZvJyk7XG5cdCAgICBpZiAodHlwZW9mIF9leHRJbmZvID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXFPcHRpb25zLl9leHRJbmZvID0gX2V4dEluZm87XG5cdCAgICB9XG5cdCAgICByZXEocmVxT3B0aW9ucyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICghY2FsbGJhY2tlZCkge1xuXHQgICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcblx0ICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcblx0ICAgICAgICBmYWlsdXJlOiB0cnVlLFxuXHQgICAgICAgIGRhdGE6IG1zZ1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgY2FsbGJhY2tlZCA9IHRydWU7XG5cdCAgICAgIG1zZyA9ICdhcGx1cyBsb2cgcmVxdWVzdFwiJyArIHVybCArICcgdGltZW91dFwiLCB0aW1lIHNwZW5kJyArIHRpbWVvdXQgKyAnbXMnO1xuXHQgICAgICBjb25zb2xlICYmIGNvbnNvbGUud2Fybihtc2cpO1xuXHQgICAgICBmYWlsdXJlQ2FsbGJhY2soe1xuXHQgICAgICAgIGZhaWx1cmU6IHRydWUsXG5cdCAgICAgICAgZGF0YTogbXNnXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIHRpbWVvdXQpO1xuXHR9O1xuXHRcblx0XG5cdGV4cG9ydHMuc2V0U3RvcmFnZVN5bmMgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBwdCA9IGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xuXHQgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcblx0ICAgIGlmIChwdCA9PT0gJ215Jykge1xuXHQgICAgICBjdHguc2V0U3RvcmFnZVN5bmMoe1xuXHQgICAgICAgIGtleToga2V5LFxuXHQgICAgICAgIGRhdGE6IHZhbHVlXG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY3R4LnNldFN0b3JhZ2VTeW5jKGtleSwgdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGVycm9yKSB7fVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRTdG9yYWdlU3luYyA9IGZ1bmN0aW9uKGtleSkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgcHQgPSBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcblx0ICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgICBpZiAocHQgPT09ICdteScpIHtcblx0ICAgICAgcmV0dXJuIGN0eC5nZXRTdG9yYWdlU3luYyh7a2V5OiBrZXl9KS5kYXRhO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGN0eC5nZXRTdG9yYWdlU3luYyhrZXkpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2ggKGVycm9yKSB7fVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOagh+WHhuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuXHQvLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblx0XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xuXHR9O1xuXHRleHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cdFxuXHQvLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuXHRleHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcblx0ICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG5cdCAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGEuam9pbignJicpO1xuXHR9O1xuXHRleHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblx0XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gYXJyYXlcblx0ICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG5cdCAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuXHQgKlxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdC8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcblx0ZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuXHQgIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuXHQgIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuXHQgIHZhciBhcnIyID0gW107IFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuXHQgICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZml4RG9tYWluID0gZnVuY3Rpb24odXJsKSB7ICBcblx0ICBpZiAodXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xIHx8IHVybC5pbmRleE9mKCdodHRwOi8vJykgIT09IC0xKSB7XG5cdCAgICByZXR1cm4gdXJsO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1cmwgPSAoL15cXC9cXC8vLnRlc3QodXJsKSA/ICcnIDogJy8vJykgKyB1cmw7ICAgIFxuXHQgICAgaWYgKC9eXFwvXFwvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICByZXR1cm4gJ2h0dHA6JyArIHVybDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnaHR0cHM6JyArIHVybDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEFwcEtleSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikuZ2V0R2xvYmFsVmFsdWUoXCJhcGx1c1wiKTtcblx0ICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcGtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja0RvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xuXHQgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eKChodHRwfGh0dHBzfCcnKTpcXC9cXC8pPyhbYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfShcXC5bYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfSkrKDpbMC05XXsxLDV9KSopJC8pO1xuXHQgIHZhciBtYXRjaGVkID0gKHVybC5tYXRjaChyZWcpIHx8IFtdKVswXTsgIFxuXHQgIGlmICghdXJsIHx8ICFtYXRjaGVkKSB7XG5cdCAgICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcblx0ICAgIHVsb2coKS50aXBfdyhcInRyYWNrRG9tYWluIGVycm9yLCBwbGVhc2UgY2hlY2sgYXBsdXMtcmhvc3QtdiBzZXR0aW5nLCBjdXJyZW50IHZhbHVlIGlzOiBcIiArIHVybCB8fCAndW5kZWZpbmVkJyk7XG5cdCAgICB1bG9nKCkudGlwX3coXCJ3ZSBhY2NlcHQgdGhlc2UgdGhyZWUgcGF0dGVybnM6XCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiZWcxOiBodHRwczovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcImVnMjogaHR0cDovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcImVnMzogdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9IFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja09wZW5pZCA9IGZ1bmN0aW9uKG9kKSB7XG5cdCAgaWYgKCFvZCkge1xuXHQgICAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiUVQgbmVlZCBhbiB1bmlxdWUgaWQgYXMgUVQncyBkZXZpY2VpZCEhXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwic2V0dGluZyBleGFtcGxlczogYXBsdXNfcXVldWUucHVzaCh7YWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCBhcmd1bWVudHM6IFsnX2Fub255X2lkJywgeHh4eHh4XX0pO1wiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcInJlZmVycmVuY2UgZG9jdW1lbnQ6IGh0dHBzOi8vdC50Yi5jbi8xZFRIalRUUUYwVWpPVE5IaUNrYUNTXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoJyEnKSk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRleHBvcnRzLm1hcEV2ZW50U2FtcGxlUmF0ZXMgPSBmdW5jdGlvbihhcnIpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgZWFjaChhcnIsIGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgaWYgKGl0ZW0uZXZlbnRJZHMgJiYgaXRlbS5ldmVudElkcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGVhY2goaXRlbS5ldmVudElkcywgZnVuY3Rpb24oZWt2KXtcblx0ICAgICAgICByZXN1bHQucHVzaCh7XG5cdCAgICAgICAgICBldmVudElkOiBla3YsXG5cdCAgICAgICAgICBzYW1wbGluZ1JhdGU6IGl0ZW0uc2FtcGxpbmdSYXRlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBMT0dfUFJFRklYID0gJ1tBUExVU10gLS0gJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIFVMb2coKSB7XG5cdCAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG5cdCAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy52ID0gZnVuY3Rpb24gKCkgeyAgICAgIFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjb25zb2xlLmxvZyhcblx0ICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcblx0ICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuXHQgICAgICAgICk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG5cdCAgICAgIHZhciByZXMgPSBjaGFyO1xuXHQgICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG5cdCAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsT2JqZWN0LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdGV4cG9ydHMuaXNPYmplY3QgPSBmdW5jdGlvbihlKSB7XG5cdCAgcmV0dXJuIG51bGwgIT09IGUgJiYgXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuXHQgIGlmICh0aGlzLmlzT2JqZWN0KGUpKSB7XG5cdCAgICBmb3IgKHZhciByIGluIGUpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSkgXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTsgLy9GaXggb2JqLmNvbnRydWN0b3IgdHlwZUVycm9yIGNvbnN0cnVjdG9yIHVuZGVmaW5lZFxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdCAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuXHQgICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBpIGluIG9iaikge1xuXHQgICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbmV3b2JqO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9yZXN1bWVUaW1lID0gbnVsbDtcblx0ICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXHRcblx0ICBmdW5jdGlvbiBpbml0KCl7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICByZXN1bWU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgdmFyIG5ld1Nlc3Npb24gPSBmYWxzZTtcblx0XG5cdCAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvblxuXHQgICAgICAgICAgfHwgIV9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZVxuXHQgICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG5cdCAgICAgICAgICBuZXdTZXNzaW9uID0gdHJ1ZTtcblx0ICAgICAgICAgIF9jcmVhdGVOZXdTZXNzaW9uKG9wdGlvbnMpO1xuXHQgICAgICAgICAgLy8gdWxvZygpLmkoJ3N0YXJ0IG5ldyBzZXNzaW9uKCVzKTogJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIH0gXG5cdCAgICAgICAgLy8gZWxzZSB7XG5cdCAgICAgICAgLy8gICAvLyB1bG9nKCkuaSgnY29udGludWUgbGFzdCBzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIC8vIH1cblx0ICAgICAgICByZXR1cm4gbmV3U2Vzc2lvbjtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIC8vIOWcqG9uSGlkZeaWueazleaXtumXreWQiHNlc3Npb25cblx0ICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfZW5kU2Vzc2lvbigpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgLy8g6I635Y+W5b2T5YmN55qEc2Vzc2lvbklk77yM5rKh5pyJ5YiZ6L+U5Zue56m6XG5cdCAgICAgIGdldEN1cnJlbnRTZXNzaW9uSWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBfY3VycmVudFNlc3Npb247XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbG9uZUN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsb25lRGVlcChfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2dldFVtUGFyYW1zKHF1ZXJ5KSB7XG5cdCAgICB2YXIgYXBsdXNfcXVlcnkgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcblx0ICAgICAgYXBsdXNfcXVlcnlbaV0gPSBxdWVyeVtpXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBhcGx1c19xdWVyeTtcblx0ICB9XG5cdCAgXG5cdCAgLy8g5byA5aeL5LiA5Liq5pawc2Vzc2lvblxuXHQgIGZ1bmN0aW9uIF9jcmVhdGVOZXdTZXNzaW9uKG5ld09wdGlvbnMpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBwcmV2T3B0aW9ucyA9IChfY3VycmVudFNlc3Npb24gfHwge30pLm9wdGlvbnMgfHwge307XG5cdCAgICAgIFxuXHQgICAgICB2YXIgbGF1bmNoT3B0aW9ucyA9IHV0aWxzLmFzc2lnbih7fSwgX2dldFVtUGFyYW1zKG5ld09wdGlvbnMucXVlcnkpKTtcblx0ICAgICAgbGF1bmNoT3B0aW9ucy5wYXRoID0gbmV3T3B0aW9ucy5wYXRoIHx8IHByZXZPcHRpb25zLnBhdGg7XG5cdCAgICAgIGxhdW5jaE9wdGlvbnMuc2NlbmUgPSBuZXdPcHRpb25zLnNjZW5lXG5cdCAgICAgICAgPyBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgbmV3T3B0aW9ucy5zY2VuZVxuXHQgICAgICAgIDogcHJldk9wdGlvbnMuc2NlbmU7XG5cdCAgICAgIFxuXHQgICAgICB2YXIgcmVmZXJyZXJJbmZvID0gbmV3T3B0aW9ucy5yZWZlcnJlckluZm87XG5cdCAgICAgIGlmIChyZWZlcnJlckluZm8pIHtcblx0ICAgICAgICBsYXVuY2hPcHRpb25zLnJlZmVycmVyQXBwSWQgPSByZWZlcnJlckluZm8uYXBwSWQ7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIHVsb2coKS5pKCdjdXJyZW50IGxhdW5jaCBvcHRpb25zOiAnLGxhdW5jaE9wdGlvbnMpO1xuXHQgICAgICAvLyB1bG9nKCkuaSgnc2Vzc2lvbiBvcHRpb25zOiAnLCBsYXVuY2hPcHRpb25zKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgICAgICB2YXIgdHMgPSBEYXRlLm5vdygpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24gPSB7XG5cdCAgICAgICAgaWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyB0cyxcblx0ICAgICAgICBzdGFydF90aW1lOiB0cyxcblx0ICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuXHQgICAgICAgIHN0YXRlX3M6IDFcblx0ICAgICAgfTsgXG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIF9jdXJyZW50U2Vzc2lvblsnZ3AnXSA9IGdwO1xuXHQgICAgICB9IFxuXHRcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLmUoJ2dlbmVyYXRlIG5ldyBzZXNzaW9uIGZhaWxlZCwgZXJybXNnOiAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIOe7k+adn+W9k+WJjXNlc3Npb27vvIznlLHkuo4zMOenkuacuuWItu+8jOS4gOS4qnNlc3Npb27kvJrooqvnu5PmnZ/lpJrmrKFcblx0ICBmdW5jdGlvbiBfZW5kU2Vzc2lvbigpIHtcblx0ICAgIGlmIChfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgaWYgKHR5cGVvZiBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gIT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gMDtcblx0ICAgICAgfVxuXHQgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgLSBfcmVzdW1lVGltZTtcblx0ICAgICAgX2N1cnJlbnRTZXNzaW9uLnN0YXRlX3MgPSAwO1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5DVVJSRU5UX1NFU1NJT04sIF9jdXJyZW50U2Vzc2lvbik7XG5cdFxuXHQgICAgICB1bG9nKCkuaSgnc2Vzc2lvbiBlbmQgKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IGluaXQoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9uYW1lID0gJyc7XG5cdCAgdmFyIF9kYXRhID0gbnVsbDtcblx0ICB2YXIgX2xvYWRlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBDYWNoZSgpIHtcblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChjYikge1xuXHQgICAgICBpZiAoIV9kYXRhKSB7XG5cdCAgICAgICAgX25hbWUgPSAnYXBsdXNfY2FjaGVfJyArIHV0aWwuZ2V0QXBwS2V5KCkgfHwgJyc7XG5cdCAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZSxcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xuXHQgICAgICAgICAgICAgIF9kYXRhID0ganNvblV0aWwucGFyc2UocmVzLmRhdGEpIHx8IHt9O1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIF9kYXRhID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcblx0ICAgICAgICAgICAgICBrZXk6IF9uYW1lXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdnZXQgY2FjaGUgZmFpbGVkLCBlcnJtc2cgPSAnICsgZS5lcnJNc2cpO1xuXHQgICAgICAgICAgICBfZGF0YSA9IHt9O1xuXHQgICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAgICAgIGtleTogX25hbWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lLFxuXHQgICAgICAgICAgZGF0YToganNvblV0aWwuc3RyaW5nZnkoX2RhdGEpXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgICAgICBpZiAoX2RhdGEpIHtcblx0ICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7ICAgICAgXG5cdCAgICAgIHJldHVybiAoX2RhdGEgfHwge30pW2tleV07XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuXHQgICAgICAgIGRlbGV0ZSBfZGF0YVtrZXldO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZ2V0QWxsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RhdGE7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9kYXRhID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiAhIXRoaXMuZ2V0KGtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuaXNMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfbG9hZGVkO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmdldFN5bmMgPSBmdW5jdGlvbihrZXkpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gbWluaS5nZXRTdG9yYWdlU3luYyhrZXkpO1xuXHQgICAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTikge1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICB9ICAgXG5cdCAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnID8gIGpzb25VdGlsLnBhcnNlKHJlc3VsdCkgOiByZXN1bHQ7XG5cdCAgICAgIH0gY2F0Y2goZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5zZXRTeW5jID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICBtaW5pLnNldFN0b3JhZ2VTeW5jKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2goZSkge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IENhY2hlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdGV4cG9ydHMuc3RyaW5nZnkgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgaWYgKGRhdGEpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGpzb24pIHtcblx0ICBpZiAoanNvbikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5wYXJzZVRvQXJyYXkgPSBmdW5jdGlvbihqc29uKSB7XG5cdCAgaWYgKGpzb24pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gW107XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRmdW5jdGlvbiBnZXRSYW5kb21TdHIobGVuKSB7XG5cdCAgdmFyIHN0ciA9ICcnO1xuXHQgIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgTnVtYmVyKGxlbik7IGkrKykge1xuXHQgICAgdmFyIHBvcyA9IE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIChhcnIubGVuZ3RoIC0gMSkpO1xuXHQgICAgc3RyICs9IGFycltwb3NdO1xuXHQgIH1cblx0ICByZXR1cm4gc3RyO1xuXHR9O1xuXHRleHBvcnRzLmdldFJhbmRvbVN0ciA9IGdldFJhbmRvbVN0cjtcblx0XG5cdGV4cG9ydHMuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgc2VhcmNoVmFsKSB7XG5cdCAgaWYgKCFzdHIgfHwgIXNlYXJjaFZhbCB8fCBzZWFyY2hWYWwubGVuZ3RoID09PSAwIHx8IHNlYXJjaFZhbC5sZW5ndGggPiBzdHIubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiBzdHIuc3Vic3RyKDAsIHNlYXJjaFZhbC5sZW5ndGgpID09PSBzZWFyY2hWYWw7XG5cdH07XG5cdFxuXHRleHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uKHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCB8fCB0YXJnZXQgPT09IG51bGwpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuXHQgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG5cdCAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblx0ICAgIGlmIChzb3VyY2UpIHtcblx0ICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcblx0ICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwgbmV4dEtleSkpIHtcblx0ICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG91dHB1dDtcblx0fTtcblx0XG5cdC8vIDEuZWt25Lit5a2Y5Zyo6KeE5YiZ5LiN5ZCI5rOV5oOF5Ya177yM5Lii5byD5pW05p2h5LqL5Lu2XG5cdC8vIDIuZXZlbnRpZOmVv+W6puS4jeiDvei2hei/hzEyOOS4quWtl+esplxuXHQvLyAzLmtleemVv+W6puS4jeiDvei2hei/hzI1NuS4quWtl+esplxuXHQvLyA0Luavj+S4qmV2ZW505pC65bima2V55Liq5pWw5LiN6IO96LaF6L+HMTAw5LiqXG5cdGV4cG9ydHMuY2hlY2tFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SWQsIHByb3BlcnRpZXMpIHtcblx0ICB2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQgIHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdCAgdmFyIGpzb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdCAgaWYgKCEoZXZlbnRJZCAmJiB0eXBlb2YgZXZlbnRJZCA9PT0gJ3N0cmluZycpKSB7XG5cdCAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBldmVudElkIHx8IFwiJycgZXZlbnQgcHJvcGVydGllcyA9IFwiLCBqc29uVXRpbC5zdHJpbmdmeShwcm9wZXJ0aWVzLmN1c3ApKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIC8vIOS/neeVmeWFs+mUruWtl1xuXHQgIHZhciByZXNlcnZlV29yZHMgPSBbJ2lkJywgJ2R1J107XG5cdCAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cdFxuXHQgIHJlc2VydmVXb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uICh3b3JkKSB7XG5cdCAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcblx0ICBpZiAocmVzZXJ2ZVdvcmRNYXBbZXZlbnRJZF0pIHtcblx0ICAgIHVsb2coKS5lKCdldmVudElkIGhhcyBjb25mbGljdCB3aXRoIHJlc2VydmV3b3JkczogJyArIHJlc2VydmVXb3Jkcy5qb2luKCcsJykpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG5cdCAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gbGVuZ3RoIG9mIGV2ZW50IGlkIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyBwcm9wZXJ0aWVz55qE5ZCI5rOV57G75Z6L5Li6IHN0cmluZyB8IG9iamVjdChub3QgaW5jbHVkZSBBcnJheSlcblx0ICBpZiAocHJvcGVydGllc1xuXHQgICAgJiYgKHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KHByb3BlcnRpZXMpKVxuXHQgICAgJiYgdHlwZW9mIHByb3BlcnRpZXMgIT09ICdzdHJpbmcnKSB7XG5cdCAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHZhciBjb3VudCA9IDA7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuXHQgICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG5cdCAgICAgICAgaWYgKGtleS5sZW5ndGggPiBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZX0xFTkdUSCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKGNvdW50ID49IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKSB7XG5cdCAgICAgICAgICB1bG9nKCkuZSgnVGhlIG1heGltdW0gY291bnQgb2YgcHJvcGVydGllcyBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ3Byb3BlcnR5IGtleSBoYXMgY29uZmxpY3Qgd2l0aCByZXNlcnZlV29yZHM6ICcgKyByZXNlcnZlV29yZHMuam9pbignLCcpKTtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGNvdW50ICs9IDE7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdGV4cG9ydHMuZGVsZXRlSW5mbyA9IGZ1bmN0aW9uKGdva2V5LCBhcnIpIHtcblx0ICBlYWNoKGFyciwgZnVuY3Rpb24odikge1xuXHQgICAgZGVsZXRlIGdva2V5W3ZdO1xuXHQgIH0pO1xuXHQgIHJldHVybiBnb2tleTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRTdGFydElkID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5EYXRhVHlwZSA9IHtcblx0ICBIQUxGX1NFU1NJT046ICdoYWxmX3Nlc3Npb24nLFxuXHQgIENMT1NFX1NFU1NJT046ICdjbG9zZV9zZXNzaW9uJyxcblx0ICBFS1Y6ICdla3YnLFxuXHQgIEVOVEVSX1BBR0U6ICdlbnRlcl9wYWdlJyxcblx0ICBMRUFWRV9QQUdFOiAnbGVhdmVfcGFnZSdcblx0fTtcblx0XG5cdGV4cG9ydHMuQWNjZXNzVHlwZSA9IHtcblx0ICBNT0JJTEVfTkVUV09SS18yRzogJzJnJyxcblx0ICBNT0JJTEVfTkVUV09SS18zRzogJzNnJyxcblx0ICBNT0JJTEVfTkVUV09SS180RzogJzRnJyxcblx0ICBNT0JJTEVfTkVUV09SS19OT05FOiAnbm9uZSdcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcblx0ICB2YXIgX2luc3RhbmNlO1xuXHQgIHZhciBfc2Vzc2lvbklkO1xuXHQgIHZhciBfc3RhcnRJZDtcblx0ICB2YXIgX21lbW9yeUV2ZW50cyA9IFtdO1xuXHRcblx0ICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7Zcblx0ICB2YXIgX25vU2Vzc2lvbkV2ZW50cyA9IFtdO1xuXHRcblx0ICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG5cdCAgICBpZiAoX21lbW9yeUV2ZW50cy5sZW5ndGgpIHtcblx0ICAgICAgdmFyIGVrdnMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5FS1ZTKTtcblx0ICAgICAgXG5cdCAgICAgIC8vIOacrOWcsOacgOWkmuWtmOWCqCBFVkVOVF9NQVhfQ09VTlQg5p2h5pWw5o2u77yM44CM5aSa5L2Z5pWw5o2u44CN5pqC5pe25YWI5oqb5byDXG5cdCAgICAgIGlmIChfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZWt2cykgKyBfbWVtb3J5RXZlbnRzLmxlbmd0aCA8PSBhcGx1c1N0YXRpYy5FVkVOVF9NQVhfQ09VTlQpIHtcblx0ICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcblx0ICAgICAgICBcblx0ICAgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5FS1ZTLCBla3ZzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2J1aWxkRWt2cyhla3ZzLCBtZW1vcnlFdmVudHMpIHtcblx0ICAgIGVrdnMgPSBla3ZzIHx8IHt9O1xuXHQgICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG5cdCAgICBpZiAoaXNBcnJheShldmVudHMpICYmIGV2ZW50cy5sZW5ndGgpIHtcblx0ICAgICAgZWt2c1tfc2Vzc2lvbklkXSA9IGV2ZW50cy5jb25jYXQobWVtb3J5RXZlbnRzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVrdnNbX3Nlc3Npb25JZF0gPSBbXS5jb25jYXQobWVtb3J5RXZlbnRzKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZWt2cztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIF9nZXRDYWNoZUV2ZW50c0xlbmd0aChldmVudHNNYXApIHtcblx0ICAgIHZhciBsZW4gPSAwO1xuXHQgICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuXHQgICAgICBpZiAoaXNBcnJheShldmVudHNNYXBba2V5XSkpIHtcblx0ICAgICAgICBsZW4gKz0gZXZlbnRzTWFwW2tleV0ubGVuZ3RoO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbGVuO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaW5pdCgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBpZiAoIWV2ZW50KSByZXR1cm47XG5cdCAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcblx0ICAgICAgICAgIF9tZW1vcnlFdmVudHMudW5zaGlmdChldmVudCk7XG5cdCAgICAgICAgICBcblx0ICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcblx0ICAgICAgICAgICAgX2NhY2hlRXZlbnRzKF9zZXNzaW9uSWQpO1xuXHQgICAgICAgICAgICBfbWVtb3J5RXZlbnRzLmxlbmd0aCA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHVsb2coKS53KCdzZXNzaW9uIGlkIGlzIG51bGw6ICcsIF9zZXNzaW9uSWQpO1xuXHQgICAgICAgICAgXG5cdCAgICAgICAgICBfbm9TZXNzaW9uRXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHNldFNlc3Npb25JZDogZnVuY3Rpb24gKHNlc3Npb25JZCkge1xuXHQgICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG5cdCAgICAgICAgaWYgKGlzQXJyYXkoX25vU2Vzc2lvbkV2ZW50cykgJiYgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggJiYgX3Nlc3Npb25JZCkge1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfbm9TZXNzaW9uRXZlbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHNldFN0YXJ0SWQ6IGZ1bmN0aW9uKHN0YXJ0SWQpIHtcblx0ICAgICAgICBfc3RhcnRJZCA9IHN0YXJ0SWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRTdGFydElkOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gX3N0YXJ0SWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGVrdnMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5FS1ZTKTtcblx0ICAgICAgICBcblx0ICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuXHQgICAgICAgICAgZWt2cyA9IF9idWlsZEVrdnMoZWt2cywgX21lbW9yeUV2ZW50cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBla3ZzO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgLy8g6L+U5Zue5b2T5YmNZWt2c+WGheeahOaXpeW/l+adoeaVsFxuXHQgICAgICBnZXRFa3ZzTGVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGVrdnMgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5FS1ZTKSB8fCB7fTtcblx0ICAgICAgICB2YXIgZXZlbnRzID0gZWt2c1tfc2Vzc2lvbklkXSB8fCBbXTtcblx0ICAgICAgICB2YXIgbWVtb3J5RXZlbnRzTGVuID0gX21lbW9yeUV2ZW50cyA/IF9tZW1vcnlFdmVudHMubGVuZ3RoIDogMDtcblx0ICAgICAgICByZXR1cm4gZXZlbnRzLmxlbmd0aCArIG1lbW9yeUV2ZW50c0xlbjtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIGNsZWFyOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuRUtWUyk7XG5cdCAgICAgICAgX21lbW9yeUV2ZW50cy5sZW5ndGggPSAwO1xuXHQgICAgICAgIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIV9pbnN0YW5jZSkge1xuXHQgICAgICBfaW5zdGFuY2UgPSBpbml0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgYnVpbGRCb2R5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyk7XG5cdHZhciByZXF1ZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNCk7XG5cdHZhciBRdWV1ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzUpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0Ly8gdmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7IFxuXHQgIHZhciBfcmVxS2V5ID0gbnVsbDtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX2ZhaWxSZXF1ZXN0cyA9IFtdO1xuXHQgIC8vIOWOn+adpeeahGFwbHVzU3RhdGljLk1BWF9RVUVVRV9DT1VOVOmZkOWItuS6hl9xdWV1ZeeahOmVv+W6pu+8jOWcqOWunumZheWcuuaZr+S4reaXoOeUqFxuXHQgIHZhciBfcXVldWUgPSBuZXcgUXVldWUoKTtcblx0ICB2YXIgX2ZhaWxlZFF1ZXVlPSBuZXcgUXVldWUoKTtcblx0ICBmdW5jdGlvbiBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBkYXRhID0gYnVpbGRCb2R5KGRhdGFUeXBlKTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdCAgICAgIGRhdGEuaGVhZGVyID0gdXRpbERhc2guYXNzaWduKGRhdGEuaGVhZGVyLCBIZWFkZXIuZ2V0TmV0SW5mbyhjbGllbnQpKTtcblx0ICAgICAgZGF0YS5ub0NhY2hlID0gb3B0aW9ucy5ub0NhY2hlO1xuXHQgICAgICBfcXVldWUuZW5xdWV1ZShkYXRhKTtcblx0ICAgIH1cblx0ICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgICAgdmFyIGlzTlIgPSBrZXkgPT09IGFwbHVzU3RhdGljLlJFUVVFU1RTO1xuXHQgICAgdmFyIHNlbmRRdWV1ZSA9IGlzTlIgPyBfcXVldWUgOiBfZmFpbGVkUXVldWU7XG5cdCAgICAvLyDkvb/nlKhkZXF1ZXVl5Luj5pu/ZnJvbnTmlrnms5XvvIxkZXF1ZXVl5bGe5LqO5Ye66Zif77yM6YG/5YWN5LqG6Zif5YiX5pyq5pu05paw5bim5p2l55qE6YeN5aSN5LiK5oqlXG5cdCAgICB2YXIgZGF0YSA9IHNlbmRRdWV1ZS5kZXF1ZXVlKCk7XG5cdCAgICB2YXIgc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gX3F1ZXVlLmRlcXVldWUoKTtcblx0ICAgICAgX3NlbmRRdWV1ZShrZXksIGNvbXBsZXRlZENhbGxiYWNrKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGZhaWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIOWPkemAgeWksei0peaUvuWFpeWksei0pemYn+WIl++8jOetieW+heS4i+S4gOasoeWPkemAgeaXtuaculxuXHQgICAgICAvLyDlm6DkuLpkYXRh5L2/55So5Ye66Zif5YiX5pa55rOV77yM5omA5LulX3F1ZXVl5bey5pu05paw77yM6YCa6L+HaXRlbeWPluWIsOeahGRhdGHkuI3mmK/lvZPliY3lj5HpgIHnmoRkYXRhO1xuXHQgICAgICBkYXRhICYmICghZGF0YS5ub0NhY2hlKSAmJiBfZmFpbFJlcXVlc3RzLnB1c2goZGF0YSk7XG5cdCAgICAgIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICB9O1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgcmVxdWVzdChkYXRhLCBzdWNjZXNzLCBmYWlsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIF9wcm9jZXNzRmFpbFJlcXVlc3RzKCk7XG5cdCAgICAgIGNvbXBsZXRlZENhbGxiYWNrKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpIHtcblx0ICAgIC8vIOWPkemAgeWujOaIkOWQjuWwhuWksei0peeahOivt+axgua3u+WKoOWIsOWksei0pemYn+WIl+S4rVxuXHQgICAgX2ZhaWxSZXF1ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgIF9mYWlsZWRRdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuXHQgICAgfSk7XG5cdCAgICBfZmFpbFJlcXVlc3RzLmxlbmd0aCA9IDA7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfc3RhcnRTZW5kKGtleSwgY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICAgIC8vIOWcqHRhcm8xeOOAgXRhcm8yeOahhuaetuS4re+8jOW/hemhu+mAmui/h+WPmOmHj+WjsOaYjueahOaWueW8j+S8oOWFpe+8jOWQpuWImV9zZW5kUXVldWXpmLvloZ7vvIzlm57osIPml6Dms5Xph43nva5fcnVubmluZ++8jOWvvOiHtOaXpeW/l+WPkemAgeS4jeWHuu+8m+WOn+WboOS4jeaYjlxuXHQgICAgdmFyIGNiID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpc0Z1bmN0aW9uKGNvbXBsZXRlZENhbGxiYWNrKSAmJiBjb21wbGV0ZWRDYWxsYmFjaygpO1xuXHQgICAgfTtcblx0ICAgIF9zZW5kUXVldWUoa2V5LCBjYik7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0UXVldWUoKSB7XG5cdCAgICB0aGlzLnNlbmQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNvbXBsZXRlZENhbGxiYWNrKSB7XG5cdCAgICAgIGlmIChkYXRhVHlwZSkge1xuXHQgICAgICAgIHRoaXMuYWRkKGRhdGFUeXBlLCBvcHRpb25zLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfc3RhcnRTZW5kKF9yZXFLZXksIGNvbXBsZXRlZENhbGxiYWNrKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBfc3RhcnRTZW5kKF9yZXFLZXksIGNvbXBsZXRlZENhbGxiYWNrKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICBpZiAoIXV0aWwuY2hlY2tPcGVuaWQoYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgX2VucXVldWVSZXF1ZXN0KGRhdGFUeXBlLCBvcHRpb25zLCBjYik7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGlzTlIgPSBfcmVxS2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcblx0ICAgICAgdmFyIGxvYWRRdWV1ZSA9IGlzTlIgPyBfcXVldWUgOiBfZmFpbGVkUXVldWU7XG5cdCAgICAgIHZhciBpdGVtcyA9IGNhY2hlKCkuZ2V0KF9yZXFLZXkpO1xuXHQgICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoKSB7XG5cdCAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgbG9hZFF1ZXVlLmVucXVldWUoaXRlbSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2FjaGUoKS5yZW1vdmUoX3JlcUtleSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIOW9k+WJjeWPquacieWksei0pemYn+WIl+iwg+eUqHNhdmXmlrnms5Vcblx0ICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGNhY2hlZCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkZBSUxFRF9SRVFVRVNUUykgfHwgW107XG5cdCAgICAgIHZhciBuZXdDYWNoZSA9IGNhY2hlZC5jb25jYXQoX2ZhaWxlZFF1ZXVlLml0ZW1zKCkpO1xuXHQgICAgICBpZihuZXdDYWNoZSAmJiBuZXdDYWNoZS5sZW5ndGgpIHtcblx0ICAgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMsIG5ld0NhY2hlKTtcblx0ICAgICAgfSBcblx0ICAgICAgX2ZhaWxlZFF1ZXVlLmNsZWFyKCk7IC8vIOS4gOWumuimgeWFiOS/neWtmOWGjea4heepuu+8jOWQpuWImeS/neWtmOeahOawuOi/nOaYr+epuuaVsOaNrlxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAocmVxS2V5KSB7XG5cdCAgICBfcmVxS2V5ID0gcmVxS2V5O1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gbmV3IFJlcXVlc3RRdWV1ZSgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRleHBvcnRzLmdldE5ldEluZm8gPSBmdW5jdGlvbihjbGllbnQpe1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0ICB2YXIgYWNjZXNzID0gY2xpZW50Lm5ldHdvcmtUeXBlO1xuXHQgIGlmIChhY2Nlc3MgPT09ICdub25lJykge1xuXHQgICAgYWNjZXNzID0gJ3Vua25vd24nO1xuXHQgIH1cblx0XG5cdCAgYWNjZXNzID0gYWNjZXNzID8gYWNjZXNzLnRvTG93ZXJDYXNlKCkgOiAnJztcblx0ICBzd2l0Y2ggKGFjY2Vzcykge1xuXHQgIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS180Rzpcblx0ICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdMVEUnO1xuXHQgICAgcmVzdWx0LmFjY2VzcyA9ICc0Ryc7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfM0c6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnQ0RNQSc7XG5cdCAgICByZXN1bHQuYWNjZXNzID0gJzNHJztcblx0ICAgIGJyZWFrO1xuXHQgIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS18yRzpcblx0ICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdHUlBTJztcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSAnMkcnO1xuXHQgICAgYnJlYWs7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSBhY2Nlc3M7XG5cdCAgICBkZWxldGUgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlO1xuXHQgICAgYnJlYWs7XG5cdCAgfTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0SGVhZGVySW5mbyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBoZWFkZXIgPSB7fTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdFxuXHQgIHZhciBnbG9iYWxDb25maWcgPSBhcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdFxuXHQgIHZhciBkYXRhID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuSU1QUklOVCk7XG5cdCAgaWYgKGRhdGEpIHtcblx0ICAgIGhlYWRlci5pbXByaW50ID0gZGF0YTtcblx0ICB9XG5cdFxuXHQgIGhlYWRlci5kZXZpY2VfdHlwZSA9ICdQaG9uZSc7XG5cdCAgaGVhZGVyLnNka192ZXJzaW9uID0gZ2xvYmFsQ29uZmlnLmx2ZXI7XG5cdCAgaGVhZGVyLmFwcGtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG5cdCAgaGVhZGVyLmRldmljZV9pbmZvID0gJyc7XG5cdCAgaGVhZGVyLmFwcGlkID0gY2xpZW50LmFwcElkO1xuXHQgIGhlYWRlci5hcHBfZW52ID0gY2xpZW50LmFwcEVudjtcblx0ICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwVmVyc2lvbicpIHx8ICdkZXZ0b29scyc7XG5cdFxuXHQgIHZhciBnbG9iYWxfYXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycpO1xuXHQgIGlmIChnbG9iYWxfYXJncyAmJiBnbG9iYWxfYXJncy5kZWJ1Z0lkKSB7XG5cdCAgICBoZWFkZXIubWluaWFwcERlYnVnSWQgPSBnbG9iYWxfYXJncy5kZWJ1Z0lkO1xuXHQgIH0gZWxzZSBpZiAoY2FjaGUoKS5nZXQoJ21pbmlhcHBEZWJ1Z0lkJykpIHtcblx0ICAgIGhlYWRlci5taW5pYXBwRGVidWdJZCA9IGNhY2hlKCkuZ2V0KCdtaW5pYXBwRGVidWdJZCcpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG5cdCAgc3lzdGVtSW5mby5zYWZlQXJlYSA9IHN5c3RlbUluZm8uc2FmZUFyZWEgfHwge307XG5cdFxuXHQgIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG5cdCAgdmFyIHBsYXRmb3JtID0gc3lzdGVtSW5mby5wbGF0Zm9ybSB8fCAnJztcblx0ICB2YXIgYnJhbmQgPSBzeXN0ZW1JbmZvLmJyYW5kIHx8ICcnO1xuXHQgIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXHRcblx0ICBoZWFkZXIuc2RrX3R5cGUgPSBtaW5pLmdldFNka1R5cGUoKTtcblx0ICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHQgIGhlYWRlci5wbGF0Zm9ybV9zZGtfdmVyc2lvbiA9IHN5c3RlbUluZm8uU0RLVmVyc2lvbjtcblx0ICBoZWFkZXIucGxhdGZvcm1fdmVyc2lvbiA9IHN5c3RlbUluZm8ucGxhdGZvcm1WZXJzaW9uO1xuXHQgICAgXG5cdCAgdmFyIHcgPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuV2lkdGggKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuXHQgIHZhciBoID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbkhlaWdodCAqIHN5c3RlbUluZm8ucGl4ZWxSYXRpbyk7XG5cdCAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cdFxuXHQgIGhlYWRlci5waXhlbF9yYXRpbyA9IHN5c3RlbUluZm8ucGl4ZWxSYXRpbztcblx0ICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcblx0ICBoZWFkZXIuZm9udF9zaXplX3NldHRpbmcgPSBzeXN0ZW1JbmZvLmZvbnRTaXplU2V0dGluZztcblx0ICBoZWFkZXIuZGV2aWNlX21vZGVsID0gbW9kZWw7IC8vIOiuvuWkh+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG5cdCAgLy8gX2hlYWRlci5jaGFubmVsID0gYnJhbmRMOyAvLyDov5nph4zmuKDpgZPmmoLml7blhYjnlKgg55Sf5Lqn5ZWG55qE5ZCN5a2XXG5cdCAgaGVhZGVyLmRldmljZV9tYW51ZmFjdHVyZXIgPSBicmFuZEw7XG5cdCAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuXHQgIGhlYWRlci5kZXZpY2VfbmFtZSA9IG1vZGVsOyAvLyDlhoXpg6jkuqflk4Hku6Plj7dcblx0ICBoZWFkZXIub3NfdmVyc2lvbiA9IHN5c3RlbUluZm8ub3NfdmVyc2lvbjsgLy8gb3PniYjmnKzlj7dcblx0ICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXHRcblx0ICB2YXIgbmV0SW5mbyA9IHRoaXMuZ2V0TmV0SW5mbyhjbGllbnQpO1xuXHQgIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2Vzcztcblx0ICBpZiAobmV0SW5mby5hY2Nlc3Nfc3VidHlwZSkge1xuXHQgICAgaGVhZGVyLmFjY2Vzc19zdWJ0eXBlID0gbmV0SW5mby5hY2Nlc3Nfc3VidHlwZTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBoZWFkZXI7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgc2Vzc2lvbk1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGF0YVR5cGUpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdCAgc3dpdGNoIChkYXRhVHlwZSkge1xuXHQgIGNhc2UgdXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OOlxuXHQgICAgZGF0YSA9IF9idWlsZEhhbGZTZXNzaW9uKCk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkRhdGFUeXBlLkNMT1NFX1NFU1NJT046XG5cdCAgICBkYXRhID0gX2J1aWxkQ2xvc2VTZXNzaW9uKCk7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkRhdGFUeXBlLkVLVjpcblx0ICAgIGRhdGEgPSBfYnVpbGRFa3YoKTtcblx0ICAgIGJyZWFrO1xuXHQgIGRlZmF1bHQ6XG5cdCAgICBicmVhaztcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRIYWxmU2Vzc2lvbigpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdCAgdmFyIHNlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLmNsb25lQ3VycmVudFNlc3Npb24oKTtcblx0ICBpZiAoc2Vzc2lvbikge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgaGVhZGVyOiB7XG5cdCAgICAgICAgc3Q6ICcxJ1xuXHQgICAgICB9LFxuXHQgICAgICBhbmFseXRpY3M6IHtcblx0ICAgICAgICBzZXNzaW9uczogW3Nlc3Npb25dXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9idWlsZENsb3NlU2Vzc2lvbigpIHtcblx0ICB2YXIgZGF0YSA9IG51bGw7XG5cdFxuXHQgIHZhciBhbmFseXRpY3MgPSB7fTtcblx0XG5cdCAgdmFyIHNlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLmNsb25lQ3VycmVudFNlc3Npb24oKTtcblx0ICBpZiAoc2Vzc2lvbikge1xuXHQgICAgYW5hbHl0aWNzLnNlc3Npb25zID0gW3Nlc3Npb25dO1xuXHQgIH1cblx0XG5cdCAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG5cdCAgaWYgKGVrdnMpIHtcblx0ICAgIGFuYWx5dGljcy5la3ZzID0gY2xvbmVEZWVwKGVrdnMpO1xuXHQgICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcblx0ICB9XG5cdFxuXHQgIGlmIChhbmFseXRpY3Muc2Vzc2lvbnMgfHwgYW5hbHl0aWNzLmVrdnMpIHtcblx0ICAgIGRhdGEgPSB7XG5cdCAgICAgIGFuYWx5dGljczogYW5hbHl0aWNzXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRFa3YoKSB7XG5cdCAgdmFyIGRhdGEgPSBudWxsO1xuXHRcblx0ICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcblx0ICBpZiAoZWt2cykge1xuXHQgICAgZGF0YSA9IHtcblx0ICAgICAgYW5hbHl0aWNzOiB7XG5cdCAgICAgICAgZWt2czogY2xvbmVEZWVwKGVrdnMpXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBldmVudE1hbmFnZXIoKS5jbGVhcigpO1xuXHQgIH1cblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMik7XG5cdHZhciBtYW5nbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI1KTtcblx0dmFyIGltcHJpbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbFBlcmZvcm1hbmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdHZhciBjYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHR2YXIgdXRpbFJlbW90ZUNmZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgZXZlbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciBhcGx1c1V0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdGZ1bmN0aW9uIGdldFVybCgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIHJob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0XG5cdCAgaWYgKCFhcGx1c1V0aWwuY2hlY2tEb21haW4ocmhvc3QpKSB7XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfVxuXHRcblx0ICB2YXIgbWluaUxvZyA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG5cdCAgaWYgKCFtaW5pTG9nKSB7XG5cdCAgICB1bG9nKCkudGlwX3coJ2N1cnJlbnQgbWluaWFwcCBmcmFtZXdvcmsgaXMgbm90IHN1cHBvcnRlZCEhJyk7XG5cdCAgICByZXR1cm4gJyc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblx0ICB9ICBcblx0ICByZXR1cm4gYXBsdXNVdGlsLmZpeERvbWFpbihyaG9zdCkgKyBtaW5pTG9nO1xuXHR9O1xuXHRcblx0dmFyIE1BWF9SRVFVRVNUX1RJTUVPVVQgPSA1MDAwO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbENhbGxiYWNrLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICB2YXIgcF9oZWFkZXIgPSBIZWFkZXIuZ2V0SGVhZGVySW5mbygpO1xuXHQgIHRyeSB7ICBcblx0ICAgIGlmIChtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAnbXknIHx8IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgPT09ICd0YW9iYW8nKSB7XG5cdCAgICAgIHBfaGVhZGVyWydpZF90eXBlJ10gPSAnYWxpcGF5X2lkJztcblx0ICAgICAgcF9oZWFkZXJbJ2lkX3RyYWNraW5nJ10gPSB7XG5cdCAgICAgICAgYWxpcGF5X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgJycsXG5cdCAgICAgICAgdW5pb25pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0RFVl9JRCkgfHwgY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuX0RFVl9JRCkgfHwgJycsXG5cdCAgICAgICAgdXNlcklkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCkgfHwgJycsXG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ29wZW5pZCc7XG5cdCAgICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuXHQgICAgICAgIG9wZW5pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuXHQgICAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9ERVZfSUQpIHx8IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLl9ERVZfSUQpIHx8ICcnLFxuXHQgICAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIFxuXHQgICAgaWYgKGltcHJpbnRNYW5hZ2VyLmdldCgpKSB7XG5cdCAgICAgIHBfaGVhZGVyW2FwbHVzU3RhdGljLklNUFJJTlRdID0gaW1wcmludE1hbmFnZXIuZ2V0KCk7XG5cdCAgICB9XG5cdCAgXG5cdCAgICBpZiAoZGF0YS5hbmFseXRpY3MpIHtcblx0ICAgICAgdmFyIHVzZXJJZCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKTtcblx0ICAgICAgdmFyIHVzZXJfbmljayA9IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJyk7XG5cdCAgICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuXHQgICAgICAgIHB1aWQ6IHVzZXJJZCxcblx0ICAgICAgICBwcm92aWRlcjogdXNlcl9uaWNrXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgXG5cdCAgICBkYXRhLmhlYWRlciA9IHV0aWxzLmFzc2lnbihwX2hlYWRlciwgZGF0YS5oZWFkZXIsIHtcblx0ICAgICAgdHM6IERhdGUubm93KCksXG5cdCAgICAgIHRyYWNlSWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyBEYXRlLm5vdygpICsgdXRpbHMuZ2V0UmFuZG9tU3RyKDkpLFxuXHQgICAgICBzdGFydF9pZDogZXZlbnRNYW5hZ2VyKCkuZ2V0U3RhcnRJZCgpXG5cdCAgICB9KTtcblx0ICAgIHZhciBtYW5nbGVEYXRhID0gbWFuZ2xlKGRhdGEpO1xuXHQgICAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG5cdCAgICB2YXIgdXJsID0gZ2V0VXJsKCk7XG5cdCAgICB2YXIgY29uZmlnID0ge1xuXHQgICAgICB1cmw6IHVybCxcblx0ICAgICAgbWV0aG9kOiAnUE9TVCcsXG5cdCAgICAgIGRhdGE6IGJhc2U2NC5lbmNvZGUocmVxdWVzdERhdGEpLFxuXHQgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuXHQgICAgICAgIHZhciBzdGF0dXNDb2RlID0gcmVzcC5jb2RlIHx8IHJlc3Auc3RhdHVzIHx8IHJlc3Auc3RhdHVzQ29kZTtcblx0ICAgICAgICBpZiAoc3RhdHVzQ29kZSA9PT0gMjAwIHx8IHN0YXR1c0NvZGUgPT09IDQxMykge1xuXHQgICAgICAgICAgdWxvZygpLmkoJ2RhdGEgc2VuZCBzdWNjZXNzOicsIGRhdGEsIHJlcXVlc3REYXRhKTtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIGlmIChyZXNwLnByb2ZpbGUpIHtcblx0ICAgICAgICAgICAgICB1dGlsUGVyZm9ybWFuY2UucHVzaCh7ZW5kOiByZXNwLnByb2ZpbGUucmVzcG9uc2VFbmQsIHN0YXJ0OiByZXNwLnByb2ZpbGUucmVxdWVzdFN0YXJ0fSk7XG5cdCAgICAgICAgICAgICAgdXRpbFBlcmZvcm1hbmNlLm5lZWRTZW5kUGVyZm9ybWFuY2VFdmVudCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICAgICAgdWxvZygpLncoJ2N1cnJlbnQgbWluaWFwcCBub3Qgc3VwcG9ydCBwcm9maWxlIEFQSScpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy/lnKjmraTlpITlsIZpbXByaW505YaF5a655Yqg5YWl5Yiw5pys5Zyw57yT5a2Y5LitXG5cdCAgICAgICAgICBzYXZlSW1wcmludCgocmVzcC5kYXRhIHx8IHt9KSk7XG5cdCAgICAgICAgICBpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykgJiYgc3VjY2Vzc0NhbGxiYWNrKHJlc3ApO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1bG9nKCkudygnZGF0YSBzZW5kIGZhaWxlZDonLCByZXF1ZXN0RGF0YSk7XG5cdCAgICAgICAgICBpc0Z1bmN0aW9uKGZhaWxDYWxsYmFjaykgJiYgZmFpbENhbGxiYWNrKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHQgICAgICBmYWlsOiBmdW5jdGlvbiAoaXNUaW1lb3V0KSB7XG5cdCAgICAgICAgdWxvZygpLncoIHRydWUgPyAndGltZW91dDogJyA6ICdmYWlsZWQ6ICcsIHJlcXVlc3REYXRhKTtcblx0ICAgICAgICBpc0Z1bmN0aW9uKGZhaWxDYWxsYmFjaykgJiYgZmFpbENhbGxiYWNrKCk7XG5cdCAgICAgIH0sXG5cdCAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaXNGdW5jdGlvbihjb21wbGV0ZWRDYWxsYmFjaykgJiYgY29tcGxldGVkQ2FsbGJhY2soKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHNka1JlcXVlc3QodXRpbHMuYXNzaWduKGNvbmZpZywgYnVpbGRIdHRwSGVhZGVyKCkpKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdFxuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNka1JlcXVlc3Qob3B0aW9ucykge1xuXHQgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICB2YXIgc3JjU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2Vzcztcblx0ICB2YXIgc3JjRmFpbCA9IG9wdGlvbnMuZmFpbDtcblx0ICB2YXIgaXNUaW1lb3V0ID0gZmFsc2U7XG5cdCAgdmFyIHN0ID0gbnVsbDtcblx0XG5cdCAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24gKHJlc3ApIHtcblx0ICAgIGlmICghaXNUaW1lb3V0KSB7XG5cdCAgICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG5cdCAgICAgIGlzRnVuY3Rpb24oc3JjU3VjY2VzcykgJiYgc3JjU3VjY2VzcyhyZXNwKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBvcHRpb25zLmZhaWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoIWlzVGltZW91dCkge1xuXHQgICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoZmFsc2UpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgdHJ5IHtcblx0ICAgIGN0eC5yZXF1ZXN0KG9wdGlvbnMpO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZGQgJiYgZGQuaHR0cFJlcXVlc3Qob3B0aW9ucyk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHVsb2coKS53KCdyZXF1ZXN0IHNlbmQgZmFpbGVkLCBlcnIgbXNnOiAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHN0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgaXNUaW1lb3V0ID0gdHJ1ZTtcblx0XG5cdCAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoaXNUaW1lb3V0KTtcblx0ICB9LCBvcHRpb25zLnRpbWVvdXQgfHwgTUFYX1JFUVVFU1RfVElNRU9VVCk7XG5cdH1cblx0XG5cdC8vIOacjeWKoeerr+S4i+WPkeWPkemAgeetlueVpVxuXHRmdW5jdGlvbiBzYXZlSW1wcmludChpbXByaW50KSB7XG5cdCAgdmFyIGxvY2FsSW1wdiA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19JTVBSSU5UX1ZFUlNJT04pO1xuXHQgIGlmIChpbXByaW50KSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGlmIChpbXByaW50LmltcHJpbnRWZXJzaW9uICYmIGltcHJpbnQuaW1wcmludFZlcnNpb24gIT09IGxvY2FsSW1wdikge1xuXHQgICAgICB2YXIgcmVtb3RlSW1wdiA9IGltcHJpbnQuaW1wcmludFZlcnNpb247XG5cdCAgICAgIGNhY2hlKCkuc2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19JTVBSSU5UX1ZFUlNJT04sIHJlbW90ZUltcHYpO1xuXHQgICAgICB2YXIgdHJhY2tEb21haW4gPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXHRcblx0ICAgICAgdmFyIHVybCA9IGFwbHVzVXRpbC5maXhEb21haW4odHJhY2tEb21haW4pICArIHJlbW90ZUltcHY7XG5cdCAgICAgIGFwbHVzLnJlcXVlc3RSZW1vdGVDb25maWcoXG5cdCAgICAgICAgdXJsLCBcblx0ICAgICAgICBmdW5jdGlvbihyZXNwKXtcblx0ICAgICAgICAgIGlmIChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEpIHtcblx0ICAgICAgICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcocmVzcC5kYXRhLmRhdGEpO1xuXHQgICAgICAgICAgICBjYWNoZSgpLnNldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRywgcmVzcC5kYXRhLmRhdGEpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIFxuXHQgICAgICAgIGZ1bmN0aW9uKGVycil7XG5cdCAgICAgICAgICB1bG9nKCkudygncmVtb3RlIGNvbmZpZ3VyYXRpb24gcmVxdWVzdCBmYWlsZWQsIGVycm1zZzonLCBlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBsc1JlbW90ZUNmZyA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKTtcblx0ICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcobHNSZW1vdGVDZmcpO1xuXHQgICAgfVxuXHQgIH0gXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcblx0ICB2YXIgaGVhZGVyVHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpICsgJy9qc29uJztcblx0ICB2YXIgaXNNeSA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBpZiAobXkpIHtcblx0ICAgICAgaXNNeSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKXt9O1xuXHRcblx0ICBpZiAoaXNNeSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyczoge1xuXHQgICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuXHQgICAgICAgICdNc2ctVHlwZSc6IGhlYWRlclR5cGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgaGVhZGVyOiB7XG5cdCAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IGhlYWRlclR5cGUsXG5cdCAgICAgICAgJ01zZy1UeXBlJzogaGVhZGVyVHlwZVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0XG5cblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdHZhciBhbmFseXRpY3NNYXAgPSB7XG5cdCAgc2Vzc2lvbnM6ICdzbicsXG5cdCAgLy8gcGFnZXM6ICdwJyxcblx0ICAvLyBzaGFyZXM6ICdzcicsXG5cdCAgZWt2czogJ2UnLFxuXHQgIGFjdGl2ZV91c2VyOiAnYWN0aXZlX3VzZXInXG5cdH07XG5cdFxuXHR2YXIgaGVhZGVyTWFwID0ge1xuXHQgIHNka190eXBlOiAnc2R0Jyxcblx0ICBhY2Nlc3M6ICdhYycsXG5cdCAgYWNjZXNzX3N1YnR5cGU6ICdhY3MnLFxuXHQgIGRldmljZV9tb2RlbDogJ2RtJyxcblx0ICBsYW5ndWFnZTogJ2xhbmcnLFxuXHQgIGRldmljZV90eXBlOiAnZHQnLFxuXHQgIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuXHQgIGRldmljZV9uYW1lOiAnZG4nLFxuXHQgIHBsYXRmb3JtX3ZlcnNpb246ICdwdicsXG5cdCAgaWRfdHlwZTogJ2l0Jyxcblx0ICBmb250X3NpemVfc2V0dGluZzogJ2ZzcycsXG5cdCAgb3NfdmVyc2lvbjogJ292Jyxcblx0ICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcblx0ICBwbGF0Zm9ybV9zZGtfdmVyc2lvbjogJ3BzdicsXG5cdCAgZGV2aWNlX2JyYW5kOiAnZGInLFxuXHQgIGFwcGtleTogJ2FrJyxcblx0ICBfaWQ6ICdpZCcsXG5cdCAgaWRfdHJhY2tpbmc6ICdpdHInLFxuXHQgIGltcHJpbnQ6ICdpbXAnLFxuXHQgIHNka192ZXJzaW9uOiAnc3YnLFxuXHQgIHJlc29sdXRpb246ICdybCcsXG5cdCAgdGVzdFRva2VuOiAndHRuJyxcblx0ICBtaW5pYXBwRGVidWdJZDogJ2RrJyxcblx0ICBwaXhlbF9yYXRpbzogJ3ByJyxcblx0fTtcblx0XG5cdHZhciBpZE1hcCA9IHtcblx0ICB1dWlkOiAndWQnLFxuXHQgIHVuaW9uaWQ6ICd1bmQnLFxuXHQgIG9wZW5pZDogJ29kJyxcblx0ICBhbm9ueW1vdXNpZDogJ25kJyxcblx0ICBhbGlwYXlfaWQ6ICdhZCcsXG5cdCAgZGV2aWNlX2lkOiAnZGQnLFxuXHQgIHVzZXJpZDogJ3B1aWQnXG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgaDogX21hbmdsZUhlYWRlcihkYXRhLmhlYWRlciwgaGVhZGVyTWFwKSxcblx0ICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcblx0ICB9O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX21hbmdsZUhlYWRlcihoZWFkZXIsIG1hcCkge1xuXHQgIHZhciByZXN1bHQgPSBfbWFuZ2xlT2JqKGhlYWRlciwgbWFwKTtcblx0XG5cdCAgaWYgKGhlYWRlciAmJiBoZWFkZXIuaWRfdHJhY2tpbmcpIHtcblx0ICAgIHJlc3VsdFttYXAuaWRfdHJhY2tpbmcgfHwgJ2lkX3RyYWNraW5nJ10gPSBfbWFuZ2xlT2JqKGhlYWRlci5pZF90cmFja2luZywgaWRNYXApO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVPYmoob2JqLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgXG5cdCAgZm9yICh2YXIga2V5IGluIG9iaikge1xuXHQgICAgaWYgKG1hcFtrZXldKSB7XG5cdCAgICAgIHJlc3VsdFttYXBba2V5XV0gPSBvYmpba2V5XTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX21hbmdsZUFuYWx5dGljcyhhbmFseXRpY3MsIG1hcCkge1xuXHQgIHZhciByZXN1bHQgPSB7fTtcblx0XG5cdCAgaWYgKGFuYWx5dGljcykge1xuXHQgICAgZm9yICh2YXIgcHJvcCBpbiBhbmFseXRpY3MpIHtcblx0ICAgICAgaWYgKGFuYWx5dGljc1twcm9wXSkge1xuXHQgICAgICAgIHJlc3VsdFttYXBbcHJvcF1dID0gYW5hbHl0aWNzW3Byb3BdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cbi8qKiovIH0pLFxuLyogMjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIGpzb25VdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG5cdHZhciBiYXNlNjQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI3KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdGZ1bmN0aW9uIEltcHJpbnRNYW5hZ2VyKCkge1xuXHQgIHZhciBfaW1wcmludCA9ICcnO1xuXHQgIHZhciB0ID0gdGhpcztcblx0ICAvLyB2YXIgaW1wcmludFZlcnNpb24gPSBcImltcHJpbnRWZXJzaW9uXCI7XG5cdCAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoaW1wcmludCkge1xuXHQgICAgaWYgKHR5cGVvZiBpbXByaW50ID09PSAnc3RyaW5nJykge1xuXHQgICAgICBfaW1wcmludCA9IGltcHJpbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBfaW1wcmludCA9IGJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoaW1wcmludCkpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pbXByaW50O1xuXHQgIH07XG5cdCAgdGhpcy5nZXRJbXBPYmogPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4ganNvblV0aWwucGFyc2UoYmFzZTY0LmRlY29kZShfaW1wcmludCkpO1xuXHQgIH07XG5cdCAgdGhpcy5nZXRJdGVtID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgdmFyIGltcG9iaiA9IHQuZ2V0SW1wT2JqKCk7XG5cdCAgICByZXR1cm4gaW1wb2JqID8gaW1wb2JqW25hbWVdIHx8IFwiXCIgOiBcIlwiO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIF9pbXByaW50ID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuSU1QUklOVCk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKF9pbXByaW50KSB7XG5cdCAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLklNUFJJTlQsIF9pbXByaW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdHZhciBpbXByaW50TWFuYWdlciA9IG5ldyBJbXByaW50TWFuYWdlcigpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbXByaW50TWFuYWdlcjtcblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBiNjRjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcblx0dmFyIGI2NHRhYiA9IChmdW5jdGlvbiAoYmluKSB7XG5cdCAgdmFyIHQgPSB7fTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGJpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHRbYmluLmNoYXJBdChpKV0gPSBpO1xuXHQgIHJldHVybiB0O1xuXHR9KShiNjRjaGFycyk7XG5cdHZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xuXHR2YXIgY2JfdXRvYiA9IGZ1bmN0aW9uIChjKSB7XG5cdCAgdmFyIGNjO1xuXHQgIGlmIChjLmxlbmd0aCA8IDIpIHtcblx0ICAgIGNjID0gYy5jaGFyQ29kZUF0KDApO1xuXHQgICAgcmV0dXJuIGNjIDwgMTI4ID8gYyA6IGNjIDwgMjA0OCA/IGZyb21DaGFyQ29kZSgxOTIgfCBjYyA+Pj4gNikgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2MykgOiBmcm9tQ2hhckNvZGUoMjI0IHwgY2MgPj4+IDEyICYgMTUpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBjYyA9IDY1NTM2ICsgKGMuY2hhckNvZGVBdCgwKSAtIDU1Mjk2KSAqIDEwMjQgKyAoYy5jaGFyQ29kZUF0KDEpIC0gNTYzMjApO1xuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgyNDAgfCBjYyA+Pj4gMTggJiA3KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gMTIgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG5cdCAgfVxuXHR9O1xuXHR2YXIgcmVfdXRvYiA9IC9bXFx1RDgwMC1cXHVEQkZGXVtcXHVEQzAwLVxcdURGRkZGXXxbXlxceDAwLVxceDdGXS9nO1xuXHR2YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIHUucmVwbGFjZShyZV91dG9iLCBjYl91dG9iKTtcblx0fTtcblx0dmFyIGNiX2VuY29kZSA9IGZ1bmN0aW9uIChjY2MpIHtcblx0ICB2YXIgcGFkbGVuID0gWzAsIDIsIDFdW2NjYy5sZW5ndGggJSAzXSxcblx0ICAgIG9yZCA9IGNjYy5jaGFyQ29kZUF0KDApIDw8IDE2IHwgKGNjYy5sZW5ndGggPiAxID8gY2NjLmNoYXJDb2RlQXQoMSkgOiAwKSA8PCA4IHwgKGNjYy5sZW5ndGggPiAyID8gY2NjLmNoYXJDb2RlQXQoMikgOiAwKSxcblx0ICAgIGNoYXJzID0gW2I2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDE4KSwgYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTIgJiA2MyksIHBhZGxlbiA+PSAyID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gNiAmIDYzKSwgcGFkbGVuID49IDEgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkICYgNjMpXTtcblx0ICByZXR1cm4gY2hhcnMuam9pbignJyk7XG5cdH07XG5cdHZhciBidG9hID0gZnVuY3Rpb24gKGIpIHtcblx0ICByZXR1cm4gYi5yZXBsYWNlKC9bXFxzXFxTXXsxLDN9L2csIGNiX2VuY29kZSk7XG5cdH07XG5cdHZhciBfZW5jb2RlID0gZnVuY3Rpb24gKHUpIHtcblx0ICByZXR1cm4gYnRvYSh1dG9iKHUpKTtcblx0fTtcblx0dmFyIGVuY29kZSA9IGZ1bmN0aW9uICh1LCB1cmlzYWZlKSB7XG5cdCAgcmV0dXJuICF1cmlzYWZlID8gX2VuY29kZShTdHJpbmcodSkpIDogX2VuY29kZShTdHJpbmcodSkpLnJlcGxhY2UoL1srXFwvXS9nLCBmdW5jdGlvbiAobTApIHtcblx0ICAgIHJldHVybiBtMCA9PSAnKycgPyAnLScgOiAnXyc7XG5cdCAgfSkucmVwbGFjZSgvXFw9L2csICcnKTtcblx0fTtcblx0Ly8gdmFyIGVuY29kZVVSSSA9IGZ1bmN0aW9uICh1KSB7XG5cdC8vICAgcmV0dXJuIGVuY29kZSh1LCB0cnVlKTtcblx0Ly8gfTtcblx0dmFyIHJlX2J0b3UgPSBuZXcgUmVnRXhwKFsnW8OALcOfXVvCgC3Cv10nLCAnW8OgLcOvXVvCgC3Cv117Mn0nLCAnW8OwLcO3XVvCgC3Cv117M30nXS5qb2luKCd8JyksICdnJyk7XG5cdHZhciBjYl9idG91ID0gZnVuY3Rpb24gKGNjY2MpIHtcblx0ICBzd2l0Y2ggKGNjY2MubGVuZ3RoKSB7XG5cdCAgY2FzZSA0OlxuXHQgICAgdmFyIGNwID0gKDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4IHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDMpLCBvZmZzZXQgPSBjcCAtIDY1NTM2O1xuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgob2Zmc2V0ID4+PiAxMCkgKyA1NTI5NikgKyBmcm9tQ2hhckNvZGUoKG9mZnNldCAmIDEwMjMpICsgNTYzMjApO1xuXHQgIGNhc2UgMzpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDE1ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKTtcblx0ICBkZWZhdWx0OlxuXHQgICAgcmV0dXJuIGZyb21DaGFyQ29kZSgoMzEgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSk7XG5cdCAgfVxuXHR9O1xuXHR2YXIgYnRvdSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcblx0fTtcblx0dmFyIGNiX2RlY29kZSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgdmFyIGxlbiA9IGNjY2MubGVuZ3RoLFxuXHQgICAgcGFkbGVuID0gbGVuICUgNCxcblx0ICAgIG4gPSAobGVuID4gMCA/IGI2NHRhYltjY2NjLmNoYXJBdCgwKV0gPDwgMTggOiAwKSB8IChsZW4gPiAxID8gYjY0dGFiW2NjY2MuY2hhckF0KDEpXSA8PCAxMiA6IDApIHwgKGxlbiA+IDIgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMildIDw8IDYgOiAwKSB8IChsZW4gPiAzID8gYjY0dGFiW2NjY2MuY2hhckF0KDMpXSA6IDApLFxuXHQgICAgY2hhcnMgPSBbZnJvbUNoYXJDb2RlKG4gPj4+IDE2KSwgZnJvbUNoYXJDb2RlKG4gPj4+IDggJiAyNTUpLCBmcm9tQ2hhckNvZGUobiAmIDI1NSldO1xuXHQgIGNoYXJzLmxlbmd0aCAtPSBbMCwgMCwgMiwgMV1bcGFkbGVuXTtcblx0ICByZXR1cm4gY2hhcnMuam9pbignJyk7XG5cdH07XG5cdHZhciBhdG9iID0gZnVuY3Rpb24gKGEpIHtcblx0ICByZXR1cm4gYS5yZXBsYWNlKC9bXFxzXFxTXXsxLDR9L2csIGNiX2RlY29kZSk7XG5cdH07XG5cdHZhciBfZGVjb2RlID0gZnVuY3Rpb24gKGEpIHtcblx0ICByZXR1cm4gYnRvdShhdG9iKGEpKTtcblx0fTtcblx0dmFyIGRlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIF9kZWNvZGUoU3RyaW5nKGEpLnJlcGxhY2UoL1stX10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nO1xuXHQgIH0pLnJlcGxhY2UoL1teQS1aYS16MC05XFwrXFwvXS9nLCAnJykpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5lbmNvZGUgPSBlbmNvZGU7XG5cdGV4cG9ydHMuZGVjb2RlID0gZGVjb2RlO1xuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbFBlcmZvcm1hbmNlLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGR1cmF0aW9uQXJyYXkgPSBbXTtcblx0ZnVuY3Rpb24gZ2V0TWV0cmljKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgZW50cmllcyA9IGR1cmF0aW9uQXJyYXk7XG5cdCAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICB2YXIgbWF4ID0gLUluZmluaXR5LCBtaW4gPSBJbmZpbml0eSwgc3VtID0gMCwgYXZlcmFnZSA9IDA7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGl0ZW0gPSBlbnRyaWVzW2ldO1xuXHQgICAgICBpZiAobWF4IDwgaXRlbSkge1xuXHQgICAgICAgIG1heCA9IGl0ZW07XG5cdCAgICAgIH0gXG5cdCAgICAgIGlmIChtaW4gPj0gaXRlbSkge1xuXHQgICAgICAgIG1pbiA9IGl0ZW07XG5cdCAgICAgIH1cblx0ICAgICAgc3VtICs9IGl0ZW07XG5cdCAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGF2ZXJhZ2UgPSBzdW0gLyByZXN1bHQubGVuZ3RoO1xuXHQgICAgICBhdmVyYWdlID0gTWF0aC5mbG9vcihhdmVyYWdlICogMTAwKSAvIDEwMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB7XG5cdCAgICAgIG1heDogbWF4LFxuXHQgICAgICBtaW46IG1pbixcblx0ICAgICAgYXZlcmFnZTogYXZlcmFnZVxuXHQgICAgfTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KGUpO1xuXHQgIH1cblx0fVxuXHRleHBvcnRzLmdldE1ldHJpYyA9IGdldE1ldHJpYztcblx0XG5cdGZ1bmN0aW9uIGdldE1ldHJpY1dlYigpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIGVudHJpZXMgPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzKCk7ICBcblx0ICAgIHZhciByZXN1bHQgPSBbXTtcblx0ICAgIHZhciB3ZWJEb21haW5zID0gW2FwbHVzU3RhdGljLldFQl9FVkVOVF9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9QQ19QVl9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9XQVBfUFZfU1VGRklYXTtcblx0ICAgIHZhciBtYXggPSAtSW5maW5pdHksIG1pbiA9IEluZmluaXR5LCBzdW0gPSAwLCBhdmVyYWdlID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgaXRlbSA9IGVudHJpZXNbaV07XG5cdCAgICAgIHZhciB0eXBlTWF0Y2ggPSBbJ2JlYWNvbicsICdvdGhlcicsICdpbWcnXS5zb21lKGZ1bmN0aW9uKHYpIHtcblx0ICAgICAgICByZXR1cm4gdiA9PT0gaXRlbS5pbml0aWF0b3JUeXBlO1xuXHQgICAgICB9KTtcblx0ICAgICAgXG5cdCAgICAgIHZhciBkb21haW5NYXRjaCA9IHdlYkRvbWFpbnMuc29tZShmdW5jdGlvbih2KSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZS5pbmRleE9mKHYpID4gLTE7XG5cdCAgICAgIH0pO1xuXHQgIFxuXHQgICAgICBpZiAodHlwZU1hdGNoICYmIGRvbWFpbk1hdGNoKSB7XG5cdCAgICAgICAgdmFyIGR1cmF0aW9uID0gaXRlbS5kdXJhdGlvbjtcblx0ICAgICAgICBpZiAobWF4IDwgZHVyYXRpb24pIHtcblx0ICAgICAgICAgIG1heCA9IGR1cmF0aW9uO1xuXHQgICAgICAgIH0gXG5cdCAgICAgICAgaWYgKG1pbiA+PSBkdXJhdGlvbikge1xuXHQgICAgICAgICAgbWluID0gZHVyYXRpb247XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHN1bSArPSBkdXJhdGlvbjtcblx0ICAgICAgICByZXN1bHQucHVzaChkdXJhdGlvbik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIFxuXHQgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGF2ZXJhZ2UgPSBzdW0gLyByZXN1bHQubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBtYXg6IG1heCxcblx0ICAgICAgbWluOiBtaW4sXG5cdCAgICAgIGF2ZXJhZ2U6IGF2ZXJhZ2Vcblx0ICAgIH07XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldE1ldHJpY1dlYiA9IGdldE1ldHJpY1dlYjtcblx0XG5cdGV4cG9ydHMucHVzaCA9IGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICB2YXIgZCA9IGl0ZW0uZW5kIC0gaXRlbS5zdGFydDtcblx0ICAvL+mAmui/h3d4LnJlcXVlc3Tlj5HotbfnmoTogJfml7botoXov4cgMzAwbXMgXG5cdCAgaWYgKHR5cGVvZiBkID09PSAnbnVtYmVyJyAmJiBkID49IDMwMCkge1xuXHQgICAgZHVyYXRpb25BcnJheS5wdXNoKGQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBkdXJhdGlvbkFycmF5ID0gW107XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy/or7fmsYLlubblj5HmlbDkuI3otoXov4cgMTAg5LiqICBcblx0ICBpZiAoZHVyYXRpb25BcnJheS5sZW5ndGggPj0gMTApIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGFwbHVzLl9yZWNvcmQoYXBsdXNTdGF0aWMuUEVSRk9STUFOQ0VfV0FSSU5HLCAnT1RIRVInLCB7fSk7XG5cdCAgICBkdXJhdGlvbkFycmF5ID0gW107XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuXHQgIGR1cmF0aW9uQXJyYXkgPSBbXTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxSZW1vdGVDZmcuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgYXBsdXNVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMzApO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIEFQTFVTX1JFTU9URV9DT05GSUcgPSAnQVBMVVNfUkVNT1RFX0NPTkZJRyc7XG5cdFxuXHRcblx0LyoqXG5cdCAqIOWFqOWfi+eCuei/nOeoi+mFjee9riDor7vlj5Zcblx0Ki9cblx0XG5cdGZ1bmN0aW9uIGdldExvY2FsU3RhdHVzKGtleSkge1xuXHQgIHZhciBsc2NmZztcblx0ICBpZiAodXRpbEdvbGRsb2cuaXNXZWIoKSkge1xuXHQgICAgbHNjZmcgPSB1dGlsRGF0YS5nZXRMc1JlbW90ZUNmZyhBUExVU19SRU1PVEVfQ09ORklHKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgbHNjZmcgPSBjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG5cdCAgfVxuXHQgIHJldHVybiBsc2NmZyAmJiBsc2NmZ1trZXldO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0QXV0b0V2ZW50U3RhdHVzKHN0YXR1cykge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFLCBzdGF0dXNdXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEF1dG9FdmVudFN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMnKTtcblx0ICBcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0RGV2aWNlU3RhdHVzKGVuYWJsZSkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfREVWSUNFX0VOQUJMRSwgZW5hYmxlXVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXREZXZpY2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICByZXR1cm4gZ2V0TG9jYWxTdGF0dXMoJ2N1cnJlbnREZXZpY2VFbmFibGUnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFKTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldEF1dG9QYWdlU3RhdHVzKHN0YXR1cykge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFLCBzdGF0dXNdXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEF1dG9QYWdlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHJlc3VsdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSkgfHwgZ2V0TG9jYWxTdGF0dXMoJ2NvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cycpO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRBdXRvVHJhY2tTdGF0dXMoc3RhdHVzKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUsIHN0YXR1c11cblx0ICB9KTtcblx0fTtcblx0XG5cdFxuXHRleHBvcnRzLmdldEF1dG9UcmFja1N0YXR1cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc1N0YXR1cycpO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmVuYWJsZUNmZyA9IGZ1bmN0aW9uKGNmZykge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgaWYgKGNmZykge1xuXHQgICAgLy8gQOaWh+W/gyBjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMgPSAxIOWFs+mXreiHquWKqHB2XG5cdCAgICBzZXRBdXRvRXZlbnRTdGF0dXMoY2ZnLmNvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cyk7XG5cdCAgICBzZXRBdXRvUGFnZVN0YXR1cyhjZmcuY29kZWxlc3NDb2xsZWN0b3JQYWdlU3RhdHVzKTtcblx0ICAgIHNldEF1dG9UcmFja1N0YXR1cyhjZmcuY29kZWxlc3NTdGF0dXMpO1xuXHQgICAgc2V0RGV2aWNlU3RhdHVzKGNmZy5jdXJyZW50RGV2aWNlRW5hYmxlKTtcblx0ICAgIFxuXHQgICAgaWYgKGNmZy5ldmVudFNhbXBsaW5nUmF0ZSAmJiBjZmcuZXZlbnRTYW1wbGluZ1JhdGUubGVuZ3RoID4gMCkge1xuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0VWRU5UX0xJTUlUUkFURVMsIGFwbHVzVXRpbC5tYXBFdmVudFNhbXBsZVJhdGVzKGNmZy5ldmVudFNhbXBsaW5nUmF0ZSldXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnQgJiYgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URSwgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50XVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRcblx0XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxUcmltID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSk7XG5cdHZhciB1dGlsU3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgYXBsdXNVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICB0cnlUb0RlY29kZVVSSUNvbXBvbmVudDogZnVuY3Rpb24gKHZhbCwgZGVmYXVsdF92YWwpIHtcblx0ICAgIHZhciB2ID0gZGVmYXVsdF92YWwgfHwgJyc7XG5cdCAgICBpZiAodmFsKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB2O1xuXHQgIH0sXG5cdCAgXG5cdCAgLyoqXG5cdCAgICog5bCG5b2i5aaCIFwicGFnZUlkPTEyMzsgc2l0ZUlkPTQ1NlwiIOeahOWGheWuueino+aekOS4uiBPYmplY3Rcblx0ICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbZGljdF0ge09iamVjdH1cblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdCAgcGFyc2VTZW1pY29sb25Db250ZW50OiBmdW5jdGlvbiAocywgZGljdCwgdW5kZWNvZGUpIHtcblx0ICAgIGRpY3QgPSBkaWN0IHx8IHt9O1xuXHQgICAgdmFyIGEgPSBzLnNwbGl0KCc7Jyk7XG5cdCAgICB2YXIgajtcblx0ICAgIHZhciBhX2xlbiA9IGEubGVuZ3RoO1xuXHQgICAgdmFyIGEyO1xuXHRcblx0ICAgIGZvciAoaiA9IDA7IGogPCBhX2xlbjsgaisrKSB7XG5cdCAgICAgIGEyID0gYVtqXS5zcGxpdCgnPScpO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFRyaW0udHJpbShhMi5zbGljZSgxKS5qb2luKCc9JykpO1xuXHQgICAgICBkaWN0W3V0aWxUcmltLnRyaW0oYTJbMF0pIHx8ICcnXSA9IHVuZGVjb2RlID8gX3ZhbHVlIDogdGhpcy50cnlUb0RlY29kZVVSSUNvbXBvbmVudChfdmFsdWUpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBkaWN0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWwhuS4gOS4qiBub2RlIGxpc3Qg6L2s5Li65pWw57uEXG5cdCAgICogQHBhcmFtIG5vZGVzIHtOb2RlTGlzdH1cblx0ICAgKiDlj4Lop4HvvJpodHRwOi8vd3d3LnBsYW5hYmMubmV0LzIwMTAvMDEvMDYvYXJndW1lbnRzX3RvX2FycmF5L1xuXHQgICAqL1xuXHQgIG5vZGVMaXN0VG9BcnJheTogZnVuY3Rpb24gKG5vZGVzKSB7XG5cdCAgICB2YXIgYXJyO1xuXHQgICAgdmFyIGxlbmd0aDtcblx0XG5cdCAgICB0cnkge1xuXHQgICAgICAvLyB3b3JrcyBpbiBldmVyeSBicm93c2VyIGV4Y2VwdCBJRVxuXHQgICAgICBhcnIgPSBbXS5zbGljZS5jYWxsKG5vZGVzKTtcblx0ICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAvLyBzbG93ZXIsIGJ1dCB3b3JrcyBpbiBJRVxuXHQgICAgICBhcnIgPSBbXTtcblx0ICAgICAgbGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGFyci5wdXNoKG5vZGVzW2ldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBnZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcblx0ICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdmFyIF9sc19jbmEgPSAnJztcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoRVRBR19TVE9SQUdFX0tFWSk7XG5cdCAgICAgIGlmIChfdmFsdWUpIHtcblx0ICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnXycpIHx8IFtdO1xuXHQgICAgICAgIGlmIChkYXRlKSB7XG5cdCAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2NuYSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLkVUQUdfU1RPUkFHRV9LRVksICB0aGlzLnRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuXHQgIHNldExzQ25hOiBmdW5jdGlvbiAoRVRBR19TVE9SQUdFX0tFWSwgdG9kYXksIGNuYSkge1xuXHQgICAgaWYgKGNuYSAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdXRpbFN0b3JlLnNldChFVEFHX1NUT1JBR0VfS0VZLCAgdG9kYXkgKyAnXycgKyBlbmNvZGVVUklDb21wb25lbnQoY25hKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBcblx0ICBnZXRMc0ltcHY6IGZ1bmN0aW9uKElNUFJJTlRfU1RPUkFHRV9LRVksIGRhdGUpIHtcblx0ICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdmFyIF9sc19pbXB2ID0gJyc7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KElNUFJJTlRfU1RPUkFHRV9LRVkpO1xuXHQgICAgICBpZiAoX3ZhbHVlKSB7XG5cdCAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ3x8JykgfHwgW107XG5cdCAgICAgICAgaWYgKGRhdGUpIHtcblx0ICAgICAgICAgIF9sc19pbXB2ID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9sc19pbXB2ID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19pbXB2KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzZXRMc0ltcHY6IGZ1bmN0aW9uKElNUFJJTlRfU1RPUkFHRV9LRVksIHRvZGF5LCBpbXB2KSB7XG5cdCAgICBpZiAoaW1wdiAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdXRpbFN0b3JlLnNldChJTVBSSU5UX1NUT1JBR0VfS0VZLCB0b2RheSArICd8fCcgKyBlbmNvZGVVUklDb21wb25lbnQoaW1wdikpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHRcblx0ICBzZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgdG9kYXksIGNmZykge1xuXHQgICAgaWYgKGNmZyAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdmFyIGNsb25lQ2ZnID0gdXRpbERhc2guY2xvbmVEZWVwKGNmZyk7XG5cdCAgICAgIGlmICh0eXBlb2YgY2xvbmVDZmcgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgY2xvbmVDZmcgPSBKU09OLnN0cmluZ2lmeShjbG9uZUNmZyk7XG5cdCAgICAgIH1cblx0ICAgICAgdXRpbFN0b3JlLnNldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZLCB0b2RheSArICd8fCcgKyBlbmNvZGVVUklDb21wb25lbnQoY2xvbmVDZmcpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0XG5cdCAgZ2V0THNSZW1vdGVDZmc6IGZ1bmN0aW9uKFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVksIGRhdGUpIHtcblx0ICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcblx0ICAgICAgdmFyIF9sc19yZW1vdGVDZmcgPSAnJztcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSk7XG5cdCAgICAgIGlmIChfdmFsdWUpIHtcblx0ICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnfHwnKSB8fCBbXTtcblx0ICAgICAgICBpZiAoZGF0ZSkge1xuXHQgICAgICAgICAgX2xzX3JlbW90ZUNmZyA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfbHNfcmVtb3RlQ2ZnID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4ganNvblV0aWwucGFyc2UoZGVjb2RlVVJJQ29tcG9uZW50KF9sc19yZW1vdGVDZmcpKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnJztcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBnZXRVcmw6IGZ1bmN0aW9uICh1cmwpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0ICAgIHZhciBlZ1VybCA9IHVybCB8fCAnLy9sb2cubW1zdGF0LmNvbS9lZy5qcyc7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG5cdCAgICAgIHJob3N0X3YgPSBhcGx1c1V0aWwuZml4RG9tYWluKHJob3N0X3YpLnJlcGxhY2UoL1xcL1xcdysuZ2lmJC8sJycpO1xuXHQgICAgICAvLyB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/Lztcblx0ICAgICAgLy8gdmFyIGN1c3RvbV9ob3N0ID0gcmhvc3Rfdi5tYXRjaChyZWcpO1xuXHQgICAgICAvLyBpZiAoY3VzdG9tX2hvc3QgJiYgY3VzdG9tX2hvc3RbMF0pIHtcblx0ICAgICAgLy8gICAvLyBlZ1VybCA9IGVnVXJsLnJlcGxhY2UocmVnLCBjdXN0b21faG9zdFswXSk7XG5cdCAgICAgIC8vIH1cblx0ICAgICAgZWdVcmwgPSByaG9zdF92ICsgJy9lZy5qcyc7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZWdVcmw7XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOWvueWtl+espuS4sui/m+ihjHRyaW3lpITnkIZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICog5Y675o6J5a2X56ym5LiyIHMg5YmN5ZCO55qE56m65qC8XG5cdCAqIEBwYXJhbSBzIHtTdHJpbmd9XG5cdCAqL1xuXHRmdW5jdGlvbiB0cmltKHMpIHtcblx0ICByZXR1cm4gKHR5cGVvZiBzID09PSAnc3RyaW5nJykgPyBzLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKSA6ICcnO1xuXHR9O1xuXHRleHBvcnRzLnRyaW0gPSB0cmltO1xuXG5cbi8qKiovIH0pLFxuLyogMzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oaywgdik7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvLyDnu4/ov4d0ZXN05LmL5ZCOZ2V05bqU6K+l5LiN5Lya5pyJ6Zeu6aKYXG5cdCAgZ2V0OiBmdW5jdGlvbiAoaykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGspO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgfSxcblx0ICB0ZXN0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgdGVzdEtleSA9ICdncmV5X3Rlc3Rfa2V5Jztcblx0ICAgIHRyeSB7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRlc3RLZXksIDEpO1xuXHQgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0S2V5KTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gKGspIHtcblx0ICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHQvKipcblx0ICog55Sf5oiQ5LiA5Liq55So5LqO6YG/5YWN57yT5a2Y55qE6ZqP5py65pWwXG5cdCAqIOS4uuS6huWHj+WwkSB1cmwg6ZW/5bqm77yM6L+Z5Liq6ZqP5py65pWw5o2u55qE6ZW/5bqm5a6a5Li6IDcg5L2N77yMXG5cdCAqIOS4uuS6huWHj+WwkeeisOaSnu+8jOS9v+eUqCAxNiDov5vliLbmlbDlrZdcblx0ICpcblx0ICogMjY4NDM1NDU2ID0gMiBeIDI4ID0gMHhmZmZmZmZmICsgMVxuXHQgKi9cblx0ZXhwb3J0cy5tYWtlQ2FjaGVOdW0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDI2ODQzNTQ1NikudG9TdHJpbmcoMTYpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbku6XlrZfnrKbkuLIgczIg5byA5aS0XG5cdCAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuXHQgKiBAcGFyYW0gczIge1N0cmluZ31cblx0ICovXG5cdGV4cG9ydHMuaXNTdGFydFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcblx0ICByZXR1cm4gczEuaW5kZXhPZihzMikgPT09IDA7XG5cdH07XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5rue5Lul5a2X56ym5LiyIHMyIOe7k+WwvlxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzRW5kV2l0aCA9IGZ1bmN0aW9uKHMxLCBzMikge1xuXHQgIHZhciBsMSA9IHMxLmxlbmd0aCwgbDIgPSBzMi5sZW5ndGg7XG5cdCAgcmV0dXJuIGwxID49IGwyICYmIHMxLmluZGV4T2YoczIpID09IChsMSAtIGwyKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuYW55ID0gZnVuY3Rpb24oYXJyLCBmbikge1xuXHQgIHZhciBpO1xuXHQgIHZhciBsID0gYXJyLmxlbmd0aDtcblx0ICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpZiAoZm4oYXJyW2ldKSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcblx0ICByZXR1cm4gdHlwZW9mIHYgPT09ICdudW1iZXInO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc05hTiA9IGZ1bmN0aW9uKHYpIHtcblx0ICBpZihpc05hTikge1xuXHQgICAgcmV0dXJuIGlzTmFOKHYpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdiAhPT0gdjtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuWMheWQq+Wtl+espuS4siBzMlxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzQ29udGFpbiA9IGZ1bmN0aW9uIChzMSwgczIpIHtcblx0ICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdHZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcblx0ICB2YXIgc3RyO1xuXHQgIHZhciBuZXdvYmogPSBvYmouY29uc3RydWN0b3IgPT09IEFycmF5ID8gW10gOiB7fTtcblx0ICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuXHQgICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcblx0ICAgIG5ld29iaiA9IEpTT04ucGFyc2Uoc3RyKTsgLy/ov5jljp9cblx0ICB9IGVsc2Uge1xuXHQgICAgZm9yICh2YXIgaSBpbiBvYmopIHtcblx0ICAgICAgbmV3b2JqW2ldID0gdHlwZW9mIG9ialtpXSA9PT0gJ29iamVjdCcgPyBjbG9uZURlZXAob2JqW2ldKSA6IG9ialtpXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5ld29iajtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2xvbmVEZWVwID0gY2xvbmVEZWVwO1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlnVybOWPguaVsCzku4XpmZB3ZWLjgIFoNVxuXHQgKi9cblx0dmFyIGdldFVybFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgcmVnZXggPSAvWz8mXShbXj0jXSspPShbXiYjXSopL2c7XG5cdCAgdmFyIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICB2YXIgbWF0Y2g7XG5cdCAgd2hpbGUgKG1hdGNoID0gcmVnZXguZXhlYyh1cmwpKSB7XG5cdCAgICBwYXJhbXNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XG5cdCAgfVxuXHQgIHJldHVybiBwYXJhbXM7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFVybFBhcmFtcyA9IGdldFVybFBhcmFtcztcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3nqbrlr7nosaFcblx0ICovXG5cdHZhciBpc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24obykge1xuXHQgIGlmKCFvKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9O1xuXHQgIGZvciAodmFyIGsgaW4gbykge1xuXHQgICAgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdGV4cG9ydHMuaXNFbXB0eU9iamVjdCA9IGlzRW1wdHlPYmplY3Q7XG5cbi8qKiovIH0pLFxuLyogMzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcblx0LyoqXG5cdCAqIOWvueixoW1lcmdlXG5cdCAqICBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh0YXJnZXRPYmosIGFyZ3NPYmopIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cdCAgICAgIHZhciB0byA9IE9iamVjdCh0YXJnZXQpO1xuXHQgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW2luZGV4XTtcblx0ICAgICAgICBpZiAobmV4dFNvdXJjZSAhPT0gbnVsbCkgeyAvLyBTa2lwIG92ZXIgaWYgdW5kZWZpbmVkIG9yIG51bGxcblx0ICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xuXHQgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5leHRTb3VyY2UsIG5leHRLZXkpKSB7XG5cdCAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0bztcblx0ICAgIH0odGFyZ2V0T2JqLCBhcmdzT2JqKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRhcmdldE9iaiwgYXJnc09iaik7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDM1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWF4Q291bnQpIHtcblx0ICB2YXIgX21heENvdW50ID0gbWF4Q291bnQ7XG5cdCAgdmFyIF9pdGVtcyA9IFtdO1xuXHRcblx0ICB0aGlzLmVucXVldWUgPSBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgaWYgKHR5cGVvZiBfbWF4Q291bnQgPT09ICdudW1iZXInICYmIHRoaXMuc2l6ZSgpID49IF9tYXhDb3VudCkge1xuXHQgICAgICB0aGlzLmRlcXVldWUoKTtcblx0ICAgIH1cblx0XG5cdCAgICBfaXRlbXMucHVzaChpdGVtKTtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmRlcXVldWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zLnNoaWZ0KCk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5mcm9udCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXNbMF07XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcy5sZW5ndGggPT09IDA7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIF9pdGVtcy5sZW5ndGggPSAwO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuc2l6ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXMubGVuZ3RoO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMucHJpbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB1bG9nKCkuaSgnLS0tcXVldWU6ICcsIF9pdGVtcy50b1N0cmluZygpKTtcblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDM2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGN1cnJlbnRQYXRoID0gXCJcIjtcblx0dmFyIHBhZ2VPcHRpb25NYXAgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIGJ1aWxkUGF0aChwYXRoLCBxdWVyeSkge1xuXHQgIGlmICghcGF0aCB8fCBwYXRoID09PSAnLScpIHtcblx0ICAgIHJldHVybiBcIi1cIjtcblx0ICB9XG5cdCAgdmFyIHFzID0gW107XG5cdCAgZm9yICh2YXIgcSBpbiBxdWVyeSkge1xuXHQgICAgcXMucHVzaChxICsgJz0nICsgcXVlcnlbcV0pO1xuXHQgIH1cblx0ICB2YXIgcXNzID0gcXMuam9pbignJicpO1xuXHQgIHJldHVybiBxc3MgPyBwYXRoICsgJz8nICsgcXNzIDogcGF0aDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VQYXRoID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIGN1cnJlbnRQYXRoO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgY3VycmVudFBhdGggPSBwYXRoO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gcGFnZU9wdGlvbk1hcFtwYXRoXTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHBhZ2VPcHRpb25NYXBbcGF0aF0gPSBxdWVyeTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiBidWlsZFBhdGgocGF0aCwgcGFnZU9wdGlvbk1hcFtwYXRoXSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VOYW1lID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBtZXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fTtcblx0ICB2YXIgcmVhbFBhdGggPSBwYXRoIHx8IGN1cnJlbnRQYXRoO1xuXHQgIGlmIChtZXRhLmhhc2hNb2RlKSB7XG5cdCAgICByZWFsUGF0aCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICAvLyDlr7nkuo7liqjmgIHot6/nlLHvvIzmlK/mjIHnlKjmiLfkvKDlhaXmraPliJnov5vooYzljLnphY1cblx0ICAgIGlmIChtZXRhICYmIHR5cGVvZiBtZXRhID09ICdvYmplY3QnKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhKSB7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gcmVhbFBhdGgpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH0gZWxzZSBpZiAobWV0YVtrZXldICYmIG1ldGFba2V5XS5yZWdSdWxlKSB7XG5cdCAgICAgICAgICByZWFsUGF0aCA9IG1ldGFba2V5XS5yZWdSdWxlLnRlc3QocmVhbFBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy9cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIC8vXG5cdCAgfVxuXHQgIHJldHVybiBtZXRhW3JlYWxQYXRoXTtcblx0fTtcblx0XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdC8qIGVzbGludC1kaXNhYmxlICovXG5cdGV4cG9ydHMuZ2V0V3hUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAoIXBhdGgpIHJldHVybiBcIlwiO1xuXHQgIHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0ICB2YXIgcGxhdFR5cGUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHQgIHZhciB0ID0gXCJcIjtcblx0ICB0cnkge1xuXHQgICAgaWYgKHBsYXRUeXBlID09PSAnd3gnICYmIF9fd3hDb25maWcpIHtcblx0ICAgICAgdmFyIHd4Q29uZmlnID0gX193eENvbmZpZzsgICAgICBcblx0ICAgICAgdmFyIHBhZ2UgPSBfX3d4Q29uZmlnLnBhZ2UgfHwge307XG5cdCAgICAgIHZhciByb3V0ZSA9IHBhZ2VbcGF0aF0gfHwgcGFnZVtwYXRoICsgXCIuaHRtbFwiXTtcblx0ICAgICAgdmFyIG4gPSB7fSwgaSA9IHt9O1xuXHQgICAgICBpZiAod3hDb25maWcuZ2xvYmFsICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cgJiYgd3hDb25maWcuZ2xvYmFsLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG5cdCAgICAgICAgbi50aXRsZSA9IHd4Q29uZmlnLmdsb2JhbC53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocm91dGUgJiYgcm91dGUud2luZG93ICYmIHJvdXRlLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG5cdCAgICAgICAgaS50aXRsZSA9IHJvdXRlLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIWkudGl0bGUgJiYgX193eEFwcENvZGVfXykge1xuXHQgICAgICAgIHZhciBhcHBKU09OID0gX193eEFwcENvZGVfX1twYXRoICsgXCIuanNvblwiXTtcblx0ICAgICAgICBpZiAoYXBwSlNPTiAmJiBhcHBKU09OLm5hdmlnYXRpb25CYXJUaXRsZVRleHQpIHtcblx0ICAgICAgICAgIGkudGl0bGUgPSBhcHBKU09OLm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG5cdCAgICAgICAgfSBcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBpZiAoY3R4Lmdsb2JhbFRpdGxlTWFwKSB7XG5cdCAgICAgICAgZWFjaE1hcChjdHguZ2xvYmFsVGl0bGVNYXAsIGZ1bmN0aW9uKGtleSwgdmFsdWUpe1xuXHQgICAgICAgICAgaWYgKGtleSA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgICB0ID0gdmFsdWU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB7XG5cdCAgICAgICAgdCA9IGkudGl0bGUgfHwgbi50aXRsZSB8fCAnJztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHQ7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnY3VycmVudCBwbGF0Zm9ybSBjYW4gbm90IHRyYWNrIHBhZ2UgdGl0bGUnKTtcblx0ICAgIHJldHVybiB0O1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlTmFtZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0UGFnZVRpdGxlID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZVRpdGxlIHx8IHRoaXMuZ2V0V3hUaXRsZShwYXRoKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0VlRSZWFsdGltZUNvZGUgPSBmdW5jdGlvbigpIHtcblx0ICBpZiAoY3VycmVudFBhdGgpIHtcblx0ICAgIHZhciBxdWVyeSA9IHBhZ2VPcHRpb25NYXBbY3VycmVudFBhdGhdIHx8IHt9O1xuXHQgICAgdmFyIHJlZ0V4cCA9IC9eXFwkdnRfLztcblx0ICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG5cdCAgICByZXR1cm4gc2NlbmUgJiYgcmVnRXhwLnRlc3Qoc2NlbmUpICYmIHNjZW5lLnJlcGxhY2UocmVnRXhwLCAnJyk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDM3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlr7ltYXDov5vooYzpq5jmgKfog73nmoTpgY3ljoZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChtYXAsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKE9iamVjdCAmJiBPYmplY3Qua2V5cykge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuXHQgICAgdmFyIGxlbiA9IGtleXMubGVuZ3RoO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICB2YXIgazEgPSBrZXlzW2ldO1xuXHQgICAgICBjYWxsYmFjayhrMSwgbWFwW2sxXSk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGsgaW4gbWFwKSB7XG5cdCAgICAgIGNhbGxiYWNrKGssIG1hcFtrXSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsTW9uaXRvci5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRmdW5jdGlvbiByYW5rKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgaWYgKGN0eC5la3ZSYW5rKSB7XG5cdCAgICBjdHguZWt2UmFuaysrO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBjdHguZWt2UmFuayA9IDE7XG5cdCAgfVxuXHQgIHJldHVybiBjdHguZWt2UmFuaztcblx0fTtcblx0ZXhwb3J0cy5yYW5rID0gcmFuaztcblx0XG5cdGZ1bmN0aW9uIGNsZWFyKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmVrdlJhbmsgPSAwO1xuXHR9XG5cdGV4cG9ydHMuY2xlYXIgPSBjbGVhcjtcblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9hcGx1c19wbHVnaW5fbWluaS9saWJfYXV0b19jb2xsZWN0L2luamVjdF9wYWdlLmpzXG5cdCAqIOiHquWKqOmHh+mbhuWwj+eoi+W6j+S/oeaBr+eahOaPkuS7tiAtIOmhtemdouazqOWFpVxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oNDApO1xuXHR2YXIgZWFjaE1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1bVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciB1dGlsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHRmdW5jdGlvbiBnZXRVdG1QYXJhbXNPYmogKHEpIHtcblx0ICB2YXIgb2JqID0ge307XG5cdCAgdHJ5IHtcblx0ICAgIGVhY2hNYXAocSwgZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcblx0ICAgICAgaWYoay5pbmRleE9mKCd1dG1fJykgPT09IDApIHtcblx0ICAgICAgICBvYmpba10gPSB2O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHQgIHJldHVybiBvYmo7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgcGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG5cdCAgdmFyIG9wdGlvbnMgPSBwYWdlLm9wdGlvbnMgfHwge307XG5cdCAgdmFyIGxpbmtQYXJtYXMgPSBmb3JtYXQub2JqMnBhcmFtKG9wdGlvbnMsIHRydWUpO1xuXHQgIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcblx0ICBpZihsaW5rUGFybWFzKSB7XG5cdCAgICByb3V0ZSA9IHJvdXRlICsgJz8nICsgbGlua1Bhcm1hcztcblx0ICB9IFxuXHQgIGlmICghb3B0LnF1ZXJ5KSB7XG5cdCAgICBvcHQucXVlcnkgPSB7fTtcblx0ICB9XG5cdCAgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnX2Fub255X2lkJykgfHwgY3R4LmFwbHVzLl9fRVRBR19fQ05BX19JRF9fO1xuXHQgIG9wdC5xdWVyeS4kJF91dG1fbWVkaXVtID0gMztcblx0XG5cdCAgLy8gb25TaGFyZUFwcE1lc3NhZ2XmsqHmnIlyZXR1cm4g5oiWIG9uU2hhcmVUaW1lbGluZeaXtu+8jOWFpeWPgm9wdOeahHBhdGjkuI5xdWVyeeS4uuepuu+8jOatpOaXtueUqGN1cnJlbnRQYWdl55qEcGF0aOWSjG9wdGlvbnPlhZzlupVcblx0ICBvcHQucXVlcnkgPSB1bVV0aWxzLmFzc2lnbih7fSwgb3B0aW9ucywgb3B0LnF1ZXJ5KTtcblx0ICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXHRcblx0ICB2YXIgYXBwZW5kUGFyYW1zID0gJyQkX3NoYXJlX3VpZD0nICsgb3B0LnF1ZXJ5LiQkX3NoYXJlX3VpZCArICcmJCRfdXRtX21lZGl1bT0zJztcblx0IFxuXHQgIGlmIChwYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG5cdCAgICBvcHQucGF0aCA9IHBhdGggKyAnJicgKyBhcHBlbmRQYXJhbXM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9wdC5wYXRoID0gcGF0aCArICc/JyArIGFwcGVuZFBhcmFtcztcblx0ICB9XG5cdCAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuXHQgIH0pO1xuXHQgIHJldHVybiBvcHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblB1bGxEb3duUmVmcmVzaCgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBvcHQgPSB7XG5cdCAgICBzdGF0dXM6ICdyZWFkeSdcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cblx0ICB9KTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUmVhY2hCb3R0b20oKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgdmFyIG9wdCA9IHtcblx0ICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgIGNvbnRleHQ6IHRoYXRcblx0ICB9O1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvblJlYWNoQm90dG9tJywgb3B0XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0Ly8g6aG16Z2i5Yqg6L29XG5cdGZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBQYWdlTWFuYWdlci5zZXRQYWdlUXVlcnkodGhpcy5yb3V0ZSwgcXVlcnkpO1xuXHQgICAgfVxuXHQgICAgdWxvZygpLmkoJ1BhZ2Ugb25Mb2FkOiAnLCB0aGlzLnJvdXRlLCBxdWVyeSk7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICB1dGlsRnVuY3Rpb24ub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbigpe1xuXHQgICAgICAvLyDlhajlsYDlsZ7mgKfov73liqB1dG3lj4LmlbBcblx0ICAgICAgY3R4LmFwbHVzLmFwcGVuZE1ldGFJbmZvKGFwbHVzU3RhdGljLkdMT0JBTF9QUk9QRVJUWSwgZ2V0VXRtUGFyYW1zT2JqKHF1ZXJ5KSk7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ29uTG9hZCcsIHtcblx0ICAgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIOmhtemdouWKoOi9veWujOWQjua3t+WFpXNldERhdGHvvIzmlrnkvr/oh6rliqjmm53lhYnjgIHoh6rliqjngrnlh7vnrYnmj5Lku7bkvb/nlKhcblx0ICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJlc2V0Rm4oX2N1cnJlbnRQYWdlLCAnc2V0RGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywge1xuXHQgICAgICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgICAgICBjb250ZXh0OiB0aGF0XG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZUxvYWQ6ICcsIGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUGFnZVNob3coKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB0cnkge1xuXHQgICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG5cdCAgICB1dGlsRnVuY3Rpb24ub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgICBhcmd1bWVudHM6IFsnb25TaG93Jywge1xuXHQgICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICAgICAgY29udGV4dDogdGhhdCxcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVNob3c6ICcsIGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIG9uUGFnZVJlYWR5KCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB0aGF0ID0gdGhpcztcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICBhcmd1bWVudHM6IFsnb25SZWFkeScsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgICAgY29udGV4dDogdGhhdFxuXHQgICAgICB9XVxuXHQgICAgfSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZVJlYWR5OiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VIaWRlKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICBhcmd1bWVudHM6IFsnb25IaWRlJywge1xuXHQgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgfV1cblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ29uUGFnZUhpZGU6ICcsIGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGZ1bmN0aW9uIG9uUGFnZVVubG9hZCgpIHtcblx0Ly8gICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQvLyAgIHRyeSB7XG5cdC8vICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdC8vICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0Ly8gICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcblx0Ly8gICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdC8vICAgICAgIH1dXG5cdC8vICAgICB9KTtcblx0Ly8gICB9IGNhdGNoKGUpe1xuXHQvLyAgICAgdWxvZygpLncoJ29uUGFnZVVubG9hZDogJywgZSk7XG5cdC8vICAgfVxuXHQvLyB9O1xuXHRcblx0ZnVuY3Rpb24gb25BcGx1c0NsayhlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c0NsaycsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBldmVudDogZSxcblx0ICAgICAgY29udGV4dDogdGhpc1xuXHQgICAgfV1cblx0ICB9KTtcblx0fTtcblx0XG5cdC8v6Kem5pG45LqL5Lu2XG5cdGZ1bmN0aW9uIG9uQXBsdXNUb3VjaChlKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIHtcblx0ICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICBjb250ZXh0OiB0aGF0LFxuXHQgICAgICBldmVudDogZSxcblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmUob3B0KSB7XG5cdCAgaWYgKG9wdC5vblNoYXJlQXBwTWVzc2FnZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVBcHBNZXNzYWdlID0gb3B0Lm9uU2hhcmVBcHBNZXNzYWdlO1xuXHQgICAgb3B0Lm9uU2hhcmVBcHBNZXNzYWdlID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVBcHBNZXNzYWdlLmNhbGwodGhpcywgcmVzKSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGZ1bmN0aW9uIGF1dG9Ib29rTWFwKGtleSkge1xuXHQvLyAgIHZhciBhaE1hcCA9IHtcblx0Ly8gICAgIGRhdGE6IDEsXG5cdC8vICAgICBvbkxvYWQ6IDEsXG5cdC8vICAgICBvblNob3c6IDEsXG5cdC8vICAgICBvblJlYWR5OiAxLFxuXHQvLyAgICAgb25QdWxsRG93blJlZnJlc2g6IDEsXG5cdC8vICAgICBvblNoYXJlQXBwTWVzc2FnZTogMSxcblx0Ly8gICAgIG9uU2hhcmVBcHBNZXNzYWdlOiAxLFxuXHQvLyAgICAgb25TaGFyZVRpbWVsaW5lOiAxLFxuXHQvLyAgICAgb25SZWFjaEJvdHRvbTogMSxcblx0Ly8gICAgIG9uUGFnZVNjcm9sbDogMSxcblx0Ly8gICAgIG9uUmVzaXplOiAxLFxuXHQvLyAgICAgb25UYWJJdGVtVGFwOiAxLFxuXHQvLyAgICAgb25IaWRlOiAxLFxuXHQvLyAgICAgb25VbmxvYWQ6IDEsXG5cdC8vICAgICBvbkFwbHVzVG91Y2g6IDEsXG5cdC8vICAgICBvbkFwbHVzQ2xrOiAxXG5cdC8vICAgfTtcblx0Ly8gICByZXR1cm4gISFhaE1hcFtrZXldO1xuXHQvLyB9XG5cdFxuXHQvLyBmdW5jdGlvbiBnZXRNZXRob2RzKG9wdGlvbnMpIHtcblx0Ly8gICB2YXIgcmVzdWx0ID0gW107XG5cdC8vICAgZm9yICh2YXIgYSBpbiBvcHRpb25zKSB7XG5cdC8vICAgICBpZiAodHlwZW9mIG9wdGlvbnNbYV0gPT09ICdmdW5jdGlvbicgJiYgIWF1dG9Ib29rTWFwKGEpKSB7XG5cdC8vICAgICAgIHJlc3VsdC5wdXNoKGEpO1xuXHQvLyAgICAgfVxuXHQvLyAgIH1cblx0Ly8gICByZXR1cm4gcmVzdWx0O1xuXHQvLyB9O1xuXHRcblx0Ly8gZnVuY3Rpb24gaG9va0F1dG9UcmFja01ldGhvZHMob3B0aW9ucykge1xuXHQvLyAgIHZhciBtZXRob2RzID0gZ2V0TWV0aG9kcyhvcHRpb25zKTtcblx0Ly8gICBpZiAobWV0aG9kcyAmJiBtZXRob2RzLmxlbmd0aCkge1xuXHQvLyAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXRob2RzLmxlbmd0aDsgaSsrKSB7XG5cdC8vICAgICAgIHV0aWxGdW5jdGlvbi5jbGlja19wcm94eShvcHRpb25zLCBtZXRob2RzW2ldKTtcblx0Ly8gICAgIH1cblx0Ly8gICB9XG5cdC8vIH1cblx0XG5cdC8vIOWIhuS6q+aci+WPi+WciFxuXHRmdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcblx0ICBpZiAob3B0Lm9uU2hhcmVUaW1lbGluZSkge1xuXHQgICAgdmFyIG9sZE9uU2hhcmVUaW1lbGluZSA9IG9wdC5vblNoYXJlVGltZWxpbmU7XG5cdCAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG5cdCAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVUaW1lbGluZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG5cdCAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlVGltZWxpbmUnKTtcblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0UGFnZSgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuXHQgICAgdmFyIG9sZFBhZ2VBZnRlcjtcblx0ICAgIGlmIChvbGRQYWdlLmFmdGVyKSB7XG5cdCAgICAgIG9sZFBhZ2VBZnRlciA9IG9sZFBhZ2UuYWZ0ZXI7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIFBhZ2UgPSBmdW5jdGlvbihwYWdlT3B0aW9ucykgeyAgICAgIFxuXHQgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25TaG93Jywgb25QYWdlU2hvdyk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uVW5sb2FkJywgb25QYWdlSGlkZSk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uUmVhZHknLCBvblBhZ2VSZWFkeSk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblB1bGxEb3duUmVmcmVzaCcsIG9uUHVsbERvd25SZWZyZXNoKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uUmVhY2hCb3R0b20nLCBvblJlYWNoQm90dG9tKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uQXBsdXNDbGsnLCBvbkFwbHVzQ2xrKTtcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uQXBsdXNUb3VjaCcsIG9uQXBsdXNUb3VjaCk7XG5cdFxuXHQgICAgICByZXdyaXRlU2hhcmUocGFnZU9wdGlvbnMpO1xuXHQgICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG5cdCAgICAgIC8vIGhvb2tBdXRvVHJhY2tNZXRob2RzKHBhZ2VPcHRpb25zKTtcblx0ICAgICAgb2xkUGFnZShwYWdlT3B0aW9ucyk7XG5cdCAgICB9O1xuXHQgICAgLy8g6YCC6YWN55m+5bqmc3RhcnRtaW5pcHJvZ3JhbVxuXHQgICAgaWYgKG9sZFBhZ2VBZnRlcikge1xuXHQgICAgICBQYWdlLmFmdGVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgb2xkUGFnZUFmdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnUGFnZSBob29rIGVycm9yJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5qZWN0Q29tcG9uZW50KCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgb2xkQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuXHQgICAgQ29tcG9uZW50ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG9wdGlvbnMubWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcyB8fCB7fTtcblx0ICAgICAgICB2YXIgbWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcztcblx0ICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvblNob3cnLCBvblBhZ2VTaG93KTtcblx0ICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvbkhpZGUnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvblVubG9hZCcsIG9uUGFnZUhpZGUpO1xuXHQgICAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4obWV0aG9kcywgJ29uTG9hZCcsIG9uUGFnZUxvYWQpO1xuXHQgICAgICAgIHJld3JpdGVTaGFyZShtZXRob2RzKTtcblx0ICAgICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhtZXRob2RzKTtcblx0ICAgICAgICBvbGRDb21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIH0gY2F0Y2godCkge1xuXHQgICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgfTtcblx0ICAgIH07XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudygnQ29tcG9uZW50IGhvb2sgZXJyb3InKTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXHRmdW5jdGlvbiBpbmplY3RNaWR3YXkgKG1wQ3R4LCBuYW1lLCBjYWxsYmFjaykge1xuXHQgIGlmIChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIG1wQ3R4KSA+IC0xKSB7XG5cdCAgICBjYWxsYmFjaygpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBjb25zb2xlLmxvZygndHlwZW9mICcgKyBuYW1lICsgJyBpcyBub3Qgb2JqZWN0IGNhbnQgd2F0Y2hFeHAuJyk7XG5cdCAgICB1bG9nKCkudygndHlwZW9mICcgKyBuYW1lICsgJyBpcyBub3Qgb2JqZWN0IGNhbnQgd2F0Y2hFeHAuJyk7XG5cdCAgfVxuXHR9XG5cdHZhciBnbG9iYWxUaXRsZU1hcCA9IHt9O1xuXHRmdW5jdGlvbiBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCkge1xuXHQgIHZhciB0aGF0ID0gdGhpcztcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0ICB2YXIgcGxhdGZvcm1DdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICB0cnkge1xuXHQgICAgaWYgKHBsYXRmb3JtQ3R4ICYmIHBsYXRmb3JtQ3R4LnNldE5hdmlnYXRpb25CYXJUaXRsZSkge1xuXHQgICAgICB2YXIgb2xkRnVuYyA9IHBsYXRmb3JtQ3R4LnNldE5hdmlnYXRpb25CYXJUaXRsZTtcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHBsYXRmb3JtQ3R4LCBcInNldE5hdmlnYXRpb25CYXJUaXRsZVwiLCB7XG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG5cdCAgICAgICAgICAgIHZhciB0ID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICAgICAgICB2YXIgcm91dGUgPSB0LnJvdXRlIHx8IHQuaXM7XG5cdCAgICAgICAgICAgIGUgPSB1dGlsT2JqZWN0LmlzT2JqZWN0KGUpID8gZSA6IHt9O1xuXHQgICAgICAgICAgICBnbG9iYWxUaXRsZU1hcFtyb3V0ZV0gPSBlLnRpdGxlO1xuXHQgICAgICAgICAgICBjdHguZ2xvYmFsVGl0bGUgPSBnbG9iYWxUaXRsZU1hcDtcblx0ICAgICAgICAgICAgb2xkRnVuYy5jYWxsKHRoYXQsIGUpO1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9LFxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KGUpO1xuXHQgIH1cblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBpbmplY3RNaWR3YXkoUGFnZSwgJ1BhZ2UnLCBpbmplY3RQYWdlKTtcblx0ICAgICAgaW5qZWN0TWlkd2F5KENvbXBvbmVudCwgJ0NvbXBvbmVudCcsIGluamVjdENvbXBvbmVudCk7XG5cdCAgICAgIGhvb2tTZXROYXZpZ2F0aW9uQmFyVGl0bGUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsRnVuYy5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRleHBvcnRzLnJlc2V0Rm4gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDoge30sXG5cdCAgICB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiAnJyxcblx0ICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcblx0ICAgIGkgPSBlW3RdO1xuXHQgIGVbdF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cblx0ICAgIGlmIChycykge1xuXHQgICAgICByZXR1cm4gbi5jYWxsKHRoaXMsIHJzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHRhcm8xeOOAgXRhcm8yeCDlv4XpobvliqDkuKrpop3lpJbnmoTor63lj6VuLmFwcGx55omN6IO95omn6KGM77yM5q+U5aaCdHJ5Y2F0Y2jvvIzlj5jph4/lo7DmmI7nrYnvvIzmraTlpITliqDkuoZyZXR1cm5cblx0ICAgICAgcmV0dXJuIG4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5yZXdyaXRlRm4gPSBmdW5jdGlvbihvYmosIG5hbWUsIG5ld0ZuKSB7XG5cdCAgdmFyIG9sZEZuID0gb2JqW25hbWVdO1xuXHQgIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBuZXdGbi5jYWxsKHRoaXMsIGUpO1xuXHQgICAgb2xkRm4gJiYgb2xkRm4uY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5vbkFwbHVzUmVhZHkgPSBmdW5jdGlvbiAoYXBsdXNfcXVldWUsIFNVQlNDUklCRSwgY2FsbGJhY2spIHtcblx0ICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0fTtcblx0XG5cdHZhciB1dGlsSGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBlYWNoTWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNyk7XG5cdHZhciB1dGlsT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdHZhciBhc3NpZ24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0KTtcblx0ZXhwb3J0cy5jbGlja19wcm94eSA9ICBmdW5jdGlvbihvcHRpb25zLCBtZXRob2QpIHsgICAgXG5cdCAgdmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgb3JpRnVuYyA9IG9wdGlvbnNbbWV0aG9kXTtcblx0ICBvcHRpb25zW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXN1bHQgPSBvcmlGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB2YXIgZXZlbnQgPSBhcmd1bWVudHNbMF07XG5cdCAgICBpZiAoZXZlbnQgJiYgdXRpbE9iamVjdC5pc09iamVjdChldmVudCkgJiYgYXBsdXMgJiYgYXBsdXMuX3JlY29yZCkge1xuXHQgICAgICB2YXIgY3VycmVudHBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBjdXNwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgICBpZihldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQpIHtcblx0ICAgICAgICAgIGVhY2hNYXAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGlmICghdXRpbE9iamVjdC5pc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUpIHtcblx0ICAgICAgICAgICAgICBjdXNwW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmlkKSB7XG5cdCAgICAgICAgICBjdXNwW1wiZWxlbWVudF9pZFwiXSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuaWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICB2YXIgcm91dGUgPSBjdXJyZW50cGFnZS5yb3V0ZSB8fCBjdXJyZW50cGFnZS5pcyB8fCAndW5rbm93bl9wYWdlJztcblx0ICAgICAgaWYgKHJvdXRlID09PSAndW5rbm93bl9wYWdlJykge1xuXHQgICAgICAgIHVsb2coKS53KFwiZ2V0IHBhZ2VwYXRoIGZhaWxlZCBpbiBjbGlja19wcm94eVwiLCBjdXJyZW50cGFnZSk7XG5cdCAgICAgIH1cblx0ICAgICAgY3VzcCA9IGFzc2lnbihjdXNwLCB7IGlzX2F1dG86IDEgfSk7XG5cdCAgICAgIHZhciBldmVudGNvZGUgPSB1dGlsSGFzaC5oYXNoKHJvdXRlLCB1dGlsLmdldEFwcEtleSgpKSArIHV0aWxIYXNoLmhhc2gobWV0aG9kLCB1dGlsLmdldEFwcEtleSgpKTtcblx0ICAgICAgYXBsdXMuX3JlY29yZChldmVudGNvZGUsIFwiQ0xLXCIsIGN1c3ApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuXHRleHBvcnRzLmhhc2ggPSBmdW5jdGlvbihzdHIsIHMpIHtcblx0ICB2YXIgZGVmX3YgPSAxMzE1NDIzOTExO1xuXHQgIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG5cdCAgZm9yIChpID0gc3RyLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdCAgICBjaCA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcblx0ICB9XG5cdCAgdmFyIHJzID0gKGhhc2ggJiAweDdGRkZGRkZGKS50b1N0cmluZygxNik7XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MvdXRpbC9mb3JtYXQuanNcblx0ICog5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIHRyeVRvRGVjb2RlID0gcmVxdWlyZSgnLi90cnlUb0RlY29kZScpO1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gb2JqZWN0XG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgb2JqZWN0IOagvOW8j++8jOWmgu+8mlxuXHQgKiB7XG5cdCAqICAgYTogXCIxXCIsXG5cdCAqICAgYjogXCIyXCIsXG5cdCAqICAgYzogXCIzXCJcblx0ICogfVxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMm9iaiA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybiBwYXJhbXM7XG5cdCAgfVxuXHQgIHZhciBvYmogPSB7fTtcblx0ICBpZiAoIXBhcmFtcyB8fCB0eXBlb2YgcGFyYW1zICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIG9iajtcblx0ICB9XG5cdCAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoJyYnKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciBpdGVtID0gYVtpXTtcblx0ICAgIHZhciBpbmRleCA9IGl0ZW0uaW5kZXhPZignPScpO1xuXHQgICAgdmFyIGZyYWdtZW50ID0gaXRlbS5zcGxpdCgnPScpO1xuXHQgICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuXHQgICAgaWYgKGZyYWdtZW50Lmxlbmd0aCA9PT0gMikge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gZnJhZ21lbnRbMV0gfHwgJyc7ICBcblx0ICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpdGVtLnNsaWNlKDAsIGluZGV4KTtcblx0ICAgICAgdmFyIHZhbHVlID0gaXRlbS5zbGljZShpbmRleCArIDEsIGxlbikgfHwgJyc7XG5cdCAgICAgIG9ialtrZXldID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmpbZnJhZ21lbnRbMF1dID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdFxuXHQvLyBjb25zb2xlLmxvZygnVE9ETyBkZWxldGUgc19wbGFpbl9vYmonKTtcblx0dmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6Jztcblx0ZXhwb3J0cy5zX3BsYWluX29iaiA9IHNfcGxhaW5fb2JqO1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFyciwgc2tpcEVuY29kZSkge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgdmFyIGlzSW5QbGFuT2JqID0gay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMDtcblx0ICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcblx0ICAgIGEucHVzaChpc0luUGxhbk9iaiA/IF92YWx1ZSA6IChrICsgJz0nICsgX3ZhbHVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0ZXhwb3J0cy5hcnIycGFyYW0gPSBhcnIycGFyYW07XG5cdFxuXHQvKipcblx0ICogb2JqZWN0IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG5cdCAqIOWPguingSBhcnIycGFyYW0oKSDmlrnms5Vcblx0ICogQHBhcmFtIG9iaiB7T2JqZWN0fVxuXHQgKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcblx0ICpcblx0ICovXG5cdGV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuXHQgIHZhciBhID0gW107XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIF92O1xuXHQgIGZvciAoayBpbiBvYmopXG5cdCAgLy8gVE9ETzog5a+55LqOZXhhcmdzIGtleSwgdmFsdWUg5Lmf5pivb2Jq57G75Z6L77yM6ZyA6KaB6YCS5b2S6Kej5p6QIEDpkrDmmK1cblx0ICAgIGlmIChrICYmIG9iai5oYXNPd25Qcm9wZXJ0eShrKSkge1xuXHQgICAgICBpZiAodHlwZW9mIG9ialtrXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICB2ID0gJycgKyB0aGlzLm9iajJwYXJhbShvYmpba10pO1xuXHQgICAgICAgIF92ID0gdjtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2ID0gJycgKyBvYmpba107XG5cdCAgICAgICAgX3YgPSBrICsgJz0nICsgdjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcblx0ICAgICAgICBhLnB1c2goay5pbmRleE9mKHNfcGxhaW5fb2JqKSA9PT0gMCA/IHYgOiBfdik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYS5wdXNoKF92KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIHJldHVybiBhLmpvaW4oJyYnKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuXHQgIC8vIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIC8vIC8vIOWvuWdva2V55YaF55qEdmFsdWXnu5/kuIDliqDkuIDlsYLnvJbnoIFcblx0ICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAvLyAgIGZvciAodmFyIGsgaW4gZ29rZXkpIHtcblx0ICAvLyAgICAgaWYgKHR5cGVvZiBnb2tleVtrXSA9PT0gJ3N0cmluZycpIHtcblx0ICAvLyAgICAgICB0cnkge1xuXHQgIC8vICAgICAgICAgZ29rZXlba10gPSBlbmNvZGVVUklDb21wb25lbnQoZGVjb2RlVVJJQ29tcG9uZW50KGdva2V5W2tdKSk7XG5cdCAgLy8gICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAvLyAgICAgfVxuXHQgIC8vICAgfVxuXHQgIC8vIH1cblx0ICByZXR1cm4gZ29rZXk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgUHViU3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcblx0ICAgICAgaWYgKGFwbHVzLmFwbHVzX3B1YnN1Yikge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBhcGx1cy5hcGx1c19wdWJzdWLmmK/kuIDkuKrnm5HlkKzogIXvvIzlnKjmj5Lku7bljJblhoXpg6jkvJrnlKjliLDku5bvvIzmnInmlbDmja7lj5jljJblsIbkvJrlj5HlsITnm7jlupTnmoRkYXRhY2hhbmdl5LqL5Lu2XG5cdCAgICAgIGFwbHVzLmFwbHVzX3B1YnN1YiA9IFB1YlN1Yi5jcmVhdGUoKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG5cdCAqIOa2iOaBr+iuoumYheaooeWei1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdFxuXHR2YXIgZ2V0QXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgbGVuID0gYXJncy5sZW5ndGg7XG5cdCAgdmFyIF9hcmdzID0gbmV3IEFycmF5KGxlbiAtIDEpO1xuXHQgIGZvciAodmFyIGogPSAxOyBqIDwgbGVuOyBqKyspIHtcblx0ICAgIF9hcmdzW2ogLSAxXSA9IGFyZ3Nbal07XG5cdCAgfVxuXHQgIHJldHVybiBfYXJncztcblx0fTtcblx0XG5cdHZhciBQdWJTdWIgPSBCYXNlLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICog5a+5Zm7ov5vooYzmlq3oqIDvvIzkuI3mmK/igJhmdW5jdGlvbuKAmeexu+Wei+aKpemUme+8jOWQpuWImei/lOWbnmZuXG5cdCAgICovXG5cdCAgY2FsbGFibGU6IGZ1bmN0aW9uIChmbikge1xuXHQgICAgaWYgKCFpc0Z1bmN0aW9uKGZuKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcblx0ICAgIHJldHVybiBmbjtcblx0ICB9LFxuXHRcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIChwcm9wcykge1xuXHQgICAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcblx0ICAgIC8vIOe7keWumuivpeWunuS+i+eahOWxnuaAp1xuXHQgICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHRcblx0ICAgIGluc3RhbmNlLmhhbmRsZXJzID0gW107XG5cdCAgICBpbnN0YW5jZS5wdWJzID0ge307XG5cdCAgICByZXR1cm4gaW5zdGFuY2U7XG5cdCAgfSxcblx0XG5cdCAgc2V0SGFuZGxlcnM6IGZ1bmN0aW9uKGhhbmRsZXJzKSB7XG5cdCAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6K6i6ZiF5Y+l5p+E5Li64oCcZVR5cGXigJ3nmoTmtojmga/vvIzlvZPmnInmtojmga/ov4fmnaXmiafooYzlm57osIPlh73mlbDvvJrigJxo4oCdXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG5cdCAgICogQHJldHVybiBjb250ZXh0XG5cdCAgICovXG5cdCAgc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCl7XG5cdCAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcblx0ICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cdFxuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBwdWJzID0gX3NlbGYucHVicyB8fCB7fTtcblx0XG5cdCAgICB2YXIgYXJyID0gcHVic1tlVHlwZV0gfHwgW107XG5cdCAgICBpZiAoYXJyKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIF9hcmdzID0gYXJyW2ldKCk7XG5cdCAgICAgICAgaC5hcHBseShfc2VsZiwgX2FyZ3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgaGFuZGxlcnMgPSBfc2VsZi5oYW5kbGVycyB8fCBbXTtcblx0ICAgIGlmKCEoZVR5cGUgaW4gaGFuZGxlcnMpKSB7XG5cdCAgICAgIGhhbmRsZXJzW2VUeXBlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgaGFuZGxlcnNbZVR5cGVdLnB1c2goaCk7XG5cdCAgICBfc2VsZi5zZXRIYW5kbGVycyhoYW5kbGVycyk7XG5cdCAgICByZXR1cm4gX3NlbGY7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Y+W5raI6K6i6ZiF77yM5bCG5Lya5Y+W5raI4oCcZVR5cGXigJ3lj6Xmn4Tlr7nlupTnmoTigJxo4oCd5Zue6LCD5Ye95pWw5LiL55qE5omA5pyJ6K6i6ZiFXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG5cdCAgICogQHJldHVybiBjb250ZXh0XG5cdCAgICovXG5cdCAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG5cdCAgICAvLyDlr7nlm57osIPlh73mlbDov5vooYzmlq3oqIBcblx0ICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHMgPSB0aGlzLmhhbmRsZXJzW2VUeXBlXTtcblx0ICAgICAgaWYgKCFzKSByZXR1cm4gdGhpcztcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ29iamVjdCcgJiYgcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBoX3N0ciA9IGgudG9TdHJpbmcoKTtcblx0ICAgICAgICAgIHZhciBzX3N0ciA9IHNbaV0udG9TdHJpbmcoKTtcblx0ICAgICAgICAgIGlmIChoX3N0ciA9PT0gc19zdHIpIHtcblx0ICAgICAgICAgICAgcy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuaGFuZGxlcnNbZVR5cGVdID0gcztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tlVHlwZV07XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmtojmga/liIblj5HvvIzlsIbkvJrliIblj5HliLDmiYDmnInorqLpmIVlVHlwZeWPpeafhOeahOiuoumYheiAhVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDliIblj5Hmtojmga/lj6Xmn4Rcblx0ICAgKi9cblx0ICBwdWJsaXNoOiBmdW5jdGlvbiAoZVR5cGUpIHtcblx0XG5cdCAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcblx0ICAgIHZhciBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnMgfHwgW107XG5cdFxuXHQgICAgdmFyIHNpemUgPSBoYW5kbGVyc1tlVHlwZV0gPyBoYW5kbGVyc1tlVHlwZV0ubGVuZ3RoIDogMDtcblx0ICAgIGlmIChzaXplID4gMCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuXHQgICAgICAgIHZhciBmbiA9IGhhbmRsZXJzW2VUeXBlXVtpXTtcblx0ICAgICAgICBpZiAoaXNGdW5jdGlvbihmbikpIHtcblx0ICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH0sXG5cdFxuXHQgIGNhY2hlUHViczogZnVuY3Rpb24gKGVUeXBlKSB7XG5cdCAgICB2YXIgcHVicyA9IHRoaXMucHVicyB8fCB7fTtcblx0ICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFwdWJzW2VUeXBlXSkge1xuXHQgICAgICBwdWJzW2VUeXBlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgcHVic1tlVHlwZV0ucHVzaChmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBhcmdzO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUHViU3ViO1xuXG5cbi8qKiovIH0pLFxuLyogNDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuXHQgKiDln7rnsbvvvIzmj5DkvpvnsbvmiYDpnIDopoHnmoTln7rnoYDlsZ7mgKdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0Ly8g5Z+657G7XG5cdGZ1bmN0aW9uIEJhc2UoKSB7fVxuXHRcblx0Ly8g5bCGZXh0ZW5k5ZKMY3JlYXRl572u5LqOcHJvdG90eXBl5a+56LGh5Lit77yM5Lul5L6/5a2Q57G757un5om/XG5cdEJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKCkge307XG5cdEJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFxuXHQvLyDkuLrkuobog73lnKjln7rnsbvkuIrnm7TmjqXku6UuZXh0ZW5k55qE5pa55byP6L+b6KGM6LCD55SoXG5cdEJhc2UuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICByZXR1cm4gdGhpcy5wcm90b3R5cGUuZXh0ZW5kLmNhbGwodGhpcywgcHJvcHMpO1xuXHR9O1xuXHRcblx0QmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvKipcblx0ICAgKiBjcmVhdGXlrp7pmYXkuIrmmK/lr7luZXfnmoTlsIHoo4XvvJtcblx0ICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcblx0ICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG5cdCAgICovXG5cdCAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcblx0ICAvLyDnu5Hlrpror6Xlrp7kvovnmoTlsZ7mgKdcblx0ICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgIH1cblx0ICByZXR1cm4gaW5zdGFuY2U7XG5cdH07XG5cdFxuXHRCYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuXHQgIC8vIOa0vueUn+WHuuadpeeahOaWsOeahOWtkOexu1xuXHQgIHZhciBTdWJCYXNlID0gZnVuY3Rpb24oKSB7fTtcblx0ICB0cnkge1xuXHQgICAgLyoqXG5cdCAgICAgKiDnu6fmib/niLbnsbvnmoTlsZ7mgKflkozmlrnms5XvvIxcblx0ICAgICAqIOW9k+eEtuWJjeaPkOaYr+eItuexu+eahOWxnuaAp+mDveaUvuWcqHByb3RvdHlwZeS4rVxuXHQgICAgICog6ICM6Z2e5LiK6Z2iY3JlYXRl5pa55rOV55qE4oCc5a6e5L6L5bGe5oCn4oCd5LitXG5cdCAgICAgKi9cblx0ICAgIGlmICghaXNGdW5jdGlvbihPYmplY3QuY3JlYXRlKSkge1xuXHQgICAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICBmdW5jdGlvbiBGKCkge31cblx0ICAgICAgICBGLnByb3RvdHlwZSA9IG87XG5cdCAgICAgICAgcmV0dXJuIG5ldyBGKCk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgICBTdWJCYXNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXHRcblx0ICAgIC8vIOW5tuS4lOa3u+WKoOiHquW3seeahOaWueazleWSjOWxnuaAp1xuXHQgICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgICBTdWJCYXNlLnByb3RvdHlwZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHQgICAgU3ViQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJCYXNlO1xuXHRcblx0ICAgIC8vIOmcgOimgeS7pS5leHRlbmTnmoTmlrnlvI/lkowuY3JlYXRl55qE5pa55byP6LCD55So77yaXG5cdCAgICBTdWJCYXNlLmV4dGVuZCA9IFN1YkJhc2UucHJvdG90eXBlLmV4dGVuZDtcblx0ICAgIFN1YkJhc2UuY3JlYXRlID0gU3ViQmFzZS5wcm90b3R5cGUuY3JlYXRlO1xuXHQgIH0gY2F0Y2goZXJyKSB7XG5cdCAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGVycik7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBTdWJCYXNlO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQmFzZTtcblxuXG4vKioqLyB9KSxcbi8qIDQ2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDojrflj5bpobXpnaLkuIrnmoQgPG1ldGE+IOS4reS4jiBhcGx1cyDmiZPngrnnm7jlhbPnmoTlgLxcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNDcpKHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQ3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG5cdCAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciBfJCA9IChhcGx1cy5fJCA9IGFwbHVzLl8kIHx8IHt9KTsgLy8g5YaF6YOo5L2/55So55qE5Y+Y6YePXG5cdCAgXyQuaXNfdGVybWluYWwgPSB0cnVlO1xuXHQgIF8kLnNlbmRfcHZfY291bnQgPSAwO1xuXHQgIC8vIF8kLnN0YXR1cyA9IFNUQVRVUztcblx0ICAvLyBfJC5zY3JpcHRfbmFtZSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuc2NyaXB0X25hbWU7XG5cdCAgXyQuc3BtID0ge1xuXHQgICAgZGF0YToge31cblx0ICB9O1xuXHQgIF8kLm1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKSB8fCB7fTtcblx0ICBhcGx1cy5nbG9iYWxDb25maWcgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnO1xuXHRcblx0ICBmb3IgKHZhciBrIGluIGFwbHVzX2NvbmZpZy5tZXRhSW5mbykge1xuXHQgICAgbWV0YUluZm8uc2V0TWV0YUluZm8oaywgYXBsdXNfY29uZmlnLm1ldGFJbmZvW2tdKTtcblx0ICB9XG5cdCAgYXBsdXMuXyQgPSBfJDtcblx0XG5cdCAgYXBsdXMuaXNJbnRlcm5hdGlvbmFsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0Ly8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cdHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHRcblx0dmFyIGluZm8gPSB7fTtcblx0XG5cdHZhciBPQkpFQ1QgPSAnb2JqZWN0Jztcblx0dmFyIFNUUklORyA9ICdzdHJpbmcnO1xuXHRcblx0LyoqXG5cdCAqIEByZXR1cm5zIHt7fX1cblx0ICovXG5cdHZhciBsYXN0X2luZm87XG5cdGZ1bmN0aW9uIGdldEluZm8oKSB7XG5cdCAgbGFzdF9pbmZvID0gaW5mbyB8fCB7fTtcblx0ICByZXR1cm4gaW5mbztcblx0fTtcblx0ZXhwb3J0cy5nZXRJbmZvID0gZ2V0SW5mbztcblx0XG5cdC8vIOWmguaenOaciee8k+WtmO+8jOS9v+eUqOe8k+WtmOeahOWAvO+8jOayoeaciee8k+WtmOWImeS7jiBET00g5Lit6K+75Y+WXG5cdGZ1bmN0aW9uIHFHZXQgKCkge1xuXHQgIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xuXHR9O1xuXHRleHBvcnRzLnFHZXQgPSBxR2V0O1xuXHRcblx0LyoqXG5cdCAqIOWKqOaAgemFjee9rm1ldGFcblx0ICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG5cdCAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga1xuXHQgKiBAcGFyYW0ge09iamVjdH0gdlxuXHQgKi9cblx0ZnVuY3Rpb24gc2V0TWV0YUluZm8gKGssIHYpIHtcblx0ICBpZiAoIWxhc3RfaW5mbykge1xuXHQgICAgbGFzdF9pbmZvID0ge307XG5cdCAgfVxuXHQgIGlmKGsgPT09ICdhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5Jyl7XG5cdCAgICBjYXRjaEV4Y2VwdGlvbigndGhlIEFQSSBhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5IGlzIGRlcHJlY2F0ZWQsIGlmIG5lZWRlZCBwbGVhc2UgY29uY2F0IEFQTFVTIFNESyBzdXBwb3J0ZXInKTtcblx0ICAgIGFwbHVzLnJlY29yZCgnL2luamVjdC5yZWNvcmQuZ29rZXknLCdPVEhFUicsJycpO1xuXHQgIH1cblx0ICBsYXN0X2luZm9ba10gPSB2O1xuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRleHBvcnRzLnNldE1ldGFJbmZvID0gc2V0TWV0YUluZm87XG5cdFxuXHRcblx0dmFyIGNhdGNoRXhjZXB0aW9uID0gZnVuY3Rpb24gKG1zZykge1xuXHQgIHRyeSB7XG5cdCAgICBjb25zb2xlICYmIGNvbnNvbGUuZXJyb3IobXNnKTtcblx0ICB9IGNhdGNoIChlKSB7fVxuXHR9O1xuXHRleHBvcnRzLmNhdGNoRXhjZXB0aW9uID0gY2F0Y2hFeGNlcHRpb247XG5cdFxuXHQvKipcblx0ICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuXHQgKiDlrrnplJnmoKHpqoznp7vmpI3liLBhcGx1c+WPr+inhuWMluWfi+eCuemqjOivgeW3peWFt+WGhSAyMDE4LTAxLTEwIEDosIvlo6tcblx0ICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHR2YXIgZ2V0TWV0YUluZm8gPSBmdW5jdGlvbihrKSB7XG5cdCAgaWYgKCFsYXN0X2luZm8pIHtcblx0ICAgIGxhc3RfaW5mbyA9IHt9O1xuXHQgIH1cblx0ICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFJbmZvID0gZ2V0TWV0YUluZm87XG5cdFxuXHRcblx0LyoqXG5cdCAqIOivhuWIq+S4muWKoeWKqOaAgeaLk+WxleWPguaVsFxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgICBsb2drZXk6IGxvZ2tleSxcblx0ICogICAgZ21rZXk6IGdta2V5LFxuXHQgKiAgICBnb2tleTogZ29rZXlcblx0ICogfVxuXHQgKi9cblx0dmFyIGdldFVzZXJJbmplY3RHb2tleSA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgdmFyIHVzZXJGbiA9IGdldE1ldGFJbmZvKCdhcGx1cy1pbmplY3QtcmVjb3JkLWdva2V5Jyk7XG5cdCAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiB1c2VyRm4ob3B0cyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBvcHRzLmdva2V5O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5nZXRVc2VySW5qZWN0R29rZXkgPSBnZXRVc2VySW5qZWN0R29rZXk7XG5cdFxuXHQvKipcblx0ICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG5cdCAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuXHQgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cblx0ICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuXHQgKiAgQHBhcmFtIGtcblx0ICogIEBwYXJhbSB2XG5cdCAqL1xuXHR2YXIgYXBwZW5kTWV0YUluZm8gPSBmdW5jdGlvbiAoaywgdikge1xuXHQgIC8vIGNvbnNvbGUubG9nKGssIHYpO1xuXHQgIGlmIChrICYmIHYpIHtcblx0ICAgIC8vIGFwbHVzLXV0cGFyYW0gfHwgYXBsdXMtbmV4dHBhZ2UtdXRwYXJhbSB8fCBhcGx1cy1leGRhdGFcblx0ICAgIHZhciBwcm9jZXNzT2JqZWN0ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gU1RSSU5HID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBvbGRfdmFsdWUsIG5ld192YWx1ZSkpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfTtcblx0ICAgIC8vIGFwbHVzLWF1dG8tZXhwIHx8IGFwbHVzLWF1dG8tY2xrXG5cdCAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBuZXdfdmFsdWUgPSB0eXBlb2YgdiA9PT0gU1RSSU5HID8gSlNPTi5wYXJzZSh2KSA6IHY7XG5cdCAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgcHJvY2Vzc09iaiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciB0b1NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcblx0ICAgICAgICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgZmxhZztcblx0ICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcblx0ICAgIGlmIChrID09PSAnYXBsdXMtZXhpbmZvJykge1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZSwgZm9ybWF0LnBhcmFtMm9iaih2KSkpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChrID09PSAnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJykge1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuXHQgICAgICBpZiAoX29sZFZhbHVlKSB7XG5cdCAgICAgICAgZm9yICh2YXIgX2sgaW4gX29sZFZhbHVlKSB7XG5cdCAgICAgICAgICBpZiAodltfa10pIHtcblx0ICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlW19rXSwgdltfa10pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCBwYWdlUHJvcGVydGllcyk7XG5cdCAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgaWYgKF9vbGRWYWx1ZSkge1xuXHQgICAgICBpZiAodHlwZW9mIF9vbGRWYWx1ZSA9PT0gT0JKRUNUKSB7XG5cdCAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuXHQgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgdG1wX3BhcnNlID0gSlNPTi5wYXJzZShfb2xkVmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiB0bXBfcGFyc2UgPT09IE9CSkVDVCkge1xuXHQgICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG5cdCAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICghZmxhZykge1xuXHQgICAgICB0b1NldE1ldGFJbmZvKGssIHYpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXHRcblx0dmFyIF9zZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChhcmcxLCB2YWx1ZSkge1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBkZWZhdWx0TW9kZSA9ICdPVkVSV1JJVEUnO1xuXHQgIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG5cdCAgaWYgKHR5cGVvZiBhcmcxID09PSAnb2JqZWN0Jykge1xuXHQgICAgayA9IGFyZzEubWV0YU5hbWU7XG5cdCAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG5cdCAgICBtb2RlID0gYXJnMS5tb2RlIHx8IGRlZmF1bHRNb2RlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBrID0gYXJnMTtcblx0ICAgIHYgPSB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG5cdCAgICBpZiAoc2V0TWV0YUluZm8oaywgdikpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuXHQgICAgICB2YXIgcnMgPSB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0XG5cdCAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgICAgcmV0dXJuIHJzO1xuXHQgICAgfSBcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cbi8qKiovIH0pLFxuLyogNDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHZhciBGTiA9ICdmdW5jdGlvbic7XG5cdFxuXHR2YXIgZ2V0UHVic3ViID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcblx0ICB2YXIgZmxhZyA9IHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk47XG5cdCAgcmV0dXJuIGZsYWcgPyBwdWJzdWIgOiAnJztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcblx0ICogQHBhcmFtcyB7QXJyYXl9IGFyZ3MgW2tleSwgbXNnVmFsdWUxLCBtc2dWYWx1ZTIsIG1zZ1ZhbHVlMywgbXNnVmFsdWVOLCAuLi5dXG5cdCAqL1xuXHRleHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIucHVibGlzaCA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGNhY2hl5b2T5YmN55qE5YiG5Y+R5Ye95pWw55qE5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb0NhY2hlUHVicyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLmNhY2hlUHVicyA9PT0gRk4pIHtcblx0ICAgIHB1YnN1Yi5jYWNoZVB1YnMuYXBwbHkocHVic3ViLCBhcmdzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog6K6i6ZiF5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcblx0ICovXG5cdGV4cG9ydHMuZG9TdWJNc2cgPSBmdW5jdGlvbihrZXksIGNiKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5zdWJzY3JpYmUgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuc3Vic2NyaWJlKGtleSwgY2IpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDUwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDms6jlhaVsb2dDb25maWcs5L6b5ZCO57ut5o+S5Lu25L2/55SoXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldExvZ0NvbmZpZzogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbG9nQ29uZmlnID0ge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXHRcblx0ICAgICAgZm9yICh2YXIgayBpbiBwbHVnaW5zKSB7XG5cdCAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuXHQgICAgICAgICAgcGx1Z2luczogcGx1Z2luc1trXSxcblx0ICAgICAgICAgIGNvbnRleHQ6IHt9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBlYWNoKHBsdWdpbnNba10sIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICBsb2dDb25maWdba10uY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWcgfHwge307XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGxvZ0NvbmZpZztcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5QQUdFX0xPQURfVElNRTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvZXRhZy5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrlkIzmraVhcGx1c19pbml05bel5L2c5rWB55qE5L+h5oGvXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxFdGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBFTVBUWV9DTkEgPSAnRU1QVFlfQ05BJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIF9zeW5jRXRhZzogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gKG8pIHtcblx0ICAgICAgICB2YXIgY25hID0gbyAmJiBvLmRhdGEgPyBvLmRhdGEuY25hIDogJyc7XG5cdCAgICAgICAgaWYgKCFjbmEpIHtcblx0ICAgICAgICAgIGlmIChhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPT09ICdZJykge1xuXHQgICAgICAgICAgICAvLyDkuLrkuobop6PlhrPlubblj5Hpl67popjvvIzku45hcGx1c19xdWV1ZeaUueaIkOebtOaOpeeUqGFwbHVzLmFwbHVzX3B1YnN1YiBA6LCL5aOrIDIwMDIxLTAxLTE5XG5cdCAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ2V0YWcnLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayh2YWx1ZSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdG9TeW5jRXRhZygpOyAgXG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGNuYSk7XG5cdCAgICAgICAgICBjYWxsYmFjayhjbmEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgXG5cdCAgICAgIHZhciBhcGx1c19yaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0ICAgICAgdmFyIHVybDtcblx0XG5cdCAgICAgIGlmIChhcGx1c19yaG9zdF92KSB7XG5cdCAgICAgICAgdXJsID0gdXRpbEV0YWcuZ2V0VXJsKHtcblx0ICAgICAgICAgIGVnVXJsOiAoYXBsdXNfcmhvc3Rfdi5pbmRleE9mKCcvLycpID09PSAtMSA/ICcvLycgKyBhcGx1c19yaG9zdF92IDogYXBsdXNfcmhvc3RfdikgKyAnL2VnLmpzJ1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuXHQgICAgICAgICAgX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcuZWdVcmwgPSB1cmw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIGV0YWdTdG9yYWdlS2V5ID0gYXBsdXMuZ2xvYmFsQ29uZmlnLkVUQUdfU1RPUkFHRV9LRVk7XG5cdCAgICAgIHZhciB0b1N5bmNFdGFnID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICh1cmwpIHtcblx0ICAgICAgICAgIGFwbHVzLmZldGNoRXRhZ1N0YXR1cyA9ICdZJztcblx0ICAgICAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcblx0ICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0Jyxcblx0ICAgICAgICAgICAgcmVxdWVzdE1ldGhvZE5hbWU6ICdyZXF1ZXN0J1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPSAnTic7XG5cdCAgICAgICAgICAgIHZhciBldGFnID0gJyc7XG5cdCAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YSB8fCAnJztcblx0ICAgICAgICAgICAgICB2YXIgYXJyID0gZGF0YS5zcGxpdCgnOycpO1xuXHQgICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMSkge1xuXHQgICAgICAgICAgICAgICAgdmFyIGV0YWdLZXlWYWx1ZSA9IGFyclsxXTtcblx0ICAgICAgICAgICAgICAgIHZhciBldGFncyA9IGV0YWdLZXlWYWx1ZS5zcGxpdCgnPScpO1xuXHQgICAgICAgICAgICAgICAgZXRhZyA9IGV0YWdzWzFdIHx8ICcnO1xuXHQgICAgICAgICAgICAgICAgZXRhZyA9IGV0YWcucmVwbGFjZSgvXFxcIi9nLCAnJyk7XG5cdCAgICAgICAgICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5LCBldGFnKTtcblx0ICAgICAgICAgICAgICAgIGN0eC5zZXRTdG9yYWdlKHtcblx0ICAgICAgICAgICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcblx0ICAgICAgICAgICAgICAgICAgZGF0YToge1xuXHQgICAgICAgICAgICAgICAgICAgIGNuYTogZXRhZ1xuXHQgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIC8vIOS4uuS6huino+WGs+W5tuWPkemXrumimO+8jOS7jmFwbHVzX3F1ZXVl5pS55oiQ55u05o6l55SoYXBsdXMuYXBsdXNfcHVic3ViXG5cdCAgICAgICAgICAgICAgICAvLyDlubZjYWNoZeS9j+S4iuS4gOasoeeahOe7k+aenCBA6LCL5aOrIDIwMDIxLTAxLTE5XG5cdCAgICAgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIucHVibGlzaCgnZXRhZycsIGV0YWcpO1xuXHQgICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLmNhY2hlUHVicygnZXRhZycsIGV0YWcpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgIHVsb2coKS53KGUpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGlmICghZXRhZykge1xuXHQgICAgICAgICAgICAgIGV0YWcgPSBFTVBUWV9DTkE7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgY2FsbGJhY2soZXRhZyk7XG5cdCAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzMikge1xuXHQgICAgICAgICAgICB1bG9nKCkudyhyZXMyKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgdmFyIENOQSA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXkpO1xuXHQgICAgICBpZiAoQ05BKSB7XG5cdCAgICAgICAgY2FsbGJhY2soQ05BKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IGV0YWdTdG9yYWdlS2V5LFxuXHQgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBjaGVjayhyZXMpO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY2hlY2socmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHB25Y+R6YCB5Yiw5ZOq6YeM5Y67XG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuKAnHBhdXNl4oCd5pqC5YGc5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue5LiA5Liq5pW05pWw4oCcbuKAneWRiuivieS4remXtOS7tuKAnG7igJ3mr6vnp5LlkI7nu6fnu63miafooYzkuK3pl7Tku7Zcblx0ICAgICAqIOKAnOaaguWBnOKAneacgOWkmjEwc++8jOiLpei2heaXtuS4remXtOS7tuS8muW8uuWItue7p+e7reaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgLy8gdmFyIHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGV0YWdUaW1lb3V0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV0YWctdGltZW91dCcpO1xuXHQgICAgICB2YXIgZGVmYXVsdFRpbWUgPSAyMDA7XG5cdCAgICAgIHZhciB0aW1lID0gZGVmYXVsdFRpbWU7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGltZSA9IHBhcnNlSW50KGV0YWdUaW1lb3V0KTtcblx0ICAgICAgICBpZiAoaXNOYU4odGltZSkpIHtcblx0ICAgICAgICAgIHRpbWUgPSBkZWZhdWx0VGltZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5fc3luY0V0YWcoZnVuY3Rpb24gKGNuYSkge1xuXHQgICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuXHQgICAgICAgICAgX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcuY25hID0gY25hOyAgXG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0aW1lID49IDIwMCkge1xuXHQgICAgICAgICAgY2IoY25hKTsgIFxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIOWRiuiviWNvbXBvc2XmmoLlgZzmiafooYzkuK3pl7Tku7bvvIznm7TliLBjYuWbnuWIsOWQjuWGjee7p+e7rVxuXHQgICAgICBpZiAodGltZSA8IDIwMCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGltZTtcblx0ICAgIH0sXG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDUyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0XG5cdC8vIOS7hemZkOW8ueWGhe+8m+Wwj+exs+emgeeUqGVnLmpz5bqU5a+5562W55Wl77ya5L2/55So5Yqo5oCB5ZCO57yA5ZCNXG5cdC8vIOWQjue8gOWQjeeUn+aIkOaWueazlTog5b2T5YmN5pe26Ze05oiz6L2sMTbov5vliLbvvIzlj5blkI445L2N77yMXG5cdC8vIGZ1bmN0aW9uIGV0YWdVcmxTdWZmaXgoZXRhZ1VybCkge1xuXHQvLyAgIHZhciBkeW5hbWljVXJsID0gZXRhZ1VybDtcblx0Ly8gICB0cnkge1xuXHQvLyAgICAgaWYoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdC8vICAgICAgIHRyeSB7XG5cdC8vICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQvLyAgICAgICAgIHZhciBkeW5hbWljU3VmZml4ID0gdGltZVN0YW1wLnRvU3RyaW5nKDE2KS5zbGljZSgtOCk7XG5cdC8vICAgICAgICAgd2hpbGUoZHluYW1pY1N1ZmZpeC5sZW5ndGggPCA4KSB7XG5cdC8vICAgICAgICAgICBkeW5hbWljU3VmZml4ID0gZHluYW1pY1N1ZmZpeCArICdmJztcblx0Ly8gICAgICAgICB9XG5cdC8vICAgICAgICAgZHluYW1pY1VybCA9IGV0YWdVcmwucmVwbGFjZSgvZWcuanMvLCBkeW5hbWljU3VmZml4ICsgJy5qcycpO1xuXHQvLyAgICAgICB9IGNhdGNoKGUpIHtcblx0Ly8gICAgICAgfVxuXHQvLyAgICAgICByZXR1cm4gZHluYW1pY1VybDtcblx0Ly8gICAgIH1cblx0Ly8gICB9IGNhdGNoKGUpIHtcblx0XG5cdC8vICAgfVxuXHQvLyAgIHJldHVybiBkeW5hbWljVXJsO1xuXHQvLyB9XG5cdFxuXHRleHBvcnRzLmdldFVybCA9IGZ1bmN0aW9uIChldGFnKSB7XG5cdCAgdmFyIHVybCA9IHV0aWxEYXRhLmdldFVybChldGFnICYmIGV0YWcuZWdVcmwpOyAgXG5cdCAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuXHQgIC8vIOWmguaenGVnVXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG5cdCAgLy8gaWYgKHVybC5pbmRleE9mKCdodHRwJykgIT09IDApIHtcblx0ICAvLyAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuXHQgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAvLyAgIH1cblx0ICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgIC8vIH1cblx0ICByZXR1cm4gdXJsO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDUzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3doZW5fdG9fc2VuZC5qc1xuXHQgKlxuXHQgKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7Zcblx0ICogICBmbjogZ2V0TWV0YUluZm8g57un5om/6IezQmFzZVxuXHQgKiAgIGZuOiBydW4gKOaPkuS7tuagh+WHhueahOaJp+ihjOWFpeWPoylcblx0ICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIk1BTlwiOiDkuI3oh6rliqjlj5HpgIFQVuaXpeW/lztcblx0ICogICBhcGx1cy13YWl0aW5nPVwiblwiOiDlhbbkuK1u5Li65aSn5LqOMeeahOato+aVtOaVsCwgYXBsdXPlnKjnrYnlvoVu5q+r56eS5LmL5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG5cdCAqXG5cdCAqICAgZGVwc++8miDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDojrflj5ZtZXRhX2luZm9cblx0ICAgICAqIFRPRE8g6Iul5LuK5ZCO5pyJ5Yqo5oCB5L+u5pS5bWV0YV9pbmZv55qE6ZyA5rGC77yMXG5cdCAgICAgKiDmraTlpITpnIDopoHliqjmgIHku44gbWV0YUluZm/mqKHlnZfkuK3ljrvosIPnlKhnZXRJbmZv5pa55rOV5p2l6I635Y+W55u45YWz5L+h5oGv77yM6L+Z5qC35YGa55qE5Z2P5aSE5piv5raI6ICX5oCn6IO9XG5cdCAgICAgKi9cblx0ICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRBcGx1c1dhaXRpbmc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbWV0YV9pbmZvID0gdGhpcy5nZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+j77yM6YWN572u5LqGYXBsdXNXYWl0aW5nIOW5tuS4lCDmmK9hcGx1c+iHquWKqOaJk+eCueaJjei1sOi/meautemAu+i+kVxuXHQgICAgICogPG1ldGEgbmFtZT1cImFwbHVzLXdhaXRpbmdcIiBjb250ZW50PVwieHh4XCIgLz5cblx0ICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG5cdCAgICAgKiAgIHh4eDogJzEnIC0g5bCd6K+V562J5b6FNuenkuWQjuWPkXB2XG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKHN0YXRlLCBjYikge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIGFwbHVzV2FpdGluZyA9IHRoaXMuZ2V0QXBsdXNXYWl0aW5nKCk7XG5cdCAgICAgIGlmIChhcGx1c1dhaXRpbmcgJiYgY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYgPSB7XG5cdCAgICAgICAgICBhcGx1c1dhaXRpbmc6IGFwbHVzV2FpdGluZ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgc3dpdGNoKGFwbHVzV2FpdGluZykge1xuXHQgICAgICAgIGNhc2UgYXBsdXNTdGF0aWMuX1VTRVJfSUQ6XG5cdCAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG5cdCAgICAgICAgY2FzZSAnTUFOJzpcblx0ICAgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgICAgY2FzZSAnMSc6XG5cdCAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgfSwgNjAwMCk7XG5cdCAgICAgICAgICByZXR1cm4gNjAwMDtcblx0ICAgICAgICBkZWZhdWx0OlxuXHQgICAgICAgICAgdmFyIG4gPSBhcGx1c1dhaXRpbmcgKiAxO1xuXHQgICAgICAgICAgaWYgKChuICsgJycpICE9PSAnTmFOJykge1xuXHQgICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgICAgfSwgbik7XG5cdCAgICAgICAgICAgIHJldHVybiBuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHdoZXJlX3RvX3NlbmRfbWluaV91bS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WIG1ldGFfaW5mbyBcblx0ICAgICovXG5cdCAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oa2V5KSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHJldHVybiAoXyQubWV0YV9pbmZvIHx8IHt9KVtrZXldO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRIb3N0VXJsOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIHRyYWNrRG9tYWluID0gdGhpcy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pOyAgICAgIFxuXHQgICAgICBpZiAoIXV0aWwuY2hlY2tEb21haW4odHJhY2tEb21haW4pKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgbWluaUxvZyA9IG1pbmkuZ2V0TG9nRG9tYWluKCk7XG5cdCAgICAgIGlmICghbWluaUxvZykge1xuXHQgICAgICAgIHVsb2coKS50aXBfdygnY3VycmVudCBtaW5pYXBwIGZyYW1ld29yayBpcyBub3Qgc3VwcG9ydGVkISEnKTtcblx0ICAgICAgICByZXR1cm4gJyc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblx0ICAgICAgfVxuXHQgICAgICAvLyB2YXIgdXJsID0gWycvLycsIHJob3N0LCBsb2dEb21haW5dO1xuXHQgICAgICByZXR1cm4gdXRpbC5maXhEb21haW4odHJhY2tEb21haW4pICsgbWluaUxvZztcblx0ICAgIH0sXG5cdFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kID0gJ1BPU1QnO1xuXHQgICAgICB2YXIgdXJsID0gdGhpcy5nZXRIb3N0VXJsKCk7XG5cdCAgICAgIGlmICghdXJsIHx8ICh1cmwuaW5kZXhPZignaHR0cHM6Ly8nKSA8IDAgJiYgdXJsLmluZGV4T2YoJ2h0dHA6Ly8nKSkpIHtcblx0ICAgICAgICB1bG9nKCkudygnY3VycmVudCB0cmFja0RvbWFpbiBpbnZhbGlkOiAnICsgdXJsKTtcblx0ICAgICAgICByZXR1cm4gJ2RvbmUnO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsID0gdXJsO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA1NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGF0X3RvX3NlbmQuanNcblx0ICpcblx0ICog5L2c55So77ya5pel5b+X5Y+R6YCB5Z+656GA5Y+C5pWw5pS26ZuG77yaXG5cdCAqICAgICAg5oyJ6aG65bqP5bCGYXBsdXMucHZfZGF0YS5iYXNpY+OAgWV4cGFyYW1z44CBb2xkUGFyYW1z44CBYXBsdXMucHZfZGF0YS5leHRyYeWbm+S4reexu+Wei+eahOWPguaVsG1lcmdl5Zyo5LiA5Liq5pWw57uE5LitXG5cdCAqIGRlcHM6IOaXoFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpOyAgXG5cdHZhciBsb2dJZCA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpO1xuXHR2YXIgdXRpbFBhcmFtcyA9IF9fd2VicGFja19yZXF1aXJlX18oNTcpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgQ05UID0gYXBsdXNTdGF0aWMuU1BNX0NOVDtcblx0dmFyIFVSTCA9IGFwbHVzU3RhdGljLlNQTV9VUkw7XG5cdHZhciBQUkUgPSBhcGx1c1N0YXRpYy5TUE1fUFJFO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGdldENvbW1vblBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciBldGFnID0gY29udGV4dC5ldGFnIHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtID0gXyQuc3BtIHx8IHt9O1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIHBsYXRmb3JtVHlwZSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwbGF0Zm9ybVR5cGUnKSB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuXHRcblx0ICAgICAgdmFyIHVzZXJJbmZvID0ge1xuXHQgICAgICAgIF9kZXZfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfZGV2X2lkJyksXG5cdCAgICAgICAgX2Fub255X2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpLFxuXHQgICAgICAgIF91c2VyX2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCksXG5cdCAgICAgICAgX3VzZXJfbmljazogYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKSxcblx0ICAgICAgICBfc2Vzc2lvbl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19zZXNzaW9uX2lkJyksXG5cdCAgICAgICAgdWFpZDogKGFwbHVzLmdldE1ldGFJbmZvKCd1YWlkJykgKyAnJykgPT09ICcxJyA/IDEgOiAwLFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuXHQgICAgICAgIHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHQgICAgICAgIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICAgIHZhciByb3V0ZSA9IHBhZ2Uucm91dGUgfHwgcGFnZS5pcyB8fCAnJztcblx0ICAgICAgICB1c2VySW5mby5fcGFnZV90aXRsZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VUaXRsZShyb3V0ZSkgfHwgJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNsaWVudCA9IGFwbHVzLl9hcGx1c19jbGllbnQgfHwge307XG5cdCAgICAgIHZhciBnbG9iYWxDb25maWcgPSBhcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdFxuXHQgICAgICB2YXIgdXJsID0gJy0nO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuXHQgICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLTFdIHx8IHt9O1xuXHQgICAgICAgIHZhciBjdXJQYXRoID0gdXNlcmRhdGEuZ29rZXkgJiYgdXNlcmRhdGEuZ29rZXkuY3VycmVudFBhdGg7XG5cdCAgICAgICAgdXJsID0gY3VyUGF0aCB8fCBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICBcblx0ICAgICAgdmFyIGxvZ0lkS2V5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyB1cmw7XG5cdCAgICAgIHZhciBsb2dJZEtleTIgPSBjbGllbnQubW9kZWwgKyBjbGllbnQubmV0d29ya1R5cGUgKyBjb25maWcudGl0bGUgKyBldGFnLmNuYTtcblx0ICAgICAgdmFyIGNhY2hlID0gKGdsb2JhbENvbmZpZy5pc0RlY29kZVVybCA/ICdEQ18nIDogJycpICsgbG9nSWQuZ2V0TG9nSWQobG9nSWRLZXksIGxvZ0lkS2V5Mik7XG5cdFxuXHQgICAgICB2YXIgYXBwS2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcblx0ICAgICAgaWYgKCFhcHBLZXkpIHtcblx0ICAgICAgICB1bG9nKCkudygncGxlYXNlIHNldCBhcHBLZXkgaW4gYXBsdXMgbWV0YUluZm8gYmVmb3JlIHNlbmRQViEnKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY29tbW9uUGFyYW1zID0gIE9iamVjdC5hc3NpZ24oe30sIHtcblx0ICAgICAgICBhcHBLZXk6IGFwcEtleSxcblx0ICAgICAgICBjYWNoZTogY2FjaGUsXG5cdCAgICAgICAgY25hOiBldGFnLmNuYSxcblx0ICAgICAgICBldGFnOiBldGFnLFxuXHQgICAgICAgIHByZTogXyQucGFnZV9yZWZlcnJlciB8fCAnLScsXG5cdCAgICAgICAgc2RrX2luZm86IHtcblx0ICAgICAgICAgIGpzdmVyOiBnbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG5cdCAgICAgICAgICBsdmVyOiBnbG9iYWxDb25maWcubHZlcixcblx0ICAgICAgICAgIGN1c3RvbVNka0lkOiBhcGx1cy5nZXRNZXRhSW5mbygnY3VzdG9tU2RrSWQnKSB8fCAnJyxcblx0ICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB0aXRsZTogY29uZmlnLnRpdGxlIHx8ICcnLFxuXHQgICAgICAgIHVybDogdXJsIHx8ICctJyxcblx0ICAgICAgICBjbGllbnQ6IGNsaWVudCxcblx0ICAgICAgICB0aW1lWm9uZTogdXRpbFBhcmFtcy5nZXRUaW1lWm9uZSgpLFxuXHQgICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcblx0ICAgICAgICBtZXRob2Q6IHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kXG5cdCAgICAgIH0sIHVzZXJJbmZvKTtcblx0ICAgICAgXG5cdCAgICAgIHZhciBnb2tleSA9IHVzZXJJbmZvO1xuXHRcblx0ICAgICAgaWYgKHNwbS5zcG1fdXJsKSB7XG5cdCAgICAgICAgZ29rZXlbVVJMXSA9IHNwbS5zcG1fdXJsIHx8ICcnOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNwbS5zcG1fcHJlKSB7XG5cdCAgICAgICAgZ29rZXlbUFJFXSA9IHNwbS5zcG1fcHJlIHx8ICcnOyAgXG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmIChzcG0uc3BtX2NudCkge1xuXHQgICAgICAgIGdva2V5W0NOVF0gPSBzcG0uc3BtX2NudCB8fCAnJztcblx0ICAgICAgfVxuXHQgICAgICBnb2tleVthcGx1c1N0YXRpYy5QVklEXSA9IGFwbHVzLnB2aWQgfHwgJyc7XG5cdCAgICAgIGNvbW1vblBhcmFtcy5zZXNzaW9uQXJncyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1zZXNzaW9uLWFyZ3MnKTtcblx0ICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTsgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG5cdCAgICAgIC8vIOmcgOimgeWIoOmZpOeahOS7o+eggS0tLS1lbmRcblx0ICAgICAgY29tbW9uUGFyYW1zLmdva2V5ID0gZ29rZXk7XG5cdCAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICBnZXRQdlBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuXHQgICAgICBpZiAoIXRoaXMub3B0aW9ucy5jb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGNvbW1vblBhcmFtcy5zZGtfaW5mby5tYW5zbmRsb2cgPSAxO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25QYXJhbXMsIHtcblx0ICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5QVl9DT0RFLFxuXHQgICAgICAgIGxvZ3R5cGU6ICcxJyxcblx0ICAgICAgICBsb2drZXk6ICcvdnguZ2lmJyxcblx0ICAgICAgICBldmVudF90aW1lc3RhbXA6IGFwbHVzLl8kLnNlbmRfcHZfY291bnQgPiAwID8gbmV3IERhdGUoKSA6IGFwbHVzLmxvZ0NvbmZpZy5wYWdlTG9hZFRpbWUsXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblx0XG5cdCAgICAgIHZhciBoamxqUGFyYW1zID0ge1xuXHQgICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgdXNlcmRhdGEuZ21rZXksIC8vIGFwbHVzU3RhdGljLk9USEVSX0NPREUsXG5cdCAgICAgICAgbG9ndHlwZTogJzInLFxuXHQgICAgICAgIGxvZ2tleTogdXNlcmRhdGEubG9na2V5LFxuXHQgICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcblx0ICAgICAgICAvLyBtYW5zbmRsb2c6ICcxJyxcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldENvbW1vblBhcmFtcygpLCBoamxqUGFyYW1zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG5cdCAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG5cdCAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG5cdCAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuXHQgICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3Rcblx0ICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHBhcmFtcyA9IHt9O1xuXHQgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSBcIlBWXCIpIHtcblx0ICAgICAgICBwYXJhbXMgPSB0aGlzLmdldFB2UGFyYW1zKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRIamxqUGFyYW1zKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBwYXJhbXM7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIHB2aWRcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdHZhciBnZXRSYW5kb21JZCA9IGZ1bmN0aW9uIChzaXplKSB7XG5cdCAgLyoqXG5cdCAgICog55Sf5oiQ5pys6aG155qEIHB2IGlkXG5cdCAgICogcHYgaWQg5Y+q6ZyA6KaB5b2T5YmN55So5oi35Lya6K+d5ZSv5LiA5Y2z5Y+v77yM6L+Z5YS/5L2/55So5LiA5LiqIDYg5L2N55qEIDE2IOi/m+WItuaVsOWtl1xuXHQgICAqL1xuXHQgIHZhciBybmRfc3RycyA9ICcnO1xuXHQgIHZhciBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XG5cdCAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcblx0ICB2YXIgY2hhcjtcblx0XG5cdCAgLyoqXG5cdCAgICog6Kej5Yaz6YOo5YiGIHNwbSDooqsgR0ZXIOWimeS6hueahOaDheWGte+8jOWmgiAyMi5nbFxuXHQgICAqIOaOkumZpCBwdmlkIOS7pSBnbCDlvIDlpLTnmoTmg4XlhrVcblx0ICAgKi9cblx0ICBmdW5jdGlvbiBoYW5kbGVQVklkIChjaGFyUG9zKSB7XG5cdCAgICB2YXIgY2hhcnNXaXRob3V0RyA9ICcwMTIzNDU2Nzg5YWJjZGVmaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkhJSktMTU5PUFFSU1RVVldYWVonO1xuXHQgICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblx0XG5cdCAgICBpZiAoY2hhclBvcyA9PSAxKSB7XG5cdCAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuXHQgICAgfSBlbHNlIGlmIChjaGFyUG9zID09IDIpIHtcblx0ICAgICAgcmV0dXJuIGNoYXJzV2l0aG91dEwuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYwKSwgMSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJzAnO1xuXHQgIH07XG5cdFxuXHQgIHdoaWxlIChybmRfc3Rycy5sZW5ndGggPCBzaXplKSB7XG5cdCAgICBjaGFyID0gY2hhcnMuc3Vic3RyKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDYyKSwgMSk7XG5cdCAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuXHQgICAgaWYgKCFoYW5kbGVkICYmIHJuZF9zdHJzLmxlbmd0aCA8PSAyICYmIChjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnIHx8IGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnbCcpKSB7XG5cdCAgICAgIGlmIChybmRfc3Rycy5sZW5ndGggPT09IDAgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuXHQgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG5cdCAgICAgICAgICBjaGFyID0gaGFuZGxlUFZJZCgxKTtcblx0ICAgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChybmRfc3Rycy5sZW5ndGggPT0gMSAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnICYmIHJuZF9zdHJzLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpID09ICdnJykge1xuXHQgICAgICAgIGNoYXIgPSBoYW5kbGVQVklkKDIpO1xuXHQgICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBybmRfc3RycyArPSBjaGFyO1xuXHQgIH1cblx0ICByZXR1cm4gcm5kX3N0cnM7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRDaGFycyAoYXJncywgc2l6ZSwgZGVmYXVsdFZhbCkge1xuXHQgIGlmIChhcmdzKSB7XG5cdCAgICByZXR1cm4gdXRpbEhhc2guaGFzaChlbmNvZGVVUklDb21wb25lbnQoYXJncykpLnN1YnN0cigwLCBzaXplKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGRlZmF1bHRWYWw7XG5cdCAgfVxuXHR9XG5cdFxuXHRleHBvcnRzLmdldExvZ0lkID0gZnVuY3Rpb24gKHBhZ2VVcmwsIGxvZ05hbWUpIHtcblx0ICB2YXIgcmFuZG9tOENoYXJzID0gZ2V0UmFuZG9tSWQoOCk7XG5cdCAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG5cdCAgdmFyIHJhbmRvbTZDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNik7XG5cdCAgcmV0dXJuIFtcblx0ICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG5cdCAgICBnZXRDaGFycyhsb2dOYW1lLCA0LCByYW5kb200Q2hhcnMpLFxuXHQgICAgcmFuZG9tNkNoYXJzXG5cdCAgXS5qb2luKCcnKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIOi/lOWbnkdNVOagvOW8j+eahOaXtuWMuu+8jOWmgu+8mkdNVCswNTo0NSwgR01ULTA3OjAwLCBHTVQrMDg6MDBcblx0ICovXG5cdGV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF90aW1lWm9uZSA9IC1uZXcgRGF0ZSgpLmdldFRpbWV6b25lT2Zmc2V0KCkgLyA2MDtcblx0ICB2YXIgX2FuZCA9ICcrJztcblx0ICBpZiAoX3RpbWVab25lIDwgMCkge1xuXHQgICAgX2FuZCA9ICctJztcblx0ICB9XG5cdCAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcblx0ICB2YXIgcmVtYWluZGVyID0gTWF0aC5hYnMocGFyc2VJbnQoX3RpbWVab25lKSAtIF90aW1lWm9uZSk7XG5cdCAgdmFyIHJlbWFpbmRlclpvbmUgPSAnMDAnO1xuXHQgIGlmIChyZW1haW5kZXIgPiAwKSB7XG5cdCAgICByZW1haW5kZXJab25lID0gNjAgKiByZW1haW5kZXI7XG5cdCAgfVxuXHQgIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiAxLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWPguaVsDogYmFzaWNMaXN0XG5cdCAgICAgKiAyLiBiZWFjb27mianlsZXlj4LmlbA6IGV4cGFyYW1zXG5cdCAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG5cdCAgICAgKiDkuK3pgJTlpITnkIZfJOWFqOWxgOWPmOmHjzogcHJvY2Vzc0xvZGFzaERvbGxhclxuXHQgICAgICogNC4gbG9jYWxTdG9yYWdl5Lit5a2Y5YKo55qE5LiK5LiA6aG1c3Bt5L+h5oGvOiBzcG1hYnRlc3Rcblx0ICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGlzVEJFbnYgPSBtaW5pLmlzVEIoKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICAgICAgdmFyIGN1cnJlbnRQYWdlICA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuXHQgICAgICBpZiAoY3VycmVudFBhZ2UgJiYgIWxvZ2RhdGEudGl0bGUpIHtcblx0ICAgICAgICBsb2dkYXRhLnRpdGxlID0gY3VycmVudFBhZ2Uucm91dGUgfHwgJyc7ICBcblx0ICAgICAgfVxuXHQgICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgICAgbG9nZGF0YS51cmwgPSAoIWlzVEJFbnYgPyAnaHR0cHM6Ly8nKyBsb2dkYXRhLmNsaWVudC5hcHBJZCArICdfJyA6ICcnKSArIChjdXJyZW50UGFnZS5yb3V0ZSAgfHwgY3VycmVudFBhZ2UuaXMgfHwgJy0nKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHByZSA9ICctJztcblx0ICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICB2YXIgcHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuXHQgICAgICAgIHByZSA9ICghaXNUQkVudiAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgPyAnaHR0cHM6Ly8nKyBsb2dkYXRhLmNsaWVudC5hcHBJZCArICdfJyA6ICcnKSArIChwcmVQYWdlLnJvdXRlIHx8IHByZVBhZ2UuaXMgfHwgJy0nKTtcblx0ICAgICAgfVxuXHQgICAgICBsb2dkYXRhLnByZSA9IHByZTtcblx0ICAgICAgaWYgKGxvZ2RhdGEuc2RrX2luZm8pIHtcblx0ICAgICAgICBsb2dkYXRhLnNka19pbmZvLndpbmRtaWxsID0gJzEnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX3NlbmRwdlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgaXNVbmRlZmluZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcblx0ICAgICAqXG5cdCAgICAgKiBnb2tleTpcblx0ICAgICAqICAg6L+Z5Z2X5Li65a+55Y6G5Y+ydXNlcmRhdGHkvKDpgJLnmoTlhbzlrrnlgZrms5XvvIxUT0RP77ya5o6o5Yqo5bqU55So5pa55Y+Y5pu0XG5cdCAgICAgKiAgIOW6lOeUqOaWueS8oOmAkueahGdva2V55qC85byP5bqU55So5pa56Ieq6KGM5Yaz5a6a77yMXG5cdCAgICAgKiAgICAg5aaCIGdva2V5PVwiYT0xJmI9MlwiIOaIliB7XCJhXCI6W3tcImtleVwiOjIwMTYxMjI2MTU1MCxcInZhbHVlXCI6MC4xfSx7XCJrZXlcIjoyMDE2MTIyNjE2MDAsXCJ2YWx1ZVwiOjAuNX0se1wia2V5XCI6MjAxNjEyMjYxNjEwLFwidmFsdWVcIjoxfV19XG5cdCAgICAgKiAgIOi/meWdl+mAu+i+keaYr+mAoOaIkGV4dGVuZGFyZ3PlhoXpg6jlh7rnjrDlpJrkuKrmlpzmnaDnmoTlhYPlh7bvvIHvvIHvvIFcblx0ICAgICAqIHBhZ2VfaWQ6XG5cdCAgICAgKiAgIOaciXBhZ2VfaWTlsLHlnKhzcG1i5Lit5re75Yqg5a2Q5Y+C5pWwXG5cdCAgICAgKiAgIOaXoHBhZ2VfaWTlsLHmuIXpmaRzcG1i5Lit55qE5a2Q5Y+C5pWwXG5cdCAgICAgKiBzcG1fY250XG5cdCAgICAgKiAgIOabtOaUueWujHNwbWLkvY3ov5jpnIDopoHmm7TmlrBzcG1fY250IEDosIvlo6sgaW4gMjAxOC0wMy0yMCAg5Lul5YWNdG9VVOeahHNwbS1jbnTkuKLlpLHliIbmobblj7dcblx0ICAgICAqIOS4quaAp+WMluWPguaVsO+8mlxuXHQgICAgICogICAxLiAoYXBsdXPmpI3lhaUpOiA8bWV0YSBuYW1lPVwiYXBsdXMtY3B2ZGF0YVwiIGNvbnRlbnQ9XCJKU09Oc3RyaW5nXCI+XG5cdCAgICAgKiAgIDIuIOaWueazleS8oOWFpTogYXBsdXMuc2VuZFBWKHtDT05GSUd9LCB7VVNFUkRBVEV9KTtcblx0ICAgICAqIOWPjeS9nOW8iueahOaWh+aho+WuvemrmDogX3B3LF9waFxuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cblx0ICAgICAqL1xuXHQgICAgZ2V0VXNlcmRhdGE6IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBkID0ge307XG5cdFxuXHQgICAgICBpZiAoY29uZmlnICYmICFjb25maWcuaXNfYXV0bykge1xuXHQgICAgICAgIGlmIChjb25maWcuZ29rZXkpIHtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgICBkID0gZm9ybWF0LnBhcmFtMm9iaihjb25maWcuZ29rZXkpO1xuXHQgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLmdva2V5ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgICBkID0gY29uZmlnLmdva2V5O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNvbWJvVXNlcmRhdGEgPSBmdW5jdGlvbihfZGF0YSkge1xuXHQgICAgICAgIGlmKGlzQXJyYXkoX2RhdGEpKXtcblx0ICAgICAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKHt9LCBkLCBpdGVtKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgX2RhdGEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgICAgY29tYm9Vc2VyZGF0YShhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScpKTtcblx0XG5cdCAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdmFyIHBhZ2VOYW1lID0gY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMgfHwgJ3BhZ2UnO1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJykgfHwge307XG5cdCAgICAgIHZhciBwYWdlUHJvcGVydHkgPSBwYWdlUHJvcGVydGllc1twYWdlTmFtZV07XG5cdCAgICAgIGlmICh0eXBlb2YgcGFnZVByb3BlcnR5ID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGNvbWJvVXNlcmRhdGEocGFnZVByb3BlcnR5KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgY29tYm9Vc2VyZGF0YSh1c2VyZGF0YSk7XG5cdFxuXHQgICAgICByZXR1cm4gZDtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmm7TmlrBwcmXvvIjlnKjov5nph4zlgZrnmoTljp/lm6DmmK/vvIxwcmXlj4LmlbDlsZ7kuo5iYXNpY+WPguaVsO+8jOS9huaYr3VzZXJkYXRh5Lit5aaC5Lyg6YCS5LqGcmVmZXJyZXLvvIzlj6/ku6Xopobnm5ZwcmXvvIlcblx0ICAgICAqL1xuXHQgICAgdXBkYXRlUHJlOiBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcucmVmZXJyZXIpIHtcblx0ICAgICAgICBfJC5wYWdlX3JlZmVycmVyID0gY29uZmlnLnJlZmVycmVyO1xuXHQgICAgICAgIGRhdGEucHJlID0gY29uZmlnLnJlZmVycmVyO1xuXHQgICAgICB9XG5cdCAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoJ18kJywgXyQpO1xuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOabtOaWsOmhtemdoueahFVybFxuXHQgICAgICovXG5cdCAgICB1cGRhdGVVcmw6ZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICBpZihjb25maWcmJmNvbmZpZy5wYWdlVXJsKXtcblx0ICAgICAgICBkYXRhLnVybCA9IGNvbmZpZy5wYWdlVXJsO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgfSxcblx0ICAgIC8qKlxuXHQgICAgICog5pu05paw5p2l5rqQc3BtXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVNwbVVybDpmdW5jdGlvbihkYXRhKXtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBzcG1VcmwgPSBjb25maWdbYXBsdXNTdGF0aWMuU1BNX1VSTF18fGNvbmZpZy5zcG1Vcmw7XG5cdCAgICAgIGlmKCFpc1VuZGVmaW5lZChzcG1VcmwpKXtcblx0ICAgICAgICBkYXRhLmdva2V5W2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtVXJsO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgfSxcblx0ICAgIC8qKlxuXHQgICAgICog5pu05paw5p2l5rqQ55qE5p2l5rqQc3BtXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVNwbVByZTpmdW5jdGlvbihkYXRhKXtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBzcG1QcmUgPSBjb25maWdbYXBsdXNTdGF0aWMuU1BNX1BSRV18fGNvbmZpZy5zcG1QcmU7XG5cdCAgICAgIGlmKCFpc1VuZGVmaW5lZChzcG1QcmUpKXtcblx0ICAgICAgICBkYXRhLmdva2V5W2FwbHVzU3RhdGljLlNQTV9QUkVdID0gc3BtUHJlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgfSxcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgZCA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldFVzZXJkYXRhKCksIGQudXNlcmRhdGEgfHwge30pO1xuXHQgICAgICBkLmdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZC5nb2tleSwgdXNlcmRhdGEpO1xuXHQgICAgICBkID0gdGhpcy51cGRhdGVQcmUoZCk7XG5cdCAgICAgIGQgPSB0aGlzLnVwZGF0ZVVybChkKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlU3BtVXJsKGQpO1xuXHQgICAgICBkID0gdGhpcy51cGRhdGVTcG1QcmUoZCk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQudXNlcmRhdGEgPSBkLmdva2V5O1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDYwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWx1ZSl7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCc7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvY2FuX3RvX3NlbmRwdi5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrliKTmlq1wduiDveWQpuWPkemAge+8jOS4jeWPr+S7peWPkemAgeWImeS8muS4reaWreWQjue7reaJgOacieS4remXtOS7tuaJp+ihjFxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbEV2ZW50TGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOaYr+WQpuimgeaJp+ihjHNlbmRwdueahOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIGNhbl90b19zZW5kcHYgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2IHx8IHt9O1xuXHQgICAgICB2YXIgY291bnQgPSBfJC5zZW5kX3B2X2NvdW50IHx8IDA7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHRcblx0ICAgICAgaWYgKCF1dGlsRXZlbnRMaW1pdC5jYW5TZW5kUFYoY29uZmlnLnRyYWNrX3R5cGUpKSB7XG5cdCAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjYW5fdG9fc2VuZHB2LmZsYWcgPSAnWUVTJztcblx0ICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2ID0gY2FuX3RvX3NlbmRwdjtcblx0ICAgICAgICBfJC5zZW5kX3B2X2NvdW50ID0gKytjb3VudDtcblx0ICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDYyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbEV2ZW50TGltaXQuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsUmVtb3RlQ2ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHZhciB1dGlsTG9jYWxDZmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgYXBsdXNVdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0ZnVuY3Rpb24gbmVlZExpbWl0U2VuZChsb2drZXkpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIGV2ZW50TGltaXRSYXRlcyA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0VWRU5UX0xJTUlUUkFURVMpO1xuXHQgIGlmIChldmVudExpbWl0UmF0ZXMgJiYgZXZlbnRMaW1pdFJhdGVzLmxlbmd0aCA+IDApIHtcblx0ICAgIHZhciBldmVudCA9IHV0aWxBcnJheS5maW5kKGV2ZW50TGltaXRSYXRlcywgZnVuY3Rpb24oaXRlbSkge1xuXHQgICAgICByZXR1cm4gaXRlbS5ldmVudElkID09PSBsb2drZXk7XG5cdCAgICB9KTtcblx0ICAgIFxuXHQgICAgaWYgKGV2ZW50KSB7XG5cdCAgICAgIHZhciByYW5kb20gPSBNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSoxMDAwKTtcblx0ICAgICAgaWYgKHJhbmRvbSA8IChldmVudC5zYW1wbGluZ1JhdGUgKiAxMDAwKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGlzVU0oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcblx0ICByZXR1cm4gISFpc1VNO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jYW5Ub1NlbmRISkxKID0gZnVuY3Rpb24oZ29rZXksIGxvZ2tleSkge1xuXHQgIHZhciBkZXZpY2VTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldERldmljZVN0YXR1cygpO1xuXHQgIGlmICghZGV2aWNlU3RhdHVzKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIGlmICh1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGN0eCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORDtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaChlKSB7fVxuXHQgIH1cblx0XG5cdCAgLy8g5aaC5p6c5YWo5Z+L54K55YWz6ZetIOaIluiAhSDlhajln4vngrnkuovku7blhbPpl63ph4fpm4bvvIzkuI3lj5HpgIHkuovku7Zcblx0ICB2YXIgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvVHJhY2tTdGF0dXMoKTtcblx0ICB2YXIgYXV0b2V2ZW50U3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvRXZlbnRTdGF0dXMoKTtcblx0ICAvLyBA5paH5b+DIFxuXHQgIHZhciBsb2NhbEF1dG90cmFja0VuYWJsZWQgPSB1dGlsTG9jYWxDZmcuZ2V0QXV0b1RyYWNrU3RhdHVzKCk7XG5cdFxuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICBpZiAodHlwZW9mIGdva2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgcGFyYW1zID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKGdva2V5KSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhcmFtcyA9IGdva2V5O1xuXHQgIH1cblx0XG5cdCAgaWYgKHBhcmFtcy5hdXRvX2VsZW1lbnQpIHtcblx0ICAgIGlmIChhdXRvZXZlbnRTdGF0dXMgPT09IDIgfHwgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID09PSAyKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH0gZWxzZSBpZiAoIXJlbW90ZUF1dG90cmFja1N0YXR1cyAmJiAhbG9jYWxBdXRvdHJhY2tFbmFibGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICghbmVlZExpbWl0U2VuZChsb2drZXkpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSAgXG5cdCAgcmV0dXJuIHRydWU7XG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5jYW5TZW5kUFYgPSBmdW5jdGlvbih0cmFja190eXBlKSB7XG5cdCAgaWYgKCFpc1VNKCkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0gXG5cdCAgLy/orr7lpIflvIDlhbMgXG5cdCAgdmFyIGRldmljZVN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0RGV2aWNlU3RhdHVzKCk7XG5cdCAgLy8g6L+c56iL5YWo5Z+L54K5IOiHquWKqHB2IOW8gOWFs1xuXHQgIHZhciBhdXRvcHZTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldEF1dG9QYWdlU3RhdHVzKCk7XG5cdCAgLy8g5pys5Zyw5YWo5Z+L54K56YWN572uIOiHquWKqHB2IOW8gOWFs1xuXHQgIHZhciBsb2NhbEF1dG9QdkRpc2FibGVkID0gdXRpbExvY2FsQ2ZnLmxvY2FsQXV0b1BWRGlzYWJsZWQoKTtcblx0ICBcblx0ICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblx0ICBpZiAoIWRldmljZVN0YXR1cykge1xuXHQgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgfSBlbHNlIGlmICh0cmFja190eXBlID09PSAnMScpe1xuXHQgICAgcmV0dXJuICEoYXV0b3B2U3RhdHVzID09PSAyIHx8ICghYXV0b3B2U3RhdHVzICYmIGxvY2FsQXV0b1B2RGlzYWJsZWQpKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA2MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxMb2NhbENvbmZpZy5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiDlhajln4vngrnmnKzlnLDphY3nva4g6K+75Y+WXG5cdCAqIOWPluWAvCDlj6rmnIkgdHJ1ZSBvciBmYWxzZVxuXHQqL1xuXHRcblx0ZXhwb3J0cy5sb2NhbEF1dG9FdmVudERpc2FibGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlQpOyBcblx0fTtcblx0XG5cdFxuXHRleHBvcnRzLmxvY2FsQXV0b1BWRGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICByZXR1cm4gISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVikgfHwgISEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSA9PT0gJ01BTicpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRBdXRvVHJhY2tTdGF0dXMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICByZXR1cm4gISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRCk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogNjQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaVsOe7hOW3peWFt1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBJRTjkuI3mlK/mjIHmlbDnu4Tljp/nlJ/nmoRpbmRleE9m77yM5pWF6Ieq6KGM5a6e546w5LiA5LiqaW5kZXhvZlxuXHQgKiBAcGFyYW0gW0FycmF5XSBhcnJcblx0ICogQHBhcmFtIFtPYmplY3RdIGl0ZW1cblx0ICogQHJldHVybiBbTnVtYmVyXSBpbmRleFxuXHQgKi9cblx0ZXhwb3J0cy5pbmRleG9mID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdHJ5IHtcblx0ICAgIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgaWYgKGFycltqXSA9PT0gaXRlbSkge1xuXHQgICAgICAgIGluZGV4ID0gajtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gaW5kZXg7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBtYXRjaGVkID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcblx0ICAgICAgcmV0dXJuIG1hdGNoZWQ7XG5cdCAgICB9XG5cdCAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuXHQgICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuXHQgICAgfSk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuXHQgICAgICBpZiAoaXRlbS5pbmRleE9mKGFycltqXSkgIT09IC0xKSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG1hdGNoZWQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc0FycmF5KG8pIHtcblx0ICBpZiAoQXJyYXkuaXNBcnJheSkge1xuXHQgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXHRcblx0ZnVuY3Rpb24gZmxhdChhcnIpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgaWYgKGlzQXJyYXkoYXJyKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBhcnJbaV07XG5cdCAgICAgIGlmIChpc0FycmF5KHYpKSB7XG5cdCAgICAgICAgLy/pgJLlvZLmiYHlubPljJbmlbDnu4Rcblx0ICAgICAgICBhcnJbaV0gPSBmbGF0KHYpO1xuXHQgICAgICAgIC8vIOmAkuW9kuWQjiDov57mjqXmlbDnu4Rcblx0ICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFycltpXSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2godik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0ZXhwb3J0cy5mbGF0ID0gZmxhdDtcblx0XG5cdGZ1bmN0aW9uIGZpbmQoYXJyLCBjYWxsYmFjaykge1xuXHQgIHRyeSB7XG5cdCAgICByZXR1cm4gYXJyLmZpbmQoY2FsbGJhY2spO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIG1hdGNoID0gY2FsbGJhY2soYXJyW2ldKTtcblx0ICAgICAgaWYgKG1hdGNoKSB7XG5cdCAgICAgICAgcmV0dXJuIGFycltpXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZXhwb3J0cy5maW5kID0gZmluZDtcblxuLyoqKi8gfSksXG4vKiA2NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuXHQgKlxuXHQgKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcblx0ICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcblx0ICogIGRlcHM6IHdoYXRfdG9faGpsalxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0Ly8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOmHh+mbhuS4quaAp+WMluWPguaVsFxuXHQgICAgICpcblx0ICAgICAqIHJlY29yZChsb2drZXksIGdta2V5LCBnb2tleSkgQVBJ5Lit55qEZ29rZXlcblx0ICAgICAqIG1ldGE6YXBsdXMtZXhpbmZv5L+h5oGvLCBtZXRhOmFwbHVzLWV4ZGF0YeS/oeaBr1xuXHQgICAgICpcblx0ICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cblx0ICAgICAqL1xuXHQgICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG5cdCAgICAgIHZhciBnb2tleSA9IGMud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXk7XG5cdCAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmoodXNlcmRhdGEuZ29rZXkpKTtcblx0ICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhpbmZvJyl8fHt9KSk7XG5cdCAgICAgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG5cdCAgICAgIGlmIChpc0FycmF5KGV4ZGF0YSkpIHtcblx0ICAgICAgICBleGRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcblx0ICAgICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGl0ZW0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGV4ZGF0YSB8fCB7fSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGdva2V5O1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueJ2RvbmUn57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuICdkb25lJyB8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbG9nZGF0YSA9IHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhO1xuXHQgICAgICB2YXIgZ29rZXkgPSB0aGlzLmdldFVzZXJEYXRhKCk7XG5cdCAgICAgIC8vIOW6lOeUqOmAgOWHuuS6i+S7tuavlOi+g+eJueauiu+8jGR1cmF0aW9u5Y2zYXJnMSBA5paH6Z2SXG5cdCAgICAgIGlmIChsb2dkYXRhLmdta2V5ID09PSAnMTAxMCcpIHtcblx0ICAgICAgICBsb2dkYXRhLmFyZzEgPSBnb2tleS5kdXJhdGlvbiB8fCBsb2dkYXRhLmxvZ2tleTtcblx0ICAgICAgfVxuXHQgICAgICBsb2dkYXRhLmdva2V5ID0gZ29rZXk7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBBUEnmj5Lku7Zcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXyg2NykodGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gbG9nQ29uZmlnIHtcblx0ICogICAgcHY6IHtcblx0ICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19wdicpLFxuXHQgKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX3UnKVxuXHQgKiAgICB9LFxuXHQgKiAgICBoamxqOiB7XG5cdCAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfaGpsaicpLFxuXHQgKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX2hqbGpfdScpXG5cdCAqICAgIH1cblx0ICogIH1cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ0NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICBpZiAoYXBsdXMuX2FwbHVzX2FwaSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXBsdXNfYXBpID0ge1xuXHQgICAgICBzdGF0dXM6IGFwbHVzU3RhdGljLkNPTVBMRVRFXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgdmFyIGFwbHVzT2JqID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OCkucnVuLmNyZWF0ZSh7XG5cdCAgICBsb2dDb25maWc6IGxvZ0NvbmZpZ1xuXHQgIH0pO1xuXHQgIGZvciAodmFyIGsgaW4gYXBsdXNPYmopIHtcblx0ICAgIGFwbHVzW2tdID0gYXBsdXNPYmpba107XG5cdCAgfVxuXHQgIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCBhcGx1cyk7XG5cdCAgdmFyIG1zZ0FyciA9IFthcGx1c1N0YXRpYy5BUExVUyArICdSZWFkeScsIGFwbHVzU3RhdGljLkNPTVBMRVRFXTtcblx0ICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG5cdCAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dBcnIpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBSZWR1Y2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2OSk7XG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgaXNUcml2ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdHZhciB1dGlsRXZlbnRMaW1pdCA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpO1xuXHRcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHR2YXIgX2dldFBhZ2VTcG0gPSAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcblx0ICBpZiAobXkgJiYgbXkuY2FsbCAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIG15LmNhbGwoJ2hhbmRsZUxvZ2dpbmdBY3Rpb24nLCB7XG5cdCAgICAgICd0eXBlJzogJ2JlaGF2aW9yJyxcblx0ICAgICAgJ3N1YlR5cGUnOiBvcHRzLnN1YlR5cGVcblx0ICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgdmFyIHJzID0ge307XG5cdCAgICAgIHJzW29wdHMuc3BtVHlwZV0gPSByZXNbb3B0cy5zcG1UeXBlXTtcblx0ICAgICAgY2FsbGJhY2socnMpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGlzUGFnZURpc0FwcGVhciA9IHRydWU7XG5cdHZhciBpc1BhZ2VBcHBlYXIgPSBmYWxzZTtcblx0XG5cdHZhciBydW4gPSBCYXNlLmV4dGVuZCh7XG5cdCAgLyoqXG5cdCAgICogR0VUIOivt+axguS4gOS4quWbvueJh+WcsOWdgO+8jOWQkeacjeWKoeWZqOWPkemAgeaJk+eCuVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbZGF0YVN0cl0ge1N0cmluZyB8fCBPYmplY3R9XG5cdCAgICogQHBhcmFtIFttZXRob2RdIHtTdHJpbmd9ICAvLyBQT1NUIE9SIEdFVFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0ICBfc2VuZDogZnVuY3Rpb24gKHVybCwgZGF0YSwgbWV0aG9kLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuXHQgICAgLy8gdXJsID0gdXRpbC5jYW4yaHR0cHModXJsKTtcblx0ICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgbWV0aG9kID09PSAnUE9TVCcpIHtcblx0ICAgICAgbWluaS5yZXF1ZXN0KHVybCwge1xuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGE6IGRhdGEsXG5cdCAgICAgICAgZGF0YVR5cGU6ICdiYXNlNjQnXG5cdCAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG1pbmkucmVxdWVzdCh1cmwgKyAnPycgKyBkYXRhLCB7XG5cdCAgICAgICAgbWV0aG9kOiBtZXRob2QsXG5cdCAgICAgICAgZGF0YVR5cGU6ICdiYXNlNjQnXG5cdCAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgcmV0dXJuIHVybDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHRVQg6K+35rGC5LiA5Liq5Y+v6KeG5YyW6YWN572u5L+h5oGv77yM5ZCR5pyN5Yqh5Zmo5Y+RXG5cdCAgICpcblx0ICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG5cdCAgICovXG5cdCAgX3JlcXVlc3RWVENvbmZpZzogZnVuY3Rpb24odXJsLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuXHQgICAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICAvLyAgIC8vIHVybCA9IGFwbHVzU3RhdGljLkhUVFBTICsgdXJsO1xuXHQgICAgLy8gICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcblx0ICAgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgICAgLy8gfVxuXHQgICAgbWluaS5yZXF1ZXN0KHVybCwgeyBtZXRob2Q6ICdHRVQnLGRhdGFUeXBlOidqc29uJyB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR0VUIOivt+axgui/nOeoi+mFjee9ru+8jOWQkeacjeWKoeWZqOWPkVxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiAqLyBcblx0ICBfcmVxdWVzdFJlbW90ZUNvbmZpZzogZnVuY3Rpb24odXJsLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuXHQgICAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG5cdCAgICAvLyAgIC8vIHVybCA9IGFwbHVzU3RhdGljLkhUVFBTICsgdXJsO1xuXHQgICAgLy8gICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcblx0ICAgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG5cdCAgICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuXHQgICAgLy8gICB9XG5cdCAgICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuXHQgICAgLy8gfVxuXHQgICAgbWluaS5yZXF1ZXN0KHVybCwgeyBtZXRob2Q6ICdHRVQnLCBkYXRhVHlwZTogJ2pzb24nIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcblx0ICAgKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcblx0ICAgKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG5cdCAgICogICBwYWdlX2lkOiAxMjMsICAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuXHQgICAqICAgZ29rZXk6ICcnLCAgICAgICAgICAgIC8vIOeUqOaIt+iHquWumuS5ieWPguaVsO+8iOWQkeS4i+WFvOWuue+8jFRPRE/lkI7nu63kuIvmjonvvIlcblx0ICAgKiB9XG5cdCAgICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhOiB7XG5cdCAgICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuXHQgICAqICAgeHh4MTogJ3Z2djEnLFxuXHQgICAqICAgeHh4MjogJ3Z2djInLFxuXHQgICAqICAgeHh4TjogJ3Z2dk4nLFxuXHQgICAqIH0gICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuXHQgICAqL1xuXHQgIF9zZW5kUFY6IGZ1bmN0aW9uIChjb25maWcsIHVzZXJkYXRhKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cdFxuXHQgICAgaWYgKGNvbmZpZy5wYWdlTmFtZSkge1xuXHQgICAgICBhcGx1cy5fc2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVMgKyAnLXBhZ2VuYW1lJywgY29uZmlnLnBhZ2VOYW1lKTtcblx0ICAgIH1cblx0ICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICBpZiAoIWNvbmZpZy5tZXRob2QpIHtcblx0ICAgICAgY29uZmlnLm1ldGhvZCA9ICdHRVQnO1xuXHQgICAgfVxuXHQgICAgdmFyIHB2ID0gYXBsdXMubG9nQ29uZmlnLnB2O1xuXHQgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICBwbHVnaW5zOiBwdi5wbHVnaW5zLFxuXHQgICAgICBjb250ZXh0OiBjbG9uZURlZXAocHYuY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG5cdCAgICB9LCB7XG5cdCAgICAgIGNvbmZpZzogY29uZmlnLFxuXHQgICAgICB1c2VyZGF0YTogdXNlcmRhdGEgfHwge30sXG5cdCAgICAgIHB1YnN1YlR5cGU6ICdwdicsXG5cdCAgICAgIC8vIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9wdixcblx0ICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiBmuWQiOS4iuaKpeS7pOeureaXpeW/l1xuXHQgICAqXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSBsb2drZXnvvIjlv4XloavvvIlcblx0ICAgKiBAcGFyYW1zIHtTdHJpbmd9IGdta2V577yI5b+F5aGr77yJIOaemuS4vuWAvO+8miBDTEsg5ZKMIEVYUFxuXHQgICAqIEBwYXJhbXMge0FycmF5T2JqZWN0fSBnb2tleXPvvIjlv4XloavvvInlhoXnva7nmoTlr7nosaHlj4LmlbDmoLzlvI/lpoLvvJpcblx0ICAgKiAgW3tcblx0ICAgKiAgICBcImV4YXJnc1wiOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrmiqXnmoToh6rlrprkuYnlj4LmlbDvvIzlhoXlrrnlnYfkuLrlj6/pgInvvIzlpoLml6Doh6rlrprkuYnlj4LmlbDliJnkvKDnqbrlr7nosaFcblx0ICAgKiAgICAgIFwiX3dcIjogMzc1LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZflrr3luqZcblx0ICAgKiAgICAgIFwiX2hcIjogMTg4LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfpq5jluqZcblx0ICAgKiAgICAgIFwiX3hcIjogMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfmqKrlnZDmoIdcblx0ICAgKiAgICAgIFwiX3lcIjogODcsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfnurXlnZDmoIdcblx0ICAgKiAgICAgIFwiX3JhdGVcIjogXCIxLjAwXCIsICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFiemdouenr+avlOS+i1xuXHQgICAqICAgICAgXCJfdmlld2FiaWxpdHlcIjogXCJpbnRlcnNlY3Rpb25cIiwgICAgICAgLy8g5pud5YWJ5pa55byPIGludGVyc2VjdGlvbiDmiJYgZmlsbHdpbmRvd1xuXHQgICAqICAgICAgLy8g6Zmk5LqG5LiK6L+w5L+d55WZ5Y+C5pWw5aSW55qE5YW25LuW5Y+C5pWwa2V5LXZhbHVl6Ieq6KGM5a6a5LmJ77yaXG5cdCAgICogICAgICBcInlvdXJLZXkxXCI6IFwieW91clZhbHVlMVwiLCAgICAgICAgXG5cdCAgICogICAgICBcInlvdXJLZXkyXCI6IFwiJUU0JUI4JUFEJUU1JTlCJUJEXCIgICAgICAvLyDlpoLkuLrkuK3mlofvvIzliJnpnIDoh6rooYznvJbnoIFcblx0ICAgKiAgICAgIC4uLi4uLlxuXHQgICAqICAgIH0sXG5cdCAgICogICAgXCJzY21cIjogXCJhLmIuYy5kXCIsICAgICAgICAgICAgICAgICAgICAgICAvLyBzY23kuLrlj6/pgInlj4LmlbDvvIzlpoLml6DliJnkvKDnqbrlgLxcblx0ICAgKiAgICBcInNwbVwiOiBcInNwbWEuc3BtYi5zcG1jLnNwbWRcIiwgICAgICAgICAgIC8vIHNwbeS4uuW/hemAieWPguaVsO+8jOS9v+eUqOagh+WHhueahOWbm+auteW8j1xuXHQgICAqICAgIFwiYXBsdXNDb250ZW50SWRcIjogXCJcIiAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5a2X5q6177yM5pqC5pe25LiN6ZyA6KaB5LygXG5cdCAgICogIH1dXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSBtZXRob2TvvIjlj6/pgInvvIkgICAgICAgICAgICAgIC8vIOaemuS4vuWAvO+8miBHRVTlkoxQT1NU77yM6buY6K6k5L2/55SoUE9TVOaWueW8j+S4iuaKpVxuXHQgICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYiAgICAgICAgICAgICAgICAgICAgICAvLyDkv53nlZnlsZ7mgKfvvIzmmoLml7bkuI3pnIDopoHkvKBcblx0ICAgKi9cblx0ICBfY29tYmluZVJlY29yZDogZnVuY3Rpb24obG9na2V5LCBnbWtleSwgZ29rZXlzLCBtZXRob2QpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIHZhciBFWFAgPSAnRVhQJztcblx0ICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgJiYgKGdta2V5ID09PSBFWFAgfHwgZ21rZXkgPT09ICdDTEsnKSkge1xuXHQgICAgICBpZiAoaXNBcnJheShnb2tleXMpKSB7XG5cdCAgICAgICAgaWYgKCFtZXRob2QpIHtcblx0ICAgICAgICAgIG1ldGhvZCA9ICdQT1NUJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHVzZXJkYXRhID0gW107XG5cdCAgICAgICAgdmFyIHNlbmR0b215ID0gJ3RydWUnO1xuXHQgICAgICAgIGdva2V5cy5mb3JFYWNoKGZ1bmN0aW9uKHYpe1xuXHQgICAgICAgICAgdXNlcmRhdGEucHVzaCh7XG5cdCAgICAgICAgICAgIGV4YXJnczogdHlwZW9mIHYuZXhhcmdzID09PSAnb2JqZWN0JyA/IHYuZXhhcmdzIDoge30sXG5cdCAgICAgICAgICAgIHNjbTogdi5zY20sXG5cdCAgICAgICAgICAgIHNwbTogdi5zcG0sXG5cdCAgICAgICAgICAgIGFwbHVzQ29udGVudElkOiB2LmFwbHVzQ29udGVudElkLFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBpZiAodi5fYXBsdXNfc2VuZHRvbXkgPT09ICdmYWxzZScgJiYgc2VuZHRvbXkgPT09ICd0cnVlJykge1xuXHQgICAgICAgICAgICBzZW5kdG9teSA9ICdmYWxzZSc7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgdmFyIF9nb2tleXMgPSBbXTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goKGdta2V5ID09PSBFWFAgPyAnZXhwZGF0YT0nIDogJ2Nsa2RhdGE9JykgKyBKU09OLnN0cmluZ2lmeSh1c2VyZGF0YSkpO1xuXHQgICAgICAgIF9nb2tleXMucHVzaChnbWtleSA9PT0gRVhQID8gJ19pc19hdXRvX2V4cD0xJyA6ICdfaXNfYXV0b19jbGs9MScpO1xuXHQgICAgICAgIF9nb2tleXMucHVzaCgnX2V2ZW50VHlwZT1jdXN0b20nKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goJ19tZXRob2Q9JyArIG1ldGhvZCk7XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKCdfcGtnU2l6ZT0nICsgZ29rZXlzLmxlbmd0aCk7XG5cdCAgICAgICAgaWYgKHNlbmR0b215ID09PSAnZmFsc2UnKSB7XG5cdCAgICAgICAgICBfZ29rZXlzLnB1c2goJ19hcGx1c19zZW5kdG9teT1mYWxzZScpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBhcGx1cy5yZWNvcmQobG9na2V5LCBnbWtleSwgX2dva2V5cy5qb2luKCcmJyksIG1ldGhvZCk7ICBcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjb25zb2xlLndhcm4oJ3R5cGUgb2YgZ29rZXlzIG11c3QgYmUgQXJyYXlPYmplY3QhJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNvbnNvbGUud2Fybignb25seSBzdXBwb3J0IEVYUCBvciBDTEsgbG9nIHRvIGNvbWJpbGUgcmVjb3JkIScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWPkemAgem7hOmHkeS7pOeureaJk+eCuVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZ21rZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZ29rZXlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBjYlxuXHQgICAqL1xuXHQgIF9yZWNvcmQ6IGZ1bmN0aW9uIChsb2drZXksIGdta2V5LCBnb2tleSwgbWV0aG9kLCBjYikge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgZ29rZXkgPSBtZXRhSW5mby5nZXRVc2VySW5qZWN0R29rZXkoe1xuXHQgICAgICBsb2drZXk6IGxvZ2tleSxcblx0ICAgICAgZ21rZXk6IGdta2V5LFxuXHQgICAgICBnb2tleTogZ29rZXlcblx0ICAgIH0pO1xuXHQgICAgbG9na2V5ID0gbG9na2V5ICsgJyc7XG5cdCAgICBpZiAobG9na2V5ICYmIGxvZ2tleS5pbmRleE9mKCcvJykgIT09IDAgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgIGxvZ2tleSA9ICcvJyArIGxvZ2tleTtcblx0ICAgIH1cblx0ICAgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaTtcblx0ICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcblx0ICAgIHZhciBoamxqID0gYXBsdXMubG9nQ29uZmlnLmhqbGo7XG5cdCAgICBpZiAoIWlzQWxpKSB7ICAgICAgXG5cdCAgICAgIHV0aWxFdmVudExpbWl0LmNhblRvU2VuZEhKTEooZ29rZXksIGxvZ2tleSkgJiYgcmVkdWNlci5ydW4oe1xuXHQgICAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcblx0ICAgICAgICBjb250ZXh0OiBjbG9uZURlZXAoaGpsai5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5Ncblx0ICAgICAgfSwge1xuXHQgICAgICAgIGNvbmZpZzoge1xuXHQgICAgICAgICAgcmVjb3JkVHlwZTogJ0NPTU1PTl9ISkxKJywgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdXNlcmRhdGE6IHtcblx0ICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgICAgZ21rZXk6IGdta2V5LFxuXHQgICAgICAgICAgZ29rZXk6IGdva2V5XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBwdWJzdWJUeXBlOiAnaGpsaicsXG5cdCAgICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcblx0ICAgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgICB9LCBmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVkdWNlci5ydW4oe1xuXHQgICAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcblx0ICAgICAgICBjb250ZXh0OiBjbG9uZURlZXAoaGpsai5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5Ncblx0ICAgICAgfSwge1xuXHQgICAgICAgIGNvbmZpZzoge1xuXHQgICAgICAgICAgcmVjb3JkVHlwZTogJ0NPTU1PTl9ISkxKJywgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG5cdCAgICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdXNlcmRhdGE6IHtcblx0ICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuXHQgICAgICAgICAgZ21rZXk6IGdta2V5LFxuXHQgICAgICAgICAgZ29rZXk6IGdva2V5XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBwdWJzdWJUeXBlOiAnaGpsaicsXG5cdCAgICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcblx0ICAgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuXHQgICAgICB9LCBmdW5jdGlvbigpe1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfSxcblx0ICBcblx0ICBnZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB2YXIgXyQgPSBhcGx1cy5fJCB8fCB7fTtcblx0ICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG5cdCAgICB2YXIgZGF0YSA9IHNwbS5kYXRhIHx8IHt9O1xuXHQgICAgcmV0dXJuIFtkYXRhLmEsIGRhdGEuYl07XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5pu05paw6aG16Z2i55qEIGHjgIFiIOS9jVxuXHQgICAqIOmcgOaxguWPguinge+8mmh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9rYi9pc3N1ZXMvMTM3XG5cdCAgICogQHBhcmFtIGEge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2JdIHtTdHJpbmd9XG5cdCAgICogQHBhcmFtIFtjYl0ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHQgIF9zZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb2JqID0ge307XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHZhciBjYjtcblx0ICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgb2JqID0gYXJnc1swXTtcblx0ICAgICAgY2IgPSBhcmdzWzFdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqLnNwbUNudCA9IFthcmdzWzBdLCBhcmdzWzFdLCAnMCcsICcwJ10uam9pbignLicpO1xuXHQgICAgICBjYiA9IGFyZ3NbMl07XG5cdCAgICB9XG5cdCAgICB2YXIgbXNncztcblx0ICAgIGlmICghb2JqLnNwbUNudCAmJiAhb2JqLnNwbVVybCAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpKSB7XG5cdCAgICAgIG1zZ3MgPSBbJ2NsZWFyUGFnZVNQTSddO1xuXHQgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuXHQgICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcblx0ICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiAgIHNwbVVybDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtUHJlOiAnYS5iLjAuMCdcblx0ICAgICAgICogfVxuXHQgICAgICAgKi9cblx0ICAgICAgbXNncyA9IFsnc2V0UGFnZVNQTScsIG9ial07XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICB9XG5cdCAgICB2YXIgY2FsbGJhY2sgPSB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgY2FsbGJhY2sobXNncyk7XG5cdCAgfSxcblx0XG5cdFxuXHQgIC8qKlxuXHQgICAqIOWKqOaAgemFjee9rm1ldGFcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga1xuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSB2XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMge1xuXHQgICAqICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuXHQgICAqIH1cblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgICAqL1xuXHQgIF9zZXRNZXRhSW5mbzogZnVuY3Rpb24oYXJnMSwgdmFsdWUpIHtcblx0ICAgIHJldHVybiBtZXRhSW5mby5fc2V0TWV0YUluZm8oYXJnMSwgdmFsdWUpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzMzMmRlNjJjXG5cdCAgICog5LiN5pSv5oyBdXBkYXRlUGFnZVByb3BlcnRpZXPvvIzmlLnnlKjmm7/ku6PmlrnmoYhzZXRNZXRhSW5mb1xuXHQgICAqIEBwYXJhbXMge1N0cmluZ30g6YCP5LyganNvbuWtl+espuS4su+8jOW/hemhu+aYr+Wtl+espuS4slxuXHQgICAqL1xuXHQgIF91cGRhdGVQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zKXtcblx0ICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAvLyDmlrDlrrnlmahUcml2ZXLph4fnlKh1cGRhdGVQYWdlUHJvcGVydGllc1xuXHQgICAgICBpZiAoaXNUcml2ZXIoKSkge1xuXHQgICAgICAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlUGFnZVByb3BlcnRpZXMnLCBwYXJhbXMpO1xuXHQgICAgICB9IGVsc2UgaWYobWluaS5nZXRQbGF0Zm9ybVR5cGUoKT09PSdteScpe1xuXHQgICAgICAgIG15LmNhbGwoJ3JlcG9ydERhdGEnLHtcblx0ICAgICAgICAgIHNwbURldGFpbDpwYXJhbXMsXG5cdCAgICAgICAgICBpZ25vcmVEZWZhdWx0UGFnZU1vbml0b3I6dHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIOWQkeS4i+WFvOWuue+8jOS4jeeuoeaAjuS5iOagt+mDveW+gG1ldGFJbmZv6K6+572u5LiA5Lu9XG5cdCAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdmFyIHBhZ2VOYW1lID0gY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMgfHwgJ3BhZ2UnO1xuXHQgICAgICB2YXIgZGF0YSA9IHt9O1xuXHQgICAgICBkYXRhW3BhZ2VOYW1lXSA9IHBhcmFtcztcblx0ICAgICAgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycsIGRhdGEpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjNjAzNGMxZGFcblx0ICAgKi9cblx0ICBfdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICBpZiAoIXBhcmFtcykge1xuXHQgICAgICBwYXJhbXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIGlmIChteSkge1xuXHQgICAgICB2YXIgZGF0YSA9IHtcblx0ICAgICAgICB0eXBlOiAndXBkYXRlTmV4dFByb3AnLFxuXHQgICAgICAgIGV2ZW50SWQ6IC0xLFxuXHQgICAgICAgIGV2ZW50aWQ6IC0xLFxuXHQgICAgICAgIG5hbWU6ICcnLFxuXHQgICAgICAgIHBhZ2VOYW1lOiAnJyxcblx0ICAgICAgICBjb21OYW1lOiAnJyxcblx0ICAgICAgICBhcmcxOiAnJyxcblx0ICAgICAgICBhcmcyOiAnJyxcblx0ICAgICAgICBhcmczOiAnJyxcblx0ICAgICAgICBwYXJhbTogcGFyYW1zLFxuXHQgICAgICAgIHBhcmFtczogcGFyYW1zXG5cdCAgICAgIH07XG5cdCAgICAgIGlmIChteS5jYWxsVXNlclRyYWNrKSB7XG5cdCAgICAgICAgbXkuY2FsbFVzZXJUcmFjaygnY29tbWl0dXQnLCBkYXRhKTtcblx0ICAgICAgfSBlbHNlIGlmIChteS5yZXBvcnRBbmFseXRpY3MpIHtcblx0ICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ2VudGVyJywgZGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUbyBhcHBlbmQgYG1ldGFgIHRhZyBpZiB0aGVyZSdzIG5vbmUgYXBsdXMgbWV0YS5cblx0ICAgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICAgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cblx0ICAgKiAgLSBgT2JqZWN0LmFzc2lnbmAgY2FsbGVkIG9uIE9iamVjdCB2YWx1ZXMuXG5cdCAgICogIEBwYXJhbSBrXG5cdCAgICogIEBwYXJhbSB2XG5cdCAgICovXG5cdCAgX2FwcGVuZE1ldGFJbmZvOiBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbyxcblx0XG5cdCAgLyoqXG5cdCAgICogZ2V0IG1ldGFJbmZvIGJ5IGtleVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfVxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0ICBnZXRNZXRhSW5mbzogZnVuY3Rpb24gKGspIHtcblx0ICAgIHJldHVybiBtZXRhSW5mby5nZXRNZXRhSW5mbyhrKTtcblx0ICB9LFxuXHRcblx0ICAvLyDmt7HluqblhYvpmobvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG5cdCAgY2xvbmVEZWVwOiBjbG9uZURlZXAsXG5cdCAgLyoqXG5cdCAgICog5aaC5p6c5a655Zmo5a6e546w5LqGYXBwZWFy44CBZGlzYXBwZWFy77yM5L2G5Lia5Yqh5Y+I5oOz5omL5Yqo5o6n5Yi25omT54K555Sf5ZG95ZGo5pyf5pe25L2/55SoXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgX3NraXBQYWdlOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG5cdCAgICAvLyBVc2VyVHJhY2suc2tpcFBhZ2UoKTtcblx0ICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3NraXBQYWdlJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiDlpoLmnpzlrrnlmajmnKrmj5DkvpthcHBlYXLjgIFkaXNhcHBlYXLml7bpnIDopoHkuJrliqHmiYvliqjosIPnlKhcblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKi9cblx0ICBfcGFnZUFwcGVhcjogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKXtcblx0ICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrICYmIGlzUGFnZURpc0FwcGVhcikge1xuXHQgICAgICBpc1BhZ2VEaXNBcHBlYXIgPSBmYWxzZTtcblx0ICAgICAgaXNQYWdlQXBwZWFyID0gdHJ1ZTtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygncGFnZUFwcGVhcicpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgX3BhZ2VEaXNhcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjayAmJiBpc1BhZ2VBcHBlYXIpIHtcblx0ICAgICAgaXNQYWdlRGlzQXBwZWFyID0gdHJ1ZTtcblx0ICAgICAgaXNQYWdlQXBwZWFyID0gZmFsc2U7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3BhZ2VEaXNhcHBlYXInKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIF91cGRhdGVQYWdlVXRwYXJhbTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuXHQgICAgaWYgKCFwYXJhbXMpIHtcblx0ICAgICAgcGFyYW1zID0ge307XG5cdCAgICB9XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCd1cGRhdGVQYWdlVXRwYXJhbScsIHtcblx0ICAgICAgICAndXRQYXJhbUpzb24nOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIF91cGRhdGVOZXh0UGFnZVV0cGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcyl7XG5cdCAgICBpZiAoIXBhcmFtcykge1xuXHQgICAgICBwYXJhbXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsIHtcblx0ICAgICAgICAndXRQYXJhbUpzb24nOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOS7heaJi+a3mO+8iFY5LjEwLjDvvInlsI/nqIvluo/mlK/mjIFcblx0ICAgKiBAcGFyYW1zIHtPYmplY3R9IHByb3BlcnRpZXNcblx0ICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG5cdCAgICovXG5cdCAgX3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocHJvcGVydGllcykge1xuXHQgICAgLy8gaWYgKG15ICYmIG15LnJlcG9ydEFuYWx5dGljcyAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIC8vICAgbXkucmVwb3J0QW5hbHl0aWNzKCd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsIHByb3BlcnRpZXMpO1xuXHQgICAgLy8gfVxuXHQgICAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIG15LmNhbGwoJ2hhbmRsZUxvZ2dpbmdBY3Rpb24nLCB7XG5cdCAgICAgICAgdHlwZTogJ2JlaGF2aW9yJyxcblx0ICAgICAgICBzdWJUeXBlOiAndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLFxuXHQgICAgICAgIGV4dERhdGE6IHByb3BlcnRpZXMsXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLyoqXG5cdCAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG5cdCAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrOiB7c3BtVXJsOiAnJ31cblx0ICAgKi9cblx0ICBfZ2V0UGFnZVNwbVVybDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdCAgICBfZ2V0UGFnZVNwbSh7XG5cdCAgICAgIHN1YlR5cGU6ICdnZXRQYWdlU3BtVXJsJyxcblx0ICAgICAgc3BtVHlwZTogJ3NwbVVybCdcblx0ICAgIH0sIGNhbGxiYWNrKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDku4XmiYvmt5jvvIhWOS45LjDvvInlsI/nqIvluo/mlK/mjIFcblx0ICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sgOiB7c3BtUHJlOiAnJ31cblx0ICAgKi9cblx0ICBfZ2V0UGFnZVNwbVByZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG5cdCAgICBfZ2V0UGFnZVNwbSh7XG5cdCAgICAgIHN1YlR5cGU6ICdnZXRQYWdlU3BtUHJlJyxcblx0ICAgICAgc3BtVHlwZTogJ3NwbVByZSdcblx0ICAgIH0sIGNhbGxiYWNrKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDorr7nva5QYWdlTmFtZSBcblx0ICAqL1xuXHQgIF9zZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFnZU5hbWUsIHBhdGgpIHtcblx0ICAgIGlmICghcGFnZU5hbWUpIHtcblx0ICAgICAgdWxvZygpLncoJ3NldFBhZ2VOYW1lIGZhaWxlZDogJyArICcgcGFnZU5hbWU9JyArIHBhZ2VOYW1lKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGN1clBhdGggPSBwYXRoIHx8IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuXHQgICAgXG5cdCAgICB2YXIgcGFnZU1ldGEgPSBjbG9uZURlZXAobWV0YUluZm8uZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fSk7XG5cdCAgICBwYWdlTWV0YVtjdXJQYXRoXSA9IHBhZ2VOYW1lO1xuXHQgICAgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oJ3BhZ2VDb25maWcnLCBwYWdlTWV0YSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6I635Y+WUGFnZU5hbWVcblx0ICAqL1xuXHQgIGdldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXRoKSB7XG5cdCAgICByZXR1cm4gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUocGF0aCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog6I635Y+W5YWD57Sg55qEc3BtXG5cdCAgICogKi8gXG5cdCAgX2dldEVsZW1lbnRTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHRhcmdldCwgY2FsbGJhY2spIHtcblx0ICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgdmFyIHNwbUIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8ICcnOyBcblx0XG5cdCAgICBpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFyIHRyYWNrZXJQYXJhbXMgPSB0YXJnZXQuZGF0YXNldCAmJiB0YXJnZXQuZGF0YXNldC50cmFja2VyUGFyYW1zIHx8ICcnO1xuXHQgICAgICB2YXIgc3BtQ0QgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04odHJhY2tlclBhcmFtcyk7XG5cdCAgICAgIHJldHVybiBbc3BtQiwgc3BtQ0Quc3BtQywgc3BtQ0Quc3BtRF0uam9pbignLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICB2YXIgYXV0b19jbGtfbWV0YWluZm8gPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKSB8fCBbXTtcblx0ICAgICAgdmFyIGF1dG9fZXhwX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJykgfHwgW107XG5cdCAgICAgIHZhciB0YXJnZXRTcG07XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGk7XG5cdCAgICAgICAgLy/oh6rliqjngrnlh7vkvJjlhYjnuqfmm7Tpq5hcblx0ICAgICAgICBmb3IoaSA9IDA7IGkgPCBhdXRvX2Nsa19tZXRhaW5mby5sZW5ndGg7IGkrKyl7XG5cdCAgICAgICAgICB2YXIgY2xrX2luZm8gPSBhdXRvX2Nsa19tZXRhaW5mb1tpXTtcblx0ICAgICAgICAgIGlmIChjbGtfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHRhcmdldFNwbSA9IFtzcG1CLCBjbGtfaW5mby5zcG1DLCBjbGtfaW5mby5zcG1EXS5qb2luKCcuJyk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgXG5cdCAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19leHBfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuXHQgICAgICAgICAgdmFyIGV4cF9pbmZvID0gYXV0b19leHBfbWV0YWluZm9baV07XG5cdCAgICAgICAgICBpZiAoZXhwX2luZm8uY3NzU2VsZWN0b3IgPT09IHRhcmdldCkge1xuXHQgICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgZXhwX2luZm8uc3BtQywgZXhwX2luZm8uc3BtRF0uam9pbignLicpO1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9OyBcblx0XG5cdCAgICAgICAgdmFyIGVsZW1lbnRzID0gY3R4LmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwodGFyZ2V0KTtcblx0ICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcblx0ICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcblx0ICAgICAgICAgICAgaWQ6IHRydWUsXG5cdCAgICAgICAgICB9LCBmdW5jdGlvbihyZXQpIHtcblx0ICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgICAgICAgICBpZiAocmV0ICYmIHJldC5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gcmV0Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0YXJnZXRTcG0gKyAnXycgKyBpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgaWYgKGNhbGxiYWNrICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTsgIFxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSkuZXhlYygpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgICB1bG9nKCkudygnY3VycmVudCBtaW5pYXBwIHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgZG9tIGVsZW1lbnQgcXVlcnksIGVycm1zZzogJywgZXJyb3IpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Lmd6ZSh6ZyA5rGC77yaaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9seGxuN2gvYnZ6eW1yL2FrYjQ5ZiNoUGFYTFxuXHQgICAqIGFwcOWUpOi1t+S6i+S7tuaOpeWPo++8jOWunumZheWwseaYr3JlY29yZFxuXHQgICAqL1xuXHQgIF9yZWNvcmRBcHBMaW5rOiBmdW5jdGlvbiAoZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIGlmKCFnb2tleS50YXJnZXRBcHBLZXkpIHtcblx0ICAgICAgdWxvZygpLncoJ3NlbmQgJCRfYXBwX2xpbmsgZmFpbGVkOiB0YXJnZXRBcHBLZXkgaXMgbnVsbCcpO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICByZXR1cm4gYXBsdXMuX3JlY29yZCgnJCRfYXBwX2xpbmsnLCAnT1RIRVInLCBnb2tleSwgbWV0aG9kLCBjYik7XG5cdCAgfSxcblx0fSk7XG5cdFxuXHRleHBvcnRzLnJ1biA9IHJ1bjtcblxuXG4vKioqLyB9KSxcbi8qIDY5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIENvbXBvc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTtcblx0dmFyIHBsdWdpbnNMb2FkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTtcblx0XG5cdC8qKlxuXHQgKiBzZW5wdlxuXHQgKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG5cdCAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuXHQgKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG5cdCAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuXHQgKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuXHQgKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG5cdCAqIH0gLy8g5ZCMIGFwbHVzLmxhdW5jaOesrOS6jOS4quWFpeWPguKAnG1hbnVhbOKAnVxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGEgICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuXHQgKlxuXHQgKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG5cdCAqXG5cdCAqIHN0ZXAxOiBsb2FkZXIgcGx1Z2lucyAgbWlkZGxld2FyZVxuXHQgKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcblx0ICogc3RlcDM6IHJ1biBtaWRkbGV3YXJlc1xuXHQgKi9cblx0XG5cdHZhciBSZWR1Y2VyID0gZnVuY3Rpb24oKSB7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyBPYmplY3QgQ09ORklHIHtcblx0ICogICBjb250ZXh0OiB4eHgsXG5cdCAqICAgcGx1Z2luczogeHh4IFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuXHQgKiAgIGNvbmZpZzogY29uZmlnLFxuXHQgKiAgIHVzZXJkYXRhOiB1c2VyZGF0YSxcblx0ICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG5cdCAqICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnIHx8ICdtd19jaGFuZ2VfaGpsaicgfHwgJ213X2NoYW5nZV9wcmVwdidcblx0ICogICBtZXNzYWdlRm5RdWV1ZTogW2ZuMSwgZm4yIC4uLl1cblx0ICogfVxuXHQgKi9cblx0UmVkdWNlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKENPTkZJRywgb3B0cywgY2FsbGJhY2spIHtcblx0ICAvLyAx44CBaW5pdCBwbHVnaW5zXG5cdCAgdmFyIHBsID0gbmV3IHBsdWdpbnNMb2FkZXIoKTtcblx0ICBwbC5pbml0KHtcblx0ICAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgY29uZmlnOiBvcHRzLmNvbmZpZyxcblx0ICAgIHBsdWdpbnM6IENPTkZJRy5wbHVnaW5zXG5cdCAgfSk7XG5cdCAgdmFyIG1pZGRsZXdhcmUgPSBwbC5ydW4oKTtcblx0XG5cdCAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcblx0ICB2YXIgY29udGV4dCA9IGlzRnVuY3Rpb24oQ09ORklHLmNvbnRleHQpID8gbmV3IENPTkZJRy5jb250ZXh0KCkgOiBDT05GSUcuY29udGV4dDtcblx0ICBjb250ZXh0LnVzZXJkYXRhID0gb3B0cy51c2VyZGF0YTtcblx0ICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXHRcblx0ICB2YXIgYXBwID0ge1xuXHQgICAgY29udGV4dDogY29udGV4dCxcblx0ICAgIHB1YnN1YjogdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnYXBsdXNfcHVic3ViJyksXG5cdCAgICBwdWJzdWJUeXBlOiBvcHRzICYmIG9wdHMucHVic3ViVHlwZVxuXHQgIH07XG5cdFxuXHQgIHZhciBjb21wb3NlID0gbmV3IENvbXBvc2UoKTtcblx0ICBjb21wb3NlLmNyZWF0ZShhcHApO1xuXHQgIC8vIOaJp+ihjOS4remXtOS7tlxuXHQgIGNvbXBvc2Uud3JhcChtaWRkbGV3YXJlLCBmdW5jdGlvbigpIHtcblx0ICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuXHQgICAgaWYgKG9wdHMpIHtcblx0ICAgICAgaWYgKG9wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXkpIHtcblx0ICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKG9wdHMubWVzc2FnZUZuUXVldWUpIHtcblx0ICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuXHQgICAgICAgICAgZm4odXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpLCBDT05GSUcpO1xuXHQgICAgICAgIH0pOyAgXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG5cdCAgICB9XG5cdCAgfSkoKTtcblx0XG5cdH07XG5cdG1vZHVsZS5leHBvcnRzID0gUmVkdWNlcjtcblxuXG4vKioqLyB9KSxcbi8qIDcwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDml6Xlv5fnsbvlt6Xlhbfpm4blkIhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvIDp7XG5cdCAqICAgbGV2ZWw6ICd3YXJuL2luZm8vbG9nJyBkZWZhdWx0IGlzIHdhcm5cblx0ICogICBtc2c6ICdtc2cnXG5cdCAqIH1cblx0ICovXG5cdHZhciBtZXRhSW5mbyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpO1xuXHR2YXIgcHJlZml4ID0gJ1tBUExVU10gLS0gJztcblx0ZXhwb3J0cy5sb2dnZXIgPSBmdW5jdGlvbiAobykge1xuXHQgIGlmICghbykge1xuXHQgICAgbyA9IHt9O1xuXHQgIH1cblx0ICB2YXIgbGV2ZWwgPSBvLmxldmVsIHx8ICd3YXJuJztcblx0ICBjb25zb2xlICYmIGNvbnNvbGVbbGV2ZWxdICYmIGNvbnNvbGVbbGV2ZWxdKHByZWZpeCtvLm1zZyk7XG5cdH07XG5cdGV4cG9ydHMubG9nID0gZnVuY3Rpb24oKXtcblx0ICB2YXIgZGVidWcgPSBtZXRhSW5mbyAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygnZGVidWcnKTtcblx0ICBkZWJ1ZyAmJiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtwcmVmaXhdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5kZWJ1Z0xvZyA9IGZ1bmN0aW9uKG8pIHtcblx0ICB2YXIgYXBsdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG5cdCAgICB0aGlzLmxvZ2dlcihvKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvY29tcG9zZS5qc1xuXHQgKiDlh73mlbDpmJ/liJfljIXoo4XlmaggRXhwb3NlIGNvbXBvc2l0b3Jcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdGZ1bmN0aW9uIGNvbXBvc2UgKCkge307XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuXHQgIC8qKlxuXHQgICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuXHQgICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuXHQgICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcblx0ICAgKi9cblx0ICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG5cdCAgICBpZiAodHlwZW9mIHRoaXNbbmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXNbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5jYWxsZWRMaXN0ID0gW107XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5zZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oaSkge1xuXHQgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0aGlzLmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuXHQgICAgdGhpcy5jYWxsZWRMaXN0LnB1c2goaSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Y29tcG9zZS5wcm90b3R5cGUucmVzZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oKSB7XG5cdCAgdGhpcy5jYWxsZWRMaXN0ID0gW107XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS53cmFwID0gZnVuY3Rpb24obXcsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIGNvbnRleHQgPSB0aGlzO1xuXHQgIHZhciBjdHggPSB0aGlzLmNvbnRleHQgfHwge307XG5cdCAgdmFyIGNvbXBvc2UgPSBjdHguY29tcG9zZSB8fCB7fTtcblx0ICB2YXIgbWF4VGltZW91dCA9IGNvbXBvc2UubWF4VGltZW91dCB8fCAxMCAqIDEwMDA7XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUpIHtcblx0ICAgIHZhciBzaXplID0gbXcubGVuZ3RoOyAvLyDkuK3pl7Tku7bpmJ/liJfplb/luqZcblx0ICAgIHZhciBpID0gMDsgLy8g5Lit6Ze05Lu257Si5byVXG5cdCAgICB2YXIgaiA9IDA7IC8vIOS4gOS4quagh+ivhu+8jDAt5Yid5aeL54q25oCB77yMMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcblx0ICAgIHZhciBzbGVlcEhhbmRlcjE7XG5cdCAgICB2YXIgcnVuID0gZnVuY3Rpb24oaW5kZXgsIHN0YXR1cykge1xuXHQgICAgICAvLyBjb250ZXh0LnB1YnN1YkluZm8oY29udGV4dCwgbXdbaV0pO1xuXHQgICAgICAvLyDkuK3pl7Tku7bpmJ/liJfmiafooYzlrozmr5XlkI7ov5Tlm55cblx0ICAgICAgaWYgKGkgPT09IHNpemUpIHtcblx0ICAgICAgICBzdGF0ZSA9ICdkb25lJztcblx0ICAgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpOyAvLyDph43nva5jYWxsZWRMaXN05Y+Y6YePXG5cdCAgICAgICAgLy8gc3RhdHVz5aaC5p6c562J5LqOZG9uZe+8jOivtOaYjuaYr+S4remAlOmAgOWHuueahOS4remXtOS7tu+8jOS4jemcgOimgeaJp+ihjOWbnuiwg1xuXHQgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSAmJiBzdGF0dXMgIT09IHN0YXRlKSB7XG5cdCAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2xlYXJUaW1lb3V0KHNsZWVwSGFuZGVyMSk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHZhciBjYl9zdGF0ZSA9IG51bGw7XG5cdCAgICAgIC8vIOS/neivgeavj+S4quS4remXtOS7tuWPquS8muaJp+ihjOS4gOasoVxuXHQgICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YoY29udGV4dC5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcblx0ICAgICAgICBjb250ZXh0LnNldENhbGxlZExpc3QgJiYgY29udGV4dC5zZXRDYWxsZWRMaXN0KGkpO1xuXHQgICAgICAgIGlmIChtdyAmJiBtd1tpXSAmJiBpc0Z1bmN0aW9uKG13W2ldWzBdKSkge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtaWRkbGV3YXJlXG5cdCAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtc2dcblx0ICAgICAgICAgICAgICovXG5cdCAgICAgICAgICAgIHN0YXRlID0gbXdbaV1bMF0uY2FsbChjb250ZXh0LCBzdGF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgIGkrKztcblx0ICAgICAgICAgICAgICBqID0gMTsgIC8vIDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG5cdCAgICAgICAgICAgICAgcnVuKGkpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgLy8gICBtc2c6IGVcblx0ICAgICAgICAgICAgLy8gfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgLy8g54q25oCB5Li6cGF1c2XnrYnlvoUyMDBtc+i9ruivou+8jOeKtuaAgeS4um51bWJlcuexu+Wei+eahOaVsOWAvOetieW+hXN0YXRlbXPova7or6Jcblx0ICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcblx0ICAgICAgaWYgKHN0YXRlID09PSAncGF1c2UnIHx8IGlzTnVtYmVyKSB7XG5cdCAgICAgICAgaiA9IDA7XG5cdCAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG5cdCAgICAgICAgdmFyIF90aW1lX291dCA9IGlzTnVtYmVyID8gc3RhdGUgOiBtYXhUaW1lb3V0O1xuXHQgICAgICAgIHZhciBfbXdfbmFtZSA9IG13W2ldID8gbXdbaV1bMV0gOiAnJztcblx0ICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgaWYgKGogPT09IDApIHtcblx0ICAgICAgICAgICAgdWxvZygpLncoJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXQpO1xuXHQgICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG5cdCAgICAgICAgICAgIC8vICAgbXNnOiAnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dFxuXHQgICAgICAgICAgICAvLyB9KTtcblx0ICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICBpKys7XG5cdCAgICAgICAgICAgIHJ1bihpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBfdGltZV9vdXQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZG9uZScpIHtcblx0ICAgICAgICAvLyDnirbmgIHkuLpkb25l6KGo56S657uT5p2f77yM5LiN566h5ZCO6Z2i6L+Y5pyJ5rKh5pyJ5Lit6Ze05Lu26YO957uT5p2fXG5cdCAgICAgICAgaSA9IHNpemU7XG5cdCAgICAgICAgcnVuKGksIHN0YXRlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyDpu5jorqTnirbmgIHvvIzlj6rnrqHmiafooYzkuK3pl7Tku7bpmJ/liJdcblx0ICAgICAgICBpKys7XG5cdCAgICAgICAgcnVuKGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgaWYgKGNvbnRleHQuY2FsbGVkTGlzdCAmJiBjb250ZXh0LmNhbGxlZExpc3QubGVuZ3RoID4gMCkge1xuXHQgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJ1bihpKTtcblx0ICB9O1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjb21wb3NlO1xuXG4vKioqLyB9KSxcbi8qIDcyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3BsdWdpbnNMb2FkZXIuanNcblx0ICog5o+S5Lu25Yqg6L295ZmoXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIEBwYXJhbXMgb3B0cyB7XG5cdCAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuXHQgICAgICogICBwbHVnaW5zOiBbXSxcblx0ICAgICAqICAgY29uZmlnOiB7fVxuXHQgICAgICogfVxuXHQgICAgICovXG5cdCAgICBpbml0OiBmdW5jdGlvbihvcHRzKSB7XG5cdCAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG5cdCAgICAgIGlmIChvcHRzICYmIHR5cGVvZiBvcHRzLm1pZGRsZXdhcmUgPT09ICdvYmplY3QnICYmIG9wdHMubWlkZGxld2FyZS5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gb3B0cy5taWRkbGV3YXJlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5YiG5Y+R6K6i6ZiF5Y+Y5YyWXG5cdCAgICAgKiBAcGFyYW0gbyB7XG5cdCAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG5cdCAgICAgKiAgIGNvbnRleHQ6IHsuLi59XG5cdCAgICAgKiB9LFxuXHQgICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuXHQgICAgICovXG5cdCAgICBwdWJzdWJJbmZvOiBmdW5jdGlvbihjdHgsIG13KSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHB1YnN1YiA9IGN0eC5wdWJzdWI7XG5cdCAgICAgICAgaWYgKHB1YnN1Yikge1xuXHQgICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHVsb2coKS53KGUpO1xuXHQgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAvLyAgIG1zZzogZVxuXHQgICAgICAgIC8vIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKGluZGV4KSB7XG5cdCAgICAgIGlmKCFpbmRleCkgaW5kZXggPSAwO1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgbWlkZGxld2FyZSA9IHRoaXMubWlkZGxld2FyZTtcblx0ICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdHMgfHwge307XG5cdCAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuXHQgICAgICBpZiAocGx1Z2lucyAmJiB0eXBlb2YgcGx1Z2lucyA9PT0gJ29iamVjdCcgJiYgcGx1Z2lucy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNbaW5kZXhdO1xuXHQgICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuXHQgICAgICAgIG1pZGRsZXdhcmUucHVzaChbZnVuY3Rpb24oc3RhdGUsIGNiKXtcblx0ICAgICAgICAgIF9zZWxmLnB1YnN1YkluZm8odGhpcywgcGx1Z2luKTtcblx0ICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuXHQgICAgICAgICAgdmFyIG0gPSBuZXcgcGx1Z2luLnBhdGgoKTtcblx0XG5cdCAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG5cdCAgICAgICAgICBpZiAoIW0uaW5pdCkge1xuXHQgICAgICAgICAgICBtLmluaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcblx0ICAgICAgICAgIG0uaW5pdCh7XG5cdCAgICAgICAgICAgIGNvbnRleHQ6IHRoaXMuY29udGV4dCxcblx0ICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHJldHVybiBtLnJ1bihzdGF0ZSwgZnVuY3Rpb24gKG1zZykge1xuXHQgICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgY2IocGx1Z2luLCBtc2cpO1xuXHQgICAgICAgICAgICB9LCAxKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0sIHBsdWdpbi5uYW1lXSk7XG5cdFxuXHQgICAgICAgIGluZGV4Kys7XG5cdCAgICAgICAgaWYocGx1Z2luc1tpbmRleF0pe1xuXHQgICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA3MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGZ1bmN0aW9uIGlzVHJpdmVyKCkge1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyAobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3Iuc3d1c2VyQWdlbnQpIDogJyc7XG5cdCAgICByZXR1cm4gL1RyaXZlci9nLnRlc3QoVUEpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVHJpdmVyO1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDc0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdFxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjb2xsZWN0X2NsayA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHQvLyB2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGFwbHVzQ3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBjbGtfY29uZmlnID0gW107XG5cdFxuXHQgIHZhciBpbml0Q2xrID0gZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuXHQgICAgdmFyIHNwbUIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuXHQgICAgdmFyIGVsZW1lbnRzR3JvdXBzID0gW107XG5cdCAgICBmdW5jdGlvbiBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2soZWxlbWVudHMsY29uZmlnKXtcblx0ICAgICAgaWYodXRpbEFycmF5LmlzQXJyYXkoZWxlbWVudHMpKXtcblx0ICAgICAgICBlbGVtZW50c0dyb3Vwcy5wdXNoKHtcblx0ICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgZWxlbWVudHM6IGVsZW1lbnRzXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYoZWxlbWVudHNHcm91cHMubGVuZ3RoPT09Y2xrX2NvbmZpZy5sZW5ndGgpe1xuXHQgICAgICAgIGNvbGxlY3RfY2xrLndhdGNoX2NsaWNrKG9wdC5ldmVudCwgZWxlbWVudHNHcm91cHMsIG9wdC5jb250ZXh0KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxBcnJheS5pc0FycmF5KGNsa19jb25maWcpKSB7XG5cdCAgICAgIGNsa19jb25maWcuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgICAgICAgaWYgKCF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcblx0ICAgICAgICAgIGNvbmZpZy5jc3NTZWxlY3RvciA9ICcuJyArIGNvbmZpZy5jc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKCFjb25maWcuc3BtQikge1xuXHQgICAgICAgICAgY29uZmlnLnNwbUIgPSBzcG1CO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgZWxlbWVudHMgPSBtaW5pLmdldENvbnRleHQoKS5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNvbmZpZy5jc3NTZWxlY3Rvcik7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG5cdCAgICAgICAgICAgIGlkOiB0cnVlLFxuXHQgICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuXHQgICAgICAgICAgICByZWN0OiB0cnVlLFxuXHQgICAgICAgICAgICBzY3JvbGxPZmZzZXQ6IHRydWVcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXQpIHtcblx0ICAgICAgICAgICAgZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKHJldCxjb25maWcpO1xuXHQgICAgICAgICAgfSkuZXhlYygpOyBcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8g5LiN5pSv5oyBZmllbGRz5pa55rOV55qE5Zy65pmv77yI5pSv5LuY5a6d5LiL77yM5pS555So5Z2Q5qCH77yJXG5cdCAgICAgICAgICBlbGVtZW50cy5ib3VuZGluZ0NsaWVudFJlY3QoKS5leGVjKGZ1bmN0aW9uIChyZXQpIHtcblx0ICAgICAgICAgICAgZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKHJldCxjb25maWcpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIFxuXHQgIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuXHQgICAgICAgIGNsa19jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0ICAvLyBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgIC8vICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIGZ1bmN0aW9uICgpIHtcblx0ICAvLyAgICAgLy8gVE9ET1xuXHQgIC8vICAgfV1cblx0ICAvLyB9KTtcblx0ICAvLyBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgIC8vICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIGZ1bmN0aW9uICgpIHtcblx0ICAvLyAgICAgLy8gVE9ET1xuXHQgIC8vICAgfV1cblx0ICAvLyB9KTtcblx0XG5cdCAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvbkFwbHVzQ2xrJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIGluaXRDbGsob3B0KTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgLy8gYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgLy8gICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgIC8vICAgICAvLyBUT0RPXG5cdCAgLy8gICB9XG5cdCAgLy8gfSk7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNzYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB3YXRjaFRyYWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0dmFyIGdldEhhc2hLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0dmFyIHJheFV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0LyoqXG5cdCAqIOaKiuiHquWKqOabneWFieebuOWQjGNzc1NlbGVjdG9y55qE55u45ZCM5L2N572u55qEZGF0YXNldOaLv+WIsOe7meiHquWKqOeCueWHu+S9v+eUqFxuXHQgKiDlm6DkuLrlnKjmlK/ku5jlrp3njq/looPkuIvoh6rliqjngrnlh7vkuovku7bmi7/kuI3liLBkYXRhc2V0XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXREYXRhU2V0IChjb25maWcsIGluZGV4KSB7XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgIFxuXHQgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuXHQgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG5cdCAgICAgIHZhciBleHBDb25maWcgPSB2LmV4cENvbmZpZyB8fCB7fTtcblx0ICAgICAgLy8g5pud5YWJY3NzU2VsZWN0b3LkuI7ngrnlh7vnmoRjc3NTZWxlY3RvcuebuOWQjOaJjeiupOS4uuaYr+WQjOexu+Wei+WFg+e0oFxuXHQgICAgICBpZiAoY29uZmlnLmNzc1NlbGVjdG9yID09PSBleHBDb25maWcuY3NzU2VsZWN0b3IpIHtcblx0ICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoe1xuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfSwgZXhwQ29uZmlnKTtcblx0ICAgICAgICBcblx0ICAgICAgICBpZiAoaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG5cdCAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKHYuZGF0YXNldCk7XG5cdCAgICAgICAgfSAgXG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLndhdGNoX2NsaWNrID0gZnVuY3Rpb24gKGNsa0luZm8sIGVsZW1lbnRzR3JvdXBzLCBwYWdlQ3R4KSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIHJlc3VsdHMgPSBbXTtcblx0ICBlYWNoKGVsZW1lbnRzR3JvdXBzLGZ1bmN0aW9uKGdyb3VwKXtcblx0ICAgIHZhciBlbGVtZW50cyA9IGdyb3VwLmVsZW1lbnRzO1xuXHQgICAgdmFyIGNvbmZpZyA9IGdyb3VwLmNvbmZpZztcblx0ICAgIGZvciAodmFyIGogPSAwOyBqIDwgZWxlbWVudHMubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgdmFyIF92YWx1ZSA9IGVsZW1lbnRzW2pdO1xuXHQgICAgICBpZiAoaXNJbkFyZWEoY2xrSW5mbywgX3ZhbHVlKSkge1xuXHQgICAgICAgIHZhciBpbmRleCA9IGogKyAxO1xuXHQgICAgICAgIHZhciBkYXRhc2V0ID0gX3ZhbHVlLmRhdGFzZXQgfHwgZ2V0RGF0YVNldChjb25maWcsIGluZGV4KSB8fCB7fTtcblx0ICAgICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuXHQgICAgICAgIHZhciBfc3BtRGF0YSA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkYXRhc2V0LnRyYWNrZXJQYXJhbXMpIHx8IHt9O1xuXHQgICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3Jcblx0ICAgICAgICAgIHNwbURhdGEgPSBjbG9uZURlZXAoYXBsdXMuXyQuc3BtLmRhdGEgfHwge30pO1xuXHQgICAgICAgICAgaWYgKGRvY3VtZW50ICYmIGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcblx0ICAgICAgICAgICAgdmFyIGRvbURhdGFTZXQgPSByYXhVdGlsLmdldERhdGFTZXQoY29uZmlnLCBpbmRleC0xKTtcblx0ICAgICAgICAgICAgdmFyIGMgPSBkb21EYXRhU2V0LnNwbUMgfHwgY29uZmlnLnNwbUMgfHwgJzAnO1xuXHQgICAgICAgICAgICB2YXIgZCA9IGRvbURhdGFTZXQuc3BtRCB8fCBjb25maWcuc3BtRCB8fCAnMCc7XG5cdCAgICAgICAgICAgIHNwbURhdGEuYyA9IGM7XG5cdCAgICAgICAgICAgIHNwbURhdGEuZCA9IGQ7XG5cdCAgICAgICAgICAgIC8vIOihpeWFhSByYXggZGF0YS0qIOWxnuaAp1xuXHQgICAgICAgICAgICBkYXRhc2V0ID0gT2JqZWN0LmFzc2lnbihkYXRhc2V0LCBkb21EYXRhU2V0KTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHZhciBzcG1DID0gZGF0YXNldC50cmFja2VyIHx8IGNvbmZpZy5jc3NTZWxlY3Rvci5yZXBsYWNlKC9cXCd8XFxcInxcXDt8XFw6fFxcPXxcXFt8XFxdfFxcLnxcXCN8XFwtfFxcL3xcXHwvZywgJycpOyAvLyDljrvmjonnibnmrorlrZfnrKZcblx0ICAgICAgICAgICAgc3BtRGF0YS5jID0gc3BtQztcblx0ICAgICAgICAgICAgaWYgKHNwbURhdGEuYyAmJiBzcG1EYXRhLmMgIT09ICcwJykge1xuXHQgICAgICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgaW5kZXg7XG5cdCAgICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmIgPSBjb25maWcuc3BtQjtcblx0ICAgICAgICAgIGlmIChjb25maWcuc3BtQykge1xuXHQgICAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHNwbURhdGEuYyA9IF9zcG1EYXRhLnNwbUMgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtQykgOiAnJztcblx0ICAgICAgICAgIH1cblx0ICBcblx0ICAgICAgICAgIGlmIChjb25maWcuc3BtRCkge1xuXHQgICAgICAgICAgICBzcG1EYXRhLmQgPSBpbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgaW5kZXggOiBjb25maWcuc3BtRDtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHNwbURhdGEuZCA9IF9zcG1EYXRhLnNwbUQgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtRCkgOiAnJztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKHtcblx0ICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG5cdCAgICAgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgICAgIGVsZW1lbnQ6IF92YWx1ZSxcblx0ICAgICAgICAgIHNwbURhdGE6IHNwbURhdGFcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cdCAgaWYocmVzdWx0cy5sZW5ndGg9PT0xKXtcblx0ICAgIHJlc3VsdCA9IHJlc3VsdHNbMF07XG5cdCAgfWVsc2UgaWYocmVzdWx0cy5sZW5ndGg+MSl7XG5cdCAgICByZXN1bHQgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbihwcmV2aW91cyxjdXJyZW50KXtcblx0ICAgICAgdmFyIG1hdGNoZWRSZXN1bHQgPSBwcmV2aW91cztcblx0ICAgICAgdmFyIHByZXZpb3VzRWxlbWVudCA9IHByZXZpb3VzLmVsZW1lbnQ7XG5cdCAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnQuZWxlbWVudDtcblx0ICAgICAgaWYoY3VycmVudEVsZW1lbnQudG9wID49IHByZXZpb3VzRWxlbWVudC50b3AgJiYgY3VycmVudEVsZW1lbnQucmlnaHQgPD0gcHJldmlvdXNFbGVtZW50LnJpZ2h0ICYmIGN1cnJlbnRFbGVtZW50LmJvdHRvbSA8PSBwcmV2aW91c0VsZW1lbnQuYm90dG9tICYmIGN1cnJlbnRFbGVtZW50LmxlZnQgPj0gcHJldmlvdXNFbGVtZW50LmxlZnQpe1xuXHQgICAgICAgIG1hdGNoZWRSZXN1bHQgPSBjdXJyZW50O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBtYXRjaGVkUmVzdWx0O1xuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGlmKHJlc3VsdCl7XG5cdCAgICB3YXRjaFRyYWNrZXIucHVzaEV2ZW50KCdDTEsnLCByZXN1bHQuZGF0YXNldCwgcmVzdWx0LmNvbmZpZywgcmVzdWx0LmVsZW1lbnQsIHJlc3VsdC5zcG1EYXRhLCBwYWdlQ3R4KTtcblx0ICB9XG5cdCAgZnVuY3Rpb24gaXNJbkFyZWEgKGNsa0luZm8sIGVsZUluZm8pIHtcblx0ICAgIHZhciBjaGFuZ2VkVG91Y2ggPSB7fTtcblx0ICAgIGlmIChjbGtJbmZvKSB7XG5cdCAgICAgIGlmIChjbGtJbmZvLmNoYW5nZWRUb3VjaGVzKSB7XG5cdCAgICAgICAgLy8g5b6u5L+hXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5jaGFuZ2VkVG91Y2hlc1swXTtcblx0ICAgICAgfSBlbHNlIGlmIChjbGtJbmZvLmRldGFpbCkge1xuXHQgICAgICAgIC8vIOaUr+S7mOWunVxuXHQgICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uZGV0YWlsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgeCA9IGNoYW5nZWRUb3VjaC5jbGllbnRYIHx8IDA7XG5cdCAgICB2YXIgeSA9IGNoYW5nZWRUb3VjaC5jbGllbnRZIHx8IDA7XG5cdFxuXHQgICAgdmFyIF90b3AgPSBlbGVJbmZvLnRvcDtcblx0ICAgIHZhciBfYm90dG9tID0gZWxlSW5mby5ib3R0b207XG5cdCAgICBpZiAoZWxlSW5mby5zY3JvbGxUb3ApIHtcblx0ICAgICAgX3RvcCArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgICAgX2JvdHRvbSArPSBlbGVJbmZvLnNjcm9sbFRvcDtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZWxlSW5mby5sZWZ0IDwgeCAmJiB4IDwgZWxlSW5mby5yaWdodCAmJiBfdG9wIDwgeSAmJiB5IDwgX2JvdHRvbSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0dmFyIHV0aWxMb2dnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcwKTtcblx0dmFyIHJlY29yZEV4cE1hcFF1ZXVlID0ge307XG5cdHZhciBERUZBVUxUX1BLR19TSVpFID0gMztcblx0dmFyIFBPU1QgPSAnUE9TVCc7XG5cdHZhciBFWFAgPSAnRVhQJztcblx0XG5cdC8qKlxuXHQgKiDojrflj5bnlKjmiLfms6jlhaXnmoTln4vngrnkv6Hmga/vvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvZG9jcy9tZXRhI2I3ZDhjY2M3XG5cdCAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudFxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHNlbGVjdG9yXG5cdCAqXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdGZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvciwgc3BtRGF0YSkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpIHx8IHt9O1xuXHQgIHZhciBnZXRNZXRhSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvO1xuXHQgIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHZhciB1c2VyRm4gPSBnZXRNZXRhSW5mbyh1c2VyRm5OYW1lKTtcblx0ICAgIHZhciB1c2VySW5mbyA9IHt9O1xuXHQgICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdXNlckluZm8gPSB1c2VyRm4oZWxlbWVudCA/IGNsb25lRGVlcChlbGVtZW50KSA6IHt9LCBzZWxlY3Rvciwgc3BtRGF0YSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xuXHR2YXIgRXZlbnRBcnJheSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdGhpcy5idWZmZXIucHVzaCh2YWx1ZSk7XG5cdCAgICB3aGlsZSAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMucGtnU2l6ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQodGhpcy5sb2drZXksIEVYUCwgZ29rZXlzLCB0aGlzLm1ldGhvZCk7XG5cdCAgICAgIH1cblx0ICAgIH0gXG5cdCAgfVxuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIGdldEZpeGVkTnVtYmVyICh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgdmFyIF9yZXN1bHQgPSAnJztcblx0ICB0cnkge1xuXHQgICAgdmFyIF9udW0gPSBuZXcgTnVtYmVyKHZhbHVlKTtcblx0ICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBfcmVzdWx0ID0gdmFsdWU7XG5cdCAgfVxuXHQgIHJldHVybiBfcmVzdWx0O1xuXHR9XG5cdFxuXHRleHBvcnRzLnB1c2hFdmVudCA9IGZ1bmN0aW9uIChnbWtleSwgZGF0YSwgY29uZmlnLCBlbGVtZW50LCBzcG1EYXRhLCBwYWdlQ3R4KSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnID8gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpIDogZmFsc2U7XG5cdCAgdmFyIHByb3BzID0gY29uZmlnLnByb3BzO1xuXHQgIHZhciBwYXJhbXMgPSB7fTtcblx0ICB2YXIgZGF0YXNldCA9IHt9O1xuXHRcblx0ICBpZiAoZGF0YSkge1xuXHQgICAgZm9yICh2YXIgZGF0YWtleSBpbiBkYXRhKSB7XG5cdCAgICAgIGlmICghIWRhdGFrZXkudG9Mb3dlckNhc2UoKS5tYXRjaCgvXmRhdGEtLykpIHtcblx0ICAgICAgICBkYXRhc2V0W2RhdGFrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyldID0gZGF0YVtkYXRha2V5XTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBUT0RPOiDlr7nkuo7mt5jlrp3lsI/nqIvluo8sZGF0YWtleeW3sue7j+WcqGRhdGHlhoXkuobvvIzlubbkuJTkuI3lkKtkYXRhLeWJjee8gCzpnIDljZXni6zliqDlhaVA6ZKw5pitXG5cdCAgICAgICAgZGF0YXNldFtkYXRha2V5XSA9IGRhdGFbZGF0YWtleV07XG5cdCAgICAgIH1cblx0ICAgIH0gIFxuXHQgIH1cblx0ICBpZiAocHJvcHMgJiYgaXNBcnJheShwcm9wcykpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IHByb3BzW2ldLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXmRhdGEtLywgJycpLnJlcGxhY2UoLy0vZywgJycpO1xuXHQgICAgICBwYXJhbXNba2V5XSA9IGRhdGFzZXRba2V5XTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YXNldCk7XG5cdCAgfVxuXHQgIFxuXHQgIGlmIChlbGVtZW50ICYmIGdta2V5ID09PSBFWFApIHtcblx0ICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywge1xuXHQgICAgICAnX3cnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LndpZHRoLCAyKSxcblx0ICAgICAgJ19oJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC5oZWlnaHQsIDIpLFxuXHQgICAgICAnX3gnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LngsIDIpLFxuXHQgICAgICAnX3knOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnksIDIpLFxuXHQgICAgICAvLyAnX2hhc2gnOiBlbGVtZW50Lmhhc2hfdmFsdWUgfHwgJycsXG5cdCAgICAgICdfcmF0ZSc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQudmlld2FiaWxpdHlSYXRlIHx8IGVsZW1lbnQuaW50ZXJzZWN0aW9uUmF0aW8sIDIpLFxuXHQgICAgICAnX3ZpZXdhYmlsaXR5JzogJ2ludGVyc2VjdGlvbidcblx0ICAgIH0pO1xuXHQgIH0gIFxuXHQgIGlmIChjb25maWcuX3Z0KSB7XG5cdCAgICBwYXJhbXMuX3Z0ID0gY29uZmlnLl92dDtcblx0ICB9XG5cdFxuXHQgIC8vIGlmIChkb2N1bWVudCAmJiBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpKSB7XG5cdCAgLy8gICB2YXIgc3BtRGF0YSA9IFxuXHQgIC8vIH1cblx0XG5cdCAgdmFyIHVzZXJGbk5hbWUgPSBnbWtleSA9PT0gRVhQID8gJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicgOiAnYXBsdXMtYXV0by1jbGstdXNlcmZuJztcblx0ICB2YXIgdXNlckluZm8gPSBnZXRVc2VySW5mbyh1c2VyRm5OYW1lLCBlbGVtZW50LCBjb25maWcuY3NzU2VsZWN0b3IsIHNwbURhdGEpO1xuXHRcblx0ICBpZiAoIXVzZXJJbmZvLnNwbSkge1xuXHQgICAgaWYgKGlzQWxpICYmIHNwbURhdGEgJiYgc3BtRGF0YS5hICYmIHNwbURhdGEuYikge1xuXHQgICAgICB1c2VySW5mby5zcG0gPSBbc3BtRGF0YS5hLCBzcG1EYXRhLmIsIHNwbURhdGEuYyB8fCAnMCcsIHNwbURhdGEuZCB8fCAnMCddLmpvaW4oJy4nKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHVzZXJJbmZvLnNwbSA9IHNwbURhdGEgJiYgc3BtRGF0YS5iID8gc3BtRGF0YSA6IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBnb2tleSA9IHt9O1xuXHQgIHZhciB0cmFja2VyUGFyYW1zID0gZGF0YS50cmFja2VyUGFyYW1zIHx8IGRhdGFbJ3RyYWNrZXItcGFyYW1zJ107XG5cdCAgaWYgKHRyYWNrZXJQYXJhbXMpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBfdHJhY2tlclBhcmFtcyA9IEpTT04ucGFyc2UodHJhY2tlclBhcmFtcyk7XG5cdCAgICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24ocGFyYW1zLCBfdHJhY2tlclBhcmFtcyk7XG5cdCAgICAgIGRlbGV0ZSBwYXJhbXMudHJhY2tlclBhcmFtcztcblx0ICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VycGFyYW1zO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgXG5cdCAgaWYgKGdta2V5ID09PSAnRVhQJyAmJiBpc0FsaSAmJiByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XSkge1xuXHQgICAgdmFyIGV4ZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgdXNlckluZm8pO1xuXHQgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCB7XG5cdCAgICAgIGV4YXJnczogZXhkYXRhXG5cdCAgICB9KTtcblx0ICAgIHV0aWxMb2dnZXIubG9nKCdhdXRvIGV4cDonLGNvbmZpZy5sb2drZXksZXhkYXRhKTtcblx0ICAgIHJlY29yZEV4cE1hcFF1ZXVlW2NvbmZpZy5sb2drZXldLnB1c2goY2xvbmVEZWVwKGdva2V5KSk7XG5cdCAgfSBlbHNlIHsgICAgXG5cdCAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe2lzX2F1dG86IDF9LCBwYXJhbXMsIHVzZXJJbmZvLCBjb25maWcuY3VzdG9tQXJncyk7XG5cdCAgICB1dGlsTG9nZ2VyLmxvZygnYXV0byBjbGs6Jyxjb25maWcubG9na2V5LGdva2V5KTtcblx0ICAgIGlmIChwYWdlQ3R4KSB7XG5cdCAgICAgIHZhciBjdXIgPSBwYWdlQ3R4LnJvdXRlO1xuXHQgICAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCB7Y3VycmVudFBhdGg6IGN1ciB9KSwgUE9TVCk7ICBcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGFwbHVzLnJlY29yZChjb25maWcubG9na2V5LCBnbWtleSwgZ29rZXksIFBPU1QpO1xuXHQgICAgfVxuXHRcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7QXJyYXlPYmplY3R9IGNvbmZpZyA6IFt7XG5cdCAqICAgICdwb3NpdGlvblNlbGVjdG9yJzogJy5zY3JvbGwtdmlldycsXG5cdCAqICAgICdjc3NTZWxlY3Rvcic6Jy5iYWxsJyxcblx0ICogICAgJ2xvZ2tleSc6Jy90ZXN0LmJhbGwuMScsXG5cdCAqICAgICdwcm9wcyc6IFsnZGF0YS10cmFja2VyJ10sXG5cdCAqICB9LCB7XG5cdCAqICAgICdjc3NTZWxlY3Rvcic6Jy5teWJ1dHRvbicsXG5cdCAqICAgICdsb2drZXknOicvdGVzdC5teWJ1dHRvbi4xJyxcblx0ICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcblx0ICogIH1dXG5cdCAqL1xuXHRleHBvcnRzLndhdGNoUmVjb3JkID0gZnVuY3Rpb24gKGNvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZyA/IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA6IGZhbHNlO1xuXHQgIFxuXHQgIGlmIChpc0FsaSAmJiBjb25maWcpIHtcblx0ICAgIGNvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChjZmcpIHtcblx0ICAgICAgaWYgKCFyZWNvcmRFeHBNYXBRdWV1ZS5oYXNPd25Qcm9wZXJ0eShjZmcubG9na2V5KSkge1xuXHQgICAgICAgIHJlY29yZEV4cE1hcFF1ZXVlW2NmZy5sb2drZXldID0gRXZlbnRBcnJheS5jcmVhdGUoe1xuXHQgICAgICAgICAgbGVuZ3RoOiAwLFxuXHQgICAgICAgICAgYnVmZmVyOiBbXSxcblx0ICAgICAgICAgIGxvZ2tleTogY2ZnLmxvZ2tleSxcblx0ICAgICAgICAgIHBrZ1NpemU6IHR5cGVvZiBjZmcucGtnU2l6ZSA9PT0gJ251bWJlcicgJiYgY2ZnLnBrZ1NpemUgfHwgREVGQVVMVF9QS0dfU0laRSxcblx0ICAgICAgICAgIG1ldGhvZDogY2ZnLm1ldGhvZCB8fCBQT1NUXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gXG5cdCAgICB9KTsgICAgXG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5jbGVhclJlY29yZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcgPyBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgOiBmYWxzZTtcblx0XG5cdCAgaWYgKGlzQWxpKSB7XG5cdCAgICBmb3IgKHZhciBsb2drZXkgaW4gcmVjb3JkRXhwTWFwUXVldWUpIHtcblx0ICAgICAgdmFyIGdva2V5cyA9IHJlY29yZEV4cE1hcFF1ZXVlW2xvZ2tleV0uYnVmZmVyIHx8IFtdO1xuXHQgICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICBhcGx1cy5jb21iaW5lUmVjb3JkKGxvZ2tleSwgRVhQLCBnb2tleXMsIFBPU1QpO1xuXHQgICAgICAgIHJlY29yZEV4cE1hcFF1ZXVlW2xvZ2tleV0uYnVmZmVyID0gW107XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogNzggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICog5qC55o2u5YWD57Sg5bGe5oCn5ZKM5Z+L54K56YWN572u57K+56Gu6I635Y+W5LiA5Liq5YWD57Sg55qEaGFzaEtleVxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IGVsZW1lbnRBdHRyIHtcblx0ICogICBpZFxuXHQgKiB9XG5cdCAqIEBwYXJhbXMge09iamVjdH0gY29uZmlnIHtcblx0ICogICBsb2drZXksIGNzc1NlbGVjdG9yLCBwb3NpdGlvblNlbGVjdG9yXG5cdCAqIH1cblx0ICogQHJldHVybiB7U3RyaW5nfSBoYXNoS2V5XG5cdCAqL1xuXHRcblx0Ly8gbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuXHQvLyAgIHZhciBoYXNoS2V5ID0gW1xuXHQvLyAgICAgY29uZmlnLmxvZ2tleSxcblx0Ly8gICAgIGNvbmZpZy5jc3NTZWxlY3Rvcixcblx0Ly8gICAgIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yLFxuXHQvLyAgICAgZWxlbWVudEF0dHIuaW5kZXhcblx0Ly8gICBdLmpvaW4oJ18nKTtcblx0Ly8gICByZXR1cm4gaGFzaEtleTtcblx0Ly8gfTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnRBdHRyLCBjb25maWcpIHtcblx0ICB2YXIgaGFzaEtleSA9IFtcblx0ICAgIGNvbmZpZy5sb2drZXksXG5cdCAgICBjb25maWcuY3NzU2VsZWN0b3IsXG5cdCAgICAvLyBjb25maWcucG9zaXRpb25TZWxlY3RvciB8fCAnJyxcblx0ICAgIC8vIGVsZW1lbnRBdHRyLmluZGV4IC8v5reY5a6d5bCP56iL5bqP5Yik5pataGFzaEtleVxuXHQgIF07XG5cdFxuXHQgIGlmIChjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgaGFzaEtleS5wdXNoKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKTtcblx0ICB9XG5cdCAgXG5cdCAgaWYgKGVsZW1lbnRBdHRyLmlkKSB7XG5cdCAgICBoYXNoS2V5LnB1c2goZWxlbWVudEF0dHIuaWQpO1xuXHQgIH1cblx0XG5cdCAgaWYgKGVsZW1lbnRBdHRyLmluZGV4ID49IDApIHtcblx0ICAgIGhhc2hLZXkucHVzaChlbGVtZW50QXR0ci5pbmRleCk7XG5cdCAgfVxuXHQgIC8vIFJheOahhuaetui/kOihjOaXtuiOt+W+l+eahGRhdGFzZXTliY3lkI7kuI3kuIDoh7TvvIzliKDpmaTml6DmlYjlsZ7mgKcgQOmSsOaYrSAyMDIxLTA5LTE4IDA5OjE3OjUyXG5cdCAgaWYgKGVsZW1lbnRBdHRyLmRhdGFzZXQgJiYgZWxlbWVudEF0dHIuZGF0YXNldFsncHJpdmF0ZU5vZGVJZCddKSB7XG5cdCAgICBkZWxldGUgZWxlbWVudEF0dHIuZGF0YXNldFsncHJpdmF0ZU5vZGVJZCddO1xuXHQgIH1cblx0ICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCkge1xuXHQgICAgaGFzaEtleS5wdXNoKEpTT04uc3RyaW5naWZ5KGVsZW1lbnRBdHRyLmRhdGFzZXQpKTtcblx0ICB9XG5cdCAgaGFzaEtleSA9IGhhc2hLZXkuam9pbignXycpO1xuXHQgIHJldHVybiBoYXNoS2V5O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDc5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogcmF4VXRpbC5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHRcblx0ZXhwb3J0cy5nZXREYXRhU2V0ID0gZnVuY3Rpb24gKGNvbmZpZyxpbmRleCkge1xuXHQgIHZhciBkID0ge307XG5cdCAgdmFyIGNseDtcblx0ICBpZiAodXRpbERhc2guaXNTdGFydFdpdGgoY29uZmlnLmNzc1NlbGVjdG9yLCAnLicpKSB7XG5cdCAgICBjbHggPSBjb25maWcuY3NzU2VsZWN0b3Iuc2xpY2UoMSwgY29uZmlnLmNzc1NlbGVjdG9yLmxlbmd0aCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGNseCA9IGNvbmZpZy5jc3NTZWxlY3Rvcjtcblx0ICB9XG5cdCAgdmFyIGRvbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNseCk7XG5cdCAgaWYgKGRvbXMgJiYgZG9tcy5sZW5ndGggPiAwKXtcblx0ICAgIHZhciBkb21EYXRhU2V0ID0gZG9tc1tpbmRleF0uZGF0YXNldCB8fCB7fTtcblx0ICAgIGZvciAodmFyIGtleSBpbiBkb21EYXRhU2V0KSB7XG5cdCAgICAgIHZhciB0ID0gZG9tRGF0YVNldFtrZXldO1xuXHQgICAgICBzd2l0Y2godHlwZW9mIHQpe1xuXHQgICAgICBjYXNlICdmdW5jdGlvbic6XG5cdCAgICAgICAgZFtrZXldID0gdCgpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdvYmplY3QnOlxuXHQgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKGQsIHQpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzdHJpbmcnOlxuXHQgICAgICAgIGlmIChrZXkgPT09ICd0cmFja2VyUGFyYW1zJykge1xuXHQgICAgICAgICAgdmFyIHRwID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRvbURhdGFTZXQudHJhY2tlclBhcmFtcyk7XG5cdCAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbihkLCB0cCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGRba2V5XSA9IHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdudW1iZXInOlxuXHQgICAgICBjYXNlICdib29sZWFuJzpcblx0ICAgICAgICBkW2tleV0gPSB0O1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBkO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc1JheCA9IGZ1bmN0aW9uKCl7XG5cdCAgcmV0dXJuIGRvY3VtZW50ID8gdHJ1ZSA6IGZhbHNlO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDgwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdFxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKSgpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4MSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBjb2xsZWN0X2V4cCA9IF9fd2VicGFja19yZXF1aXJlX18oODIpO1xuXHR2YXIgY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0Ly8gdmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcblx0XG5cdC8vIOeUqOS6juebkeWQrFxuXHR2YXIgUEFHRV9EQVRBX01BUCA9IHt9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgaXNTdGFydCA9IDA7XG5cdCAgdmFyIGlzRmlyc3RUb3VjaCA9IDA7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKGFwbHVzLl9hcGx1c19hdXRvX2V4cCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBhcGx1cy5fYXBsdXNfYXV0b19leHAgPSB7XG5cdCAgICAgIGhhc2hNYXA6IHt9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgdmFyIF9jb25maWcgPSBbXTtcblx0XG5cdCAgZnVuY3Rpb24gd2F0Y2hNZXRhSW5mbyhjb250ZXh0LCBpc0ZpcnN0LCB3YXRjaFR5cGUpIHtcblx0ICAgIHZhciBoYW5kbGVyTWV0YUluZm8gPSBmdW5jdGlvbiAobWV0YUtleSwgbWV0YVZhbHVlKSB7ICAgXG5cdCAgICAgIGlmIChtZXRhS2V5ID09PSAnYXBsdXMtYXV0by1leHAnKSB7XG5cdCAgICAgICAgdmFyIF9jb25maWcyID0gY29uZmlnLmdldEF1dG9FeHBDb25maWcobWV0YVZhbHVlKTtcblx0ICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoX2NvbmZpZzIpID09PSBKU09OLnN0cmluZ2lmeShfY29uZmlnKSkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfY29uZmlnID0gX2NvbmZpZzI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChtZXRhVmFsdWUgJiYgX2NvbmZpZyAmJiBfY29uZmlnLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgIGNvbGxlY3RfZXhwLndhdGNoX2V4cG9zdXJlKGNvbnRleHQsIF9jb25maWcsIGlzRmlyc3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgYWN0aW9uOiB3YXRjaFR5cGUsIC8vIGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgYXJndW1lbnRzOiBbJ3NldE1ldGFJbmZvJywgaGFuZGxlck1ldGFJbmZvXVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0RXhwIChjb250ZXh0LCBpc0ZpcnN0KSB7XG5cdCAgICBfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJyk7XG5cdCAgICAvLyBUYXJv5qGG5p625Z+65LqO6L+Q6KGM5pe277yM6Ieq5Yqo5pud5YWJ5Lya5Ye6546w6I635Y+W5LiN5Yiw5pud5YWJ5YWD57Sg55qE5oOF5Ya1XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHQgICAgICBjb2xsZWN0X2V4cC53YXRjaF9leHBvc3VyZShjb250ZXh0LCBfY29uZmlnLCBpc0ZpcnN0KTtcblx0ICAgIH0sIDApO1xuXHQgIH1cblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlNVQlNDUklCRSk7XG5cdCAgICAgICAgaWYgKGlzU3RhcnQgPT09IDApIHtcblx0ICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDEpO1xuXHQgICAgICAgICAgaXNTdGFydCA9IDE7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDApO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG5cdCAgICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9wYXRoOyAvLyBKU09OLnN0cmluZ2lmeShfY3VycmVudFBhZ2UuZGF0YSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgZnVuY3Rpb24gcmVzZXRBdXRvRXhwIChvcHQpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG5cdCAgICAgIHZhciBfZGF0YSA9IFBBR0VfREFUQV9NQVBbX3BhdGhdO1xuXHQgICAgICBcblx0ICAgICAgdmFyIF9jdXJyZW50RGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdC5kYXRhKTtcblx0ICAgICAgaWYgKF9kYXRhICE9PSBfY3VycmVudERhdGEpIHtcblx0ICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9jdXJyZW50RGF0YTtcblx0ICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAwKTtcblx0ICAgICAgfSAgXG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25BcGx1c1RvdWNoJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIGlmIChpc0ZpcnN0VG91Y2ggPT09IDApIHtcblx0ICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IDE7XG5cdCAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG5cdCAgICAgIH0sIDIwMCk7XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgUEFHRV9EQVRBX01BUCA9IHt9O1xuXHQgICAgICAgIGlzU3RhcnQgPSAwO1xuXHQgICAgICAgIGlzRmlyc3RUb3VjaCA9IDA7XG5cdCAgICAgICAgd2F0Y2hNZXRhSW5mbyhvcHQuY29udGV4dCwgMSwgYXBsdXNTdGF0aWMuVU5TVUJTQ1JJQkUpO1xuXHQgICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uVW5sb2FkJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcblx0ICAgICAgICBjb2xsZWN0X2V4cC5jbGVhcigpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDgyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBfY29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgd2F0Y2hUcmFja2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdHZhciBnZXRIYXNoS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OCk7XG5cdHZhciByYXhVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3OSk7XG5cdHZhciBtaW5pVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdHZhciBvYnNlcnZlcnMgPSBbXTtcblx0dmFyIGN0eDtcblx0XG5cdC8vIHJlbG9hZEN0eCDnlKjkuo7ljZXlhYPmtYvor5XvvIzljZXmtYvkuK3pnIDopoHliIfmjaLmlK/ku5jlrp3jgIHlvq7kv6Hnjq/looPvvIzlrp7pmYXnlJ/kuqfnjq/looPnlKjkuI3liLBcblx0ZXhwb3J0cy53YXRjaF9leHBvc3VyZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBjb25mLCBpc0ZpcnN0LCByZWxvYWRDdHgpIHtcblx0ICBpZiAoIWN0eCB8fCByZWxvYWRDdHgpIHtcblx0ICAgIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgIH1cblx0ICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG5cdCAgdmFyIGR1cDtcblx0ICBcblx0ICB3YXRjaFRyYWNrZXIud2F0Y2hSZWNvcmQoY29uZik7XG5cdCAgXG5cdCAgZnVuY3Rpb24gd2FpdCAoY291bnQpIHtcblx0ICAgIGlmIChjb3VudCA8IGNvbmYubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBjb25maWcgPSBjb25mW2NvdW50XTtcblx0ICAgICAgZHVwID0gMDtcblx0ICAgICAgb2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0ICAgICAgICBpZiAoZWxlbWVudC5zdWJqZWN0WzBdID09PSBjb25maWcuY3NzU2VsZWN0b3IgJiZcblx0ICAgICAgICAgIGVsZW1lbnQuc3ViamVjdFsxXSA9PT0gY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcblx0ICAgICAgICAgIGR1cCA9IDE7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgdmFyIHN1YmplY3QgPSBbY29uZmlnLmNzc1NlbGVjdG9yLCBjb25maWcucG9zaXRpb25TZWxlY3Rvcl07XG5cdCAgICAgIGZ1bmN0aW9uIGhhc2hpbmcgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gc3ViamVjdFswXTtcblx0ICAgICAgICBpZiAoY3NzU2VsZWN0b3IgJiYgIXV0aWxEYXNoLmlzU3RhcnRXaXRoKHN1YmplY3RbMF0sICcuJykpIHtcblx0ICAgICAgICAgIGNzc1NlbGVjdG9yID0gJy4nICsgY3NzU2VsZWN0b3I7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjdHguY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChjc3NTZWxlY3Rvcik7ICAgICAgICAgIFxuXHQgICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcblx0ICAgICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuXHQgICAgICAgICAgICAgIGlkOiB0cnVlLFxuXHQgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXQpIHtcblx0ICAgICAgICAgICAgICAvLyDphY3nva7ljJbln4vngrnlhbzlrrnngrnkvY3ml6DmlYjml7bkuI3pmLvloZ7mm53lhYnop6PmnpBcblx0ICAgICAgICAgICAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkocmV0KSkge1xuXHQgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuXHQgICAgICAgICAgICAgICAgICBlbGVtZW50czogcmV0LFxuXHQgICAgICAgICAgICAgICAgICB0eXBlOiAnQ09NTU9OJ1xuXHQgICAgICAgICAgICAgICAgfSk7ICBcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pLmV4ZWMoKTsgIFxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgY29uc29sZS53YXJuKCdjdXJyZW50IHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgYXV0byBleHBvc3VyZSB0cmFja2luZyEnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIH1cblx0XG5cdCAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICBjb25zb2xlLndhcm4oJ2N1cnJlbnQgcGxhdGZvcm0gZG9lcyBub3Qgc3VwcG9ydCBhdXRvIGV4cG9zdXJlIHRyYWNraW5nISBlcnIgPSAnLCBlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBoYXNoaW5nKGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgICAgICAgLy8gdmFyIHR5cGUgPSBvcHRzLnR5cGU7XG5cdCAgICAgICAgaWYgKGR1cCA9PT0gMCB8fCBpc0ZpcnN0ID09PSAwKSB7XG5cdCAgICAgICAgICB2YXIgbmV3T2JzZXJ2ZXIgPSBpbml0T2JzZXJ2ZXIoY29udGV4dCk7XG5cdCAgICAgICAgICBuZXdPYnNlcnZlci5zdWJqZWN0ID0gc3ViamVjdDtcblx0ICAgICAgICAgIGlmKG9ic2VydmVycy5sZW5ndGg+Y29uZi5sZW5ndGgtMSl7XG5cdCAgICAgICAgICAgIHZhciByZW1vdmVkT2JzZXJ2ZXIgPSBvYnNlcnZlcnMuc2hpZnQoKTtcblx0ICAgICAgICAgICAgcmVtb3ZlZE9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIG9ic2VydmVycy5wdXNoKG5ld09ic2VydmVyKTtcblx0ICAgICAgICAgIC8vIOabtOaWsGhhc2htYXBcblx0ICAgICAgICAgIGVhY2gob3B0cy5lbGVtZW50cyxmdW5jdGlvbihpdGVtLGluZGV4KXtcblx0ICAgICAgICAgICAgaXRlbS5pbmRleCA9IChpbmRleCsxKSArICcnO1xuXHQgICAgICAgICAgICBpZiAoIWNoZWNrSXNJbkhhc2hNYXAoaXRlbSwgY29uZmlnKSkge1xuXHQgICAgICAgICAgICAgIHVwZGF0ZUhhc2hNYXAoaXRlbSwgY29uZmlnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICBhZGRPYnNlcnZlKG5ld09ic2VydmVyLCBjb25maWcsIGZ1bmN0aW9uIChlbnRyeSwgX2NvbmZpZykge1xuXHQgICAgICAgICAgICBtaW5pVXRpbC5nZXRJbmRleEJ5UmVjdChfY29uZmlnLmNzc1NlbGVjdG9yLGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCxmdW5jdGlvbihpbmRleCl7XG5cdCAgICAgICAgICAgICAgdmFyIF9pbmRleCA9IGluZGV4ICsgMTtcblx0ICAgICAgICAgICAgICBpZiAoX2luZGV4KSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgX2VudHJ5ID0gY2xvbmVEZWVwKGVudHJ5KTtcblx0ICAgICAgICAgICAgICAgIF9lbnRyeS5pbmRleCA9ICcnICsgX2luZGV4O1xuXHQgICAgICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSBjbG9uZURlZXAoX2VudHJ5LmRhdGFzZXQpO1xuXHQgICAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcCh7XG5cdCAgICAgICAgICAgICAgICAgIGlkOiBfZW50cnkuaWQsXG5cdCAgICAgICAgICAgICAgICAgIGluZGV4OiBfZW50cnkuaW5kZXgsXG5cdCAgICAgICAgICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG5cdCAgICAgICAgICAgICAgICB9LCBfY29uZmlnKTtcblx0ICAgICAgICAgICAgICAgIGV4cG9zdXJlSGFuZGxlKF9lbnRyeSwgZGF0YXNldCwgY29uZmlnKTsgIFxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgd2FpdCgrK2NvdW50KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHdhaXQoMCk7XG5cdFxuXHQgIGZ1bmN0aW9uIGNoZWNrSXNJbkhhc2hNYXAgKGVsZW1lbnQsIGNvbmZpZykge1xuXHQgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVsZW1lbnQsIGNvbmZpZyk7XG5cdCAgICB2YXIgaW5kZXggPSBlbGVtZW50LmluZGV4O1xuXHQgICAgaWYgKF9oYXNoTWFwW2NvbmZpZy5sb2drZXldKSB7XG5cdCAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgICAgIGlmIChlbGVtZW50Lmhhc2hfdmFsdWUgPT09IGhhc2ggJiYgZWxlbWVudC5pbmRleCA9PT0gaW5kZXgpIHtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIC8qKlxuXHQgICAqIEBwYXJhbXMge09iamVjdH0gZSB7XG5cdCAgICogICBpZCwgZGF0YXNldCwgcG9zaXRpb25cblx0ICAgKiB9XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gdXBkYXRlSGFzaE1hcChlLCBjb25maWcpIHtcblx0ICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleShlLCBjb25maWcpO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIGluZGV4ID0gZS5pbmRleDtcblx0ICAgICAgaWYgKF9oYXNoTWFwW2NvbmZpZy5sb2drZXldKSB7XG5cdCAgICAgICAgdmFyIGV4aXN0ID0gMDtcblx0ICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0ICAgICAgICAgIGlmIChlbGVtZW50Lmhhc2hfdmFsdWUgPT09IGhhc2gpIHtcblx0ICAgICAgICAgICAgZXhpc3QgPSAxO1xuXHQgICAgICAgICAgICBpZiAoZS5pZCkgZWxlbWVudC5pZCA9IGUuaWQ7XG5cdCAgICAgICAgICAgIGlmIChlLmRhdGFzZXQpIGVsZW1lbnQuZGF0YXNldCA9IGUuZGF0YXNldDtcblx0ICAgICAgICAgICAgaWYgKGUuc3RhdHVzKSBlbGVtZW50LnN0YXR1cyA9IGUuc3RhdHVzO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGlmICghZXhpc3QpIHtcblx0ICAgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLnB1c2goe1xuXHQgICAgICAgICAgICBpZDogZS5pZCxcblx0ICAgICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcblx0ICAgICAgICAgICAgc3RhdHVzOiAwLFxuXHQgICAgICAgICAgICBleHBDb25maWc6IGNvbmZpZyxcblx0ICAgICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuXHQgICAgICAgICAgICBpbmRleDogaW5kZXhcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XSA9IFt7XG5cdCAgICAgICAgICBpZDogZS5pZCxcblx0ICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2gsXG5cdCAgICAgICAgICBzdGF0dXM6IDAsXG5cdCAgICAgICAgICBleHBDb25maWc6IGNvbmZpZyxcblx0ICAgICAgICAgIGRhdGFzZXQ6IGUuZGF0YXNldCxcblx0ICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgIH1dO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA9PT0gJywgZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBpbml0T2JzZXJ2ZXIoY29udGV4dCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgIHRocmVzaG9sZHM6IFtfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFXSxcblx0ICAgICAgaW5pdGlhbFJhdGlvOiAwXG5cdCAgICB9O1xuXHQgICAgdmFyIGlzTVkgPSBmYWxzZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGlmIChteSkge1xuXHQgICAgICAgIGlzTVkgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgaWYgKGlzTVkpIHtcblx0ICAgICAgLy8g6JqC6JqB55qE5pud5YWJ55uR5ZCs5ZKM5b6u5L+h5LiN5LiA6Ie077yMaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS93eG1sL3d4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyLmh0bWxcblx0ICAgICAgLy8gaHR0cHM6Ly9vcGVuZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL2ludGVyc2VjdGlvbm9ic2VydmVyXG5cdCAgICAgIG9wdGlvbnMuc2VsZWN0QWxsID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihvcHRpb25zKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9wdGlvbnMub2JzZXJ2ZUFsbCA9IHRydWU7XG5cdCAgICAgIHJldHVybiBjdHguY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoY29udGV4dCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRPYnNlcnZlKG9ic2VydmVyLCBjb25maWcsIGNhbGxiYWNrKSB7XG5cdCAgICB2YXIgY3NzID0gY29uZmlnLmNzc1NlbGVjdG9yO1xuXHQgICAgaWYgKGNzcyAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoY3NzLCAnLicpKSB7XG5cdCAgICAgIGNzcyA9ICcuJyArIGNzcztcblx0ICAgIH1cblx0ICAgIGlmIChjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgICBvYnNlcnZlci5yZWxhdGl2ZVRvKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKS5vYnNlcnZlKGNzcywgZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhyZXMsIGNvbmZpZyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG9WaWV3cG9ydCgpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZXhwb3N1cmVIYW5kbGUgKGVudHJ5LCBkYXRhc2V0LCBjb25maWcpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGV4cG9zdXJlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXHQgICAgdmFyIGV4cEVsZW1lbnRzID0gY2hlY2tTdGFydChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpO1xuXHRcblx0ICAgIGlmIChleHBFbGVtZW50cyAmJiBleHBFbGVtZW50cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIHZhciBlbGVtZW50ID0gZXhwRWxlbWVudHNbMF07XG5cdFxuXHQgICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuXHQgICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zIHx8IHt9KSB8fCB7fTtcblx0ICAgICAgdmFyIF9pbmRleCA9IGVsZW1lbnQuaW5kZXg7XG5cdCAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgICAgICAgc3BtRGF0YSA9IGNsb25lRGVlcChhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fSk7XG5cdCAgICAgICAgaWYgKHJheFV0aWwuaXNSYXgoKSkge1xuXHQgICAgICAgICAgdmFyIGRvbURhdGFTZXQgPSByYXhVdGlsLmdldERhdGFTZXQoY29uZmlnLF9pbmRleC0xKTtcblx0ICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcblx0ICAgICAgICAgIHZhciBkID0gZG9tRGF0YVNldC5zcG1EIHx8IGNvbmZpZy5zcG1EIHx8ICcwJztcblx0ICAgICAgICAgIHNwbURhdGEuYyA9IGM7XG5cdCAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuXHQgICAgICAgICAgLy8g6KGl5YWFIHJheCBkYXRhLSog5bGe5oCnXG5cdCAgICAgICAgICBkYXRhc2V0ID0gT2JqZWN0LmFzc2lnbihkYXRhc2V0LCBkb21EYXRhU2V0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuXHQgICAgICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuXHQgICAgICAgICAgLy8g5pud5YWJ6Kem5Y+R55qEc3Bt5LiN5rGh5p+T5YWo5bGAYXBsdXMuXyQuc3BtLmRhdGHvvIzmlYXov5nph4zlgZrmt7Hmi7fotJ1cblx0ICAgICAgICAgIHNwbURhdGEuYyA9IHNwbUM7XG5cdCAgICAgICAgICBpZiAoc3BtRGF0YS5jICYmIHNwbURhdGEuYyAhPT0gJzAnKSB7XG5cdCAgICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgX2luZGV4O1xuXHQgICAgICAgICAgICBzcG1EYXRhLmQgPSBzcG1EO1xuXHQgICAgICAgICAgfSAgXG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpKSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBcblx0ICAgICAgICBpZiAoY29uZmlnLnNwbUMpIHtcblx0ICAgICAgICAgIHNwbURhdGEuYyA9IGNvbmZpZy5zcG1DO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzcG1EYXRhLmMgPSBfc3BtRGF0YS5zcG1DID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUMpIDogJyc7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoY29uZmlnLnNwbUQpIHtcblx0ICAgICAgICAgIHNwbURhdGEuZCA9IF9pbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgX2luZGV4IDogY29uZmlnLnNwbUQ7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHNwbURhdGEuZCA9IF9zcG1EYXRhLnNwbUQgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtRCkgOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgd2F0Y2hUcmFja2VyLnB1c2hFdmVudCgnRVhQJywgZGF0YXNldCwgY29uZmlnLCBPYmplY3QuYXNzaWduKHt9LCBlbnRyeSwge1xuXHQgICAgICAgIHg6IGVsZW1lbnQueCxcblx0ICAgICAgICB5OiBlbGVtZW50LnksXG5cdCAgICAgICAgd2lkdGg6IGVsZW1lbnQud2lkdGgsXG5cdCAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmhlaWdodCxcblx0ICAgICAgICBoYXNoX3ZhbHVlOiBlbGVtZW50Lmhhc2hfdmFsdWVcblx0ICAgICAgfSksIHNwbURhdGEpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tTdGFydCAoZXhwb3N1cmVUaW1lLCBlbnRyeSwgY29uZmlnKSB7XG5cdCAgICAvLyB2YXIgc2l6ZSA9IDA7XG5cdCAgICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTsgICAgXG5cdCAgICB2YXIgdGVtcHMgPSBbXTtcblx0ICAgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuXHQgICAgICB2YXIgZWxlX3MgPSBfaGFzaE1hcFtsb2drZXldIHx8IFtdO1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgLy8gdmFyIHN0cmluZyA9IGNvbmZpZy5sb2drZXkgKyAnXycgKyBjb25maWcuY3NzU2VsZWN0b3IgKyAnXydcblx0ICAgICAgICAvLyAgICAgICAgICAgICAgKyBjb25maWcucG9zaXRpb25TZWxlY3RvciArICdfJyArIG9wdHMuaWQgKyBKU09OLnN0cmluZ2lmeShvcHRzLmRhdGFzZXQpO1xuXHQgICAgICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleShlbnRyeSwgY29uZmlnKTtcblx0ICAgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuXHQgICAgICAgIGlmICh2LnN0YXR1cyA9PT0gMCAmJiB2LmV4cENvbmZpZyAmJiBoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcblx0ICAgICAgICAgIHZhciBfZWxlUG9zID0gZW50cnkuYm91bmRpbmdDbGllbnRSZWN0IHx8IHt9O1xuXHQgICAgICAgICAgaWYgKF9lbGVQb3Mud2lkdGggJiYgX2VsZVBvcy5oZWlnaHQpIHtcblx0ICAgICAgICAgICAgdi5kYXRhc2V0ID0gZW50cnkuZGF0YXNldDtcblx0ICAgICAgICAgICAgdi54ID0gX2VsZVBvcy5sZWZ0O1xuXHQgICAgICAgICAgICB2LnkgPSBfZWxlUG9zLnRvcDtcblx0ICAgICAgICAgICAgdi53aWR0aCA9IF9lbGVQb3Mud2lkdGg7XG5cdCAgICAgICAgICAgIHYuaGVpZ2h0ID0gX2VsZVBvcy5oZWlnaHQ7XG5cdCAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcblx0ICAgICAgICAgICAgLy8gUmF45qGG5p625YaF77yM5reY5a6d5bCP56iL5bqPIOmAmui/hyB0aHJlc2hvbGRzLCBvYnNlcnZlci5vYnNlcnZlIOayoeaciWNhbGxiYWNr6L+U5Zue77yM5Zug5q2k5pS55oiQ6buY6K6k5YC85Li6MFxuXHQgICAgICAgICAgICB2YXIgZGVmYXVsdFJhdGlvID0gX2NvbmZpZy5BVVRPX0FUX1ZJRVdfUkFURTtcblx0ICAgICAgICAgICAgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID49IGRlZmF1bHRSYXRpbykge1xuXHQgICAgICAgICAgICAgIHYuZXhwb3N1cmVUaW1lID0gZXhwb3N1cmVUaW1lO1xuXHQgICAgICAgICAgICAgIHYuc3RhdHVzID0gMTsgLy8g5pud5YWJ54q25oCBXG5cdCAgICAgICAgICAgICAgdGVtcHMucHVzaCh2KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRlbXBzO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMucmVzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblx0XG5cdGV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgd2F0Y2hUcmFja2VyLmNsZWFyUmVjb3JkKCk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgIG9ic2VydmVyc1tpXS5kaXNjb25uZWN0KCk7XG5cdCAgfVxuXHQgIG9ic2VydmVycyA9IFtdO1xuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcblx0ICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcblx0ICAgIGRlbGV0ZSBfaGFzaE1hcFtsb2drZXldO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDgzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIHV0aWxNZXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX0FFX0tFWSA9ICdkYXRhLWFwbHVzLWFlJztcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX0FDX0tFWSA9ICdkYXRhLWFwbHVzLWNsayc7XG5cdGV4cG9ydHMuREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSA9ICdkYXRhLXNwbS1hbmNob3ItaWQnO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfVlRfSVRFTV9JTkRFWF9LRVkgPSAnZGF0YS1hcGx1cy12dC1wb3MnO1xuXHRcblx0Ly8g5LiN5pSv5oyBb2JzZXJ2ZXLnmoTmg4XlhrXkuIvvvIzova7or6Lpl7TpmpTvvIhtcylcblx0ZXhwb3J0cy5MT09QX1RJTUUgPSAxMDAwO1xuXHRcblx0ZXhwb3J0cy5nZXREZWZhdWx0UmVxdWVzdENmZyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgbWV0aG9kOiAnUE9TVCcsXG5cdCAgICBwa2dTaXplOiAxMFxuXHQgIH07XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRhVmFsdWUgKGtleSkge1xuXHQgIGlmIChhcGx1cyAmJiBhcGx1cy5nZXRNZXRhSW5mbykge1xuXHQgICAgcmV0dXJuIGFwbHVzLmdldE1ldGFJbmZvKGtleSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB1dGlsTWV0YS5nZXRNZXRhQ250KGtleSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyDoh6rliqjmm53lhYnmiZPngrkgLSDliKTlrprlj6/op4bnmoTmr5Tkvovnjodcblx0dmFyIGdldEF1dG9FeHBWaWV3UmF0ZSA9IGZ1bmN0aW9uKGRlZmF1bHRfdmFsdWUpIHtcblx0ICB2YXIgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB2aXNpYmxlX3JhdGUgPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXZpc2libGUnKTtcblx0ICAgIGlmICh2aXNpYmxlX3JhdGUpIHtcblx0ICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQodmlzaWJsZV9yYXRlKTtcblx0ICAgIH1cblx0ICAgIGlmIChyYXRlIDw9IDApIHtcblx0ICAgICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIHJhdGU7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLkFVVE9fQVRfVklFV19SQVRFID0gZ2V0QXV0b0V4cFZpZXdSYXRlKDAuMyk7XG5cdFxuXHQvLyB2YXIgRVhQX0RFQk9VTkNFX0RVUkFUSU9OID0gMTAwOyAvLyBkZWJvdWNlIGR1cmF0aW9uIDEwMG1zXG5cdFxuXHQvKipcblx0ICog5pyJ5pWI5pud5YWJ5pe26ZW/5bqV57q/IC0g5q+r56eS5pWwKG1zKVxuXHQgKiBAcGFyYW1zIHtOdW1iZXJ9IGRlZmF1bHRfdmFsdWUgaXMgMzAwbXNcblx0ICogQHJldHVybiB7TnVtYmVyfSBkdXJhdGlvblxuXHQgKi9cblx0dmFyIGdldEF1dG9FeHBEdXJhdGlvbiA9IGZ1bmN0aW9uKGRlZmF1bHRfdmFsdWUpIHtcblx0ICB2YXIgZHVyYXRpb24gPSBkZWZhdWx0X3ZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdG1wX2R1cmF0aW9uID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC1kdXJhdGlvbicpO1xuXHQgICAgdmFyIGR1cmF0aW9uX24gPSBwYXJzZUludCh0bXBfZHVyYXRpb24pO1xuXHQgICAgaWYgKChkdXJhdGlvbl9uICsgJycpICE9PSAnTmFOJykge1xuXHQgICAgICBkdXJhdGlvbiA9IGR1cmF0aW9uX247XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBkdXJhdGlvbjtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuRVhQX0RVUkFUSU9OID0gZ2V0QXV0b0V4cER1cmF0aW9uKDMwMCk7IC8v6buY6K6kMzAwbXNcblx0XG5cdC8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcblx0Ly8gZXhwb3J0cy5nZXREZWJvdW5jZUR1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xuXHQvLyAgIHJldHVybiBFWFBfREVCT1VOQ0VfRFVSQVRJT047XG5cdC8vIH07XG5cdFxuXHQvKipcblx0ICog6I635Y+W6Ieq5Yqo5pud5YWJ6YWN572u6aG577yM5bm25bCGZmlsdGVy44CBdGFn5ZKMY3NzU2VsZWN0b3LlkIjlubbkuLplbGVtZW50U2VsZWN0b3Jcblx0ICogVE9ETyBKU09OLnBhcnNlIOS7heaUr+aMgUlFOOWPiuS7peS4iua1j+iniOWZqCA9PiBqcyBhcGlcblx0ICogQHBhcmFtcyBrZXkge1N0cmluZ30gJ2FwbHVzLWF1dG8tZXhwJy8nYXBsdXMtYXV0by1jbGsnXG5cdCAqIEByZXR1cm4ge0FycmF5fSBbe1xuXHQgKiAgICBsb2drZXk6IC9hLmIuYzEsXG5cdCAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ2RpdltzY209MTIzNF0nLFxuXHQgKiAgICB0YWc6IGRpdixcblx0ICogICAgZmlsdGVyOiBzY209MTIzNFxuXHQgKiAgICBwb3NpdGlvblNlbGVjdG9yOiB0cnVlLy5wYXJlbnRDbGFzc25hbWUgLy8g55u45a+55a6a5L2N5Lia5Yqh5Z+L54K5XG5cdCAqIH0sIHtcblx0ICogICAgbG9na2V5OiAvYS5iLmMyLFxuXHQgKiAgICBlbGVtZW50U2VsZWN0b3I6ICdwW3NjbT0yMzQ1XS5vbmUnLFxuXHQgKiAgICB0YWc6IHAsXG5cdCAqICAgIGZpbHRlcjogc2NtPTIzNDUsXG5cdCAqICAgIGNzc1NlbGVjdG9yOiAub25lXG5cdCAqIH0sIHtcblx0ICogICAgbG9na2V5OiAvYS5iLmMzLFxuXHQgKiAgICBlbGVtZW50U2VsZWN0b3I6ICdwW2RhdGEtc3BtLWNsaWNrXScsXG5cdCAqICAgIHRhZzogcCxcblx0ICogICAgZmlsdGVyOiBkYXRhLXNwbS1jbGlja1xuXHQgKiB9XVxuXHQgKi9cblx0dmFyIGdldEF1dG9Db25maWcgPSBmdW5jdGlvbihjb25maWdLZXksIG1ldGFPYmopIHtcblx0ICB2YXIgY29uZmlncyA9IFtdO1xuXHQgIC8vIHZhciB0bXBfbG9na2V5cyA9IFtdO1xuXHQgIHZhciB0bXBfdGFnX2ZpbHRlciA9IFtdO1xuXHQgIHZhciBhcGx1c0F1dG9FeHA7XG5cdCAgdHJ5IHtcblx0ICAgIGFwbHVzQXV0b0V4cCA9IG1ldGFPYmogfHwgZ2V0TWV0YVZhbHVlKGNvbmZpZ0tleSk7XG5cdCAgICB2YXIgdGVtcHMgPSBbXTtcblx0ICAgIGlmIChhcGx1c0F1dG9FeHAgJiYgdHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHAucmVwbGFjZSgvJy9nLCAnXCInKSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGFwbHVzQXV0b0V4cCA9PT0gJ29iamVjdCcgJiYgYXBsdXNBdXRvRXhwLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICB0ZW1wcyA9IGFwbHVzQXV0b0V4cDtcblx0ICAgIH1cblx0ICAgIGlmICh0ZW1wcyAmJiB0ZW1wcy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciB0bXAgPSB0ZW1wc1tpXSB8fCB7fTtcblx0ICAgICAgICB2YXIgbG9na2V5ID0gdG1wLmxvZ2tleSB8fCAnJztcblx0ICAgICAgICB2YXIgdGFnID0gdG1wLnRhZyA/IHRtcC50YWcgOiAnJztcblx0ICAgICAgICB2YXIgZmlsdGVyID0gdG1wLmZpbHRlcjtcblx0ICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSB0bXAuY3NzU2VsZWN0b3I7XG5cdCAgICAgICAgdmFyIHdob2xlU2VsZWN0b3IgPSBjc3NTZWxlY3RvciB8fCAodGFnICYmIGZpbHRlcik7XG5cdCAgICAgICAgaWYgKCFsb2drZXkgfHwgIXdob2xlU2VsZWN0b3IpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsICcgKyBKU09OLnN0cmluZ2lmeSh0bXApKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gMjAxNy0xMS0yMyDmiYvmt5jmjqXlhaXlkoxsYXphZGHkuJrliqHpnIDmsYLvvIzlhYHorrhsb2drZXnph43lpI1cblx0ICAgICAgICAvLyBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX2xvZ2tleXMsIGxvZ2tleSkgPiAtMSkge1xuXHQgICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgbG9na2V5ICcgKyBsb2drZXkgKyAnIHJlcGVhdGVkJyk7XG5cdCAgICAgICAgLy8gfVxuXHQgICAgICAgIGZpbHRlciA9IHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnID8gZmlsdGVyLnNwbGl0KFwiPVwiKSA6IFtdO1xuXHQgICAgICAgIHZhciB0YWdfZmlsdGVyID0gdGFnO1xuXHQgICAgICAgIGlmIChmaWx0ZXIubGVuZ3RoID49IDIpIHtcblx0ICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZmlsdGVyLnNoaWZ0KCkgKyAnPVwiJyArIGRlY29kZVVSSUNvbXBvbmVudChmaWx0ZXIuam9pbignJykpICsgJ1wiXSc7XG5cdCAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIubGVuZ3RoID09IDEgJiYgZmlsdGVyWzBdKSB7XG5cdCAgICAgICAgICB0YWdfZmlsdGVyICs9ICdbJyArIGRlY29kZVVSSUNvbXBvbmVudChmaWx0ZXJbMF0pICsgJ10nO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoY3NzU2VsZWN0b3IpIHtcblx0ICAgICAgICAgIHRhZ19maWx0ZXIgKz0gY3NzU2VsZWN0b3I7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0bXAuZWxlbWVudFNlbGVjdG9yID0gdGFnX2ZpbHRlcjtcblx0ICAgICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YodG1wX3RhZ19maWx0ZXIsIHRhZ19maWx0ZXIpID4gLTEpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIHRhZ19maWx0ZXJfY3NzU2VsZWN0b3IgJyArIHRhZ19maWx0ZXIgKyAnIHJlcGVhdGVkJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHRtcF9sb2drZXlzLnB1c2gobG9na2V5KTtcblx0ICAgICAgICB0bXBfdGFnX2ZpbHRlci5wdXNoKHRhZ19maWx0ZXIpO1xuXHQgICAgICAgIGNvbmZpZ3MucHVzaCh0bXApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAvLyBUT0RPIOebkeaOp+i/meWdl+WGheWuuVxuXHQgICAgdWxvZygpLncoZXJyKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlcnJcblx0ICAgIC8vIH0pO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gY29uZmlncztcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9FeHBDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG5cdCAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tZXhwJywgbWV0YU9iaikgfHwgW107XG5cdH07XG5cdC8qKlxuXHQgKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0V4cFVzZXJGbiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhZUF1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicpO1xuXHQgIGlmIChhZUF1dG9Vc2VyRm4pIHtcblx0ICAgIHZhciBmbiA9IHdpbmRvd1thZUF1dG9Vc2VyRm5dIHx8IGFlQXV0b1VzZXJGbjtcblx0ICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdC8vIDxtZXRhIG5hbWU9XCJhcGx1cy1hdXRvLWV4cC13YXRjaGRvbVwiIGNvbnRlbnQ9XCJ0aHJvdHRsZVwiIC8+XG5cdGV4cG9ydHMuaXNUaHJvdHRsZVdhdGNoRG9tID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBycyA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBycyA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtd2F0Y2hkb20nKSA9PT0gJ3Rocm90dGxlJztcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgfVxuXHQgIHJldHVybiBycztcblx0fTtcblx0LyoqXG5cdCAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvQ2xrQ29uZmlnID0gZnVuY3Rpb24obWV0YU9iaikge1xuXHQgIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWNsaycsIG1ldGFPYmopIHx8IFtdO1xuXHR9O1xuXHQvKipcblx0ICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9DbGtVc2VyRm4gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYWNBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWNsay11c2VyZm4nKTtcblx0ICBpZiggYWNBdXRvVXNlckZuICl7XG5cdCAgICB2YXIgZm4gPSB3aW5kb3dbYWNBdXRvVXNlckZuXSB8fCBhY0F1dG9Vc2VyRm47XG5cdCAgICBpZiggdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICl7XG5cdCAgICAgIHJldHVybiBmbjtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfaGVhZF9ub2RlO1xuXHR2YXIgX21ldGFfbm9kZXM7XG5cdFxuXHR2YXIgdXRpbEF0dHJpYnV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oODUpO1xuXHQvKipcblx0ICog5Y+W5b6X6aG16Z2i5LiKIGhlYWQg5Lit55qE5omA5pyJIG1ldGEg5YWD57SgXG5cdCAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcblx0ICovXG5cdGZ1bmN0aW9uIGdldE1ldGFUYWdzKGZvcmNlKSB7XG5cdCAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblx0XG5cdCAgaWYgKF9tZXRhX25vZGVzICYmICFmb3JjZSkge1xuXHQgICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG5cdH07XG5cdGV4cG9ydHMuZ2V0TWV0YVRhZ3MgPSBnZXRNZXRhVGFncztcblx0XG5cdC8qKlxuXHQgKiDlj5blvpcgaGVhZCAvIG1ldGEg5Lit5oyH5a6aIG1ldGEg55qEIChhdHRyIHx8IGNvbnRlbnQpIOWAvFxuXHQgKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YUNudChuYW1lLCBhdHRyKSB7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIG1ldGE7XG5cdCAgdmFyIG1ldGFfbm9kZXMgPSBnZXRNZXRhVGFncygpO1xuXHQgIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG5cdCAgdmFyIGNvbnRlbnQ7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuXHQgICAgaWYgKHV0aWxBdHRyaWJ1dGUudHJ5VG9HZXRBdHRyaWJ1dGUobWV0YSwgJ25hbWUnKSA9PT0gbmFtZSkge1xuXHQgICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gY29udGVudCB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblx0XG5cdFxuXHQvKipcblx0ICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG5cdCAqIOW9ouWmgu+8mlxuXHQgKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG5cdCAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG5cdCAqL1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRmdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuXHQgIHZhciBvYmogPSB7XG5cdCAgICBpc29uZXBhZ2U6ICctMScsXG5cdCAgICB1cmxwYWdlbmFtZTogJydcblx0ICB9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG5cdCAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEuaXNvbmVwYWdlO1xuXHQgICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGVudCA9IGdldE1ldGFDbnQoJ2lzb25lcGFnZScpIHx8ICctMSc7XG5cdCAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcblx0ICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcblx0ICAgIG9iai51cmxwYWdlbmFtZSA9IGFycl9jb250ZW50WzFdID8gYXJyX2NvbnRlbnRbMV0gOiBcIlwiO1xuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRleHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuLyoqKi8gfSksXG4vKiA4NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcblx0ICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSA/IChlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyX25hbWUpIHx8ICcnKSA6ICcnO1xuXHR9O1xuXHRcblx0dmFyIHRyeVRvU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSwgYXR0cl92YWx1ZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuc2V0QXR0cmlidXRlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyX25hbWUsIGF0dHJfdmFsdWUpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXHRcblx0ZXhwb3J0cy50cnlUb1JlbW92ZUF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUpIHtcblx0ICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cl9uYW1lKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdHJ5VG9TZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cl9uYW1lLCAnJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHQvLyB2YXIgVVBEQVRFID0gJ3VwZGF0ZSc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcHVzaFF1ZXVlOmZ1bmN0aW9uKG1ldGhvZE5hbWUsIGFyZ3Mpe1xuXHQgICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXNfcXVldWUnKTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMuJyArIG1ldGhvZE5hbWUsXG5cdCAgICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIGVhY2goYXBsdXNTdGF0aWMub3BlbkFQSXMsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgYXBsdXNbdl0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcblx0ICAgICAgICAgIGVhY2goYXJndW1lbnRzLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB2YXIgbWV0aG9kTmFtZSA9IHYgPT09ICdlbnRlcicgPyAnX3NlbmRQVicgOiAnXycgKyB2O1xuXHRcblx0ICAgICAgICAgIF9zZWxmLnB1c2hRdWV1ZShtZXRob2ROYW1lLCBpdGVtcyk7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcblx0ICpcblx0ICogY2xpZW50SW5mbyBmb3IgbWluaWFwcFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOWIneWni+WMluaooeWdlywg5Liq5oCn5YyW6YOo5YiG5a2Q57G75Lit5a6e546wXG5cdCAgICAgKi9cblx0ICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgIC8vICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgIC8vIH0sXG5cdFxuXHQgICAgX2dldE5ldHdvcmtUeXBlOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBpZiAoY3R4LmdldE5ldHdvcmtUeXBlKSB7XG5cdCAgICAgICAgY3R4LmdldE5ldHdvcmtUeXBlKHtcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY2FsbGJhY2socmVzID8gcmVzLm5ldHdvcmtUeXBlIDogJycpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGNhbGxiYWNrKCcnKTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPluezu+e7n+S/oeaBryBodHRwczovL2RvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9zeXN0ZW0taW5mb1xuXHQgICAgICog5omL5py65Z6L5Y+344CB5bGP5bmV5YiG6L6o546H44CB57O757uf54mI5pys562J5L+h5oGvXG5cdCAgICAgKi9cblx0ICAgIF9nZXRTeXN0ZW1JbmZvOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGVtcHR5T2JqID0ge307XG5cdCAgICAgIHZhciBzeXNJbmZvID0gX3NlbGYuU1lTVEVNX0lORk8gfHwge307XG5cdCAgICAgIGlmIChzeXNJbmZvICYmIHN5c0luZm8udmVyc2lvbikge1xuXHQgICAgICAgIGNhbGxiYWNrKF9zZWxmLlNZU1RFTV9JTkZPKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgbWluaS5nZXRDb250ZXh0KCkuZ2V0U3lzdGVtSW5mbyh7XG5cdCAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMudmVyc2lvbikge1xuXHQgICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG5cdCAgICAgICAgICAgICAgICAgIHJlcy5uZXR3b3JrVHlwZSA9IG47XG5cdCAgICAgICAgICAgICAgICAgIF9zZWxmLlNZU1RFTV9JTkZPID0gcmVzO1xuXHQgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIF9zZWxmLl9nZXROZXR3b3JrVHlwZShmdW5jdGlvbiAobikge1xuXHQgICAgICAgICAgICAgICAgICBlbXB0eU9iai5uZXR3b3JrVHlwZSA9IG47XG5cdCAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVtcHR5T2JqKTtcblx0ICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBfZ2V0QWNjb3VudEluZm9TeW5jOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpbmZvID0ge307XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICAgIGlmIChjdHguZ2V0QWNjb3VudEluZm9TeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBY2NvdW50SW5mb1N5bmMnKSkge1xuXHQgICAgICAgICAgLy8g5b6u5L+hXG5cdCAgICAgICAgICB2YXIgYWNjb3VudEluZm8gPSBjdHguZ2V0QWNjb3VudEluZm9TeW5jKCk7XG5cdCAgICAgICAgICB2YXIgbWluaVByb2dyYW0gPSBhY2NvdW50SW5mby5taW5pUHJvZ3JhbSB8fCB7fTtcblx0ICAgICAgICAgIHZhciBwbHVnaW4gPSBhY2NvdW50SW5mby5wbHVnaW4gfHwge307XG5cdCAgICAgICAgICBpbmZvLmFwcElkID0gbWluaVByb2dyYW0uYXBwSWQ7ICAvLyDlsI/nqIvluo8gYXBwSWRcblx0ICAgICAgICAgIGluZm8uYXBwVmVyc2lvbiA9IG1pbmlQcm9ncmFtLnZlcnNpb24gfHwgbWluaVByb2dyYW0uZW52VmVyc2lvbjsgIC8vIOWwj+eoi+W6jyBhcHBWZXJzaW9uXG5cdCAgICAgICAgICBpbmZvLnBsdWdpbkFwcElkID0gcGx1Z2luLmFwcElkOyAvLyDmj5Lku7YgYXBwSWRcblx0ICAgICAgICAgIGluZm8ucGx1Z2luQXBwVmVyc2lvbiA9IHBsdWdpbi52ZXJzaW9uOyAvLyDmj5Lku7YgYXBwVmVyc2lvbiAgXG5cdCAgICAgICAgfSBlbHNlIGlmIChjdHguZ2V0QXBwSWRTeW5jICYmIGN0eC5jYW5JVXNlKCdnZXRBcHBJZFN5bmMnKSkge1xuXHQgICAgICAgICAgdmFyIGFwcEluZm8gPSBjdHguZ2V0QXBwSWRTeW5jKCkgfHwge307XG5cdCAgICAgICAgICBpbmZvLmFwcElkID0gYXBwSW5mby5hcHBJZCB8fCAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIHJldHVybiBpbmZvO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIHdvcmtub1xuXHQgICAgICogICAxLiBjb29raWUuZ2V0Q29va2llKCd3b3Jrbm8nKVxuXHQgICAgICogICAyLiBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKVxuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIC8vIGNvbnNvbGUubG9nKCdUT0RPIGdldFN5c3RlbUluZm8nKTtcblx0ICAgICAgdGhpcy5fZ2V0U3lzdGVtSW5mbyhmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgLy8g5pSv5LuY5a6d5bCP56iL5bqP5paH5qGjICBzeXN0ZW0t57O757uf54mI5pysIHBsYXRmb3JtLeezu+e7n+WQjVxuXHQgICAgICAgIHJlcy51c2VyQWdlbnQgPSAnLSc7XG5cdCAgICAgICAgcmVzLm9zID0gcmVzLnBsYXRmb3JtID8gcmVzLnBsYXRmb3JtLnRvTG9jYWxlVXBwZXJDYXNlKCkgOiAnJztcblx0ICAgICAgICByZXMub3NfdmVyc2lvbiA9IHJlcy5zeXN0ZW0gPyByZXMuc3lzdGVtIDogJyc7XG5cdCAgICAgICAgcmVzLmFjY2VzcyA9IHJlcy5icmFuZCA/IHJlcy5icmFuZCA6ICcnO1xuXHQgICAgICAgIHZhciBob3N0ID0gJyc7XG5cdCAgICAgICAgaWYocmVzLmhvc3QgJiYgKHR5cGVvZiByZXMuaG9zdC5lbnYgPT09ICdzdHJpbmcnKSl7XG5cdCAgICAgICAgICBob3N0ID0gcmVzLmhvc3QuZW52O1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXMuaG9zdCA9IGhvc3Q7XG5cdFxuXHQgICAgICAgIHZhciBhY2NvdW50SW5mbyA9IF9zZWxmLl9nZXRBY2NvdW50SW5mb1N5bmMoKTtcblx0ICAgICAgICB2YXIgcnMgPSBPYmplY3QuYXNzaWduKHt9LCByZXMsIGFjY291bnRJbmZvKTtcblx0XG5cdCAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX2NsaWVudCA9IHJzO1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gMjAwMDtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICog5bCP56iL5bqP5LiL6Z2i55qEc3Bt5L2T57O7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDpvpnpqbkgPGNoZW5ncGluZy5yY3BAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGlzQXJyYXkgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciBhcGx1c1N0YXRpYyAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcmVzZXRMYXN0UGFnZVNwbTogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywge30pOyBcblx0ICAgICAgdmFyIHNwbSA9IGFwbHVzLl8kLnNwbSB8fCB7fTtcblx0ICAgICAgc3BtLnNwbV9jbnQgPSAnJztcblx0ICAgIH0sXG5cdCAgICBsaXN0ZW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUsW10pOyAgXG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgYXJndW1lbnRzOlsnb25TaG93JyxmdW5jdGlvbihvcHQpe1xuXHQgICAgICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMse30pOyBcblx0ICAgICAgICAgICAgdmFyIHBhZ2VzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VzJyk7XG5cdCAgICAgICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVBhdGggPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgICAgICAgICBpZiAoaXNBcnJheShwYWdlcykpIHtcblx0ICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHBhZ2VzW2ldO1xuXHQgICAgICAgICAgICAgICAgaWYoY3VycmVudC5tYXRjaFVybCA9PT0gY3VycmVudFBhZ2VQYXRoKXtcblx0ICAgICAgICAgICAgICAgICAgYXBsdXMuc2V0UGFnZVNQTShjdXJyZW50LnNwbUEsIGN1cnJlbnQuc3BtQik7XG5cdCAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgICAgIGFyZ3VtZW50czpbJ2NsZWFyUGFnZVNQTScsZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgX3NlbGYucmVzZXRMYXN0UGFnZVNwbSgpO1xuXHQgICAgICAgIH1dLFxuXHQgICAgICB9KTtcblx0ICAgICAgXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcGFyYW1zIGRhdGEge09iamVjdH0ge1xuXHQgICAgICAgKiAgIHNwbUNudDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiB9XG5cdCAgICAgICAqL1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgICAgIGFyZ3VtZW50czpbJ3NldFBhZ2VTUE0nLGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywge30pOyBcblx0ICAgICAgICAgICAgdmFyIHNwbSA9IGFwbHVzLl8kLnNwbSB8fCB7fTtcblx0ICAgICAgICAgICAgXG5cdCAgICAgICAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpIHx8IFtdO1xuXHQgICAgICAgICAgICB2YXIgc3BtYWIgPSBkYXRhLnNwbUNudCA/IGRhdGEuc3BtQ250LnNwbGl0KCcuJykgOiBbc3BtLmRhdGEuYSB8fCAnMCcsIHNwbS5kYXRhLmIgfHwgJzAnXTtcblx0ICAgICAgICAgICAgaWYgKHNwbWFiLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICAgICAgICAgIHNwbWFiID0gc3BtYWIuY29uY2F0KFsnMCcsICcwJ10pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBzcG1hYnN0ciA9IHNwbWFiLmpvaW4oJy4nKTtcblx0XG5cdCAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdO1xuXHQgICAgICAgICAgICB2YXIgcHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuXHQgICAgICAgICAgICB2YXIgcHJlUHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDNdIHx8IHt9O1xuXHRcblx0ICAgICAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDAgJiYgY3VycmVudFBhZ2UpIHtcblx0ICAgICAgICAgICAgICBwYWdlc1twYWdlcy5sZW5ndGggLSAxXS5zcG0gPSBzcG1hYnN0cjtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlU3BtID0gc3BtLmRhdGEgJiYgc3BtLmRhdGEuYSA/IFtzcG0uZGF0YS5hLCBzcG0uZGF0YS5iLCBzcG0uZGF0YS5jIHx8ICcwJywgc3BtLmRhdGEuZCB8fCAnMCddLmpvaW4oJy4nKSA6ICcnO1xuXHQgICAgICAgICAgICBzcG0uZGF0YS5hID0gc3BtYWJbMF0gPyAnJyArIHNwbWFiWzBdIDogJzAnO1xuXHQgICAgICAgICAgICBzcG0uZGF0YS5iID0gc3BtYWJbMV0gPyAnJyArIHNwbWFiWzFdIDogJzAnO1xuXHQgICAgICAgICAgICBzcG0uZGF0YS5jID0gJzAnO1xuXHQgICAgICAgICAgICBzcG0uZGF0YS5kID0gJzAnO1xuXHQgICAgICAgICAgICBzcG0ucGFnZV9yZWZlcnJlciA9IHBhZ2VzLmxlbmd0aCA+IDEgJiYgY3VycmVudFBhZ2UgPyAoY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMpIDogJyc7XG5cdCAgICAgICAgICAgIHNwbS5zcG1fY250ID0gc3BtYWJzdHI7XG5cdFxuXHQgICAgICAgICAgICAvLyDku6XnlKjmiLflnKhVUkzkuIrmi7zmjqXnmoRzcG3kuLrlh4bvvIxhcGx1cy5zcG1fb3JpZ27mnaXmupDkuo5hdXRvX2luaXQvaW5qZWN0X2FwcC5qc1xuXHQgICAgICAgICAgICB2YXIgc3BtX29yaWduID0gYXBsdXMuc3BtX29yaWduIHx8IHNwbS5zcG1fb3JpZ247XG5cdCAgICAgICAgICAgIHNwbS5zcG1fcHJlID0gZGF0YS5zcG1QcmUgfHwgc3BtLnNwbV91cmwgfHwgcHJlUHJlUGFnZS5zcG0gfHwgJyc7XG5cdCAgICAgICAgICAgIHNwbS5zcG1fdXJsID0gZGF0YS5zcG1VcmwgfHwgY3VycmVudFBhZ2VTcG0gfHwgcHJlUGFnZS5zcG0gfHwgc3BtX29yaWduIHx8ICAnJztcblx0ICAgICAgICAgICAgYXBsdXMuXyQuc3BtID0gc3BtO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2V0UGFnZVNQTSBlcnJvciwgdGhlIGVycm9ySW5mbyBpcyAnLCBlKTtcblx0ICAgICAgICAgICAgdWxvZygpLncoJ3NldFBhZ2VTUE0gZXJyb3IsIHRoZSBlcnJvckluZm8gaXMgJywgZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBcblx0ICAgICAgICB9XSxcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLmxpc3RlbigpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGFwbHVzX21pbmlfcmVwb3J0X3VtLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgTWFpbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTApO1xuXHQgICAgICB2YXIgbWV0YUluZm8gPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcubWV0YUluZm87XG5cdCAgICAgIC8vIOeUqOS6juiHquWKqOiOt+WPlm9wZW5pZOaXtuS8oOi+k29wZW5pZFxuXHQgICAgICB2YXIgbWFpbiA9IE1haW4uY3JlYXRlKHttZXRhSW5mbzogbWV0YUluZm99KTtcblx0ICAgICAgbWFpbi5ydW4odGhpcy5vcHRpb25zKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDkwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogbWFpbl9taW5pX3VtX2h0dHAuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG5cdHZhciBtYWluX2Jhc2VfaHR0cCA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpO1xuXHR2YXIgZXZlbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciByZXF1ZXN0UXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgdXRpbE1vbml0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0dmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUpO1xuXHRcblx0ZnVuY3Rpb24gaGFuZGxlRXZlbnQoaWQsIG9wdGlvbnMsIGF1dG9HZXRPcGVuaWQpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgaWYgKHV0aWxzLmNoZWNrRXZlbnQoaWQsIG9wdGlvbnMpKSB7XG5cdCAgICB2YXIgZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKShpZCwgb3B0aW9ucyk7XG5cdCAgICBldmVudC5yYW5rID0gdXRpbE1vbml0b3IucmFuaygpO1xuXHQgICAgaWYgKGV2ZW50ICYmIGV2ZW50LmlkID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG5cdCAgICAgIGV2ZW50LmFtb3VudCA9IGV2ZW50LnJhbms7XG5cdCAgICB9XG5cdFxuXHQgICAgdWxvZygpLmkoJ2V2ZW50OiAnLCBpZCwgb3B0aW9ucyk7XG5cdCAgICBldmVudE1hbmFnZXIoKS5hZGRFdmVudChldmVudCk7XG5cdCAgICAvLyDmr4/mrKFhZGRFdmVudOWQju+8jOWIpOaWreaYr+WQpmVrdnPlhoXnmoTml6Xlv5fmnaHmlbDmmK/lkKbotoXlh7ptYXhMaW1pdFxuXHQgICAgLy8gbWF4LXF1ZXVlLWNvdW5055So5LqO6Ieq5a6a5LmJ6IGa5ZCI6Zif5YiX6ZW/5bqmXG5cdCAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBtYXhRdWV1ZUNvdW50ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ21heC1xdWV1ZS1jb3VudCcpIHx8IGFwbHVzU3RhdGljLk1BWF9RVUVVRV9DT1VOVDtcblx0ICAgIGlmKGlkID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EIHx8IGV2ZW50TWFuYWdlcigpLmdldEVrdnNMZW4oKSA+PSBtYXhRdWV1ZUNvdW50KSB7XG5cdCAgICAgIGlmICghYXV0b0dldE9wZW5pZCkge1xuXHQgICAgICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5SRVFVRVNUUykuc2VuZCh1dGlscy5EYXRhVHlwZS5FS1YsIHsgbm9DYWNoZTogZmFsc2UgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkpIHtcblx0ICAgICAgICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5SRVFVRVNUUykuc2VuZCh1dGlscy5EYXRhVHlwZS5FS1YsIHsgbm9DYWNoZTogZmFsc2UgfSwgZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgdWxvZygpLmkoJ2V2ZW50IHNlbmQgc3VjY2VzczogJywgaWQsIGV2ZW50KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLlNFVF9NRVRBX0lORk8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuX0FOT05ZX0lEICYmIHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQodXRpbHMuRGF0YVR5cGUuRUtWLCB7IG5vQ2FjaGU6IGZhbHNlIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYWluX2Jhc2VfaHR0cC5leHRlbmQoe1xuXHRcblx0ICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgIHZhciBhdXRvR2V0T3BlbmlkID0gdGhpcy5tZXRhSW5mbyAmJiB0aGlzLm1ldGFJbmZvLmF1dG9HZXRPcGVuaWQ7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAvLyBA5paH5b+DIOWFqOWfi+eCuSB0cmFja190eXBlXG5cdCAgICB2YXIgdXNlckV2ZW50QXJncywgZ29rZXk7XG5cdCAgICB2YXIgbG9na2V5ID0gZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEubG9na2V5O1xuXHQgICAgdmFyIGdta2V5ID0gZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEuZ21rZXk7XG5cdCAgICB2YXIgbG9nZGF0YSA9IGRhdGEgJiYgZGF0YS53aGF0X3RvX3NlbmQgJiYgZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuXHQgICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgICB2YXIgcGFnZV9uYW1lO1xuXHQgICAgaWYgKGdta2V5ID09PSAnQ0xLJyB8fCBnbWtleSA9PT0gJ0VYUCcgfHwgZ21rZXkgPT09ICdPVEhFUicgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG5cdCAgICAgIHVzZXJFdmVudEFyZ3MgPSBjbG9uZURlZXAoZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEuZ29rZXkpIHx8IHt9O1xuXHQgICAgICBnb2tleSA9IGxvZ2RhdGEuZ29rZXkgfHwge307XG5cdCAgICAgIHZhciBldmVudF9hcmdzO1xuXHQgICAgICB2YXIgc2RrQXJncyA9IHt9O1xuXHQgICAgICBpZiAobG9na2V5ID09PSAnJCRfc2hhcmUnKSB7XG5cdCAgICAgICAgc2RrQXJncy5yZWZlcl9wYWdlID0gbG9nZGF0YS51cmw7XG5cdCAgICAgICAgc2RrQXJncy5zaGFyZV90eXBlID0gdXNlckV2ZW50QXJncy5zaGFyZV90eXBlO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcblx0ICAgICAgICBzZGtBcmdzLnNjZW5lID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIGdva2V5LnNjZW5lO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICAvLyAkJF9hcHBfbGlua+S6i+S7tueahHRhcmdldEFwcEtleVxuXHQgICAgICBpZihnb2tleS50YXJnZXRBcHBLZXkpIHtcblx0ICAgICAgICBzZGtBcmdzLnRhcmdldEFwcEtleSA9IHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnRhcmdldEFwcEtleTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgcGFnZV9uYW1lID0gdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddIHx8IHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lIHx8ICh1c2VyRXZlbnRBcmdzLnNwbSAmJiB1c2VyRXZlbnRBcmdzLnNwbS5iKSB8fCBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuXHQgICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcblx0ICAgICAgXG5cdCAgICAgIHNka0FyZ3MudXJsID0gbG9nZGF0YS51cmwgfHwgJy0nO1xuXHQgICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lO1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ107XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcblx0ICAgICAgICBzZGtBcmdzLmdwID0gZ3A7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnNwbSkge1xuXHQgICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKSwgdXNlckV2ZW50QXJncy5zcG0uYywgdXNlckV2ZW50QXJncy5zcG0uZF0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuXHQgICAgICAgICAgcmV0dXJuICEhdjtcblx0ICAgICAgICB9KS5qb2luKCcuJyk7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3Muc3BtO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX3RpdGxlKSB7XG5cdCAgICAgICAgc2RrQXJncy5wYWdlX3RpdGxlID0gdXNlckV2ZW50QXJncy5wYWdlX3RpdGxlIHx8IFBhZ2VNYW5hZ2VyLmdldFBhZ2VUaXRsZShsb2dkYXRhLnVybCkgfHwgJyc7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV90aXRsZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZGtBcmdzLnBhZ2VfdGl0bGUgPSBnb2tleS5fcGFnZV90aXRsZSB8fCAnJztcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKHVzZXJFdmVudEFyZ3MuaXNfYXV0bykge1xuXHQgICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IHVzZXJFdmVudEFyZ3MuaXNfYXV0bztcblx0ICAgICAgICBzZGtBcmdzLnRyYWNrX3R5cGUgPSBcIjFcIjtcblx0ICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5pc19hdXRvO1xuXHQgICAgICAgIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUpIHsgLy/lhajln4vngrnkuLvliqjkuIrmiqXkuovku7bnsbvlnosgQOmSsOaYrSBA5paH5b+DXG5cdCAgICAgICAgICBzZGtBcmdzLmV2ZW50X3R5cGVfaWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7IC8vIEDmloflv4Mg5LqL5Lu257G75Z6L5Y+C5pWw5ZCN5pu05pS5XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDA7XG5cdCAgICAgICAgc2RrQXJncy50cmFja190eXBlID0gXCIwXCI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjbG9uZVAgPSBjbG9uZURlZXAodXNlckV2ZW50QXJncyk7XG5cdCAgICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcblx0ICAgICAgICAgIHNka0FyZ3Nba10gPSBjbG9uZVBba107XG5cdCAgICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJnc1trXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORCkge1xuXHQgICAgICAgIGV2ZW50X2FyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oc2RrQXJncywgdXNlckV2ZW50QXJncyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZXZlbnRfYXJncyA9IHV0aWxEYXNoLmFzc2lnbihzZGtBcmdzLCB7IGN1c3A6IHVzZXJFdmVudEFyZ3MgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgaGFuZGxlRXZlbnQobG9na2V5LCBldmVudF9hcmdzLCBhdXRvR2V0T3BlbmlkKTtcblx0ICAgIH0gZWxzZSBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHsgXG5cdCAgICAgIHZhciBwdmFyZ3MgPSB7fTtcblx0ICAgICAgdmFyIHBhZ2VfaWQgPSBhcGx1c1N0YXRpYy5QQUdFX1NUQVJUO1xuXHQgICAgICBnb2tleSA9IGNsb25lRGVlcChsb2dkYXRhLmdva2V5KSB8fCB7fTtcblx0ICAgICAgcGFnZV9uYW1lID0gZ29rZXkucGFnZV9uYW1lIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9nZGF0YS51cmwpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuXHQgICAgICBwdmFyZ3MuciA9IGxvZ2RhdGEuYXJnMSB8fCBsb2dkYXRhLmxvZ2tleSB8fCAnLSc7XG5cdCAgICAgIHB2YXJncy5wYWdlX25hbWUgPSBwYWdlX25hbWU7XG5cdCAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX3B2KSB7XG5cdCAgICAgICAgcHZhcmdzLmlzX2F1dG8gPSAxO1xuXHQgICAgICAgIHB2YXJncy51cmwgPSBnb2tleS5wYXRoIHx8ICctJztcblx0ICAgICAgICBwdmFyZ3MucmVmX3VybCA9IGdva2V5LnJlZmVycmVyO1xuXHQgICAgICAgIHB2YXJncy50cmFja190eXBlID0gXCIxXCI7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9fcHY7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LnJlZmVycmVyO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYXRoO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHZhcmdzLmlzX2F1dG8gPSAwO1xuXHQgICAgICAgIHB2YXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZTtcblx0ICAgICAgICBwdmFyZ3MudHJhY2tfdHlwZSA9IFwiMFwiO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZ29rZXkuZHVyYXRpb24pIHtcblx0ICAgICAgICBwdmFyZ3MuZHVyYXRpb24gPSBnb2tleS5kdXJhdGlvbjtcblx0ICAgICAgICBkZWxldGUgZ29rZXkuZHVyYXRpb247XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcblx0ICAgICAgICBwdmFyZ3MuZ3AgPSBncDtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKGdva2V5LnNjZW5lKSB7XG5cdCAgICAgICAgcHZhcmdzLnNjZW5lID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIGdva2V5LnNjZW5lO1xuXHQgICAgICB9XG5cdCAgICAgIGdva2V5ID0gdXRpbHMuZGVsZXRlSW5mbyhnb2tleSwgWydfYW5vbnlfaWQnLCAnX2Rldl9pZCcsICdfc2Vzc2lvbl9pZCcsICdfdXNlcl9pZCcsICdfdXNlcl9uaWNrJywgJ3VhaWQnLCAncHZpZCcsICdzY2VuZSddKTtcblx0ICAgICAgcHZhcmdzWydzcG0tY250J10gPSBlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKTtcblx0ICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9faWQpIHtcblx0ICAgICAgICBwYWdlX2lkID0gZ29rZXkuX3BhZ2VfYXV0b19pZDtcblx0ICAgICAgICBkZWxldGUgZ29rZXkuX3BhZ2VfYXV0b19pZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGdva2V5LnBhZ2Vfc3RhcnQpIHtcblx0ICAgICAgICBwdmFyZ3MucGFnZV9zdGFydCA9IGdva2V5LnBhZ2Vfc3RhcnQ7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LnBhZ2Vfc3RhcnQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIOmHh+mbhumhtemdonBhZ2VfdGl0bGVcblx0ICAgICAgaWYgKGdva2V5LnBhZ2VfdGl0bGUpIHtcblx0ICAgICAgICBwdmFyZ3MucGFnZV90aXRsZSA9IGdva2V5LnBhZ2VfdGl0bGUgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKGxvZ2RhdGEudXJsKSB8fCAnJztcblx0ICAgICAgICBkZWxldGUgZ29rZXkucGFnZV90aXRsZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwdmFyZ3MucGFnZV90aXRsZSA9IGdva2V5Ll9wYWdlX3RpdGxlO1xuXHQgICAgICB9XG5cdCAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV90aXRsZTtcblx0XG5cdCAgICAgIHB2YXJncy51cmwgPSBQYWdlTWFuYWdlci5nZXRGdWxsUGF0aChwdmFyZ3MudXJsKTtcblx0ICAgICAgcHZhcmdzLnJlZl91cmwgPSBQYWdlTWFuYWdlci5nZXRGdWxsUGF0aChwdmFyZ3MucmVmX3VybCk7XG5cdCAgICAgIGhhbmRsZUV2ZW50KHBhZ2VfaWQsIHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIHsgY3VzcDogZ29rZXl9ICksIGF1dG9HZXRPcGVuaWQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gY29uc29sZS5sb2coMjIyMiwgZGF0YSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgIHRoaXMud2F0Y2hMT0coKTtcblx0ICB9XG5cdCAgXG5cdH0pO1xuXG4vKioqLyB9KSxcbi8qIDkxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOaLpuaIquW5tuaMiWh0dHDljY/orq7lj5HpgIHml6Xlv5dcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdC8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdC8vIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQmFzZS5leHRlbmQoe1xuXHRcblx0ICBzdWJzY3JpYmVMb2dzOiBmdW5jdGlvbiAoYWN0aW9uLCBjYWxsYmFjaykge1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlNVQlNDUklCRSwgW2FjdGlvbiwgZnVuY3Rpb24gKG9yaURhdGFzKSB7XG5cdCAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG5cdCAgICAgICAgY2FsbGJhY2sob3JpRGF0YXMpO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiB0aGlzLmZvcm1hdCA9PT0gJ0FMSScgPyAnJicgOiAnfHwnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWcqOWtkOexu+S4reWunueOsFxuXHQgICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuXHQgICAqL1xuXHQgIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoKSB7fSxcblx0ICBcblx0XG5cdCAgd2F0Y2hMT0c6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICBcblx0ICAgIC8vIOiuoumYhXB25LqL5Lu2XG5cdCAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgJ3B2Jyk7XG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyDorqLpmIVoamxqL2FwbHVz5LqL5Lu2XG5cdCAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9ISkxKLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMud2F0Y2hMT0coKTtcblx0ICB9XG5cdH0pO1xuXG5cbi8qKiovIH0pLFxuLyogOTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuXHQgKiDmk43kvZxhcGx1c19xdWV1ZeeahOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRleHBvcnRzLnB1c2hJbnRvR29sZGxvZ1F1ZXVlID0gZnVuY3Rpb24gKGFjdGlvbiwgYXJncykge1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBuYW1lcyA9IGFjdGlvbi5zcGxpdCgnLicpO1xuXHQgIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuXHQgIHZhciBhcGx1c18yID0gYXBsdXNfMSA/IGFwbHVzXzFbbmFtZXNbMl1dIDogbnVsbDtcblx0XG5cdCAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG5cdCAgICBhcGx1c18xLmFwcGx5KGFwbHVzLCBhcmdzKTtcblx0ICB9IGVsc2UgaWYgKG5hbWVzLmxlbmd0aCA9PT0gMyAmJiBhcGx1c18yKSB7XG5cdCAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IGFjdGlvbixcblx0ICAgICAgYXJndW1lbnRzOiBhcmdzXG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IGV2ZW50LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJyB8fCAhaWQpIHtcblx0ICAgIHVsb2coKS53KCdldmVudCBsb2drZXkgaXMgaW52YWxpZCwgaWQgPScsIGlkIHx8IFwiJycgZXZlbnQgcHJvcGVydGllcyA9IFwiLCBqc29uVXRpbC5zdHJpbmdmeShwcm9wZXJ0aWVzLmN1c3ApKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGV2ZW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBldmVudC5pZCA9IGlkO1xuXHQgIGlmICghcHJvcGVydGllcyB8fCAhcHJvcGVydGllcy50cykge1xuXHQgICAgZXZlbnQudHMgPSBEYXRlLm5vdygpO1xuXHQgIH1cblx0ICB2YXIgcHJvcHNUeXBlID0gdHlwZW9mIHByb3BlcnRpZXM7XG5cdCAgaWYgKHByb3BzVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG5cdCAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcblx0ICAgICAgICBldmVudFtrZXldID0gcHJvcGVydGllc1trZXldO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcblx0ICAgIGV2ZW50WydncCddID0gZ3A7IFxuXHQgIH1cblx0ICByZXR1cm4gZXZlbnQ7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46ICBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG5cdCAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cdFxuXHQgICAgICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgICAgdmFyIHF1ZSA9IGNvbnRleHRbQVBMVVNfUVVFVUVdIHx8IFtdO1xuXHQgICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG5cdCAgICAgIGNvbnRleHRbQVBMVVNfUVVFVUVdID0gcnMucXVldWU7XG5cdCAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHJzLmZvcm1hdFF1ZXVlLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7QXJyYXl9IFFVRVVFXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuXHQgKiB9XG5cdCAqL1xuXHR2YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuXHQgIGZ1bmN0aW9uIGYoKSB7XG5cdCAgICBpZiAoIVFVRVVFIHx8ICF1dGlsQXJyYXkuaXNBcnJheShRVUVVRSkgfHwgIVFVRVVFLmxlbmd0aCkgcmV0dXJuO1xuXHQgICAgLy8g5o6S5bqPXG5cdCAgICB2YXIgcXVlID0gZ2V0Rm9ybWF0UXVldWUoUVVFVUUpLnF1ZXVlO1xuXHQgICAgdmFyIHRhc2sgPSB7fTtcblx0ICAgIHZhciBkZWxheVRhc2tzID0gW107XG5cdCAgICB3aGlsZSAodGFzayA9IHF1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMsIGZ1bmN0aW9uICh0KSB7XG5cdCAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgd2hpbGUgKHRhc2sgPSBkZWxheVRhc2tzLnNoaWZ0KCkpIHtcblx0ICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTAwKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICBmKCk7XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlXG5cdCAgICAvLyB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IHByb2Nlc3NHb2xkbG9nUXVldWU7XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRhSW5mbygpIHtcblx0ICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICByZXR1cm4gbWV0YV9pbmZvO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBnZXRBcGx1c0hvbGRUeXBlICgpIHtcblx0ICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG5cdCAgaWYgKHVhaWQgPT09ICcxJyAmJiAhbWV0YV9pbmZvLl9hbm9ueV9pZCkge1xuXHQgICAgcmV0dXJuICdCTE9DSyc7XG5cdCAgfVxuXHQgIHJldHVybiBtZXRhX2luZm9bJ19ob2xkJ10gfHwgbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG5cdH1cblx0XG5cdHZhciBBUExVU19IT0xEX1VTRVJJRF9RVUVVRSA9IFtdO1xuXHR2YXIgQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSA9IFtdO1xuXHR2YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXHRcblx0ZnVuY3Rpb24gZmlsdGVyVGFzayAodGFzaykge1xuXHQgIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcblx0ICAvLyBjb25zb2xlLmxvZygnaG9sZFR5cGUgPT09ICcsIGhvbGRUeXBlKTtcblx0ICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICB2YXIgZmxhZyA9IHRydWU7XG5cdFxuXHQgIC8vIDA6IFwiX2hvbGRcIlxuXHQgIC8vIDE6IFwiU1RBUlRcIlxuXHQgIHZhciBhcmdzID0gdGFzay5hcmd1bWVudHMgfHwgW107XG5cdCAgdmFyIG1ldGFLZXkgPSBhcmdzWzBdO1xuXHQgIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuXHQgIHZhciBTVEFSVCA9ICdTVEFSVCc7XG5cdCAgaWYgKG1ldGFLZXkgPT09ICdfaG9sZCcgJiYgbWV0YVZhbHVlID09PSBTVEFSVCkge1xuXHQgICAgcmV0dXJuIFNUQVJUO1xuXHQgIH1cblx0ICBpZiAobWV0YUtleSA9PT0gJ19hbm9ueV9pZCcgJiYgbWV0YVZhbHVlKSB7XG5cdCAgICByZXR1cm4gU1RBUlQ7XG5cdCAgfVxuXHQgIGlmICh0YXNrICYmIC9zZW5kUFZ8cmVjb3JkfHNldFBhZ2VTUE18c2V0TWV0YUluZm98YXBwZW5kTWV0YUluZm8kLy50ZXN0KHRhc2suYWN0aW9uKSkge1xuXHQgICAgc3dpdGNoIChob2xkVHlwZSkge1xuXHQgICAgY2FzZSAnQkxPQ0snOlxuXHQgICAgICBpZiAoIW1ldGFfaW5mb1tob2xkVHlwZV0pIHtcblx0ICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG5cdCAgICAgICAgZmxhZyA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmbGFnO1xuXHR9XG5cdFxuXHRcblx0Ly8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuXHRmdW5jdGlvbiBwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZSAob3B0cykge1xuXHQgIC8vIGlmICghcHJvY2Vzc2VkKSB7XG5cdCAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuXHQgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuXHQgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuXHQgIC8vIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gcXVldWVOYW1lOiBhcGx1c19xdWV1ZSB8fCBnb2xkbG9nX3F1ZXVlXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuXHQgKiB9XG5cdCAqL1xuXHRleHBvcnRzLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZU5hbWUsIG9wdHMpIHtcblx0ICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcblx0ICBxdWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLlNFVF9NRVRBX0lORk8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG5cdCAgICAgICAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fQU5PTllfSUQgJiYgdmFsdWUpIHtcblx0ICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ19ob2xkJyAmJiB2YWx1ZSA9PT0gJ1NUQVJUJykge1xuXHQgICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0TWV0aG9kTmFtZSAoa2V5LCBpc09wZW5BcGkpIHtcblx0ICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG5cdCAgICBrZXkgPSAnXycgKyBrZXk7XG5cdCAgfVxuXHQgIHJldHVybiBrZXk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IHRhc2tcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdHZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIGlzT3BlbkFwaSA9ICEhb3B0cy5pc09wZW5BcGk7XG5cdCAgdmFyIGFjdGlvbiA9IHRhc2sgPyB0YXNrLmFjdGlvbiA6ICcnO1xuXHQgIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cdFxuXHQgIHZhciByZXN1bHQgPSBmaWx0ZXJUYXNrKHRhc2spO1xuXHQgIGlmICghcmVzdWx0KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7IC8vIOehruS/neafkOS4quS7u+WKoeaJp+ihjOWksei0peS4jeS8muW9seWTjeWFtuWug+S7u+WKoVxuXHQgICAgaWYgKGFjdGlvbiAmJiBhcmdzICYmIHV0aWxBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG5cdCAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG5cdCAgICAgIHZhciBvYmogPSBjb250ZXh0O1xuXHQgICAgICB2YXIgX2ZuID0gY29udGV4dDtcblx0ICAgICAgdmFyIG1ldGhvZE5hbWU7XG5cdCAgICAgIGlmIChhLmxlbmd0aCA9PT0gMykge1xuXHQgICAgICAgIG9iaiA9IGNvbnRleHRbYVswXV1bYVsxXV0gfHwge307XG5cdCAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcblx0ICAgICAgICBfZm4gPSBvYmpbbWV0aG9kTmFtZV0gPyBvYmpbbWV0aG9kTmFtZV0gOiAnJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcblx0ICAgICAgICAgIG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGEuc2hpZnQoKSwgaXNPcGVuQXBpKTtcblx0ICAgICAgICAgIF9mbiA9IG9iaiA9IG9ialttZXRob2ROYW1lXTtcblx0ICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cblx0ICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sodGFzayk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoaXNGdW5jdGlvbihfZm4pKSB7XG5cdCAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlc3VsdCA9PT0gJ1NUQVJUJykge1xuXHQgICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgIC8vICAgbXNnOiBlXG5cdCAgICAvLyB9KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMucHJvY2Vzc1Rhc2sgPSBwcm9jZXNzVGFzaztcblx0XG5cdHZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuXHQgIHZhciBxdWV1ZU1hcCA9IHtcblx0ICAgIHN1YnNjcmliZU13Q2hhbmdlUXVldWU6IFtdLFxuXHQgICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcblx0ICAgIHN1YnNjcmliZVF1ZXVlOiBbXSxcblx0ICAgIG1ldGFRdWV1ZTogW10sXG5cdCAgICBvdGhlcnNRdWV1ZTogW11cblx0ICB9O1xuXHRcblx0ICB2YXIgcSA9IFtdO1xuXHQgIHZhciB0YXNrID0ge307XG5cdCAgd2hpbGUgKHRhc2sgPSBxdWV1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgYWMgPSB0YXNrLmFjdGlvbjtcblx0ICAgICAgdmFyIGtleSA9IHRhc2suYXJndW1lbnRzWzBdO1xuXHQgICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnc2V0TWV0YUluZm8nKSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoL01ldGFJbmZvLy50ZXN0KGFjKSkge1xuXHQgICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgLy8gICBtc2c6IGVcblx0ICAgICAgLy8gfSk7XG5cdCAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBmb3JtYXRRdWV1ZTtcblx0ICBpZiAodHlwZSAmJiBxdWV1ZU1hcFt0eXBlXSkge1xuXHQgICAgZm9ybWF0UXVldWUgPSBxdWV1ZU1hcFt0eXBlXTtcblx0ICAgIHF1ZXVlTWFwW3R5cGVdID0gW107XG5cdCAgfVxuXHQgIHEgPSBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLmNvbmNhdChxdWV1ZU1hcC5tZXRhUXVldWUpO1xuXHQgIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZSk7XG5cdCAgcSA9IHEuY29uY2F0KHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZSwgcXVldWVNYXAub3RoZXJzUXVldWUpO1xuXHQgIHJldHVybiB7XG5cdCAgICBxdWV1ZTogcSxcblx0ICAgIGZvcm1hdFF1ZXVlOiBmb3JtYXRRdWV1ZVxuXHQgIH07XG5cdH07XG5cdGV4cG9ydHMuZ2V0Rm9ybWF0UXVldWUgPSBnZXRGb3JtYXRRdWV1ZTtcblxuXG4vKioqLyB9KSxcbi8qIDk2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcblx0ICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYWN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NSk7XG5cdFxuXHR2YXIgUXVldWUgPSBCYXNlLmV4dGVuZCh7XG5cdCAgcHVzaDogZnVuY3Rpb24odGFzaykge1xuXHQgICAgdGhpcy5sZW5ndGgrKztcblx0ICAgIGFjdGlvbi5wcm9jZXNzVGFzayh0YXNrLCB0aGlzLm9wdHMpOyAgXG5cdCAgfSxcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcHJvY2Vzc0FwbHVzUXVldWU6IGZ1bmN0aW9uIChxdWV1ZU5hbWUpIHtcblx0ICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcblx0ICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocXVlLCBvcHRzKTtcblx0ICAgICAgdXRpbEdvbGRsb2cuc2V0R2xvYmFsVmFsdWUocXVldWVOYW1lLCBRdWV1ZS5jcmVhdGUoe1xuXHQgICAgICAgIG9wdHM6IG9wdHMsIFxuXHQgICAgICAgIHN0YXJ0TGVuZ3RoOiBxdWUubGVuZ3RoLFxuXHQgICAgICAgIGxlbmd0aDogMFxuXHQgICAgICB9KSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyB7U3RyaW5nfSB0eXBlXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcblx0ICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblx0XG5cdCAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoQVBMVVNfUVVFVUUpO1xuXHRcblx0ICAgICAgaWYgKEFQTFVTX1FVRVVFID09PSAnYXBsdXNfcXVldWUnKSB7XG5cdCAgICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZSgnZ29sZGxvZ19xdWV1ZScpO1xuXHQgICAgICB9XG5cdCAgICAgIGFjdGlvbi5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUoQVBMVVNfUVVFVUUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDlj4vnm5/kupHmnaHku7bkuIvnmoToh6rliqjkuovku7bmj5Lku7YgICAgIFxuXHQgKiBcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICogXG5cdCAqIEF1dGhvcjogXG5cdCAqICAgIOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIEZldGNoQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5OCk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0dmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuXHR2YXIgdXRpbFZUID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDEpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdGZ1bmN0aW9uIGF1dG9UcmFja2VyICgpIHtcblx0ICB2YXIgcmJfY29uZmlnLCBwZHJfY29uZmlnLCBzaGFyZV9jb25maWc7XG5cdCAgLy8gdmFyIHByZWZpeCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFKTtcblx0ICB2YXIgX2hhc1RyYWNrZWQgPSBmYWxzZTtcblx0ICB2YXIgX2N1cnJlbnRQYWdlID0ge1xuXHQgICAgdHM6IERhdGUubm93KClcblx0ICB9O1xuXHQgIHZhciBjb3VudCA9IHtcblx0ICAgICdvblB1bGxEb3duUmVmcmVzaCc6IDAsXG5cdCAgICAnb25TaGFyZVRpbWVsaW5lJzogMCxcblx0ICAgICdvblJlYWNoQm90dG9tJzogMCxcblx0ICAgICdvblNoYXJlQXBwTWVzc2FnZSc6IDAsXG5cdCAgICAnb25DbGljayc6IDBcblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBldmVudEhhbmRsZSAoKSB7XG5cdCAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiAnJztcblx0ICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuXHQgICAgLy8gdmFyIHA7XG5cdCAgICBcblx0ICAgIHN3aXRjaCAoZXZlbnROYW1lKSB7XG5cdCAgICBjYXNlICdvblB1bGxEb3duUmVmcmVzaCc6XG5cdCAgICAgIGNvdW50Lm9uUHVsbERvd25SZWZyZXNoICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbcGRyX2NvbmZpZy5sb2drZXkgfHwgJyQkX3B1bGxfZG93bl9yZWZyZXNoJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblB1bGxEb3duUmVmcmVzaFxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ29uUmVhY2hCb3R0b20nOlxuXHQgICAgICBjb3VudC5vblJlYWNoQm90dG9tICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbcmJfY29uZmlnLmxvZ2tleSB8fCAnJCRfcmVhY2hfYm90dG9tJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblJlYWNoQm90dG9tXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25TaGFyZUFwcE1lc3NhZ2UnOlxuXHQgICAgICBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSArPSAxO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcblx0ICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG5cdCAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcblx0ICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSxcblx0ICAgICAgICAgIHNoYXJlX3R5cGU6IDFcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblNoYXJlVGltZWxpbmUnOiBcblx0ICAgICAgY291bnQub25TaGFyZVRpbWVsaW5lICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbc2hhcmVfY29uZmlnLmxvZ2tleSB8fCAnJCRfc2hhcmUnLCAnQ0xLJywge1xuXHQgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcblx0ICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuXHQgICAgICAgICAgY291bnQ6IGNvdW50Lm9uU2hhcmVUaW1lbGluZSxcblx0ICAgICAgICAgIHNoYXJlX3R5cGU6IDBcblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblBhZ2VTaG93Jzpcblx0ICAgICAgaWYgKHBhZ2VJbnN0YW5jZS5yb3V0ZSAmJiAhX2hhc1RyYWNrZWQpIHtcblx0ICAgICAgICBfY3VycmVudFBhZ2UgPSB7XG5cdCAgICAgICAgICBwYXRoOiBwYWdlSW5zdGFuY2Uucm91dGUsXG5cdCAgICAgICAgICBwYWdlX25hbWU6IHBhZ2VJbnN0YW5jZS5yb3V0ZSxcblx0ICAgICAgICB9O1xuXHQgICAgICAgIF9jdXJyZW50UGFnZS50cyA9IERhdGUubm93KCk7XG5cdCAgICAgICAgX2hhc1RyYWNrZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25QYWdlSGlkZSc6ICBcblx0ICAgICAgaWYgKF9oYXNUcmFja2VkKSB7XG5cdCAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIF9jdXJyZW50UGFnZS50cyB8fCAwO1xuXHQgICAgICAgIC8vIOWKoOi9veaXtuacuueahOmXrumimO+8jOaUvuWcqOatpOWkhOWPlnJlZmVycmVy55u45q+U5LqObWluaWFwcF9kYXRh5YeG56GuXG5cdCAgICAgICAgdmFyIHJlZmVycmVyID0gbWluaS5nZXRSZWZlcnJlclBhZ2UoKS5yb3V0ZSB8fCBtaW5pLmdldFJlZmVycmVyUGFnZSgpLmlzIHx8ICctJztcblx0ICAgICAgICB2YXIgZXh0cmFQYXJhbXMgPSAoUGFnZU1hbmFnZXIuZ2V0UGFnZU5hbWUoKSB8fCB7fSkuZXh0cmFQYXJhbXM7XG5cdCAgICAgICAgdmFyIHB2YXJncyA9IE9iamVjdC5hc3NpZ24oe30sIGV4dHJhUGFyYW1zLCB7XG5cdCAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG5cdCAgICAgICAgICBwYXRoOiBfY3VycmVudFBhZ2UucGF0aCxcblx0ICAgICAgICAgIHBhZ2VfbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBfY3VycmVudFBhZ2UucGFnZV9uYW1lLFxuXHQgICAgICAgICAgcGFnZV9zdGFydDogX2N1cnJlbnRQYWdlLnRzLFxuXHQgICAgICAgICAgaXNNaW5pOiB0cnVlLFxuXHQgICAgICAgICAgX3BhZ2VfYXV0b19pZDogYXBsdXNTdGF0aWMuUEFHRV9FTkQsXG5cdCAgICAgICAgICBfcGFnZV9hdXRvX3B2OiB0cnVlLFxuXHQgICAgICAgICAgcmVmZXJyZXI6IHJlZmVycmVyLFxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiBcImFwbHVzLnNlbmRQVlwiLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbeyBpc19hdXRvOiB0cnVlLCB0cmFja190eXBlOiBcIjFcIiB9LCBwdmFyZ3NdXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgX2N1cnJlbnRQYWdlID0gbnVsbDtcblx0ICAgICAgICBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgZGVmYXVsdDpcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZ2V0Q29uZmlnICgpIHtcblx0ICAgIHJiX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdyYl9jb25maWcnKTtcblx0ICAgIHBkcl9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygncGRyX2NvbmZpZycpO1xuXHQgICAgc2hhcmVfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3NoYXJlX2NvbmZpZycpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZmV0Y2hWZXJpZnlDb25maWcoY29kZSwgYXBwSW5mb0lkKSB7XG5cdCAgICBpZiAoIWNvZGUgfHwgIWFwcEluZm9JZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdHJ5IHsgXG5cdCAgICAgIHZhciBhcGlfaG9zdCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hcGktaG9zdCcpO1xuXHQgICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/Lztcblx0ICAgICAgdmFyIHZlcmlmeV9ob3N0ID0gYXBpX2hvc3QubWF0Y2gocmVnKTtcblx0ICAgICAgXG5cdCAgICAgIGlmICh2ZXJpZnlfaG9zdCAmJiB2ZXJpZnlfaG9zdFswXSkge1xuXHQgICAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuXHQgICAgICAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodmVyaWZ5X2hvc3RbMF0pKSB7XG5cdCAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB2ZXJpZnlVcmwgPSBwcm90b2NhbCArICcvLycgKyBhcGlfaG9zdCsgJy92dC9sb2FkVHJhbnNmZXJDb25maWc/Y29kZT0nICsgY29kZSArICcmYXBwSW5mb0lkPScgKyBhcHBJbmZvSWQ7XG5cdCAgICAgICAgbWluaS5yZXF1ZXN0KHZlcmlmeVVybCwge30sIGZ1bmN0aW9uKHJlc3Ape1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgdmFyIGNmZ0RhdGEgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmNvbmZpZykgfHwgJyc7XG5cdCAgICAgICAgICAgIHZhciBkZWJ1Z0lkID0gKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSAmJiByZXNwLmRhdGEuZGF0YS5kZWJ1Z0lkKSB8fCAnJztcblx0ICAgICAgICAgICAgaWYoZGVidWdJZCl7XG5cdCAgICAgICAgICAgICAgYXBsdXMuYXBwZW5kTWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyx7XG5cdCAgICAgICAgICAgICAgICBkZWJ1Z0lkOmRlYnVnSWRcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuXHQgICAgICAgICAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSBfYmVnaW5Mb2FkO1xuXHQgICAgICAgICAgICBpZiAoY2ZnRGF0YSkge1xuXHQgICAgICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBKU09OLnBhcnNlKGNmZ0RhdGEpIHx8IHt9O1xuXHQgICAgICAgICAgICAgIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICB1bG9nKCkudygnZmV0Y2ggcmVhbC10aW1lIHZpc3VhbGl6YXRpb24gdmVyaWZpY2F0aW9uIGZhaWxlZCwgZXJyIG1zZzonICsgZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cdCAgICAgIFxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuXHQgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgZ2V0Q29uZmlnKCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uTG9hZCcsIGZ1bmN0aW9uKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgY29kZSA9IFBhZ2VNYW5hZ2VyLmdldFZUUmVhbHRpbWVDb2RlKCk7XG5cdCAgICAgICAgaWYgKGNvZGUpIHtcblx0ICAgICAgICAgIHZhciBhcHBJbmZvSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSW5mb0lkJyk7XG5cdCAgICAgICAgICBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpO1xuXHQgICAgICAgIH0gZWxzZSB7ICAgICAgICAgIFxuXHQgICAgICAgICAgISFhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpICYmIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIHVsb2coKS53KCdmZXRjaCByZWFsLXRpbWUgdmlzdWFsaXphdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkLCBlcnJtc2c6JyArIGUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hvdycsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG5cdCAgICAgIGlzQXV0byAmJiBldmVudEhhbmRsZSgnb25QYWdlU2hvdycpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICB2YXIgaXNBdXRvID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgIT09ICdNQU4nO1xuXHQgICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZUhpZGUnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25QdWxsRG93blJlZnJlc2gnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICBldmVudEhhbmRsZSgnb25QdWxsRG93blJlZnJlc2gnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25SZWFjaEJvdHRvbScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblJlYWNoQm90dG9tJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVBcHBNZXNzYWdlJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVUaW1lbGluZScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblNoYXJlVGltZWxpbmUnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgaWYgKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKGFwbHVzU3RhdGljLlNVQlNDUklCRSwgW01JTklfVlRfQ09ORklHX0ZPUk1BVCwgZnVuY3Rpb24ob3B0aW9ucyl7XG5cdCAgICAgIHZhciBwYWdlQ29uZmlnID0gb3B0aW9ucy5wYWdlQ29uZmlnO1xuXHQgICAgICBpZiAocGFnZUNvbmZpZyAmJiBwYWdlQ29uZmlnLmVuYWJsZWQpIHtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gcGFnZUNvbmZpZztcblx0ICAgICAgfVxuXHQgICAgfV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIGF1dG9UcmFja2VyKCk7XG5cdCAgICAgIGlmICghYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCl7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCA9IDE7XG5cdCAgICAgICAgdmFyIGZjID0gRmV0Y2hDb25maWcuY3JlYXRlKCk7XG5cdCAgICAgICAgZmMucnVuKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogOTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICog5Y+v6KeG5YyW5Z+L54K56YWN572u5L+h5oGv6K+35rGCIFxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQWFyb2586ZKw5pitIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgdXRpbEdRID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5Mik7XG5cdHZhciB1dGlsQ2F0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIG1pbml2dFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApO1xuXHQvLyB2YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgTUlOSV9WVF9DT05GSUdfQkFDSyA9ICdNaW5pVnRDb25maWdCYWNrJztcblx0dmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuXHRcblx0dmFyIEdPTERMT0dfUFVCTElTSCA9IGFwbHVzU3RhdGljLlBVQkxJU0g7XG5cdC8vIHByb2Q6IGh0dHBzOi8vYWxpZHQuYWxpY2RuLmNvbS9hbGlsb2cvdnRkYWlseS8ke2NvbXBvbmVudElEfS5qc29uXG5cdC8vIGh0dHBzOi8vZC5hbGljZG4uY29tL2FsaWxvZy92dC9hMXoxZDFfMTIyNzk5MTQuanNvblxuXHQvLyB2YXIgSE9TVCA9ICcvL2cuYWxpY2RuLmNvbS9hbGlsb2cnO1xuXHQvLyB2YXIgSE9TVCA9ICcvL2QuYWxpY2RuLmNvbS9hbGlsb2cnO1xuXHRcblx0Ly8gZnVuY3Rpb24gaXNEYWlseSAoKSB7XG5cdC8vICAgdmFyIHJzID0gZmFsc2U7XG5cdC8vICAgaWYgKGFwbHVzICYmIGFwbHVzLmFwbHVzRGVidWcpIHtcblx0Ly8gICAgIHJldHVybiB0cnVlO1xuXHQvLyAgIH1cblx0Ly8gICByZXR1cm4gcnM7XG5cdC8vIH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQmFzZS5leHRlbmQodXRpbERhc2guYXNzaWduKG1pbml2dFN0b3JlLCB7XG5cdFxuXHQgIHBhdGhuYW1lOiAnJyxcblx0XG5cdCAgcGFnZUNvbmZpZzoge30sXG5cdFxuXHQgIG9yaWdpblNwbToge1xuXHQgICAgc3BtQTogJycsXG5cdCAgICBzcG1COiAnJ1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZUNmZ0xzOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG5cdCAgICAgIF9zZWxmLmZldGNoRnJvbUNkbigpO1xuXHQgICAgfSwxMDAwKTtcblx0ICB9LFxuXHRcblx0ICBmZXRjaEZyb21DZG46IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBwYXRoID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKTtcblx0ICAgIGlmICghcGF0aCkgcmV0dXJuO1xuXHQgICAgdmFyIF9iZWdpbkxvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcblx0ICAgIGFwbHVzLnJlcXVlc3RWVENvbmZpZyhwYXRoLCBmdW5jdGlvbihyZXNwKSB7XG5cdCAgICAgIHZhciBjZmdEYXRhID0gcmVzcC5kYXRhO1xuXHQgICAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSBfYmVnaW5Mb2FkO1xuXHQgICAgICBpZiAoY2ZnRGF0YSkge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdHlwZW9mIGNmZ0RhdGEgPT09ICdvYmplY3QnID8gY2ZnRGF0YSA6IEpTT04ucGFyc2UoY2ZnRGF0YSk7XG5cdCAgICAgICAgICBpZiAoYXBsdXMuX2FwbHVzX3Z0X2NmZy5wb2ludHMpIHtcblx0ICAgICAgICAgICAgZWFjaChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICAgICAgICB2LnNlbGVjdG9yID0gZGVjb2RlVVJJQ29tcG9uZW50KHYuc2VsZWN0b3IpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIF9zZWxmLnNldENvbmZpZ0ludG9McyhhcGx1cy5fYXBsdXNfdnRfY2ZnKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0ge1xuXHQgICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOmFwbHVzLl9hcGx1c192dF9jZmcsIGVuYWJsZTogMH1dKTtcblx0ICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXHQgICAgICBpZiAoYXBsdXMuX2FwbHVzX3Z0X2NmZyAmJiBhcGx1cy5fYXBsdXNfdnRfY2ZnLmVuYWJsZWQpIHtcblx0ICAgICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6YXBsdXMuX2FwbHVzX3Z0X2NmZywgZW5hYmxlOiAwfV0pOyAgXG5cdCAgICAgIH1cblx0ICAgICAgdXRpbENhdGNoLmNhdGNoRXhjZXB0aW9uKCdnZXRUcmFja2VyQ2ZnJywgZXJyb3IsIHtcblx0ICAgICAgICBtc2c6IHBhdGhcblx0ICAgICAgfSk7XG5cdCAgICB9LCB7XG5cdCAgICAgIHRpbWVvdXQ6IDUwMDBcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIGdldE1pbmlWdERhdGE6IGZ1bmN0aW9uKGNkbnBhdGgsIHByZVVybCwgZnJvbUNETil7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAwO1xuXHQgICAgaWYgKGNkbnBhdGgpIHtcblx0ICAgICAgdmFyIHZ0Q29uZmlnID0gdGhpcy5mZXRjaEZyb21MUyhjZG5wYXRoKTtcblx0ICAgICAgaWYodHlwZW9mIHZ0Q29uZmlnID09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgdHJ5e1xuXHQgICAgICAgICAgdnRDb25maWcgPSBKU09OLnBhcnNlKHZ0Q29uZmlnKTtcblx0ICAgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICAgIHZ0Q29uZmlnID0ge307XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodnRDb25maWcgJiYgdnRDb25maWcuZW5hYmxlZCkge1xuXHQgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB2dENvbmZpZztcblx0ICAgICAgfVxuXHQgICAgICBpZiggIWZyb21DRE4pIHtcblx0ICAgICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6dnRDb25maWcsIGVuYWJsZTogMH1dKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmZldGNoRnJvbUNkbihjZG5wYXRoLCBwcmVVcmwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0X2RhaWx5L2ExejFkMV8xMjI3OTkxNC5qc29uXG5cdCAgc3luY01pbmlWdERhdGE6IGZ1bmN0aW9uKCl7XG5cdCAgICAvL3N1YnNjcmliZSAgd3MucmVhZHlcblx0ICAgIHZhciBjZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcblx0ICAgIHRoaXMuZ2V0TWluaVZ0RGF0YShjZG5wYXRoLCAnJywgdHJ1ZSk7XG5cdCAgfSxcblx0XG5cdCAgaW5pdDogZnVuY3Rpb24oKXtcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICBcblx0ICAgIHZhciBHT0xETE9HX1NVQlNDUklCRSA9IGFwbHVzU3RhdGljLlNVQlNDUklCRTtcblx0ICAgIC8vdGhpcyBldmVudCBmcm9tIExTIG9yIGZyb20gV1MgdG8gZ2V0IGNvbmZpZ1xuXHQgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfQkFDSywgZnVuY3Rpb24gKG9yaURhdGFzKSB7XG5cdCAgICAgIGlmKCFvcmlEYXRhcy5lbmFibGUpIHtcblx0ICAgICAgICBfc2VsZi5wYWdlQ29uZmlnID0gb3JpRGF0YXMucGFnZUNvbmZpZztcblx0ICAgICAgfVxuXHQgICAgICAvL3RoaXMgZXZlbnQgdG8gdXNlO1xuXHQgICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfRk9STUFULCB7XG5cdCAgICAgICAgcGFnZUNvbmZpZzogX3NlbGYucGFnZUNvbmZpZyxcblx0ICAgICAgICBvcmlnaW5TcG06IF9zZWxmLm9yaWdpblNwbVxuXHQgICAgICB9XSk7XG5cdCAgICAgICFvcmlEYXRhcy5lbmFibGUgJiYgX3NlbGYuc2V0Q29uZmlnSW50b0xzKF9zZWxmLnBhZ2VDb25maWcpO1xuXHQgICAgfV0pO1xuXHQgICAgX3NlbGYuc3luY01pbmlWdERhdGEoKTtcblx0ICB9LFxuXHRcblx0ICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuaW5pdCgpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfVxuXHR9KSk7XG5cblxuLyoqKi8gfSksXG4vKiA5OSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0XG5cdGV4cG9ydHMuY2F0Y2hFeGNlcHRpb24gPSBmdW5jdGlvbiAoZmlsZW5hbWUsIGVycm9yKSB7XG5cdCAgdmFyIG1lc3NhZ2UgPSBmaWxlbmFtZTtcblx0ICBpZiAodHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvci5tZXNzYWdlKSB7XG5cdCAgICBtZXNzYWdlID0gbWVzc2FnZSArICdfJyArIGVycm9yLm1lc3NhZ2U7XG5cdCAgfVxuXHQgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMuX2FwbHVzX2NwbHVnaW5fbS5kb190cmFja2VyX2pzZXJyb3InLCBbe1xuXHQgICAgbWVzc2FnZTogbWVzc2FnZSxcblx0ICAgIGVycm9yOiBKU09OLnN0cmluZ2lmeShlcnJvciksXG5cdCAgICBmaWxlbmFtZTogZmlsZW5hbWVcblx0ICB9XSk7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQqIGRlc2NyaXB0aW9uXG5cdCpcblx0KiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCpcblx0KiBBdXRob3JzOlxuXHQqICAgQWFyb24gfCDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cblx0Ki9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgbHNNaW5pdnRDb25maWdLZXk6ICdBUExVU19NSU5JX0NPTkZJRycsXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWFrOWFseaooeadv+WcuuaZr++8jOWmguaenHR1cm5vbj09PScxJyDmi4nlj5Z2YWx1ZeWGheeahOWGheWuuVxuXHQgICAqIG1ldGFJbmZvOiB7XG5cdCAgICogICdhcGx1cy10cmFjay1jb25maWctaWQnOiB7XG5cdCAgICogICAgJ3ZhbHVlJzogJ3BhQ3dabEcyV3Y3bGxoaG0nLFxuXHQgICAqICAgICd0dXJub24nOiAnMCcgb3IgJzEnICAgXG5cdCAgICogIH1cblx0ICAgKiB9XG5cdCAgICovXG5cdCAgZ2V0TWluaVZ0VHBsQ2RuUGF0aDogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCcpO1xuXHQgICAgdmFyIHR1cm5vbiA9IGFwbHVzVHJhY2tDb25maWdJZEluZm8gJiYgYXBsdXNUcmFja0NvbmZpZ0lkSW5mby50dXJub247XG5cdCAgICB2YXIgdmFsdWUgPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udmFsdWU7XG5cdCAgICBpZiAodHVybm9uID09PSAnMScgJiYgdmFsdWUpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcnO1xuXHQgIH0sXG5cdFxuXHQgIGdldFZ0Q29uZmlnUGF0aDogZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgdGVtcGxhdGVWYWwgPSB0aGlzLmdldE1pbmlWdFRwbENkblBhdGgoKTtcblx0ICAgIHZhciBzcG1BQiA9IFtdO1xuXHQgICAgdmFyIHNwbUlkO1xuXHQgICAgdmFyIGFwcGtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG5cdCAgICBpZiAoYXBwa2V5KSB7XG5cdCAgICAgIHNwbUlkID0gYXBwa2V5O1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICBpZiAoc3BtSWQpIHtcblx0ICAgICAgc3BtQUIgPSBzcG1JZC5zcGxpdCgnLicpO1xuXHQgICAgfSBcblx0ICAgIC8vIHJlbW92ZSBlbHNlIGxvZ2ljIGluc2lkZSB3ZWJ2dFN0b3JlLCBiZWNhdXNlIG1pbmlfY2xvdWQgZG9udCBzdXBwb3J0IHNwbVxuXHQgICAgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMikge1xuXHQgICAgICB0aGlzLm9yaWdpblNwbSA9IHtcblx0ICAgICAgICBzcG1BOiBzcG1BQlswXSxcblx0ICAgICAgICBzcG1COiBzcG1BQlsxXVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgdGhpcy5vcmlnaW5TcG0uc3BtQSA9IHNwbUFCWzBdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0ZW1wbGF0ZVZhbCkge1xuXHQgICAgICByZXR1cm4gdGVtcGxhdGVWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoc3BtQUIubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgIHJldHVybiBzcG1BQi5qb2luKCdfJyk7XG5cdCAgICB9IGVsc2UgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICByZXR1cm4gc3BtQUJbMF07XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZmV0Y2hGcm9tTFM6IGZ1bmN0aW9uIChjZG5wYXRoKSB7XG5cdCAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuXHQgICAgICB0aGlzLmNkbnBhdGggPSBjZG5wYXRoIHx8IHRoaXMuZ2V0TWluaVZ0VHBsQ2RuUGF0aCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChjdHguZ2V0U3RvcmFnZVN5bmModGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIGNkbnBhdGgpKSB8fCB7fTtcblx0ICB9LFxuXHRcblx0ICBzZXRDb25maWdJbnRvTHM6IGZ1bmN0aW9uKGNvbmZpZykge1xuXHQgICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcblx0ICAgICAgdGhpcy5jZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcblx0ICAgIH1cblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIGN0eC5zZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuXHQgICAgLy8gdXRpbFN0b3JlLnNldCh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuXHQgIH1cblx0XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbFZULmpzXG5cdCAqIOWPr+inhuWMlumFjee9riDop6PmnpDphY3nva7kv6Hmga/kuLroh6rliqjngrnlh7vjgIHoh6rliqjmm53lhYnjgIHoh6rliqhwduWFrOWFseWHveaVsFxuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsQXJyYXkgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHRcblx0ZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHZ0Q2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZztcblx0ICBpZiAoIXZ0Q2ZnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXRoID0gUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgdnRDZmcucGFnZXMubGVuZ3RoOyBpKysgKXtcblx0ICAgIHZhciBwYWdlQ29uZmlnID0gdnRDZmcucGFnZXNbaV07XG5cdCAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuXHQgICAgICByZXR1cm4gcGFnZUNvbmZpZztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybjtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXV0b0NmZ3MgKGNmZzEsY2ZnMil7XG5cdCAgY2ZnMSA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzEpP2NmZzEgOiBbXTtcblx0ICBjZmcyID0gdXRpbEFycmF5LmlzQXJyYXkoY2ZnMik/Y2ZnMiA6IFtdO1xuXHQgIHZhciB0b3RhbEF1dG9DZmdzID0gW10uY29uY2F0KGNmZzIsY2ZnMSk7XG5cdCAgZnVuY3Rpb24gZ2V0SW5kZXggKGl0ZW0sYXJyKXtcblx0ICAgIHZhciBpbmRleCA9IC0xO1xuXHQgICAgZm9yKHZhciBpID0gMDsgaTxhcnIubGVuZ3RoOyBpKyspe1xuXHQgICAgICB2YXIgY3VycmVudCA9IGFycltpXTtcblx0ICAgICAgaWYoY3VycmVudC5jc3NTZWxlY3Rvcj09PWl0ZW0uY3NzU2VsZWN0b3ImJmN1cnJlbnQubG9na2V5PT09aXRlbS5sb2drZXkpe1xuXHQgICAgICAgIGluZGV4ID0gaTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGluZGV4O1xuXHQgIH1cblx0ICB2YXIgZmluYWxBdXRvQ2ZncyA9IHRvdGFsQXV0b0NmZ3MuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0saW5kZXgsYXJyYXkpe1xuXHQgICAgcmV0dXJuIGdldEluZGV4KGl0ZW0sYXJyYXkpID09PSBpbmRleDtcblx0ICB9KTtcblx0ICByZXR1cm4gZmluYWxBdXRvQ2Zncztcblx0fVxuXHRmdW5jdGlvbiByZW1vdmVBdXRvQ2Znc0Zyb21WdChjb25maWdzKXtcblx0ICBpZiggdXRpbEFycmF5LmlzQXJyYXkoY29uZmlncykpe1xuXHQgICAgcmV0dXJuIGNvbmZpZ3MuZmlsdGVyKGZ1bmN0aW9uKGNvbmZpZyl7XG5cdCAgICAgIHJldHVybiBjb25maWcuX3Z0ID09PSB2b2lkIDA7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIFtdO1xuXHR9XG5cdGZ1bmN0aW9uIGZvcm1hdFNlbGVjdG9yKHNlbGVjdG9yKXtcblx0ICBpZigvXlsuI10vLnRlc3Qoc2VsZWN0b3IpKXtcblx0ICAgIHJldHVybiBzZWxlY3Rvcjtcblx0ICB9ZWxzZXtcblx0ICAgIHJldHVybiBzZWxlY3RvciA/ICcuJyArIHNlbGVjdG9yIDogJyc7XG5cdCAgfVxuXHR9XG5cdGZ1bmN0aW9uIGdldFRyYWNrQ29uZmlnQnlQYXRoKHBhdGgpe1xuXHQgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgdmFyIGZpbmFsUGF0aCA9IHBhdGggfHwgcGFnZUluc3RhbmNlLnJvdXRlO1xuXHQgIHZhciBmdWxsTG93Q29kZUNvbmZpZyA9IGFwbHVzLl9hcGx1c192dF9jZmcgfHwgYXBsdXMuX2FwbHVzX3RyYWNraW5nX2NmZztcblx0ICB2YXIgYXV0b0V4cEFyciA9IFtdO1xuXHQgIHZhciBhdXRvQ2xrQXJyID0gW107XG5cdCAgaWYgKGZ1bGxMb3dDb2RlQ29uZmlnICYmIGZ1bGxMb3dDb2RlQ29uZmlnLnBhZ2VzKXtcblx0ICAgIGVhY2goZnVsbExvd0NvZGVDb25maWcucGFnZXMsIGZ1bmN0aW9uKHBjKSB7XG5cdCAgICAgIGFwbHVzLnNldFBhZ2VOYW1lKHsgcGFnZU5hbWU6IHBjLnNwbUIsIGV4dHJhUGFyYW1zOiBwYy5leHRyYVBhcmFtcyB9LCBwYy5tYXRjaFVybCk7XG5cdCAgICAgIGlmIChwYy5tYXRjaFVybCA9PT0gZmluYWxQYXRoKSB7XG5cdCAgICAgICAgZWFjaChmdWxsTG93Q29kZUNvbmZpZy5wb2ludHMsIGZ1bmN0aW9uKHApe1xuXHQgICAgICAgICAgaWYgKHBjLnNwbUIgPT09IHAuc3BtQikge1xuXHQgICAgICAgICAgICBpZiAocC50cmFja2VyVHlwZSA9PT0gXCJleHBvc3VyZVwiKSB7IFxuXHQgICAgICAgICAgICAgIGF1dG9FeHBBcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBmb3JtYXRTZWxlY3RvcihwLnNlbGVjdG9yKSxcblx0ICAgICAgICAgICAgICAgICdwb3NpdGlvblNlbGVjdG9yJzogcC5wb3NpdGlvblNlbGVjdG9yLFxuXHQgICAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuXHQgICAgICAgICAgICAgICAgJ3Byb3BzJzogcC5wcm9wcyxcblx0ICAgICAgICAgICAgICAgICdzcG1CJzogcC5zcG1CLFxuXHQgICAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG5cdCAgICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcblx0ICAgICAgICAgICAgICAgICdjdXN0b21BcmdzJzogcC5jdXN0b21BcmdzLFxuXHQgICAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBhdXRvQ2xrQXJyLnB1c2goe1xuXHQgICAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogZm9ybWF0U2VsZWN0b3IocC5zZWxlY3RvciksXG5cdCAgICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG5cdCAgICAgICAgICAgICAgICAncHJvcHMnOiBwLnByb3BzLCBcblx0ICAgICAgICAgICAgICAgICdzcG1CJzogcC5zcG1CLFxuXHQgICAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG5cdCAgICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcblx0ICAgICAgICAgICAgICAgICdjdXN0b21BcmdzJzogcC5jdXN0b21BcmdzLFxuXHQgICAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcblx0ICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgIFxuXHQgICAgICAgIGlmIChmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fZXhkYXRhICYmIHR5cGVvZiBmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fZXhkYXRhID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScsIGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEpO1xuXHQgICAgICAgIH1cblx0ICBcblx0ICAgICAgICBpZiAoZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSAmJiB0eXBlb2YgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1jcHZkYXRhJywgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9ICAgICAgXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIEVYUDogYXV0b0V4cEFycixcblx0ICAgIENMSzogYXV0b0Nsa0FyclxuXHQgIH07XG5cdH07XG5cdGV4cG9ydHMuZ2V0VHJhY2tDb25maWdCeVBhdGggPSBnZXRUcmFja0NvbmZpZ0J5UGF0aDtcblx0ZXhwb3J0cy5nZXRUcmFja0NvbmZpZ0J5UG9pbnRDc3NTZWxlY3RvciA9IGZ1bmN0aW9uKGNzc1NlbGVjdG9yLHR5cGUscGF0aCl7XG5cdCAgdmFyIHRyYWNrQ29uZmlnID0gZ2V0VHJhY2tDb25maWdCeVBhdGgocGF0aClbdHlwZV0gfHwgW107XG5cdCAgdmFyIG1hdGNoZWRDb25maWcgPSBudWxsO1xuXHQgIGVhY2godHJhY2tDb25maWcsZnVuY3Rpb24oY29uZmlnSXRlbSl7XG5cdCAgICBpZihjb25maWdJdGVtLmNzc1NlbGVjdG9yID09PSBjc3NTZWxlY3Rvcil7XG5cdCAgICAgIG1hdGNoZWRDb25maWcgPSBjb25maWdJdGVtO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBtYXRjaGVkQ29uZmlnO1xuXHR9O1xuXHRleHBvcnRzLnZ0MmF1dG9FdmVudCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciB2dF9jZmcgPSBhcGx1cy5fYXBsdXNfdnRfY2ZnIHx8IGFwbHVzLl9hcGx1c190cmFja2luZ19jZmc7XG5cdCAgaWYgKHZ0X2NmZyAmJiB2dF9jZmcucGFnZXMpe1xuXHQgICAgdmFyIG1hdGNoZWRDb25maWcgPSBnZXRUcmFja0NvbmZpZ0J5UGF0aCgpO1xuXHQgICAgdmFyIG9sZF9hdXRvX2V4cF9hcnIgPSByZW1vdmVBdXRvQ2Znc0Zyb21WdChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKSk7XG5cdCAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnLCBtZXJnZUF1dG9DZmdzKG9sZF9hdXRvX2V4cF9hcnIsbWF0Y2hlZENvbmZpZy5FWFApKTtcblx0ICAgIHZhciBvbGRfYXV0b19jbGtfYXJyID0gcmVtb3ZlQXV0b0NmZ3NGcm9tVnQoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykpO1xuXHQgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJywgbWVyZ2VBdXRvQ2ZncyhvbGRfYXV0b19jbGtfYXJyLG1hdGNoZWRDb25maWcuQ0xLKSk7XG5cdCAgfVxuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDEwMiAqLyxcbi8qIDEwMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogYXBsdXMgQVBJXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0XG5cdC8qKlxuXHQgKiDlsIblkI7nu63nmoRpbml05Yqo5L2c6YO95YGa5oiQ5o+S5Lu277yM55uu5YmN5Y+q5pyJd2hlcmVfdG9fc2VuZHB25LiA6aG5XG5cdCAqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgcGx1Z2luc1xuXHQgKiAgIGNvbnRleHRcblx0ICogfVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICpcblx0ICovXG5cdGV4cG9ydHMucnVuID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuXHQgIHJlZHVjZXIucnVuKHtcblx0ICAgIHBsdWdpbnM6IG9wdHMucGx1Z2lucyxcblx0ICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuXHQgIH0sIHtcblx0ICAgIGNvbmZpZzoge30sXG5cdCAgICB1c2VyZGF0YToge30sXG5cdCAgICBwdWJzdWJUeXBlOiAnYXBsdXNpbml0Jyxcblx0ICAgIG1lc3NhZ2VGblF1ZXVlOiBbXSxcblx0ICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcblx0ICB9LCBmdW5jdGlvbiAoY3R4KSB7XG5cdCAgICB2YXIgbXNncyA9IFsnYXBsdXNJbml0Q29udGV4dCcsIGN0eF07XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuXHQgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhjdHgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMTA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFwbHVzX21pbmlfYmFzaWNcblx0ICog5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcENvbmZpZywgYXBsdXNfY29uZmlnKSB7XG5cdCAgdmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0ICAvLyByZXF1aXJlKCdAdXRpbHMvZGVidWcnKS5pc0RlYnVnQXBsdXModHJ1ZSk7XG5cdFxuXHQgIHZhciB1dGlsUHVic3ViID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSk7XG5cdCAgLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHQgIHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdCAgdWxvZygpLnNldERlYnVnKCEhKGFwcENvbmZpZyAmJiB0eXBlb2YgYXBwQ29uZmlnID09ICdvYmplY3QnICYmIGFwcENvbmZpZy5tZXRhSW5mby5ERUJVRykpO1xuXHQgIHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0ICB2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdCAgdmFyIGFwbHVzaW5pdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKTtcblx0ICBtaW5pLmluaXRJc1RCKCk7XG5cdFxuXHQgIGlmICh0eXBlb2YgYXBwQ29uZmlnID09PSAnb2JqZWN0Jykge1xuXHQgICAgaWYgKGFwcENvbmZpZy5zaXRlSWQpIHtcblx0ICAgICAgYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zaXRlSWQgPSBhcHBDb25maWcuc2l0ZUlkO1xuXHQgICAgfVxuXHQgICAgYXBsdXNfY29uZmlnLm1ldGFJbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgYXBsdXNfY29uZmlnLm1ldGFJbmZvLCBhcHBDb25maWcubWV0YUluZm8pO1xuXHQgIH1cblx0XG5cdCAgdmFyIFJVTk5JTkcgPSAncnVubmluZyc7XG5cdCAgdmFyIENPTVBMRVRFID0gJ2NvbXBsZXRlJztcblx0ICB2YXIgYXBsdXNTdGF0dXMgPSBbJ2FwbHVzUmVhZHknLCBSVU5OSU5HXTtcblx0XG5cdCAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cdFxuXHQgIGFwbHVzaW5pdC5ydW4oe1xuXHQgICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG5cdCAgICBjb250ZXh0OiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjb25maWdfcHZfY29udGV4dCA9IHtcblx0ICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuXHQgICAgICB9O1xuXHQgICAgICB2YXIgUExVR0lOU19QViA9IFtdO1xuXHQgICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcblx0ICAgICAgICBpZiAodi5uYW1lID09PSAnYXBsdXNfbG9nX2luamVjdCcgJiYgdi5jb25maWcgJiYgdi5jb25maWcucGx1Z2lucykge1xuXHQgICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG5cdCAgICAgICAgICBlYWNoKFBMVUdJTlNfUFYsIGZ1bmN0aW9uICh2KSB7XG5cdCAgICAgICAgICAgIGNvbmZpZ19wdl9jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZztcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb25maWdfcHZfY29udGV4dCwge1xuXHQgICAgICAgIGFwbHVzX2NvbmZpZzogYXBsdXNfY29uZmlnXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIHVsb2coKS52KCdBUExVUyBJTklUIFNVQ0NFU1MnKTtcblx0ICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7Zcblx0ICAgIGFwbHVzU3RhdHVzWzFdID0gQ09NUExFVEU7XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKGFwbHVzU3RhdHVzKTtcblx0ICB9KTtcblx0XG5cdCAgLy8gcmV0dXJuIHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUUpO1xuXHQgIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwbHVzX21pbmlfY2xvdWRfdW0uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBhZGI5NjQ1ZTcwNDc3OGIyNDMxNSIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIGFwbHVzX21pbmlfY2xvdWQuanNcbiAqIOS6keS4iuWwj+eoi+W6j+aooeWdl+WMlueahGFwbHVzSnPlhaXlj6NcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xucmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuaW5pdEdsb2JhbCgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnKSB7XG4gIHZhciBhcGx1c19jb25maWcgPSByZXF1aXJlKCcuL2FwbHVzX21pbmlfY2xvdWRfdW1fY29uZmlnJyk7IFxuICByZXR1cm4gcmVxdWlyZSgnLi9hcGx1c19taW5pX2Jhc2ljX3VtJykoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cYXBsdXPnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG52YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblxudmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xudmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXG52YXIgX2FwbHVzX2NvbnRleHQ7XG52YXIgaXNXZWIgPSBmYWxzZTtcbnRyeSB7XG4gIGlmICh3aW5kb3cpIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcbiAgICBpc1dlYiA9IHRydWU7XG4gIH1cbn0gY2F0Y2ggKGUpIHtcbiAgX2FwbHVzX2NvbnRleHQgPSB7fTtcbiAgaXNXZWIgPSBmYWxzZTtcbn1cblxuZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG59O1xuXG5leHBvcnRzLmlzV2ViID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3c7XG59O1xuXG5leHBvcnRzLmluaXRHbG9iYWwgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICBpZiAoY29udGV4dCkge1xuICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHtcbiAgICAgIHY6IDEsXG4gICAgICBhcGx1czoge30sXG4gICAgICBhcGx1c19xdWV1ZTogW11cbiAgICB9O1xuICB9XG4gIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgaWYgKGlzV2ViKSB7XG4gICAgdHJ5IHtcbiAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCBfYXBsdXNfY29udGV4dC5nb2xkbG9nIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG4gICAgICB2YXIgX2dvbGRsb2dfcXVldWUgPSAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IFtdKSk7XG4gICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBbXSkpO1xuICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcbiAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlO1xuICB9XG4gIFxuICBfYXBsdXNfY29udGV4dC5hcGx1cyA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2cgPSBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuICBcbiAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xufTtcblxudmFyIGdldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoa2V5ID09PSBBUExVUyB8fCBrZXkgPT09IEdPTERMT0cpIHtcbiAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcbiAgICBpZiAoIWcpIHtcbiAgICAgIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gPSBfYXBsdXNfY29udGV4dFtHT0xETE9HXSA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZztcbiAgfVxuICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG4gIHZhciBhcGx1c19xdWV1ZSA9IEFQTFVTX1FVRVVFO1xuICBpZiAoa2V5ID09PSBhcGx1c19xdWV1ZSB8fCBrZXkgPT09IGdvbGRsb2dfcXVldWUpIHtcbiAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcbiAgICBpZiAoIXEpIHtcbiAgICAgIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gPSBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXSA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gcTtcbiAgfVxufTtcbmV4cG9ydHMuZ2V0R2xvYmFsVmFsdWUgPSBnZXRHbG9iYWxWYWx1ZTtcblxuZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIF9hcGx1c19jb250ZXh0W2tleV0gPSB2YWx1ZTtcbn07XG5cbi8qKlxuICog6I635Y+WYXBsdXPlhoXpg6jlj5jph49cbiAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG4gKiBAcmV0dXJuIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXVxuICovXG52YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuICB2YXIgdjtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG4gICAgdiA9IGFwbHVzW2tleV07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2ID0gJyc7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIHY7XG4gIH1cbn07XG5leHBvcnRzLmdldEdvbGRsb2dWYWwgPSBnZXRHb2xkbG9nVmFsO1xuLyoqXG4gKiDorr7nva5hcGx1c+WGhemDqOWPmOmHj1xuICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcbiAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xudmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICB2YXIgZiA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBhcGx1c1trZXldID0gdmFsO1xuICAgICAgZiA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZiA9IGZhbHNlO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBmO1xuICB9XG59O1xuZXhwb3J0cy5zZXRHb2xkbG9nVmFsID0gc2V0R29sZGxvZ1ZhbDtcblxuLyoqXG4gKiDojrflj5ZjbGllbnRJbmZvKOa1j+iniOWZqOOAgeiuvuWkh+etieS/oeaBrylcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgdmVyc2lvbjogMixcbiAqICAgdWFfaW5mbzoge1xuICogICAgIGI6IFwiY2hyb21lNThcIlxuICogICAgIGlzbTogXCJtYWNcIlxuICogICAgIG14OiBcIjM2MGVlXCJcbiAqICAgICBvOiBcIm1hY1wiXG4gKiAgICAgcDogMVxuICogICAgIHM6IFwiMTkyMHgxMDgwXCJcbiAqICAgICB3OiBcIndlYmtpdFwiXG4gKiAgIH1cbiAqIH1cbiAqL1xuZXhwb3J0cy5nZXRDbGllbnRJbmZvID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRHb2xkbG9nVmFsKCdfYXBsdXNfY2xpZW50JykgfHwge307XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEFQTFVTID0gJ2FwbHVzJztcbnZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xudmFyIEFQTFVTX1FVRVVFID0gQVBMVVMgKyAnX3F1ZXVlJztcbnZhciBHT0xETE9HX1FVRVVFID0gR09MRExPRyArICdfcXVldWUnO1xudmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xudmFyIE1FVEFfSU5GTyA9ICdNZXRhSW5mbyc7XG52YXIgQVBQRU5EX01FVEFfSU5GTyA9ICdhcHBlbmQnICsgTUVUQV9JTkZPO1xudmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcbnZhciBIVFRQID0gJ2h0dHAnO1xudmFyIF9wdWJzdWIgPSAnX3B1YnN1Yic7XG5cbnZhciBkZWZhdWx0Q29kZSA9ICdvdGhlcic7XG52YXIgQ0xLID0gJzIxMDEnO1xudmFyIEVYUCA9ICcyMjAxJztcbnZhciBJTVBFWFAgPSAnMjIwMic7XG52YXIgT1RIRVIgPSAnMTk5OTknO1xudmFyIEFQUF9TSE9XID0gJzEwMjMnO1xudmFyIEFQUF9ISURFX09SX1VOTE9BRCA9ICcxMDEwJzsgXG52YXIgU0VTU0lPTl9JTlRFUlZBTCA9IDMwMDAwOyAvLyBzZXNzaW9uSWTov4fmnJ/ml7bpl7QgMzDnp5JcbnZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xudmFyIEVLVlMgPSAnZWt2cyc7XG52YXIgRVZFTlRfTUFYX0NPVU5UID0gMTAwMDA7IC8vIOacrOWcsOacgOWkmuWtmOWCqOi/meS5iOWkmmVrduaVsOaNrlxudmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcbnZhciBNQVhfUVVFVUVfQ09VTlQgPSAxOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcbnZhciBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwgPSAzMDAwOyAvLyBla3bpu5jorqTlj5HpgIHpl7TpmpTml7bpl7Q6IDPnp5JcbnZhciBQQUdFX1NUQVJUID0gJyQkX3BhZ2Vfc3RhcnQnO1xudmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcbnZhciBBUFBfU1RBUlQgPSAnJCRfYXBwX3N0YXJ0JztcbnZhciBBUFBfRU5EID0gJyQkX2FwcF9lbmQnO1xudmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcbnZhciBJTVBSSU5UID0gJ2ltcHJpbnQnO1xudmFyIElEX1RZUEUgPSAnYXBsdXMtaWR0eXBlJztcbnZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xudmFyIFBBR0VfQ09ORklHID0gJ2FwbHVzLXBhZ2UtY29uZmlnJzsgXG52YXIgQVBMVVNfU0tJUF9BUFZfUlVMRVMgPSAnYXBsdXMtc2tpcC1hcHYtcnVsZXMnO1xudmFyIEFQTFVTX1BWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC12JztcbnZhciBBUExVU19FS1ZfRE9NQUlOID0gJ2FwbHVzLXJob3N0LWcnO1xudmFyIEFVVE9fR0VUX09QRU5JRCA9ICdhdXRvR2V0T3BlbmlkJztcbm1vZHVsZS5leHBvcnRzID0ge1xuICBQQUdFX0VOVEVSOiAnUEFHRV9FTlRFUicsXG4gIENVUlJFTlRfUEFHRV9DT05GSUc6ICdDVVJSRU5UX1BBR0VfQ09ORklHJyxcbiAgX0FOT05ZX0lEOiAnX2Fub255X2lkJyxcbiAgX0RFVl9JRDogJ19kZXZfaWQnLFxuICBfVVNFUl9JRDogJ191c2VyX2lkJyxcbiAgREVGQVVMVF9DT0RFOiBkZWZhdWx0Q29kZSxcbiAgT1RIRVI6IE9USEVSLFxuICBFVkVOVF9NQVA6IHtcbiAgICAnMjEwMSc6ICdjbGljaycsXG4gICAgJzIyMDEnOiAnZXhwb3N1cmUnLFxuICAgICcyMjAyJzogJ2V4cG9zdXJlJyxcbiAgICAnMTk5OTknOiBkZWZhdWx0Q29kZSxcbiAgICAnMTAyMyc6ICdhcHBfc2hvdycsXG4gICAgJzEwMTAnOiAnYXBwX2hpZGVfb3JfdW5sb2FkJ1xuICB9LFxuICBFVkVOVF9JRF9NQVA6IHtcbiAgICAnRVhQJzogRVhQLFxuICAgICdJTVBFWFAnOiBJTVBFWFAsXG4gICAgJ0NMSyc6IENMSyxcbiAgICAnT1RIRVInOiBPVEhFUixcbiAgICAnU0hPVyc6IEFQUF9TSE9XLFxuICAgICdIX09SX1UnOiBBUFBfSElERV9PUl9VTkxPQURcbiAgfSxcbiAgQVBMVVM6IEFQTFVTLFxuICBHT0xETE9HOiBHT0xETE9HLFxuICBVTlNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnVuc3Vic2NyaWJlJyxcbiAgU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuc3Vic2NyaWJlJyxcbiAgUFVCTElTSDogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnB1Ymxpc2gnLFxuICBDQUNIRV9QVUJTOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuY2FjaGVQdWJzJyxcbiAgQVBMVVNfVU5JVkVSU0FMOiBBUExVUyArICdfdW5pdmVyc2FsJyxcbiAgQVBMVVNfUVVFVUU6IEFQTFVTX1FVRVVFLFxuICBHT0xETE9HX1FVRVVFOiBHT0xETE9HX1FVRVVFLFxuICBDT01QTEVURTogJ2NvbXBsZXRlJyxcbiAgUFZfQ09ERTogJzIwMDEnLFxuICBFWFBfQ09ERTogRVhQLFxuICBDTEtfQ09ERTogQ0xLLFxuICBPVEhFUl9DT0RFOiBPVEhFUixcbiAgQ0xLOiAnQ0xLJyxcbiAgRVhQOiAnRVhQJyxcbiAgLy8gT1RIRVI6ICdPVEhFUicsXG4gIFNQTV9DTlQ6ICdzcG0tY250JyxcbiAgU1BNX1VSTDogJ3NwbS11cmwnLFxuICBTUE1fUFJFOiAnc3BtLXByZScsXG4gIE1XX0NIQU5HRV9QVjogTVdfQ0hBTkdFICsgJ19wdicsXG4gIE1XX0NIQU5HRV9ISkxKOiBNV19DSEFOR0UgKyAnX2hqbGonLFxuICBIVFRQOiBIVFRQICsgJzonLFxuICBIVFRQUzogJ2h0dHBzOicsXG4gIEFQUEVORF9NRVRBX0lORk86IEFQUEVORF9NRVRBX0lORk8sXG4gIFNFVF9NRVRBX0lORk86IFNFVF9NRVRBX0lORk8sXG4gIEFQTFVTX0FQUEVORF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgQVBQRU5EX01FVEFfSU5GTyxcbiAgQVBMVVNfU0VUX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBTRVRfTUVUQV9JTkZPLFxuICBQVklEOidwdmlkJyxcbiAgQVBMVVNfTE9HX1BJUEU6J2FwbHVzLWxvZy1waXBlJyxcbiAgb3BlbkFQSXM6IFtcbiAgICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJywgXG4gICAgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJywgJ3JlcXVlc3RSZW1vdGVDb25maWcnLFxuICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbiAgICAndXBkYXRlUGFnZVByb3BlcnRpZXMnLCBcbiAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcbiAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuICAgICd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLFxuICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuICAgICdzZXRQYWdlTmFtZScsICdnZXRFbGVtZW50U1BNJywgJ3JlY29yZEFwcExpbmsnXG4gIF0sXG4gIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG4gIFNFU1NJT05fUEFVU0VfVElNRTogJ3Nlc3Npb25fcGF1c2VfdGltZScsXG4gIElNUFJJTlQ6ICdpbXByaW50JyxcbiAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcbiAgTUFYX0VWRU5USURfTEVOR1RIOiAxMjgsXG4gIE1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIOiAyNTYsXG4gIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG4gIEZBSUxFRF9SRVFVRVNUUzogJ2ZhaWxlZF9yZXF1ZXN0cycsXG4gIFJFUVVFU1RTOiAncmVxdWVzdHMnLFxuICBTSEFSRVM6ICdzaGFyZXMnLFxuICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuICBFS1ZTOiBFS1ZTLFxuICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcbiAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcbiAgTUFYX1FVRVVFX0NPVU5UOiBNQVhfUVVFVUVfQ09VTlQsXG4gIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuICBQQUdFX0VORDogUEFHRV9FTkQsXG4gIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuICBBUFBfRU5EOiBBUFBfRU5ELFxuICBVU0VSX1BST0ZJTEVfS0VZOiBVU0VSX1BST0ZJTEVfS0VZLFxuICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG4gIElNUFJJTlQ6IElNUFJJTlQsXG4gIElEX1RZUEU6IElEX1RZUEUsXG4gIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5JyxcbiAgLy8gVVRNX0tFWVM6IFsndXRtX3NvdXJjZScsICd1dG1fY29udGVudCcsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybSddLFxuICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG4gIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFUyxcbiAgQVBMVVNfUFZfRE9NQUlOOiBBUExVU19QVl9ET01BSU4sXG4gIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU4sXG4gIEFQTFVTX0lNUFJJTlRfVkVSU0lPTjogJ0FQTFVTX0lNUFJJTlRfVkVSU0lPTicsXG4gIEFQTFVTX1JFTU9URV9DT05GSUc6ICdBUExVU19SRU1PVEVfQ09ORklHJyxcbiAgUkFOSzogJ2Vrdl9yYW5rJyxcbiAgV0VCX0VWRU5UX1NVRkZJWDogJy93ZWJfbG9ncycsXG4gIFdFQl9QQ19QVl9TVUZGSVg6ICd2LmdpZicsXG4gIFdFQl9XQVBfUFZfU1VGRklYOiAnbS5naWYnLFxuICBQQUdFX0xFQVZFOiAnJCRfcGFnZV9sZWF2ZScsXG4gIEFQTFVTX0FVVE9UUkFDS19FTkFCTEVEOiAnYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWQnLFxuICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEU6ICdhcGx1cy1hdXRvdHJhY2stZW5hYmxlZC1yZW1vdGUnLFxuICBBUExVU19BVVRPVFJBQ0tfQ09ORklHOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZycsXG4gIEFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZy1yZW1vdGUnLFxuICBBUExVU19ESVNBQkxFX0FVVE9FVkVOVDogJ2FwbHVzLWRpc2FibGUtYXV0b2V2ZW50JyxcbiAgQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQnLFxuICBBUExVU19ESVNBQkxFX0FVVE9QVjogJ2FwbHVzLWRpc2FibGUtYXB2JyxcbiAgQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hcHYtcmVtb3RlJyxcbiAgQVBMVVNfREVWSUNFX0VOQUJMRTogJ2FwbHVzLWRldmljZS1lbmFibGUnLFxuICBQRVJGT1JNQU5DRV9XQVJJTkc6ICckJF9wZXJmX3dhcm5pbmcnLFxuICBTVEFSVF9JRDogJ1NUQVJUX0lEJyxcbiAgQVVUT19HRVRfT1BFTklEOiBBVVRPX0dFVF9PUEVOSURcbn07XG5cbi8vIHZhciBvcGVuQVBJcyA9IFtcbi8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG4vLyAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbi8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcbi8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG4vLyAgIFVQREFURSArICdQYWdlVXRwYXJhbScsXG4vLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuLy8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcbi8vICAgJ3NraXBQYWdlJ1xuLy8gXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgXCJtZXRhSW5mb1wiOiB7XG4gICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG4gICAgXCJhcGx1cy1yaG9zdC1nXCI6IFwiXCIsXG4gICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG4gICAgXCJhcGx1cy1kaXNhYmxlLWF1dG9ldmVudFwiOiBmYWxzZSxcbiAgICBcImFwbHVzLWRpc2FibGUtYXB2XCI6IGZhbHNlLFxuICAgIFwiYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWRcIjogZmFsc2UsXG4gICAgXCJhcGx1cy1kZXZpY2UtZW5hYmxlXCI6IHRydWUsXG4gICAgXCJzZGtJZFwiOiBcImFwbHVzX21pbmlfY2xvdWRfdW1cIlxuICB9LFxuICBcImdsb2JhbENvbmZpZ1wiOiB7XG4gICAgXCJpc0FsaVwiOiBmYWxzZSxcbiAgICBcImlzRGVjb2RlVXJsXCI6IHRydWUsXG4gICAgXCJBUExVU19RVUVVRVwiOiBcImFwbHVzX3F1ZXVlXCIsXG4gICAgXCJFVEFHX1NUT1JBR0VfS0VZXCI6IFwiX19FVEFHX19DTkFfX0lEX19cIixcbiAgICBcInNjcmlwdF9uYW1lXCI6IFwiYXBsdXNfbWluaS5qc1wiLFxuICAgIFwiYXBsdXMtZ2xvYmFsZGF0YVwiOiB7fSxcbiAgICBcImx2ZXJcIjogXCIxLjkuMjJcIlxuICB9LFxuICBcInBsdWdpbnNcIjogW1xuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImluamVjdF9hcHBfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImluamVjdF9wYWdlX3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvaW5qZWN0X3BhZ2VfdW0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwicHVic3ViXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19tZXRhX2luamVjdFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19tZXRhX2luamVjdF9taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2xvZ19pbmplY3RcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG4gICAgICBdLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcInBsdWdpbnNcIjoge1xuICAgICAgICAgIFwicHZcIjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9ldGFnX21pbmkuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlbl90b19zZW5kcHZcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanMnKSxcbiAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICAgICAgICAgIFwiYXBsdXNXYWl0aW5nXCI6IFwiXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlcmVfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hlcmVfdG9fc2VuZF9taW5pX3VtLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZFwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vd2hhdF90b19zZW5kX21pbmlfY2xvdWQuanMnKSxcbiAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICAgICAgICAgIFwibG9nZGF0YVRvVXRcIjoge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfbWluaS5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW1xuICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcbiAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiY2FuX3RvX3NlbmRwdlwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi9jYW5fdG9fc2VuZHB2X21pbmkuanMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgXCJoamxqXCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzJyksXG4gICAgICAgICAgICAgIFwiZGVwc1wiOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19oamxqX3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYXBpXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX2FwaV9taW5pLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImFwbHVzX2xvZ19pbmplY3RcIixcbiAgICAgICAgXCJhcGx1c19tZXRhX2luamVjdFwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19hY1wiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9jbGsuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfZXhwLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIm9wZW5fYXBpXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvb3Blbl9hcGkuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfY2xpZW50XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX2NsaWVudF9taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX21pbmlfc3BtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvbWluaV9zcG0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9yZXBvcnRfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbWluaV9yZXBvcnRfdW0uanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwibWV0YV9xdWV1ZVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfcXVldWUvbWV0YV9xdWV1ZS5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcImlzT3BlbkFwaVwiOiB0cnVlXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX3F1ZXVlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qcycpLFxuICAgICAgXCJjb25maWdcIjoge1xuICAgICAgICBcImlzT3BlbkFwaVwiOiB0cnVlXG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhdXRvX3RyYWNrZXJfdW1cIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfdW0uanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuICAgICAgXVxuICAgIH1cbiAgXVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Nsb3VkX3VtX2NvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtX25ldy5qc1xuICog5paw54mI6Ieq5Yqo6YeH6ZuG5bCP56iL5bqP5L+h5oGv55qE5o+S5Lu2IC0gYXBw5rOo5YWlXG4gKlxuICog6YCa6L+H6YeN5YaZd3jnmoRhcGnmnaXmqKHmi5/nlJ/lkb3lkajmnJ/vvIzku6XmraTnu5Xov4fkuInmlrnmoYbmnrblr7nnlJ/lkb3lkajmnJ/nmoTph43lhpnmnLrliLZcbiAqXG4gKiBBdXRob3JzOlxuICogICDogoblj4EgPHNpc2FuLnFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzL3V0aWxzJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgc2Vzc2lvbk1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3VtX3Nlc3Npb25fbWFuYWdlcicpO1xudmFyIGV2ZW50TWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vZXZlbnRNYW5hZ2VyJyk7XG52YXIgcmVxdWVzdFF1ZXVlID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0UXVldWUnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vY2FjaGUnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxNb25pdG9yID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxNb25pdG9yJyk7XG52YXIgdXRpbFJlbW90ZUNmZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUmVtb3RlQ2ZnJyk7XG52YXIgdW1VdGlscyA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vdXRpbHMnKTtcblxudmFyIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG5cbmZ1bmN0aW9uIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKSB7XG4gIHZhciBnbG9iYWxfYXJncyA9IHt9O1xuICBpZiAoc2NlbmUpIHtcbiAgICBnbG9iYWxfYXJncy5zY2VuZSA9IHNjZW5lO1xuICB9XG4gIGlmIChxdWVyeSAmJiBxdWVyeS5taW5pYXBwRGVidWdJZCkge1xuICAgIGdsb2JhbF9hcmdzLmRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZDtcbiAgfVxuICBmb3IgKHZhciBrIGluIHF1ZXJ5KSB7XG4gICAgaWYgKGsgPT09ICckJF9zaGFyZV91aWQnIHx8IGsuaW5kZXhPZignJCRfdXRtXycpID09PSAwKSB7XG4gICAgICBnbG9iYWxfYXJnc1trXSA9IHF1ZXJ5W2tdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ2xvYmFsX2FyZ3M7XG59XG5cbmZ1bmN0aW9uIHNlc3Npb25TdGFydChvcHRpb25zKSB7XG4gIGNhY2hlKCkubG9hZChmdW5jdGlvbigpe1xuICAgIHVsb2coKS53KCdjYWNoZSBpbml0IHN1Y2Nlc3MnKTtcbiAgICBpZiAob3B0aW9ucy5xdWVyeSAmJiBvcHRpb25zLnF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkICYmIG9wdGlvbnMucXVlcnkubWluaWFwcERlYnVnSWQgIT0gY2FjaGUoKS5nZXQoJ21pbmlhcHBEZWJ1Z0lkJykpIHtcbiAgICAgIGNhY2hlKCkuc2V0KCdtaW5pYXBwRGVidWdJZCcsIG9wdGlvbnMucXVlcnkubWluaWFwcERlYnVnSWQpO1xuICAgIH1cbiAgfSk7XG5cbiAgdmFyIG5ld09wdGlvbnMgPSB7fTtcbiAgdmFyIGRlZXBDbG9uZSA9IGNsb25lRGVlcChvcHRpb25zKTtcbiAgZm9yICh2YXIgaSBpbiBkZWVwQ2xvbmUpIHtcbiAgICBpZiAodHlwZW9mIGRlZXBDbG9uZVtpXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5ld09wdGlvbnMgPSB1dGlsRGFzaC5hc3NpZ24oZGVlcENsb25lW2ldLCBuZXdPcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGRlZXBDbG9uZVtpXSkge1xuICAgICAgICBuZXdPcHRpb25zW2ldID0gZGVlcENsb25lW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLmxvYWQoKTtcbiAgdmFyIGNiID0gZnVuY3Rpb24oKSB7XG4gICAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLkZBSUxFRF9SRVFVRVNUUykubG9hZCgpO1xuICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBmdW5jdGlvbigpIHtcbiAgICAgIHVsb2coKS5pKCdzZW5kIGZhaWxlZCByZXF1ZXN0IHF1ZXVlJyk7XG4gICAgfSk7XG4gIH07XG4gIHZhciBpc05ld1Nlc3Npb24gPSBzZXNzaW9uTWFuYWdlcigpLnJlc3VtZShuZXdPcHRpb25zKTtcbiAgdmFyIHNlc3Npb25JZCA9IHNlc3Npb25NYW5hZ2VyKCkuZ2V0Q3VycmVudFNlc3Npb25JZCgpO1xuICBldmVudE1hbmFnZXIoKS5zZXRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcbiAgaWYgKGlzTmV3U2Vzc2lvbikge1xuICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5SRVFVRVNUUykuc2VuZCgnJywge30sIGNiKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gc2Vzc2lvbkVuZCgpIHtcbiAgc2Vzc2lvbk1hbmFnZXIoKS5wYXVzZSgpO1xuICAvLyBhcHAgaGlkZeaXtuWPkemAgeW9k+WJjeivt+axgumYn+WIlyblpLHotKXpmJ/liJdcbiAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLkZBSUxFRF9SRVFVRVNUUykuc2VuZCgnJywge30sIGZ1bmN0aW9uKCkge1xuICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNhdmUoKTtcbiAgICBjYWNoZSgpLnNhdmUoKTtcbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBhZGFwdE15QXBwSGlkZShjYikge1xuICB0cnkge1xuICAgIGlmIChteSAmJiBteS5vblRpdGxlQ2xvc2VDbGljaykge1xuICAgICAgY2IgJiYgbXkub25UaXRsZUNsb3NlQ2xpY2soY2IpO1xuICAgIH1cbiAgfSBjYXRjaChlKXt9XG59XG5cbmZ1bmN0aW9uIGluamVjdEFwcCgpIHtcbiAgdmFyIGFwcEJhayA9IEFwcDtcbiAgdmFyIGFscmVhZHlTdGFydGVkID0gZmFsc2U7XG4gIHZhciBsYW51Y2hlZCA9IGZhbHNlO1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgY29udGV4dCA9IG1pbmkuZ2V0Q29udGV4dCgpOyAgIC8vIOW5s+WPsOS4iuS4i+aWh++8miB3eOOAgWRk44CBbXnjgIF0dOOAgXN3YW5cbiAgdmFyIGZuID0ge1xuICAgIG9uTGF1bmNoOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgbWluaS5pbml0SXNUQigpO1xuICAgICAgdmFyIHF1ZXJ5ID0gb3B0aW9ucyA/IG9wdGlvbnMucXVlcnkgOiB7fTtcbiAgICAgIHZhciByZWZlcnJlckluZm8gPSBvcHRpb25zID8gb3B0aW9ucy5yZWZlcnJlckluZm8gOiB7fTtcbiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvYmFzZS9hcHAvbGlmZS1jeWNsZS93eC5nZXRMYXVuY2hPcHRpb25zU3luYy5odG1sIyVFOCVCRiU5NCVFNSU5QiU5RSVFNiU5QyU4OSVFNiU5NSU4OCUyMHJlZmVycmVySW5mbyUyMCVFNyU5QSU4NCVFNSU5QyVCQSVFNiU5OSVBRlxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW1zIHtPYmplY3R9IHJlZmVycmVySW5mbyB7XG4gICAgICAgKiAgIGFwcElkICBzdHJpbmcgIOadpea6kOWwj+eoi+W6j+OAgeWFrOS8l+WPt+aIliBBcHAg55qEIGFwcElkXG4gICAgICAgKiAgIGV4dHJhRGF0YSAgT2JqZWN0ICDmnaXmupDlsI/nqIvluo/kvKDov4fmnaXnmoTmlbDmja7vvIxzY2VuZT0xMDM35oiWMTAzOOaXtuaUr+aMgVxuICAgICAgICogfVxuICAgICAgICovXG4gICAgICB1dGlsUmVtb3RlQ2ZnLmVuYWJsZUNmZyhjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRykpO1xuXG4gICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcblxuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB1dGlsRGFzaC5hc3NpZ24ocmVmZXJyZXJJbmZvLCB7XG4gICAgICAgICAgc2NlbmU6IG9wdGlvbnMuc2NlbmUgfHwgJydcbiAgICAgICAgfSldXG4gICAgICB9KTtcbiAgICAgIGlmIChxdWVyeSkge1xuICAgICAgICB2YXIgcXVlcnlEYXRhID0ge307IC8vIGNsb25lRGVlcChxdWVyeSk7XG4gICAgICAgIGlmIChxdWVyeS5zcG0pIHtcbiAgICAgICAgICBjdHguYXBsdXMuc3BtX29yaWduID0gcXVlcnkuc3BtO1xuICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEuc3BtO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNjZW5lKSB7XG4gICAgICAgICAgcXVlcnlEYXRhLnNjZW5lID0gb3B0aW9ucy5zY2VuZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocXVlcnkubWluaWFwcERlYnVnSWQpIHtcbiAgICAgICAgICB2YXIgZGVidWdJZCA9IHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkLnRyaW0oKTtcbiAgICAgICAgICB2YXIgZGVidWdJbmZvcyA9IGRlYnVnSWQuc3BsaXQoJ18nKTtcbiAgICAgICAgICBxdWVyeURhdGEgPSB1dGlsRGFzaC5hc3NpZ24ocXVlcnlEYXRhLCB7XG4gICAgICAgICAgICBhcGx1c193b3JrX25vOiBkZWJ1Z0luZm9zLmxlbmd0aCA+IDIgPyBkZWJ1Z0luZm9zWzFdIDogZGVidWdJZCxcbiAgICAgICAgICAgIGFwbHVzX3RyYWNrX2RlYnVnX2lkOiBkZWJ1Z0lkLFxuICAgICAgICAgICAgYXBsdXNfZmxhZzogJ2FwbHVzX3Rlc3QnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLy8gZGVsZXRlIHF1ZXJ5RGF0YS5taW5pYXBwRGVidWdJZDtcbiAgICAgICAgfVxuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCBxdWVyeURhdGFdXG4gICAgICAgIH0pO1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1jcHZkYXRhJywgcXVlcnlEYXRhXVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBvcHRpb25zLnNjZW5lKV1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBvblNob3c6IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICBBUFBfTEFVTkNIX1RZUEUgKz0gMTtcbiAgICAgIHZhciBxdWVyeSA9IG9wdHMgPyBvcHRzLnF1ZXJ5IDoge307XG4gICAgICB2YXIgc2NlbmUgPSBvcHRzID8gb3B0cy5zY2VuZSA6ICcnO1xuICAgICAgdmFyIHN0YXJ0X3R5cGU7IC8v5bCP56iL5bqP5ZCv5Yqo57G75Z6LIFxuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsICAvLyDmraTlpITpnIDopoHnlKhzZXRNZXRhSW5mb+WBmuimhuebluW8j+abtOaWsO+8jOWboOS4uuW+ruS/oeWwj+eoi+W6j+S8muaciee8k+WtmFxuICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZ2xvYmFsLWFyZ3MnLCBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSldXG4gICAgICB9KTtcbiAgICAgIGlmIChzY2VuZSkge1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCB7XG4gICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHtcbiAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuICAgICAgICAgIH1dXG4gICAgICAgIH0pO1xuICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB7XG4gICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChBUFBfTEFVTkNIX1RZUEUgPT09IDIpIHtcbiAgICAgICAgc3RhcnRfdHlwZSA9IDE7XG4gICAgICB9IGVsc2UgaWYgKEFQUF9MQVVOQ0hfVFlQRSA9PT0gMSkge1xuICAgICAgICBzdGFydF90eXBlID0gMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVsb2coKS53KCdBUFBfTEFVTkNIX1RZUEUgc2hvdWxkIG5vdCByZWFjaCB0aGlzLCB2YWx1ZSA9ICcgKyAgQVBQX0xBVU5DSF9UWVBFKTtcbiAgICAgIH1cbiAgICAgIHV0aWxzLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWFscmVhZHlTdGFydGVkKSB7XG4gICAgICAgICAgYWxyZWFkeVN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgIHNlc3Npb25TdGFydChvcHRzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBA5paH5b+DIDEu5Yiw6L6+546H5rWL6K+V6ZyA6KaBIDIu5Y2V5p2h5LqL5Lu255qEbG9naWTpnIDopoFcbiAgICAgICAgdXRpbE1vbml0b3IuY2xlYXIoKTtcbiAgICAgICAgdmFyIHN0YXJ0aWQgPSB1bVV0aWxzLmdldFN0YXJ0SWQoKTtcbiAgICAgICAgZXZlbnRNYW5hZ2VyKCkuc2V0U3RhcnRJZChzdGFydGlkKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBnbG9iYWxDb25maWcgPSBjdHguYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICAgIHZhciBwYWdlQ29kZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgICAgICAgY3R4Lm9uQXBwU2hvd1RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUFBfU1RBUlQsICdTSE9XJywge1xuICAgICAgICAgICAgICAvLyBzY2VuZTogc2NlbmUsXG4gICAgICAgICAgICAgIHN0YXJ0X3R5cGU6IHN0YXJ0X3R5cGUsXG4gICAgICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUNvZGUgfHwgb3B0cy5wYXRoIHx8ICctJyxcbiAgICAgICAgICAgICAgdXJsOiBvcHRzLnBhdGggfHwgJy0nXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIG9uSGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBnbG9iYWxDb25maWcgPSBjdHguYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuICAgICAgICB2YXIgcGFnZUNvZGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICAgIHZhciB1cmwgPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gY3R4Lm9uQXBwU2hvd1RpbWU7XG4gICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9FTkQsICdIX09SX1UnLCB7XG4gICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcbiAgICAgICAgICAgICAgZW5kX3R5cGU6IDAsXG4gICAgICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUNvZGUgfHwgdXJsIHx8ICctJyxcbiAgICAgICAgICAgICAgdXJsOiB1cmwgfHwgJy0nLFxuICAgICAgICAgICAgICBzdGFydF90aW1lOiBjdHgub25BcHBTaG93VGltZVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTsgICAgICAgICAgICBcbiAgICAgICAgfVxuICAgICAgICBhbHJlYWR5U3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICBzZXNzaW9uRW5kKCk7XG4gICAgICB9KTtcbiAgICAgIEFQUF9MQVVOQ0hfVFlQRSA9IDA7XG4gICAgfVxuICB9O1xuXG4gIGlmIChhcHBCYWsuYWZ0ZXIpIHtcbiAgICBhcHBCYWsuYWZ0ZXIoe1xuICAgICAgbWV0aG9kczoge1xuICAgICAgICBvbkxhdW5jaDogZnVuY3Rpb24odCkgeyAgICAgXG4gICAgICAgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTsgICAgIFxuICAgICAgICAgIGlmICh0LnRoaXNPYmplY3QpIHtcbiAgICAgICAgICAgIHQudGhpc09iamVjdC5hcGx1cyA9IGN0eC5hcGx1cztcbiAgICAgICAgICAgIHQudGhpc09iamVjdC5hcGx1c19xdWV1ZSA9IGN0eC5hcGx1c19xdWV1ZTtcbiAgICAgICAgICB9IFxuICAgICAgICAgIGZuLm9uTGF1bmNoKHQuYXJncyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uU2hvdzogZnVuY3Rpb24odCkge1xuICAgICAgICAgIGZuLm9uU2hvdyh0LmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBvbkhpZGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGZuLm9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgQXBwID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICBlLmFwbHVzID0gY3R4OyAvLyDms6jlhozlhajlsYDlj5jph49cbiAgICAgIGFwcEJhayhlKTtcbiAgICB9O1xuXG4gICAgY29udGV4dC5vbkFwcFNob3coZnVuY3Rpb24gKGUpIHtcbiAgICAgIC8vIOmAmui/h3d4LmdldExhdW5jaE9wdGlvbnNTeW5j5pa55rOV77yM5a6e546w5a+5b25MYW51Y2jnmoTnm5HlkKxcbiAgICAgIGlmKCFsYW51Y2hlZCkge1xuICAgICAgICAvLyDnmb7luqbkuI3mlK/mjIFnZXRMYXVuY2hPcHRpb25zU3luY++8jOeUqG9uU2hvd+eahG9wdGlvbnPku6Pmm79cbiAgICAgICAgdmFyIG9wdHMgPSB7fTtcbiAgICAgICAgaWYoaXNGdW5jdGlvbihjb250ZXh0LmdldExhdW5jaE9wdGlvbnNTeW5jKSkge1xuICAgICAgICAgIG9wdHMgPSBjb250ZXh0LmdldExhdW5jaE9wdGlvbnNTeW5jKCkgfHwge307XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb3B0cyA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgZm4ub25MYXVuY2gob3B0cyk7XG4gICAgICAgIGxhbnVjaGVkID0gdHJ1ZTtcbiAgICAgIH07XG4gICAgICBcbiAgICAgIC8vIG9uU2hvd1xuICAgICAgZm4ub25TaG93KGUpO1xuICAgIH0pLFxuXG4gICAgY29udGV4dC5vbkFwcEhpZGUoZnVuY3Rpb24gKCkge1xuICAgICAgLy8gb25IaWRlXG4gICAgICBmbi5vbkhpZGUoKTtcbiAgICB9KTtcblxuICAgIGFkYXB0TXlBcHBIaWRlKGZuLm9uSGlkZSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKFsnb2JqZWN0JywgJ2Z1bmN0aW9uJ10uaW5kZXhPZih0eXBlb2YgQXBwKSA+IC0xKSB7XG4gICAgICAgIGluamVjdEFwcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHJlc2V0Rm46IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiB7fSxcbiAgICAgIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6ICcnLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdID8gYXJndW1lbnRzWzJdIDogZnVuY3Rpb24gKCkgeyB9LFxuICAgICAgaSA9IGVbdF07XG4gICAgZVt0XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBycyA9IGkgJiYgaS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyAvLyBhcHDmnKzouqvnmoRmdW5jdGlvblxuICAgICAgaWYgKHJzKSB7XG4gICAgICAgIHJldHVybiBuLmNhbGwodGhpcywgcnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gdGFybzF444CBdGFybzJ4IOW/hemhu+WKoOS4qumineWklueahOivreWPpW4uYXBwbHnmiY3og73miafooYzvvIzmr5TlpoJ0cnljYXRjaO+8jOWPmOmHj+WjsOaYjuetie+8jOatpOWkhOWKoOS6hnJldHVyblxuICAgICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgIH07XG4gIH0sXG5cbiAgcmV3cml0ZUZuOiBmdW5jdGlvbihvYmosIG5hbWUsIG5ld0ZuKSB7XG4gICAgdmFyIG9sZEZuID0gb2JqW25hbWVdO1xuICAgIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBuZXdGbi5jYWxsKHRoaXMsIGUpO1xuICAgICAgb2xkRm4gJiYgb2xkRm4uY2FsbCh0aGlzLCBlKTtcbiAgICB9O1xuICB9LFxuXG4gIG9uQXBsdXNSZWFkeTogZnVuY3Rpb24gKGFwbHVzX3F1ZXVlLCBTVUJTQ1JJQkUsIGNhbGxiYWNrKSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IFNVQlNDUklCRSxcbiAgICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfSk7XG4gIH0sXG5cbiAgY2xpY2tfcHJveHk6IGZ1bmN0aW9uKG9wdGlvbnMsIG1ldGhvZCkgeyAgICBcbiAgICB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgdXRpbE9iamVjdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsT2JqZWN0Jyk7XG4gICAgdmFyIG9yaUZ1bmMgPSBvcHRpb25zW21ldGhvZF07XG4gICAgb3B0aW9uc1ttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gb3JpRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzWzBdO1xuICAgICAgaWYgKHV0aWxPYmplY3QuaXNPYmplY3QoZXZlbnQpICYmIGFwbHVzICYmIGFwbHVzLnJlY29yZCkge1xuICAgICAgICBhcGx1cy5yZWNvcmQoXCIkJF9hdXRvX2Nsa1wiLCBcIkNMS1wiLCB7fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG4gIH0sXG4gIFxuICBnZXRJbmRleEJ5UmVjdDogZnVuY3Rpb24oc2VsZWN0b3IsIHRhcmdldFJlY3QsIGNhbGxiYWNrKXtcbiAgICB2YXIgdGFyZ2V0SW5kZXggPSAtMTtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChzZWxlY3RvcikuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbihyZWN0KXtcbiAgICAgIGVhY2gocmVjdFswXSxmdW5jdGlvbihpdGVtLGluZGV4KXtcbiAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICAgIGlmKGl0ZW0ud2lkdGggPT09IHRhcmdldFJlY3Qud2lkdGggJiYgaXRlbS5oZWlnaHQgPT09IHRhcmdldFJlY3QuaGVpZ2h0ICYmIGl0ZW0ubGVmdCA9PT0gdGFyZ2V0UmVjdC5sZWZ0ICYmIGl0ZW0udG9wID09PSB0YXJnZXRSZWN0LnRvcCAmJiBpdGVtLnJpZ2h0ID09PSB0YXJnZXRSZWN0LnJpZ2h0ICYmIGl0ZW0uYm90dG9tID09PSB0YXJnZXRSZWN0LmJvdHRvbSl7XG4gICAgICAgICAgICB0YXJnZXRJbmRleCA9IGluZGV4O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YXJnZXRJbmRleCA9IGluZGV4O1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNhbGxiYWNrKHRhcmdldEluZGV4KTtcbiAgICB9KTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciBpc1BsYWluT2JqZWN0ID0gcmVxdWlyZSgnLi9pc1BsYWluT2JqZWN0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcbiAgaWYoaXNQbGFpbk9iamVjdChhcnIpICYmIGFyci5sZW5ndGggPT09IHZvaWQgMCl7XG4gICAgZm9yKHZhciBhdHRyIGluIGFycil7XG4gICAgICBpZihhcnIuaGFzT3duUHJvcGVydHkoYXR0cikpe1xuICAgICAgICBmbihhdHRyLGFyclthdHRyXSxhcnIpO1xuICAgICAgfVxuICAgIH1cbiAgfWVsc2Uge1xuICAgIHZhciBpO1xuICAgIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgcnMgPSBmbihhcnJbaV0sIGkpO1xuICAgICAgaWYgKHJzID09PSAnYnJlYWsnKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9lYWNoLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKXtcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBwcm90byA9IG9iajtcbiAgd2hpbGUgKE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90bykgIT09IG51bGwpIHtcbiAgICBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihwcm90byk7XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaikgPT09IHByb3RvO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1BsYWluT2JqZWN0LmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDlsI/nqIvluo/lt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnOyBcblxudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbmV4cG9ydHMuZ2V0Q3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0gfHwge307XG59O1xuXG5leHBvcnRzLmdldFJlZmVycmVyUGFnZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcbiAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xufTtcblxudmFyIF9pc1RiO1xuLy8g5Y2V6aG15rWL6K+V6ZyA6KaBXG5leHBvcnRzLnJlc2V0SXNUQiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBfaXNUYiA9IHZhbHVlO1xufTtcblxuXG5mdW5jdGlvbiBpbml0SXNUQiAoKSB7XG4gIGlmICh0eXBlb2YgX2lzVGIgPT09ICdib29sZWFuJykge1xuICAgIHJldHVybiBfaXNUYjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcbiAgICAgIHJlc3VsdCA9ICEhL0FsaUFwcC9pLnRlc3QoVUEpO1xuICAgICAgaWYgKC9BbGlBcHBcXCgoQVB8RGluZ1RhbGt8QU1BUHxVQ3xRVUFSSykvaS50ZXN0KFVBKSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICgvQWxpQXBwXFwoS0IvaS50ZXN0KFVBKSkge1xuICAgICAgICByZXN1bHQgPSAhIS9NaXN0Ly50ZXN0KFVBKTtcbiAgICAgIH1cbiAgICAgIC8vSURFLea3mOWunS3llYblrrblupTnlKjkuIvmnJ/mnJvov5Tlm550cnVlXG4gICAgICBpZigvQWxpcGF5SURFIFRhb2Jhby8udGVzdChVQSkpe1xuICAgICAgICByZXN1bHQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjdHguY2FuSVVzZSkpIHtcbiAgICAgICAgICByZXN1bHQgPSAhIWN0eC5jYW5JVXNlKCdjYWxsVXNlclRyYWNrJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIF9pc1RiID0gcmVzdWx0O1xuICAgIHJldHVybiByZXN1bHQ7ICBcbiAgfVxufVxuZXhwb3J0cy5pbml0SXNUQiA9IGluaXRJc1RCO1xuXG5mdW5jdGlvbiBpc1RCKCkge1xuICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gISFfaXNUYjsgIFxuICB9IGVsc2Uge1xuICAgIHJldHVybiBpbml0SXNUQigpO1xuICB9XG59XG5cbnZhciBnZXRQbGF0Zm9ybVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGN0eDogZGQsXG4gICAgICBwbGF0VHlwZTogJ2RkJyxcbiAgICAgIHNka1R5cGU6ICdkZG1wJyxcbiAgICAgIGxvZ0RvbWFpbjogJy9kZG1fbG9ncydcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGN0eDogbXksXG4gICAgICAgIHBsYXRUeXBlOiBteSAmJiBteS50YiA/ICd0YW9iYW8nIDogJ215JyxcbiAgICAgICAgc2RrVHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvbXAnIDogJ215bXAnLFxuICAgICAgICBsb2dEb21haW46ICcvYWxpcGF5bV9sb2dzJ1xuICAgICAgfTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGN0eDogdHQsXG4gICAgICAgICAgcGxhdFR5cGU6ICd0dCcsXG4gICAgICAgICAgc2RrVHlwZTogJ3R0bXAnLFxuICAgICAgICAgIGxvZ0RvbWFpbjogJy9ieXRlZGFuY2VtX2xvZ3MnXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGN0eDogc3dhbixcbiAgICAgICAgICAgIHBsYXRUeXBlOiAnYmQnLFxuICAgICAgICAgICAgc2RrVHlwZTogJ2JkbXAnLFxuICAgICAgICAgICAgbG9nRG9tYWluOiAnL2JhaWR1bV9sb2dzJ1xuICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY3R4OiB3eCxcbiAgICAgICAgICAgICAgcGxhdFR5cGU6ICd3eCcsXG4gICAgICAgICAgICAgIHNka1R5cGU6ICd3eG1wJyxcbiAgICAgICAgICAgICAgbG9nRG9tYWluOiAnL3d4bV9sb2dzJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBjdHg6IHt9LFxuICAgICAgICAgICAgICBwbGF0VHlwZTogJ1VOS05PVycsXG4gICAgICAgICAgICAgIHNka1R5cGU6ICdVTktOT1cnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmV4cG9ydHMuaXNUQiA9IGlzVEI7XG5leHBvcnRzLmdldFBsYXRmb3JtVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xufTtcbmV4cG9ydHMuZ2V0U2RrVHlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLnNka1R5cGU7XG59O1xuZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xufTtcbmV4cG9ydHMuZ2V0TG9nRG9tYWluID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5sb2dEb21haW47XG59O1xuXG5cbnZhciBIVFRQX1JFUVVFU1QgPSAnaHR0cFJlcXVlc3QnO1xudmFyIFJFUVVFU1QgPSAncmVxdWVzdCc7XG52YXIgRk4gPSBmdW5jdGlvbiAoKSB7fTtcblxuLyoqXG4gKiDlj5HpgIFHRVTor7fmsYJcbiAqIEBwYXJhbXMge1N0cmluZ30gdXJsXG4gKiBAcGFyYW1zIHtTdHJpbmd9IG9wdHMge1xuICogICB0aW1lb3V0OiA1MDAwXG4gKiB9XG4gKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sge1xuICogICB0aW1lb3V0OiA1MDAwXG4gKiB9XG4gKi9cbmV4cG9ydHMucmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIG9wdHMsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gIC8vIHZhciBjdHggPSB1dGlscy5nZXRDb250ZXh0KCkgfHwge307XG4gIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG4gIGlmICghaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spKSB7XG4gICAgZmFpbHVyZUNhbGxiYWNrID0gRk47XG4gIH1cbiAgaWYgKCFpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykpIHtcbiAgICBzdWNjZXNzQ2FsbGJhY2sgPSBGTjtcbiAgfVxuXG4gIHZhciBtZXRob2ROYW1lID0gb3B0cy5yZXF1ZXN0TWV0aG9kTmFtZSB8fCBSRVFVRVNUO1xuICB2YXIgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICBpZiAoIWlzRnVuY3Rpb24ocmVxKSAmJiBtZXRob2ROYW1lICE9PSBSRVFVRVNUKSB7XG4gICAgbWV0aG9kTmFtZSA9IFJFUVVFU1Q7XG4gICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihyZXEpICYmIG1ldGhvZE5hbWUgIT09IEhUVFBfUkVRVUVTVCkge1xuICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCfmlrnms5VcIicgKyBtZXRob2ROYW1lICsgJ1wi5LiN5a2Y5ZyoIScpO1xuICAgIG1ldGhvZE5hbWUgPSBIVFRQX1JFUVVFU1Q7XG4gICAgcmVxID0gY3R4W21ldGhvZE5hbWVdO1xuICB9XG5cbiAgdmFyIGRhdGFUeXBlID0gb3B0cyAmJiBvcHRzLmRhdGFUeXBlID8gb3B0cy5kYXRhVHlwZSA6ICdiYXNlNjQnO1xuICB2YXIgdGltZW91dCA9IG9wdHMgJiYgb3B0cy50aW1lb3V0ID8gb3B0cy50aW1lb3V0IDogMzAwMDtcbiAgdmFyIG1ldGhvZCA9IG9wdHMubWV0aG9kIHx8ICdHRVQnO1xuXG4gIHZhciBjYWxsYmFja2VkO1xuICAvLyDlpoLmnpx1cmzmsqHmnInluKbljY/orq7vvIzov5nph4zooaXlhYXlrozmlbRcbiAgdXJsID0gdXRpbC5maXhEb21haW4odXJsKTtcbiAgdmFyIG1zZztcbiAgaWYgKGlzRnVuY3Rpb24ocmVxKSkge1xuICAgIHZhciByZXFPcHRpb25zID0ge1xuICAgICAgdXJsOiB1cmwsXG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIGRhdGFUeXBlOiBkYXRhVHlwZSxcbiAgICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGlmICghY2FsbGJhY2tlZCkge1xuICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXMpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2FybignYXBsdXPml6Xlv5for7fmsYJcIicgKyB1cmwgKyAnXCLlpLHotKXvvIzljp/lm6DvvJonICsgSlNPTi5zdHJpbmdpZnkocmVzKSk7XG4gICAgICAgIGlmICghY2FsbGJhY2tlZCkge1xuICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG4gICAgICAgICAgICBmYWlsdXJlOiB0cnVlLFxuICAgICAgICAgICAgZGF0YTogcmVzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChtZXRob2QgPT09ICdQT1NUJyAmJiB0eXBlb2Ygb3B0cy5kYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVxT3B0aW9ucy51cmwgPSByZXFPcHRpb25zLnVybC5zcGxpdCgnPycpWzBdO1xuICAgICAgaWYgKEhUVFBfUkVRVUVTVCA9PT0gbWV0aG9kTmFtZSkge1xuICAgICAgICAvLyDkuJPpl6jlr7npkonpkonnmoTmlK/mjIFcbiAgICAgICAgcmVxT3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfTtcbiAgICAgICAgcmVxT3B0aW9ucy5kYXRhVHlwZSA9ICdqc29uJztcbiAgICAgICAgcmVxT3B0aW9ucy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IG9wdHMuZGF0YTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgX2V4dEluZm8gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtcmVxdWVzdC1leHRpbmZvJyk7XG4gICAgaWYgKHR5cGVvZiBfZXh0SW5mbyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlcU9wdGlvbnMuX2V4dEluZm8gPSBfZXh0SW5mbztcbiAgICB9XG4gICAgcmVxKHJlcU9wdGlvbnMpO1xuICB9IGVsc2Uge1xuICAgIGlmICghY2FsbGJhY2tlZCkge1xuICAgICAgY2FsbGJhY2tlZCA9IHRydWU7XG4gICAgICBmYWlsdXJlQ2FsbGJhY2soe1xuICAgICAgICBmYWlsdXJlOiB0cnVlLFxuICAgICAgICBkYXRhOiBtc2dcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWNhbGxiYWNrZWQpIHtcbiAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgbXNnID0gJ2FwbHVzIGxvZyByZXF1ZXN0XCInICsgdXJsICsgJyB0aW1lb3V0XCIsIHRpbWUgc3BlbmQnICsgdGltZW91dCArICdtcyc7XG4gICAgICBjb25zb2xlICYmIGNvbnNvbGUud2Fybihtc2cpO1xuICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcbiAgICAgICAgZmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgZGF0YTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHRpbWVvdXQpO1xufTtcblxuXG5leHBvcnRzLnNldFN0b3JhZ2VTeW5jID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICB0cnkge1xuICAgIHZhciBwdCA9IGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xuICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG4gICAgaWYgKHB0ID09PSAnbXknKSB7XG4gICAgICBjdHguc2V0U3RvcmFnZVN5bmMoe1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgZGF0YTogdmFsdWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguc2V0U3RvcmFnZVN5bmMoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge31cbn07XG5cbmV4cG9ydHMuZ2V0U3RvcmFnZVN5bmMgPSBmdW5jdGlvbihrZXkpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcHQgPSBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcbiAgICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICAgIGlmIChwdCA9PT0gJ215Jykge1xuICAgICAgcmV0dXJuIGN0eC5nZXRTdG9yYWdlU3luYyh7a2V5OiBrZXl9KS5kYXRhO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY3R4LmdldFN0b3JhZ2VTeW5jKGtleSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge31cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgcmV0dXJuIHR5cGVvZiBvID09PSAnZnVuY3Rpb24nO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc0Z1bmN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5qCH5YeG5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gdmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJy4vdXRpbEFycmF5Jyk7XG4vLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblxudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHNfcGxhaW5fb2JqICsgTWF0aC5yYW5kb20oKTtcbn07XG5leHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cbi8vIDIwMTYtMDgtMjQg55Cs5a2Q6ZyA5rGC77yMZXhwYXJhbXPljZXni6zlpITnkIbvvIx3aW5kdmFuZemHjOmcgOimgSBA6LCL5aOrXG5leHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcbiAgdmFyIF9rZXkgPSBrZXlfcHJlZml4IHx8IHNfcGxhaW5fb2JqO1xuICByZXR1cm4gX2tleSArICdleHBhcmFtcyc7XG59O1xuXG4vKipcbiAqIGFycmF5IHRvIHBhcmFtXG4gKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuICog5YW25Lit5pWw57uE5Li6XG4gKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG4gKiDnmoTlvaLlvI/jgIJcbiAqIOS4jiBvYmoycGFyYW0g55u45q+U77yM6L+Z5Liq5pa55rOV55qE5aW95aSE5piv5Y+v5Lul5L+d6K+B5pyA5ZCO5Y+C5pWw55qE6aG65bqPXG4gKiBAcGFyYW0gYXJyIHtBcnJheX1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuICB2YXIgYSA9IFtdLFxuICAgIGssXG4gICAgdixcbiAgICBpLFxuICAgIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIGEucHVzaChrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwID8gdiA6IChrICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHYpKSk7XG4gIH1cbiAgcmV0dXJuIGEuam9pbignJicpO1xufTtcbmV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXG5cbi8qKlxuICogcGFyYW0gdG8gYXJyYXlcbiAqIDIwMTYtMDgtMjQg5pS+5byA77yM55So5p2l5aSE55CGZXhwYXJhbXMgQOiwi+Wjq1xuICog5bCG5LiA5Liq566A5Y2V55qE5b2i5aaCIGE9MSZiPTImYz0zIOi/meagt+eahOWPguaVsOi9rOWMluS4uueugOWNleeahCBhcnJheSDmoLzlvI/vvIzlpoLvvJpcbiAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuICpcbiAqIEBwYXJhbSBwYXJhbXMge1N0cmluZ31cbiAqL1xuZXhwb3J0cy5wYXJhbTJhcnIgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KFwiJlwiKSxcbiAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuICAgIGl0ZW0sXG4gICAgYXJyID0gW107XG4gIGZvciAoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFbaV0uc3BsaXQoXCI9XCIpO1xuICAgIGFyci5wdXNoKFtpdGVtLnNoaWZ0KCksIGl0ZW0uam9pbihcIj1cIildKTtcbiAgfVxuXG4gIHJldHVybiBhcnI7XG59O1xuXG5leHBvcnRzLmFycjJvYmogPSBmdW5jdGlvbiAoYXJyKSB7XG4gIHZhciByZXQgPSB7fTtcbiAgdmFyIGs7XG4gIHZhciB2O1xuICB2YXIgaTtcbiAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgayA9IGFycltpXVswXTtcbiAgICB2ID0gYXJyW2ldWzFdO1xuICAgIHJldFtrXSA9IHY7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG4vLyDku4XmlK/mjIHkuIDnuqdqc29u57uT5p6EXG5leHBvcnRzLmpzb25MaWtlU3RyMkpTT04gPSBmdW5jdGlvbihqc29uU3RyKSB7XG4gIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuICB2YXIgYXJyMSA9IHN0ci5zcGxpdCgnLCcpOyBcbiAgdmFyIGFycjIgPSBbXTsgXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuICAgIGFycjIucHVzaChhcnIxW2ldLnNwbGl0KCc6JykpO1xuICB9XG4gIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnRzLmZpeERvbWFpbiA9IGZ1bmN0aW9uKHVybCkgeyAgXG4gIGlmICh1cmwuaW5kZXhPZignaHR0cHM6Ly8nKSAhPT0gLTEgfHwgdXJsLmluZGV4T2YoJ2h0dHA6Ly8nKSAhPT0gLTEpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9IGVsc2Uge1xuICAgIHVybCA9ICgvXlxcL1xcLy8udGVzdCh1cmwpID8gJycgOiAnLy8nKSArIHVybDsgICAgXG4gICAgaWYgKC9eXFwvXFwvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgICAgcmV0dXJuICdodHRwOicgKyB1cmw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnaHR0cHM6JyArIHVybDtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0QXBwS2V5ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpLmdldEdsb2JhbFZhbHVlKFwiYXBsdXNcIik7XG4gIHJldHVybiBhcGx1cy5nZXRNZXRhSW5mbygnYXBwa2V5JykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcElkJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcEtleScpO1xufTtcblxuZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5jaGVja0RvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xuICB2YXIgcmVnID0gbmV3IFJlZ0V4cCgvXigoaHR0cHxodHRwc3wnJyk6XFwvXFwvKT8oW2EtekEtWjAtOV1bLWEtekEtWjAtOV17MCw2Mn0oXFwuW2EtekEtWjAtOV1bLWEtekEtWjAtOV17MCw2Mn0pKyg6WzAtOV17MSw1fSkqKSQvKTtcbiAgdmFyIG1hdGNoZWQgPSAodXJsLm1hdGNoKHJlZykgfHwgW10pWzBdOyAgXG4gIGlmICghdXJsIHx8ICFtYXRjaGVkKSB7XG4gICAgdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KFwiIVwiKSk7XG4gICAgdWxvZygpLnRpcF93KFwidHJhY2tEb21haW4gZXJyb3IsIHBsZWFzZSBjaGVjayBhcGx1cy1yaG9zdC12IHNldHRpbmcsIGN1cnJlbnQgdmFsdWUgaXM6IFwiICsgdXJsIHx8ICd1bmRlZmluZWQnKTtcbiAgICB1bG9nKCkudGlwX3coXCJ3ZSBhY2NlcHQgdGhlc2UgdGhyZWUgcGF0dGVybnM6XCIpO1xuICAgIHVsb2coKS50aXBfdyhcImVnMTogaHR0cHM6Ly90ZXN0LXF0cmFja2luZy14eHguY29tOnBvcnQsIHBvcnQgaXMgb3B0aW9uYWxcIik7XG4gICAgdWxvZygpLnRpcF93KFwiZWcyOiBodHRwOi8vdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuICAgIHVsb2coKS50aXBfdyhcImVnMzogdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KFwiIVwiKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IFxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbmV4cG9ydHMuY2hlY2tPcGVuaWQgPSBmdW5jdGlvbihvZCkge1xuICBpZiAoIW9kKSB7XG4gICAgdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuICAgIHVsb2coKS50aXBfdyhcIlFUIG5lZWQgYW4gdW5pcXVlIGlkIGFzIFFUJ3MgZGV2aWNlaWQhIVwiKTtcbiAgICB1bG9nKCkudGlwX3coXCJzZXR0aW5nIGV4YW1wbGVzOiBhcGx1c19xdWV1ZS5wdXNoKHthY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsIGFyZ3VtZW50czogWydfYW5vbnlfaWQnLCB4eHh4eHhdfSk7XCIpO1xuICAgIHVsb2coKS50aXBfdyhcInJlZmVycmVuY2UgZG9jdW1lbnQ6IGh0dHBzOi8vdC50Yi5jbi8xZFRIalRUUUYwVWpPVE5IaUNrYUNTXCIpO1xuICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbmV4cG9ydHMubWFwRXZlbnRTYW1wbGVSYXRlcyA9IGZ1bmN0aW9uKGFycikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIGVhY2goYXJyLCBmdW5jdGlvbihpdGVtKXtcbiAgICBpZiAoaXRlbS5ldmVudElkcyAmJiBpdGVtLmV2ZW50SWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGVhY2goaXRlbS5ldmVudElkcywgZnVuY3Rpb24oZWt2KXtcbiAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgIGV2ZW50SWQ6IGVrdixcbiAgICAgICAgICBzYW1wbGluZ1JhdGU6IGl0ZW0uc2FtcGxpbmdSYXRlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xudmFyIExPR19QUkVGSVggPSAnW0FQTFVTXSAtLSAnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cbiAgZnVuY3Rpb24gVUxvZygpIHtcbiAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG4gICAgICBfZGVidWcgPSBkZWJ1ZztcbiAgICB9O1xuXG4gICAgdGhpcy5pID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5pbmZvLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGVidWcpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMudiA9IGZ1bmN0aW9uICgpIHsgICAgICBcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcbiAgICAgICAgICAnYmFja2dyb3VuZDpyZWQ7IHBhZGRpbmc6IDRweDsgcGFkZGluZy1yaWdodDogOHB4OyBib3JkZXItcmFkaXVzOiA0cHg7IGNvbG9yOiAjZmZmOydcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnJlcGVhdCA9IGZ1bmN0aW9uKGNoYXIpIHtcbiAgICAgIHZhciByZXMgPSBjaGFyO1xuICAgICAgd2hpbGUgKHJlcy5sZW5ndGggPCA4Nikge1xuICAgICAgICByZXMgPSByZXMgKyBjaGFyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgVUxvZygpO1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91bG9nLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbE9iamVjdC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuZXhwb3J0cy5pc09iamVjdCA9IGZ1bmN0aW9uKGUpIHtcbiAgcmV0dXJuIG51bGwgIT09IGUgJiYgXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpO1xufTtcblxuZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuICBpZiAodGhpcy5pc09iamVjdChlKSkge1xuICAgIGZvciAodmFyIHIgaW4gZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSkgXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxPYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG4gIHZhciBzdHI7XG4gIHZhciBuZXdvYmogPSBBcnJheS5pc0FycmF5KG9iaikgPyBbXSA6IHt9OyAvL0ZpeCBvYmouY29udHJ1Y3RvciB0eXBlRXJyb3IgY29uc3RydWN0b3IgdW5kZWZpbmVkXG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcbiAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuICAgIG5ld29iaiA9IEpTT04ucGFyc2Uoc3RyKTsgLy/ov5jljp9cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpIGluIG9iaikge1xuICAgICAgbmV3b2JqW2ldID0gdHlwZW9mIG9ialtpXSA9PT0gJ29iamVjdCcgPyBjbG9uZURlZXAob2JqW2ldKSA6IG9ialtpXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5ld29iajtcbn1cbm1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Nsb25lRGVlcC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIGNhY2hlID0gcmVxdWlyZSgnLi9jYWNoZScpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX3Jlc3VtZVRpbWUgPSBudWxsO1xuICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXG4gIGZ1bmN0aW9uIGluaXQoKXtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdW1lOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB2YXIgbmV3U2Vzc2lvbiA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghX2N1cnJlbnRTZXNzaW9uKSB7XG4gICAgICAgICAgX2N1cnJlbnRTZXNzaW9uID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuQ1VSUkVOVF9TRVNTSU9OKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcbiAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb25cbiAgICAgICAgICB8fCAhX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lXG4gICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG4gICAgICAgICAgbmV3U2Vzc2lvbiA9IHRydWU7XG4gICAgICAgICAgX2NyZWF0ZU5ld1Nlc3Npb24ob3B0aW9ucyk7XG4gICAgICAgICAgLy8gdWxvZygpLmkoJ3N0YXJ0IG5ldyBzZXNzaW9uKCVzKTogJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBfY3VycmVudFNlc3Npb24pO1xuICAgICAgICB9IFxuICAgICAgICAvLyBlbHNlIHtcbiAgICAgICAgLy8gICAvLyB1bG9nKCkuaSgnY29udGludWUgbGFzdCBzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuICAgICAgICAvLyB9XG4gICAgICAgIHJldHVybiBuZXdTZXNzaW9uO1xuICAgICAgfSxcblxuICAgICAgLy8g5Zyob25IaWRl5pa55rOV5pe26Zet5ZCIc2Vzc2lvblxuICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX2VuZFNlc3Npb24oKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOiOt+WPluW9k+WJjeeahHNlc3Npb25JZO+8jOayoeacieWImei/lOWbnuepulxuICAgICAgZ2V0Q3VycmVudFNlc3Npb25JZDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG4gICAgICB9LFxuXG4gICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2N1cnJlbnRTZXNzaW9uO1xuICAgICAgfSxcblxuICAgICAgY2xvbmVDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gY2xvbmVEZWVwKF9jdXJyZW50U2Vzc2lvbik7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9nZXRVbVBhcmFtcyhxdWVyeSkge1xuICAgIHZhciBhcGx1c19xdWVyeSA9IHt9O1xuICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcbiAgICAgIGFwbHVzX3F1ZXJ5W2ldID0gcXVlcnlbaV07XG4gICAgfVxuICAgIHJldHVybiBhcGx1c19xdWVyeTtcbiAgfVxuICBcbiAgLy8g5byA5aeL5LiA5Liq5pawc2Vzc2lvblxuICBmdW5jdGlvbiBfY3JlYXRlTmV3U2Vzc2lvbihuZXdPcHRpb25zKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBwcmV2T3B0aW9ucyA9IChfY3VycmVudFNlc3Npb24gfHwge30pLm9wdGlvbnMgfHwge307XG4gICAgICBcbiAgICAgIHZhciBsYXVuY2hPcHRpb25zID0gdXRpbHMuYXNzaWduKHt9LCBfZ2V0VW1QYXJhbXMobmV3T3B0aW9ucy5xdWVyeSkpO1xuICAgICAgbGF1bmNoT3B0aW9ucy5wYXRoID0gbmV3T3B0aW9ucy5wYXRoIHx8IHByZXZPcHRpb25zLnBhdGg7XG4gICAgICBsYXVuY2hPcHRpb25zLnNjZW5lID0gbmV3T3B0aW9ucy5zY2VuZVxuICAgICAgICA/IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgKyAnXycgKyBuZXdPcHRpb25zLnNjZW5lXG4gICAgICAgIDogcHJldk9wdGlvbnMuc2NlbmU7XG4gICAgICBcbiAgICAgIHZhciByZWZlcnJlckluZm8gPSBuZXdPcHRpb25zLnJlZmVycmVySW5mbztcbiAgICAgIGlmIChyZWZlcnJlckluZm8pIHtcbiAgICAgICAgbGF1bmNoT3B0aW9ucy5yZWZlcnJlckFwcElkID0gcmVmZXJyZXJJbmZvLmFwcElkO1xuICAgICAgfVxuICAgICAgXG4gICAgICB1bG9nKCkuaSgnY3VycmVudCBsYXVuY2ggb3B0aW9uczogJyxsYXVuY2hPcHRpb25zKTtcbiAgICAgIC8vIHVsb2coKS5pKCdzZXNzaW9uIG9wdGlvbnM6ICcsIGxhdW5jaE9wdGlvbnMpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgICAgIHZhciB0cyA9IERhdGUubm93KCk7XG4gICAgICBfY3VycmVudFNlc3Npb24gPSB7XG4gICAgICAgIGlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgdHMsXG4gICAgICAgIHN0YXJ0X3RpbWU6IHRzLFxuICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuICAgICAgICBzdGF0ZV9zOiAxXG4gICAgICB9OyBcbiAgICAgIGlmIChncCkge1xuICAgICAgICBfY3VycmVudFNlc3Npb25bJ2dwJ10gPSBncDtcbiAgICAgIH0gXG5cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1bG9nKCkuZSgnZ2VuZXJhdGUgbmV3IHNlc3Npb24gZmFpbGVkLCBlcnJtc2c6ICcsIGUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIOe7k+adn+W9k+WJjXNlc3Npb27vvIznlLHkuo4zMOenkuacuuWItu+8jOS4gOS4qnNlc3Npb27kvJrooqvnu5PmnZ/lpJrmrKFcbiAgZnVuY3Rpb24gX2VuZFNlc3Npb24oKSB7XG4gICAgaWYgKF9jdXJyZW50U2Vzc2lvbikge1xuICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lID0gZGF0ZS5nZXRUaW1lKCk7XG4gICAgICBpZiAodHlwZW9mIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gMDtcbiAgICAgIH1cbiAgICAgIF9jdXJyZW50U2Vzc2lvbi5kdXJhdGlvbiA9IF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSAtIF9yZXN1bWVUaW1lO1xuICAgICAgX2N1cnJlbnRTZXNzaW9uLnN0YXRlX3MgPSAwO1xuICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuQ1VSUkVOVF9TRVNTSU9OLCBfY3VycmVudFNlc3Npb24pO1xuXG4gICAgICB1bG9nKCkuaSgnc2Vzc2lvbiBlbmQgKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIF9pbnN0YW5jZSA9IGluaXQoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcblxufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS91bV9zZXNzaW9uX21hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX25hbWUgPSAnJztcbiAgdmFyIF9kYXRhID0gbnVsbDtcbiAgdmFyIF9sb2FkZWQgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBDYWNoZSgpIHtcbiAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKGNiKSB7XG4gICAgICBpZiAoIV9kYXRhKSB7XG4gICAgICAgIF9uYW1lID0gJ2FwbHVzX2NhY2hlXycgKyB1dGlsLmdldEFwcEtleSgpIHx8ICcnO1xuICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBfbmFtZSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBpZiAocmVzICYmIHJlcy5kYXRhKSB7XG4gICAgICAgICAgICAgIF9kYXRhID0ganNvblV0aWwucGFyc2UocmVzLmRhdGEpIHx8IHt9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgX2RhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgICAgICBrZXk6IF9uYW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdWxvZygpLncoJ2dldCBjYWNoZSBmYWlsZWQsIGVycm1zZyA9ICcgKyBlLmVyck1zZyk7XG4gICAgICAgICAgICBfZGF0YSA9IHt9O1xuICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG4gICAgICAgICAgICAgIGtleTogX25hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3R4LnJlbW92ZVN0b3JhZ2Uoe1xuICAgICAgICAgIGtleTogX25hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIGlzRnVuY3Rpb24oY2IpICYmIGNiKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChfZGF0YSkge1xuICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBfbmFtZSxcbiAgICAgICAgICBkYXRhOiBqc29uVXRpbC5zdHJpbmdmeShfZGF0YSlcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChfZGF0YSkge1xuICAgICAgICBfZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGtleSkgeyAgICAgIFxuICAgICAgcmV0dXJuIChfZGF0YSB8fCB7fSlba2V5XTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICBpZiAoX2RhdGEgJiYgX2RhdGFba2V5XSkge1xuICAgICAgICBkZWxldGUgX2RhdGFba2V5XTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2RhdGE7XG4gICAgfTtcblxuICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfZGF0YSA9IG51bGw7XG4gICAgfTtcblxuICAgIHRoaXMuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5nZXQoa2V5KTtcbiAgICB9O1xuXG4gICAgdGhpcy5pc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfbG9hZGVkO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFN5bmMgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBtaW5pLmdldFN0b3JhZ2VTeW5jKGtleSk7XG4gICAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTikge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gICBcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnID8gIGpzb25VdGlsLnBhcnNlKHJlc3VsdCkgOiByZXN1bHQ7XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3luYyA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWluaS5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7fVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgQ2FjaGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9jYWNoZS5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG5leHBvcnRzLnN0cmluZ2Z5ID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAoZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufTtcblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgaWYgKGpzb24pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnRzLnBhcnNlVG9BcnJheSA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgaWYgKGpzb24pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZnVuY3Rpb24gZ2V0UmFuZG9tU3RyKGxlbikge1xuICB2YXIgc3RyID0gJyc7XG4gIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IE51bWJlcihsZW4pOyBpKyspIHtcbiAgICB2YXIgcG9zID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGFyci5sZW5ndGggLSAxKSk7XG4gICAgc3RyICs9IGFycltwb3NdO1xuICB9XG4gIHJldHVybiBzdHI7XG59O1xuZXhwb3J0cy5nZXRSYW5kb21TdHIgPSBnZXRSYW5kb21TdHI7XG5cbmV4cG9ydHMuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgc2VhcmNoVmFsKSB7XG4gIGlmICghc3RyIHx8ICFzZWFyY2hWYWwgfHwgc2VhcmNoVmFsLmxlbmd0aCA9PT0gMCB8fCBzZWFyY2hWYWwubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3RyLnN1YnN0cigwLCBzZWFyY2hWYWwubGVuZ3RoKSA9PT0gc2VhcmNoVmFsO1xufTtcblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLy8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcbi8vIDIuZXZlbnRpZOmVv+W6puS4jeiDvei2hei/hzEyOOS4quWtl+esplxuLy8gMy5rZXnplb/luqbkuI3og73otoXov4cyNTbkuKrlrZfnrKZcbi8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcbmV4cG9ydHMuY2hlY2tFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SWQsIHByb3BlcnRpZXMpIHtcbiAgdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4gIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgdmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xuICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcbiAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBldmVudElkIHx8IFwiJycgZXZlbnQgcHJvcGVydGllcyA9IFwiLCBqc29uVXRpbC5zdHJpbmdmeShwcm9wZXJ0aWVzLmN1c3ApKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyDkv53nlZnlhbPplK7lrZdcbiAgdmFyIHJlc2VydmVXb3JkcyA9IFsnaWQnLCAnZHUnXTtcbiAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cbiAgcmVzZXJ2ZVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG4gIH0pO1xuXG4gIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcbiAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG4gICAgdWxvZygpLmUoJ2V2ZW50SWQgaGFzIGNvbmZsaWN0IHdpdGggcmVzZXJ2ZXdvcmRzOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG4gICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBldmVudCBpZCBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfRVZFTlRJRF9MRU5HVEgpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIHByb3BlcnRpZXPnmoTlkIjms5XnsbvlnovkuLogc3RyaW5nIHwgb2JqZWN0KG5vdCBpbmNsdWRlIEFycmF5KVxuICBpZiAocHJvcGVydGllc1xuICAgICYmICh0eXBlb2YgcHJvcGVydGllcyAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSlcbiAgICAmJiB0eXBlb2YgcHJvcGVydGllcyAhPT0gJ3N0cmluZycpIHtcbiAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuICAgICAgICBpZiAoa2V5Lmxlbmd0aCA+IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb3VudCA+PSBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCkge1xuICAgICAgICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBjb3VudCBvZiBwcm9wZXJ0aWVzIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuICAgICAgICAgIHVsb2coKS5lKCdwcm9wZXJ0eSBrZXkgaGFzIGNvbmZsaWN0IHdpdGggcmVzZXJ2ZVdvcmRzOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnQgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuXG5leHBvcnRzLmRlbGV0ZUluZm8gPSBmdW5jdGlvbihnb2tleSwgYXJyKSB7XG4gIGVhY2goYXJyLCBmdW5jdGlvbih2KSB7XG4gICAgZGVsZXRlIGdva2V5W3ZdO1xuICB9KTtcbiAgcmV0dXJuIGdva2V5O1xufTtcblxuZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5nZXRTdGFydElkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKTtcbn07XG5cbmV4cG9ydHMuRGF0YVR5cGUgPSB7XG4gIEhBTEZfU0VTU0lPTjogJ2hhbGZfc2Vzc2lvbicsXG4gIENMT1NFX1NFU1NJT046ICdjbG9zZV9zZXNzaW9uJyxcbiAgRUtWOiAnZWt2JyxcbiAgRU5URVJfUEFHRTogJ2VudGVyX3BhZ2UnLFxuICBMRUFWRV9QQUdFOiAnbGVhdmVfcGFnZSdcbn07XG5cbmV4cG9ydHMuQWNjZXNzVHlwZSA9IHtcbiAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG4gIE1PQklMRV9ORVRXT1JLXzNHOiAnM2cnLFxuICBNT0JJTEVfTkVUV09SS180RzogJzRnJyxcbiAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIF9pbnN0YW5jZTtcbiAgdmFyIF9zZXNzaW9uSWQ7XG4gIHZhciBfc3RhcnRJZDtcbiAgdmFyIF9tZW1vcnlFdmVudHMgPSBbXTtcblxuICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7ZcbiAgdmFyIF9ub1Nlc3Npb25FdmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG4gICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuICAgICAgXG4gICAgICAvLyDmnKzlnLDmnIDlpJrlrZjlgqggRVZFTlRfTUFYX0NPVU5UIOadoeaVsOaNru+8jOOAjOWkmuS9meaVsOaNruOAjeaaguaXtuWFiOaKm+W8g1xuICAgICAgaWYgKF9nZXRDYWNoZUV2ZW50c0xlbmd0aChla3ZzKSArIF9tZW1vcnlFdmVudHMubGVuZ3RoIDw9IGFwbHVzU3RhdGljLkVWRU5UX01BWF9DT1VOVCkge1xuICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkVLVlMsIGVrdnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZEVrdnMoZWt2cywgbWVtb3J5RXZlbnRzKSB7XG4gICAgZWt2cyA9IGVrdnMgfHwge307XG4gICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG4gICAgaWYgKGlzQXJyYXkoZXZlbnRzKSAmJiBldmVudHMubGVuZ3RoKSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gZXZlbnRzLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gW10uY29uY2F0KG1lbW9yeUV2ZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVrdnM7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZXZlbnRzTWFwKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuICAgICAgaWYgKGlzQXJyYXkoZXZlbnRzTWFwW2tleV0pKSB7XG4gICAgICAgIGxlbiArPSBldmVudHNNYXBba2V5XS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVybjtcbiAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBfbWVtb3J5RXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcbiAgICAgICAgICAgIF9jYWNoZUV2ZW50cyhfc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ3Nlc3Npb24gaWQgaXMgbnVsbDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc2V0U2Vzc2lvbklkOiBmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG4gICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzZXRTdGFydElkOiBmdW5jdGlvbihzdGFydElkKSB7XG4gICAgICAgIF9zdGFydElkID0gc3RhcnRJZDtcbiAgICAgIH0sXG5cbiAgICAgIGdldFN0YXJ0SWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3N0YXJ0SWQ7XG4gICAgICB9LFxuXG4gICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBla3ZzO1xuICAgICAgfSxcblxuICAgICAgLy8g6L+U5Zue5b2T5YmNZWt2c+WGheeahOaXpeW/l+adoeaVsFxuICAgICAgZ2V0RWt2c0xlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpIHx8IHt9O1xuICAgICAgICB2YXIgZXZlbnRzID0gZWt2c1tfc2Vzc2lvbklkXSB8fCBbXTtcbiAgICAgICAgdmFyIG1lbW9yeUV2ZW50c0xlbiA9IF9tZW1vcnlFdmVudHMgPyBfbWVtb3J5RXZlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIHJldHVybiBldmVudHMubGVuZ3RoICsgbWVtb3J5RXZlbnRzTGVuO1xuICAgICAgfSxcblxuICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBpbml0KCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBidWlsZEJvZHkgPSByZXF1aXJlKCcuL2JvZHlCdWlsZGVyJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIFF1ZXVlID0gcmVxdWlyZSgnLi9xdWV1ZScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG4vLyB2YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7IFxuICB2YXIgX3JlcUtleSA9IG51bGw7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX2ZhaWxSZXF1ZXN0cyA9IFtdO1xuICAvLyDljp/mnaXnmoRhcGx1c1N0YXRpYy5NQVhfUVVFVUVfQ09VTlTpmZDliLbkuoZfcXVldWXnmoTplb/luqbvvIzlnKjlrp7pmYXlnLrmma/kuK3ml6DnlKhcbiAgdmFyIF9xdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICB2YXIgX2ZhaWxlZFF1ZXVlPSBuZXcgUXVldWUoKTtcbiAgZnVuY3Rpb24gX2VucXVldWVSZXF1ZXN0KGRhdGFUeXBlLCBvcHRpb25zLCBjYikge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBkYXRhID0gYnVpbGRCb2R5KGRhdGFUeXBlKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcbiAgICAgIGRhdGEuaGVhZGVyID0gdXRpbERhc2guYXNzaWduKGRhdGEuaGVhZGVyLCBIZWFkZXIuZ2V0TmV0SW5mbyhjbGllbnQpKTtcbiAgICAgIGRhdGEubm9DYWNoZSA9IG9wdGlvbnMubm9DYWNoZTtcbiAgICAgIF9xdWV1ZS5lbnF1ZXVlKGRhdGEpO1xuICAgIH1cbiAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICB9XG4gIGZ1bmN0aW9uIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIHZhciBpc05SID0ga2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcbiAgICB2YXIgc2VuZFF1ZXVlID0gaXNOUiA/IF9xdWV1ZSA6IF9mYWlsZWRRdWV1ZTtcbiAgICAvLyDkvb/nlKhkZXF1ZXVl5Luj5pu/ZnJvbnTmlrnms5XvvIxkZXF1ZXVl5bGe5LqO5Ye66Zif77yM6YG/5YWN5LqG6Zif5YiX5pyq5pu05paw5bim5p2l55qE6YeN5aSN5LiK5oqlXG4gICAgdmFyIGRhdGEgPSBzZW5kUXVldWUuZGVxdWV1ZSgpO1xuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gX3F1ZXVlLmRlcXVldWUoKTtcbiAgICAgIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHZhciBmYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8g5Y+R6YCB5aSx6LSl5pS+5YWl5aSx6LSl6Zif5YiX77yM562J5b6F5LiL5LiA5qyh5Y+R6YCB5pe25py6XG4gICAgICAvLyDlm6DkuLpkYXRh5L2/55So5Ye66Zif5YiX5pa55rOV77yM5omA5LulX3F1ZXVl5bey5pu05paw77yM6YCa6L+HaXRlbeWPluWIsOeahGRhdGHkuI3mmK/lvZPliY3lj5HpgIHnmoRkYXRhO1xuICAgICAgZGF0YSAmJiAoIWRhdGEubm9DYWNoZSkgJiYgX2ZhaWxSZXF1ZXN0cy5wdXNoKGRhdGEpO1xuICAgICAgX3NlbmRRdWV1ZShrZXksIGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICB9O1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3MsIGZhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpO1xuICAgICAgY29tcGxldGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpIHtcbiAgICAvLyDlj5HpgIHlrozmiJDlkI7lsIblpLHotKXnmoTor7fmsYLmt7vliqDliLDlpLHotKXpmJ/liJfkuK1cbiAgICBfZmFpbFJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIF9mYWlsZWRRdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuICAgIH0pO1xuICAgIF9mYWlsUmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFNlbmQoa2V5LCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIC8vIOWcqHRhcm8xeOOAgXRhcm8yeOahhuaetuS4re+8jOW/hemhu+mAmui/h+WPmOmHj+WjsOaYjueahOaWueW8j+S8oOWFpe+8jOWQpuWImV9zZW5kUXVldWXpmLvloZ7vvIzlm57osIPml6Dms5Xph43nva5fcnVubmluZ++8jOWvvOiHtOaXpeW/l+WPkemAgeS4jeWHuu+8m+WOn+WboOS4jeaYjlxuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBfc2VuZFF1ZXVlKGtleSwgY2IpO1xuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdFF1ZXVlKCkge1xuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY29tcGxldGVkQ2FsbGJhY2spIHtcbiAgICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgICB0aGlzLmFkZChkYXRhVHlwZSwgb3B0aW9ucywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zdGFydFNlbmQoX3JlcUtleSwgY29tcGxldGVkQ2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zdGFydFNlbmQoX3JlcUtleSwgY29tcGxldGVkQ2FsbGJhY2spO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIGlmICghdXRpbC5jaGVja09wZW5pZChhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzTlIgPSBfcmVxS2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcbiAgICAgIHZhciBsb2FkUXVldWUgPSBpc05SID8gX3F1ZXVlIDogX2ZhaWxlZFF1ZXVlO1xuICAgICAgdmFyIGl0ZW1zID0gY2FjaGUoKS5nZXQoX3JlcUtleSk7XG4gICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICBsb2FkUXVldWUuZW5xdWV1ZShpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYWNoZSgpLnJlbW92ZShfcmVxS2V5KTtcbiAgICB9O1xuXG4gICAgLy8g5b2T5YmN5Y+q5pyJ5aSx6LSl6Zif5YiX6LCD55Soc2F2ZeaWueazlVxuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpIHx8IFtdO1xuICAgICAgdmFyIG5ld0NhY2hlID0gY2FjaGVkLmNvbmNhdChfZmFpbGVkUXVldWUuaXRlbXMoKSk7XG4gICAgICBpZihuZXdDYWNoZSAmJiBuZXdDYWNoZS5sZW5ndGgpIHtcbiAgICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTLCBuZXdDYWNoZSk7XG4gICAgICB9IFxuICAgICAgX2ZhaWxlZFF1ZXVlLmNsZWFyKCk7IC8vIOS4gOWumuimgeWFiOS/neWtmOWGjea4heepuu+8jOWQpuWImeS/neWtmOeahOawuOi/nOaYr+epuuaVsOaNrlxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKHJlcUtleSkge1xuICAgIF9yZXFLZXkgPSByZXFLZXk7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIF9pbnN0YW5jZSA9IG5ldyBSZXF1ZXN0UXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJy4vY2FjaGUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5leHBvcnRzLmdldE5ldEluZm8gPSBmdW5jdGlvbihjbGllbnQpe1xuICB2YXIgcmVzdWx0ID0ge307XG4gIHZhciBhY2Nlc3MgPSBjbGllbnQubmV0d29ya1R5cGU7XG4gIGlmIChhY2Nlc3MgPT09ICdub25lJykge1xuICAgIGFjY2VzcyA9ICd1bmtub3duJztcbiAgfVxuXG4gIGFjY2VzcyA9IGFjY2VzcyA/IGFjY2Vzcy50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIHN3aXRjaCAoYWNjZXNzKSB7XG4gIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS180RzpcbiAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnTFRFJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzRHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzNHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdDRE1BJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzNHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzJHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdHUlBTJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzJHJztcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICByZXN1bHQuYWNjZXNzID0gYWNjZXNzO1xuICAgIGRlbGV0ZSByZXN1bHQuYWNjZXNzX3N1YnR5cGU7XG4gICAgYnJlYWs7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZ2V0SGVhZGVySW5mbyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaGVhZGVyID0ge307XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblxuICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcblxuICB2YXIgZGF0YSA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICBpZiAoZGF0YSkge1xuICAgIGhlYWRlci5pbXByaW50ID0gZGF0YTtcbiAgfVxuXG4gIGhlYWRlci5kZXZpY2VfdHlwZSA9ICdQaG9uZSc7XG4gIGhlYWRlci5zZGtfdmVyc2lvbiA9IGdsb2JhbENvbmZpZy5sdmVyO1xuICBoZWFkZXIuYXBwa2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcbiAgaGVhZGVyLmRldmljZV9pbmZvID0gJyc7XG4gIGhlYWRlci5hcHBpZCA9IGNsaWVudC5hcHBJZDtcbiAgaGVhZGVyLmFwcF9lbnYgPSBjbGllbnQuYXBwRW52O1xuICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwVmVyc2lvbicpIHx8ICdkZXZ0b29scyc7XG5cbiAgdmFyIGdsb2JhbF9hcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7XG4gIGlmIChnbG9iYWxfYXJncyAmJiBnbG9iYWxfYXJncy5kZWJ1Z0lkKSB7XG4gICAgaGVhZGVyLm1pbmlhcHBEZWJ1Z0lkID0gZ2xvYmFsX2FyZ3MuZGVidWdJZDtcbiAgfSBlbHNlIGlmIChjYWNoZSgpLmdldCgnbWluaWFwcERlYnVnSWQnKSkge1xuICAgIGhlYWRlci5taW5pYXBwRGVidWdJZCA9IGNhY2hlKCkuZ2V0KCdtaW5pYXBwRGVidWdJZCcpO1xuICB9XG5cbiAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG4gIHN5c3RlbUluZm8uc2FmZUFyZWEgPSBzeXN0ZW1JbmZvLnNhZmVBcmVhIHx8IHt9O1xuXG4gIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG4gIHZhciBwbGF0Zm9ybSA9IHN5c3RlbUluZm8ucGxhdGZvcm0gfHwgJyc7XG4gIHZhciBicmFuZCA9IHN5c3RlbUluZm8uYnJhbmQgfHwgJyc7XG4gIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXG4gIGhlYWRlci5zZGtfdHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm1fc2RrX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLlNES1ZlcnNpb247XG4gIGhlYWRlci5wbGF0Zm9ybV92ZXJzaW9uID0gc3lzdGVtSW5mby5wbGF0Zm9ybVZlcnNpb247XG4gICAgXG4gIHZhciB3ID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbldpZHRoICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgdmFyIGggPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuSGVpZ2h0ICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cbiAgaGVhZGVyLnBpeGVsX3JhdGlvID0gc3lzdGVtSW5mby5waXhlbFJhdGlvO1xuICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcbiAgaGVhZGVyLmZvbnRfc2l6ZV9zZXR0aW5nID0gc3lzdGVtSW5mby5mb250U2l6ZVNldHRpbmc7XG4gIGhlYWRlci5kZXZpY2VfbW9kZWwgPSBtb2RlbDsgLy8g6K6+5aSH5Z6L5Y+3XG4gIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG4gIC8vIF9oZWFkZXIuY2hhbm5lbCA9IGJyYW5kTDsgLy8g6L+Z6YeM5rig6YGT5pqC5pe25YWI55SoIOeUn+S6p+WVhueahOWQjeWtl1xuICBoZWFkZXIuZGV2aWNlX21hbnVmYWN0dXJlciA9IGJyYW5kTDtcbiAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuICBoZWFkZXIuZGV2aWNlX25hbWUgPSBtb2RlbDsgLy8g5YaF6YOo5Lqn5ZOB5Luj5Y+3XG4gIGhlYWRlci5vc192ZXJzaW9uID0gc3lzdGVtSW5mby5vc192ZXJzaW9uOyAvLyBvc+eJiOacrOWPt1xuICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXG4gIHZhciBuZXRJbmZvID0gdGhpcy5nZXROZXRJbmZvKGNsaWVudCk7XG4gIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2VzcztcbiAgaWYgKG5ldEluZm8uYWNjZXNzX3N1YnR5cGUpIHtcbiAgICBoZWFkZXIuYWNjZXNzX3N1YnR5cGUgPSBuZXRJbmZvLmFjY2Vzc19zdWJ0eXBlO1xuICB9XG5cbiAgcmV0dXJuIGhlYWRlcjtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX2hlYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHNlc3Npb25NYW5hZ2VyID0gcmVxdWlyZSgnLi91bV9zZXNzaW9uX21hbmFnZXInKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCcuL2V2ZW50TWFuYWdlcicpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGF0YVR5cGUpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICBzd2l0Y2ggKGRhdGFUeXBlKSB7XG4gIGNhc2UgdXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OOlxuICAgIGRhdGEgPSBfYnVpbGRIYWxmU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkNMT1NFX1NFU1NJT046XG4gICAgZGF0YSA9IF9idWlsZENsb3NlU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkVLVjpcbiAgICBkYXRhID0gX2J1aWxkRWt2KCk7XG4gICAgYnJlYWs7XG4gIGRlZmF1bHQ6XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRIYWxmU2Vzc2lvbigpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkuY2xvbmVDdXJyZW50U2Vzc2lvbigpO1xuICBpZiAoc2Vzc2lvbikge1xuICAgIGRhdGEgPSB7XG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgc3Q6ICcxJ1xuICAgICAgfSxcbiAgICAgIGFuYWx5dGljczoge1xuICAgICAgICBzZXNzaW9uczogW3Nlc3Npb25dXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuZnVuY3Rpb24gX2J1aWxkQ2xvc2VTZXNzaW9uKCkge1xuICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgdmFyIGFuYWx5dGljcyA9IHt9O1xuXG4gIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG4gIGlmIChzZXNzaW9uKSB7XG4gICAgYW5hbHl0aWNzLnNlc3Npb25zID0gW3Nlc3Npb25dO1xuICB9XG5cbiAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG4gIGlmIChla3ZzKSB7XG4gICAgYW5hbHl0aWNzLmVrdnMgPSBjbG9uZURlZXAoZWt2cyk7XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuXG4gIGlmIChhbmFseXRpY3Muc2Vzc2lvbnMgfHwgYW5hbHl0aWNzLmVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiBhbmFseXRpY3NcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRFa3YoKSB7XG4gIHZhciBkYXRhID0gbnVsbDtcblxuICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcbiAgaWYgKGVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgIGVrdnM6IGNsb25lRGVlcChla3ZzKVxuICAgICAgfVxuICAgIH07XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9ib2R5QnVpbGRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgbWFuZ2xlID0gcmVxdWlyZSgnLi9tYW5nbGVfbWluaScpO1xudmFyIGltcHJpbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi9pbXByaW50TWFuYWdlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQZXJmb3JtYW5jZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUGVyZm9ybWFuY2UnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vY2FjaGUnKTtcbnZhciB1dGlsUmVtb3RlQ2ZnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxSZW1vdGVDZmcnKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIGFwbHVzVXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbmZ1bmN0aW9uIGdldFVybCgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgcmhvc3QgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXG4gIGlmICghYXBsdXNVdGlsLmNoZWNrRG9tYWluKHJob3N0KSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBtaW5pTG9nID0gbWluaS5nZXRMb2dEb21haW4oKTtcbiAgaWYgKCFtaW5pTG9nKSB7XG4gICAgdWxvZygpLnRpcF93KCdjdXJyZW50IG1pbmlhcHAgZnJhbWV3b3JrIGlzIG5vdCBzdXBwb3J0ZWQhIScpO1xuICAgIHJldHVybiAnJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB9ICBcbiAgcmV0dXJuIGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3QpICsgbWluaUxvZztcbn07XG5cbnZhciBNQVhfUkVRVUVTVF9USU1FT1VUID0gNTAwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbENhbGxiYWNrLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBwX2hlYWRlciA9IEhlYWRlci5nZXRIZWFkZXJJbmZvKCk7XG4gIHRyeSB7ICBcbiAgICBpZiAobWluaS5nZXRQbGF0Zm9ybVR5cGUoKSA9PT0gJ215JyB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAndGFvYmFvJykge1xuICAgICAgcF9oZWFkZXJbJ2lkX3R5cGUnXSA9ICdhbGlwYXlfaWQnO1xuICAgICAgcF9oZWFkZXJbJ2lkX3RyYWNraW5nJ10gPSB7XG4gICAgICAgIGFsaXBheV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuICAgICAgICB1bmlvbmlkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fREVWX0lEKSB8fCBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5fREVWX0lEKSB8fCAnJyxcbiAgICAgICAgdXNlcklkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCkgfHwgJycsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ29wZW5pZCc7XG4gICAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcbiAgICAgICAgb3BlbmlkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgJycsXG4gICAgICAgIHVuaW9uaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9ERVZfSUQpIHx8IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLl9ERVZfSUQpIHx8ICcnLFxuICAgICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcbiAgICAgIH07XG4gICAgfVxuICBcbiAgICBpZiAoaW1wcmludE1hbmFnZXIuZ2V0KCkpIHtcbiAgICAgIHBfaGVhZGVyW2FwbHVzU3RhdGljLklNUFJJTlRdID0gaW1wcmludE1hbmFnZXIuZ2V0KCk7XG4gICAgfVxuICBcbiAgICBpZiAoZGF0YS5hbmFseXRpY3MpIHtcbiAgICAgIHZhciB1c2VySWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCk7XG4gICAgICB2YXIgdXNlcl9uaWNrID0gYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKTtcbiAgICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuICAgICAgICBwdWlkOiB1c2VySWQsXG4gICAgICAgIHByb3ZpZGVyOiB1c2VyX25pY2tcbiAgICAgIH07XG4gICAgfVxuICBcbiAgICBkYXRhLmhlYWRlciA9IHV0aWxzLmFzc2lnbihwX2hlYWRlciwgZGF0YS5oZWFkZXIsIHtcbiAgICAgIHRzOiBEYXRlLm5vdygpLFxuICAgICAgdHJhY2VJZDogdXRpbHMuZ2V0UmFuZG9tU3RyKDEwKSArIERhdGUubm93KCkgKyB1dGlscy5nZXRSYW5kb21TdHIoOSksXG4gICAgICBzdGFydF9pZDogZXZlbnRNYW5hZ2VyKCkuZ2V0U3RhcnRJZCgpXG4gICAgfSk7XG4gICAgdmFyIG1hbmdsZURhdGEgPSBtYW5nbGUoZGF0YSk7XG4gICAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG4gICAgdmFyIHVybCA9IGdldFVybCgpO1xuICAgIHZhciBjb25maWcgPSB7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YTogYmFzZTY0LmVuY29kZShyZXF1ZXN0RGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IHJlc3AuY29kZSB8fCByZXNwLnN0YXR1cyB8fCByZXNwLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDAgfHwgc3RhdHVzQ29kZSA9PT0gNDEzKSB7XG4gICAgICAgICAgdWxvZygpLmkoJ2RhdGEgc2VuZCBzdWNjZXNzOicsIGRhdGEsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHJlc3AucHJvZmlsZSkge1xuICAgICAgICAgICAgICB1dGlsUGVyZm9ybWFuY2UucHVzaCh7ZW5kOiByZXNwLnByb2ZpbGUucmVzcG9uc2VFbmQsIHN0YXJ0OiByZXNwLnByb2ZpbGUucmVxdWVzdFN0YXJ0fSk7XG4gICAgICAgICAgICAgIHV0aWxQZXJmb3JtYW5jZS5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHVsb2coKS53KCdjdXJyZW50IG1pbmlhcHAgbm90IHN1cHBvcnQgcHJvZmlsZSBBUEknKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy/lnKjmraTlpITlsIZpbXByaW505YaF5a655Yqg5YWl5Yiw5pys5Zyw57yT5a2Y5LitXG4gICAgICAgICAgc2F2ZUltcHJpbnQoKHJlc3AuZGF0YSB8fCB7fSkpO1xuICAgICAgICAgIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2socmVzcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ2RhdGEgc2VuZCBmYWlsZWQ6JywgcmVxdWVzdERhdGEpO1xuICAgICAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChpc1RpbWVvdXQpIHtcbiAgICAgICAgdWxvZygpLncoJ2RhdGEgc2VuZCcgKyBpc1RpbWVvdXQgPyAndGltZW91dDogJyA6ICdmYWlsZWQ6ICcsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuICAgICAgfSxcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG4gIH0gY2F0Y2ggKGUpIHtcblxuICB9XG59O1xuXG5mdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICB2YXIgc3JjU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG4gIHZhciBpc1RpbWVvdXQgPSBmYWxzZTtcbiAgdmFyIHN0ID0gbnVsbDtcblxuICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcCkge1xuICAgIGlmICghaXNUaW1lb3V0KSB7XG4gICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuICAgICAgaXNGdW5jdGlvbihzcmNTdWNjZXNzKSAmJiBzcmNTdWNjZXNzKHJlc3ApO1xuICAgIH1cbiAgfTtcblxuICBvcHRpb25zLmZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc1RpbWVvdXQpIHtcbiAgICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVsb2coKS53KCdyZXF1ZXN0IHNlbmQgZmFpbGVkLCBlcnIgbXNnOiAnLCBlKTtcbiAgICB9XG4gIH1cblxuICBzdCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgaXNUaW1lb3V0ID0gdHJ1ZTtcblxuICAgIGlzRnVuY3Rpb24oc3JjRmFpbCkgJiYgc3JjRmFpbChpc1RpbWVvdXQpO1xuICB9LCBvcHRpb25zLnRpbWVvdXQgfHwgTUFYX1JFUVVFU1RfVElNRU9VVCk7XG59XG5cbi8vIOacjeWKoeerr+S4i+WPkeWPkemAgeetlueVpVxuZnVuY3Rpb24gc2F2ZUltcHJpbnQoaW1wcmludCkge1xuICB2YXIgbG9jYWxJbXB2ID0gY2FjaGUoKS5nZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTik7XG4gIGlmIChpbXByaW50KSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgaWYgKGltcHJpbnQuaW1wcmludFZlcnNpb24gJiYgaW1wcmludC5pbXByaW50VmVyc2lvbiAhPT0gbG9jYWxJbXB2KSB7XG4gICAgICB2YXIgcmVtb3RlSW1wdiA9IGltcHJpbnQuaW1wcmludFZlcnNpb247XG4gICAgICBjYWNoZSgpLnNldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfSU1QUklOVF9WRVJTSU9OLCByZW1vdGVJbXB2KTtcbiAgICAgIHZhciB0cmFja0RvbWFpbiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG5cbiAgICAgIHZhciB1cmwgPSBhcGx1c1V0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSAgKyByZW1vdGVJbXB2O1xuICAgICAgYXBsdXMucmVxdWVzdFJlbW90ZUNvbmZpZyhcbiAgICAgICAgdXJsLCBcbiAgICAgICAgZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgaWYgKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSkge1xuICAgICAgICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcocmVzcC5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgY2FjaGUoKS5zZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcsIHJlc3AuZGF0YS5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIFxuICAgICAgICBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIHVsb2coKS53KCdyZW1vdGUgY29uZmlndXJhdGlvbiByZXF1ZXN0IGZhaWxlZCwgZXJybXNnOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsc1JlbW90ZUNmZyA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKTtcbiAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGxzUmVtb3RlQ2ZnKTtcbiAgICB9XG4gIH0gXG59XG5cbmZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcbiAgdmFyIGhlYWRlclR5cGUgPSBtaW5pLmdldFNka1R5cGUoKSArICcvanNvbic7XG4gIHZhciBpc015ID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaWYgKG15KSB7XG4gICAgICBpc015ID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2goZSl7fTtcblxuICBpZiAoaXNNeSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhbmFseXRpY3NNYXAgPSB7XG4gIHNlc3Npb25zOiAnc24nLFxuICAvLyBwYWdlczogJ3AnLFxuICAvLyBzaGFyZXM6ICdzcicsXG4gIGVrdnM6ICdlJyxcbiAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcbn07XG5cbnZhciBoZWFkZXJNYXAgPSB7XG4gIHNka190eXBlOiAnc2R0JyxcbiAgYWNjZXNzOiAnYWMnLFxuICBhY2Nlc3Nfc3VidHlwZTogJ2FjcycsXG4gIGRldmljZV9tb2RlbDogJ2RtJyxcbiAgbGFuZ3VhZ2U6ICdsYW5nJyxcbiAgZGV2aWNlX3R5cGU6ICdkdCcsXG4gIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuICBkZXZpY2VfbmFtZTogJ2RuJyxcbiAgcGxhdGZvcm1fdmVyc2lvbjogJ3B2JyxcbiAgaWRfdHlwZTogJ2l0JyxcbiAgZm9udF9zaXplX3NldHRpbmc6ICdmc3MnLFxuICBvc192ZXJzaW9uOiAnb3YnLFxuICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcbiAgcGxhdGZvcm1fc2RrX3ZlcnNpb246ICdwc3YnLFxuICBkZXZpY2VfYnJhbmQ6ICdkYicsXG4gIGFwcGtleTogJ2FrJyxcbiAgX2lkOiAnaWQnLFxuICBpZF90cmFja2luZzogJ2l0cicsXG4gIGltcHJpbnQ6ICdpbXAnLFxuICBzZGtfdmVyc2lvbjogJ3N2JyxcbiAgcmVzb2x1dGlvbjogJ3JsJyxcbiAgdGVzdFRva2VuOiAndHRuJyxcbiAgbWluaWFwcERlYnVnSWQ6ICdkaycsXG4gIHBpeGVsX3JhdGlvOiAncHInLFxufTtcblxudmFyIGlkTWFwID0ge1xuICB1dWlkOiAndWQnLFxuICB1bmlvbmlkOiAndW5kJyxcbiAgb3BlbmlkOiAnb2QnLFxuICBhbm9ueW1vdXNpZDogJ25kJyxcbiAgYWxpcGF5X2lkOiAnYWQnLFxuICBkZXZpY2VfaWQ6ICdkZCcsXG4gIHVzZXJpZDogJ3B1aWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXG4gIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG4gICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIFxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG1hcFtrZXldKSB7XG4gICAgICByZXN1bHRbbWFwW2tleV1dID0gb2JqW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVBbmFseXRpY3MoYW5hbHl0aWNzLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGlmIChhbmFseXRpY3MpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuICAgICAgaWYgKGFuYWx5dGljc1twcm9wXSkge1xuICAgICAgICByZXN1bHRbbWFwW3Byb3BdXSA9IGFuYWx5dGljc1twcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL21hbmdsZV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCcuL2pzb25VdGlsJyk7XG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5mdW5jdGlvbiBJbXByaW50TWFuYWdlcigpIHtcbiAgdmFyIF9pbXByaW50ID0gJyc7XG4gIHZhciB0ID0gdGhpcztcbiAgLy8gdmFyIGltcHJpbnRWZXJzaW9uID0gXCJpbXByaW50VmVyc2lvblwiO1xuICB0aGlzLnNldCA9IGZ1bmN0aW9uIChpbXByaW50KSB7XG4gICAgaWYgKHR5cGVvZiBpbXByaW50ID09PSAnc3RyaW5nJykge1xuICAgICAgX2ltcHJpbnQgPSBpbXByaW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBfaW1wcmludCA9IGJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoaW1wcmludCkpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2ltcHJpbnQ7XG4gIH07XG4gIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShiYXNlNjQuZGVjb2RlKF9pbXByaW50KSk7XG4gIH07XG4gIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaW1wb2JqID0gdC5nZXRJbXBPYmooKTtcbiAgICByZXR1cm4gaW1wb2JqID8gaW1wb2JqW25hbWVdIHx8IFwiXCIgOiBcIlwiO1xuICB9O1xuXG4gIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX2ltcHJpbnQpIHtcbiAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLklNUFJJTlQsIF9pbXByaW50KTtcbiAgICB9XG4gIH07XG59XG52YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbXByaW50TWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9pbXByaW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBiNjRjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbnZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGJpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHRbYmluLmNoYXJBdChpKV0gPSBpO1xuICByZXR1cm4gdDtcbn0pKGI2NGNoYXJzKTtcbnZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xudmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuICB2YXIgY2M7XG4gIGlmIChjLmxlbmd0aCA8IDIpIHtcbiAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICByZXR1cm4gY2MgPCAxMjggPyBjIDogY2MgPCAyMDQ4ID8gZnJvbUNoYXJDb2RlKDE5MiB8IGNjID4+PiA2KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKSA6IGZyb21DaGFyQ29kZSgyMjQgfCBjYyA+Pj4gMTIgJiAxNSkgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG4gIH0gZWxzZSB7XG4gICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKDI0MCB8IGNjID4+PiAxOCAmIDcpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiAxMiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcbiAgfVxufTtcbnZhciByZV91dG9iID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRkZdfFteXFx4MDAtXFx4N0ZdL2c7XG52YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7XG4gIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG59O1xudmFyIGNiX2VuY29kZSA9IGZ1bmN0aW9uIChjY2MpIHtcbiAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG4gICAgb3JkID0gY2NjLmNoYXJDb2RlQXQoMCkgPDwgMTYgfCAoY2NjLmxlbmd0aCA+IDEgPyBjY2MuY2hhckNvZGVBdCgxKSA6IDApIDw8IDggfCAoY2NjLmxlbmd0aCA+IDIgPyBjY2MuY2hhckNvZGVBdCgyKSA6IDApLFxuICAgIGNoYXJzID0gW2I2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDE4KSwgYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTIgJiA2MyksIHBhZGxlbiA+PSAyID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gNiAmIDYzKSwgcGFkbGVuID49IDEgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkICYgNjMpXTtcbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufTtcbnZhciBidG9hID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xufTtcbnZhciBfZW5jb2RlID0gZnVuY3Rpb24gKHUpIHtcbiAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG59O1xudmFyIGVuY29kZSA9IGZ1bmN0aW9uICh1LCB1cmlzYWZlKSB7XG4gIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG4gICAgcmV0dXJuIG0wID09ICcrJyA/ICctJyA6ICdfJztcbiAgfSkucmVwbGFjZSgvXFw9L2csICcnKTtcbn07XG4vLyB2YXIgZW5jb2RlVVJJID0gZnVuY3Rpb24gKHUpIHtcbi8vICAgcmV0dXJuIGVuY29kZSh1LCB0cnVlKTtcbi8vIH07XG52YXIgcmVfYnRvdSA9IG5ldyBSZWdFeHAoWydbw4Atw59dW8KALcK/XScsICdbw6Atw69dW8KALcK/XXsyfScsICdbw7Atw7ddW8KALcK/XXszfSddLmpvaW4oJ3wnKSwgJ2cnKTtcbnZhciBjYl9idG91ID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuICBjYXNlIDQ6XG4gICAgdmFyIGNwID0gKDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4IHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDMpLCBvZmZzZXQgPSBjcCAtIDY1NTM2O1xuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcbiAgY2FzZSAzOlxuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDE1ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKTtcbiAgZGVmYXVsdDpcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgzMSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKTtcbiAgfVxufTtcbnZhciBidG91ID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcbn07XG52YXIgY2JfZGVjb2RlID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgdmFyIGxlbiA9IGNjY2MubGVuZ3RoLFxuICAgIHBhZGxlbiA9IGxlbiAlIDQsXG4gICAgbiA9IChsZW4gPiAwID8gYjY0dGFiW2NjY2MuY2hhckF0KDApXSA8PCAxOCA6IDApIHwgKGxlbiA+IDEgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMSldIDw8IDEyIDogMCkgfCAobGVuID4gMiA/IGI2NHRhYltjY2NjLmNoYXJBdCgyKV0gPDwgNiA6IDApIHwgKGxlbiA+IDMgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMyldIDogMCksXG4gICAgY2hhcnMgPSBbZnJvbUNoYXJDb2RlKG4gPj4+IDE2KSwgZnJvbUNoYXJDb2RlKG4gPj4+IDggJiAyNTUpLCBmcm9tQ2hhckNvZGUobiAmIDI1NSldO1xuICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG4gIHJldHVybiBjaGFycy5qb2luKCcnKTtcbn07XG52YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBhLnJlcGxhY2UoL1tcXHNcXFNdezEsNH0vZywgY2JfZGVjb2RlKTtcbn07XG52YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBidG91KGF0b2IoYSkpO1xufTtcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuICByZXR1cm4gX2RlY29kZShTdHJpbmcoYSkucmVwbGFjZSgvWy1fXS9nLCBmdW5jdGlvbiAobTApIHtcbiAgICByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nO1xuICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vYmFzZTY0LmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbFBlcmZvcm1hbmNlLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGR1cmF0aW9uQXJyYXkgPSBbXTtcbmZ1bmN0aW9uIGdldE1ldHJpYygpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZW50cmllcyA9IGR1cmF0aW9uQXJyYXk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBtYXggPSAtSW5maW5pdHksIG1pbiA9IEluZmluaXR5LCBzdW0gPSAwLCBhdmVyYWdlID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gZW50cmllc1tpXTtcbiAgICAgIGlmIChtYXggPCBpdGVtKSB7XG4gICAgICAgIG1heCA9IGl0ZW07XG4gICAgICB9IFxuICAgICAgaWYgKG1pbiA+PSBpdGVtKSB7XG4gICAgICAgIG1pbiA9IGl0ZW07XG4gICAgICB9XG4gICAgICBzdW0gKz0gaXRlbTtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGF2ZXJhZ2UgPSBzdW0gLyByZXN1bHQubGVuZ3RoO1xuICAgICAgYXZlcmFnZSA9IE1hdGguZmxvb3IoYXZlcmFnZSAqIDEwMCkgLyAxMDA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBtYXg6IG1heCxcbiAgICAgIG1pbjogbWluLFxuICAgICAgYXZlcmFnZTogYXZlcmFnZVxuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICB9XG59XG5leHBvcnRzLmdldE1ldHJpYyA9IGdldE1ldHJpYztcblxuZnVuY3Rpb24gZ2V0TWV0cmljV2ViKCkge1xuICB0cnkge1xuICAgIHZhciBlbnRyaWVzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllcygpOyAgXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciB3ZWJEb21haW5zID0gW2FwbHVzU3RhdGljLldFQl9FVkVOVF9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9QQ19QVl9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9XQVBfUFZfU1VGRklYXTtcbiAgICB2YXIgbWF4ID0gLUluZmluaXR5LCBtaW4gPSBJbmZpbml0eSwgc3VtID0gMCwgYXZlcmFnZSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGVudHJpZXNbaV07XG4gICAgICB2YXIgdHlwZU1hdGNoID0gWydiZWFjb24nLCAnb3RoZXInLCAnaW1nJ10uc29tZShmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiB2ID09PSBpdGVtLmluaXRpYXRvclR5cGU7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdmFyIGRvbWFpbk1hdGNoID0gd2ViRG9tYWlucy5zb21lKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZS5pbmRleE9mKHYpID4gLTE7XG4gICAgICB9KTtcbiAgXG4gICAgICBpZiAodHlwZU1hdGNoICYmIGRvbWFpbk1hdGNoKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IGl0ZW0uZHVyYXRpb247XG4gICAgICAgIGlmIChtYXggPCBkdXJhdGlvbikge1xuICAgICAgICAgIG1heCA9IGR1cmF0aW9uO1xuICAgICAgICB9IFxuICAgICAgICBpZiAobWluID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgbWluID0gZHVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgc3VtICs9IGR1cmF0aW9uO1xuICAgICAgICByZXN1bHQucHVzaChkdXJhdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgYXZlcmFnZSA9IHN1bSAvIHJlc3VsdC5sZW5ndGg7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBtYXg6IG1heCxcbiAgICAgIG1pbjogbWluLFxuICAgICAgYXZlcmFnZTogYXZlcmFnZVxuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICB9XG59O1xuXG5leHBvcnRzLmdldE1ldHJpY1dlYiA9IGdldE1ldHJpY1dlYjtcblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24oaXRlbSkge1xuICB2YXIgZCA9IGl0ZW0uZW5kIC0gaXRlbS5zdGFydDtcbiAgLy/pgJrov4d3eC5yZXF1ZXN05Y+R6LW355qE6ICX5pe26LaF6L+HIDMwMG1zIFxuICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInICYmIGQgPj0gMzAwKSB7XG4gICAgZHVyYXRpb25BcnJheS5wdXNoKGQpO1xuICB9IGVsc2Uge1xuICAgIGR1cmF0aW9uQXJyYXkgPSBbXTtcbiAgfVxufTtcblxuZXhwb3J0cy5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gIC8v6K+35rGC5bm25Y+R5pWw5LiN6LaF6L+HIDEwIOS4qiAgXG4gIGlmIChkdXJhdGlvbkFycmF5Lmxlbmd0aCA+PSAxMCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBhcGx1cy5fcmVjb3JkKGFwbHVzU3RhdGljLlBFUkZPUk1BTkNFX1dBUklORywgJ09USEVSJywge30pO1xuICAgIGR1cmF0aW9uQXJyYXkgPSBbXTtcbiAgfVxufTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICBkdXJhdGlvbkFycmF5ID0gW107XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxQZXJmb3JtYW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxSZW1vdGVDZmcuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciBhcGx1c1V0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGF0YScpO1xudmFyIGNhY2hlID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9jYWNoZScpO1xudmFyIEFQTFVTX1JFTU9URV9DT05GSUcgPSAnQVBMVVNfUkVNT1RFX0NPTkZJRyc7XG5cblxuLyoqXG4gKiDlhajln4vngrnov5znqIvphY3nva4g6K+75Y+WXG4qL1xuXG5mdW5jdGlvbiBnZXRMb2NhbFN0YXR1cyhrZXkpIHtcbiAgdmFyIGxzY2ZnO1xuICBpZiAodXRpbEdvbGRsb2cuaXNXZWIoKSkge1xuICAgIGxzY2ZnID0gdXRpbERhdGEuZ2V0THNSZW1vdGVDZmcoQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG4gIH0gZWxzZSB7XG4gICAgbHNjZmcgPSBjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG4gIH1cbiAgcmV0dXJuIGxzY2ZnICYmIGxzY2ZnW2tleV07XG59O1xuXG5mdW5jdGlvbiBzZXRBdXRvRXZlbnRTdGF0dXMoc3RhdHVzKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFLCBzdGF0dXNdXG4gIH0pO1xufTtcblxuZXhwb3J0cy5nZXRBdXRvRXZlbnRTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMnKTtcbiAgXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBzZXREZXZpY2VTdGF0dXMoZW5hYmxlKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfREVWSUNFX0VOQUJMRSwgZW5hYmxlXVxuICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0RGV2aWNlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICByZXR1cm4gZ2V0TG9jYWxTdGF0dXMoJ2N1cnJlbnREZXZpY2VFbmFibGUnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFKTtcbn07XG5cbmZ1bmN0aW9uIHNldEF1dG9QYWdlU3RhdHVzKHN0YXR1cykge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSwgc3RhdHVzXVxuICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0QXV0b1BhZ2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMnKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIHNldEF1dG9UcmFja1N0YXR1cyhzdGF0dXMpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUsIHN0YXR1c11cbiAgfSk7XG59O1xuXG5cbmV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgcmVzdWx0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRURfUkVNT1RFKSB8fCBnZXRMb2NhbFN0YXR1cygnY29kZWxlc3NTdGF0dXMnKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZW5hYmxlQ2ZnID0gZnVuY3Rpb24oY2ZnKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGlmIChjZmcpIHtcbiAgICAvLyBA5paH5b+DIGNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyA9IDEg5YWz6Zet6Ieq5YqocHZcbiAgICBzZXRBdXRvRXZlbnRTdGF0dXMoY2ZnLmNvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cyk7XG4gICAgc2V0QXV0b1BhZ2VTdGF0dXMoY2ZnLmNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyk7XG4gICAgc2V0QXV0b1RyYWNrU3RhdHVzKGNmZy5jb2RlbGVzc1N0YXR1cyk7XG4gICAgc2V0RGV2aWNlU3RhdHVzKGNmZy5jdXJyZW50RGV2aWNlRW5hYmxlKTtcbiAgICBcbiAgICBpZiAoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlICYmIGNmZy5ldmVudFNhbXBsaW5nUmF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRVZFTlRfTElNSVRSQVRFUywgYXBsdXNVdGlsLm1hcEV2ZW50U2FtcGxlUmF0ZXMoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlKV1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnQgJiYgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URSwgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50XVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5cblxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUmVtb3RlQ2ZnLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFRyaW0gPSByZXF1aXJlKCcuL3V0aWxUcmltJyk7XG52YXIgdXRpbFN0b3JlID0gcmVxdWlyZSgnLi91dGlsU3RvcmUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2pzb25VdGlsJyk7XG52YXIgYXBsdXNVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRyeVRvRGVjb2RlVVJJQ29tcG9uZW50OiBmdW5jdGlvbiAodmFsLCBkZWZhdWx0X3ZhbCkge1xuICAgIHZhciB2ID0gZGVmYXVsdF92YWwgfHwgJyc7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdjtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiDlsIblvaLlpoIgXCJwYWdlSWQ9MTIzOyBzaXRlSWQ9NDU2XCIg55qE5YaF5a656Kej5p6Q5Li6IE9iamVjdFxuICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2RpY3RdIHtPYmplY3R9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHBhcnNlU2VtaWNvbG9uQ29udGVudDogZnVuY3Rpb24gKHMsIGRpY3QsIHVuZGVjb2RlKSB7XG4gICAgZGljdCA9IGRpY3QgfHwge307XG4gICAgdmFyIGEgPSBzLnNwbGl0KCc7Jyk7XG4gICAgdmFyIGo7XG4gICAgdmFyIGFfbGVuID0gYS5sZW5ndGg7XG4gICAgdmFyIGEyO1xuXG4gICAgZm9yIChqID0gMDsgaiA8IGFfbGVuOyBqKyspIHtcbiAgICAgIGEyID0gYVtqXS5zcGxpdCgnPScpO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxUcmltLnRyaW0oYTIuc2xpY2UoMSkuam9pbignPScpKTtcbiAgICAgIGRpY3RbdXRpbFRyaW0udHJpbShhMlswXSkgfHwgJyddID0gdW5kZWNvZGUgPyBfdmFsdWUgOiB0aGlzLnRyeVRvRGVjb2RlVVJJQ29tcG9uZW50KF92YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpY3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWwhuS4gOS4qiBub2RlIGxpc3Qg6L2s5Li65pWw57uEXG4gICAqIEBwYXJhbSBub2RlcyB7Tm9kZUxpc3R9XG4gICAqIOWPguinge+8mmh0dHA6Ly93d3cucGxhbmFiYy5uZXQvMjAxMC8wMS8wNi9hcmd1bWVudHNfdG9fYXJyYXkvXG4gICAqL1xuICBub2RlTGlzdFRvQXJyYXk6IGZ1bmN0aW9uIChub2Rlcykge1xuICAgIHZhciBhcnI7XG4gICAgdmFyIGxlbmd0aDtcblxuICAgIHRyeSB7XG4gICAgICAvLyB3b3JrcyBpbiBldmVyeSBicm93c2VyIGV4Y2VwdCBJRVxuICAgICAgYXJyID0gW10uc2xpY2UuY2FsbChub2Rlcyk7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gc2xvd2VyLCBidXQgd29ya3MgaW4gSUVcbiAgICAgIGFyciA9IFtdO1xuICAgICAgbGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyci5wdXNoKG5vZGVzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG4gICAgaWYgKHV0aWxTdG9yZS5nZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdmFyIF9sc19jbmEgPSAnJztcbiAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KEVUQUdfU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKF92YWx1ZSkge1xuICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnXycpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19jbmEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5FVEFHX1NUT1JBR0VfS0VZLCAgdGhpcy50b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcbiAgc2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCB0b2RheSwgY25hKSB7XG4gICAgaWYgKGNuYSAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHV0aWxTdG9yZS5zZXQoRVRBR19TVE9SQUdFX0tFWSwgIHRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuICAgIH1cbiAgfSxcbiAgXG4gIGdldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgZGF0ZSkge1xuICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHZhciBfbHNfaW1wdiA9ICcnO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoSU1QUklOVF9TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCd8fCcpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19pbXB2ID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2xzX2ltcHYgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2ltcHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIHNldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXksIGltcHYpIHtcbiAgICBpZiAoaW1wdiAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHV0aWxTdG9yZS5zZXQoSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXkgKyAnfHwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGltcHYpKTtcbiAgICB9XG4gIH0sXG5cblxuICBzZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgdG9kYXksIGNmZykge1xuICAgIGlmIChjZmcgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgY2xvbmVDZmcgPSB1dGlsRGFzaC5jbG9uZURlZXAoY2ZnKTtcbiAgICAgIGlmICh0eXBlb2YgY2xvbmVDZmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNsb25lQ2ZnID0gSlNPTi5zdHJpbmdpZnkoY2xvbmVDZmcpO1xuICAgICAgfVxuICAgICAgdXRpbFN0b3JlLnNldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZLCB0b2RheSArICd8fCcgKyBlbmNvZGVVUklDb21wb25lbnQoY2xvbmVDZmcpKTtcbiAgICB9XG4gIH0sXG5cblxuICBnZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHZhciBfbHNfcmVtb3RlQ2ZnID0gJyc7XG4gICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZKTtcbiAgICAgIGlmIChfdmFsdWUpIHtcbiAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ3x8JykgfHwgW107XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgX2xzX3JlbW90ZUNmZyA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9sc19yZW1vdGVDZmcgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoX2xzX3JlbW90ZUNmZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuICAgIHZhciBlZ1VybCA9IHVybCB8fCAnLy9sb2cubW1zdGF0LmNvbS9lZy5qcyc7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcbiAgICAgIHJob3N0X3YgPSBhcGx1c1V0aWwuZml4RG9tYWluKHJob3N0X3YpLnJlcGxhY2UoL1xcL1xcdysuZ2lmJC8sJycpO1xuICAgICAgLy8gdmFyIHJlZyA9IC9bW2EtenxcXC18XFxffDAtOVxcLl0rW2EtenxcXC18XFxffDAtOV0oOlxcZCopPy87XG4gICAgICAvLyB2YXIgY3VzdG9tX2hvc3QgPSByaG9zdF92Lm1hdGNoKHJlZyk7XG4gICAgICAvLyBpZiAoY3VzdG9tX2hvc3QgJiYgY3VzdG9tX2hvc3RbMF0pIHtcbiAgICAgIC8vICAgLy8gZWdVcmwgPSBlZ1VybC5yZXBsYWNlKHJlZywgY3VzdG9tX2hvc3RbMF0pO1xuICAgICAgLy8gfVxuICAgICAgZWdVcmwgPSByaG9zdF92ICsgJy9lZy5qcyc7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgIH1cbiAgICByZXR1cm4gZWdVcmw7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOWvueWtl+espuS4sui/m+ihjHRyaW3lpITnkIZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuICogQHBhcmFtIHMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJpbShzKSB7XG4gIHJldHVybiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSA/IHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpIDogJyc7XG59O1xuZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxUcmltLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCB2KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIC8vIOe7j+i/h3Rlc3TkuYvlkI5nZXTlupTor6XkuI3kvJrmnInpl67pophcbiAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oayk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcbiAgdGVzdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXN0S2V5ID0gJ2dyZXlfdGVzdF9rZXknO1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiAoaykge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmFzc2lnbiA9IHJlcXVpcmUoJy4vYXNzaWduJyk7XG5cbi8qKlxuICog55Sf5oiQ5LiA5Liq55So5LqO6YG/5YWN57yT5a2Y55qE6ZqP5py65pWwXG4gKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuICog5Li65LqG5YeP5bCR56Kw5pKe77yM5L2/55SoIDE2IOi/m+WItuaVsOWtl1xuICpcbiAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcbiAqL1xuZXhwb3J0cy5tYWtlQ2FjaGVOdW0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcbn07XG5cbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuS7peWtl+espuS4siBzMiDlvIDlpLRcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNTdGFydFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcbiAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xufTtcbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNFbmRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG4gIHZhciBsMSA9IHMxLmxlbmd0aCwgbDIgPSBzMi5sZW5ndGg7XG4gIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG59O1xuXG5leHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChmbihhcnJbaV0pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcbn07XG5cbmV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG4gIGlmKGlzTmFOKSB7XG4gICAgcmV0dXJuIGlzTmFOKHYpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2ICE9PSB2O1xuICB9XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNDb250YWluID0gZnVuY3Rpb24gKHMxLCBzMikge1xuICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcbn07XG5cbi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbnZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBbXSA6IHt9O1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcbiAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdvYmo7XG59O1xuXG5leHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblxuLyoqXG4gKiDojrflj5Z1cmzlj4LmlbAs5LuF6ZmQd2Vi44CBaDVcbiAqL1xudmFyIGdldFVybFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlZ2V4ID0gL1s/Jl0oW149I10rKT0oW14mI10qKS9nO1xuICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKHVybCkpIHtcbiAgICBwYXJhbXNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbmV4cG9ydHMuZ2V0VXJsUGFyYW1zID0gZ2V0VXJsUGFyYW1zO1xuXG4vKipcbiAqIOWIpOaWreepuuWvueixoVxuICovXG52YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgaWYoIW8pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgZm9yICh2YXIgayBpbiBvKSB7XG4gICAgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuaXNFbXB0eU9iamVjdCA9IGlzRW1wdHlPYmplY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyoqXG4gKiDlr7nosaFtZXJnZVxuICogIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChuZXh0U291cmNlICE9PSBudWxsKSB7IC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbFxuICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfSh0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1heENvdW50KSB7XG4gIHZhciBfbWF4Q291bnQgPSBtYXhDb3VudDtcbiAgdmFyIF9pdGVtcyA9IFtdO1xuXG4gIHRoaXMuZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBfbWF4Q291bnQgPT09ICdudW1iZXInICYmIHRoaXMuc2l6ZSgpID49IF9tYXhDb3VudCkge1xuICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgfVxuXG4gICAgX2l0ZW1zLnB1c2goaXRlbSk7XG4gIH07XG5cbiAgdGhpcy5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMuc2hpZnQoKTtcbiAgfTtcblxuICB0aGlzLmZyb250ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXNbMF07XG4gIH07XG5cbiAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgX2l0ZW1zLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgdGhpcy5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoO1xuICB9O1xuXG4gIHRoaXMuaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcztcbiAgfTtcblxuICB0aGlzLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHVsb2coKS5pKCctLS1xdWV1ZTogJywgX2l0ZW1zLnRvU3RyaW5nKCkpO1xuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgY3VycmVudFBhdGggPSBcIlwiO1xudmFyIHBhZ2VPcHRpb25NYXAgPSB7fTtcblxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmICghcGF0aCB8fCBwYXRoID09PSAnLScpIHtcbiAgICByZXR1cm4gXCItXCI7XG4gIH1cbiAgdmFyIHFzID0gW107XG4gIGZvciAodmFyIHEgaW4gcXVlcnkpIHtcbiAgICBxcy5wdXNoKHEgKyAnPScgKyBxdWVyeVtxXSk7XG4gIH1cbiAgdmFyIHFzcyA9IHFzLmpvaW4oJyYnKTtcbiAgcmV0dXJuIHFzcyA/IHBhdGggKyAnPycgKyBxc3MgOiBwYXRoO1xufTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVBhdGggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGN1cnJlbnRQYXRoO1xufTtcblxuZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICBjdXJyZW50UGF0aCA9IHBhdGg7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBwYWdlT3B0aW9uTWFwW3BhdGhdO1xuICB9XG59O1xuXG5leHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmIChwYXRoKSB7XG4gICAgcGFnZU9wdGlvbk1hcFtwYXRoXSA9IHF1ZXJ5O1xuICB9XG59O1xuXG5leHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gYnVpbGRQYXRoKHBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xufTtcblxuZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBtZXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fTtcbiAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcbiAgaWYgKG1ldGEuaGFzaE1vZGUpIHtcbiAgICByZWFsUGF0aCA9IGxvY2F0aW9uLmhhc2g7XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyDlr7nkuo7liqjmgIHot6/nlLHvvIzmlK/mjIHnlKjmiLfkvKDlhaXmraPliJnov5vooYzljLnphY1cbiAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGEpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gcmVhbFBhdGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChtZXRhW2tleV0gJiYgbWV0YVtrZXldLnJlZ1J1bGUpIHtcbiAgICAgICAgICByZWFsUGF0aCA9IG1ldGFba2V5XS5yZWdSdWxlLnRlc3QocmVhbFBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy9cbiAgfVxuICByZXR1cm4gbWV0YVtyZWFsUGF0aF07XG59O1xuXG52YXIgdWxvZyA9IHJlcXVpcmUoXCJAdXRpbHMvdWxvZ1wiKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZShcIkB1dGlscy9lYWNoTWFwXCIpO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmV4cG9ydHMuZ2V0V3hUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKCFwYXRoKSByZXR1cm4gXCJcIjtcbiAgdmFyIG1pbmkgPSByZXF1aXJlKFwiQHV0aWxzL21pbmlcIik7XG4gIHZhciBwbGF0VHlwZSA9IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG4gIHZhciB0ID0gXCJcIjtcbiAgdHJ5IHtcbiAgICBpZiAocGxhdFR5cGUgPT09ICd3eCcgJiYgX193eENvbmZpZykge1xuICAgICAgdmFyIHd4Q29uZmlnID0gX193eENvbmZpZzsgICAgICBcbiAgICAgIHZhciBwYWdlID0gX193eENvbmZpZy5wYWdlIHx8IHt9O1xuICAgICAgdmFyIHJvdXRlID0gcGFnZVtwYXRoXSB8fCBwYWdlW3BhdGggKyBcIi5odG1sXCJdO1xuICAgICAgdmFyIG4gPSB7fSwgaSA9IHt9O1xuICAgICAgaWYgKHd4Q29uZmlnLmdsb2JhbCAmJiB3eENvbmZpZy5nbG9iYWwud2luZG93ICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuICAgICAgICBuLnRpdGxlID0gd3hDb25maWcuZ2xvYmFsLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuICAgICAgfVxuICAgICAgaWYgKHJvdXRlICYmIHJvdXRlLndpbmRvdyAmJiByb3V0ZS53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuICAgICAgICBpLnRpdGxlID0gcm91dGUud2luZG93Lm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghaS50aXRsZSAmJiBfX3d4QXBwQ29kZV9fKSB7XG4gICAgICAgIHZhciBhcHBKU09OID0gX193eEFwcENvZGVfX1twYXRoICsgXCIuanNvblwiXTtcbiAgICAgICAgaWYgKGFwcEpTT04gJiYgYXBwSlNPTi5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG4gICAgICAgICAgaS50aXRsZSA9IGFwcEpTT04ubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcbiAgICAgICAgfSBcbiAgICAgIH1cbiAgICAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICBpZiAoY3R4Lmdsb2JhbFRpdGxlTWFwKSB7XG4gICAgICAgIGVhY2hNYXAoY3R4Lmdsb2JhbFRpdGxlTWFwLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICAgICAgICBpZiAoa2V5ID09PSBwYXRoKSB7XG4gICAgICAgICAgICB0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkge1xuICAgICAgICB0ID0gaS50aXRsZSB8fCBuLnRpdGxlIHx8ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ2N1cnJlbnQgcGxhdGZvcm0gY2FuIG5vdCB0cmFjayBwYWdlIHRpdGxlJyk7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZU5hbWU7XG59O1xuXG5leHBvcnRzLmdldFBhZ2VUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlVGl0bGUgfHwgdGhpcy5nZXRXeFRpdGxlKHBhdGgpO1xufTtcblxuZXhwb3J0cy5nZXRWVFJlYWx0aW1lQ29kZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICB2YXIgcXVlcnkgPSBwYWdlT3B0aW9uTWFwW2N1cnJlbnRQYXRoXSB8fCB7fTtcbiAgICB2YXIgcmVnRXhwID0gL15cXCR2dF8vO1xuICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG4gICAgcmV0dXJuIHNjZW5lICYmIHJlZ0V4cC50ZXN0KHNjZW5lKSAmJiBzY2VuZS5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuICBpZiAoT2JqZWN0ICYmIE9iamVjdC5rZXlzKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgazEgPSBrZXlzW2ldO1xuICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgICAgY2FsbGJhY2soaywgbWFwW2tdKTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbE1vbml0b3IuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuZnVuY3Rpb24gcmFuaygpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgaWYgKGN0eC5la3ZSYW5rKSB7XG4gICAgY3R4LmVrdlJhbmsrKztcbiAgfSBlbHNlIHtcbiAgICBjdHguZWt2UmFuayA9IDE7XG4gIH1cbiAgcmV0dXJuIGN0eC5la3ZSYW5rO1xufTtcbmV4cG9ydHMucmFuayA9IHJhbms7XG5cbmZ1bmN0aW9uIGNsZWFyKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguZWt2UmFuayA9IDA7XG59XG5leHBvcnRzLmNsZWFyID0gY2xlYXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbE1vbml0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfcGx1Z2luX21pbmkvbGliX2F1dG9fY29sbGVjdC9pbmplY3RfcGFnZS5qc1xuICog6Ieq5Yqo6YeH6ZuG5bCP56iL5bqP5L+h5oGv55qE5o+S5Lu2IC0g6aG16Z2i5rOo5YWlXG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvdXRpbEZ1bmN0aW9uJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHVtVXRpbHMgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG52YXIgdXRpbE9iamVjdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsT2JqZWN0Jyk7XG5cbmZ1bmN0aW9uIGdldFV0bVBhcmFtc09iaiAocSkge1xuICB2YXIgb2JqID0ge307XG4gIHRyeSB7XG4gICAgZWFjaE1hcChxLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcbiAgICAgIGlmKGsuaW5kZXhPZigndXRtXycpID09PSAwKSB7XG4gICAgICAgIG9ialtrXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG4gIHZhciBvcHRpb25zID0gcGFnZS5vcHRpb25zIHx8IHt9O1xuICB2YXIgbGlua1Bhcm1hcyA9IGZvcm1hdC5vYmoycGFyYW0ob3B0aW9ucywgdHJ1ZSk7XG4gIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcbiAgaWYobGlua1Bhcm1hcykge1xuICAgIHJvdXRlID0gcm91dGUgKyAnPycgKyBsaW5rUGFybWFzO1xuICB9IFxuICBpZiAoIW9wdC5xdWVyeSkge1xuICAgIG9wdC5xdWVyeSA9IHt9O1xuICB9XG4gIG9wdC5xdWVyeS4kJF9zaGFyZV91aWQgPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ19hbm9ueV9pZCcpIHx8IGN0eC5hcGx1cy5fX0VUQUdfX0NOQV9fSURfXztcbiAgb3B0LnF1ZXJ5LiQkX3V0bV9tZWRpdW0gPSAzO1xuXG4gIC8vIG9uU2hhcmVBcHBNZXNzYWdl5rKh5pyJcmV0dXJuIOaIliBvblNoYXJlVGltZWxpbmXml7bvvIzlhaXlj4JvcHTnmoRwYXRo5LiOcXVlcnnkuLrnqbrvvIzmraTml7bnlKhjdXJyZW50UGFnZeeahHBhdGjlkoxvcHRpb25z5YWc5bqVXG4gIG9wdC5xdWVyeSA9IHVtVXRpbHMuYXNzaWduKHt9LCBvcHRpb25zLCBvcHQucXVlcnkpO1xuICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXG4gIHZhciBhcHBlbmRQYXJhbXMgPSAnJCRfc2hhcmVfdWlkPScgKyBvcHQucXVlcnkuJCRfc2hhcmVfdWlkICsgJyYkJF91dG1fbWVkaXVtPTMnO1xuIFxuICBpZiAocGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgIG9wdC5wYXRoID0gcGF0aCArICcmJyArIGFwcGVuZFBhcmFtcztcbiAgfSBlbHNlIHtcbiAgICBvcHQucGF0aCA9IHBhdGggKyAnPycgKyBhcHBlbmRQYXJhbXM7XG4gIH1cbiAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuICB9KTtcbiAgcmV0dXJuIG9wdDtcbn07XG5cbmZ1bmN0aW9uIG9uUHVsbERvd25SZWZyZXNoKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgb3B0ID0ge1xuICAgIHN0YXR1czogJ3JlYWR5J1xuICB9O1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBvblJlYWNoQm90dG9tKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBvcHQgPSB7XG4gICAgc3RhdHVzOiAncmVhZHknLFxuICAgIGNvbnRleHQ6IHRoYXRcbiAgfTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25SZWFjaEJvdHRvbScsIG9wdF1cbiAgfSk7XG59O1xuXG4vLyDpobXpnaLliqDovb1cbmZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIFBhZ2VNYW5hZ2VyLnNldFBhZ2VRdWVyeSh0aGlzLnJvdXRlLCBxdWVyeSk7XG4gICAgfVxuICAgIHVsb2coKS5pKCdQYWdlIG9uTG9hZDogJywgdGhpcy5yb3V0ZSwgcXVlcnkpO1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB1dGlsRnVuY3Rpb24ub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbigpe1xuICAgICAgLy8g5YWo5bGA5bGe5oCn6L+95YqgdXRt5Y+C5pWwXG4gICAgICBjdHguYXBsdXMuYXBwZW5kTWV0YUluZm8oYXBsdXNTdGF0aWMuR0xPQkFMX1BST1BFUlRZLCBnZXRVdG1QYXJhbXNPYmoocXVlcnkpKTtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgICBhcmd1bWVudHM6IFsnb25Mb2FkJywge1xuICAgICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgICBjb250ZXh0OiB0aGF0LFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICAvLyDpobXpnaLliqDovb3lrozlkI7mt7flhaVzZXREYXRh77yM5pa55L6/6Ieq5Yqo5pud5YWJ44CB6Ieq5Yqo54K55Ye7562J5o+S5Lu25L2/55SoXG4gICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJlc2V0Rm4oX2N1cnJlbnRQYWdlLCAnc2V0RGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywge1xuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoYXRcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnb25QYWdlTG9hZDogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZVNob3coKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG4gICAgdXRpbEZ1bmN0aW9uLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICAgIGFyZ3VtZW50czogWydvblNob3cnLCB7XG4gICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZVNob3c6ICcsIGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBvblBhZ2VSZWFkeSgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uUmVhZHknLCB7XG4gICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgY29udGV4dDogdGhhdFxuICAgICAgfV1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHVsb2coKS53KCdvblBhZ2VSZWFkeTogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZUhpZGUoKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcbiAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgfV1cbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZUhpZGU6ICcsIGUpO1xuICB9XG59O1xuXG4vLyBmdW5jdGlvbiBvblBhZ2VVbmxvYWQoKSB7XG4vLyAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4vLyAgIHRyeSB7XG4vLyAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuLy8gICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuLy8gICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcbi8vICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuLy8gICAgICAgfV1cbi8vICAgICB9KTtcbi8vICAgfSBjYXRjaChlKXtcbi8vICAgICB1bG9nKCkudygnb25QYWdlVW5sb2FkOiAnLCBlKTtcbi8vICAgfVxuLy8gfTtcblxuZnVuY3Rpb24gb25BcGx1c0NsayhlKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCB7XG4gICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICBldmVudDogZSxcbiAgICAgIGNvbnRleHQ6IHRoaXNcbiAgICB9XVxuICB9KTtcbn07XG5cbi8v6Kem5pG45LqL5Lu2XG5mdW5jdGlvbiBvbkFwbHVzVG91Y2goZSkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIHtcbiAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgIGNvbnRleHQ6IHRoYXQsXG4gICAgICBldmVudDogZSxcbiAgICB9XVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIHJld3JpdGVTaGFyZShvcHQpIHtcbiAgaWYgKG9wdC5vblNoYXJlQXBwTWVzc2FnZSkge1xuICAgIHZhciBvbGRPblNoYXJlQXBwTWVzc2FnZSA9IG9wdC5vblNoYXJlQXBwTWVzc2FnZTtcbiAgICBvcHQub25TaGFyZUFwcE1lc3NhZ2UgPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVBcHBNZXNzYWdlLmNhbGwodGhpcywgcmVzKSB8fCB7fTtcbiAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlQXBwTWVzc2FnZScpO1xuICAgIH07XG4gIH1cbn07XG5cbi8vIGZ1bmN0aW9uIGF1dG9Ib29rTWFwKGtleSkge1xuLy8gICB2YXIgYWhNYXAgPSB7XG4vLyAgICAgZGF0YTogMSxcbi8vICAgICBvbkxvYWQ6IDEsXG4vLyAgICAgb25TaG93OiAxLFxuLy8gICAgIG9uUmVhZHk6IDEsXG4vLyAgICAgb25QdWxsRG93blJlZnJlc2g6IDEsXG4vLyAgICAgb25TaGFyZUFwcE1lc3NhZ2U6IDEsXG4vLyAgICAgb25TaGFyZUFwcE1lc3NhZ2U6IDEsXG4vLyAgICAgb25TaGFyZVRpbWVsaW5lOiAxLFxuLy8gICAgIG9uUmVhY2hCb3R0b206IDEsXG4vLyAgICAgb25QYWdlU2Nyb2xsOiAxLFxuLy8gICAgIG9uUmVzaXplOiAxLFxuLy8gICAgIG9uVGFiSXRlbVRhcDogMSxcbi8vICAgICBvbkhpZGU6IDEsXG4vLyAgICAgb25VbmxvYWQ6IDEsXG4vLyAgICAgb25BcGx1c1RvdWNoOiAxLFxuLy8gICAgIG9uQXBsdXNDbGs6IDFcbi8vICAgfTtcbi8vICAgcmV0dXJuICEhYWhNYXBba2V5XTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZ2V0TWV0aG9kcyhvcHRpb25zKSB7XG4vLyAgIHZhciByZXN1bHQgPSBbXTtcbi8vICAgZm9yICh2YXIgYSBpbiBvcHRpb25zKSB7XG4vLyAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2FdID09PSAnZnVuY3Rpb24nICYmICFhdXRvSG9va01hcChhKSkge1xuLy8gICAgICAgcmVzdWx0LnB1c2goYSk7XG4vLyAgICAgfVxuLy8gICB9XG4vLyAgIHJldHVybiByZXN1bHQ7XG4vLyB9O1xuXG4vLyBmdW5jdGlvbiBob29rQXV0b1RyYWNrTWV0aG9kcyhvcHRpb25zKSB7XG4vLyAgIHZhciBtZXRob2RzID0gZ2V0TWV0aG9kcyhvcHRpb25zKTtcbi8vICAgaWYgKG1ldGhvZHMgJiYgbWV0aG9kcy5sZW5ndGgpIHtcbi8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgIHV0aWxGdW5jdGlvbi5jbGlja19wcm94eShvcHRpb25zLCBtZXRob2RzW2ldKTtcbi8vICAgICB9XG4vLyAgIH1cbi8vIH1cblxuLy8g5YiG5Lqr5pyL5Y+L5ZyIXG5mdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcbiAgaWYgKG9wdC5vblNoYXJlVGltZWxpbmUpIHtcbiAgICB2YXIgb2xkT25TaGFyZVRpbWVsaW5lID0gb3B0Lm9uU2hhcmVUaW1lbGluZTtcbiAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlVGltZWxpbmUuY2FsbCh0aGlzLCByZXMpIHx8IHt9O1xuICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVUaW1lbGluZScpO1xuICAgIH07XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluamVjdFBhZ2UoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuICAgIHZhciBvbGRQYWdlQWZ0ZXI7XG4gICAgaWYgKG9sZFBhZ2UuYWZ0ZXIpIHtcbiAgICAgIG9sZFBhZ2VBZnRlciA9IG9sZFBhZ2UuYWZ0ZXI7XG4gICAgfVxuICAgIFxuICAgIFBhZ2UgPSBmdW5jdGlvbihwYWdlT3B0aW9ucykgeyAgICAgIFxuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uVW5sb2FkJywgb25QYWdlSGlkZSk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25Mb2FkJywgb25QYWdlTG9hZCk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFkeScsIG9uUGFnZVJlYWR5KTtcbiAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblB1bGxEb3duUmVmcmVzaCcsIG9uUHVsbERvd25SZWZyZXNoKTtcbiAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWNoQm90dG9tJywgb25SZWFjaEJvdHRvbSk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c0NsaycsIG9uQXBsdXNDbGspO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uQXBsdXNUb3VjaCcsIG9uQXBsdXNUb3VjaCk7XG5cbiAgICAgIHJld3JpdGVTaGFyZShwYWdlT3B0aW9ucyk7XG4gICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG4gICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhwYWdlT3B0aW9ucyk7XG4gICAgICBvbGRQYWdlKHBhZ2VPcHRpb25zKTtcbiAgICB9O1xuICAgIC8vIOmAgumFjeeZvuW6pnN0YXJ0bWluaXByb2dyYW1cbiAgICBpZiAob2xkUGFnZUFmdGVyKSB7XG4gICAgICBQYWdlLmFmdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG9sZFBhZ2VBZnRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdQYWdlIGhvb2sgZXJyb3InKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5qZWN0Q29tcG9uZW50KCkge1xuICB0cnkge1xuICAgIHZhciBvbGRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgQ29tcG9uZW50ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb3B0aW9ucy5tZXRob2RzID0gb3B0aW9ucy5tZXRob2RzIHx8IHt9O1xuICAgICAgICB2YXIgbWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcztcbiAgICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihtZXRob2RzLCAnb25TaG93Jywgb25QYWdlU2hvdyk7XG4gICAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4obWV0aG9kcywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvblVubG9hZCcsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcbiAgICAgICAgcmV3cml0ZVNoYXJlKG1ldGhvZHMpO1xuICAgICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhtZXRob2RzKTtcbiAgICAgICAgb2xkQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCh0KSB7XG4gICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ0NvbXBvbmVudCBob29rIGVycm9yJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBpbmplY3RNaWR3YXkgKG1wQ3R4LCBuYW1lLCBjYWxsYmFjaykge1xuICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBtcEN0eCkgPiAtMSkge1xuICAgIGNhbGxiYWNrKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuICAgIHVsb2coKS53KCd0eXBlb2YgJyArIG5hbWUgKyAnIGlzIG5vdCBvYmplY3QgY2FudCB3YXRjaEV4cC4nKTtcbiAgfVxufVxudmFyIGdsb2JhbFRpdGxlTWFwID0ge307XG5mdW5jdGlvbiBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCkge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbiAgdmFyIHBsYXRmb3JtQ3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgaWYgKHBsYXRmb3JtQ3R4ICYmIHBsYXRmb3JtQ3R4LnNldE5hdmlnYXRpb25CYXJUaXRsZSkge1xuICAgICAgdmFyIG9sZEZ1bmMgPSBwbGF0Zm9ybUN0eC5zZXROYXZpZ2F0aW9uQmFyVGl0bGU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocGxhdGZvcm1DdHgsIFwic2V0TmF2aWdhdGlvbkJhclRpdGxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICAgICAgICB2YXIgcm91dGUgPSB0LnJvdXRlIHx8IHQuaXM7XG4gICAgICAgICAgICBlID0gdXRpbE9iamVjdC5pc09iamVjdChlKSA/IGUgOiB7fTtcbiAgICAgICAgICAgIGdsb2JhbFRpdGxlTWFwW3JvdXRlXSA9IGUudGl0bGU7XG4gICAgICAgICAgICBjdHguZ2xvYmFsVGl0bGUgPSBnbG9iYWxUaXRsZU1hcDtcbiAgICAgICAgICAgIG9sZEZ1bmMuY2FsbCh0aGF0LCBlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudyhlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGluamVjdE1pZHdheShQYWdlLCAnUGFnZScsIGluamVjdFBhZ2UpO1xuICAgICAgaW5qZWN0TWlkd2F5KENvbXBvbmVudCwgJ0NvbXBvbmVudCcsIGluamVjdENvbXBvbmVudCk7XG4gICAgICBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfcGFnZV91bS5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxGdW5jLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5leHBvcnRzLnJlc2V0Rm4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6ICcnLFxuICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBpID0gZVt0XTtcbiAgZVt0XSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cbiAgICBpZiAocnMpIHtcbiAgICAgIHJldHVybiBuLmNhbGwodGhpcywgcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0YXJvMXjjgIF0YXJvMngg5b+F6aG75Yqg5Liq6aKd5aSW55qE6K+t5Y+lbi5hcHBseeaJjeiDveaJp+ihjO+8jOavlOWmgnRyeWNhdGNo77yM5Y+Y6YeP5aOw5piO562J77yM5q2k5aSE5Yqg5LqGcmV0dXJuXG4gICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydHMucmV3cml0ZUZuID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBuZXdGbikge1xuICB2YXIgb2xkRm4gPSBvYmpbbmFtZV07XG4gIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgbmV3Rm4uY2FsbCh0aGlzLCBlKTtcbiAgICBvbGRGbiAmJiBvbGRGbi5jYWxsKHRoaXMsIGUpO1xuICB9O1xufTtcblxuZXhwb3J0cy5vbkFwbHVzUmVhZHkgPSBmdW5jdGlvbiAoYXBsdXNfcXVldWUsIFNVQlNDUklCRSwgY2FsbGJhY2spIHtcbiAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBTVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xufTtcblxudmFyIHV0aWxIYXNoID0gcmVxdWlyZShcIkB1dGlscy91dGlsSGFzaFwiKTtcbnZhciBtaW5pID0gcmVxdWlyZShcIkB1dGlscy9taW5pXCIpO1xudmFyIHVsb2cgPSByZXF1aXJlKFwiQHV0aWxzL3Vsb2dcIik7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG52YXIgdXRpbE9iamVjdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsT2JqZWN0Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xuZXhwb3J0cy5jbGlja19wcm94eSA9ICBmdW5jdGlvbihvcHRpb25zLCBtZXRob2QpIHsgICAgXG4gIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG9yaUZ1bmMgPSBvcHRpb25zW21ldGhvZF07XG4gIG9wdGlvbnNbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSBvcmlGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChldmVudCAmJiB1dGlsT2JqZWN0LmlzT2JqZWN0KGV2ZW50KSAmJiBhcGx1cyAmJiBhcGx1cy5fcmVjb3JkKSB7XG4gICAgICB2YXIgY3VycmVudHBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgY3VzcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICBpZihldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQpIHtcbiAgICAgICAgICBlYWNoTWFwKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldCwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCF1dGlsT2JqZWN0LmlzT2JqZWN0KHZhbHVlKSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICBjdXNwW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5pZCkge1xuICAgICAgICAgIGN1c3BbXCJlbGVtZW50X2lkXCJdID0gZXZlbnQuY3VycmVudFRhcmdldC5pZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgcm91dGUgPSBjdXJyZW50cGFnZS5yb3V0ZSB8fCBjdXJyZW50cGFnZS5pcyB8fCAndW5rbm93bl9wYWdlJztcbiAgICAgIGlmIChyb3V0ZSA9PT0gJ3Vua25vd25fcGFnZScpIHtcbiAgICAgICAgdWxvZygpLncoXCJnZXQgcGFnZXBhdGggZmFpbGVkIGluIGNsaWNrX3Byb3h5XCIsIGN1cnJlbnRwYWdlKTtcbiAgICAgIH1cbiAgICAgIGN1c3AgPSBhc3NpZ24oY3VzcCwgeyBpc19hdXRvOiAxIH0pO1xuICAgICAgdmFyIGV2ZW50Y29kZSA9IHV0aWxIYXNoLmhhc2gocm91dGUsIHV0aWwuZ2V0QXBwS2V5KCkpICsgdXRpbEhhc2guaGFzaChtZXRob2QsIHV0aWwuZ2V0QXBwS2V5KCkpO1xuICAgICAgYXBsdXMuX3JlY29yZChldmVudGNvZGUsIFwiQ0xLXCIsIGN1c3ApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxGdW5jdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG4gIHZhciBkZWZfdiA9IDEzMTU0MjM5MTE7XG4gIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG4gIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNoID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcbiAgfVxuICB2YXIgcnMgPSAoaGFzaCAmIDB4N0ZGRkZGRkYpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHJzO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG4gKiDlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cbmV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgcmV0W2tdID0gdjtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBwYXJhbSB0byBvYmplY3RcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgb2JqZWN0IOagvOW8j++8jOWmgu+8mlxuICoge1xuICogICBhOiBcIjFcIixcbiAqICAgYjogXCIyXCIsXG4gKiAgIGM6IFwiM1wiXG4gKiB9XG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG4gIHZhciBvYmogPSB7fTtcbiAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gYVtpXTtcbiAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcbiAgICB2YXIgZnJhZ21lbnQgPSBpdGVtLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSBmcmFnbWVudFsxXSB8fCAnJzsgIFxuICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG4gICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtLnNsaWNlKGluZGV4ICsgMSwgbGVuKSB8fCAnJztcbiAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbi8vIGNvbnNvbGUubG9nKCdUT0RPIGRlbGV0ZSBzX3BsYWluX29iaicpO1xudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICB2YXIgaXNJblBsYW5PYmogPSBrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwO1xuICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuLyoqXG4gKiBvYmplY3QgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG4gKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG4gKiBAcGFyYW0gb2JqIHtPYmplY3R9XG4gKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcbiAqXG4gKi9cbmV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuICB2YXIgYSA9IFtdO1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBfdjtcbiAgZm9yIChrIGluIG9iailcbiAgLy8gVE9ETzog5a+55LqOZXhhcmdzIGtleSwgdmFsdWUg5Lmf5pivb2Jq57G75Z6L77yM6ZyA6KaB6YCS5b2S6Kej5p6QIEDpkrDmmK1cbiAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqW2tdID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2ID0gJycgKyB0aGlzLm9iajJwYXJhbShvYmpba10pO1xuICAgICAgICBfdiA9IHY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gJycgKyBvYmpba107XG4gICAgICAgIF92ID0gayArICc9JyArIHY7XG4gICAgICB9XG4gICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcbiAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYS5wdXNoKF92KTtcbiAgICAgIH1cbiAgICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgLy8gLy8g5a+5Z29rZXnlhoXnmoR2YWx1Zee7n+S4gOWKoOS4gOWxgue8lueggVxuICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gIC8vICAgICBpZiAodHlwZW9mIGdva2V5W2tdID09PSAnc3RyaW5nJykge1xuICAvLyAgICAgICB0cnkge1xuICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuICAvLyAgICAgICB9IGNhdGNoIChlKSB7fVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuICByZXR1cm4gZ29rZXk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBQdWJTdWIgPSByZXF1aXJlKCdAY29yZS9QdWJTdWInKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcbiAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuICAgICAgYXBsdXMuYXBsdXNfcHVic3ViID0gUHViU3ViLmNyZWF0ZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9QdWJTdWIuanNcbiAqIOa2iOaBr+iuoumYheaooeWei1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuXG52YXIgZ2V0QXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgX2FyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gIGZvciAodmFyIGogPSAxOyBqIDwgbGVuOyBqKyspIHtcbiAgICBfYXJnc1tqIC0gMV0gPSBhcmdzW2pdO1xuICB9XG4gIHJldHVybiBfYXJncztcbn07XG5cbnZhciBQdWJTdWIgPSBCYXNlLmV4dGVuZCh7XG4gIC8qKlxuICAgKiDlr7lmbui/m+ihjOaWreiogO+8jOS4jeaYr+KAmGZ1bmN0aW9u4oCZ57G75Z6L5oql6ZSZ77yM5ZCm5YiZ6L+U5ZueZm5cbiAgICovXG4gIGNhbGxhYmxlOiBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG4gICAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5oYW5kbGVycyA9IFtdO1xuICAgIGluc3RhbmNlLnB1YnMgPSB7fTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0sXG5cbiAgc2V0SGFuZGxlcnM6IGZ1bmN0aW9uKGhhbmRsZXJzKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICB9LFxuXG4gIC8qKlxuICAgKiDorqLpmIXlj6Xmn4TkuLrigJxlVHlwZeKAneeahOa2iOaBr++8jOW9k+aciea2iOaBr+i/h+adpeaJp+ihjOWbnuiwg+WHveaVsO+8muKAnGjigJ1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpe1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBwdWJzID0gX3NlbGYucHVicyB8fCB7fTtcblxuICAgIHZhciBhcnIgPSBwdWJzW2VUeXBlXSB8fCBbXTtcbiAgICBpZiAoYXJyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgX2FyZ3MgPSBhcnJbaV0oKTtcbiAgICAgICAgaC5hcHBseShfc2VsZiwgX2FyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaGFuZGxlcnMgPSBfc2VsZi5oYW5kbGVycyB8fCBbXTtcbiAgICBpZighKGVUeXBlIGluIGhhbmRsZXJzKSkge1xuICAgICAgaGFuZGxlcnNbZVR5cGVdID0gW107XG4gICAgfVxuICAgIGhhbmRsZXJzW2VUeXBlXS5wdXNoKGgpO1xuICAgIF9zZWxmLnNldEhhbmRsZXJzKGhhbmRsZXJzKTtcbiAgICByZXR1cm4gX3NlbGY7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWPlua2iOiuoumYhe+8jOWwhuS8muWPlua2iOKAnGVUeXBl4oCd5Y+l5p+E5a+55bqU55qE4oCcaOKAneWbnuiwg+WHveaVsOS4i+eahOaJgOacieiuoumYhVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG4gICAqIEByZXR1cm4gY29udGV4dFxuICAgKi9cbiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG4gICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG4gICAgdGhpcy5jYWxsYWJsZShoKTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcyA9IHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuICAgICAgaWYgKCFzKSByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBzID09PSAnb2JqZWN0JyAmJiBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgaF9zdHIgPSBoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdmFyIHNfc3RyID0gc1tpXS50b1N0cmluZygpO1xuICAgICAgICAgIGlmIChoX3N0ciA9PT0gc19zdHIpIHtcbiAgICAgICAgICAgIHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzW2VUeXBlXSA9IHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tlVHlwZV07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICog5raI5oGv5YiG5Y+R77yM5bCG5Lya5YiG5Y+R5Yiw5omA5pyJ6K6i6ZiFZVR5cGXlj6Xmn4TnmoTorqLpmIXogIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOWIhuWPkea2iOaBr+WPpeafhFxuICAgKi9cbiAgcHVibGlzaDogZnVuY3Rpb24gKGVUeXBlKSB7XG5cbiAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzIHx8IFtdO1xuXG4gICAgdmFyIHNpemUgPSBoYW5kbGVyc1tlVHlwZV0gPyBoYW5kbGVyc1tlVHlwZV0ubGVuZ3RoIDogMDtcbiAgICBpZiAoc2l6ZSA+IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgIHZhciBmbiA9IGhhbmRsZXJzW2VUeXBlXVtpXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBjYWNoZVB1YnM6IGZ1bmN0aW9uIChlVHlwZSkge1xuICAgIHZhciBwdWJzID0gdGhpcy5wdWJzIHx8IHt9O1xuICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuICAgIGlmICghcHVic1tlVHlwZV0pIHtcbiAgICAgIHB1YnNbZVR5cGVdID0gW107XG4gICAgfVxuICAgIHB1YnNbZVR5cGVdLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcbiAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuLy8g5Z+657G7XG5mdW5jdGlvbiBCYXNlKCkge31cblxuLy8g5bCGZXh0ZW5k5ZKMY3JlYXRl572u5LqOcHJvdG90eXBl5a+56LGh5Lit77yM5Lul5L6/5a2Q57G757un5om/XG5CYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuLy8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuQmFzZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuICByZXR1cm4gdGhpcy5wcm90b3R5cGUuZXh0ZW5kLmNhbGwodGhpcywgcHJvcHMpO1xufTtcblxuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLyoqXG4gICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcbiAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuICAgKi9cbiAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcbiAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICB9XG4gIHJldHVybiBpbnN0YW5jZTtcbn07XG5cbkJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8vIOa0vueUn+WHuuadpeeahOaWsOeahOWtkOexu1xuICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG4gIHRyeSB7XG4gICAgLyoqXG4gICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG4gICAgICog5b2T54S25YmN5o+Q5piv54i257G755qE5bGe5oCn6YO95pS+5ZyocHJvdG90eXBl5LitXG4gICAgICog6ICM6Z2e5LiK6Z2iY3JlYXRl5pa55rOV55qE4oCc5a6e5L6L5bGe5oCn4oCd5LitXG4gICAgICovXG4gICAgaWYgKCFpc0Z1bmN0aW9uKE9iamVjdC5jcmVhdGUpKSB7XG4gICAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgZnVuY3Rpb24gRigpIHt9XG4gICAgICAgIEYucHJvdG90eXBlID0gbztcbiAgICAgICAgcmV0dXJuIG5ldyBGKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBTdWJCYXNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gICAgLy8g5bm25LiU5re75Yqg6Ieq5bex55qE5pa55rOV5ZKM5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gICAgU3ViQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJCYXNlO1xuXG4gICAgLy8g6ZyA6KaB5LulLmV4dGVuZOeahOaWueW8j+WSjC5jcmVhdGXnmoTmlrnlvI/osIPnlKjvvJpcbiAgICBTdWJCYXNlLmV4dGVuZCA9IFN1YkJhc2UucHJvdG90eXBlLmV4dGVuZDtcbiAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIFN1YkJhc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfbWV0YS9tYWluX21pbmknKSh0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnLi9tZXRhSW5mb01pbmknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgdmFyIF8kID0gKGFwbHVzLl8kID0gYXBsdXMuXyQgfHwge30pOyAvLyDlhoXpg6jkvb/nlKjnmoTlj5jph49cbiAgXyQuaXNfdGVybWluYWwgPSB0cnVlO1xuICBfJC5zZW5kX3B2X2NvdW50ID0gMDtcbiAgLy8gXyQuc3RhdHVzID0gU1RBVFVTO1xuICAvLyBfJC5zY3JpcHRfbmFtZSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuc2NyaXB0X25hbWU7XG4gIF8kLnNwbSA9IHtcbiAgICBkYXRhOiB7fVxuICB9O1xuICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG4gIGFwbHVzLmdsb2JhbENvbmZpZyA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWc7XG5cbiAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcbiAgICBtZXRhSW5mby5zZXRNZXRhSW5mbyhrLCBhcGx1c19jb25maWcubWV0YUluZm9ba10pO1xuICB9XG4gIGFwbHVzLl8kID0gXyQ7XG5cbiAgYXBsdXMuaXNJbnRlcm5hdGlvbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21haW5fbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cbnZhciBpbmZvID0ge307XG5cbnZhciBPQkpFQ1QgPSAnb2JqZWN0JztcbnZhciBTVFJJTkcgPSAnc3RyaW5nJztcblxuLyoqXG4gKiBAcmV0dXJucyB7e319XG4gKi9cbnZhciBsYXN0X2luZm87XG5mdW5jdGlvbiBnZXRJbmZvKCkge1xuICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuICByZXR1cm4gaW5mbztcbn07XG5leHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXG4vLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuZnVuY3Rpb24gcUdldCAoKSB7XG4gIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xufTtcbmV4cG9ydHMucUdldCA9IHFHZXQ7XG5cbi8qKlxuICog5Yqo5oCB6YWN572ubWV0YVxuICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG4gKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga1xuICogQHBhcmFtIHtPYmplY3R9IHZcbiAqL1xuZnVuY3Rpb24gc2V0TWV0YUluZm8gKGssIHYpIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICBpZihrID09PSAnYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleScpe1xuICAgIGNhdGNoRXhjZXB0aW9uKCd0aGUgQVBJIGFwbHVzLWluamVjdC1yZWNvcmQtZ29rZXkgaXMgZGVwcmVjYXRlZCwgaWYgbmVlZGVkIHBsZWFzZSBjb25jYXQgQVBMVVMgU0RLIHN1cHBvcnRlcicpO1xuICAgIGFwbHVzLnJlY29yZCgnL2luamVjdC5yZWNvcmQuZ29rZXknLCdPVEhFUicsJycpO1xuICB9XG4gIGxhc3RfaW5mb1trXSA9IHY7XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuc2V0TWV0YUluZm8gPSBzZXRNZXRhSW5mbztcblxuXG52YXIgY2F0Y2hFeGNlcHRpb24gPSBmdW5jdGlvbiAobXNnKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKG1zZyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59O1xuZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGNhdGNoRXhjZXB0aW9uO1xuXG4vKipcbiAqIGdldCBtZXRhSW5mbyBieSBrZXlcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBnZXRNZXRhSW5mbyA9IGZ1bmN0aW9uKGspIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xufTtcbmV4cG9ydHMuZ2V0TWV0YUluZm8gPSBnZXRNZXRhSW5mbztcblxuXG4vKipcbiAqIOivhuWIq+S4muWKoeWKqOaAgeaLk+WxleWPguaVsFxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgIGxvZ2tleTogbG9na2V5LFxuICogICAgZ21rZXk6IGdta2V5LFxuICogICAgZ29rZXk6IGdva2V5XG4gKiB9XG4gKi9cbnZhciBnZXRVc2VySW5qZWN0R29rZXkgPSBmdW5jdGlvbiAob3B0cykge1xuICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8oJ2FwbHVzLWluamVjdC1yZWNvcmQtZ29rZXknKTtcbiAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdXNlckZuKG9wdHMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvcHRzLmdva2V5O1xuICB9XG59O1xuZXhwb3J0cy5nZXRVc2VySW5qZWN0R29rZXkgPSBnZXRVc2VySW5qZWN0R29rZXk7XG5cbi8qKlxuICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICogIEBwYXJhbSBrXG4gKiAgQHBhcmFtIHZcbiAqL1xudmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgLy8gY29uc29sZS5sb2coaywgdik7XG4gIGlmIChrICYmIHYpIHtcbiAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG4gICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG4gICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcbiAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSBTVFJJTkcgPyBKU09OLnBhcnNlKHYpIDogdjtcbiAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuXG4gICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHRvU2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcbiAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBmbGFnO1xuICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcbiAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlLCBmb3JtYXQucGFyYW0yb2JqKHYpKSk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGsgPT09ICdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB7XG4gICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgICBmb3IgKHZhciBfayBpbiBfb2xkVmFsdWUpIHtcbiAgICAgICAgICBpZiAodltfa10pIHtcbiAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuICAgICAgZmxhZyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChfb2xkVmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX29sZFZhbHVlID09PSBPQkpFQ1QpIHtcbiAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRtcF9wYXJzZSA9PT0gT0JKRUNUKSB7XG4gICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZsYWcpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXG52YXIgX3NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGFyZzEsIHZhbHVlKSB7XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG4gIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG4gIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcbiAgICBrID0gYXJnMS5tZXRhTmFtZTtcbiAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG4gICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcbiAgfSBlbHNlIHtcbiAgICBrID0gYXJnMTtcbiAgICB2ID0gdmFsdWU7XG4gIH1cbiAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG4gICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cbiAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgICAgcmV0dXJuIHJzO1xuICAgIH0gXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuICB9XG59O1xuZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb01pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIEZOID0gJ2Z1bmN0aW9uJztcblxudmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuICByZXR1cm4gZmxhZyA/IHB1YnN1YiA6ICcnO1xufTtcblxuLyoqXG4gKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5wdWJsaXNoID09PSBGTikge1xuICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogY2FjaGXlvZPliY3nmoTliIblj5Hlh73mlbDnmoTlt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvQ2FjaGVQdWJzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG4gICAgcHVic3ViLmNhY2hlUHVicy5hcHBseShwdWJzdWIsIGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcbiAqL1xuZXhwb3J0cy5kb1N1Yk1zZyA9IGZ1bmN0aW9uKGtleSwgY2IpIHtcbiAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuICAgIHB1YnN1Yi5zdWJzY3JpYmUoa2V5LCBjYik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5rOo5YWlbG9nQ29uZmlnLOS+m+WQjue7reaPkuS7tuS9v+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvZWFjaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRMb2dDb25maWc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsb2dDb25maWcgPSB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXG4gICAgICBmb3IgKHZhciBrIGluIHBsdWdpbnMpIHtcbiAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuICAgICAgICAgIHBsdWdpbnM6IHBsdWdpbnNba10sXG4gICAgICAgICAgY29udGV4dDoge31cbiAgICAgICAgfTtcbiAgICAgICAgZWFjaChwbHVnaW5zW2tdLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgIGxvZ0NvbmZpZ1trXS5jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZyB8fCB7fTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG9nQ29uZmlnO1xuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcucGFnZUxvYWRUaW1lID0gdGhpcy5vcHRpb25zLmNvbnRleHQuUEFHRV9MT0FEX1RJTUU7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9ldGFnLmpzXG4gKlxuICog5L2c55So77ya5ZCM5q2lYXBsdXNfaW5pdOW3peS9nOa1geeahOS/oeaBr1xuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsRXRhZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXRhZycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIEVNUFRZX0NOQSA9ICdFTVBUWV9DTkEnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIF9zeW5jRXRhZzogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGNuYSA9IG8gJiYgby5kYXRhID8gby5kYXRhLmNuYSA6ICcnO1xuICAgICAgICBpZiAoIWNuYSkge1xuICAgICAgICAgIGlmIChhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPT09ICdZJykge1xuICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWIgQOiwi+WjqyAyMDAyMS0wMS0xOVxuICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnZXRhZycsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9TeW5jRXRhZygpOyAgXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGNuYSk7XG4gICAgICAgICAgY2FsbGJhY2soY25hKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuICAgICAgdmFyIHVybDtcblxuICAgICAgaWYgKGFwbHVzX3Job3N0X3YpIHtcbiAgICAgICAgdXJsID0gdXRpbEV0YWcuZ2V0VXJsKHtcbiAgICAgICAgICBlZ1VybDogKGFwbHVzX3Job3N0X3YuaW5kZXhPZignLy8nKSA9PT0gLTEgPyAnLy8nICsgYXBsdXNfcmhvc3RfdiA6IGFwbHVzX3Job3N0X3YpICsgJy9lZy5qcydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmVnVXJsID0gdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgZXRhZ1N0b3JhZ2VLZXkgPSBhcGx1cy5nbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWTtcbiAgICAgIHZhciB0b1N5bmNFdGFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ1knO1xuICAgICAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcbiAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG4gICAgICAgICAgICByZXF1ZXN0TWV0aG9kTmFtZTogJ3JlcXVlc3QnXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ04nO1xuICAgICAgICAgICAgdmFyIGV0YWcgPSAnJztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgJyc7XG4gICAgICAgICAgICAgIHZhciBhcnIgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBldGFnS2V5VmFsdWUgPSBhcnJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGV0YWdzID0gZXRhZ0tleVZhbHVlLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAgICAgZXRhZyA9IGV0YWdzWzFdIHx8ICcnO1xuICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnLnJlcGxhY2UoL1xcXCIvZywgJycpO1xuICAgICAgICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGV0YWcpO1xuICAgICAgICAgICAgICAgIGN0eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNuYTogZXRhZ1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIOS4uuS6huino+WGs+W5tuWPkemXrumimO+8jOS7jmFwbHVzX3F1ZXVl5pS55oiQ55u05o6l55SoYXBsdXMuYXBsdXNfcHVic3ViXG4gICAgICAgICAgICAgICAgLy8g5bm2Y2FjaGXkvY/kuIrkuIDmrKHnmoTnu5PmnpwgQOiwi+WjqyAyMDAyMS0wMS0xOVxuICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKCdldGFnJywgZXRhZyk7XG4gICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLmNhY2hlUHVicygnZXRhZycsIGV0YWcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHVsb2coKS53KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFldGFnKSB7XG4gICAgICAgICAgICAgIGV0YWcgPSBFTVBUWV9DTkE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhldGFnKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzMikge1xuICAgICAgICAgICAgdWxvZygpLncocmVzMik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgQ05BID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSk7XG4gICAgICBpZiAoQ05BKSB7XG4gICAgICAgIGNhbGxiYWNrKENOQSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjaGVjayhyZXMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY2hlY2socmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue4oCccGF1c2XigJ3mmoLlgZzkuK3pl7Tku7bmiafooYzvvIzov5Tlm57kuIDkuKrmlbTmlbDigJxu4oCd5ZGK6K+J5Lit6Ze05Lu24oCcbuKAneavq+enkuWQjue7p+e7reaJp+ihjOS4remXtOS7tlxuICAgICAqIOKAnOaaguWBnOKAneacgOWkmjEwc++8jOiLpei2heaXtuS4remXtOS7tuS8muW8uuWItue7p+e7reaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIC8vIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGV0YWdUaW1lb3V0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV0YWctdGltZW91dCcpO1xuICAgICAgdmFyIGRlZmF1bHRUaW1lID0gMjAwO1xuICAgICAgdmFyIHRpbWUgPSBkZWZhdWx0VGltZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRpbWUgPSBwYXJzZUludChldGFnVGltZW91dCk7XG4gICAgICAgIGlmIChpc05hTih0aW1lKSkge1xuICAgICAgICAgIHRpbWUgPSBkZWZhdWx0VGltZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zeW5jRXRhZyhmdW5jdGlvbiAoY25hKSB7XG4gICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmNuYSA9IGNuYTsgIFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lID49IDIwMCkge1xuICAgICAgICAgIGNiKGNuYSk7ICBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyDlkYror4ljb21wb3Nl5pqC5YGc5omn6KGM5Lit6Ze05Lu277yM55u05YiwY2Llm57liLDlkI7lho3nu6fnu61cbiAgICAgIGlmICh0aW1lIDwgMjAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aW1lO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJy4vdXRpbERhdGEnKTtcblxuLy8g5LuF6ZmQ5by55YaF77yb5bCP57Gz56aB55SoZWcuanPlupTlr7nnrZbnlaXvvJrkvb/nlKjliqjmgIHlkI7nvIDlkI1cbi8vIOWQjue8gOWQjeeUn+aIkOaWueazlTog5b2T5YmN5pe26Ze05oiz6L2sMTbov5vliLbvvIzlj5blkI445L2N77yMXG4vLyBmdW5jdGlvbiBldGFnVXJsU3VmZml4KGV0YWdVcmwpIHtcbi8vICAgdmFyIGR5bmFtaWNVcmwgPSBldGFnVXJsO1xuLy8gICB0cnkge1xuLy8gICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuLy8gICAgICAgdHJ5IHtcbi8vICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuLy8gICAgICAgICB2YXIgZHluYW1pY1N1ZmZpeCA9IHRpbWVTdGFtcC50b1N0cmluZygxNikuc2xpY2UoLTgpO1xuLy8gICAgICAgICB3aGlsZShkeW5hbWljU3VmZml4Lmxlbmd0aCA8IDgpIHtcbi8vICAgICAgICAgICBkeW5hbWljU3VmZml4ID0gZHluYW1pY1N1ZmZpeCArICdmJztcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBkeW5hbWljVXJsID0gZXRhZ1VybC5yZXBsYWNlKC9lZy5qcy8sIGR5bmFtaWNTdWZmaXggKyAnLmpzJyk7XG4vLyAgICAgICB9IGNhdGNoKGUpIHtcbi8vICAgICAgIH1cbi8vICAgICAgIHJldHVybiBkeW5hbWljVXJsO1xuLy8gICAgIH1cbi8vICAgfSBjYXRjaChlKSB7XG5cbi8vICAgfVxuLy8gICByZXR1cm4gZHluYW1pY1VybDtcbi8vIH1cblxuZXhwb3J0cy5nZXRVcmwgPSBmdW5jdGlvbiAoZXRhZykge1xuICB2YXIgdXJsID0gdXRpbERhdGEuZ2V0VXJsKGV0YWcgJiYgZXRhZy5lZ1VybCk7ICBcbiAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuICAvLyBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCkge1xuICAvLyAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAvLyAgIH1cbiAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgLy8gfVxuICByZXR1cm4gdXJsO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcbiAqXG4gKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7ZcbiAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2VcbiAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJuXCI6IOWFtuS4rW7kuLrlpKfkuo4x55qE5q2j5pW05pWwLCBhcGx1c+WcqOetieW+hW7mr6vnp5LkuYvlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcbiAqXG4gKiAgIGRlcHPvvJog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZtZXRhX2luZm9cbiAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuICAgICAqIOatpOWkhOmcgOimgeWKqOaAgeS7jiBtZXRhSW5mb+aooeWdl+S4reWOu+iwg+eUqGdldEluZm/mlrnms5XmnaXojrflj5bnm7jlhbPkv6Hmga/vvIzov5nmoLflgZrnmoTlnY/lpITmmK/mtojogJfmgKfog71cbiAgICAgKi9cbiAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuICAgICAgcmV0dXJuIG1ldGFfaW5mbztcbiAgICB9LFxuXG4gICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG4gICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcbiAgICAgKiA8bWV0YSBuYW1lPVwiYXBsdXMtd2FpdGluZ1wiIGNvbnRlbnQ9XCJ4eHhcIiAvPlxuICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG4gICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuICAgICAqXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuICAgICAgaWYgKGFwbHVzV2FpdGluZyAmJiBjb25maWcuaXNfYXV0bykge1xuICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuICAgICAgICAgIGFwbHVzV2FpdGluZzogYXBsdXNXYWl0aW5nXG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fVVNFUl9JRDpcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG4gICAgICAgIGNhc2UgJ01BTic6XG4gICAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgICAgY2FzZSAnMSc6XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH0sIDYwMDApO1xuICAgICAgICAgIHJldHVybiA2MDAwO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcbiAgICAgICAgICBpZiAoKG4gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfSwgbik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hlcmVfdG9fc2VuZF9taW5pX3VtLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog6I635Y+WIG1ldGFfaW5mbyBcbiAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcbiAgICB9LFxuXG4gICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdHJhY2tEb21haW4gPSB0aGlzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7ICAgICAgXG4gICAgICBpZiAoIXV0aWwuY2hlY2tEb21haW4odHJhY2tEb21haW4pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1pbmlMb2cgPSBtaW5pLmdldExvZ0RvbWFpbigpO1xuICAgICAgaWYgKCFtaW5pTG9nKSB7XG4gICAgICAgIHVsb2coKS50aXBfdygnY3VycmVudCBtaW5pYXBwIGZyYW1ld29yayBpcyBub3Qgc3VwcG9ydGVkISEnKTtcbiAgICAgICAgcmV0dXJuICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICB9XG4gICAgICAvLyB2YXIgdXJsID0gWycvLycsIHJob3N0LCBsb2dEb21haW5dO1xuICAgICAgcmV0dXJuIHV0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSArIG1pbmlMb2c7XG4gICAgfSxcblxuXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpO1xuICAgICAgaWYgKCF1cmwgfHwgKHVybC5pbmRleE9mKCdodHRwczovLycpIDwgMCAmJiB1cmwuaW5kZXhPZignaHR0cDovLycpKSkge1xuICAgICAgICB1bG9nKCkudygnY3VycmVudCB0cmFja0RvbWFpbiBpbnZhbGlkOiAnICsgdXJsKTtcbiAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsID0gdXJsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGF0X3RvX3NlbmQuanNcbiAqXG4gKiDkvZznlKjvvJrml6Xlv5flj5HpgIHln7rnoYDlj4LmlbDmlLbpm4bvvJpcbiAqICAgICAg5oyJ6aG65bqP5bCGYXBsdXMucHZfZGF0YS5iYXNpY+OAgWV4cGFyYW1z44CBb2xkUGFyYW1z44CBYXBsdXMucHZfZGF0YS5leHRyYeWbm+S4reexu+Wei+eahOWPguaVsG1lcmdl5Zyo5LiA5Liq5pWw57uE5LitXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpOyAgXG52YXIgbG9nSWQgPSByZXF1aXJlKCdAdXRpbHMvbG9nSWQnKTtcbnZhciB1dGlsUGFyYW1zID0gcmVxdWlyZSgnLi91dGlsUGFyYW1zJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoXCJAdXRpbHMvdXRpbFwiKTtcbnZhciBDTlQgPSBhcGx1c1N0YXRpYy5TUE1fQ05UO1xudmFyIFVSTCA9IGFwbHVzU3RhdGljLlNQTV9VUkw7XG52YXIgUFJFID0gYXBsdXNTdGF0aWMuU1BNX1BSRTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0Q29tbW9uUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBwbGF0Zm9ybVR5cGUgPSBhcGx1cy5nZXRNZXRhSW5mbygncGxhdGZvcm1UeXBlJykgfHwgbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcblxuICAgICAgdmFyIHVzZXJJbmZvID0ge1xuICAgICAgICBfZGV2X2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpLFxuICAgICAgICBfYW5vbnlfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCksXG4gICAgICAgIF91c2VyX2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCksXG4gICAgICAgIF91c2VyX25pY2s6IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJyksXG4gICAgICAgIF9zZXNzaW9uX2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX3Nlc3Npb25faWQnKSxcbiAgICAgICAgdWFpZDogKGFwbHVzLmdldE1ldGFJbmZvKCd1YWlkJykgKyAnJykgPT09ICcxJyA/IDEgOiAwLFxuICAgICAgfTtcblxuICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuICAgICAgICB2YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG4gICAgICAgIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG4gICAgICAgIHVzZXJJbmZvLl9wYWdlX3RpdGxlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKHJvdXRlKSB8fCAnJztcbiAgICAgIH1cbiAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblxuICAgICAgdmFyIHVybCA9ICctJztcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgICAgICB2YXIgcGFnZUluc3RhbmNlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0xXSB8fCB7fTtcbiAgICAgICAgdmFyIGN1clBhdGggPSB1c2VyZGF0YS5nb2tleSAmJiB1c2VyZGF0YS5nb2tleS5jdXJyZW50UGF0aDtcbiAgICAgICAgdXJsID0gY3VyUGF0aCB8fCBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIFxuICAgICAgdmFyIGxvZ0lkS2V5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyB1cmw7XG4gICAgICB2YXIgbG9nSWRLZXkyID0gY2xpZW50Lm1vZGVsICsgY2xpZW50Lm5ldHdvcmtUeXBlICsgY29uZmlnLnRpdGxlICsgZXRhZy5jbmE7XG4gICAgICB2YXIgY2FjaGUgPSAoZ2xvYmFsQ29uZmlnLmlzRGVjb2RlVXJsID8gJ0RDXycgOiAnJykgKyBsb2dJZC5nZXRMb2dJZChsb2dJZEtleSwgbG9nSWRLZXkyKTtcblxuICAgICAgdmFyIGFwcEtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG4gICAgICBpZiAoIWFwcEtleSkge1xuICAgICAgICB1bG9nKCkudygncGxlYXNlIHNldCBhcHBLZXkgaW4gYXBsdXMgbWV0YUluZm8gYmVmb3JlIHNlbmRQViEnKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSAgT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICBhcHBLZXk6IGFwcEtleSxcbiAgICAgICAgY2FjaGU6IGNhY2hlLFxuICAgICAgICBjbmE6IGV0YWcuY25hLFxuICAgICAgICBldGFnOiBldGFnLFxuICAgICAgICBwcmU6IF8kLnBhZ2VfcmVmZXJyZXIgfHwgJy0nLFxuICAgICAgICBzZGtfaW5mbzoge1xuICAgICAgICAgIGpzdmVyOiBnbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG4gICAgICAgICAgbHZlcjogZ2xvYmFsQ29uZmlnLmx2ZXIsXG4gICAgICAgICAgY3VzdG9tU2RrSWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdjdXN0b21TZGtJZCcpIHx8ICcnLFxuICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBjb25maWcudGl0bGUgfHwgJycsXG4gICAgICAgIHVybDogdXJsIHx8ICctJyxcbiAgICAgICAgY2xpZW50OiBjbGllbnQsXG4gICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG4gICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcbiAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZFxuICAgICAgfSwgdXNlckluZm8pO1xuICAgICAgXG4gICAgICB2YXIgZ29rZXkgPSB1c2VySW5mbztcblxuICAgICAgaWYgKHNwbS5zcG1fdXJsKSB7XG4gICAgICAgIGdva2V5W1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgaWYgKHNwbS5zcG1fcHJlKSB7XG4gICAgICAgIGdva2V5W1BSRV0gPSBzcG0uc3BtX3ByZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIHtcbiAgICAgICAgZ29rZXlbQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuICAgICAgfVxuICAgICAgZ29rZXlbYXBsdXNTdGF0aWMuUFZJRF0gPSBhcGx1cy5wdmlkIHx8ICcnO1xuICAgICAgY29tbW9uUGFyYW1zLnNlc3Npb25BcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXNlc3Npb24tYXJncycpO1xuICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTsgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG4gICAgICAvLyDpnIDopoHliKDpmaTnmoTku6PnoIEtLS0tZW5kXG4gICAgICBjb21tb25QYXJhbXMuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG4gICAgfSxcblxuXG4gICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgICAgY29tbW9uUGFyYW1zLnNka19pbmZvLm1hbnNuZGxvZyA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uUGFyYW1zLCB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLlBWX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcxJyxcbiAgICAgICAgbG9na2V5OiAnL3Z4LmdpZicsXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblxuICAgICAgdmFyIGhqbGpQYXJhbXMgPSB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgdXNlcmRhdGEuZ21rZXksIC8vIGFwbHVzU3RhdGljLk9USEVSX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcyJyxcbiAgICAgICAgbG9na2V5OiB1c2VyZGF0YS5sb2drZXksXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgLy8gbWFuc25kbG9nOiAnMScsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSBcIlBWXCIpIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRQdlBhcmFtcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRIamxqUGFyYW1zKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IHBhcmFtcztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsSGFzaCA9IHJlcXVpcmUoJy4vdXRpbEhhc2gnKTtcblxudmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgLyoqXG4gICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG4gICAqL1xuICB2YXIgcm5kX3N0cnMgPSAnJztcbiAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcbiAgdmFyIGNoYXI7XG5cbiAgLyoqXG4gICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcbiAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblxuICAgIGlmIChjaGFyUG9zID09IDEpIHtcbiAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuICcwJztcbiAgfTtcblxuICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcbiAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG4gICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcbiAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBybmRfc3RycyArPSBjaGFyO1xuICB9XG4gIHJldHVybiBybmRfc3Rycztcbn07XG5cbmZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG4gIGlmIChhcmdzKSB7XG4gICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWw7XG4gIH1cbn1cblxuZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG4gIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcbiAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG4gIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuICByZXR1cm4gW1xuICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcbiAgICByYW5kb202Q2hhcnNcbiAgXS5qb2luKCcnKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9sb2dJZC5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG4gKi9cbmV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG4gIHZhciBfYW5kID0gJysnO1xuICBpZiAoX3RpbWVab25lIDwgMCkge1xuICAgIF9hbmQgPSAnLSc7XG4gIH1cbiAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcbiAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuICB9XG4gIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3V0aWxQYXJhbXMuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL21pbmlhcHBfZGF0YS5qc1xuICpcbiAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuICogICAgICDmjInpobrluo/lsIZhcGx1cy5wdl9kYXRhLmJhc2lj44CBZXhwYXJhbXPjgIFvbGRQYXJhbXPjgIFhcGx1cy5wdl9kYXRhLmV4dHJh5Zub5Lit57G75Z6L55qE5Y+C5pWwbWVyZ2XlnKjkuIDkuKrmlbDnu4TkuK1cbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNUQkVudiA9IG1pbmkuaXNUQigpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgICAgdmFyIGN1cnJlbnRQYWdlICA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuICAgICAgaWYgKGN1cnJlbnRQYWdlICYmICFsb2dkYXRhLnRpdGxlKSB7XG4gICAgICAgIGxvZ2RhdGEudGl0bGUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICBsb2dkYXRhLnVybCA9ICghaXNUQkVudiA/ICdodHRwczovLycrIGxvZ2RhdGEuY2xpZW50LmFwcElkICsgJ18nIDogJycpICsgKGN1cnJlbnRQYWdlLnJvdXRlICB8fCBjdXJyZW50UGFnZS5pcyB8fCAnLScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJlID0gJy0nO1xuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcbiAgICAgICAgcHJlID0gKCFpc1RCRW52ICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA/ICdodHRwczovLycrIGxvZ2RhdGEuY2xpZW50LmFwcElkICsgJ18nIDogJycpICsgKHByZVBhZ2Uucm91dGUgfHwgcHJlUGFnZS5pcyB8fCAnLScpO1xuICAgICAgfVxuICAgICAgbG9nZGF0YS5wcmUgPSBwcmU7XG4gICAgICBpZiAobG9nZGF0YS5zZGtfaW5mbykge1xuICAgICAgICBsb2dkYXRhLnNka19pbmZvLndpbmRtaWxsID0gJzEnO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19zZW5kcHZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc1VuZGVmaW5lZCA9IHJlcXVpcmUoJ0B1dGlscy9pc1VuZGVmaW5lZCcpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcbiAgICAgKlxuICAgICAqIGdva2V5OlxuICAgICAqICAg6L+Z5Z2X5Li65a+55Y6G5Y+ydXNlcmRhdGHkvKDpgJLnmoTlhbzlrrnlgZrms5XvvIxUT0RP77ya5o6o5Yqo5bqU55So5pa55Y+Y5pu0XG4gICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuICAgICAqICAgICDlpoIgZ29rZXk9XCJhPTEmYj0yXCIg5oiWIHtcImFcIjpbe1wia2V5XCI6MjAxNjEyMjYxNTUwLFwidmFsdWVcIjowLjF9LHtcImtleVwiOjIwMTYxMjI2MTYwMCxcInZhbHVlXCI6MC41fSx7XCJrZXlcIjoyMDE2MTIyNjE2MTAsXCJ2YWx1ZVwiOjF9XX1cbiAgICAgKiAgIOi/meWdl+mAu+i+keaYr+mAoOaIkGV4dGVuZGFyZ3PlhoXpg6jlh7rnjrDlpJrkuKrmlpzmnaDnmoTlhYPlh7bvvIHvvIHvvIFcbiAgICAgKiBwYWdlX2lkOlxuICAgICAqICAg5pyJcGFnZV9pZOWwseWcqHNwbWLkuK3mt7vliqDlrZDlj4LmlbBcbiAgICAgKiAgIOaXoHBhZ2VfaWTlsLHmuIXpmaRzcG1i5Lit55qE5a2Q5Y+C5pWwXG4gICAgICogc3BtX2NudFxuICAgICAqICAg5pu05pS55a6Mc3BtYuS9jei/mOmcgOimgeabtOaWsHNwbV9jbnQgQOiwi+WjqyBpbiAyMDE4LTAzLTIwICDku6XlhY10b1VU55qEc3BtLWNudOS4ouWkseWIhuahtuWPt1xuICAgICAqIOS4quaAp+WMluWPguaVsO+8mlxuICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuICAgICAqICAgMi4g5pa55rOV5Lyg5YWlOiBhcGx1cy5zZW5kUFYoe0NPTkZJR30sIHtVU0VSREFURX0pO1xuICAgICAqIOWPjeS9nOW8iueahOaWh+aho+WuvemrmDogX3B3LF9waFxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuICAgICAqL1xuICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgZCA9IHt9O1xuXG4gICAgICBpZiAoY29uZmlnICYmICFjb25maWcuaXNfYXV0bykge1xuICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkID0gZm9ybWF0LnBhcmFtMm9iaihjb25maWcuZ29rZXkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGQgPSBjb25maWcuZ29rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcbiAgICAgICAgaWYoaXNBcnJheShfZGF0YSkpe1xuICAgICAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIF9kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcbiAgICAgIHZhciBwYWdlUHJvcGVydGllcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB8fCB7fTtcbiAgICAgIHZhciBwYWdlUHJvcGVydHkgPSBwYWdlUHJvcGVydGllc1twYWdlTmFtZV07XG4gICAgICBpZiAodHlwZW9mIHBhZ2VQcm9wZXJ0eSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29tYm9Vc2VyZGF0YShwYWdlUHJvcGVydHkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG4gICAgICovXG4gICAgdXBkYXRlUHJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcucmVmZXJyZXIpIHtcbiAgICAgICAgXyQucGFnZV9yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcbiAgICAgICAgZGF0YS5wcmUgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICB9XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw6aG16Z2i55qEVXJsXG4gICAgICovXG4gICAgdXBkYXRlVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICBpZihjb25maWcmJmNvbmZpZy5wYWdlVXJsKXtcbiAgICAgICAgZGF0YS51cmwgPSBjb25maWcucGFnZVVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw5p2l5rqQc3BtXG4gICAgICovXG4gICAgdXBkYXRlU3BtVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgc3BtVXJsID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9VUkxdfHxjb25maWcuc3BtVXJsO1xuICAgICAgaWYoIWlzVW5kZWZpbmVkKHNwbVVybCkpe1xuICAgICAgICBkYXRhLmdva2V5W2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtVXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmnaXmupDnmoTmnaXmupBzcG1cbiAgICAgKi9cbiAgICB1cGRhdGVTcG1QcmU6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBzcG1QcmUgPSBjb25maWdbYXBsdXNTdGF0aWMuU1BNX1BSRV18fGNvbmZpZy5zcG1QcmU7XG4gICAgICBpZighaXNVbmRlZmluZWQoc3BtUHJlKSl7XG4gICAgICAgIGRhdGEuZ29rZXlbYXBsdXNTdGF0aWMuU1BNX1BSRV0gPSBzcG1QcmU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG4gICAgICB2YXIgdXNlcmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldFVzZXJkYXRhKCksIGQudXNlcmRhdGEgfHwge30pO1xuICAgICAgZC5nb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGQuZ29rZXksIHVzZXJkYXRhKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVByZShkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVVybChkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVVybChkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVByZShkKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1VuZGVmaW5lZC5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9jYW5fdG9fc2VuZHB2LmpzXG4gKlxuICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxFdmVudExpbWl0ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudExpbWl0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGNhbl90b19zZW5kcHYgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2IHx8IHt9O1xuICAgICAgdmFyIGNvdW50ID0gXyQuc2VuZF9wdl9jb3VudCB8fCAwO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cbiAgICAgIGlmICghdXRpbEV2ZW50TGltaXQuY2FuU2VuZFBWKGNvbmZpZy50cmFja190eXBlKSkge1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FuX3RvX3NlbmRwdi5mbGFnID0gJ1lFUyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmNhbl90b19zZW5kcHYgPSBjYW5fdG9fc2VuZHB2O1xuICAgICAgICBfJC5zZW5kX3B2X2NvdW50ID0gKytjb3VudDtcbiAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L2Nhbl90b19zZW5kcHZfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxFdmVudExpbWl0LmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbFJlbW90ZUNmZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUmVtb3RlQ2ZnJyk7XG52YXIgdXRpbExvY2FsQ2ZnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2NhbENvbmZpZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIGFwbHVzVXRpbHMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5mdW5jdGlvbiBuZWVkTGltaXRTZW5kKGxvZ2tleSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBldmVudExpbWl0UmF0ZXMgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTKTtcbiAgaWYgKGV2ZW50TGltaXRSYXRlcyAmJiBldmVudExpbWl0UmF0ZXMubGVuZ3RoID4gMCkge1xuICAgIHZhciBldmVudCA9IHV0aWxBcnJheS5maW5kKGV2ZW50TGltaXRSYXRlcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uZXZlbnRJZCA9PT0gbG9na2V5O1xuICAgIH0pO1xuICAgIFxuICAgIGlmIChldmVudCkge1xuICAgICAgdmFyIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjEwMDApO1xuICAgICAgaWYgKHJhbmRvbSA8IChldmVudC5zYW1wbGluZ1JhdGUgKiAxMDAwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpc1VNKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgcmV0dXJuICEhaXNVTTtcbn07XG5cbmV4cG9ydHMuY2FuVG9TZW5kSEpMSiA9IGZ1bmN0aW9uKGdva2V5LCBsb2drZXkpIHtcbiAgdmFyIGRldmljZVN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0RGV2aWNlU3RhdHVzKCk7XG4gIGlmICghZGV2aWNlU3RhdHVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgIGlmICh1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGN0eCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORDtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGUpIHt9XG4gIH1cblxuICAvLyDlpoLmnpzlhajln4vngrnlhbPpl60g5oiW6ICFIOWFqOWfi+eCueS6i+S7tuWFs+mXremHh+mbhu+8jOS4jeWPkemAgeS6i+S7tlxuICB2YXIgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvVHJhY2tTdGF0dXMoKTtcbiAgdmFyIGF1dG9ldmVudFN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0QXV0b0V2ZW50U3RhdHVzKCk7XG4gIC8vIEDmloflv4MgXG4gIHZhciBsb2NhbEF1dG90cmFja0VuYWJsZWQgPSB1dGlsTG9jYWxDZmcuZ2V0QXV0b1RyYWNrU3RhdHVzKCk7XG5cbiAgdmFyIHBhcmFtcyA9IHt9O1xuICBpZiAodHlwZW9mIGdva2V5ID09PSAnc3RyaW5nJykge1xuICAgIHBhcmFtcyA9IGFwbHVzVXRpbHMuYXJyMm9iaihhcGx1c1V0aWxzLnBhcmFtMmFycihnb2tleSkpO1xuICB9IGVsc2Uge1xuICAgIHBhcmFtcyA9IGdva2V5O1xuICB9XG5cbiAgaWYgKHBhcmFtcy5hdXRvX2VsZW1lbnQpIHtcbiAgICBpZiAoYXV0b2V2ZW50U3RhdHVzID09PSAyIHx8IHJlbW90ZUF1dG90cmFja1N0YXR1cyA9PT0gMikge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoIXJlbW90ZUF1dG90cmFja1N0YXR1cyAmJiAhbG9jYWxBdXRvdHJhY2tFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgaWYgKCFuZWVkTGltaXRTZW5kKGxvZ2tleSkpIHtcbiAgICByZXR1cm47XG4gIH0gIFxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuZXhwb3J0cy5jYW5TZW5kUFYgPSBmdW5jdGlvbih0cmFja190eXBlKSB7XG4gIGlmICghaXNVTSgpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gXG4gIC8v6K6+5aSH5byA5YWzIFxuICB2YXIgZGV2aWNlU3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXREZXZpY2VTdGF0dXMoKTtcbiAgLy8g6L+c56iL5YWo5Z+L54K5IOiHquWKqHB2IOW8gOWFs1xuICB2YXIgYXV0b3B2U3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvUGFnZVN0YXR1cygpO1xuICAvLyDmnKzlnLDlhajln4vngrnphY3nva4g6Ieq5YqocHYg5byA5YWzXG4gIHZhciBsb2NhbEF1dG9QdkRpc2FibGVkID0gdXRpbExvY2FsQ2ZnLmxvY2FsQXV0b1BWRGlzYWJsZWQoKTtcbiAgXG4gIHZhciByZXN1bHQgPSB0cnVlO1xuICBpZiAoIWRldmljZVN0YXR1cykge1xuICAgIHJlc3VsdCA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKHRyYWNrX3R5cGUgPT09ICcxJyl7XG4gICAgcmV0dXJuICEoYXV0b3B2U3RhdHVzID09PSAyIHx8ICghYXV0b3B2U3RhdHVzICYmIGxvY2FsQXV0b1B2RGlzYWJsZWQpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnRMaW1pdC5qc1xuLy8gbW9kdWxlIGlkID0gNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxMb2NhbENvbmZpZy5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbi8qKlxuICog5YWo5Z+L54K55pys5Zyw6YWN572uIOivu+WPllxuICog5Y+W5YC8IOWPquaciSB0cnVlIG9yIGZhbHNlXG4qL1xuXG5leHBvcnRzLmxvY2FsQXV0b0V2ZW50RGlzYWJsZWQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHJldHVybiAhIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UKTsgXG59O1xuXG5cbmV4cG9ydHMubG9jYWxBdXRvUFZEaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFYpIHx8ICEhKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgPT09ICdNQU4nKTtcbn07XG5cbmV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICByZXR1cm4gISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRCk7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTG9jYWxDb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmlbDnu4Tlt6XlhbdcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIElFOOS4jeaUr+aMgeaVsOe7hOWOn+eUn+eahGluZGV4T2bvvIzmlYXoh6rooYzlrp7njrDkuIDkuKppbmRleG9mXG4gKiBAcGFyYW0gW0FycmF5XSBhcnJcbiAqIEBwYXJhbSBbT2JqZWN0XSBpdGVtXG4gKiBAcmV0dXJuIFtOdW1iZXJdIGluZGV4XG4gKi9cbmV4cG9ydHMuaW5kZXhvZiA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdHJ5IHtcbiAgICBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChhcnJbal0gPT09IGl0ZW0pIHtcbiAgICAgICAgaW5kZXggPSBqO1xuICAgICAgfVxuICAgIH1cbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gaW5kZXg7XG4gIH1cbn07XG5leHBvcnRzLml0ZW1NYXRjaCA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuICB2YXIgbWF0Y2hlZCA9IGZhbHNlO1xuICB0cnkge1xuICAgIGlmICghdGhpcy5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBtYXRjaGVkO1xuICAgIH1cbiAgICBtYXRjaGVkID0gYXJyLnNvbWUoZnVuY3Rpb24ocykge1xuICAgICAgcmV0dXJuIChzICYmIHMubGVuZ3RoID4gMCkgJiYgaXRlbS5pbmRleE9mKHMpICE9PSAtMTtcbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChpdGVtLmluZGV4T2YoYXJyW2pdKSAhPT0gLTEpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbWF0Y2hlZDtcbn07XG5cbmZ1bmN0aW9uIGlzQXJyYXkobykge1xuICBpZiAoQXJyYXkuaXNBcnJheSkge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAvQXJyYXkvLnRlc3QoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pKTtcbiAgfVxufTtcblxuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gZmxhdChhcnIpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAoaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2ID0gYXJyW2ldO1xuICAgICAgaWYgKGlzQXJyYXkodikpIHtcbiAgICAgICAgLy/pgJLlvZLmiYHlubPljJbmlbDnu4RcbiAgICAgICAgYXJyW2ldID0gZmxhdCh2KTtcbiAgICAgICAgLy8g6YCS5b2S5ZCOIOi/nuaOpeaVsOe7hFxuICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KGFycltpXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQucHVzaCh2KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0cy5mbGF0ID0gZmxhdDtcblxuZnVuY3Rpb24gZmluZChhcnIsIGNhbGxiYWNrKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGFyci5maW5kKGNhbGxiYWNrKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBtYXRjaCA9IGNhbGxiYWNrKGFycltpXSk7XG4gICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGFycltpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0cy5maW5kID0gZmluZDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcbiAqXG4gKiAg5o+S5Lu25L2c55So77ya5pS26ZuG5bqU55So5pa56Ieq5a6a5LmJcHblj4LmlbBcbiAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19oamxqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbi8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuXG4gICAgLyoqXG4gICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG4gICAgICpcbiAgICAgKiByZWNvcmQobG9na2V5LCBnbWtleSwgZ29rZXkpIEFQSeS4reeahGdva2V5XG4gICAgICogbWV0YTphcGx1cy1leGluZm/kv6Hmga8sIG1ldGE6YXBsdXMtZXhkYXRh5L+h5oGvXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG4gICAgICovXG4gICAgZ2V0VXNlckRhdGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGMgPSB0aGlzLm9wdGlvbnMuY29udGV4dCB8fCB7fTtcbiAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG4gICAgICB2YXIgZ29rZXkgPSBjLndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaih1c2VyZGF0YS5nb2tleSkpO1xuICAgICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHt9LCBnb2tleSwgZm9ybWF0LnBhcmFtMm9iaihhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhpbmZvJyl8fHt9KSk7XG4gICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuICAgICAgaWYgKGlzQXJyYXkoZXhkYXRhKSkge1xuICAgICAgICBleGRhdGEuZm9yRWFjaChmdW5jdGlvbihpdGVtKXtcbiAgICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBleGRhdGEgfHwge30pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdva2V5O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6NcbiAgICAgKiDov5Tlm54nZG9uZSfnu4jmraLkuK3pl7Tku7bmiafooYxcbiAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG4gICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuICAgICAqIEByZXR1cm4gJ2RvbmUnIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsb2dkYXRhID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG4gICAgICB2YXIgZ29rZXkgPSB0aGlzLmdldFVzZXJEYXRhKCk7XG4gICAgICAvLyDlupTnlKjpgIDlh7rkuovku7bmr5TovoPnibnmrorvvIxkdXJhdGlvbuWNs2FyZzEgQOaWh+mdklxuICAgICAgaWYgKGxvZ2RhdGEuZ21rZXkgPT09ICcxMDEwJykge1xuICAgICAgICBsb2dkYXRhLmFyZzEgPSBnb2tleS5kdXJhdGlvbiB8fCBsb2dkYXRhLmxvZ2tleTtcbiAgICAgIH1cbiAgICAgIGxvZ2RhdGEuZ29rZXkgPSBnb2tleTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gbG9nZGF0YTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvaGpsai93aGF0X3RvX2hqbGpfdXNlcmRhdGFfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hcGkvbWFpbl9taW5pJykodGhpcy5vcHRpb25zLmNvbnRleHQubG9nQ29uZmlnKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9hcGx1c19hcGlfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuICogQVBJ5o+S5Lu2XG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLyoqXG4gKiBAcGFyYW1zIHtPYmplY3R9IGxvZ0NvbmZpZyB7XG4gKiAgICBwdjoge1xuICogICAgICBwbHVnaW5zOiByZXF1aXJlKCcuL2xpYl9sb2cvcGx1Z2luc19wdicpLFxuICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ191JylcbiAqICAgIH0sXG4gKiAgICBoamxqOiB7XG4gKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX2hqbGonKSxcbiAqICAgICAgY29udGV4dDogcmVxdWlyZSgnLi9saWJfbG9nL2NvbmZpZy9jb25maWdfaGpsal91JylcbiAqICAgIH1cbiAqICB9XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGxvZ0NvbmZpZykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYXBpKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGFwbHVzLl9hcGx1c19hcGkgPSB7XG4gICAgICBzdGF0dXM6IGFwbHVzU3RhdGljLkNPTVBMRVRFXG4gICAgfTtcbiAgfVxuXG4gIHZhciBhcGx1c09iaiA9IHJlcXVpcmUoJy4vYXBsdXNfbWluaScpLnJ1bi5jcmVhdGUoe1xuICAgIGxvZ0NvbmZpZzogbG9nQ29uZmlnXG4gIH0pO1xuICBmb3IgKHZhciBrIGluIGFwbHVzT2JqKSB7XG4gICAgYXBsdXNba10gPSBhcGx1c09ialtrXTtcbiAgfVxuICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywgYXBsdXMpO1xuICB2YXIgbXNnQXJyID0gW2FwbHVzU3RhdGljLkFQTFVTICsgJ1JlYWR5JywgYXBsdXNTdGF0aWMuQ09NUExFVEVdO1xuICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ0Fycik7XG4gIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNnQXJyKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbl9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIFJlZHVjZXIgPSByZXF1aXJlKCdAY29yZS9SZWR1Y2VyJyk7XG52YXIgbWV0YUluZm8gPSByZXF1aXJlKCcuLi9saWJfbWV0YS9tZXRhSW5mb01pbmknKTtcbnZhciBpc1RyaXZlciA9IHJlcXVpcmUoJ0B1dGlscy9pc1RyaXZlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIHV0aWxFdmVudExpbWl0ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudExpbWl0Jyk7XG5cbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbnZhciBfZ2V0UGFnZVNwbSA9IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChvcHRzLCBjYWxsYmFjaykge1xuICBpZiAobXkgJiYgbXkuY2FsbCAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuICAgICAgJ3R5cGUnOiAnYmVoYXZpb3InLFxuICAgICAgJ3N1YlR5cGUnOiBvcHRzLnN1YlR5cGVcbiAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICB2YXIgcnMgPSB7fTtcbiAgICAgIHJzW29wdHMuc3BtVHlwZV0gPSByZXNbb3B0cy5zcG1UeXBlXTtcbiAgICAgIGNhbGxiYWNrKHJzKTtcbiAgICB9KTtcbiAgfVxufTtcblxudmFyIGlzUGFnZURpc0FwcGVhciA9IHRydWU7XG52YXIgaXNQYWdlQXBwZWFyID0gZmFsc2U7XG5cbnZhciBydW4gPSBCYXNlLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Zu+54mH5Zyw5Z2A77yM5ZCR5pyN5Yqh5Zmo5Y+R6YCB5omT54K5XG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICogQHBhcmFtIFtkYXRhU3RyXSB7U3RyaW5nIHx8IE9iamVjdH1cbiAgICogQHBhcmFtIFttZXRob2RdIHtTdHJpbmd9ICAvLyBQT1NUIE9SIEdFVFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuICBfc2VuZDogZnVuY3Rpb24gKHVybCwgZGF0YSwgbWV0aG9kLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgIC8vIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnb2JqZWN0JyAmJiBtZXRob2QgPT09ICdQT1NUJykge1xuICAgICAgbWluaS5yZXF1ZXN0KHVybCwge1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgZGF0YVR5cGU6ICdiYXNlNjQnXG4gICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1pbmkucmVxdWVzdCh1cmwgKyAnPycgKyBkYXRhLCB7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBkYXRhVHlwZTogJ2Jhc2U2NCdcbiAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHVybDtcbiAgfSxcblxuICAvKipcbiAgICogR0VUIOivt+axguS4gOS4quWPr+inhuWMlumFjee9ruS/oeaBr++8jOWQkeacjeWKoeWZqOWPkVxuICAgKlxuICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG4gICAqL1xuICBfcmVxdWVzdFZUQ29uZmlnOiBmdW5jdGlvbih1cmwsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgLy8gICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcbiAgICAvLyAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICAvLyAgIH1cbiAgICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICAgIC8vIH1cbiAgICBtaW5pLnJlcXVlc3QodXJsLCB7IG1ldGhvZDogJ0dFVCcsZGF0YVR5cGU6J2pzb24nIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICogR0VUIOivt+axgui/nOeoi+mFjee9ru+8jOWQkeacjeWKoeWZqOWPkVxuICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG4gICAqICovIFxuICBfcmVxdWVzdFJlbW90ZUNvbmZpZzogZnVuY3Rpb24odXJsLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAgIC8vIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgIC8vICAgLy8gdXJsID0gYXBsdXNTdGF0aWMuSFRUUFMgKyB1cmw7XG4gICAgLy8gICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcbiAgICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAgIC8vICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgLy8gICB9XG4gICAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgICAvLyB9XG4gICAgbWluaS5yZXF1ZXN0KHVybCwgeyBtZXRob2Q6ICdHRVQnLCBkYXRhVHlwZTogJ2pzb24nIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgfSxcbiAgLyoqXG4gICAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAgICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG4gICAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2VcbiAgICogICBwYWdlX2lkOiAxMjMsICAgICAgICAgLy8g5bCG5Lya5L2T546w5Zyoc3BtYuS9jeS4ilxuICAgKiAgIGdva2V5OiAnJywgICAgICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnlj4LmlbDvvIjlkJHkuIvlhbzlrrnvvIxUT0RP5ZCO57ut5LiL5o6J77yJXG4gICAqIH1cbiAgICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhOiB7XG4gICAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcbiAgICogICB4eHgxOiAndnZ2MScsXG4gICAqICAgeHh4MjogJ3Z2djInLFxuICAgKiAgIHh4eE46ICd2dnZOJyxcbiAgICogfSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG4gICAqL1xuICBfc2VuZFBWOiBmdW5jdGlvbiAoY29uZmlnLCB1c2VyZGF0YSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG5cbiAgICBpZiAoY29uZmlnLnBhZ2VOYW1lKSB7XG4gICAgICBhcGx1cy5fc2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVMgKyAnLXBhZ2VuYW1lJywgY29uZmlnLnBhZ2VOYW1lKTtcbiAgICB9XG4gICAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICAgIGNvbmZpZy5yZWNvcmRUeXBlID0gJ1BWJzsgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgaWYgKCFjb25maWcubWV0aG9kKSB7XG4gICAgICBjb25maWcubWV0aG9kID0gJ0dFVCc7XG4gICAgfVxuICAgIHZhciBwdiA9IGFwbHVzLmxvZ0NvbmZpZy5wdjtcbiAgICByZWR1Y2VyLnJ1bih7XG4gICAgICBwbHVnaW5zOiBwdi5wbHVnaW5zLFxuICAgICAgY29udGV4dDogY2xvbmVEZWVwKHB2LmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgIH0sIHtcbiAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgdXNlcmRhdGE6IHVzZXJkYXRhIHx8IHt9LFxuICAgICAgcHVic3ViVHlwZTogJ3B2JyxcbiAgICAgIC8vIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9wdixcbiAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2J1xuICAgIH0pO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiDogZrlkIjkuIrmiqXku6Tnrq3ml6Xlv5dcbiAgICpcbiAgICogQHBhcmFtcyB7U3RyaW5nfSBsb2drZXnvvIjlv4XloavvvIlcbiAgICogQHBhcmFtcyB7U3RyaW5nfSBnbWtlee+8iOW/heWhq++8iSDmnprkuL7lgLzvvJogQ0xLIOWSjCBFWFBcbiAgICogQHBhcmFtcyB7QXJyYXlPYmplY3R9IGdva2V5c++8iOW/heWhq++8ieWGhee9rueahOWvueixoeWPguaVsOagvOW8j+Wmgu+8mlxuICAgKiAgW3tcbiAgICogICAgXCJleGFyZ3NcIjogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5oql55qE6Ieq5a6a5LmJ5Y+C5pWw77yM5YaF5a655Z2H5Li65Y+v6YCJ77yM5aaC5peg6Ieq5a6a5LmJ5Y+C5pWw5YiZ5Lyg56m65a+56LGhXG4gICAqICAgICAgXCJfd1wiOiAzNzUsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFieaooeWdl+WuveW6plxuICAgKiAgICAgIFwiX2hcIjogMTg4LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfpq5jluqZcbiAgICogICAgICBcIl94XCI6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5qiq5Z2Q5qCHXG4gICAqICAgICAgXCJfeVwiOiA4NywgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFieaooeWdl+e6teWdkOagh1xuICAgKiAgICAgIFwiX3JhdGVcIjogXCIxLjAwXCIsICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFiemdouenr+avlOS+i1xuICAgKiAgICAgIFwiX3ZpZXdhYmlsaXR5XCI6IFwiaW50ZXJzZWN0aW9uXCIsICAgICAgIC8vIOabneWFieaWueW8jyBpbnRlcnNlY3Rpb24g5oiWIGZpbGx3aW5kb3dcbiAgICogICAgICAvLyDpmaTkuobkuIrov7Dkv53nlZnlj4LmlbDlpJbnmoTlhbbku5blj4LmlbBrZXktdmFsdWXoh6rooYzlrprkuYnvvJpcbiAgICogICAgICBcInlvdXJLZXkxXCI6IFwieW91clZhbHVlMVwiLCAgICAgICAgXG4gICAqICAgICAgXCJ5b3VyS2V5MlwiOiBcIiVFNCVCOCVBRCVFNSU5QiVCRFwiICAgICAgLy8g5aaC5Li65Lit5paH77yM5YiZ6ZyA6Ieq6KGM57yW56CBXG4gICAqICAgICAgLi4uLi4uXG4gICAqICAgIH0sXG4gICAqICAgIFwic2NtXCI6IFwiYS5iLmMuZFwiLCAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nt5Li65Y+v6YCJ5Y+C5pWw77yM5aaC5peg5YiZ5Lyg56m65YC8XG4gICAqICAgIFwic3BtXCI6IFwic3BtYS5zcG1iLnNwbWMuc3BtZFwiLCAgICAgICAgICAgLy8gc3Bt5Li65b+F6YCJ5Y+C5pWw77yM5L2/55So5qCH5YeG55qE5Zub5q615byPXG4gICAqICAgIFwiYXBsdXNDb250ZW50SWRcIjogXCJcIiAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5a2X5q6177yM5pqC5pe25LiN6ZyA6KaB5LygXG4gICAqICB9XVxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IG1ldGhvZO+8iOWPr+mAie+8iSAgICAgICAgICAgICAgLy8g5p6a5Li+5YC877yaIEdFVOWSjFBPU1TvvIzpu5jorqTkvb/nlKhQT1NU5pa55byP5LiK5oqlXG4gICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYiAgICAgICAgICAgICAgICAgICAgICAvLyDkv53nlZnlsZ7mgKfvvIzmmoLml7bkuI3pnIDopoHkvKBcbiAgICovXG4gIF9jb21iaW5lUmVjb3JkOiBmdW5jdGlvbihsb2drZXksIGdta2V5LCBnb2tleXMsIG1ldGhvZCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICB2YXIgRVhQID0gJ0VYUCc7XG4gICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSAmJiAoZ21rZXkgPT09IEVYUCB8fCBnbWtleSA9PT0gJ0NMSycpKSB7XG4gICAgICBpZiAoaXNBcnJheShnb2tleXMpKSB7XG4gICAgICAgIGlmICghbWV0aG9kKSB7XG4gICAgICAgICAgbWV0aG9kID0gJ1BPU1QnO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VyZGF0YSA9IFtdO1xuICAgICAgICB2YXIgc2VuZHRvbXkgPSAndHJ1ZSc7XG4gICAgICAgIGdva2V5cy5mb3JFYWNoKGZ1bmN0aW9uKHYpe1xuICAgICAgICAgIHVzZXJkYXRhLnB1c2goe1xuICAgICAgICAgICAgZXhhcmdzOiB0eXBlb2Ygdi5leGFyZ3MgPT09ICdvYmplY3QnID8gdi5leGFyZ3MgOiB7fSxcbiAgICAgICAgICAgIHNjbTogdi5zY20sXG4gICAgICAgICAgICBzcG06IHYuc3BtLFxuICAgICAgICAgICAgYXBsdXNDb250ZW50SWQ6IHYuYXBsdXNDb250ZW50SWQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHYuX2FwbHVzX3NlbmR0b215ID09PSAnZmFsc2UnICYmIHNlbmR0b215ID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgIHNlbmR0b215ID0gJ2ZhbHNlJztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgX2dva2V5cyA9IFtdO1xuICAgICAgICBfZ29rZXlzLnB1c2goKGdta2V5ID09PSBFWFAgPyAnZXhwZGF0YT0nIDogJ2Nsa2RhdGE9JykgKyBKU09OLnN0cmluZ2lmeSh1c2VyZGF0YSkpO1xuICAgICAgICBfZ29rZXlzLnB1c2goZ21rZXkgPT09IEVYUCA/ICdfaXNfYXV0b19leHA9MScgOiAnX2lzX2F1dG9fY2xrPTEnKTtcbiAgICAgICAgX2dva2V5cy5wdXNoKCdfZXZlbnRUeXBlPWN1c3RvbScpO1xuICAgICAgICBfZ29rZXlzLnB1c2goJ19tZXRob2Q9JyArIG1ldGhvZCk7XG4gICAgICAgIF9nb2tleXMucHVzaCgnX3BrZ1NpemU9JyArIGdva2V5cy5sZW5ndGgpO1xuICAgICAgICBpZiAoc2VuZHRvbXkgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICBfZ29rZXlzLnB1c2goJ19hcGx1c19zZW5kdG9teT1mYWxzZScpO1xuICAgICAgICB9XG4gICAgICAgIGFwbHVzLnJlY29yZChsb2drZXksIGdta2V5LCBfZ29rZXlzLmpvaW4oJyYnKSwgbWV0aG9kKTsgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS53YXJuKCd0eXBlIG9mIGdva2V5cyBtdXN0IGJlIEFycmF5T2JqZWN0IScpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ29ubHkgc3VwcG9ydCBFWFAgb3IgQ0xLIGxvZyB0byBjb21iaWxlIHJlY29yZCEnKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWPkemAgem7hOmHkeS7pOeureaJk+eCuVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnbWtleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZ29rZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcbiAgICogQHBhcmFtIHtTdHJpbmd9IGNiXG4gICAqL1xuICBfcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgZ29rZXkgPSBtZXRhSW5mby5nZXRVc2VySW5qZWN0R29rZXkoe1xuICAgICAgbG9na2V5OiBsb2drZXksXG4gICAgICBnbWtleTogZ21rZXksXG4gICAgICBnb2tleTogZ29rZXlcbiAgICB9KTtcbiAgICBsb2drZXkgPSBsb2drZXkgKyAnJztcbiAgICBpZiAobG9na2V5ICYmIGxvZ2tleS5pbmRleE9mKCcvJykgIT09IDAgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG4gICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG4gICAgfVxuICAgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaTtcbiAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG4gICAgdmFyIGhqbGogPSBhcGx1cy5sb2dDb25maWcuaGpsajtcbiAgICBpZiAoIWlzQWxpKSB7ICAgICAgXG4gICAgICB1dGlsRXZlbnRMaW1pdC5jYW5Ub1NlbmRISkxKKGdva2V5LCBsb2drZXkpICYmIHJlZHVjZXIucnVuKHtcbiAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgICBjb250ZXh0OiBjbG9uZURlZXAoaGpsai5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5NcbiAgICAgIH0sIHtcbiAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgcmVjb3JkVHlwZTogJ0NPTU1PTl9ISkxKJywgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgICAgICAgbWV0aG9kOiBtZXRob2QgfHwgJ0dFVCdcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcmRhdGE6IHtcbiAgICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgICAgZ29rZXk6IGdva2V5XG4gICAgICAgIH0sXG4gICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcbiAgICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfaGpsaidcbiAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWR1Y2VyLnJ1bih7XG4gICAgICAgIHBsdWdpbnM6IGhqbGoucGx1Z2lucyxcbiAgICAgICAgY29udGV4dDogY2xvbmVEZWVwKGhqbGouY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG4gICAgICB9LCB7XG4gICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgIHJlY29yZFR5cGU6ICdDT01NT05fSEpMSicsIC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuICAgICAgICAgIG1ldGhvZDogbWV0aG9kIHx8ICdHRVQnXG4gICAgICAgIH0sXG4gICAgICAgIHVzZXJkYXRhOiB7XG4gICAgICAgICAgbG9na2V5OiBsb2drZXksXG4gICAgICAgICAgZ21rZXk6IGdta2V5LFxuICAgICAgICAgIGdva2V5OiBnb2tleVxuICAgICAgICB9LFxuICAgICAgICBwdWJzdWJUeXBlOiAnaGpsaicsXG4gICAgICAgIC8vIG1lc3NhZ2VGblF1ZXVlOiBmbl9hZnRlcl9yZWNvcmQsXG4gICAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG4gICAgICB9LCBmdW5jdGlvbigpe1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjYikpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG4gIFxuICBnZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgdmFyIGRhdGEgPSBzcG0uZGF0YSB8fCB7fTtcbiAgICByZXR1cm4gW2RhdGEuYSwgZGF0YS5iXTtcbiAgfSxcblxuICAvKipcbiAgICog5pu05paw6aG16Z2i55qEIGHjgIFiIOS9jVxuICAgKiDpnIDmsYLlj4Lop4HvvJpodHRwOi8vZ2l0bGFiLmFsaWJhYmEtaW5jLmNvbS9hbGlsb2cva2IvaXNzdWVzLzEzN1xuICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2JdIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbY2JdIHtGdW5jdGlvbn1cbiAgICovXG4gIF9zZXRQYWdlU1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9iaiA9IHt9O1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBjYjtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBvYmogPSBhcmdzWzBdO1xuICAgICAgY2IgPSBhcmdzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYmouc3BtQ250ID0gW2FyZ3NbMF0sIGFyZ3NbMV0sICcwJywgJzAnXS5qb2luKCcuJyk7XG4gICAgICBjYiA9IGFyZ3NbMl07XG4gICAgfVxuICAgIHZhciBtc2dzO1xuICAgIGlmICghb2JqLnNwbUNudCAmJiAhb2JqLnNwbVVybCAmJiBtZXRhSW5mby5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpKSB7XG4gICAgICBtc2dzID0gWydjbGVhclBhZ2VTUE0nXTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbXMgb2JqIHtPYmplY3R9IHtcbiAgICAgICAqICAgc3BtQ250OiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtUHJlOiAnYS5iLjAuMCdcbiAgICAgICAqIH1cbiAgICAgICAqL1xuICAgICAgbXNncyA9IFsnc2V0UGFnZVNQTScsIG9ial07XG4gICAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcbiAgICB9XG4gICAgdmFyIGNhbGxiYWNrID0gdHlwZW9mIGNiID09PSAnZnVuY3Rpb24nID8gY2IgOiBmdW5jdGlvbiAoKSB7fTtcbiAgICBjYWxsYmFjayhtc2dzKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiDliqjmgIHphY3nva5tZXRhXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzIHtcbiAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG4gICAqIH1cbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG4gIF9zZXRNZXRhSW5mbzogZnVuY3Rpb24oYXJnMSwgdmFsdWUpIHtcbiAgICByZXR1cm4gbWV0YUluZm8uX3NldE1ldGFJbmZvKGFyZzEsIHZhbHVlKTtcbiAgfSxcblxuICAvKipcbiAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjMzMyZGU2MmNcbiAgICog5LiN5pSv5oyBdXBkYXRlUGFnZVByb3BlcnRpZXPvvIzmlLnnlKjmm7/ku6PmlrnmoYhzZXRNZXRhSW5mb1xuICAgKiBAcGFyYW1zIHtTdHJpbmd9IOmAj+S8oGpzb27lrZfnrKbkuLLvvIzlv4XpobvmmK/lrZfnrKbkuLJcbiAgICovXG4gIF91cGRhdGVQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zKXtcbiAgICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIC8vIOaWsOWuueWZqFRyaXZlcumHh+eUqHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzXG4gICAgICBpZiAoaXNUcml2ZXIoKSkge1xuICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzJywgcGFyYW1zKTtcbiAgICAgIH0gZWxzZSBpZihtaW5pLmdldFBsYXRmb3JtVHlwZSgpPT09J215Jyl7XG4gICAgICAgIG15LmNhbGwoJ3JlcG9ydERhdGEnLHtcbiAgICAgICAgICBzcG1EZXRhaWw6cGFyYW1zLFxuICAgICAgICAgIGlnbm9yZURlZmF1bHRQYWdlTW9uaXRvcjp0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8g5ZCR5LiL5YW85a6577yM5LiN566h5oCO5LmI5qC36YO95b6AbWV0YUluZm/orr7nva7kuIDku71cbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcbiAgICAgIHZhciBkYXRhID0ge307XG4gICAgICBkYXRhW3BhZ2VOYW1lXSA9IHBhcmFtcztcbiAgICAgIG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnLCBkYXRhKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCM2MDM0YzFkYVxuICAgKi9cbiAgX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHBhcmFtcykge1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG15KSB7XG4gICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgdHlwZTogJ3VwZGF0ZU5leHRQcm9wJyxcbiAgICAgICAgZXZlbnRJZDogLTEsXG4gICAgICAgIGV2ZW50aWQ6IC0xLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgcGFnZU5hbWU6ICcnLFxuICAgICAgICBjb21OYW1lOiAnJyxcbiAgICAgICAgYXJnMTogJycsXG4gICAgICAgIGFyZzI6ICcnLFxuICAgICAgICBhcmczOiAnJyxcbiAgICAgICAgcGFyYW06IHBhcmFtcyxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgIH07XG4gICAgICBpZiAobXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgICBteS5jYWxsVXNlclRyYWNrKCdjb21taXR1dCcsIGRhdGEpO1xuICAgICAgfSBlbHNlIGlmIChteS5yZXBvcnRBbmFseXRpY3MpIHtcbiAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCdlbnRlcicsIGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gICAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuICAgKiAgLSBgQXJyYXkucHJvdG90eXBlLmNvbmNhdGAgY2FsbGVkIG9uIEFycmF5IHZhbHVlcy5cbiAgICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICAgKiAgQHBhcmFtIGtcbiAgICogIEBwYXJhbSB2XG4gICAqL1xuICBfYXBwZW5kTWV0YUluZm86IG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvLFxuXG4gIC8qKlxuICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfVxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuICBnZXRNZXRhSW5mbzogZnVuY3Rpb24gKGspIHtcbiAgICByZXR1cm4gbWV0YUluZm8uZ2V0TWV0YUluZm8oayk7XG4gIH0sXG5cbiAgLy8g5rex5bqm5YWL6ZqG77yM5LuO5qC45b+D5bqT5pq06Zyy5Ye65Y675L6bYXBsdXNKU+aPkuS7tuS9v+eUqFxuICBjbG9uZURlZXA6IGNsb25lRGVlcCxcbiAgLyoqXG4gICAqIOWmguaenOWuueWZqOWunueOsOS6hmFwcGVhcuOAgWRpc2FwcGVhcu+8jOS9huS4muWKoeWPiOaDs+aJi+WKqOaOp+WItuaJk+eCueeUn+WRveWRqOacn+aXtuS9v+eUqFxuICAgKlxuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfc2tpcFBhZ2U6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBVc2VyVHJhY2suc2tpcFBhZ2UoKTtcbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygnc2tpcFBhZ2UnKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiDlpoLmnpzlrrnlmajmnKrmj5DkvpthcHBlYXLjgIFkaXNhcHBlYXLml7bpnIDopoHkuJrliqHmiYvliqjosIPnlKhcbiAgICpcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKi9cbiAgX3BhZ2VBcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgaXNQYWdlRGlzQXBwZWFyKSB7XG4gICAgICBpc1BhZ2VEaXNBcHBlYXIgPSBmYWxzZTtcbiAgICAgIGlzUGFnZUFwcGVhciA9IHRydWU7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlQXBwZWFyJyk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5aaC5p6c5a655Zmo5pyq5o+Q5L6bYXBwZWFy44CBZGlzYXBwZWFy5pe26ZyA6KaB5Lia5Yqh5omL5Yqo6LCD55SoXG4gICAqXG4gICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cbiAgICovXG4gIF9wYWdlRGlzYXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrICYmIGlzUGFnZUFwcGVhcikge1xuICAgICAgaXNQYWdlRGlzQXBwZWFyID0gdHJ1ZTtcbiAgICAgIGlzUGFnZUFwcGVhciA9IGZhbHNlO1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygncGFnZURpc2FwcGVhcicpO1xuICAgIH1cbiAgfSxcbiAgX3VwZGF0ZVBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlUGFnZVV0cGFyYW0nLCB7XG4gICAgICAgICd1dFBhcmFtSnNvbic6IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICBfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuICAgIGlmICghcGFyYW1zKSB7XG4gICAgICBwYXJhbXMgPSB7fTtcbiAgICB9XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsIHtcbiAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDku4XmiYvmt5jvvIhWOS4xMC4w77yJ5bCP56iL5bqP5pSv5oyBXG4gICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfdXBkYXRlU2Vzc2lvblByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG4gICAgLy8gaWYgKG15ICYmIG15LnJlcG9ydEFuYWx5dGljcyAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLCBwcm9wZXJ0aWVzKTtcbiAgICAvLyB9XG4gICAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuICAgICAgICB0eXBlOiAnYmVoYXZpb3InLFxuICAgICAgICBzdWJUeXBlOiAndXBkYXRlU2Vzc2lvblByb3BlcnRpZXMnLFxuICAgICAgICBleHREYXRhOiBwcm9wZXJ0aWVzLFxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICAvKipcbiAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG4gICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjazoge3NwbVVybDogJyd9XG4gICAqL1xuICBfZ2V0UGFnZVNwbVVybDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgX2dldFBhZ2VTcG0oe1xuICAgICAgc3ViVHlwZTogJ2dldFBhZ2VTcG1VcmwnLFxuICAgICAgc3BtVHlwZTogJ3NwbVVybCdcbiAgICB9LCBjYWxsYmFjayk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2sgOiB7c3BtUHJlOiAnJ31cbiAgICovXG4gIF9nZXRQYWdlU3BtUHJlOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBfZ2V0UGFnZVNwbSh7XG4gICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVByZScsXG4gICAgICBzcG1UeXBlOiAnc3BtUHJlJ1xuICAgIH0sIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICog6K6+572uUGFnZU5hbWUgXG4gICovXG4gIF9zZXRQYWdlTmFtZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFnZU5hbWUsIHBhdGgpIHtcbiAgICBpZiAoIXBhZ2VOYW1lKSB7XG4gICAgICB1bG9nKCkudygnc2V0UGFnZU5hbWUgZmFpbGVkOiAnICsgJyBwYWdlTmFtZT0nICsgcGFnZU5hbWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY3VyUGF0aCA9IHBhdGggfHwgUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG4gICAgXG4gICAgdmFyIHBhZ2VNZXRhID0gY2xvbmVEZWVwKG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykgfHwge30pO1xuICAgIHBhZ2VNZXRhW2N1clBhdGhdID0gcGFnZU5hbWU7XG4gICAgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oJ3BhZ2VDb25maWcnLCBwYWdlTWV0YSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiOt+WPllBhZ2VOYW1lXG4gICovXG4gIGdldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXRoKSB7XG4gICAgcmV0dXJuIFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKHBhdGgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiDojrflj5blhYPntKDnmoRzcG1cbiAgICogKi8gXG4gIF9nZXRFbGVtZW50U1BNOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbih0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdmFyIHNwbUIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8ICcnOyBcblxuICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFyIHRyYWNrZXJQYXJhbXMgPSB0YXJnZXQuZGF0YXNldCAmJiB0YXJnZXQuZGF0YXNldC50cmFja2VyUGFyYW1zIHx8ICcnO1xuICAgICAgdmFyIHNwbUNEID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKHRyYWNrZXJQYXJhbXMpO1xuICAgICAgcmV0dXJuIFtzcG1CLCBzcG1DRC5zcG1DLCBzcG1DRC5zcG1EXS5qb2luKCcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgIHZhciBhdXRvX2Nsa19tZXRhaW5mbyA9IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpIHx8IFtdO1xuICAgICAgdmFyIGF1dG9fZXhwX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJykgfHwgW107XG4gICAgICB2YXIgdGFyZ2V0U3BtO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIC8v6Ieq5Yqo54K55Ye75LyY5YWI57qn5pu06auYXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGF1dG9fY2xrX21ldGFpbmZvLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICB2YXIgY2xrX2luZm8gPSBhdXRvX2Nsa19tZXRhaW5mb1tpXTtcbiAgICAgICAgICBpZiAoY2xrX2luZm8uY3NzU2VsZWN0b3IgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgdGFyZ2V0U3BtID0gW3NwbUIsIGNsa19pbmZvLnNwbUMsIGNsa19pbmZvLnNwbURdLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGZvcihpID0gMDsgaSA8IGF1dG9fZXhwX21ldGFpbmZvLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICB2YXIgZXhwX2luZm8gPSBhdXRvX2V4cF9tZXRhaW5mb1tpXTtcbiAgICAgICAgICBpZiAoZXhwX2luZm8uY3NzU2VsZWN0b3IgPT09IHRhcmdldCkge1xuICAgICAgICAgICAgdGFyZ2V0U3BtID0gW3NwbUIsIGV4cF9pbmZvLnNwbUMsIGV4cF9pbmZvLnNwbURdLmpvaW4oJy4nKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfTsgXG5cbiAgICAgICAgdmFyIGVsZW1lbnRzID0gY3R4LmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwodGFyZ2V0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuICAgICAgICAgICAgZGF0YXNldDogdHJ1ZSxcbiAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIH0sIGZ1bmN0aW9uKHJldCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgaWYgKHJldCAmJiByZXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSByZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaCh0YXJnZXRTcG0gKyAnXycgKyBpKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzdWx0KTsgIFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkuZXhlYygpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICB1bG9nKCkudygnY3VycmVudCBtaW5pYXBwIHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgZG9tIGVsZW1lbnQgcXVlcnksIGVycm1zZzogJywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5Lmd6ZSh6ZyA5rGC77yaaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9seGxuN2gvYnZ6eW1yL2FrYjQ5ZiNoUGFYTFxuICAgKiBhcHDllKTotbfkuovku7bmjqXlj6PvvIzlrp7pmYXlsLHmmK9yZWNvcmRcbiAgICovXG4gIF9yZWNvcmRBcHBMaW5rOiBmdW5jdGlvbiAoZ29rZXksIG1ldGhvZCwgY2IpIHtcbiAgICBpZighZ29rZXkudGFyZ2V0QXBwS2V5KSB7XG4gICAgICB1bG9nKCkudygnc2VuZCAkJF9hcHBfbGluayBmYWlsZWQ6IHRhcmdldEFwcEtleSBpcyBudWxsJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICByZXR1cm4gYXBsdXMuX3JlY29yZCgnJCRfYXBwX2xpbmsnLCAnT1RIRVInLCBnb2tleSwgbWV0aG9kLCBjYik7XG4gIH0sXG59KTtcblxuZXhwb3J0cy5ydW4gPSBydW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9hcGkvYXBsdXNfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBDb21wb3NlID0gcmVxdWlyZSgnQGNvcmUvY29tcG9zZScpO1xudmFyIHBsdWdpbnNMb2FkZXIgPSByZXF1aXJlKCdAY29yZS9wbHVnaW5zTG9hZGVyJyk7XG5cbi8qKlxuICogc2VucHZcbiAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcbiAqICAgY2hlY2tzdW06IDExMTExMTExLCAgIC8vIOagueaNrnNwbWEsc3BtYuiHquWKqOeUn+aIkOeahOS4gOS4quWtl+espuS4slxuICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuICogICBwYWdlX2lkOiAxMjMsICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG4gKiAgIGdva2V5OiAnJywgICAgICAgICAgIC8vIOebruWJjeW3sue7j+WkseaViFxuICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuICogfSAvLyDlkIwgYXBsdXMubGF1bmNo56ys5LqM5Liq5YWl5Y+C4oCcbWFudWFs4oCdXG4gKlxuICogQHBhcmFtIFtPYmplY3RdIHVzZXJkYXRhICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcbiAqXG4gKiBAcGFyYW0gW09iamVjdF0gb2JqIC0ge2ZuX2FmdGVyX3B2OiBmbl9hZnRlcl9wdiwgeHh4OiB4eHh9XG4gKlxuICogc3RlcDE6IGxvYWRlciBwbHVnaW5zICBtaWRkbGV3YXJlXG4gKiBzdGVwMjogbG9hZGVyIGRvU2VuZFB2IG1pZGRsZXdhcmVcbiAqIHN0ZXAzOiBydW4gbWlkZGxld2FyZXNcbiAqL1xuXG52YXIgUmVkdWNlciA9IGZ1bmN0aW9uKCkge1xufTtcblxuLyoqXG4gKiBAcGFyYW1zIE9iamVjdCBDT05GSUcge1xuICogICBjb250ZXh0OiB4eHgsXG4gKiAgIHBsdWdpbnM6IHh4eCBcbiAqIH1cbiAqIEBwYXJhbXMgT2JqZWN0IG9wdHMge1xuICogICBjb25maWc6IGNvbmZpZyxcbiAqICAgdXNlcmRhdGE6IHVzZXJkYXRhLFxuICogICBwdWJzdWJUeXBlOiAncHYnIHx8ICdoamxqJyB8fCAncHJlcHYnXG4gKiAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2JyB8fCAnbXdfY2hhbmdlX2hqbGonIHx8ICdtd19jaGFuZ2VfcHJlcHYnXG4gKiAgIG1lc3NhZ2VGblF1ZXVlOiBbZm4xLCBmbjIgLi4uXVxuICogfVxuICovXG5SZWR1Y2VyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoQ09ORklHLCBvcHRzLCBjYWxsYmFjaykge1xuICAvLyAx44CBaW5pdCBwbHVnaW5zXG4gIHZhciBwbCA9IG5ldyBwbHVnaW5zTG9hZGVyKCk7XG4gIHBsLmluaXQoe1xuICAgIG1pZGRsZXdhcmU6IFtdLFxuICAgIGNvbmZpZzogb3B0cy5jb25maWcsXG4gICAgcGx1Z2luczogQ09ORklHLnBsdWdpbnNcbiAgfSk7XG4gIHZhciBtaWRkbGV3YXJlID0gcGwucnVuKCk7XG5cbiAgLy8g5Yid5aeL5YyW5LiK5LiL5paH546v5aKD77yMY29udGV4dOWGheeahGRhdGHlsIbkvJrlnKjlkITkuKrmj5Lku7bkuK3ov5vooYzotYvlgLzmiJbogIXkv67mlLnvvIjph43opoHvvIlcbiAgdmFyIGNvbnRleHQgPSBpc0Z1bmN0aW9uKENPTkZJRy5jb250ZXh0KSA/IG5ldyBDT05GSUcuY29udGV4dCgpIDogQ09ORklHLmNvbnRleHQ7XG4gIGNvbnRleHQudXNlcmRhdGEgPSBvcHRzLnVzZXJkYXRhO1xuICBjb250ZXh0LmxvZ2dlciA9IHV0aWxMb2dnZXIubG9nZ2VyO1xuXG4gIHZhciBhcHAgPSB7XG4gICAgY29udGV4dDogY29udGV4dCxcbiAgICBwdWJzdWI6IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ2FwbHVzX3B1YnN1YicpLFxuICAgIHB1YnN1YlR5cGU6IG9wdHMgJiYgb3B0cy5wdWJzdWJUeXBlXG4gIH07XG5cbiAgdmFyIGNvbXBvc2UgPSBuZXcgQ29tcG9zZSgpO1xuICBjb21wb3NlLmNyZWF0ZShhcHApO1xuICAvLyDmiafooYzkuK3pl7Tku7ZcbiAgY29tcG9zZS53cmFwKG1pZGRsZXdhcmUsIGZ1bmN0aW9uKCkge1xuICAgIGFwcC5jb250ZXh0LnN0YXR1cyA9IGFwbHVzU3RhdGljLkNPTVBMRVRFO1xuICAgIGlmIChvcHRzKSB7XG4gICAgICBpZiAob3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSkge1xuICAgICAgICB1dGlsUHVic3ViLmRvUHViTXNnKFtvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5LCBhcHAuY29udGV4dF0pOyAgXG4gICAgICB9XG4gICAgICBpZiAob3B0cy5tZXNzYWdlRm5RdWV1ZSkge1xuICAgICAgICBlYWNoKG9wdHMubWVzc2FnZUZuUXVldWUsIGZ1bmN0aW9uIChmbikge1xuICAgICAgICAgIGZuKHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKSwgQ09ORklHKTtcbiAgICAgICAgfSk7ICBcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhhcHAuY29udGV4dCk7XG4gICAgfVxuICB9KSgpO1xuXG59O1xubW9kdWxlLmV4cG9ydHMgPSBSZWR1Y2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9SZWR1Y2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pel5b+X57G75bel5YW36ZuG5ZCIXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW1zIHtPYmplY3R9IG8gOntcbiAqICAgbGV2ZWw6ICd3YXJuL2luZm8vbG9nJyBkZWZhdWx0IGlzIHdhcm5cbiAqICAgbXNnOiAnbXNnJ1xuICogfVxuICovXG52YXIgbWV0YUluZm8gPSByZXF1aXJlKCdAcC9saWJfbWV0YS9tZXRhSW5mb01pbmknKTtcbnZhciBwcmVmaXggPSAnW0FQTFVTXSAtLSAnO1xuZXhwb3J0cy5sb2dnZXIgPSBmdW5jdGlvbiAobykge1xuICBpZiAoIW8pIHtcbiAgICBvID0ge307XG4gIH1cbiAgdmFyIGxldmVsID0gby5sZXZlbCB8fCAnd2Fybic7XG4gIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0gJiYgY29uc29sZVtsZXZlbF0ocHJlZml4K28ubXNnKTtcbn07XG5leHBvcnRzLmxvZyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBkZWJ1ZyA9IG1ldGFJbmZvICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdkZWJ1ZycpO1xuICBkZWJ1ZyAmJiBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLFtwcmVmaXhdLmNvbmNhdChBcnJheS5wcm90b3R5cGUuc2xpY2UuYXBwbHkoYXJndW1lbnRzKSkpO1xufTtcblxuZXhwb3J0cy5kZWJ1Z0xvZyA9IGZ1bmN0aW9uKG8pIHtcbiAgdmFyIGFwbHVzID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG4gICAgdGhpcy5sb2dnZXIobyk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTG9nZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA3MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG4gKiDlh73mlbDpmJ/liJfljIXoo4XlmaggRXhwb3NlIGNvbXBvc2l0b3JcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5mdW5jdGlvbiBjb21wb3NlICgpIHt9O1xuXG5jb21wb3NlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbihwcm9wcykge1xuICAvKipcbiAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG4gICAqIGNyZWF0Zei/lOWbnueahOWunuS+i+WunumZheS4iuWwseaYr25ld+aehOmAoOWHuueahOWunuS+i++8m1xuICAgKiB0aGlz5Y2z5oyH5ZCR6LCD55So5b2T5YmNY3JlYXRl55qE5p6E6YCg5Ye95pWw77ybXG4gICAqL1xuICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzW25hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblxuY29tcG9zZS5wcm90b3R5cGUuc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKGkpIHtcbiAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgdGhpcy5jYWxsZWRMaXN0LnB1c2goaSk7XG4gIH1cbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLnJlc2V0Q2FsbGVkTGlzdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcbn07XG5cbmNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcbiAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICB2YXIgY3R4ID0gdGhpcy5jb250ZXh0IHx8IHt9O1xuICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuICB2YXIgbWF4VGltZW91dCA9IGNvbXBvc2UubWF4VGltZW91dCB8fCAxMCAqIDEwMDA7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHZhciBzaXplID0gbXcubGVuZ3RoOyAvLyDkuK3pl7Tku7bpmJ/liJfplb/luqZcbiAgICB2YXIgaSA9IDA7IC8vIOS4remXtOS7tue0ouW8lVxuICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuICAgIHZhciBzbGVlcEhhbmRlcjE7XG4gICAgdmFyIHJ1biA9IGZ1bmN0aW9uKGluZGV4LCBzdGF0dXMpIHtcbiAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG4gICAgICAvLyDkuK3pl7Tku7bpmJ/liJfmiafooYzlrozmr5XlkI7ov5Tlm55cbiAgICAgIGlmIChpID09PSBzaXplKSB7XG4gICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuICAgICAgICBjb250ZXh0LnJlc2V0Q2FsbGVkTGlzdCgpOyAvLyDph43nva5jYWxsZWRMaXN05Y+Y6YePXG4gICAgICAgIC8vIHN0YXR1c+WmguaenOetieS6jmRvbmXvvIzor7TmmI7mmK/kuK3pgJTpgIDlh7rnmoTkuK3pl7Tku7bvvIzkuI3pnIDopoHmiafooYzlm57osINcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGNvbnRleHQsIHN0YXRlKTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcbiAgICAgIC8vIOS/neivgeavj+S4quS4remXtOS7tuWPquS8muaJp+ihjOS4gOasoVxuICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKGNvbnRleHQuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG4gICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG4gICAgICAgIGlmIChtdyAmJiBtd1tpXSAmJiBpc0Z1bmN0aW9uKG13W2ldWzBdKSkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtaWRkbGV3YXJlXG4gICAgICAgICAgICAgKiBAcGFyYW1zIHtBcnJheX0gbXNnXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHN0YXRlID0gbXdbaV1bMF0uY2FsbChjb250ZXh0LCBzdGF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcbiAgICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdWxvZygpLncoZSk7XG4gICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAvLyAgIG1zZzogZVxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8g54q25oCB5Li6cGF1c2XnrYnlvoUyMDBtc+i9ruivou+8jOeKtuaAgeS4um51bWJlcuexu+Wei+eahOaVsOWAvOetieW+hXN0YXRlbXPova7or6JcbiAgICAgIHZhciBpc051bWJlciA9IHR5cGVvZiBzdGF0ZSA9PT0gJ251bWJlcic7XG4gICAgICBpZiAoc3RhdGUgPT09ICdwYXVzZScgfHwgaXNOdW1iZXIpIHtcbiAgICAgICAgaiA9IDA7XG4gICAgICAgIC8vIOacgOWkp+etieW+heaXtumVv1xuICAgICAgICB2YXIgX3RpbWVfb3V0ID0gaXNOdW1iZXIgPyBzdGF0ZSA6IG1heFRpbWVvdXQ7XG4gICAgICAgIHZhciBfbXdfbmFtZSA9IG13W2ldID8gbXdbaV1bMV0gOiAnJztcbiAgICAgICAgc2xlZXBIYW5kZXIxID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoaiA9PT0gMCkge1xuICAgICAgICAgICAgdWxvZygpLncoJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXQpO1xuICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgICAgICAgICAgLy8gICBtc2c6ICdqdW1wIHRoZSBtaWRkbGV3YXJlIGFib3V0ICcgKyBfbXdfbmFtZSArICcsIGJlY2F1c2Ugd2FpdGluZyB0aW1lb3V0IG1heFRpbWVvdXQgPSAnICsgX3RpbWVfb3V0XG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIHN0YXRlID0gbnVsbDtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgIHJ1bihpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIF90aW1lX291dCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZG9uZScpIHtcbiAgICAgICAgLy8g54q25oCB5Li6ZG9uZeihqOekuue7k+adn++8jOS4jeeuoeWQjumdoui/mOacieayoeacieS4remXtOS7tumDvee7k+adn1xuICAgICAgICBpID0gc2l6ZTtcbiAgICAgICAgcnVuKGksIHN0YXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIOm7mOiupOeKtuaAge+8jOWPqueuoeaJp+ihjOS4remXtOS7tumYn+WIl1xuICAgICAgICBpKys7XG4gICAgICAgIHJ1bihpKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChjb250ZXh0LmNhbGxlZExpc3QgJiYgY29udGV4dC5jYWxsZWRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7XG4gICAgfVxuICAgIHJldHVybiBydW4oaSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbXBvc2U7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9jb21wb3NlLmpzXG4vLyBtb2R1bGUgaWQgPSA3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL3BsdWdpbnNMb2FkZXIuanNcbiAqIOaPkuS7tuWKoOi9veWZqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCdAdXRpbHMvYXNzaWduJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtcyBvcHRzIHtcbiAgICAgKiAgIG1pZGRsZXdhcmU6IFtdLFxuICAgICAqICAgcGx1Z2luczogW10sXG4gICAgICogICBjb25maWc6IHt9XG4gICAgICogfVxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICBpZiAob3B0cyAmJiB0eXBlb2Ygb3B0cy5taWRkbGV3YXJlID09PSAnb2JqZWN0JyAmJiBvcHRzLm1pZGRsZXdhcmUubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBbXTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGx1Z2luc19uYW1lID0gW107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOWIhuWPkeiuoumYheWPmOWMllxuICAgICAqIEBwYXJhbSBvIHtcbiAgICAgKiAgIHB1YnN1Yjogey4uLn0sXG4gICAgICogICBjb250ZXh0OiB7Li4ufVxuICAgICAqIH0sXG4gICAgICogQHBhcmFtIG13IOW9k+WJjeaJp+ihjOeahOS4remXtOS7tlxuICAgICAqL1xuICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwdWJzdWIgPSBjdHgucHVic3ViO1xuICAgICAgICBpZiAocHVic3ViKSB7XG4gICAgICAgICAgcHVic3ViLnB1Ymxpc2goJ3BsdWdpbnNfY2hhbmdlXycgKyBjdHgucHVic3ViVHlwZSwgbXcpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHVsb2coKS53KGUpO1xuICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgIC8vICAgbXNnOiBlXG4gICAgICAgIC8vIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIG1pZGRsZXdhcmUgPSB0aGlzLm1pZGRsZXdhcmU7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gb3B0cy5wbHVnaW5zO1xuICAgICAgaWYgKHBsdWdpbnMgJiYgdHlwZW9mIHBsdWdpbnMgPT09ICdvYmplY3QnICYmIHBsdWdpbnMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG4gICAgICAgIHRoaXMucGx1Z2luc19uYW1lLnB1c2gocGx1Z2luLm5hbWUpO1xuICAgICAgICBtaWRkbGV3YXJlLnB1c2goW2Z1bmN0aW9uKHN0YXRlLCBjYil7XG4gICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuICAgICAgICAgIC8vIOiOt+WPluaPkuS7tuaooeWdl+i3r+W+hOW5tuWIneWni+WMllxuICAgICAgICAgIHZhciBtID0gbmV3IHBsdWdpbi5wYXRoKCk7XG5cbiAgICAgICAgICAvLyDkuLroioLnnIHku6PnoIHph4/vvIzpu5jorqTnmoTliJ3lp4vljJbmlrnms5XlnKjliqDovb3lmajlhoXlgZrlhZzlupXlpITnkIbvvIzljbPmj5Lku7blhoXml6Dnibnmrormg4XlhrXml6DpnIDlrp7njrBpbml05pa55rOVXG4gICAgICAgICAgaWYgKCFtLmluaXQpIHtcbiAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDlsIbkuIrkuIvmlofms6jlhaXliLDmj5Lku7blhoVcbiAgICAgICAgICBtLmluaXQoe1xuICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuICAgICAgICAgICAgY29uZmlnOiBhc3NpZ24ocGx1Z2luLmNvbmZpZyB8fCB7fSwgb3B0cy5jb25maWcpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG4gICAgICAgICAgICAvLyDov5nph4zkvb/nlKgx5q+r56eS5bu26L+f5omn6KGM77yM6Ziy5q2i5Lit6Ze05Lu25Li75L2T5YaF55qEY2FsbGJhY2vlhYjmiafooYzvvIzlr7zoh7TmoYbmnrbmi7/kuI3liLDkuK3pl7Tku7ZyZXR1cm7nmoTnrYnlvoXml7bplb/vvIzku47ogIzlr7zoh7Tnm5HmjqflvILluLhcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG4gICAgICAgICAgICB9LCAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucnVuKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1pZGRsZXdhcmU7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL3BsdWdpbnNMb2FkZXIuanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImZ1bmN0aW9uIGlzVHJpdmVyKCkge1xuICB0cnkge1xuICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcbiAgICByZXR1cm4gL1RyaXZlci9nLnRlc3QoVUEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVHJpdmVyO1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qc1xuLy8gbW9kdWxlIGlkID0gNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG5cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX2F1dG9fY2xrL21haW4nKSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2Nsay5qc1xuLy8gbW9kdWxlIGlkID0gNzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY29sbGVjdF9jbGsgPSByZXF1aXJlKCcuL2NvbGxlY3RfY2xrJyk7XG4vLyB2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICB2YXIgYXBsdXNDdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgY2xrX2NvbmZpZyA9IFtdO1xuXG4gIHZhciBpbml0Q2xrID0gZnVuY3Rpb24gKG9wdCkge1xuICAgIGNsa19jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKTtcbiAgICB2YXIgc3BtQiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgdmFyIGVsZW1lbnRzR3JvdXBzID0gW107XG4gICAgZnVuY3Rpb24gZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKGVsZW1lbnRzLGNvbmZpZyl7XG4gICAgICBpZih1dGlsQXJyYXkuaXNBcnJheShlbGVtZW50cykpe1xuICAgICAgICBlbGVtZW50c0dyb3Vwcy5wdXNoKHtcbiAgICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgICBlbGVtZW50czogZWxlbWVudHNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZihlbGVtZW50c0dyb3Vwcy5sZW5ndGg9PT1jbGtfY29uZmlnLmxlbmd0aCl7XG4gICAgICAgIGNvbGxlY3RfY2xrLndhdGNoX2NsaWNrKG9wdC5ldmVudCwgZWxlbWVudHNHcm91cHMsIG9wdC5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHV0aWxBcnJheS5pc0FycmF5KGNsa19jb25maWcpKSB7XG4gICAgICBjbGtfY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNvbmZpZykge1xuICAgICAgICBpZiAoIXV0aWxEYXNoLmlzU3RhcnRXaXRoKGNvbmZpZy5jc3NTZWxlY3RvciwgJy4nKSkge1xuICAgICAgICAgIGNvbmZpZy5jc3NTZWxlY3RvciA9ICcuJyArIGNvbmZpZy5jc3NTZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWNvbmZpZy5zcG1CKSB7XG4gICAgICAgICAgY29uZmlnLnNwbUIgPSBzcG1CO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50cyA9IG1pbmkuZ2V0Q29udGV4dCgpLmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoY29uZmlnLmNzc1NlbGVjdG9yKTtcbiAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuICAgICAgICAgICAgcmVjdDogdHJ1ZSxcbiAgICAgICAgICAgIHNjcm9sbE9mZnNldDogdHJ1ZVxuICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXQpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayhyZXQsY29uZmlnKTtcbiAgICAgICAgICB9KS5leGVjKCk7IFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOS4jeaUr+aMgWZpZWxkc+aWueazleeahOWcuuaZr++8iOaUr+S7mOWuneS4i++8jOaUueeUqOWdkOagh++8iVxuICAgICAgICAgIGVsZW1lbnRzLmJvdW5kaW5nQ2xpZW50UmVjdCgpLmV4ZWMoZnVuY3Rpb24gKHJldCkge1xuICAgICAgICAgICAgZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKHJldCxjb25maWcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIFxuICBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuICAvLyBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgLy8gICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgLy8gICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKCkge1xuICAvLyAgICAgLy8gVE9ET1xuICAvLyAgIH1dXG4gIC8vIH0pO1xuICAvLyBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgLy8gICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgLy8gICBhcmd1bWVudHM6IFsnb25IaWRlJywgZnVuY3Rpb24gKCkge1xuICAvLyAgICAgLy8gVE9ET1xuICAvLyAgIH1dXG4gIC8vIH0pO1xuXG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvbkFwbHVzQ2xrJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgaW5pdENsayhvcHQpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG4gIC8vIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uVW5sb2FkJywgZnVuY3Rpb24gKG9wdCkge1xuICAvLyAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gIC8vICAgICAvLyBUT0RPXG4gIC8vICAgfVxuICAvLyB9KTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbid1c2Ugc3RyaWN0JztcblxudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHdhdGNoVHJhY2tlciA9IHJlcXVpcmUoJy4uL3V0aWxzL3dhdGNoVHJhY2tlcicpO1xudmFyIGdldEhhc2hLZXkgPSByZXF1aXJlKCcuLi91dGlscy9nZXRIYXNoS2V5Jyk7XG52YXIgcmF4VXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3JheFV0aWwnKTtcbi8qKlxuICog5oqK6Ieq5Yqo5pud5YWJ55u45ZCMY3NzU2VsZWN0b3LnmoTnm7jlkIzkvY3nva7nmoRkYXRhc2V05ou/5Yiw57uZ6Ieq5Yqo54K55Ye75L2/55SoXG4gKiDlm6DkuLrlnKjmlK/ku5jlrp3njq/looPkuIvoh6rliqjngrnlh7vkuovku7bmi7/kuI3liLBkYXRhc2V0XG4gKi9cbmZ1bmN0aW9uIGdldERhdGFTZXQgKGNvbmZpZywgaW5kZXgpIHtcbiAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcbiAgXG4gIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgIHZhciBlbGVfcyA9IF9oYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZV9zLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgdmFyIGV4cENvbmZpZyA9IHYuZXhwQ29uZmlnIHx8IHt9O1xuICAgICAgLy8g5pud5YWJY3NzU2VsZWN0b3LkuI7ngrnlh7vnmoRjc3NTZWxlY3RvcuebuOWQjOaJjeiupOS4uuaYr+WQjOexu+Wei+WFg+e0oFxuICAgICAgaWYgKGNvbmZpZy5jc3NTZWxlY3RvciA9PT0gZXhwQ29uZmlnLmNzc1NlbGVjdG9yKSB7XG4gICAgICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleSh7XG4gICAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICAgIH0sIGV4cENvbmZpZyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGNsb25lRGVlcCh2LmRhdGFzZXQpO1xuICAgICAgICB9ICBcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydHMud2F0Y2hfY2xpY2sgPSBmdW5jdGlvbiAoY2xrSW5mbywgZWxlbWVudHNHcm91cHMsIHBhZ2VDdHgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHRzID0gW107XG4gIGVhY2goZWxlbWVudHNHcm91cHMsZnVuY3Rpb24oZ3JvdXApe1xuICAgIHZhciBlbGVtZW50cyA9IGdyb3VwLmVsZW1lbnRzO1xuICAgIHZhciBjb25maWcgPSBncm91cC5jb25maWc7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuICAgICAgdmFyIF92YWx1ZSA9IGVsZW1lbnRzW2pdO1xuICAgICAgaWYgKGlzSW5BcmVhKGNsa0luZm8sIF92YWx1ZSkpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gaiArIDE7XG4gICAgICAgIHZhciBkYXRhc2V0ID0gX3ZhbHVlLmRhdGFzZXQgfHwgZ2V0RGF0YVNldChjb25maWcsIGluZGV4KSB8fCB7fTtcbiAgICAgICAgdmFyIHNwbURhdGEgPSB7fTtcbiAgICAgICAgdmFyIF9zcG1EYXRhID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRhdGFzZXQudHJhY2tlclBhcmFtcykgfHwge307XG4gICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICAvLyDlj5ZkYXRhLXRyYWNrZXIg5oiWIGNzc1NlbGVjdG9yXG4gICAgICAgICAgc3BtRGF0YSA9IGNsb25lRGVlcChhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fSk7XG4gICAgICAgICAgaWYgKGRvY3VtZW50ICYmIGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcbiAgICAgICAgICAgIHZhciBkb21EYXRhU2V0ID0gcmF4VXRpbC5nZXREYXRhU2V0KGNvbmZpZywgaW5kZXgtMSk7XG4gICAgICAgICAgICB2YXIgYyA9IGRvbURhdGFTZXQuc3BtQyB8fCBjb25maWcuc3BtQyB8fCAnMCc7XG4gICAgICAgICAgICB2YXIgZCA9IGRvbURhdGFTZXQuc3BtRCB8fCBjb25maWcuc3BtRCB8fCAnMCc7XG4gICAgICAgICAgICBzcG1EYXRhLmMgPSBjO1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gZDtcbiAgICAgICAgICAgIC8vIOihpeWFhSByYXggZGF0YS0qIOWxnuaAp1xuICAgICAgICAgICAgZGF0YXNldCA9IE9iamVjdC5hc3NpZ24oZGF0YXNldCwgZG9tRGF0YVNldCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBzcG1DID0gZGF0YXNldC50cmFja2VyIHx8IGNvbmZpZy5jc3NTZWxlY3Rvci5yZXBsYWNlKC9cXCd8XFxcInxcXDt8XFw6fFxcPXxcXFt8XFxdfFxcLnxcXCN8XFwtfFxcL3xcXHwvZywgJycpOyAvLyDljrvmjonnibnmrorlrZfnrKZcbiAgICAgICAgICAgIHNwbURhdGEuYyA9IHNwbUM7XG4gICAgICAgICAgICBpZiAoc3BtRGF0YS5jICYmIHNwbURhdGEuYyAhPT0gJzAnKSB7XG4gICAgICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgaW5kZXg7XG4gICAgICAgICAgICAgIHNwbURhdGEuZCA9IHNwbUQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwbURhdGEuYiA9IGNvbmZpZy5zcG1CO1xuICAgICAgICAgIGlmIChjb25maWcuc3BtQykge1xuICAgICAgICAgICAgc3BtRGF0YS5jID0gY29uZmlnLnNwbUM7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwbURhdGEuYyA9IF9zcG1EYXRhLnNwbUMgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtQykgOiAnJztcbiAgICAgICAgICB9XG4gIFxuICAgICAgICAgIGlmIChjb25maWcuc3BtRCkge1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIGluZGV4IDogY29uZmlnLnNwbUQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNwbURhdGEuZCA9IF9zcG1EYXRhLnNwbUQgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtRCkgOiAnJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgIGVsZW1lbnQ6IF92YWx1ZSxcbiAgICAgICAgICBzcG1EYXRhOiBzcG1EYXRhXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHZhciByZXN1bHQgPSB2b2lkIDA7XG4gIGlmKHJlc3VsdHMubGVuZ3RoPT09MSl7XG4gICAgcmVzdWx0ID0gcmVzdWx0c1swXTtcbiAgfWVsc2UgaWYocmVzdWx0cy5sZW5ndGg+MSl7XG4gICAgcmVzdWx0ID0gcmVzdWx0cy5yZWR1Y2UoZnVuY3Rpb24ocHJldmlvdXMsY3VycmVudCl7XG4gICAgICB2YXIgbWF0Y2hlZFJlc3VsdCA9IHByZXZpb3VzO1xuICAgICAgdmFyIHByZXZpb3VzRWxlbWVudCA9IHByZXZpb3VzLmVsZW1lbnQ7XG4gICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50LmVsZW1lbnQ7XG4gICAgICBpZihjdXJyZW50RWxlbWVudC50b3AgPj0gcHJldmlvdXNFbGVtZW50LnRvcCAmJiBjdXJyZW50RWxlbWVudC5yaWdodCA8PSBwcmV2aW91c0VsZW1lbnQucmlnaHQgJiYgY3VycmVudEVsZW1lbnQuYm90dG9tIDw9IHByZXZpb3VzRWxlbWVudC5ib3R0b20gJiYgY3VycmVudEVsZW1lbnQubGVmdCA+PSBwcmV2aW91c0VsZW1lbnQubGVmdCl7XG4gICAgICAgIG1hdGNoZWRSZXN1bHQgPSBjdXJyZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1hdGNoZWRSZXN1bHQ7XG4gICAgfSk7XG4gIH1cbiAgaWYocmVzdWx0KXtcbiAgICB3YXRjaFRyYWNrZXIucHVzaEV2ZW50KCdDTEsnLCByZXN1bHQuZGF0YXNldCwgcmVzdWx0LmNvbmZpZywgcmVzdWx0LmVsZW1lbnQsIHJlc3VsdC5zcG1EYXRhLCBwYWdlQ3R4KTtcbiAgfVxuICBmdW5jdGlvbiBpc0luQXJlYSAoY2xrSW5mbywgZWxlSW5mbykge1xuICAgIHZhciBjaGFuZ2VkVG91Y2ggPSB7fTtcbiAgICBpZiAoY2xrSW5mbykge1xuICAgICAgaWYgKGNsa0luZm8uY2hhbmdlZFRvdWNoZXMpIHtcbiAgICAgICAgLy8g5b6u5L+hXG4gICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICB9IGVsc2UgaWYgKGNsa0luZm8uZGV0YWlsKSB7XG4gICAgICAgIC8vIOaUr+S7mOWunVxuICAgICAgICBjaGFuZ2VkVG91Y2ggPSBjbGtJbmZvLmRldGFpbDtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHggPSBjaGFuZ2VkVG91Y2guY2xpZW50WCB8fCAwO1xuICAgIHZhciB5ID0gY2hhbmdlZFRvdWNoLmNsaWVudFkgfHwgMDtcblxuICAgIHZhciBfdG9wID0gZWxlSW5mby50b3A7XG4gICAgdmFyIF9ib3R0b20gPSBlbGVJbmZvLmJvdHRvbTtcbiAgICBpZiAoZWxlSW5mby5zY3JvbGxUb3ApIHtcbiAgICAgIF90b3AgKz0gZWxlSW5mby5zY3JvbGxUb3A7XG4gICAgICBfYm90dG9tICs9IGVsZUluZm8uc2Nyb2xsVG9wO1xuICAgIH1cblxuICAgIGlmIChlbGVJbmZvLmxlZnQgPCB4ICYmIHggPCBlbGVJbmZvLnJpZ2h0ICYmIF90b3AgPCB5ICYmIHkgPCBfYm90dG9tKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19jbGsvY29sbGVjdF9jbGsuanNcbi8vIG1vZHVsZSBpZCA9IDc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHJlY29yZEV4cE1hcFF1ZXVlID0ge307XG52YXIgREVGQVVMVF9QS0dfU0laRSA9IDM7XG52YXIgUE9TVCA9ICdQT1NUJztcbnZhciBFWFAgPSAnRVhQJztcblxuLyoqXG4gKiDojrflj5bnlKjmiLfms6jlhaXnmoTln4vngrnkv6Hmga/vvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvZG9jcy9tZXRhI2I3ZDhjY2M3XG4gKiBAcGFyYW1zIHtGdW5jdGlvbn0gdXNlckZuTmFtZVxuICogQHBhcmFtcyB7T2JqZWN0fSBlbGVtZW50XG4gKiBAcGFyYW1zIHtPYmplY3R9IHNlbGVjdG9yXG4gKlxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRVc2VySW5mbyAodXNlckZuTmFtZSwgZWxlbWVudCwgc2VsZWN0b3IsIHNwbURhdGEpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJykgfHwge307XG4gIHZhciBnZXRNZXRhSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvO1xuICBpZiAodHlwZW9mIGdldE1ldGFJbmZvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIHVzZXJGbiA9IGdldE1ldGFJbmZvKHVzZXJGbk5hbWUpO1xuICAgIHZhciB1c2VySW5mbyA9IHt9O1xuICAgIGlmICh0eXBlb2YgdXNlckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB1c2VySW5mbyA9IHVzZXJGbihlbGVtZW50ID8gY2xvbmVEZWVwKGVsZW1lbnQpIDoge30sIHNlbGVjdG9yLCBzcG1EYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdC5wYXJhbTJvYmoodXNlckluZm8pO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuXG4vLyDogZrlkIjkuIrmiqXmm53lhYnml6Xlv5dcbnZhciBFdmVudEFycmF5ID0gQmFzZS5leHRlbmQoe1xuICBwdXNoOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcbiAgICB3aGlsZSAodGhpcy5idWZmZXIubGVuZ3RoID49IHRoaXMucGtnU2l6ZSkge1xuICAgICAgdmFyIGdva2V5cyA9IHRoaXMuYnVmZmVyLnNwbGljZSgwLCB0aGlzLnBrZ1NpemUpO1xuICAgICAgaWYgKGdva2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQodGhpcy5sb2drZXksIEVYUCwgZ29rZXlzLCB0aGlzLm1ldGhvZCk7XG4gICAgICB9XG4gICAgfSBcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGdldEZpeGVkTnVtYmVyICh2YWx1ZSwgbGVuZ3RoKSB7XG4gIHZhciBfcmVzdWx0ID0gJyc7XG4gIHRyeSB7XG4gICAgdmFyIF9udW0gPSBuZXcgTnVtYmVyKHZhbHVlKTtcbiAgICBfcmVzdWx0ID0gcGFyc2VGbG9hdChfbnVtLnRvRml4ZWQobGVuZ3RoKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBfcmVzdWx0ID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIF9yZXN1bHQ7XG59XG5cbmV4cG9ydHMucHVzaEV2ZW50ID0gZnVuY3Rpb24gKGdta2V5LCBkYXRhLCBjb25maWcsIGVsZW1lbnQsIHNwbURhdGEsIHBhZ2VDdHgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZyA/IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA6IGZhbHNlO1xuICB2YXIgcHJvcHMgPSBjb25maWcucHJvcHM7XG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgdmFyIGRhdGFzZXQgPSB7fTtcblxuICBpZiAoZGF0YSkge1xuICAgIGZvciAodmFyIGRhdGFrZXkgaW4gZGF0YSkge1xuICAgICAgaWYgKCEhZGF0YWtleS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eZGF0YS0vKSkge1xuICAgICAgICBkYXRhc2V0W2RhdGFrZXkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyldID0gZGF0YVtkYXRha2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRPRE86IOWvueS6jua3mOWuneWwj+eoi+W6jyxkYXRha2V55bey57uP5ZyoZGF0YeWGheS6hu+8jOW5tuS4lOS4jeWQq2RhdGEt5YmN57yALOmcgOWNleeLrOWKoOWFpUDpkrDmmK1cbiAgICAgICAgZGF0YXNldFtkYXRha2V5XSA9IGRhdGFbZGF0YWtleV07XG4gICAgICB9XG4gICAgfSAgXG4gIH1cbiAgaWYgKHByb3BzICYmIGlzQXJyYXkocHJvcHMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IHByb3BzW2ldLnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXmRhdGEtLywgJycpLnJlcGxhY2UoLy0vZywgJycpO1xuICAgICAgcGFyYW1zW2tleV0gPSBkYXRhc2V0W2tleV07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRhdGFzZXQpO1xuICB9XG4gIFxuICBpZiAoZWxlbWVudCAmJiBnbWtleSA9PT0gRVhQKSB7XG4gICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB7XG4gICAgICAnX3cnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LndpZHRoLCAyKSxcbiAgICAgICdfaCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQuaGVpZ2h0LCAyKSxcbiAgICAgICdfeCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueCwgMiksXG4gICAgICAnX3knOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnksIDIpLFxuICAgICAgLy8gJ19oYXNoJzogZWxlbWVudC5oYXNoX3ZhbHVlIHx8ICcnLFxuICAgICAgJ19yYXRlJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC52aWV3YWJpbGl0eVJhdGUgfHwgZWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbywgMiksXG4gICAgICAnX3ZpZXdhYmlsaXR5JzogJ2ludGVyc2VjdGlvbidcbiAgICB9KTtcbiAgfSAgXG4gIGlmIChjb25maWcuX3Z0KSB7XG4gICAgcGFyYW1zLl92dCA9IGNvbmZpZy5fdnQ7XG4gIH1cblxuICAvLyBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAvLyAgIHZhciBzcG1EYXRhID0gXG4gIC8vIH1cblxuICB2YXIgdXNlckZuTmFtZSA9IGdta2V5ID09PSBFWFAgPyAnYXBsdXMtYXV0by1leHAtdXNlcmZuJyA6ICdhcGx1cy1hdXRvLWNsay11c2VyZm4nO1xuICB2YXIgdXNlckluZm8gPSBnZXRVc2VySW5mbyh1c2VyRm5OYW1lLCBlbGVtZW50LCBjb25maWcuY3NzU2VsZWN0b3IsIHNwbURhdGEpO1xuXG4gIGlmICghdXNlckluZm8uc3BtKSB7XG4gICAgaWYgKGlzQWxpICYmIHNwbURhdGEgJiYgc3BtRGF0YS5hICYmIHNwbURhdGEuYikge1xuICAgICAgdXNlckluZm8uc3BtID0gW3NwbURhdGEuYSwgc3BtRGF0YS5iLCBzcG1EYXRhLmMgfHwgJzAnLCBzcG1EYXRhLmQgfHwgJzAnXS5qb2luKCcuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVzZXJJbmZvLnNwbSA9IHNwbURhdGEgJiYgc3BtRGF0YS5iID8gc3BtRGF0YSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cblxuICB2YXIgZ29rZXkgPSB7fTtcbiAgdmFyIHRyYWNrZXJQYXJhbXMgPSBkYXRhLnRyYWNrZXJQYXJhbXMgfHwgZGF0YVsndHJhY2tlci1wYXJhbXMnXTtcbiAgaWYgKHRyYWNrZXJQYXJhbXMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIF90cmFja2VyUGFyYW1zID0gSlNPTi5wYXJzZSh0cmFja2VyUGFyYW1zKTtcbiAgICAgIHBhcmFtcyA9IE9iamVjdC5hc3NpZ24ocGFyYW1zLCBfdHJhY2tlclBhcmFtcyk7XG4gICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJQYXJhbXM7XG4gICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJwYXJhbXM7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICBcbiAgaWYgKGdta2V5ID09PSAnRVhQJyAmJiBpc0FsaSAmJiByZWNvcmRFeHBNYXBRdWV1ZVtjb25maWcubG9na2V5XSkge1xuICAgIHZhciBleGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHVzZXJJbmZvKTtcbiAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIHtcbiAgICAgIGV4YXJnczogZXhkYXRhXG4gICAgfSk7XG4gICAgdXRpbExvZ2dlci5sb2coJ2F1dG8gZXhwOicsY29uZmlnLmxvZ2tleSxleGRhdGEpO1xuICAgIHJlY29yZEV4cE1hcFF1ZXVlW2NvbmZpZy5sb2drZXldLnB1c2goY2xvbmVEZWVwKGdva2V5KSk7XG4gIH0gZWxzZSB7ICAgIFxuICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7aXNfYXV0bzogMX0sIHBhcmFtcywgdXNlckluZm8sIGNvbmZpZy5jdXN0b21BcmdzKTtcbiAgICB1dGlsTG9nZ2VyLmxvZygnYXV0byBjbGs6Jyxjb25maWcubG9na2V5LGdva2V5KTtcbiAgICBpZiAocGFnZUN0eCkge1xuICAgICAgdmFyIGN1ciA9IHBhZ2VDdHgucm91dGU7XG4gICAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCB7Y3VycmVudFBhdGg6IGN1ciB9KSwgUE9TVCk7ICBcbiAgICB9IGVsc2Uge1xuICAgICAgYXBsdXMucmVjb3JkKGNvbmZpZy5sb2drZXksIGdta2V5LCBnb2tleSwgUE9TVCk7XG4gICAgfVxuXG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtcyB7QXJyYXlPYmplY3R9IGNvbmZpZyA6IFt7XG4gKiAgICAncG9zaXRpb25TZWxlY3Rvcic6ICcuc2Nyb2xsLXZpZXcnLFxuICogICAgJ2Nzc1NlbGVjdG9yJzonLmJhbGwnLFxuICogICAgJ2xvZ2tleSc6Jy90ZXN0LmJhbGwuMScsXG4gKiAgICAncHJvcHMnOiBbJ2RhdGEtdHJhY2tlciddLFxuICogIH0sIHtcbiAqICAgICdjc3NTZWxlY3Rvcic6Jy5teWJ1dHRvbicsXG4gKiAgICAnbG9na2V5JzonL3Rlc3QubXlidXR0b24uMScsXG4gKiAgICAncHJvcHMnOiBbJ2RhdGEtdHJhY2tlciddLFxuICogIH1dXG4gKi9cbmV4cG9ydHMud2F0Y2hSZWNvcmQgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcgPyBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgOiBmYWxzZTtcbiAgXG4gIGlmIChpc0FsaSAmJiBjb25maWcpIHtcbiAgICBjb25maWcuZm9yRWFjaChmdW5jdGlvbiAoY2ZnKSB7XG4gICAgICBpZiAoIXJlY29yZEV4cE1hcFF1ZXVlLmhhc093blByb3BlcnR5KGNmZy5sb2drZXkpKSB7XG4gICAgICAgIHJlY29yZEV4cE1hcFF1ZXVlW2NmZy5sb2drZXldID0gRXZlbnRBcnJheS5jcmVhdGUoe1xuICAgICAgICAgIGxlbmd0aDogMCxcbiAgICAgICAgICBidWZmZXI6IFtdLFxuICAgICAgICAgIGxvZ2tleTogY2ZnLmxvZ2tleSxcbiAgICAgICAgICBwa2dTaXplOiB0eXBlb2YgY2ZnLnBrZ1NpemUgPT09ICdudW1iZXInICYmIGNmZy5wa2dTaXplIHx8IERFRkFVTFRfUEtHX1NJWkUsXG4gICAgICAgICAgbWV0aG9kOiBjZmcubWV0aG9kIHx8IFBPU1RcbiAgICAgICAgfSk7XG4gICAgICB9IFxuICAgIH0pOyAgICBcbiAgfVxufTtcblxuZXhwb3J0cy5jbGVhclJlY29yZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZyA/IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA6IGZhbHNlO1xuXG4gIGlmIChpc0FsaSkge1xuICAgIGZvciAodmFyIGxvZ2tleSBpbiByZWNvcmRFeHBNYXBRdWV1ZSkge1xuICAgICAgdmFyIGdva2V5cyA9IHJlY29yZEV4cE1hcFF1ZXVlW2xvZ2tleV0uYnVmZmVyIHx8IFtdO1xuICAgICAgaWYgKGdva2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQobG9na2V5LCBFWFAsIGdva2V5cywgUE9TVCk7XG4gICAgICAgIHJlY29yZEV4cE1hcFF1ZXVlW2xvZ2tleV0uYnVmZmVyID0gW107XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvd2F0Y2hUcmFja2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOagueaNruWFg+e0oOWxnuaAp+WSjOWfi+eCuemFjee9rueyvuehruiOt+WPluS4gOS4quWFg+e0oOeahGhhc2hLZXlcbiAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudEF0dHIge1xuICogICBpZFxuICogfVxuICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcge1xuICogICBsb2drZXksIGNzc1NlbGVjdG9yLCBwb3NpdGlvblNlbGVjdG9yXG4gKiB9XG4gKiBAcmV0dXJuIHtTdHJpbmd9IGhhc2hLZXlcbiAqL1xuXG4vLyBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50QXR0ciwgY29uZmlnKSB7XG4vLyAgIHZhciBoYXNoS2V5ID0gW1xuLy8gICAgIGNvbmZpZy5sb2drZXksXG4vLyAgICAgY29uZmlnLmNzc1NlbGVjdG9yLFxuLy8gICAgIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yLFxuLy8gICAgIGVsZW1lbnRBdHRyLmluZGV4XG4vLyAgIF0uam9pbignXycpO1xuLy8gICByZXR1cm4gaGFzaEtleTtcbi8vIH07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnRBdHRyLCBjb25maWcpIHtcbiAgdmFyIGhhc2hLZXkgPSBbXG4gICAgY29uZmlnLmxvZ2tleSxcbiAgICBjb25maWcuY3NzU2VsZWN0b3IsXG4gICAgLy8gY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgfHwgJycsXG4gICAgLy8gZWxlbWVudEF0dHIuaW5kZXggLy/mt5jlrp3lsI/nqIvluo/liKTmlq1oYXNoS2V5XG4gIF07XG5cbiAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG4gICAgaGFzaEtleS5wdXNoKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKTtcbiAgfVxuICBcbiAgaWYgKGVsZW1lbnRBdHRyLmlkKSB7XG4gICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmlkKTtcbiAgfVxuXG4gIGlmIChlbGVtZW50QXR0ci5pbmRleCA+PSAwKSB7XG4gICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmluZGV4KTtcbiAgfVxuICAvLyBSYXjmoYbmnrbov5DooYzml7bojrflvpfnmoRkYXRhc2V05YmN5ZCO5LiN5LiA6Ie077yM5Yig6Zmk5peg5pWI5bGe5oCnIEDpkrDmmK0gMjAyMS0wOS0xOCAwOToxNzo1MlxuICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCAmJiBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ10pIHtcbiAgICBkZWxldGUgZWxlbWVudEF0dHIuZGF0YXNldFsncHJpdmF0ZU5vZGVJZCddO1xuICB9XG4gIGlmIChlbGVtZW50QXR0ci5kYXRhc2V0KSB7XG4gICAgaGFzaEtleS5wdXNoKEpTT04uc3RyaW5naWZ5KGVsZW1lbnRBdHRyLmRhdGFzZXQpKTtcbiAgfVxuICBoYXNoS2V5ID0gaGFzaEtleS5qb2luKCdfJyk7XG4gIHJldHVybiBoYXNoS2V5O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvZ2V0SGFzaEtleS5qc1xuLy8gbW9kdWxlIGlkID0gNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHJheFV0aWwuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXG5leHBvcnRzLmdldERhdGFTZXQgPSBmdW5jdGlvbiAoY29uZmlnLGluZGV4KSB7XG4gIHZhciBkID0ge307XG4gIHZhciBjbHg7XG4gIGlmICh1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcbiAgICBjbHggPSBjb25maWcuY3NzU2VsZWN0b3Iuc2xpY2UoMSwgY29uZmlnLmNzc1NlbGVjdG9yLmxlbmd0aCk7XG4gIH0gZWxzZSB7XG4gICAgY2x4ID0gY29uZmlnLmNzc1NlbGVjdG9yO1xuICB9XG4gIHZhciBkb21zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbHgpO1xuICBpZiAoZG9tcyAmJiBkb21zLmxlbmd0aCA+IDApe1xuICAgIHZhciBkb21EYXRhU2V0ID0gZG9tc1tpbmRleF0uZGF0YXNldCB8fCB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gZG9tRGF0YVNldCkge1xuICAgICAgdmFyIHQgPSBkb21EYXRhU2V0W2tleV07XG4gICAgICBzd2l0Y2godHlwZW9mIHQpe1xuICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICBkW2tleV0gPSB0KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oZCwgdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgaWYgKGtleSA9PT0gJ3RyYWNrZXJQYXJhbXMnKSB7XG4gICAgICAgICAgdmFyIHRwID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRvbURhdGFTZXQudHJhY2tlclBhcmFtcyk7XG4gICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oZCwgdHApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRba2V5XSA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgIGRba2V5XSA9IHQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBkO1xufTtcblxuZXhwb3J0cy5pc1JheCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBkb2N1bWVudCA/IHRydWUgOiBmYWxzZTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3JheFV0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuXG5cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXF1aXJlKCcuL2xpYl9hdXRvX2V4cC9tYWluJykoKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9leHAuanNcbi8vIG1vZHVsZSBpZCA9IDgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgY29sbGVjdF9leHAgPSByZXF1aXJlKCcuL2NvbGxlY3RfZXhwJyk7XG52YXIgY29uZmlnID0gcmVxdWlyZSgnQHBfd2ViL2xpYl9jb21tb24vY29uZmlnJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbi8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG5cbi8vIOeUqOS6juebkeWQrFxudmFyIFBBR0VfREFUQV9NQVAgPSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBpc1N0YXJ0ID0gMDtcbiAgdmFyIGlzRmlyc3RUb3VjaCA9IDA7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBpZiAoYXBsdXMuX2FwbHVzX2F1dG9fZXhwKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2Uge1xuICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cCA9IHtcbiAgICAgIGhhc2hNYXA6IHt9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBfY29uZmlnID0gW107XG5cbiAgZnVuY3Rpb24gd2F0Y2hNZXRhSW5mbyhjb250ZXh0LCBpc0ZpcnN0LCB3YXRjaFR5cGUpIHtcbiAgICB2YXIgaGFuZGxlck1ldGFJbmZvID0gZnVuY3Rpb24gKG1ldGFLZXksIG1ldGFWYWx1ZSkgeyAgIFxuICAgICAgaWYgKG1ldGFLZXkgPT09ICdhcGx1cy1hdXRvLWV4cCcpIHtcbiAgICAgICAgdmFyIF9jb25maWcyID0gY29uZmlnLmdldEF1dG9FeHBDb25maWcobWV0YVZhbHVlKTtcbiAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KF9jb25maWcyKSA9PT0gSlNPTi5zdHJpbmdpZnkoX2NvbmZpZykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2NvbmZpZyA9IF9jb25maWcyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRhVmFsdWUgJiYgX2NvbmZpZyAmJiBfY29uZmlnLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb2xsZWN0X2V4cC53YXRjaF9leHBvc3VyZShjb250ZXh0LCBfY29uZmlnLCBpc0ZpcnN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiB3YXRjaFR5cGUsIC8vIGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICAgIGFyZ3VtZW50czogWydzZXRNZXRhSW5mbycsIGhhbmRsZXJNZXRhSW5mb11cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRFeHAgKGNvbnRleHQsIGlzRmlyc3QpIHtcbiAgICBfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJyk7XG4gICAgLy8gVGFyb+ahhuaetuWfuuS6jui/kOihjOaXtu+8jOiHquWKqOabneWFieS8muWHuueOsOiOt+WPluS4jeWIsOabneWFieWFg+e0oOeahOaDheWGtVxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjb2xsZWN0X2V4cC53YXRjaF9leHBvc3VyZShjb250ZXh0LCBfY29uZmlnLCBpc0ZpcnN0KTtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgd2F0Y2hNZXRhSW5mbyhvcHQuY29udGV4dCwgMSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFKTtcbiAgICAgICAgaWYgKGlzU3RhcnQgPT09IDApIHtcbiAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAxKTtcbiAgICAgICAgICBpc1N0YXJ0ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICAgICAgdmFyIF9wYXRoID0gX2N1cnJlbnRQYWdlLnJvdXRlIHx8IF9jdXJyZW50UGFnZS5pcztcbiAgICAgICAgICBQQUdFX0RBVEFfTUFQW19wYXRoXSA9IF9wYXRoOyAvLyBKU09OLnN0cmluZ2lmeShfY3VycmVudFBhZ2UuZGF0YSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVzZXRBdXRvRXhwIChvcHQpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBfcGF0aCA9IF9jdXJyZW50UGFnZS5yb3V0ZSB8fCBfY3VycmVudFBhZ2UuaXM7XG4gICAgICB2YXIgX2RhdGEgPSBQQUdFX0RBVEFfTUFQW19wYXRoXTtcbiAgICAgIFxuICAgICAgdmFyIF9jdXJyZW50RGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdC5kYXRhKTtcbiAgICAgIGlmIChfZGF0YSAhPT0gX2N1cnJlbnREYXRhKSB7XG4gICAgICAgIFBBR0VfREFUQV9NQVBbX3BhdGhdID0gX2N1cnJlbnREYXRhO1xuICAgICAgICBpbml0RXhwKG9wdC5jb250ZXh0LCAwKTtcbiAgICAgIH0gIFxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cblxuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIGlmIChpc0ZpcnN0VG91Y2ggPT09IDApIHtcbiAgICAgICAgICBpc0ZpcnN0VG91Y2ggPSAxO1xuICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlc2V0QXV0b0V4cChvcHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnb25QYWdlRGF0YUNoYW5nZWQnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgIHJlc2V0QXV0b0V4cChvcHQpO1xuICAgICAgfSwgMjAwKTtcbiAgICB9XVxuICB9KTtcblxuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICAgIFBBR0VfREFUQV9NQVAgPSB7fTtcbiAgICAgICAgaXNTdGFydCA9IDA7XG4gICAgICAgIGlzRmlyc3RUb3VjaCA9IDA7XG4gICAgICAgIHdhdGNoTWV0YUluZm8ob3B0LmNvbnRleHQsIDEsIGFwbHVzU3RhdGljLlVOU1VCU0NSSUJFKTtcbiAgICAgICAgY29sbGVjdF9leHAuY2xlYXIoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uVW5sb2FkJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgUEFHRV9EQVRBX01BUCA9IHt9O1xuICAgICAgICBjb2xsZWN0X2V4cC5jbGVhcigpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA4MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgX2NvbmZpZyA9IHJlcXVpcmUoJ0BwX3dlYi9saWJfY29tbW9uL2NvbmZpZycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciB3YXRjaFRyYWNrZXIgPSByZXF1aXJlKCcuLi91dGlscy93YXRjaFRyYWNrZXInKTtcbnZhciBnZXRIYXNoS2V5ID0gcmVxdWlyZSgnLi4vdXRpbHMvZ2V0SGFzaEtleScpO1xudmFyIHJheFV0aWwgPSByZXF1aXJlKCcuLi91dGlscy9yYXhVdGlsJyk7XG52YXIgbWluaVV0aWwgPSByZXF1aXJlKCcuLi91dGlscy91dGlscycpO1xudmFyIG9ic2VydmVycyA9IFtdO1xudmFyIGN0eDtcblxuLy8gcmVsb2FkQ3R4IOeUqOS6juWNleWFg+a1i+ivle+8jOWNlea1i+S4remcgOimgeWIh+aNouaUr+S7mOWuneOAgeW+ruS/oeeOr+Wig++8jOWunumZheeUn+S6p+eOr+Wig+eUqOS4jeWIsFxuZXhwb3J0cy53YXRjaF9leHBvc3VyZSA9IGZ1bmN0aW9uIChjb250ZXh0LCBjb25mLCBpc0ZpcnN0LCByZWxvYWRDdHgpIHtcbiAgaWYgKCFjdHggfHwgcmVsb2FkQ3R4KSB7XG4gICAgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIH1cbiAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcbiAgdmFyIGR1cDtcbiAgXG4gIHdhdGNoVHJhY2tlci53YXRjaFJlY29yZChjb25mKTtcbiAgXG4gIGZ1bmN0aW9uIHdhaXQgKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgY29uZi5sZW5ndGgpIHtcbiAgICAgIHZhciBjb25maWcgPSBjb25mW2NvdW50XTtcbiAgICAgIGR1cCA9IDA7XG4gICAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5zdWJqZWN0WzBdID09PSBjb25maWcuY3NzU2VsZWN0b3IgJiZcbiAgICAgICAgICBlbGVtZW50LnN1YmplY3RbMV0gPT09IGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG4gICAgICAgICAgZHVwID0gMTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB2YXIgc3ViamVjdCA9IFtjb25maWcuY3NzU2VsZWN0b3IsIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yXTtcbiAgICAgIGZ1bmN0aW9uIGhhc2hpbmcgKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHN1YmplY3RbMF07XG4gICAgICAgIGlmIChjc3NTZWxlY3RvciAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoc3ViamVjdFswXSwgJy4nKSkge1xuICAgICAgICAgIGNzc1NlbGVjdG9yID0gJy4nICsgY3NzU2VsZWN0b3I7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjdHguY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChjc3NTZWxlY3Rvcik7ICAgICAgICAgIFxuICAgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuICAgICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJldCkge1xuICAgICAgICAgICAgICAvLyDphY3nva7ljJbln4vngrnlhbzlrrnngrnkvY3ml6DmlYjml7bkuI3pmLvloZ7mm53lhYnop6PmnpBcbiAgICAgICAgICAgICAgaWYgKHV0aWxBcnJheS5pc0FycmF5KHJldCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICBlbGVtZW50czogcmV0LFxuICAgICAgICAgICAgICAgICAgdHlwZTogJ0NPTU1PTidcbiAgICAgICAgICAgICAgICB9KTsgIFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5leGVjKCk7ICBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdjdXJyZW50IHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgYXV0byBleHBvc3VyZSB0cmFja2luZyEnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignY3VycmVudCBwbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IGF1dG8gZXhwb3N1cmUgdHJhY2tpbmchIGVyciA9ICcsIGVycik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGhhc2hpbmcoZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgLy8gdmFyIHR5cGUgPSBvcHRzLnR5cGU7XG4gICAgICAgIGlmIChkdXAgPT09IDAgfHwgaXNGaXJzdCA9PT0gMCkge1xuICAgICAgICAgIHZhciBuZXdPYnNlcnZlciA9IGluaXRPYnNlcnZlcihjb250ZXh0KTtcbiAgICAgICAgICBuZXdPYnNlcnZlci5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgICBpZihvYnNlcnZlcnMubGVuZ3RoPmNvbmYubGVuZ3RoLTEpe1xuICAgICAgICAgICAgdmFyIHJlbW92ZWRPYnNlcnZlciA9IG9ic2VydmVycy5zaGlmdCgpO1xuICAgICAgICAgICAgcmVtb3ZlZE9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JzZXJ2ZXJzLnB1c2gobmV3T2JzZXJ2ZXIpO1xuICAgICAgICAgIC8vIOabtOaWsGhhc2htYXBcbiAgICAgICAgICBlYWNoKG9wdHMuZWxlbWVudHMsZnVuY3Rpb24oaXRlbSxpbmRleCl7XG4gICAgICAgICAgICBpdGVtLmluZGV4ID0gKGluZGV4KzEpICsgJyc7XG4gICAgICAgICAgICBpZiAoIWNoZWNrSXNJbkhhc2hNYXAoaXRlbSwgY29uZmlnKSkge1xuICAgICAgICAgICAgICB1cGRhdGVIYXNoTWFwKGl0ZW0sIGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYWRkT2JzZXJ2ZShuZXdPYnNlcnZlciwgY29uZmlnLCBmdW5jdGlvbiAoZW50cnksIF9jb25maWcpIHtcbiAgICAgICAgICAgIG1pbmlVdGlsLmdldEluZGV4QnlSZWN0KF9jb25maWcuY3NzU2VsZWN0b3IsZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgICAgICAgICAgdmFyIF9pbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgaWYgKF9pbmRleCkge1xuICAgICAgICAgICAgICAgIHZhciBfZW50cnkgPSBjbG9uZURlZXAoZW50cnkpO1xuICAgICAgICAgICAgICAgIF9lbnRyeS5pbmRleCA9ICcnICsgX2luZGV4O1xuICAgICAgICAgICAgICAgIHZhciBkYXRhc2V0ID0gY2xvbmVEZWVwKF9lbnRyeS5kYXRhc2V0KTtcbiAgICAgICAgICAgICAgICB1cGRhdGVIYXNoTWFwKHtcbiAgICAgICAgICAgICAgICAgIGlkOiBfZW50cnkuaWQsXG4gICAgICAgICAgICAgICAgICBpbmRleDogX2VudHJ5LmluZGV4LFxuICAgICAgICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcbiAgICAgICAgICAgICAgICB9LCBfY29uZmlnKTtcbiAgICAgICAgICAgICAgICBleHBvc3VyZUhhbmRsZShfZW50cnksIGRhdGFzZXQsIGNvbmZpZyk7ICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgd2FpdCgrK2NvdW50KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICB3YWl0KDApO1xuXG4gIGZ1bmN0aW9uIGNoZWNrSXNJbkhhc2hNYXAgKGVsZW1lbnQsIGNvbmZpZykge1xuICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleShlbGVtZW50LCBjb25maWcpO1xuICAgIHZhciBpbmRleCA9IGVsZW1lbnQuaW5kZXg7XG4gICAgaWYgKF9oYXNoTWFwW2NvbmZpZy5sb2drZXldKSB7XG4gICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XS5mb3JFYWNoKGZ1bmN0aW9uKGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCAmJiBlbGVtZW50LmluZGV4ID09PSBpbmRleCkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW1zIHtPYmplY3R9IGUge1xuICAgKiAgIGlkLCBkYXRhc2V0LCBwb3NpdGlvblxuICAgKiB9XG4gICAqL1xuICBmdW5jdGlvbiB1cGRhdGVIYXNoTWFwKGUsIGNvbmZpZykge1xuICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleShlLCBjb25maWcpO1xuICAgIHRyeSB7XG4gICAgICB2YXIgaW5kZXggPSBlLmluZGV4O1xuICAgICAgaWYgKF9oYXNoTWFwW2NvbmZpZy5sb2drZXldKSB7XG4gICAgICAgIHZhciBleGlzdCA9IDA7XG4gICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICAgIGlmIChlbGVtZW50Lmhhc2hfdmFsdWUgPT09IGhhc2gpIHtcbiAgICAgICAgICAgIGV4aXN0ID0gMTtcbiAgICAgICAgICAgIGlmIChlLmlkKSBlbGVtZW50LmlkID0gZS5pZDtcbiAgICAgICAgICAgIGlmIChlLmRhdGFzZXQpIGVsZW1lbnQuZGF0YXNldCA9IGUuZGF0YXNldDtcbiAgICAgICAgICAgIGlmIChlLnN0YXR1cykgZWxlbWVudC5zdGF0dXMgPSBlLnN0YXR1cztcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIWV4aXN0KSB7XG4gICAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0ucHVzaCh7XG4gICAgICAgICAgICBpZDogZS5pZCxcbiAgICAgICAgICAgIGhhc2hfdmFsdWU6IGhhc2gsXG4gICAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgICBleHBDb25maWc6IGNvbmZpZyxcbiAgICAgICAgICAgIGRhdGFzZXQ6IGUuZGF0YXNldCxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XSA9IFt7XG4gICAgICAgICAgaWQ6IGUuaWQsXG4gICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcbiAgICAgICAgICBzdGF0dXM6IDAsXG4gICAgICAgICAgZXhwQ29uZmlnOiBjb25maWcsXG4gICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICB9XTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmxvZygnZXJyb3IgPT09ICcsIGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXRPYnNlcnZlcihjb250ZXh0KSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICB0aHJlc2hvbGRzOiBbX2NvbmZpZy5BVVRPX0FUX1ZJRVdfUkFURV0sXG4gICAgICBpbml0aWFsUmF0aW86IDBcbiAgICB9O1xuICAgIHZhciBpc01ZID0gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChteSkge1xuICAgICAgICBpc01ZID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIGlmIChpc01ZKSB7XG4gICAgICAvLyDomoLomoHnmoTmm53lhYnnm5HlkKzlkozlvq7kv6HkuI3kuIDoh7TvvIxodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL3d4bWwvd3guY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIuaHRtbFxuICAgICAgLy8gaHR0cHM6Ly9vcGVuZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL2ludGVyc2VjdGlvbm9ic2VydmVyXG4gICAgICBvcHRpb25zLnNlbGVjdEFsbCA9IHRydWU7XG4gICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRpb25zLm9ic2VydmVBbGwgPSB0cnVlO1xuICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihjb250ZXh0LCBvcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBhZGRPYnNlcnZlKG9ic2VydmVyLCBjb25maWcsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGNzcyA9IGNvbmZpZy5jc3NTZWxlY3RvcjtcbiAgICBpZiAoY3NzICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjc3MsICcuJykpIHtcbiAgICAgIGNzcyA9ICcuJyArIGNzcztcbiAgICB9XG4gICAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG4gICAgICBvYnNlcnZlci5yZWxhdGl2ZVRvKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKS5vYnNlcnZlKGNzcywgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvck1lc3NhZ2U6ICcsIGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JzZXJ2ZXIucmVsYXRpdmVUb1ZpZXdwb3J0KCkub2JzZXJ2ZShjc3MsIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjYWxsYmFjayhyZXMsIGNvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZXhwb3N1cmVIYW5kbGUgKGVudHJ5LCBkYXRhc2V0LCBjb25maWcpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgZXhwb3N1cmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGV4cEVsZW1lbnRzID0gY2hlY2tTdGFydChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpO1xuXG4gICAgaWYgKGV4cEVsZW1lbnRzICYmIGV4cEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHZhciBlbGVtZW50ID0gZXhwRWxlbWVudHNbMF07XG5cbiAgICAgIHZhciBzcG1EYXRhID0ge307XG4gICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zIHx8IHt9KSB8fCB7fTtcbiAgICAgIHZhciBfaW5kZXggPSBlbGVtZW50LmluZGV4O1xuICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgc3BtRGF0YSA9IGNsb25lRGVlcChhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fSk7XG4gICAgICAgIGlmIChyYXhVdGlsLmlzUmF4KCkpIHtcbiAgICAgICAgICB2YXIgZG9tRGF0YVNldCA9IHJheFV0aWwuZ2V0RGF0YVNldChjb25maWcsX2luZGV4LTEpO1xuICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcbiAgICAgICAgICB2YXIgZCA9IGRvbURhdGFTZXQuc3BtRCB8fCBjb25maWcuc3BtRCB8fCAnMCc7XG4gICAgICAgICAgc3BtRGF0YS5jID0gYztcbiAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuICAgICAgICAgIC8vIOihpeWFhSByYXggZGF0YS0qIOWxnuaAp1xuICAgICAgICAgIGRhdGFzZXQgPSBPYmplY3QuYXNzaWduKGRhdGFzZXQsIGRvbURhdGFTZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3JcbiAgICAgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG4gICAgICAgICAgLy8g5pud5YWJ6Kem5Y+R55qEc3Bt5LiN5rGh5p+T5YWo5bGAYXBsdXMuXyQuc3BtLmRhdGHvvIzmlYXov5nph4zlgZrmt7Hmi7fotJ1cbiAgICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcbiAgICAgICAgICAgIHZhciBzcG1EID0gJ2QnICsgX2luZGV4O1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgICB9ICBcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkpIHtcbiAgICAgICAgICBzcG1EYXRhLmIgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoY29uZmlnLnNwbUMpIHtcbiAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzcG1EYXRhLmMgPSBfc3BtRGF0YS5zcG1DID8gZW5jb2RlVVJJQ29tcG9uZW50KF9zcG1EYXRhLnNwbUMpIDogJyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29uZmlnLnNwbUQpIHtcbiAgICAgICAgICBzcG1EYXRhLmQgPSBfaW5kZXggPyBjb25maWcuc3BtRCArICdfJyArIF9pbmRleCA6IGNvbmZpZy5zcG1EO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwbURhdGEuZCA9IF9zcG1EYXRhLnNwbUQgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtRCkgOiAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgd2F0Y2hUcmFja2VyLnB1c2hFdmVudCgnRVhQJywgZGF0YXNldCwgY29uZmlnLCBPYmplY3QuYXNzaWduKHt9LCBlbnRyeSwge1xuICAgICAgICB4OiBlbGVtZW50LngsXG4gICAgICAgIHk6IGVsZW1lbnQueSxcbiAgICAgICAgd2lkdGg6IGVsZW1lbnQud2lkdGgsXG4gICAgICAgIGhlaWdodDogZWxlbWVudC5oZWlnaHQsXG4gICAgICAgIGhhc2hfdmFsdWU6IGVsZW1lbnQuaGFzaF92YWx1ZVxuICAgICAgfSksIHNwbURhdGEpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNoZWNrU3RhcnQgKGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZykge1xuICAgIC8vIHZhciBzaXplID0gMDtcbiAgICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gICAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307ICAgIFxuICAgIHZhciB0ZW1wcyA9IFtdO1xuICAgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gdmFyIHN0cmluZyA9IGNvbmZpZy5sb2drZXkgKyAnXycgKyBjb25maWcuY3NzU2VsZWN0b3IgKyAnXydcbiAgICAgICAgLy8gICAgICAgICAgICAgICsgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IgKyAnXycgKyBvcHRzLmlkICsgSlNPTi5zdHJpbmdpZnkob3B0cy5kYXRhc2V0KTtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVudHJ5LCBjb25maWcpO1xuICAgICAgICB2YXIgdiA9IGVsZV9zW2ldIHx8IHt9O1xuICAgICAgICBpZiAodi5zdGF0dXMgPT09IDAgJiYgdi5leHBDb25maWcgJiYgaGFzaCA9PT0gdi5oYXNoX3ZhbHVlKSB7XG4gICAgICAgICAgdmFyIF9lbGVQb3MgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QgfHwge307XG4gICAgICAgICAgaWYgKF9lbGVQb3Mud2lkdGggJiYgX2VsZVBvcy5oZWlnaHQpIHtcbiAgICAgICAgICAgIHYuZGF0YXNldCA9IGVudHJ5LmRhdGFzZXQ7XG4gICAgICAgICAgICB2LnggPSBfZWxlUG9zLmxlZnQ7XG4gICAgICAgICAgICB2LnkgPSBfZWxlUG9zLnRvcDtcbiAgICAgICAgICAgIHYud2lkdGggPSBfZWxlUG9zLndpZHRoO1xuICAgICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIHYuc2l6ZSA9IF9lbGVQb3Mud2lkdGggKiBfZWxlUG9zLmhlaWdodDtcbiAgICAgICAgICAgIC8vIFJheOahhuaetuWGhe+8jOa3mOWuneWwj+eoi+W6jyDpgJrov4cgdGhyZXNob2xkcywgb2JzZXJ2ZXIub2JzZXJ2ZSDmsqHmnIljYWxsYmFja+i/lOWbnu+8jOWboOatpOaUueaIkOm7mOiupOWAvOS4ujBcbiAgICAgICAgICAgIHZhciBkZWZhdWx0UmF0aW8gPSBfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFO1xuICAgICAgICAgICAgaWYgKGVudHJ5LmludGVyc2VjdGlvblJhdGlvID49IGRlZmF1bHRSYXRpbykge1xuICAgICAgICAgICAgICB2LmV4cG9zdXJlVGltZSA9IGV4cG9zdXJlVGltZTtcbiAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDmm53lhYnnirbmgIFcbiAgICAgICAgICAgICAgdGVtcHMucHVzaCh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRlbXBzO1xuICB9XG59O1xuXG5leHBvcnRzLnJlc2V0ID0gZnVuY3Rpb24gKCkge307XG5cbmV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB3YXRjaFRyYWNrZXIuY2xlYXJSZWNvcmQoKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICBvYnNlcnZlcnNbaV0uZGlzY29ubmVjdCgpO1xuICB9XG4gIG9ic2VydmVycyA9IFtdO1xuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICBmb3IgKHZhciBsb2drZXkgaW4gX2hhc2hNYXApIHtcbiAgICBkZWxldGUgX2hhc2hNYXBbbG9na2V5XTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19leHAvY29sbGVjdF9leHAuanNcbi8vIG1vZHVsZSBpZCA9IDgyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgdXRpbE1ldGEgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE1ldGEnKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbmV4cG9ydHMuREFUQV9BUExVU19BRV9LRVkgPSAnZGF0YS1hcGx1cy1hZSc7XG5leHBvcnRzLkRBVEFfQVBMVVNfQUNfS0VZID0gJ2RhdGEtYXBsdXMtY2xrJztcbmV4cG9ydHMuREFUQV9BUExVU19TUE1fQU5DSE9SX0lEX0tFWSA9ICdkYXRhLXNwbS1hbmNob3ItaWQnO1xuZXhwb3J0cy5EQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZID0gJ2RhdGEtYXBsdXMtdnQtcG9zJztcblxuLy8g5LiN5pSv5oyBb2JzZXJ2ZXLnmoTmg4XlhrXkuIvvvIzova7or6Lpl7TpmpTvvIhtcylcbmV4cG9ydHMuTE9PUF9USU1FID0gMTAwMDtcblxuZXhwb3J0cy5nZXREZWZhdWx0UmVxdWVzdENmZyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwa2dTaXplOiAxMFxuICB9O1xufTtcblxuZnVuY3Rpb24gZ2V0TWV0YVZhbHVlIChrZXkpIHtcbiAgaWYgKGFwbHVzICYmIGFwbHVzLmdldE1ldGFJbmZvKSB7XG4gICAgcmV0dXJuIGFwbHVzLmdldE1ldGFJbmZvKGtleSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHV0aWxNZXRhLmdldE1ldGFDbnQoa2V5KTtcbiAgfVxufVxuXG4vLyDoh6rliqjmm53lhYnmiZPngrkgLSDliKTlrprlj6/op4bnmoTmr5TkvovnjodcbnZhciBnZXRBdXRvRXhwVmlld1JhdGUgPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG4gIHZhciByYXRlID0gZGVmYXVsdF92YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YXIgdmlzaWJsZV9yYXRlID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC12aXNpYmxlJyk7XG4gICAgaWYgKHZpc2libGVfcmF0ZSkge1xuICAgICAgcmF0ZSA9IHBhcnNlRmxvYXQodmlzaWJsZV9yYXRlKTtcbiAgICB9XG4gICAgaWYgKHJhdGUgPD0gMCkge1xuICAgICAgcmF0ZSA9IGRlZmF1bHRfdmFsdWU7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcbiAgfSBmaW5hbGx5IHtcbiAgICByZXR1cm4gcmF0ZTtcbiAgfVxufTtcbmV4cG9ydHMuQVVUT19BVF9WSUVXX1JBVEUgPSBnZXRBdXRvRXhwVmlld1JhdGUoMC4zKTtcblxuLy8gdmFyIEVYUF9ERUJPVU5DRV9EVVJBVElPTiA9IDEwMDsgLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXG4vKipcbiAqIOacieaViOabneWFieaXtumVv+W6lee6vyAtIOavq+enkuaVsChtcylcbiAqIEBwYXJhbXMge051bWJlcn0gZGVmYXVsdF92YWx1ZSBpcyAzMDBtc1xuICogQHJldHVybiB7TnVtYmVyfSBkdXJhdGlvblxuICovXG52YXIgZ2V0QXV0b0V4cER1cmF0aW9uID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuICB2YXIgZHVyYXRpb24gPSBkZWZhdWx0X3ZhbHVlO1xuICB0cnkge1xuICAgIHZhciB0bXBfZHVyYXRpb24gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLWR1cmF0aW9uJyk7XG4gICAgdmFyIGR1cmF0aW9uX24gPSBwYXJzZUludCh0bXBfZHVyYXRpb24pO1xuICAgIGlmICgoZHVyYXRpb25fbiArICcnKSAhPT0gJ05hTicpIHtcbiAgICAgIGR1cmF0aW9uID0gZHVyYXRpb25fbjtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBkdXJhdGlvbjtcbiAgfVxufTtcbmV4cG9ydHMuRVhQX0RVUkFUSU9OID0gZ2V0QXV0b0V4cER1cmF0aW9uKDMwMCk7IC8v6buY6K6kMzAwbXNcblxuLy8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuLy8gZXhwb3J0cy5nZXREZWJvdW5jZUR1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xuLy8gICByZXR1cm4gRVhQX0RFQk9VTkNFX0RVUkFUSU9OO1xuLy8gfTtcblxuLyoqXG4gKiDojrflj5boh6rliqjmm53lhYnphY3nva7pobnvvIzlubblsIZmaWx0ZXLjgIF0YWflkoxjc3NTZWxlY3RvcuWQiOW5tuS4umVsZW1lbnRTZWxlY3RvclxuICogVE9ETyBKU09OLnBhcnNlIOS7heaUr+aMgUlFOOWPiuS7peS4iua1j+iniOWZqCA9PiBqcyBhcGlcbiAqIEBwYXJhbXMga2V5IHtTdHJpbmd9ICdhcGx1cy1hdXRvLWV4cCcvJ2FwbHVzLWF1dG8tY2xrJ1xuICogQHJldHVybiB7QXJyYXl9IFt7XG4gKiAgICBsb2drZXk6IC9hLmIuYzEsXG4gKiAgICBlbGVtZW50U2VsZWN0b3I6ICdkaXZbc2NtPTEyMzRdJyxcbiAqICAgIHRhZzogZGl2LFxuICogICAgZmlsdGVyOiBzY209MTIzNFxuICogICAgcG9zaXRpb25TZWxlY3RvcjogdHJ1ZS8ucGFyZW50Q2xhc3NuYW1lIC8vIOebuOWvueWumuS9jeS4muWKoeWfi+eCuVxuICogfSwge1xuICogICAgbG9na2V5OiAvYS5iLmMyLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtzY209MjM0NV0ub25lJyxcbiAqICAgIHRhZzogcCxcbiAqICAgIGZpbHRlcjogc2NtPTIzNDUsXG4gKiAgICBjc3NTZWxlY3RvcjogLm9uZVxuICogfSwge1xuICogICAgbG9na2V5OiAvYS5iLmMzLFxuICogICAgZWxlbWVudFNlbGVjdG9yOiAncFtkYXRhLXNwbS1jbGlja10nLFxuICogICAgdGFnOiBwLFxuICogICAgZmlsdGVyOiBkYXRhLXNwbS1jbGlja1xuICogfV1cbiAqL1xudmFyIGdldEF1dG9Db25maWcgPSBmdW5jdGlvbihjb25maWdLZXksIG1ldGFPYmopIHtcbiAgdmFyIGNvbmZpZ3MgPSBbXTtcbiAgLy8gdmFyIHRtcF9sb2drZXlzID0gW107XG4gIHZhciB0bXBfdGFnX2ZpbHRlciA9IFtdO1xuICB2YXIgYXBsdXNBdXRvRXhwO1xuICB0cnkge1xuICAgIGFwbHVzQXV0b0V4cCA9IG1ldGFPYmogfHwgZ2V0TWV0YVZhbHVlKGNvbmZpZ0tleSk7XG4gICAgdmFyIHRlbXBzID0gW107XG4gICAgaWYgKGFwbHVzQXV0b0V4cCAmJiB0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnc3RyaW5nJykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHAucmVwbGFjZSgvJy9nLCAnXCInKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnb2JqZWN0JyAmJiBhcGx1c0F1dG9FeHAuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICB0ZW1wcyA9IGFwbHVzQXV0b0V4cDtcbiAgICB9XG4gICAgaWYgKHRlbXBzICYmIHRlbXBzLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0ZW1wcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG1wID0gdGVtcHNbaV0gfHwge307XG4gICAgICAgIHZhciBsb2drZXkgPSB0bXAubG9na2V5IHx8ICcnO1xuICAgICAgICB2YXIgdGFnID0gdG1wLnRhZyA/IHRtcC50YWcgOiAnJztcbiAgICAgICAgdmFyIGZpbHRlciA9IHRtcC5maWx0ZXI7XG4gICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHRtcC5jc3NTZWxlY3RvcjtcbiAgICAgICAgdmFyIHdob2xlU2VsZWN0b3IgPSBjc3NTZWxlY3RvciB8fCAodGFnICYmIGZpbHRlcik7XG4gICAgICAgIGlmICghbG9na2V5IHx8ICF3aG9sZVNlbGVjdG9yKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgJyArIEpTT04uc3RyaW5naWZ5KHRtcCkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIDIwMTctMTEtMjMg5omL5reY5o6l5YWl5ZKMbGF6YWRh5Lia5Yqh6ZyA5rGC77yM5YWB6K64bG9na2V56YeN5aSNXG4gICAgICAgIC8vIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfbG9na2V5cywgbG9na2V5KSA+IC0xKSB7XG4gICAgICAgIC8vICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgbG9na2V5ICcgKyBsb2drZXkgKyAnIHJlcGVhdGVkJyk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgZmlsdGVyID0gdHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycgPyBmaWx0ZXIuc3BsaXQoXCI9XCIpIDogW107XG4gICAgICAgIHZhciB0YWdfZmlsdGVyID0gdGFnO1xuICAgICAgICBpZiAoZmlsdGVyLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBmaWx0ZXIuc2hpZnQoKSArICc9XCInICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlci5qb2luKCcnKSkgKyAnXCJdJztcbiAgICAgICAgfSBlbHNlIGlmIChmaWx0ZXIubGVuZ3RoID09IDEgJiYgZmlsdGVyWzBdKSB7XG4gICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyWzBdKSArICddJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoY3NzU2VsZWN0b3IpIHtcbiAgICAgICAgICB0YWdfZmlsdGVyICs9IGNzc1NlbGVjdG9yO1xuICAgICAgICB9XG5cbiAgICAgICAgdG1wLmVsZW1lbnRTZWxlY3RvciA9IHRhZ19maWx0ZXI7XG4gICAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfdGFnX2ZpbHRlciwgdGFnX2ZpbHRlcikgPiAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignbWV0YSAnICsgY29uZmlnS2V5ICsgJyBjb25maWcgZXJyb3IsIHRhZ19maWx0ZXJfY3NzU2VsZWN0b3IgJyArIHRhZ19maWx0ZXIgKyAnIHJlcGVhdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdG1wX2xvZ2tleXMucHVzaChsb2drZXkpO1xuICAgICAgICB0bXBfdGFnX2ZpbHRlci5wdXNoKHRhZ19maWx0ZXIpO1xuICAgICAgICBjb25maWdzLnB1c2godG1wKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIFRPRE8g55uR5o6n6L+Z5Z2X5YaF5a65XG4gICAgdWxvZygpLncoZXJyKTtcbiAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICBtc2c6IGVyclxuICAgIC8vIH0pO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBjb25maWdzO1xuICB9XG59O1xuXG4vKipcbiAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9FeHBDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG4gIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWV4cCcsIG1ldGFPYmopIHx8IFtdO1xufTtcbi8qKlxuICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0V4cFVzZXJGbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYWVBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC11c2VyZm4nKTtcbiAgaWYgKGFlQXV0b1VzZXJGbikge1xuICAgIHZhciBmbiA9IHdpbmRvd1thZUF1dG9Vc2VyRm5dIHx8IGFlQXV0b1VzZXJGbjtcbiAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLy8gPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwLXdhdGNoZG9tXCIgY29udGVudD1cInRocm90dGxlXCIgLz5cbmV4cG9ydHMuaXNUaHJvdHRsZVdhdGNoRG9tID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcnMgPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBycyA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtd2F0Y2hkb20nKSA9PT0gJ3Rocm90dGxlJztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBycztcbn07XG4vKipcbiAqIOiOt+WPlueCueWHu+iHquWKqOmHh+mbhueahOmFjee9rumhuVxuICovXG5leHBvcnRzLmdldEF1dG9DbGtDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG4gIHJldHVybiBnZXRBdXRvQ29uZmlnKCdhcGx1cy1hdXRvLWNsaycsIG1ldGFPYmopIHx8IFtdO1xufTtcbi8qKlxuICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0Nsa1VzZXJGbiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYWNBdXRvVXNlckZuID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWNsay11c2VyZm4nKTtcbiAgaWYoIGFjQXV0b1VzZXJGbiApe1xuICAgIHZhciBmbiA9IHdpbmRvd1thY0F1dG9Vc2VyRm5dIHx8IGFjQXV0b1VzZXJGbjtcbiAgICBpZiggdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICl7XG4gICAgICByZXR1cm4gZm47XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfd2ViL2xpYl9jb21tb24vY29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cbWV0YeeahOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBfaGVhZF9ub2RlO1xudmFyIF9tZXRhX25vZGVzO1xuXG52YXIgdXRpbEF0dHJpYnV0ZSA9IHJlcXVpcmUoJy4vdXRpbEF0dHJpYnV0ZScpO1xuLyoqXG4gKiDlj5blvpfpobXpnaLkuIogaGVhZCDkuK3nmoTmiYDmnIkgbWV0YSDlhYPntKBcbiAqIEBwYXJhbSBbZm9yY2VdIHtib29sZWFufSDmmK/lkKblvLrliLbojrflj5bmlrDlhoXlrrlcbiAqL1xuZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoZm9yY2UpIHtcbiAgX2hlYWRfbm9kZSA9IF9oZWFkX25vZGUgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcblxuICBpZiAoX21ldGFfbm9kZXMgJiYgIWZvcmNlKSB7XG4gICAgcmV0dXJuIF9tZXRhX25vZGVzO1xuICB9XG5cbiAgcmV0dXJuIF9oZWFkX25vZGUgPyAoX21ldGFfbm9kZXMgPSBfaGVhZF9ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdtZXRhJykpIDogW107XG59O1xuZXhwb3J0cy5nZXRNZXRhVGFncyA9IGdldE1ldGFUYWdzO1xuXG4vKipcbiAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3mjIflrpogbWV0YSDnmoQgKGF0dHIgfHwgY29udGVudCkg5YC8XG4gKiA8bWV0YSBuYW1lPVwiYXBsdXMtdGVybWluYWxcIiBjb250ZW50PVwiMVwiPlxuICovXG5mdW5jdGlvbiBnZXRNZXRhQ250KG5hbWUsIGF0dHIpIHtcbiAgdmFyIGk7XG4gIHZhciBtZXRhO1xuICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG4gIHZhciBsID0gbWV0YV9ub2Rlcy5sZW5ndGg7XG4gIHZhciBjb250ZW50O1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICBtZXRhID0gbWV0YV9ub2Rlc1tpXTtcbiAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSBuYW1lKSB7XG4gICAgICBjb250ZW50ID0gdXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCBhdHRyIHx8ICdjb250ZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbnRlbnQgfHwgJyc7XG59O1xuZXhwb3J0cy5nZXRNZXRhQ250ID0gZ2V0TWV0YUNudDtcblxuXG4vKipcbiAqIOehruWumiBoZWFkIC8gbWV0YSDkuK3nmoQgaXNvbmVwYWdlIOeahOaVsOaNrlxuICog5b2i5aaC77yaXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjBcIiAvPiDooajnpLrkuI3mmK9vbmVwYWdlXG4gKiA8bWV0YSBuYW1lPVwiaXNvbmVwYWdlXCIgY29udGVudD1cIjF8aHR0cDovL2g1Lm0udGFvYmFvLmNvbS93ZS9pbmRleC5odG0jZGV0YWlsXCIgLz4g6KGo56S65pivb25lcGFnZVxuICovXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZnVuY3Rpb24gZ2V0T25lUGFnZUluZm8obWV0YUluZm8pIHtcbiAgdmFyIG9iaiA9IHtcbiAgICBpc29uZXBhZ2U6ICctMScsXG4gICAgdXJscGFnZW5hbWU6ICcnXG4gIH07XG4gIHZhciBtZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCk7XG4gIGlmIChtZXRhX2luZm8gJiYgbWV0YV9pbmZvLmhhc093blByb3BlcnR5KCdpc29uZXBhZ2VfZGF0YScpKSB7XG4gICAgb2JqLmlzb25lcGFnZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS5pc29uZXBhZ2U7XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLnVybHBhZ2VuYW1lO1xuICB9IGVsc2Uge1xuICAgIHZhciBjb250ZW50ID0gZ2V0TWV0YUNudCgnaXNvbmVwYWdlJykgfHwgJy0xJztcbiAgICB2YXIgYXJyX2NvbnRlbnQgPSBjb250ZW50LnNwbGl0KFwifFwiKTtcbiAgICBvYmouaXNvbmVwYWdlID0gYXJyX2NvbnRlbnRbMF07XG4gICAgb2JqLnVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6IFwiXCI7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5leHBvcnRzLmdldE9uZVBhZ2VJbmZvID0gZ2V0T25lUGFnZUluZm87XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsTWV0YS5qc1xuLy8gbW9kdWxlIGlkID0gODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMudHJ5VG9HZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbihlbGVtZW50LCBhdHRyX25hbWUpIHtcbiAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgPyAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cl9uYW1lKSB8fCAnJykgOiAnJztcbn07XG5cbnZhciB0cnlUb1NldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyX25hbWUsIGF0dHJfdmFsdWUpIHtcbiAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcbiAgICB0cnkge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy50cnlUb1NldEF0dHJpYnV0ZSA9IHRyeVRvU2V0QXR0cmlidXRlO1xuXG5leHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRyeVRvU2V0QXR0cmlidXRlKGVsZW1lbnQsIGF0dHJfbmFtZSwgJycpO1xuICAgIH1cbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbi8vIG1vZHVsZSBpZCA9IDg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG4vLyB2YXIgVVBEQVRFID0gJ3VwZGF0ZSc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHB1c2hRdWV1ZTpmdW5jdGlvbihtZXRob2ROYW1lLCBhcmdzKXtcbiAgICAgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLicgKyBtZXRob2ROYW1lLFxuICAgICAgICBhcmd1bWVudHM6IGFyZ3NcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgZWFjaChhcGx1c1N0YXRpYy5vcGVuQVBJcywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgYXBsdXNbdl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgZWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gdiA9PT0gJ2VudGVyJyA/ICdfc2VuZFBWJyA6ICdfJyArIHY7XG5cbiAgICAgICAgICBfc2VsZi5wdXNoUXVldWUobWV0aG9kTmFtZSwgaXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9vcGVuX2FwaS5qc1xuLy8gbW9kdWxlIGlkID0gODZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2FwbHVzX2NsaWVudF9taW5pLmpzXG4gKlxuICogY2xpZW50SW5mbyBmb3IgbWluaWFwcFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBtaW5pID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvbWluaScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyW5qih5Z2XLCDkuKrmgKfljJbpg6jliIblrZDnsbvkuK3lrp7njrBcbiAgICAgKi9cbiAgICAvLyBpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIC8vIH0sXG5cbiAgICBfZ2V0TmV0d29ya1R5cGU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgaWYgKGN0eC5nZXROZXR3b3JrVHlwZSkge1xuICAgICAgICBjdHguZ2V0TmV0d29ya1R5cGUoe1xuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlcyA/IHJlcy5uZXR3b3JrVHlwZSA6ICcnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FsbGJhY2soJycpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiDojrflj5bns7vnu5/kv6Hmga8gaHR0cHM6Ly9kb2NzLmFsaXBheS5jb20vbWluaS9hcGkvc3lzdGVtLWluZm9cbiAgICAgKiDmiYvmnLrlnovlj7fjgIHlsY/luZXliIbovqjnjofjgIHns7vnu5/niYjmnKznrYnkv6Hmga9cbiAgICAgKi9cbiAgICBfZ2V0U3lzdGVtSW5mbzogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGVtcHR5T2JqID0ge307XG4gICAgICB2YXIgc3lzSW5mbyA9IF9zZWxmLlNZU1RFTV9JTkZPIHx8IHt9O1xuICAgICAgaWYgKHN5c0luZm8gJiYgc3lzSW5mby52ZXJzaW9uKSB7XG4gICAgICAgIGNhbGxiYWNrKF9zZWxmLlNZU1RFTV9JTkZPKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgbWluaS5nZXRDb250ZXh0KCkuZ2V0U3lzdGVtSW5mbyh7XG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICByZXMubmV0d29ya1R5cGUgPSBuO1xuICAgICAgICAgICAgICAgICAgX3NlbGYuU1lTVEVNX0lORk8gPSByZXM7XG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIF9zZWxmLl9nZXROZXR3b3JrVHlwZShmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgZW1wdHlPYmoubmV0d29ya1R5cGUgPSBuO1xuICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBjYWxsYmFjayhlbXB0eU9iaik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgX2dldEFjY291bnRJbmZvU3luYzogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGluZm8gPSB7fTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgICAgaWYgKGN0eC5nZXRBY2NvdW50SW5mb1N5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFjY291bnRJbmZvU3luYycpKSB7XG4gICAgICAgICAgLy8g5b6u5L+hXG4gICAgICAgICAgdmFyIGFjY291bnRJbmZvID0gY3R4LmdldEFjY291bnRJbmZvU3luYygpO1xuICAgICAgICAgIHZhciBtaW5pUHJvZ3JhbSA9IGFjY291bnRJbmZvLm1pbmlQcm9ncmFtIHx8IHt9O1xuICAgICAgICAgIHZhciBwbHVnaW4gPSBhY2NvdW50SW5mby5wbHVnaW4gfHwge307XG4gICAgICAgICAgaW5mby5hcHBJZCA9IG1pbmlQcm9ncmFtLmFwcElkOyAgLy8g5bCP56iL5bqPIGFwcElkXG4gICAgICAgICAgaW5mby5hcHBWZXJzaW9uID0gbWluaVByb2dyYW0udmVyc2lvbiB8fCBtaW5pUHJvZ3JhbS5lbnZWZXJzaW9uOyAgLy8g5bCP56iL5bqPIGFwcFZlcnNpb25cbiAgICAgICAgICBpbmZvLnBsdWdpbkFwcElkID0gcGx1Z2luLmFwcElkOyAvLyDmj5Lku7YgYXBwSWRcbiAgICAgICAgICBpbmZvLnBsdWdpbkFwcFZlcnNpb24gPSBwbHVnaW4udmVyc2lvbjsgLy8g5o+S5Lu2IGFwcFZlcnNpb24gIFxuICAgICAgICB9IGVsc2UgaWYgKGN0eC5nZXRBcHBJZFN5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFwcElkU3luYycpKSB7XG4gICAgICAgICAgdmFyIGFwcEluZm8gPSBjdHguZ2V0QXBwSWRTeW5jKCkgfHwge307XG4gICAgICAgICAgaW5mby5hcHBJZCA9IGFwcEluZm8uYXBwSWQgfHwgJyc7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogd29ya25vXG4gICAgICogICAxLiBjb29raWUuZ2V0Q29va2llKCd3b3Jrbm8nKVxuICAgICAqICAgMi4gY29va2llLmdldENvb2tpZSgnZW1wbElkJylcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdUT0RPIGdldFN5c3RlbUluZm8nKTtcbiAgICAgIHRoaXMuX2dldFN5c3RlbUluZm8oZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAvLyDmlK/ku5jlrp3lsI/nqIvluo/mlofmoaMgIHN5c3RlbS3ns7vnu5/niYjmnKwgcGxhdGZvcm0t57O757uf5ZCNXG4gICAgICAgIHJlcy51c2VyQWdlbnQgPSAnLSc7XG4gICAgICAgIHJlcy5vcyA9IHJlcy5wbGF0Zm9ybSA/IHJlcy5wbGF0Zm9ybS50b0xvY2FsZVVwcGVyQ2FzZSgpIDogJyc7XG4gICAgICAgIHJlcy5vc192ZXJzaW9uID0gcmVzLnN5c3RlbSA/IHJlcy5zeXN0ZW0gOiAnJztcbiAgICAgICAgcmVzLmFjY2VzcyA9IHJlcy5icmFuZCA/IHJlcy5icmFuZCA6ICcnO1xuICAgICAgICB2YXIgaG9zdCA9ICcnO1xuICAgICAgICBpZihyZXMuaG9zdCAmJiAodHlwZW9mIHJlcy5ob3N0LmVudiA9PT0gJ3N0cmluZycpKXtcbiAgICAgICAgICBob3N0ID0gcmVzLmhvc3QuZW52O1xuICAgICAgICB9XG4gICAgICAgIHJlcy5ob3N0ID0gaG9zdDtcblxuICAgICAgICB2YXIgYWNjb3VudEluZm8gPSBfc2VsZi5fZ2V0QWNjb3VudEluZm9TeW5jKCk7XG4gICAgICAgIHZhciBycyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcywgYWNjb3VudEluZm8pO1xuXG4gICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgICBhcGx1cy5fYXBsdXNfY2xpZW50ID0gcnM7XG4gICAgICAgIGNiKCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAyMDAwO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX2NsaWVudF9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWwj+eoi+W6j+S4i+mdoueahHNwbeS9k+ezu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDpvpnpqbkgPGNoZW5ncGluZy5yY3BAYWxpYmFiYS1pbmMuY29tPlxuICovXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBpc0FycmF5ICA9IHJlcXVpcmUoJ0B1dGlscy9pc0FycmF5Jyk7XG52YXIgYXBsdXNTdGF0aWMgID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJlc2V0TGFzdFBhZ2VTcG06IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuICAgICAgdmFyIHNwbSA9IGFwbHVzLl8kLnNwbSB8fCB7fTtcbiAgICAgIHNwbS5zcG1fY250ID0gJyc7XG4gICAgfSxcbiAgICBsaXN0ZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSxbXSk7ICBcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgICAgICBhcmd1bWVudHM6WydvblNob3cnLGZ1bmN0aW9uKG9wdCl7XG4gICAgICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLHt9KTsgXG4gICAgICAgICAgICB2YXIgcGFnZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZXMnKTtcbiAgICAgICAgICAgIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VQYXRoID0gcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcbiAgICAgICAgICAgIGlmIChpc0FycmF5KHBhZ2VzKSkge1xuICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSBwYWdlc1tpXTtcbiAgICAgICAgICAgICAgICBpZihjdXJyZW50Lm1hdGNoVXJsID09PSBjdXJyZW50UGFnZVBhdGgpe1xuICAgICAgICAgICAgICAgICAgYXBsdXMuc2V0UGFnZVNQTShjdXJyZW50LnNwbUEsIGN1cnJlbnQuc3BtQik7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246YXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgICAgICBhcmd1bWVudHM6WydjbGVhclBhZ2VTUE0nLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfc2VsZi5yZXNldExhc3RQYWdlU3BtKCk7XG4gICAgICAgIH1dLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtcyBkYXRhIHtPYmplY3R9IHtcbiAgICAgICAqICAgc3BtQ250OiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcbiAgICAgICAqICAgc3BtUHJlOiAnYS5iLjAuMCdcbiAgICAgICAqIH1cbiAgICAgICAqL1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgIGFyZ3VtZW50czpbJ3NldFBhZ2VTUE0nLGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuICAgICAgICAgICAgdmFyIHNwbSA9IGFwbHVzLl8kLnNwbSB8fCB7fTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCkgfHwgW107XG4gICAgICAgICAgICB2YXIgc3BtYWIgPSBkYXRhLnNwbUNudCA/IGRhdGEuc3BtQ250LnNwbGl0KCcuJykgOiBbc3BtLmRhdGEuYSB8fCAnMCcsIHNwbS5kYXRhLmIgfHwgJzAnXTtcbiAgICAgICAgICAgIGlmIChzcG1hYi5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgc3BtYWIgPSBzcG1hYi5jb25jYXQoWycwJywgJzAnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3BtYWJzdHIgPSBzcG1hYi5qb2luKCcuJyk7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcbiAgICAgICAgICAgIHZhciBwcmVQcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gM10gfHwge307XG5cbiAgICAgICAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAwICYmIGN1cnJlbnRQYWdlKSB7XG4gICAgICAgICAgICAgIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdLnNwbSA9IHNwbWFic3RyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTcG0gPSBzcG0uZGF0YSAmJiBzcG0uZGF0YS5hID8gW3NwbS5kYXRhLmEsIHNwbS5kYXRhLmIsIHNwbS5kYXRhLmMgfHwgJzAnLCBzcG0uZGF0YS5kIHx8ICcwJ10uam9pbignLicpIDogJyc7XG4gICAgICAgICAgICBzcG0uZGF0YS5hID0gc3BtYWJbMF0gPyAnJyArIHNwbWFiWzBdIDogJzAnO1xuICAgICAgICAgICAgc3BtLmRhdGEuYiA9IHNwbWFiWzFdID8gJycgKyBzcG1hYlsxXSA6ICcwJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmMgPSAnMCc7XG4gICAgICAgICAgICBzcG0uZGF0YS5kID0gJzAnO1xuICAgICAgICAgICAgc3BtLnBhZ2VfcmVmZXJyZXIgPSBwYWdlcy5sZW5ndGggPiAxICYmIGN1cnJlbnRQYWdlID8gKGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzKSA6ICcnO1xuICAgICAgICAgICAgc3BtLnNwbV9jbnQgPSBzcG1hYnN0cjtcblxuICAgICAgICAgICAgLy8g5Lul55So5oi35ZyoVVJM5LiK5ou85o6l55qEc3Bt5Li65YeG77yMYXBsdXMuc3BtX29yaWdu5p2l5rqQ5LqOYXV0b19pbml0L2luamVjdF9hcHAuanNcbiAgICAgICAgICAgIHZhciBzcG1fb3JpZ24gPSBhcGx1cy5zcG1fb3JpZ24gfHwgc3BtLnNwbV9vcmlnbjtcbiAgICAgICAgICAgIHNwbS5zcG1fcHJlID0gZGF0YS5zcG1QcmUgfHwgc3BtLnNwbV91cmwgfHwgcHJlUHJlUGFnZS5zcG0gfHwgJyc7XG4gICAgICAgICAgICBzcG0uc3BtX3VybCA9IGRhdGEuc3BtVXJsIHx8IGN1cnJlbnRQYWdlU3BtIHx8IHByZVBhZ2Uuc3BtIHx8IHNwbV9vcmlnbiB8fCAgJyc7XG4gICAgICAgICAgICBhcGx1cy5fJC5zcG0gPSBzcG07XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NldFBhZ2VTUE0gZXJyb3IsIHRoZSBlcnJvckluZm8gaXMgJywgZSk7XG4gICAgICAgICAgICB1bG9nKCkudygnc2V0UGFnZVNQTSBlcnJvciwgdGhlIGVycm9ySW5mbyBpcyAnLCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgIH1dLFxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5saXN0ZW4oKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL21pbmlfc3BtLmpzXG4vLyBtb2R1bGUgaWQgPSA4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogYXBsdXNfbWluaV9yZXBvcnRfdW0uanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIE1haW4gPSByZXF1aXJlKCcuL2xpYl9jb25uZWN0aW9uL21haW5fbWluaV91bV9odHRwLmpzJyk7XG4gICAgICB2YXIgbWV0YUluZm8gPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcubWV0YUluZm87XG4gICAgICAvLyDnlKjkuo7oh6rliqjojrflj5ZvcGVuaWTml7bkvKDovpNvcGVuaWRcbiAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoe21ldGFJbmZvOiBtZXRhSW5mb30pO1xuICAgICAgbWFpbi5ydW4odGhpcy5vcHRpb25zKTtcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbWluaV9yZXBvcnRfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBtYWluX21pbmlfdW1faHR0cC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG4vLyB2YXIgbG9nX2Nsb3VkID0gcmVxdWlyZSgnLi9sb2dfY2xvdWQnKTtcbnZhciBtYWluX2Jhc2VfaHR0cCA9IHJlcXVpcmUoJy4vbWFpbl9iYXNlX2h0dHAnKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCcuLi9saWJfdW0vZXZlbnRNYW5hZ2VyJyk7XG52YXIgcmVxdWVzdFF1ZXVlID0gcmVxdWlyZSgnLi4vbGliX3VtL3JlcXVlc3RRdWV1ZScpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vbGliX3VtL3V0aWxzJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgdXRpbE1vbml0b3IgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE1vbml0b3InKTtcbnZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFKTtcblxuZnVuY3Rpb24gaGFuZGxlRXZlbnQoaWQsIG9wdGlvbnMsIGF1dG9HZXRPcGVuaWQpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICBpZiAodXRpbHMuY2hlY2tFdmVudChpZCwgb3B0aW9ucykpIHtcbiAgICB2YXIgZXZlbnQgPSByZXF1aXJlKCcuLi9saWJfdW0vZXZlbnQuanMnKShpZCwgb3B0aW9ucyk7XG4gICAgZXZlbnQucmFuayA9IHV0aWxNb25pdG9yLnJhbmsoKTtcbiAgICBpZiAoZXZlbnQgJiYgZXZlbnQuaWQgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQpIHtcbiAgICAgIGV2ZW50LmFtb3VudCA9IGV2ZW50LnJhbms7XG4gICAgfVxuXG4gICAgdWxvZygpLmkoJ2V2ZW50OiAnLCBpZCwgb3B0aW9ucyk7XG4gICAgZXZlbnRNYW5hZ2VyKCkuYWRkRXZlbnQoZXZlbnQpO1xuICAgIC8vIOavj+asoWFkZEV2ZW505ZCO77yM5Yik5pat5piv5ZCmZWt2c+WGheeahOaXpeW/l+adoeaVsOaYr+WQpui2heWHum1heExpbWl0XG4gICAgLy8gbWF4LXF1ZXVlLWNvdW5055So5LqO6Ieq5a6a5LmJ6IGa5ZCI6Zif5YiX6ZW/5bqmXG4gICAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIG1heFF1ZXVlQ291bnQgPSBhcGx1cy5nZXRNZXRhSW5mbygnbWF4LXF1ZXVlLWNvdW50JykgfHwgYXBsdXNTdGF0aWMuTUFYX1FVRVVFX0NPVU5UO1xuICAgIGlmKGlkID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EIHx8IGV2ZW50TWFuYWdlcigpLmdldEVrdnNMZW4oKSA+PSBtYXhRdWV1ZUNvdW50KSB7XG4gICAgICBpZiAoIWF1dG9HZXRPcGVuaWQpIHtcbiAgICAgICAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLlJFUVVFU1RTKS5zZW5kKHV0aWxzLkRhdGFUeXBlLkVLViwgeyBub0NhY2hlOiBmYWxzZSB9LCBmdW5jdGlvbigpe1xuICAgICAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkpIHtcbiAgICAgICAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQodXRpbHMuRGF0YVR5cGUuRUtWLCB7IG5vQ2FjaGU6IGZhbHNlIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB1bG9nKCkuaSgnZXZlbnQgc2VuZCBzdWNjZXNzOiAnLCBpZCwgZXZlbnQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5TRVRfTUVUQV9JTkZPLCBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fQU5PTllfSUQgJiYgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQodXRpbHMuRGF0YVR5cGUuRUtWLCB7IG5vQ2FjaGU6IGZhbHNlIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICB1bG9nKCkuaSgnZXZlbnQgc2VuZCBzdWNjZXNzOiAnLCBpZCwgZXZlbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBtYWluX2Jhc2VfaHR0cC5leHRlbmQoe1xuXG4gIGhhbmRsZXJNaWRkbGV3YXJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgIHZhciBhdXRvR2V0T3BlbmlkID0gdGhpcy5tZXRhSW5mbyAmJiB0aGlzLm1ldGFJbmZvLmF1dG9HZXRPcGVuaWQ7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIC8vIEDmloflv4Mg5YWo5Z+L54K5IHRyYWNrX3R5cGVcbiAgICB2YXIgdXNlckV2ZW50QXJncywgZ29rZXk7XG4gICAgdmFyIGxvZ2tleSA9IGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmxvZ2tleTtcbiAgICB2YXIgZ21rZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nbWtleTtcbiAgICB2YXIgbG9nZGF0YSA9IGRhdGEgJiYgZGF0YS53aGF0X3RvX3NlbmQgJiYgZGF0YS53aGF0X3RvX3NlbmQubG9nZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhIHx8IHt9O1xuICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICAgIHZhciBwYWdlX25hbWU7XG4gICAgaWYgKGdta2V5ID09PSAnQ0xLJyB8fCBnbWtleSA9PT0gJ0VYUCcgfHwgZ21rZXkgPT09ICdPVEhFUicgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG4gICAgICB1c2VyRXZlbnRBcmdzID0gY2xvbmVEZWVwKGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmdva2V5KSB8fCB7fTtcbiAgICAgIGdva2V5ID0gbG9nZGF0YS5nb2tleSB8fCB7fTtcbiAgICAgIHZhciBldmVudF9hcmdzO1xuICAgICAgdmFyIHNka0FyZ3MgPSB7fTtcbiAgICAgIGlmIChsb2drZXkgPT09ICckJF9zaGFyZScpIHtcbiAgICAgICAgc2RrQXJncy5yZWZlcl9wYWdlID0gbG9nZGF0YS51cmw7XG4gICAgICAgIHNka0FyZ3Muc2hhcmVfdHlwZSA9IHVzZXJFdmVudEFyZ3Muc2hhcmVfdHlwZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGdva2V5LnNjZW5lKSB7XG4gICAgICAgIHNka0FyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vICQkX2FwcF9saW5r5LqL5Lu255qEdGFyZ2V0QXBwS2V5XG4gICAgICBpZihnb2tleS50YXJnZXRBcHBLZXkpIHtcbiAgICAgICAgc2RrQXJncy50YXJnZXRBcHBLZXkgPSB1c2VyRXZlbnRBcmdzLnRhcmdldEFwcEtleTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuICAgICAgfVxuICAgICAgXG4gICAgICBwYWdlX25hbWUgPSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10gfHwgdXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgKHVzZXJFdmVudEFyZ3Muc3BtICYmIHVzZXJFdmVudEFyZ3Muc3BtLmIpIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG4gICAgICBzZGtBcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcbiAgICAgIFxuICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddKSB7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3NbJ2RhdGEtcGFnZW5hbWUnXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuICAgICAgICBzZGtBcmdzLmdwID0gZ3A7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnNwbSkge1xuICAgICAgICBzZGtBcmdzWydzcG0tY250J10gPSBbZW5jb2RlVVJJQ29tcG9uZW50KHBhZ2VfbmFtZSksIHVzZXJFdmVudEFyZ3Muc3BtLmMsIHVzZXJFdmVudEFyZ3Muc3BtLmRdLmZpbHRlcihmdW5jdGlvbih2KXtcbiAgICAgICAgICByZXR1cm4gISF2O1xuICAgICAgICB9KS5qb2luKCcuJyk7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLnNwbTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHVzZXJFdmVudEFyZ3MucGFnZV90aXRsZSkge1xuICAgICAgICBzZGtBcmdzLnBhZ2VfdGl0bGUgPSB1c2VyRXZlbnRBcmdzLnBhZ2VfdGl0bGUgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKGxvZ2RhdGEudXJsKSB8fCAnJztcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV90aXRsZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNka0FyZ3MucGFnZV90aXRsZSA9IGdva2V5Ll9wYWdlX3RpdGxlIHx8ICcnO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodXNlckV2ZW50QXJncy5pc19hdXRvKSB7XG4gICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IHVzZXJFdmVudEFyZ3MuaXNfYXV0bztcbiAgICAgICAgc2RrQXJncy50cmFja190eXBlID0gXCIxXCI7XG4gICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLmlzX2F1dG87XG4gICAgICAgIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUpIHsgLy/lhajln4vngrnkuLvliqjkuIrmiqXkuovku7bnsbvlnosgQOmSsOaYrSBA5paH5b+DXG4gICAgICAgICAgc2RrQXJncy5ldmVudF90eXBlX2lkID0gbG9nZGF0YS5ldmVudF9jb2RlOyAvLyBA5paH5b+DIOS6i+S7tuexu+Wei+WPguaVsOWQjeabtOaUuVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZGtBcmdzLmlzX2F1dG8gPSAwO1xuICAgICAgICBzZGtBcmdzLnRyYWNrX3R5cGUgPSBcIjBcIjtcbiAgICAgIH1cblxuICAgICAgdmFyIGNsb25lUCA9IGNsb25lRGVlcCh1c2VyRXZlbnRBcmdzKTtcbiAgICAgIGZvciAodmFyIGsgaW4gY2xvbmVQKSB7XG4gICAgICAgIGlmICh0eXBlb2YgayA9PT0gJ3N0cmluZycgJiYgdXRpbHMuc3RhcnRzV2l0aChrLCAnXycpKSB7XG4gICAgICAgICAgc2RrQXJnc1trXSA9IGNsb25lUFtrXTtcbiAgICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJnc1trXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX1NUQVJUIHx8IGxvZ2tleSA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORCkge1xuICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHVzZXJFdmVudEFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZXZlbnRfYXJncyA9IHV0aWxEYXNoLmFzc2lnbihzZGtBcmdzLCB7IGN1c3A6IHVzZXJFdmVudEFyZ3MgfSk7XG4gICAgICB9XG4gICAgICBoYW5kbGVFdmVudChsb2drZXksIGV2ZW50X2FyZ3MsIGF1dG9HZXRPcGVuaWQpO1xuICAgIH0gZWxzZSBpZiAobG9nZGF0YS5ldmVudF9jb2RlID09PSAnMjAwMScpIHsgXG4gICAgICB2YXIgcHZhcmdzID0ge307XG4gICAgICB2YXIgcGFnZV9pZCA9IGFwbHVzU3RhdGljLlBBR0VfU1RBUlQ7XG4gICAgICBnb2tleSA9IGNsb25lRGVlcChsb2dkYXRhLmdva2V5KSB8fCB7fTtcbiAgICAgIHBhZ2VfbmFtZSA9IGdva2V5LnBhZ2VfbmFtZSB8fCBhcGx1cy5nZXRQYWdlTmFtZSgpIHx8IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKGxvZ2RhdGEudXJsKSB8fCBsb2dkYXRhLnVybCB8fCAnJztcbiAgICAgIHB2YXJncy5yID0gbG9nZGF0YS5hcmcxIHx8IGxvZ2RhdGEubG9na2V5IHx8ICctJztcbiAgICAgIHB2YXJncy5wYWdlX25hbWUgPSBwYWdlX25hbWU7XG4gICAgICBpZiAoZ29rZXkuX3BhZ2VfYXV0b19wdikge1xuICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDE7XG4gICAgICAgIHB2YXJncy51cmwgPSBnb2tleS5wYXRoIHx8ICctJztcbiAgICAgICAgcHZhcmdzLnJlZl91cmwgPSBnb2tleS5yZWZlcnJlcjtcbiAgICAgICAgcHZhcmdzLnRyYWNrX3R5cGUgPSBcIjFcIjtcbiAgICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX2F1dG9fcHY7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5yZWZlcnJlcjtcbiAgICAgICAgZGVsZXRlIGdva2V5LnBhdGg7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX25hbWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDA7XG4gICAgICAgIHB2YXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG4gICAgICAgIHB2YXJncy5yZWZfdXJsID0gbG9nZGF0YS5wcmU7XG4gICAgICAgIHB2YXJncy50cmFja190eXBlID0gXCIwXCI7XG4gICAgICB9XG5cbiAgICAgIGlmIChnb2tleS5kdXJhdGlvbikge1xuICAgICAgICBwdmFyZ3MuZHVyYXRpb24gPSBnb2tleS5kdXJhdGlvbjtcbiAgICAgICAgZGVsZXRlIGdva2V5LmR1cmF0aW9uO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIXV0aWxEYXNoLmlzRW1wdHlPYmplY3QoZ3ApKSB7XG4gICAgICAgIHB2YXJncy5ncCA9IGdwO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcbiAgICAgICAgcHZhcmdzLnNjZW5lID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIGdva2V5LnNjZW5lO1xuICAgICAgfVxuICAgICAgZ29rZXkgPSB1dGlscy5kZWxldGVJbmZvKGdva2V5LCBbJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ191c2VyX2lkJywgJ191c2VyX25pY2snLCAndWFpZCcsICdwdmlkJywgJ3NjZW5lJ10pO1xuICAgICAgcHZhcmdzWydzcG0tY250J10gPSBlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKTtcbiAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX2lkKSB7XG4gICAgICAgIHBhZ2VfaWQgPSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuICAgICAgICBkZWxldGUgZ29rZXkuX3BhZ2VfYXV0b19pZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGdva2V5LnBhZ2Vfc3RhcnQpIHtcbiAgICAgICAgcHZhcmdzLnBhZ2Vfc3RhcnQgPSBnb2tleS5wYWdlX3N0YXJ0O1xuICAgICAgICBkZWxldGUgZ29rZXkucGFnZV9zdGFydDtcbiAgICAgIH1cblxuICAgICAgLy8g6YeH6ZuG6aG16Z2icGFnZV90aXRsZVxuICAgICAgaWYgKGdva2V5LnBhZ2VfdGl0bGUpIHtcbiAgICAgICAgcHZhcmdzLnBhZ2VfdGl0bGUgPSBnb2tleS5wYWdlX3RpdGxlIHx8IFBhZ2VNYW5hZ2VyLmdldFBhZ2VUaXRsZShsb2dkYXRhLnVybCkgfHwgJyc7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3RpdGxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHZhcmdzLnBhZ2VfdGl0bGUgPSBnb2tleS5fcGFnZV90aXRsZTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV90aXRsZTtcblxuICAgICAgcHZhcmdzLnVybCA9IFBhZ2VNYW5hZ2VyLmdldEZ1bGxQYXRoKHB2YXJncy51cmwpO1xuICAgICAgcHZhcmdzLnJlZl91cmwgPSBQYWdlTWFuYWdlci5nZXRGdWxsUGF0aChwdmFyZ3MucmVmX3VybCk7XG4gICAgICBoYW5kbGVFdmVudChwYWdlX2lkLCB1dGlsRGFzaC5hc3NpZ24ocHZhcmdzLCB7IGN1c3A6IGdva2V5fSApLCBhdXRvR2V0T3BlbmlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coMjIyMiwgZGF0YSk7XG4gICAgfVxuICB9LFxuXG4gIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG4gIFxufSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX21pbmlfdW1faHR0cC5qc1xuLy8gbW9kdWxlIGlkID0gOTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDmi6bmiKrlubbmjIlodHRw5Y2P6K6u5Y+R6YCB5pel5b+XXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbi8vIHZhciBsb2dfY2xvdWQgPSByZXF1aXJlKCcuL2xvZ19jbG91ZCcpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cbiAgc3Vic2NyaWJlTG9nczogZnVuY3Rpb24gKGFjdGlvbiwgY2FsbGJhY2spIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmIChvcmlEYXRhcy5zdGF0dXMgPT09IGFwbHVzU3RhdGljLkNPTVBMRVRFKSB7XG4gICAgICAgIGNhbGxiYWNrKG9yaURhdGFzKTtcbiAgICAgIH1cbiAgICB9XSk7XG4gIH0sXG5cbiAgZ2V0TG9naWNTeW1ib2w6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXQgPT09ICdBTEknID8gJyYnIDogJ3x8JztcbiAgfSxcblxuICAvKipcbiAgICog5Zyo5a2Q57G75Lit5a6e546wXG4gICAqIEBwYXJhbXMge09iamVjdH0gZGF0YVxuICAgKi9cbiAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuICBcblxuICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgXG4gICAgLy8g6K6i6ZiFcHbkuovku7ZcbiAgICBfc2VsZi5zdWJzY3JpYmVMb2dzKGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsICdwdicpO1xuICAgIH0pO1xuXG4gICAgLy8g6K6i6ZiFaGpsai9hcGx1c+S6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCBhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgfSk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy53YXRjaExPRygpO1xuICB9XG59KTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2Nvbm5lY3Rpb24vbWFpbl9iYXNlX2h0dHAuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxHUS5qc1xuICog5pON5L2cYXBsdXNfcXVldWXnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuL3V0aWxHb2xkbG9nJyk7XG5cbmV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG4gIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gIHZhciBhcGx1c18xID0gYXBsdXNbbmFtZXNbMV1dO1xuICB2YXIgYXBsdXNfMiA9IGFwbHVzXzEgPyBhcGx1c18xW25hbWVzWzJdXSA6IG51bGw7XG5cbiAgaWYgKGFwbHVzICYmIG5hbWVzLmxlbmd0aCA9PT0gMiAmJiBhcGx1c18xKSB7XG4gICAgYXBsdXNfMS5hcHBseShhcGx1cywgYXJncyk7XG4gIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcbiAgICBhcGx1c18yLmFwcGx5KGFwbHVzXzEsIGFyZ3MpOyAgXG4gIH0gZWxzZSB7XG4gICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IGFjdGlvbixcbiAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgIH0pO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4vLyBtb2R1bGUgaWQgPSA5MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogZXZlbnQuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCcuL2pzb25VdGlsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaWQsIHByb3BlcnRpZXMpIHtcbiAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycgfHwgIWlkKSB7XG4gICAgdWxvZygpLncoJ2V2ZW50IGxvZ2tleSBpcyBpbnZhbGlkLCBpZCA9JywgaWQgfHwgXCInJyBldmVudCBwcm9wZXJ0aWVzID0gXCIsIGpzb25VdGlsLnN0cmluZ2Z5KHByb3BlcnRpZXMuY3VzcCkpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZXZlbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBldmVudC5pZCA9IGlkO1xuICBpZiAoIXByb3BlcnRpZXMgfHwgIXByb3BlcnRpZXMudHMpIHtcbiAgICBldmVudC50cyA9IERhdGUubm93KCk7XG4gIH1cbiAgdmFyIHByb3BzVHlwZSA9IHR5cGVvZiBwcm9wZXJ0aWVzO1xuICBpZiAocHJvcHNUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICBpZiAoe30uaGFzT3duUHJvcGVydHkuY2FsbChwcm9wZXJ0aWVzLCBrZXkpKSB7XG4gICAgICAgIGV2ZW50W2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcbiAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuICAgIGV2ZW50WydncCddID0gZ3A7IFxuICB9XG4gIHJldHVybiBldmVudDtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vZXZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDkzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGFjdGlvbiA9IHJlcXVpcmUoJy4vYWN0aW9uJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcbiAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICAgICAgdmFyIHF1ZSA9IGNvbnRleHRbQVBMVVNfUVVFVUVdIHx8IFtdO1xuICAgICAgdmFyIHJzID0gYWN0aW9uLmdldEZvcm1hdFF1ZXVlKHF1ZSwgJ21ldGFRdWV1ZScpO1xuICAgICAgY29udGV4dFtBUExVU19RVUVVRV0gPSBycy5xdWV1ZTtcbiAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHJzLmZvcm1hdFF1ZXVlLCB0aGlzLm9wdGlvbnMuY29uZmlnKTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvbWV0YV9xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gOTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG52YXIgaXNGdW5jdGlvbiA9IHJlcXVpcmUoJ0B1dGlscy9pc0Z1bmN0aW9uJyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxuLyoqXG4gKiBAcGFyYW1zIHtBcnJheX0gUVVFVUVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xudmFyIHByb2Nlc3NHb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoUVVFVUUsIG9wdHMpIHtcbiAgZnVuY3Rpb24gZigpIHtcbiAgICBpZiAoIVFVRVVFIHx8ICF1dGlsQXJyYXkuaXNBcnJheShRVUVVRSkgfHwgIVFVRVVFLmxlbmd0aCkgcmV0dXJuO1xuICAgIC8vIOaOkuW6j1xuICAgIHZhciBxdWUgPSBnZXRGb3JtYXRRdWV1ZShRVUVVRSkucXVldWU7XG4gICAgdmFyIHRhc2sgPSB7fTtcbiAgICB2YXIgZGVsYXlUYXNrcyA9IFtdO1xuICAgIHdoaWxlICh0YXNrID0gcXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMsIGZ1bmN0aW9uICh0KSB7XG4gICAgICAgIGRlbGF5VGFza3MucHVzaCh0KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoZGVsYXlUYXNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2hpbGUgKHRhc2sgPSBkZWxheVRhc2tzLnNoaWZ0KCkpIHtcbiAgICAgICAgICBwcm9jZXNzVGFzayh0YXNrLCBvcHRzKTtcbiAgICAgICAgfVxuICAgICAgfSwgMTAwKTtcbiAgICB9XG4gIH07XG4gIHRyeSB7XG4gICAgZigpO1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudyhlKTtcbiAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgLy8gICBtc2c6IGVcbiAgICAvLyB9KTtcbiAgfVxufTtcbmV4cG9ydHMucHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IHByb2Nlc3NHb2xkbG9nUXVldWU7XG5cbmZ1bmN0aW9uIGdldE1ldGFJbmZvKCkge1xuICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICB2YXIgbWV0YV9pbmZvID0gXyQubWV0YV9pbmZvOyAvLyB8fCBtZXRhSW5mby5nZXRJbmZvKCk7XG4gIHJldHVybiBtZXRhX2luZm87XG59XG5cbmZ1bmN0aW9uIGdldEFwbHVzSG9sZFR5cGUgKCkge1xuICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcbiAgdmFyIHVhaWQgPSBtZXRhX2luZm8udWFpZCArICcnO1xuICBpZiAodWFpZCA9PT0gJzEnICYmICFtZXRhX2luZm8uX2Fub255X2lkKSB7XG4gICAgcmV0dXJuICdCTE9DSyc7XG4gIH1cbiAgcmV0dXJuIG1ldGFfaW5mb1snX2hvbGQnXSB8fCBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcbn1cblxudmFyIEFQTFVTX0hPTERfVVNFUklEX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSA9IFtdO1xudmFyIEFQTFVTX0hPTERfUVVFVUUgPSBbXTtcblxuZnVuY3Rpb24gZmlsdGVyVGFzayAodGFzaykge1xuICB2YXIgaG9sZFR5cGUgPSBnZXRBcGx1c0hvbGRUeXBlKCk7XG4gIC8vIGNvbnNvbGUubG9nKCdob2xkVHlwZSA9PT0gJywgaG9sZFR5cGUpO1xuICB2YXIgbWV0YV9pbmZvID0gZ2V0TWV0YUluZm8oKSB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0cnVlO1xuXG4gIC8vIDA6IFwiX2hvbGRcIlxuICAvLyAxOiBcIlNUQVJUXCJcbiAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3VtZW50cyB8fCBbXTtcbiAgdmFyIG1ldGFLZXkgPSBhcmdzWzBdO1xuICB2YXIgbWV0YVZhbHVlID0gYXJnc1sxXTtcbiAgdmFyIFNUQVJUID0gJ1NUQVJUJztcbiAgaWYgKG1ldGFLZXkgPT09ICdfaG9sZCcgJiYgbWV0YVZhbHVlID09PSBTVEFSVCkge1xuICAgIHJldHVybiBTVEFSVDtcbiAgfVxuICBpZiAobWV0YUtleSA9PT0gJ19hbm9ueV9pZCcgJiYgbWV0YVZhbHVlKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmICh0YXNrICYmIC9zZW5kUFZ8cmVjb3JkfHNldFBhZ2VTUE18c2V0TWV0YUluZm98YXBwZW5kTWV0YUluZm8kLy50ZXN0KHRhc2suYWN0aW9uKSkge1xuICAgIHN3aXRjaCAoaG9sZFR5cGUpIHtcbiAgICBjYXNlICdCTE9DSyc6XG4gICAgICBpZiAoIW1ldGFfaW5mb1tob2xkVHlwZV0pIHtcbiAgICAgICAgQVBMVVNfSE9MRF9RVUVVRS5wdXNoKHRhc2spO1xuICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBmbGFnO1xufVxuXG5cbi8vIHZhciBwcm9jZXNzZWQgPSBmYWxzZTtcbmZ1bmN0aW9uIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIChvcHRzKSB7XG4gIC8vIGlmICghcHJvY2Vzc2VkKSB7XG4gIC8vICAgcHJvY2Vzc2VkID0gdHJ1ZTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG4gIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG4gIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9RVUVVRSwgb3B0cyk7ICBcbiAgLy8gfVxufVxuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gcXVldWVOYW1lOiBhcGx1c19xdWV1ZSB8fCBnb2xkbG9nX3F1ZXVlXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbmV4cG9ydHMuc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlID0gZnVuY3Rpb24gKHF1ZXVlTmFtZSwgb3B0cykge1xuICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcbiAgcXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLlNFVF9NRVRBX0lORk8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fVVNFUl9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5fQU5PTllfSUQgJiYgdmFsdWUpIHtcbiAgICAgICAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnX2hvbGQnICYmIHZhbHVlID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZ2V0TWV0aG9kTmFtZSAoa2V5LCBpc09wZW5BcGkpIHtcbiAgaWYgKGlzT3BlbkFwaSAmJiBhcGx1c1N0YXRpYy5vcGVuQVBJcy5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgIGtleSA9ICdfJyArIGtleTtcbiAgfVxuICByZXR1cm4ga2V5O1xufVxuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gdGFza1xuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc1Rhc2sgPSBmdW5jdGlvbih0YXNrLCBvcHRzLCBjYWxsYmFjaykge1xuICB2YXIgaXNPcGVuQXBpID0gISFvcHRzLmlzT3BlbkFwaTtcbiAgdmFyIGFjdGlvbiA9IHRhc2sgPyB0YXNrLmFjdGlvbiA6ICcnO1xuICB2YXIgYXJncyA9IHRhc2sgPyB0YXNrLmFyZ3VtZW50cyA6ICcnO1xuXG4gIHZhciByZXN1bHQgPSBmaWx0ZXJUYXNrKHRhc2spO1xuICBpZiAoIXJlc3VsdCkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgY29udGV4dCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHsgLy8g56Gu5L+d5p+Q5Liq5Lu75Yqh5omn6KGM5aSx6LSl5LiN5Lya5b2x5ZON5YW25a6D5Lu75YqhXG4gICAgaWYgKGFjdGlvbiAmJiBhcmdzICYmIHV0aWxBcnJheS5pc0FycmF5KGFyZ3MpKSB7XG4gICAgICB2YXIgYSA9IGFjdGlvbi5zcGxpdCgnLicpO1xuICAgICAgdmFyIG9iaiA9IGNvbnRleHQ7XG4gICAgICB2YXIgX2ZuID0gY29udGV4dDtcbiAgICAgIHZhciBtZXRob2ROYW1lO1xuICAgICAgaWYgKGEubGVuZ3RoID09PSAzKSB7XG4gICAgICAgIG9iaiA9IGNvbnRleHRbYVswXV1bYVsxXV0gfHwge307XG4gICAgICAgIG1ldGhvZE5hbWUgPSBnZXRNZXRob2ROYW1lKGFbMl0sIGlzT3BlbkFwaSk7XG4gICAgICAgIF9mbiA9IG9ialttZXRob2ROYW1lXSA/IG9ialttZXRob2ROYW1lXSA6ICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGEubGVuZ3RoKSB7XG4gICAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYS5zaGlmdCgpLCBpc09wZW5BcGkpO1xuICAgICAgICAgIF9mbiA9IG9iaiA9IG9ialttZXRob2ROYW1lXTtcbiAgICAgICAgICBpZiAoIW9iaikgeyAvLyDpnZ7ms5UgYWN0aW9uXG4gICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgICAgICAgICAgY2FsbGJhY2sodGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXNGdW5jdGlvbihfZm4pKSB7XG4gICAgICAgIF9mbi5hcHBseShvYmosIGFyZ3MpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3VsdCA9PT0gJ1NUQVJUJykge1xuICAgICAgICBwcm9jZXNzSG9sZEdvbGRsb2dRdWV1ZShvcHRzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZVxuICAgIC8vIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzVGFzayA9IHByb2Nlc3NUYXNrO1xuXG52YXIgZ2V0Rm9ybWF0UXVldWUgPSBmdW5jdGlvbiAocXVldWUsIHR5cGUpIHtcbiAgdmFyIHF1ZXVlTWFwID0ge1xuICAgIHN1YnNjcmliZU13Q2hhbmdlUXVldWU6IFtdLFxuICAgIHN1YnNjcmliZU1ldGFRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlUXVldWU6IFtdLFxuICAgIG1ldGFRdWV1ZTogW10sXG4gICAgb3RoZXJzUXVldWU6IFtdXG4gIH07XG5cbiAgdmFyIHEgPSBbXTtcbiAgdmFyIHRhc2sgPSB7fTtcbiAgd2hpbGUgKHRhc2sgPSBxdWV1ZS5zaGlmdCgpKSB7IC8vIOS+neasoeaJp+ihjCB3aW5kb3cuYXBsdXNfcXVldWUg5Lit55qE5Lu75YqhXG4gICAgdHJ5IHtcbiAgICAgIHZhciBhYyA9IHRhc2suYWN0aW9uO1xuICAgICAgdmFyIGtleSA9IHRhc2suYXJndW1lbnRzWzBdO1xuICAgICAgaWYgKC9zdWJzY3JpYmUvLnRlc3QoYWMpKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdzZXRNZXRhSW5mbycpIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLk1XX0NIQU5HRV9QViB8fCBrZXkgPT09IGFwbHVzU3RhdGljLk1XX0NIQU5HRV9ISkxKKSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoL01ldGFJbmZvLy50ZXN0KGFjKSkge1xuICAgICAgICBxdWV1ZU1hcC5tZXRhUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdWxvZygpLncoZSk7XG4gICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAvLyAgIG1zZzogZVxuICAgICAgLy8gfSk7XG4gICAgICBxdWV1ZU1hcC5vdGhlcnNRdWV1ZS5wdXNoKHRhc2spO1xuICAgIH1cbiAgfVxuICB2YXIgZm9ybWF0UXVldWU7XG4gIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG4gICAgZm9ybWF0UXVldWUgPSBxdWV1ZU1hcFt0eXBlXTtcbiAgICBxdWV1ZU1hcFt0eXBlXSA9IFtdO1xuICB9XG4gIHEgPSBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLmNvbmNhdChxdWV1ZU1hcC5tZXRhUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlUXVldWUpO1xuICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG4gIHJldHVybiB7XG4gICAgcXVldWU6IHEsXG4gICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG4gIH07XG59O1xuZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfcXVldWUvYWN0aW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9pbml0L2luaXRMb2FkX2Jhc2UuanNcbiAqIOWIneWni+WMluWfuuehgOaooeWdl++8jOS4jeiDveebtOaOpeS9v+eUqO+8jOmcgOimgemAmui/h2luaXRMb2FkX3BjLmpz5oiWaW5pdExvYWRfd2FwLmpz562J5YW35L2T55qE5Zy65pmv5qih5Z2X6LCD55SoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEBhdXRob3Igaml6aGEud3lqIEBibG9nIGh0dHA6Ly9vbGRqLm5ldFxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcblxudmFyIFF1ZXVlID0gQmFzZS5leHRlbmQoe1xuICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG4gICAgdGhpcy5sZW5ndGgrKztcbiAgICBhY3Rpb24ucHJvY2Vzc1Rhc2sodGFzaywgdGhpcy5vcHRzKTsgIFxuICB9LFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHByb2Nlc3NBcGx1c1F1ZXVlOiBmdW5jdGlvbiAocXVldWVOYW1lKSB7XG4gICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgcXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUocXVldWVOYW1lKTtcbiAgICAgIGFjdGlvbi5wcm9jZXNzR29sZGxvZ1F1ZXVlKHF1ZSwgb3B0cyk7XG4gICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG4gICAgICAgIG9wdHM6IG9wdHMsIFxuICAgICAgICBzdGFydExlbmd0aDogcXVlLmxlbmd0aCxcbiAgICAgICAgbGVuZ3RoOiAwXG4gICAgICB9KSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbXMge1N0cmluZ30gdHlwZVxuICAgICAqL1xuICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1c19jb25maWcgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWc7XG4gICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXG4gICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKEFQTFVTX1FVRVVFKTtcblxuICAgICAgaWYgKEFQTFVTX1FVRVVFID09PSAnYXBsdXNfcXVldWUnKSB7XG4gICAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoJ2dvbGRsb2dfcXVldWUnKTtcbiAgICAgIH1cbiAgICAgIGFjdGlvbi5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUoQVBMVVNfUVVFVUUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hcGx1c19xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlj4vnm5/kupHmnaHku7bkuIvnmoToh6rliqjkuovku7bmj5Lku7YgICAgIFxuICogXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqIFxuICogQXV0aG9yOiBcbiAqICAgIOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBGZXRjaENvbmZpZyA9IHJlcXVpcmUoJy4vbGliX21pbml2dC9mZXRjaENvbmZpZycpO1xudmFyIHV0aWxHUSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR1EnKTtcbnZhciBNSU5JX1ZUX0NPTkZJR19GT1JNQVQgPSAnTWluaVZ0Q29uZmlnRm9ybWF0JztcbnZhciB1dGlsVlQgPSByZXF1aXJlKCcuL2xpYl9taW5pdnQvdXRpbFZUJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbmZ1bmN0aW9uIGF1dG9UcmFja2VyICgpIHtcbiAgdmFyIHJiX2NvbmZpZywgcGRyX2NvbmZpZywgc2hhcmVfY29uZmlnO1xuICAvLyB2YXIgcHJlZml4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUpO1xuICB2YXIgX2hhc1RyYWNrZWQgPSBmYWxzZTtcbiAgdmFyIF9jdXJyZW50UGFnZSA9IHtcbiAgICB0czogRGF0ZS5ub3coKVxuICB9O1xuICB2YXIgY291bnQgPSB7XG4gICAgJ29uUHVsbERvd25SZWZyZXNoJzogMCxcbiAgICAnb25TaGFyZVRpbWVsaW5lJzogMCxcbiAgICAnb25SZWFjaEJvdHRvbSc6IDAsXG4gICAgJ29uU2hhcmVBcHBNZXNzYWdlJzogMCxcbiAgICAnb25DbGljayc6IDBcbiAgfTtcblxuICBmdW5jdGlvbiBldmVudEhhbmRsZSAoKSB7XG4gICAgdmFyIGV2ZW50TmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDogJyc7XG4gICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICB2YXIgY3VycmVudFBhZ2UgPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICAgIC8vIHZhciBwO1xuICAgIFxuICAgIHN3aXRjaCAoZXZlbnROYW1lKSB7XG4gICAgY2FzZSAnb25QdWxsRG93blJlZnJlc2gnOlxuICAgICAgY291bnQub25QdWxsRG93blJlZnJlc2ggKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtwZHJfY29uZmlnLmxvZ2tleSB8fCAnJCRfcHVsbF9kb3duX3JlZnJlc2gnLCAnQ0xLJywge1xuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG4gICAgICAgICAgY291bnQ6IGNvdW50Lm9uUHVsbERvd25SZWZyZXNoXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uUmVhY2hCb3R0b20nOlxuICAgICAgY291bnQub25SZWFjaEJvdHRvbSArPSAxO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgIGFyZ3VtZW50czogW3JiX2NvbmZpZy5sb2drZXkgfHwgJyQkX3JlYWNoX2JvdHRvbScsICdDTEsnLCB7XG4gICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcbiAgICAgICAgICBjb3VudDogY291bnQub25SZWFjaEJvdHRvbVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblNoYXJlQXBwTWVzc2FnZSc6XG4gICAgICBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSArPSAxO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgIGFyZ3VtZW50czogW3NoYXJlX2NvbmZpZy5sb2drZXkgfHwgJyQkX3NoYXJlJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblNoYXJlQXBwTWVzc2FnZSxcbiAgICAgICAgICBzaGFyZV90eXBlOiAxXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uU2hhcmVUaW1lbGluZSc6IFxuICAgICAgY291bnQub25TaGFyZVRpbWVsaW5lICs9IDE7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbc2hhcmVfY29uZmlnLmxvZ2tleSB8fCAnJCRfc2hhcmUnLCAnQ0xLJywge1xuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG4gICAgICAgICAgY291bnQ6IGNvdW50Lm9uU2hhcmVUaW1lbGluZSxcbiAgICAgICAgICBzaGFyZV90eXBlOiAwXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uUGFnZVNob3cnOlxuICAgICAgaWYgKHBhZ2VJbnN0YW5jZS5yb3V0ZSAmJiAhX2hhc1RyYWNrZWQpIHtcbiAgICAgICAgX2N1cnJlbnRQYWdlID0ge1xuICAgICAgICAgIHBhdGg6IHBhZ2VJbnN0YW5jZS5yb3V0ZSxcbiAgICAgICAgICBwYWdlX25hbWU6IHBhZ2VJbnN0YW5jZS5yb3V0ZSxcbiAgICAgICAgfTtcbiAgICAgICAgX2N1cnJlbnRQYWdlLnRzID0gRGF0ZS5ub3coKTtcbiAgICAgICAgX2hhc1RyYWNrZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25QYWdlSGlkZSc6ICBcbiAgICAgIGlmIChfaGFzVHJhY2tlZCkge1xuICAgICAgICB2YXIgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gX2N1cnJlbnRQYWdlLnRzIHx8IDA7XG4gICAgICAgIC8vIOWKoOi9veaXtuacuueahOmXrumimO+8jOaUvuWcqOatpOWkhOWPlnJlZmVycmVy55u45q+U5LqObWluaWFwcF9kYXRh5YeG56GuXG4gICAgICAgIHZhciByZWZlcnJlciA9IG1pbmkuZ2V0UmVmZXJyZXJQYWdlKCkucm91dGUgfHwgbWluaS5nZXRSZWZlcnJlclBhZ2UoKS5pcyB8fCAnLSc7XG4gICAgICAgIHZhciBleHRyYVBhcmFtcyA9IChQYWdlTWFuYWdlci5nZXRQYWdlTmFtZSgpIHx8IHt9KS5leHRyYVBhcmFtcztcbiAgICAgICAgdmFyIHB2YXJncyA9IE9iamVjdC5hc3NpZ24oe30sIGV4dHJhUGFyYW1zLCB7XG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgIHBhdGg6IF9jdXJyZW50UGFnZS5wYXRoLFxuICAgICAgICAgIHBhZ2VfbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBfY3VycmVudFBhZ2UucGFnZV9uYW1lLFxuICAgICAgICAgIHBhZ2Vfc3RhcnQ6IF9jdXJyZW50UGFnZS50cyxcbiAgICAgICAgICBpc01pbmk6IHRydWUsXG4gICAgICAgICAgX3BhZ2VfYXV0b19pZDogYXBsdXNTdGF0aWMuUEFHRV9FTkQsXG4gICAgICAgICAgX3BhZ2VfYXV0b19wdjogdHJ1ZSxcbiAgICAgICAgICByZWZlcnJlcjogcmVmZXJyZXIsXG4gICAgICAgIH0pO1xuICAgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246IFwiYXBsdXMuc2VuZFBWXCIsXG4gICAgICAgICAgYXJndW1lbnRzOiBbeyBpc19hdXRvOiB0cnVlLCB0cmFja190eXBlOiBcIjFcIiB9LCBwdmFyZ3NdXG4gICAgICAgIH0pO1xuICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuICAgICAgICBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuICAgIHJiX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdyYl9jb25maWcnKTtcbiAgICBwZHJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3Bkcl9jb25maWcnKTtcbiAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcbiAgICBpZiAoIWNvZGUgfHwgIWFwcEluZm9JZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7IFxuICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG4gICAgICB2YXIgcmVnID0gL1tbYS16fFxcLXxcXF98MC05XFwuXStbYS16fFxcLXxcXF98MC05XSg6XFxkKik/LztcbiAgICAgIHZhciB2ZXJpZnlfaG9zdCA9IGFwaV9ob3N0Lm1hdGNoKHJlZyk7XG4gICAgICBcbiAgICAgIGlmICh2ZXJpZnlfaG9zdCAmJiB2ZXJpZnlfaG9zdFswXSkge1xuICAgICAgICB2YXIgcHJvdG9jYWwgPSBhcGx1c1N0YXRpYy5IVFRQUztcbiAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcbiAgICAgICAgICBwcm90b2NhbCA9ICdodHRwOic7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcbiAgICAgICAgbWluaS5yZXF1ZXN0KHZlcmlmeVVybCwge30sIGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcbiAgICAgICAgICAgIHZhciBkZWJ1Z0lkID0gKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSAmJiByZXNwLmRhdGEuZGF0YS5kZWJ1Z0lkKSB8fCAnJztcbiAgICAgICAgICAgIGlmKGRlYnVnSWQpe1xuICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0lkOmRlYnVnSWRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcbiAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG4gICAgICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBKU09OLnBhcnNlKGNmZ0RhdGEpIHx8IHt9O1xuICAgICAgICAgICAgICB1dGlsVlQudnQyYXV0b0V2ZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdWxvZygpLncoJ2ZldGNoIHJlYWwtdGltZSB2aXN1YWxpemF0aW9uIHZlcmlmaWNhdGlvbiBmYWlsZWQsIGVyciBtc2c6JyArIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIFxuICAgIH1cbiAgfVxuXG4gIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBnZXRDb25maWcoKTtcbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkxvYWQnLCBmdW5jdGlvbihvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGNvZGUgPSBQYWdlTWFuYWdlci5nZXRWVFJlYWx0aW1lQ29kZSgpO1xuICAgICAgICBpZiAoY29kZSkge1xuICAgICAgICAgIHZhciBhcHBJbmZvSWQgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSW5mb0lkJyk7XG4gICAgICAgICAgZmV0Y2hWZXJpZnlDb25maWcoY29kZSwgYXBwSW5mb0lkKTtcbiAgICAgICAgfSBlbHNlIHsgICAgICAgICAgXG4gICAgICAgICAgISFhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpICYmIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHVsb2coKS53KCdmZXRjaCByZWFsLXRpbWUgdmlzdWFsaXphdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkLCBlcnJtc2c6JyArIGUpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICB2YXIgaXNBdXRvID0gY3R4LmFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgIT09ICdNQU4nO1xuICAgICAgaXNBdXRvICYmIGV2ZW50SGFuZGxlKCdvblBhZ2VTaG93Jyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvbkhpZGUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG4gICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZUhpZGUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUHVsbERvd25SZWZyZXNoJywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBldmVudEhhbmRsZSgnb25QdWxsRG93blJlZnJlc2gnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uUmVhY2hCb3R0b20nLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblJlYWNoQm90dG9tJyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlQXBwTWVzc2FnZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVBcHBNZXNzYWdlJyk7XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNoYXJlVGltZWxpbmUnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblNoYXJlVGltZWxpbmUnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICghIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfRk9STUFULCBmdW5jdGlvbihvcHRpb25zKXtcbiAgICAgIHZhciBwYWdlQ29uZmlnID0gb3B0aW9ucy5wYWdlQ29uZmlnO1xuICAgICAgaWYgKHBhZ2VDb25maWcgJiYgcGFnZUNvbmZpZy5lbmFibGVkKSB7XG4gICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBwYWdlQ29uZmlnO1xuICAgICAgfVxuICAgIH1dKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIGF1dG9UcmFja2VyKCk7XG4gICAgICBpZiAoIWFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQpe1xuICAgICAgICBhcGx1cy5fYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0ID0gMTtcbiAgICAgICAgdmFyIGZjID0gRmV0Y2hDb25maWcuY3JlYXRlKCk7XG4gICAgICAgIGZjLnJ1bigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA5N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWPr+inhuWMluWfi+eCuemFjee9ruS/oeaBr+ivt+axgiBcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBBYXJvbnzpkrDmmK0gPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIHV0aWxDYXRjaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQ2F0Y2gnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIG1pbml2dFN0b3JlID0gcmVxdWlyZSgnQHV0aWxzL21pbml2dFN0b3JlJyk7XG4vLyB2YXIgdXRpbFVybCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsVXJsJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgTUlOSV9WVF9DT05GSUdfQkFDSyA9ICdNaW5pVnRDb25maWdCYWNrJztcbnZhciBNSU5JX1ZUX0NPTkZJR19GT1JNQVQgPSAnTWluaVZ0Q29uZmlnRm9ybWF0JztcblxudmFyIEdPTERMT0dfUFVCTElTSCA9IGFwbHVzU3RhdGljLlBVQkxJU0g7XG4vLyBwcm9kOiBodHRwczovL2FsaWR0LmFsaWNkbi5jb20vYWxpbG9nL3Z0ZGFpbHkvJHtjb21wb25lbnRJRH0uanNvblxuLy8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0L2ExejFkMV8xMjI3OTkxNC5qc29uXG4vLyB2YXIgSE9TVCA9ICcvL2cuYWxpY2RuLmNvbS9hbGlsb2cnO1xuLy8gdmFyIEhPU1QgPSAnLy9kLmFsaWNkbi5jb20vYWxpbG9nJztcblxuLy8gZnVuY3Rpb24gaXNEYWlseSAoKSB7XG4vLyAgIHZhciBycyA9IGZhbHNlO1xuLy8gICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuLy8gICAgIHJldHVybiB0cnVlO1xuLy8gICB9XG4vLyAgIHJldHVybiBycztcbi8vIH1cblxubW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh1dGlsRGFzaC5hc3NpZ24obWluaXZ0U3RvcmUsIHtcblxuICBwYXRobmFtZTogJycsXG5cbiAgcGFnZUNvbmZpZzoge30sXG5cbiAgb3JpZ2luU3BtOiB7XG4gICAgc3BtQTogJycsXG4gICAgc3BtQjogJydcbiAgfSxcblxuICB1cGRhdGVDZmdMczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICBfc2VsZi5mZXRjaEZyb21DZG4oKTtcbiAgICB9LDEwMDApO1xuICB9LFxuXG4gIGZldGNoRnJvbUNkbjogZnVuY3Rpb24gKCkge1xuICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHBhdGggPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpO1xuICAgIGlmICghcGF0aCkgcmV0dXJuO1xuICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG4gICAgYXBsdXMucmVxdWVzdFZUQ29uZmlnKHBhdGgsIGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIHZhciBjZmdEYXRhID0gcmVzcC5kYXRhO1xuICAgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpIC0gX2JlZ2luTG9hZDtcbiAgICAgIGlmIChjZmdEYXRhKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHR5cGVvZiBjZmdEYXRhID09PSAnb2JqZWN0JyA/IGNmZ0RhdGEgOiBKU09OLnBhcnNlKGNmZ0RhdGEpO1xuICAgICAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cykge1xuICAgICAgICAgICAgZWFjaChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cywgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgdi5zZWxlY3RvciA9IGRlY29kZVVSSUNvbXBvbmVudCh2LnNlbGVjdG9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBfc2VsZi5zZXRDb25maWdJbnRvTHMoYXBsdXMuX2FwbHVzX3Z0X2NmZyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0ge1xuICAgICAgICAgICAgZW5hYmxlZDogZmFsc2VcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6YXBsdXMuX2FwbHVzX3Z0X2NmZywgZW5hYmxlOiAwfV0pO1xuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcgJiYgYXBsdXMuX2FwbHVzX3Z0X2NmZy5lbmFibGVkKSB7XG4gICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7ICBcbiAgICAgIH1cbiAgICAgIHV0aWxDYXRjaC5jYXRjaEV4Y2VwdGlvbignZ2V0VHJhY2tlckNmZycsIGVycm9yLCB7XG4gICAgICAgIG1zZzogcGF0aFxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgdGltZW91dDogNTAwMFxuICAgIH0pO1xuICB9LFxuXG4gIGdldE1pbmlWdERhdGE6IGZ1bmN0aW9uKGNkbnBhdGgsIHByZVVybCwgZnJvbUNETil7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IDA7XG4gICAgaWYgKGNkbnBhdGgpIHtcbiAgICAgIHZhciB2dENvbmZpZyA9IHRoaXMuZmV0Y2hGcm9tTFMoY2RucGF0aCk7XG4gICAgICBpZih0eXBlb2YgdnRDb25maWcgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdHJ5e1xuICAgICAgICAgIHZ0Q29uZmlnID0gSlNPTi5wYXJzZSh2dENvbmZpZyk7XG4gICAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICAgIHZ0Q29uZmlnID0ge307XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHZ0Q29uZmlnICYmIHZ0Q29uZmlnLmVuYWJsZWQpIHtcbiAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHZ0Q29uZmlnO1xuICAgICAgfVxuICAgICAgaWYoICFmcm9tQ0ROKSB7XG4gICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzp2dENvbmZpZywgZW5hYmxlOiAwfV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5mZXRjaEZyb21DZG4oY2RucGF0aCwgcHJlVXJsKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0X2RhaWx5L2ExejFkMV8xMjI3OTkxNC5qc29uXG4gIHN5bmNNaW5pVnREYXRhOiBmdW5jdGlvbigpe1xuICAgIC8vc3Vic2NyaWJlICB3cy5yZWFkeVxuICAgIHZhciBjZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcbiAgICB0aGlzLmdldE1pbmlWdERhdGEoY2RucGF0aCwgJycsIHRydWUpO1xuICB9LFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCl7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBcbiAgICB2YXIgR09MRExPR19TVUJTQ1JJQkUgPSBhcGx1c1N0YXRpYy5TVUJTQ1JJQkU7XG4gICAgLy90aGlzIGV2ZW50IGZyb20gTFMgb3IgZnJvbSBXUyB0byBnZXQgY29uZmlnXG4gICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfQkFDSywgZnVuY3Rpb24gKG9yaURhdGFzKSB7XG4gICAgICBpZighb3JpRGF0YXMuZW5hYmxlKSB7XG4gICAgICAgIF9zZWxmLnBhZ2VDb25maWcgPSBvcmlEYXRhcy5wYWdlQ29uZmlnO1xuICAgICAgfVxuICAgICAgLy90aGlzIGV2ZW50IHRvIHVzZTtcbiAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIHtcbiAgICAgICAgcGFnZUNvbmZpZzogX3NlbGYucGFnZUNvbmZpZyxcbiAgICAgICAgb3JpZ2luU3BtOiBfc2VsZi5vcmlnaW5TcG1cbiAgICAgIH1dKTtcbiAgICAgICFvcmlEYXRhcy5lbmFibGUgJiYgX3NlbGYuc2V0Q29uZmlnSW50b0xzKF9zZWxmLnBhZ2VDb25maWcpO1xuICAgIH1dKTtcbiAgICBfc2VsZi5zeW5jTWluaVZ0RGF0YSgpO1xuICB9LFxuXG4gIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaW5pdCgpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59KSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX21pbml2dC9mZXRjaENvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbi8qKlxuICogYWxpbG9nL3Mvc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanNcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdRID0gcmVxdWlyZSgnLi91dGlsR1EnKTtcblxuZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgZXJyb3IpIHtcbiAgdmFyIG1lc3NhZ2UgPSBmaWxlbmFtZTtcbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ29iamVjdCcgJiYgZXJyb3IubWVzc2FnZSkge1xuICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJ18nICsgZXJyb3IubWVzc2FnZTtcbiAgfVxuICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoJ2FwbHVzLl9hcGx1c19jcGx1Z2luX20uZG9fdHJhY2tlcl9qc2Vycm9yJywgW3tcbiAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgIGVycm9yOiBKU09OLnN0cmluZ2lmeShlcnJvciksXG4gICAgZmlsZW5hbWU6IGZpbGVuYW1lXG4gIH1dKTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbENhdGNoLmpzXG4vLyBtb2R1bGUgaWQgPSA5OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiogZGVzY3JpcHRpb25cbipcbiogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuKlxuKiBBdXRob3JzOlxuKiAgIEFhcm9uIHwg6ZKw5pitIDxjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20+XG4qL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscy91dGlsJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbHNNaW5pdnRDb25maWdLZXk6ICdBUExVU19NSU5JX0NPTkZJRycsXG5cbiAgLyoqXG4gICAqIOWFrOWFseaooeadv+WcuuaZr++8jOWmguaenHR1cm5vbj09PScxJyDmi4nlj5Z2YWx1ZeWGheeahOWGheWuuVxuICAgKiBtZXRhSW5mbzoge1xuICAgKiAgJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCc6IHtcbiAgICogICAgJ3ZhbHVlJzogJ3BhQ3dabEcyV3Y3bGxoaG0nLFxuICAgKiAgICAndHVybm9uJzogJzAnIG9yICcxJyAgIFxuICAgKiAgfVxuICAgKiB9XG4gICAqL1xuICBnZXRNaW5pVnRUcGxDZG5QYXRoOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy10cmFjay1jb25maWctaWQnKTtcbiAgICB2YXIgdHVybm9uID0gYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyAmJiBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvLnR1cm5vbjtcbiAgICB2YXIgdmFsdWUgPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udmFsdWU7XG4gICAgaWYgKHR1cm5vbiA9PT0gJzEnICYmIHZhbHVlKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiAnJztcbiAgfSxcblxuICBnZXRWdENvbmZpZ1BhdGg6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ZW1wbGF0ZVZhbCA9IHRoaXMuZ2V0TWluaVZ0VHBsQ2RuUGF0aCgpO1xuICAgIHZhciBzcG1BQiA9IFtdO1xuICAgIHZhciBzcG1JZDtcbiAgICB2YXIgYXBwa2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcbiAgICBpZiAoYXBwa2V5KSB7XG4gICAgICBzcG1JZCA9IGFwcGtleTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHNwbUlkKSB7XG4gICAgICBzcG1BQiA9IHNwbUlkLnNwbGl0KCcuJyk7XG4gICAgfSBcbiAgICAvLyByZW1vdmUgZWxzZSBsb2dpYyBpbnNpZGUgd2VidnRTdG9yZSwgYmVjYXVzZSBtaW5pX2Nsb3VkIGRvbnQgc3VwcG9ydCBzcG1cbiAgICBpZiAoc3BtQUIubGVuZ3RoID09PSAyKSB7XG4gICAgICB0aGlzLm9yaWdpblNwbSA9IHtcbiAgICAgICAgc3BtQTogc3BtQUJbMF0sXG4gICAgICAgIHNwbUI6IHNwbUFCWzFdXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoc3BtQUIubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLm9yaWdpblNwbS5zcG1BID0gc3BtQUJbMF07XG4gICAgfVxuXG4gICAgaWYgKHRlbXBsYXRlVmFsKSB7XG4gICAgICByZXR1cm4gdGVtcGxhdGVWYWw7XG4gICAgfVxuICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHJldHVybiBzcG1BQi5qb2luKCdfJyk7XG4gICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcbiAgICAgIHJldHVybiBzcG1BQlswXTtcbiAgICB9XG4gIH0sXG5cbiAgZmV0Y2hGcm9tTFM6IGZ1bmN0aW9uIChjZG5wYXRoKSB7XG4gICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcbiAgICAgIHRoaXMuY2RucGF0aCA9IGNkbnBhdGggfHwgdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG4gICAgfVxuICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGN0eC5nZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgY2RucGF0aCkpIHx8IHt9O1xuICB9LFxuXG4gIHNldENvbmZpZ0ludG9MczogZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgaWYgKCF0aGlzLmNkbnBhdGgpIHtcbiAgICAgIHRoaXMuY2RucGF0aCA9IHRoaXMuZ2V0VnRDb25maWdQYXRoKCk7XG4gICAgfVxuICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICBjdHguc2V0U3RvcmFnZVN5bmModGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcbiAgICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyB0aGlzLmNkbnBhdGgsIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb25maWcpKSk7XG4gIH1cblxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9taW5pdnRTdG9yZS5qc1xuLy8gbW9kdWxlIGlkID0gMTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB1dGlsVlQuanNcbiAqIOWPr+inhuWMlumFjee9riDop6PmnpDphY3nva7kv6Hmga/kuLroh6rliqjngrnlh7vjgIHoh6rliqjmm53lhYnjgIHoh6rliqhwduWFrOWFseWHveaVsFxuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdXRpbEFycmF5ICA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG5cbmV4cG9ydHMuZ2V0Q3VycmVudFBhZ2VWVENmZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdnRDZmcgPSBhcGx1cy5fYXBsdXNfdnRfY2ZnO1xuICBpZiAoIXZ0Q2ZnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXRoID0gUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2dENmZy5wYWdlcy5sZW5ndGg7IGkrKyApe1xuICAgIHZhciBwYWdlQ29uZmlnID0gdnRDZmcucGFnZXNbaV07XG4gICAgaWYgKHBhZ2VDb25maWcubWF0Y2hVcmwgPT09IHBhdGgpIHtcbiAgICAgIHJldHVybiBwYWdlQ29uZmlnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybjtcbn07XG5cbmZ1bmN0aW9uIG1lcmdlQXV0b0NmZ3MgKGNmZzEsY2ZnMil7XG4gIGNmZzEgPSB1dGlsQXJyYXkuaXNBcnJheShjZmcxKT9jZmcxIDogW107XG4gIGNmZzIgPSB1dGlsQXJyYXkuaXNBcnJheShjZmcyKT9jZmcyIDogW107XG4gIHZhciB0b3RhbEF1dG9DZmdzID0gW10uY29uY2F0KGNmZzIsY2ZnMSk7XG4gIGZ1bmN0aW9uIGdldEluZGV4IChpdGVtLGFycil7XG4gICAgdmFyIGluZGV4ID0gLTE7XG4gICAgZm9yKHZhciBpID0gMDsgaTxhcnIubGVuZ3RoOyBpKyspe1xuICAgICAgdmFyIGN1cnJlbnQgPSBhcnJbaV07XG4gICAgICBpZihjdXJyZW50LmNzc1NlbGVjdG9yPT09aXRlbS5jc3NTZWxlY3RvciYmY3VycmVudC5sb2drZXk9PT1pdGVtLmxvZ2tleSl7XG4gICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBpbmRleDtcbiAgfVxuICB2YXIgZmluYWxBdXRvQ2ZncyA9IHRvdGFsQXV0b0NmZ3MuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0saW5kZXgsYXJyYXkpe1xuICAgIHJldHVybiBnZXRJbmRleChpdGVtLGFycmF5KSA9PT0gaW5kZXg7XG4gIH0pO1xuICByZXR1cm4gZmluYWxBdXRvQ2Zncztcbn1cbmZ1bmN0aW9uIHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGNvbmZpZ3Mpe1xuICBpZiggdXRpbEFycmF5LmlzQXJyYXkoY29uZmlncykpe1xuICAgIHJldHVybiBjb25maWdzLmZpbHRlcihmdW5jdGlvbihjb25maWcpe1xuICAgICAgcmV0dXJuIGNvbmZpZy5fdnQgPT09IHZvaWQgMDtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gW107XG59XG5mdW5jdGlvbiBmb3JtYXRTZWxlY3RvcihzZWxlY3Rvcil7XG4gIGlmKC9eWy4jXS8udGVzdChzZWxlY3Rvcikpe1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfWVsc2V7XG4gICAgcmV0dXJuIHNlbGVjdG9yID8gJy4nICsgc2VsZWN0b3IgOiAnJztcbiAgfVxufVxuZnVuY3Rpb24gZ2V0VHJhY2tDb25maWdCeVBhdGgocGF0aCl7XG4gIHZhciBwYWdlSW5zdGFuY2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gIHZhciBmaW5hbFBhdGggPSBwYXRoIHx8IHBhZ2VJbnN0YW5jZS5yb3V0ZTtcbiAgdmFyIGZ1bGxMb3dDb2RlQ29uZmlnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZyB8fCBhcGx1cy5fYXBsdXNfdHJhY2tpbmdfY2ZnO1xuICB2YXIgYXV0b0V4cEFyciA9IFtdO1xuICB2YXIgYXV0b0Nsa0FyciA9IFtdO1xuICBpZiAoZnVsbExvd0NvZGVDb25maWcgJiYgZnVsbExvd0NvZGVDb25maWcucGFnZXMpe1xuICAgIGVhY2goZnVsbExvd0NvZGVDb25maWcucGFnZXMsIGZ1bmN0aW9uKHBjKSB7XG4gICAgICBhcGx1cy5zZXRQYWdlTmFtZSh7IHBhZ2VOYW1lOiBwYy5zcG1CLCBleHRyYVBhcmFtczogcGMuZXh0cmFQYXJhbXMgfSwgcGMubWF0Y2hVcmwpO1xuICAgICAgaWYgKHBjLm1hdGNoVXJsID09PSBmaW5hbFBhdGgpIHtcbiAgICAgICAgZWFjaChmdWxsTG93Q29kZUNvbmZpZy5wb2ludHMsIGZ1bmN0aW9uKHApe1xuICAgICAgICAgIGlmIChwYy5zcG1CID09PSBwLnNwbUIpIHtcbiAgICAgICAgICAgIGlmIChwLnRyYWNrZXJUeXBlID09PSBcImV4cG9zdXJlXCIpIHsgXG4gICAgICAgICAgICAgIGF1dG9FeHBBcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogZm9ybWF0U2VsZWN0b3IocC5zZWxlY3RvciksXG4gICAgICAgICAgICAgICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiBwLnBvc2l0aW9uU2VsZWN0b3IsXG4gICAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuICAgICAgICAgICAgICAgICdwcm9wcyc6IHAucHJvcHMsXG4gICAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG4gICAgICAgICAgICAgICAgJ3NwbUMnOiBwLnNwbUMsXG4gICAgICAgICAgICAgICAgJ3NwbUQnOiBwLnNwbUQsXG4gICAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG4gICAgICAgICAgICAgICAgJ192dCc6IHBjLnRlbXBsYXRlIHx8IHBjLnN0ZElkID8gMiA6IDFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhdXRvQ2xrQXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICdjc3NTZWxlY3Rvcic6IGZvcm1hdFNlbGVjdG9yKHAuc2VsZWN0b3IpLFxuICAgICAgICAgICAgICAgICdsb2drZXknOiBwLmxvZ2tleSxcbiAgICAgICAgICAgICAgICAncHJvcHMnOiBwLnByb3BzLCBcbiAgICAgICAgICAgICAgICAnc3BtQic6IHAuc3BtQixcbiAgICAgICAgICAgICAgICAnc3BtQyc6IHAuc3BtQyxcbiAgICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcbiAgICAgICAgICAgICAgICAnY3VzdG9tQXJncyc6IHAuY3VzdG9tQXJncyxcbiAgICAgICAgICAgICAgICAnX3Z0JzogcGMudGVtcGxhdGUgfHwgcGMuc3RkSWQgPyAyIDogMVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICBcbiAgICAgICAgaWYgKGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEgJiYgdHlwZW9mIGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScsIGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEpO1xuICAgICAgICB9XG4gIFxuICAgICAgICBpZiAoZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSAmJiB0eXBlb2YgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtY3B2ZGF0YScsIGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9wdmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9ICAgICAgXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBFWFA6IGF1dG9FeHBBcnIsXG4gICAgQ0xLOiBhdXRvQ2xrQXJyXG4gIH07XG59O1xuZXhwb3J0cy5nZXRUcmFja0NvbmZpZ0J5UGF0aCA9IGdldFRyYWNrQ29uZmlnQnlQYXRoO1xuZXhwb3J0cy5nZXRUcmFja0NvbmZpZ0J5UG9pbnRDc3NTZWxlY3RvciA9IGZ1bmN0aW9uKGNzc1NlbGVjdG9yLHR5cGUscGF0aCl7XG4gIHZhciB0cmFja0NvbmZpZyA9IGdldFRyYWNrQ29uZmlnQnlQYXRoKHBhdGgpW3R5cGVdIHx8IFtdO1xuICB2YXIgbWF0Y2hlZENvbmZpZyA9IG51bGw7XG4gIGVhY2godHJhY2tDb25maWcsZnVuY3Rpb24oY29uZmlnSXRlbSl7XG4gICAgaWYoY29uZmlnSXRlbS5jc3NTZWxlY3RvciA9PT0gY3NzU2VsZWN0b3Ipe1xuICAgICAgbWF0Y2hlZENvbmZpZyA9IGNvbmZpZ0l0ZW07XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG1hdGNoZWRDb25maWc7XG59O1xuZXhwb3J0cy52dDJhdXRvRXZlbnQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHZ0X2NmZyA9IGFwbHVzLl9hcGx1c192dF9jZmcgfHwgYXBsdXMuX2FwbHVzX3RyYWNraW5nX2NmZztcbiAgaWYgKHZ0X2NmZyAmJiB2dF9jZmcucGFnZXMpe1xuICAgIHZhciBtYXRjaGVkQ29uZmlnID0gZ2V0VHJhY2tDb25maWdCeVBhdGgoKTtcbiAgICB2YXIgb2xkX2F1dG9fZXhwX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpKTtcbiAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnLCBtZXJnZUF1dG9DZmdzKG9sZF9hdXRvX2V4cF9hcnIsbWF0Y2hlZENvbmZpZy5FWFApKTtcbiAgICB2YXIgb2xkX2F1dG9fY2xrX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpKTtcbiAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnLCBtZXJnZUF1dG9DZmdzKG9sZF9hdXRvX2Nsa19hcnIsbWF0Y2hlZENvbmZpZy5DTEspKTtcbiAgfVxufTtcblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvdXRpbFZULmpzXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGFwbHVzIEFQSVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWR1Y2VyID0gcmVxdWlyZSgnQGNvcmUvUmVkdWNlcicpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xuXG4vKipcbiAqIOWwhuWQjue7reeahGluaXTliqjkvZzpg73lgZrmiJDmj5Lku7bvvIznm67liY3lj6rmnIl3aGVyZV90b19zZW5kcHbkuIDpoblcbiAqXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBwbHVnaW5zXG4gKiAgIGNvbnRleHRcbiAqIH1cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFja1xuICpcbiAqL1xuZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcbiAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICByZWR1Y2VyLnJ1bih7XG4gICAgcGx1Z2luczogb3B0cy5wbHVnaW5zLFxuICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuICB9LCB7XG4gICAgY29uZmlnOiB7fSxcbiAgICB1c2VyZGF0YToge30sXG4gICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG4gICAgbWVzc2FnZUZuUXVldWU6IFtdLFxuICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcbiAgfSwgZnVuY3Rpb24gKGN0eCkge1xuICAgIHZhciBtc2dzID0gWydhcGx1c0luaXRDb250ZXh0JywgY3R4XTtcbiAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhjdHgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9hcGx1c2luaXQuanNcbi8vIG1vZHVsZSBpZCA9IDEwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhcGx1c19taW5pX2Jhc2ljXG4gKiDlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnLCBhcGx1c19jb25maWcpIHtcbiAgdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4gIC8vIHJlcXVpcmUoJ0B1dGlscy9kZWJ1ZycpLmlzRGVidWdBcGx1cyh0cnVlKTtcblxuICB2YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG4gIC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbiAgdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuICB1bG9nKCkuc2V0RGVidWcoISEoYXBwQ29uZmlnICYmIHR5cGVvZiBhcHBDb25maWcgPT0gJ29iamVjdCcgJiYgYXBwQ29uZmlnLm1ldGFJbmZvLkRFQlVHKSk7XG4gIHZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbiAgdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuICB2YXIgYXBsdXNpbml0ID0gcmVxdWlyZSgnQGNvcmUvYXBsdXNpbml0Jyk7XG4gIG1pbmkuaW5pdElzVEIoKTtcblxuICBpZiAodHlwZW9mIGFwcENvbmZpZyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoYXBwQ29uZmlnLnNpdGVJZCkge1xuICAgICAgYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zaXRlSWQgPSBhcHBDb25maWcuc2l0ZUlkO1xuICAgIH1cbiAgICBhcGx1c19jb25maWcubWV0YUluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBhcGx1c19jb25maWcubWV0YUluZm8sIGFwcENvbmZpZy5tZXRhSW5mbyk7XG4gIH1cblxuICB2YXIgUlVOTklORyA9ICdydW5uaW5nJztcbiAgdmFyIENPTVBMRVRFID0gJ2NvbXBsZXRlJztcbiAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG5cbiAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cbiAgYXBsdXNpbml0LnJ1bih7XG4gICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG4gICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbmZpZ19wdl9jb250ZXh0ID0ge1xuICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuICAgICAgfTtcbiAgICAgIHZhciBQTFVHSU5TX1BWID0gW107XG4gICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG4gICAgICAgIGlmICh2Lm5hbWUgPT09ICdhcGx1c19sb2dfaW5qZWN0JyAmJiB2LmNvbmZpZyAmJiB2LmNvbmZpZy5wbHVnaW5zKSB7XG4gICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG4gICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb25maWdfcHZfY29udGV4dCwge1xuICAgICAgICBhcGx1c19jb25maWc6IGFwbHVzX2NvbmZpZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgdWxvZygpLnYoJ0FQTFVTIElOSVQgU1VDQ0VTUycpO1xuICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7ZcbiAgICBhcGx1c1N0YXR1c1sxXSA9IENPTVBMRVRFO1xuICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuICB9KTtcblxuICAvLyByZXR1cm4gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRSk7XG4gIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Jhc2ljX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==