/*! 2022-05-31 16:31:02 */
!function(e, t) {
    if ("object" == typeof exports && "object" == typeof module) module.exports = t(); else if ("function" == typeof define && define.amd) define([], t); else {
        var n = t();
        for (var a in n) ("object" == typeof exports ? exports : e)[a] = n[a];
    }
}(this, function() {
    return function(e) {
        function t(a) {
            if (n[a]) return n[a].exports;
            var r = n[a] = {
                exports: {},
                id: a,
                loaded: !1
            };
            return e[a].call(r.exports, r, r.exports, t), r.loaded = !0, r.exports;
        }
        var n = {};
        return t.m = e, t.c = n, t.p = "", t(0);
    }([ function(e, t, n) {
        e.exports = n(1);
    }, function(e, t, n) {
        "use strict";
        n(2).initGlobal(), e.exports = function(e) {
            var t = n(4);
            return n(102)(e, t);
        };
    }, function(e, t, n) {
        "use strict";
        var a, r = n(3), o = r.APLUS, i = r.APLUS_QUEUE, s = r.GOLDLOG, u = r.GOLDLOG_QUEUE, c = !1;
        try {
            window && (a = window, c = !0);
        } catch (e) {
            a = {}, c = !1;
        }
        t.getContext = function() {
            return a;
        }, t.isWeb = function() {
            return window;
        }, t.initGlobal = function(e) {
            a = e ? e : {
                v: 1,
                aplus: {},
                aplus_queue: []
            };
            var t, n;
            if (c) try {
                t = a.aplus || a.goldlog || (a.aplus = {});
                var r = a.goldlog_queue || (a.goldlog_queue = []);
                n = a.aplus_queue || (a.aplus_queue = []), n = r.concat(n);
            } catch (e) {} else t = a.aplus, n = a.aplus_queue;
            return a.aplus = a.goldlog = t, a.aplus_queue = a.goldlog_queue = n, a;
        };
        var l = function(e) {
            if (e === o || e === s) {
                var t = a[o] || a[s];
                return t || (t = a[o] = a[s] = {}), t;
            }
            var n = u, r = i;
            if (e === r || e === n) {
                var c = a[r] || a[n];
                return c || (c = a[r] = a[n] = []), c;
            }
        };
        t.getGlobalValue = l, t.setGlobalValue = function(e, t) {
            a[e] = t;
        };
        var p = function(e) {
            var t;
            try {
                var n = l(o);
                t = n[e];
            } catch (e) {
                t = "";
            } finally {
                return t;
            }
        };
        t.getGoldlogVal = p;
        var f = function(e, t) {
            var n = !1;
            try {
                var a = l(o);
                e && (a[e] = t, n = !0);
            } catch (e) {
                n = !1;
            } finally {
                return n;
            }
        };
        t.setGoldlogVal = f, t.getClientInfo = function() {
            return p("_aplus_client") || {};
        };
    }, function(e, t) {
        var n = "aplus", a = "goldlog", r = n + "_queue", o = a + "_queue", i = "mw_change", s = "MetaInfo", u = "append" + s, c = "set" + s, l = "http", p = "_pubsub", f = "other", g = "2101", d = "2201", _ = "2202", h = "19999", v = "1023", m = "1010", y = 3e4, b = 18e5, S = "ekvs", P = 1e4, A = 1, E = 1, I = 3e3, T = "$$_page_start", C = "$$_page_end", x = "$$_app_start", O = "$$_app_end", M = "aplus_user_profile", w = "imprint", U = "aplus-idtype", k = "aplus-jsbridge-only", L = "aplus-page-config", R = "aplus-skip-apv-rules", N = "aplus-rhost-v", D = "aplus-rhost-g";
        e.exports = {
            PAGE_ENTER: "PAGE_ENTER",
            CURRENT_PAGE_CONFIG: "CURRENT_PAGE_CONFIG",
            _ANONY_ID: "_anony_id",
            _USER_ID: "_user_id",
            DEFAULT_CODE: f,
            OTHER: h,
            EVENT_MAP: {
                "2101": "click",
                "2201": "exposure",
                "2202": "exposure",
                "19999": f,
                "1023": "app_show",
                "1010": "app_hide_or_unload"
            },
            EVENT_ID_MAP: {
                EXP: d,
                IMPEXP: _,
                CLK: g,
                OTHER: h,
                SHOW: v,
                H_OR_U: m
            },
            APLUS: n,
            GOLDLOG: a,
            UNSUBSCRIBE: n + "." + n + p + ".unsubscribe",
            SUBSCRIBE: n + "." + n + p + ".subscribe",
            PUBLISH: n + "." + n + p + ".publish",
            CACHE_PUBS: n + "." + n + p + ".cachePubs",
            APLUS_UNIVERSAL: n + "_universal",
            APLUS_QUEUE: r,
            GOLDLOG_QUEUE: o,
            COMPLETE: "complete",
            PV_CODE: "2001",
            EXP_CODE: d,
            CLK_CODE: g,
            OTHER_CODE: h,
            CLK: "CLK",
            EXP: "EXP",
            SPM_CNT: "spm-cnt",
            SPM_URL: "spm-url",
            SPM_PRE: "spm-pre",
            MW_CHANGE_PV: i + "_pv",
            MW_CHANGE_HJLJ: i + "_hjlj",
            HTTP: l + ":",
            HTTPS: "https:",
            APPEND_META_INFO: u,
            SET_META_INFO: c,
            APLUS_APPEND_META_INFO: n + "." + u,
            APLUS_SET_META_INFO: n + "." + c,
            PVID: "pvid",
            APLUS_LOG_PIPE: "aplus-log-pipe",
            openAPIs: [ "send", "enter", "sendPV", "record", "combineRecord", "recordUdata", "requestVTConfig", "requestRemoteConfig", "setPageSPM", "setMetaInfo", "appendMetaInfo", "updatePageProperties", "updateNextPageProperties", "updatePageUtparam", "updateNextPageUtparam", "pageAppear", "pageDisappear", "skipPage", "updateSessionProperties", "getPageSpmUrl", "getPageSpmPre", "setPageName", "getElementSPM", "recordAppLink" ],
            SESSION_INTERVAL: y,
            SESSION_PAUSE_TIME: "session_pause_time",
            IMPRINT: "imprint",
            CURRENT_SESSION: "current_session",
            MAX_EVENTID_LENGTH: 128,
            MAX_PROPERTY_KEY_LENGTH: 256,
            MAX_PROPERTY_KEYS_COUNT: 100,
            FAILED_REQUESTS: "failed_requests",
            REQUESTS: "requests",
            SHARES: "shares",
            APLUS_SSRC: "_aplus_ssrc",
            EKVS: S,
            EVENT_MAX_COUNT: P,
            MEMORY_MAX_COUNT: A,
            MAX_QUEUE_COUNT: E,
            EVENT_SEND_DEFAULT_INTERVAL: I,
            PAGE_START: T,
            PAGE_END: C,
            APP_START: x,
            APP_END: O,
            USER_PROFILE_KEY: M,
            SHARE_CACHE_INTERVAL: b,
            IMPRINT: w,
            ID_TYPE: U,
            GLOBAL_PROPERTY: "globalproperty",
            JSBRIDGE_ONLY: k,
            PAGE_CONFIG: L,
            APLUS_SKIP_APV_RULES: R,
            APLUS_PV_DOMAIN: N,
            APLUS_EKV_DOMAIN: D,
            APLUS_IMPRINT_VERSION: "APLUS_IMPRINT_VERSION",
            APLUS_REMOTE_CONFIG: "APLUS_REMOTE_CONFIG",
            RANK: "ekv_rank",
            WEB_EVENT_SUFFIX: "/web_logs",
            WEB_PC_PV_SUFFIX: "v.gif",
            WEB_WAP_PV_SUFFIX: "m.gif",
            PAGE_LEAVE: "$$_page_leave",
            APLUS_AUTOTRACK_ENABLED: "aplus-autotrack-enabled",
            APLUS_AUTOTRACK_ENABLED_REMOTE: "aplus-autotrack-enabled-remote",
            APLUS_AUTOTRACK_CONFIG: "aplus-autotrack-config",
            APLUS_AUTOTRACK_CONFIG_REMOTE: "aplus-autotrack-config-remote",
            APLUS_DISABLE_AUTOEVENT: "aplus-disable-autoevent",
            APLUS_DISABLE_AUTOEVENT_REMOTE: "aplus-disable-autoevent",
            APLUS_DISABLE_AUTOPV: "aplus-disable-apv",
            APLUS_DISABLE_AUTOPV_REMOTE: "aplus-disable-apv-remote",
            APLUS_DEVICE_ENABLE: "aplus-device-enable",
            PERFORMANCE_WARING: "$$_perf_warning",
            START_ID: "START_ID"
        };
    }, function(e, t, n) {
        e.exports = {
            metaInfo: {
                "aplus-rhost-v": "",
                "aplus-rhost-g": "",
                "aplus-mmstat-timeout": "10000",
                "aplus-disable-autoevent": !1,
                "aplus-disable-apv": !1,
                "aplus-autotrack-enabled": !1,
                "aplus-device-enable": !0,
                "aplus-device-enabled": !0,
                sdkId: "aplus_mini_cloud_um"
            },
            globalConfig: {
                isAli: !1,
                isDecodeUrl: !0,
                APLUS_QUEUE: "aplus_queue",
                ETAG_STORAGE_KEY: "__ETAG__CNA__ID__",
                script_name: "aplus_mini.js",
                "aplus-globaldata": {},
                lver: "1.9.22"
            },
            plugins: [ {
                name: "inject_app_um",
                path: n(5)
            }, {
                name: "inject_page_um",
                path: n(39)
            }, {
                name: "pubsub",
                path: n(43)
            }, {
                name: "aplus_meta_inject",
                path: n(46)
            }, {
                name: "aplus_log_inject",
                path: n(50),
                deps: [ "aplus_meta_inject" ],
                config: {
                    plugins: {
                        pv: [ {
                            name: "etag",
                            path: n(51)
                        }, {
                            name: "when_to_sendpv",
                            path: n(53),
                            config: {
                                aplusWaiting: ""
                            }
                        }, {
                            name: "where_to_send",
                            path: n(54)
                        }, {
                            name: "what_to_send",
                            path: n(55),
                            config: {
                                logdataToUt: {}
                            }
                        }, {
                            name: "miniapp_data",
                            path: n(58)
                        }, {
                            name: "what_to_sendpv_userdata",
                            path: n(59),
                            deps: [ "what_to_send" ]
                        }, {
                            name: "can_to_sendpv",
                            path: n(61)
                        } ],
                        hjlj: [ {
                            name: "etag",
                            path: n(51)
                        }, {
                            name: "where_to_send",
                            path: n(54)
                        }, {
                            name: "what_to_send",
                            path: n(55),
                            deps: []
                        }, {
                            name: "miniapp_data",
                            path: n(58)
                        }, {
                            name: "what_to_hjlj_userdata",
                            path: n(65)
                        } ]
                    }
                }
            }, {
                name: "aplus_api",
                path: n(66),
                deps: [ "aplus_log_inject", "aplus_meta_inject" ]
            }, {
                name: "aplus_ac",
                path: n(74),
                deps: [ "inject_page_um" ]
            }, {
                name: "aplus_ae",
                path: n(80),
                deps: [ "inject_page_um" ]
            }, {
                name: "open_api",
                path: n(86)
            }, {
                name: "aplus_client",
                path: n(87)
            }, {
                name: "aplus_mini_spm",
                path: n(88)
            }, {
                name: "aplus_mini_report_um",
                path: n(89)
            }, {
                name: "meta_queue",
                path: n(94),
                config: {
                    isOpenApi: !0
                }
            }, {
                name: "etag",
                path: n(51)
            }, {
                name: "aplus_queue",
                path: n(96),
                config: {
                    isOpenApi: !0
                }
            }, {
                name: "auto_tracker_um",
                path: n(97),
                deps: [ "inject_page_um" ]
            } ]
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            var n = {};
            t && (n.scene = t), e && e.miniappDebugId && (n.debugId = e.miniappDebugId);
            for (var a in e) "$$_share_uid" !== a && 0 !== a.indexOf("$$_utm_") || (n[a] = e[a]);
            return n;
        }
        function r(e) {
            h().load(function() {
                v().w("cache init success"), e.query && e.query.miniappDebugId && e.query.miniappDebugId != h().get("miniappDebugId") && h().set("miniappDebugId", e.query.miniappDebugId);
            });
            var t = {}, n = p(e);
            for (var a in n) "object" == typeof n[a] ? t = y.assign(n[a], t) : n[a] && (t[a] = n[a]);
            _(l.REQUESTS).load();
            var r = function() {
                _(l.FAILED_REQUESTS).load(), _(l.FAILED_REQUESTS).send("", {}, function() {
                    v().w("send failed request queue");
                });
            }, o = g().resume(t), i = g().getCurrentSessionId();
            d().setSessionId(i), o && _(l.REQUESTS).send("", {}, r);
        }
        function o() {
            g().pause(), _(l.FAILED_REQUESTS).send("", {}, function() {
                _(l.FAILED_REQUESTS).save(), h().save();
            });
        }
        function i(e) {
            try {
                my && my.onTitleCloseClick && e && my.onTitleCloseClick(e);
            } catch (e) {}
        }
        function s() {
            var e = App, t = !1, n = !1, s = u.getContext(), p = f.getContext(), g = {
                onLaunch: function(e) {
                    f.initIsTB();
                    var t = e ? e.query : {}, n = e ? e.referrerInfo : {};
                    if (P.enableCfg(h().getSync(l.APLUS_REMOTE_CONFIG)), E += 1, s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-session-args", y.assign(n, {
                            scene: e.scene || ""
                        }) ]
                    }), t) {
                        var r = {};
                        if (t.spm && (s.aplus.spm_orign = t.spm), e.scene && (r.scene = e.scene), t.miniappDebugId) {
                            var o = t.miniappDebugId.trim(), i = o.split("_");
                            r = y.assign(r, {
                                aplus_work_no: i.length > 2 ? i[1] : o,
                                aplus_track_debug_id: o,
                                aplus_flag: "aplus_test"
                            });
                        }
                        s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-exdata", r ]
                        }), s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-cpvdata", r ]
                        }), s.aplus_queue.push({
                            action: "aplus.appendMetaInfo",
                            arguments: [ "aplus-global-args", a(t, e.scene) ]
                        });
                    }
                },
                onShow: function(e) {
                    E += 1;
                    var n, o = e ? e.query : {}, i = e ? e.scene : "";
                    s.aplus_queue.push({
                        action: "aplus.setMetaInfo",
                        arguments: [ "aplus-global-args", a(o, i) ]
                    }), i && (s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-exdata", {
                            scene: i
                        } ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-cpvdata", {
                            scene: i
                        } ]
                    }), s.aplus_queue.push({
                        action: "aplus.appendMetaInfo",
                        arguments: [ "aplus-session-args", {
                            scene: i
                        } ]
                    })), 2 === E ? n = 1 : 1 === E ? n = 0 : v().w("APP_LAUNCH_TYPE should not reach this, value = " + E), 
                    c.onAplusReady(s.aplus_queue, l.SUBSCRIBE, function() {
                        t || (t = !0, r(e)), S.clear();
                        var a = A.getStartId();
                        d().setStartId(a);
                        var o = s.aplus.globalConfig || {};
                        if (!o.isAli) {
                            var i = m.getPageCode();
                            s.onAppShowTime = Date.now(), s.aplus_queue.push({
                                action: "aplus.record",
                                arguments: [ l.APP_START, "SHOW", {
                                    start_type: n,
                                    page_name: i || e.path || "-",
                                    url: e.path || "-"
                                } ]
                            });
                        }
                    });
                },
                onHide: function() {
                    c.onAplusReady(s.aplus_queue, l.SUBSCRIBE, function() {
                        var e = s.aplus.globalConfig || {}, n = m.getPageCode();
                        if (!e.isAli) {
                            var a = m.getCurrentPagePath(), r = Date.now() - s.onAppShowTime;
                            s.aplus_queue.push({
                                action: "aplus.record",
                                arguments: [ l.APP_END, "H_OR_U", {
                                    duration: r,
                                    end_type: 0,
                                    page_name: n || a || "-",
                                    url: a || "-",
                                    start_time: s.onAppShowTime
                                } ]
                            });
                        }
                        t = !1, o();
                    }), E = 0;
                }
            };
            e.after ? e.after({
                methods: {
                    onLaunch: function(e) {
                        var t = u.getContext();
                        e.thisObject && (e.thisObject.aplus = t.aplus, e.thisObject.aplus_queue = t.aplus_queue), 
                        g.onLaunch(e.args);
                    },
                    onShow: function(e) {
                        g.onShow(e.args);
                    },
                    onHide: function() {
                        g.onHide();
                    }
                }
            }) : (App = function(t) {
                var n = u.getContext();
                t.aplus = n, e(t);
            }, p.onAppShow(function(e) {
                if (!n) {
                    var t = {};
                    t = b(p.getLaunchOptionsSync) ? p.getLaunchOptionsSync() || {} : e, g.onLaunch(t), 
                    n = !0;
                }
                g.onShow(e);
            }), p.onAppHide(function() {
                g.onHide();
            }), i(g.onHide));
        }
        var u = n(2), c = n(6), l = n(3), p = n(14), f = n(9), g = n(15), d = n(19), _ = n(21), h = n(16), v = n(12), m = n(36), y = n(33), b = n(10), S = n(38), P = n(29), A = n(18), E = 0;
        e.exports = function() {
            return {
                run: function() {
                    [ "object", "function" ].indexOf(typeof App) > -1 && s();
                }
            };
        };
    }, function(e, t, n) {
        var a = n(7), r = n(9), o = n(2), i = n(3);
        e.exports = {
            resetFn: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
                e[t] = function() {
                    var e = a && a.apply(this, arguments);
                    return e ? n.call(this, e) : n.apply(this, arguments);
                };
            },
            rewriteFn: function(e, t, n) {
                var a = e[t];
                e[t] = function(e) {
                    n.call(this, e), a && a.call(this, e);
                };
            },
            onAplusReady: function(e, t, n) {
                e.push({
                    action: t,
                    arguments: [ "aplusReady", function(e) {
                        "complete" === e && "function" == typeof n && n();
                    } ]
                });
            },
            click_proxy: function(e, t) {
                var a = n(2), r = a.getGlobalValue("aplus"), o = n(13), i = e[t];
                e[t] = function() {
                    var e = i.apply(this, arguments), t = arguments[0];
                    return o.isObject(t) && r && r.record && r.record("$$_auto_clk", "CLK", {}), e;
                };
            },
            getIndexByRect: function(e, t, n) {
                var s = -1, u = o.getGlobalValue(i.APLUS);
                r.getContext().createSelectorQuery().selectAll(e).boundingClientRect().exec(function(e) {
                    a(e[0], function(e, n) {
                        u.globalConfig.isAli ? e.width === t.width && e.height === t.height && e.left === t.left && e.top === t.top && e.right === t.right && e.bottom === t.bottom && (s = n) : s = n;
                    }), n(s);
                });
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(8);
        e.exports = function(e, t) {
            if (a(e) && void 0 === e.length) for (var n in e) e.hasOwnProperty(n) && t(n, e[n], e); else {
                var r, o = e.length;
                for (r = 0; r < o; r++) {
                    var i = t(e[r], r);
                    if ("break" === i) break;
                }
            }
        };
    }, function(e, t) {
        e.exports = function(e) {
            if ("object" != typeof e || null === e) return !1;
            for (var t = e; null !== Object.getPrototypeOf(t); ) t = Object.getPrototypeOf(t);
            return Object.getPrototypeOf(e) === t;
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            if ("boolean" == typeof u) return u;
            var e = !1;
            try {
                var t = navigator ? navigator.userAgent || navigator.swuserAgent : "";
                if (e = !!/AliApp/i.test(t), /AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(t) && (e = !1), 
                /AliApp\(KB/i.test(t) && (e = !!/Mist/.test(t)), /AlipayIDE Taobao/.test(t) && (e = !0), 
                e) {
                    var n = c().ctx;
                    o(n.canIUse) && (e = !!n.canIUse("callUserTrack"));
                }
            } catch (e) {}
            return u = e, e;
        }
        function r() {
            return "boolean" == typeof u ? !!u : a();
        }
        var o = n(10), i = n(2), s = n(11);
        t.getCurrentPage = function() {
            var e = getCurrentPages();
            return e[e.length - 1] || {};
        }, t.getReferrerPage = function() {
            var e = getCurrentPages();
            return e[e.length - 2] || {};
        };
        var u;
        t.resetIsTB = function(e) {
            u = e;
        }, t.initIsTB = a;
        var c = function() {
            try {
                return {
                    ctx: dd,
                    platType: "dd",
                    sdkType: "ddmp",
                    logDomain: "/ddm_logs"
                };
            } catch (e) {
                try {
                    return {
                        ctx: my,
                        platType: my && my.tb ? "taobao" : "my",
                        sdkType: my && my.tb ? "taobaomp" : "mymp",
                        logDomain: "/alipaym_logs"
                    };
                } catch (e) {
                    try {
                        return {
                            ctx: tt,
                            platType: "tt",
                            sdkType: "ttmp",
                            logDomain: "/bytedancem_logs"
                        };
                    } catch (e) {
                        try {
                            return {
                                ctx: swan,
                                platType: "bd",
                                sdkType: "bdmp",
                                logDomain: "/baidum_logs"
                            };
                        } catch (e) {
                            try {
                                return {
                                    ctx: wx,
                                    platType: "wx",
                                    sdkType: "wxmp",
                                    logDomain: "/wxm_logs"
                                };
                            } catch (e) {
                                return {
                                    ctx: {},
                                    platType: "UNKNOW",
                                    sdkType: "UNKNOW"
                                };
                            }
                        }
                    }
                }
            }
        };
        t.isTB = r, t.getPlatformType = function() {
            return c().platType;
        }, t.getSdkType = function() {
            return c().sdkType;
        }, t.getContext = function() {
            return c().ctx;
        }, t.getLogDomain = function() {
            return c().logDomain;
        };
        var l = "httpRequest", p = "request", f = function() {};
        t.request = function(e, t, n, a) {
            var r = c().ctx;
            o(a) || (a = f), o(n) || (n = f);
            var u = t.requestMethodName || p, g = r[u];
            o(g) || u === p || (u = p, g = r[u]), o(g) || u === l || (u = l, g = r[u]);
            var d, _ = t && t.dataType ? t.dataType : "base64", h = t && t.timeout ? t.timeout : 3e3, v = t.method || "GET";
            e = s.fixDomain(e);
            var m;
            if (o(g)) {
                var y = {
                    url: e,
                    method: v,
                    dataType: _,
                    timeout: h,
                    success: function(e) {
                        d || (d = !0, n(e));
                    },
                    fail: function(e) {
                        d || (d = !0, a({
                            failure: !0,
                            data: e
                        }));
                    }
                };
                "POST" === v && "object" == typeof t.data && (y.url = y.url.split("?")[0], l === u ? (y.headers = {
                    "Content-Type": "application/json"
                }, y.dataType = "json", y.data = JSON.stringify(t.data)) : y.data = t.data);
                var b = i.getGlobalValue("aplus"), S = b.getMetaInfo("aplus-request-extinfo");
                "object" == typeof S && (y._extInfo = S), g(y);
            } else d || (d = !0, a({
                failure: !0,
                data: m
            }));
            setTimeout(function() {
                d || (d = !0, m = 'aplus log request"' + e + ' timeout", time spend' + h + "ms", 
                console && console.warn(m), a({
                    failure: !0,
                    data: m
                }));
            }, h);
        };
    }, function(e, t) {
        "use strict";
        e.exports = function(e) {
            return "function" == typeof e;
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t, n, a, o = [], i = e.length;
            for (a = 0; a < i; a++) t = e[a][0], n = e[a][1], o.push(0 === t.indexOf(r) ? n : t + "=" + encodeURIComponent(n));
            return o.join("&");
        }
        var r = "::-plain-::";
        t.mkPlainKey = function() {
            return r + Math.random();
        }, t.s_plain_obj = r, t.mkPlainKeyForExparams = function(e) {
            var t = e || r;
            return t + "exparams";
        }, t.arr2param = a, t.param2arr = function(e) {
            for (var t, n = e.split("&"), a = 0, r = n.length, o = []; a < r; a++) t = n[a].split("="), 
            o.push([ t.shift(), t.join("=") ]);
            return o;
        }, t.arr2obj = function(e) {
            var t, n, a, r = {}, o = e.length;
            for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
            return r;
        }, t.jsonLikeStr2JSON = function(e) {
            if (!e || "string" != typeof e) return {};
            for (var t = e.replace(/['"{}]+/g, ""), n = t.split(","), a = [], r = 0; r < n.length; r++) a.push(n[r].split(":"));
            var o = this.arr2obj(a);
            return o;
        }, t.fixDomain = function(e) {
            return e.indexOf("https://") !== -1 || e.indexOf("http://") !== -1 ? e : (e = (/^\/\//.test(e) ? "" : "//") + e, 
            /^\/\/(\d+\.){3,}\d+/.test(e) ? "http:" + e : "https:" + e);
        }, t.getAppKey = function() {
            var e = n(2).getGlobalValue("aplus");
            return e.getMetaInfo("appkey") || e.getMetaInfo("appId") || e.getMetaInfo("appKey");
        }, t.checkEmptyObj = function(e) {
            return "object" != typeof e || 0 === Object.keys(e).length;
        }, t.checkDomain = function(e) {
            var t = new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)$/), a = (e.match(t) || [])[0];
            if (!e || !a) {
                var r = n(12);
                return r().tip_w(r().repeat("!")), r().tip_w("trackDomain error, please check aplus-rhost-v setting, current value is: " + e || "undefined"), 
                r().tip_w("we accept these three patterns:"), r().tip_w("eg1: https://test-qtracking-xxx.com:port, port is optional"), 
                r().tip_w("eg2: http://test-qtracking-xxx.com:port, port is optional"), r().tip_w("eg3: test-qtracking-xxx.com:port, port is optional"), 
                r().tip_w(r().repeat("!")), !1;
            }
            return !0;
        }, t.checkOpenid = function(e) {
            if (!e) {
                var t = n(12);
                return t().tip_w(t().repeat("!")), t().tip_w("QT need an unique id as QT's deviceid!!"), 
                t().tip_w("setting examples: aplus_queue.push({action: 'aplus.setMetaInfo', arguments: ['_anony_id', xxxxxx]});"), 
                t().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS"), t().tip_w(t().repeat("!")), 
                !1;
            }
            return !0;
        };
        var o = n(7);
        t.mapEventSampleRates = function(e) {
            var t = [];
            return o(e, function(e) {
                e.eventIds && e.eventIds.length > 0 && o(e.eventIds, function(n) {
                    t.push({
                        eventId: n,
                        samplingRate: e.samplingRate
                    });
                });
            }), t;
        };
    }, function(e, t) {
        var n = "[APLUS] -- ";
        e.exports = function() {
            function e() {
                this.setDebug = function(e) {
                    a = e;
                }, this.i = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.info.apply(console, arguments);
                    } catch (e) {}
                }, this.e = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.error.apply(console, arguments);
                    } catch (e) {}
                }, this.w = function() {
                    if (a) try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                    } catch (e) {}
                }, this.v = function() {
                    try {
                        "string" == typeof arguments[0] && (arguments[0] = n + arguments[0]), console.warn.apply(console, arguments);
                    } catch (e) {}
                }, this.tip_w = function(e) {
                    try {
                        console.log("%c " + n + e, "background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;");
                    } catch (e) {}
                }, this.repeat = function(e) {
                    for (var t = e; t.length < 86; ) t += e;
                    return t;
                };
            }
            var t = null, a = !1;
            return function() {
                return null === t && (t = new e()), t;
            };
        }();
    }, function(e, t) {
        t.isObject = function(e) {
            return null !== e && "[object Object]" === Object.prototype.toString.call(e);
        }, t.isEmptyObject = function(e) {
            if (this.isObject(e)) for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
            return !0;
        };
    }, function(e, t) {
        function n(e) {
            var t, a = Array.isArray(e) ? [] : {};
            if ("object" == typeof e) {
                if (JSON && JSON.parse) t = JSON.stringify(e), a = JSON.parse(t); else for (var r in e) a[r] = "object" == typeof e[r] ? n(e[r]) : e[r];
                return a;
            }
        }
        e.exports = n;
    }, function(e, t, n) {
        var a = n(16), r = n(12), o = n(3), i = n(9), s = n(14), u = n(18), c = n(2);
        e.exports = function() {
            function e() {
                return {
                    resume: function(e) {
                        var t = !1;
                        g || (g = a().get(o.CURRENT_SESSION));
                        var i = new Date();
                        return f = i.getTime(), !g || !g.end_time || f - g.end_time > o.SESSION_INTERVAL ? (t = !0, 
                        n(e), r().i("start new session(%s): ", g.id, g)) : r().i("continue last session(%s): %s ", g.id, i.toLocaleTimeString(), g), 
                        t;
                    },
                    pause: function() {
                        l();
                    },
                    getCurrentSessionId: function() {
                        return (g || {}).id;
                    },
                    getCurrentSession: function() {
                        return g;
                    },
                    cloneCurrentSession: function() {
                        return s(g);
                    }
                };
            }
            function t(e) {
                var t = {};
                for (var n in e) t[n] = e[n];
                return r().i("query: ", e), t;
            }
            function n(e) {
                try {
                    var n = (g || {}).options || {}, a = u.assign({}, t(e.query));
                    a.path = e.path || n.path, a.scene = e.scene ? i.getPlatformType() + "_" + e.scene : n.scene;
                    var o = e.referrerInfo;
                    o && (a.referrerAppId = o.appId), r().i("session options: ", a);
                    var s = c.getGlobalValue("aplus"), l = s.getMetaInfo("globalproperty"), p = Date.now();
                    g = {
                        id: u.getRandomStr(10) + p,
                        start_time: p,
                        options: a,
                        state_s: 1
                    }, l && (g.gp = l);
                } catch (e) {
                    r().e("generate new session failed, errmsg: ", e);
                }
            }
            function l() {
                if (g) {
                    var e = new Date();
                    g.end_time = e.getTime(), "number" != typeof g.duration && (g.duration = 0), g.duration = g.end_time - f, 
                    g.state_s = 0, a().set(o.CURRENT_SESSION, g), r().i("session end (%s): %s ", g.id, e.toLocaleTimeString(), g);
                }
            }
            var p = null, f = null, g = null;
            return function() {
                return p || (p = e()), p;
            };
        }();
    }, function(e, t, n) {
        var a = n(9), r = n(10), o = n(17), i = n(12), s = n(11), u = n(3);
        e.exports = function() {
            function e() {
                var e = a.getContext();
                this.load = function(t) {
                    c ? (e.removeStorage({
                        key: n
                    }), r(t) && t()) : (n = "aplus_cache_" + s.getAppKey() || "", e.getStorage({
                        key: n,
                        success: function(a) {
                            c = a && a.data ? o.parse(a.data) || {} : {}, l = !0, e.removeStorage({
                                key: n
                            }), r(t) && t();
                        },
                        fail: function(a) {
                            i().w(n + ": " + a.errMsg), c = {}, l = !0, e.removeStorage({
                                key: n
                            }), r(t) && t();
                        }
                    }));
                }, this.save = function() {
                    c && e.setStorage({
                        key: n,
                        data: o.stringfy(c)
                    });
                }, this.set = function(e, t) {
                    c && (c[e] = t);
                }, this.get = function(e) {
                    return (c || {})[e];
                }, this.remove = function(e) {
                    c && c[e] && delete c[e];
                }, this.getAll = function() {
                    return c;
                }, this.clear = function() {
                    c = null;
                }, this.has = function(e) {
                    return !!this.get(e);
                }, this.isLoaded = function() {
                    return l;
                }, this.getSync = function(e) {
                    try {
                        var t = a.getContext(), n = t.getStorageSync(e);
                        return e === u.APLUS_IMPRINT_VERSION ? n : "string" == typeof n ? o.parse(n) : n;
                    } catch (e) {}
                }, this.setSync = function(e, t) {
                    try {
                        var n = a.getContext();
                        "object" == typeof t ? n.setStorageSync(e, JSON.stringify(t)) : n.setStorageSync(e, t);
                    } catch (e) {}
                };
            }
            var t = null, n = "", c = null, l = !1;
            return function() {
                return t || (t = new e()), t;
            };
        }();
    }, function(e, t) {
        t.stringfy = function(e) {
            if (e) try {
                return JSON.stringify(e);
            } catch (e) {}
            return "";
        }, t.parse = function(e) {
            if (e) try {
                return JSON.parse(e);
            } catch (e) {}
            return null;
        }, t.parseToArray = function(e) {
            if (e) try {
                return JSON.parse(e);
            } catch (e) {}
            return [];
        };
    }, function(e, t, n) {
        function a(e) {
            for (var t = "", n = [ "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z" ], a = 0; a < Number(e); a++) {
                var r = Math.round(Math.random() * (n.length - 1));
                t += n[r];
            }
            return t;
        }
        t.getRandomStr = a, t.startsWith = function(e, t) {
            return !(!e || !t || 0 === t.length || t.length > e.length) && e.substr(0, t.length) === t;
        }, t.assign = function(e) {
            if (void 0 === e || null === e) throw new TypeError("Cannot convert undefined or null to object");
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
                var a = arguments[n];
                if (a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
            }
            return t;
        }, t.checkEvent = function(e, t) {
            var a = n(3), r = n(12), o = n(17);
            if (!e || "string" != typeof e) return r().w("event logkey is invalid, id =", e || "'' event properties = ", o.stringfy(t.cusp)), 
            !1;
            var i = [ "id", "du" ], s = {};
            if (i.forEach(function(e) {
                s[e] = 1;
            }), s[e]) return r().e("eventId has conflict with reservewords: " + i.join(",")), 
            !1;
            if (e.length > a.MAX_EVENTID_LENGTH) return r().e("The maximum length of event id shall not exceed " + a.MAX_EVENTID_LENGTH), 
            !1;
            if (t && ("object" != typeof t || Array.isArray(t)) && "string" != typeof t) return r().e("please check trackEvent properties. properties should be string or object(not include Array)"), 
            !1;
            if ("object" == typeof t) {
                var u = 0;
                for (var c in t) if ({}.hasOwnProperty.call(t, c)) {
                    if (c.length > a.MAX_PROPERTY_KEY_LENGTH) return r().e("The maximum length of property key shall not exceed " + a.MAX_PROPERTY_KEY_LENGTH), 
                    !1;
                    if (u >= a.MAX_PROPERTY_KEYS_COUNT) return r().e("The maximum count of properties shall not exceed " + a.MAX_PROPERTY_KEYS_COUNT), 
                    !1;
                    if (s[c]) return r().e("property key has conflict with reserveWords: " + i.join(",")), 
                    !1;
                    u += 1;
                }
            }
            return !0;
        };
        var r = n(7);
        t.deleteInfo = function(e, t) {
            return r(t, function(t) {
                delete e[t];
            }), e;
        }, t.checkEmptyObj = function(e) {
            return "object" != typeof e || 0 === Object.keys(e).length;
        }, t.getStartId = function() {
            return a(10) + Date.now();
        }, t.DataType = {
            HALF_SESSION: "half_session",
            CLOSE_SESSION: "close_session",
            EKV: "ekv",
            ENTER_PAGE: "enter_page",
            LEAVE_PAGE: "leave_page"
        }, t.AccessType = {
            MOBILE_NETWORK_2G: "2g",
            MOBILE_NETWORK_3G: "3g",
            MOBILE_NETWORK_4G: "4g",
            MOBILE_NETWORK_NONE: "none"
        };
    }, function(e, t, n) {
        var a = n(16), r = n(12), o = n(3), i = n(20);
        e.exports = function() {
            function e() {
                if (p.length) {
                    var e = a().get(o.EKVS);
                    n(e) + p.length <= o.EVENT_MAX_COUNT && (e = t(e, p), a().set(o.EKVS, e));
                }
            }
            function t(e, t) {
                e = e || {};
                var n = e[c];
                return i(n) && n.length ? e[c] = n.concat(t) : e[c] = [].concat(t), e;
            }
            function n(e) {
                var t = 0;
                for (var n in e) i(e[n]) && (t += e[n].length);
                return t;
            }
            function s() {
                return {
                    addEvent: function(t) {
                        t && (c ? (p.unshift(t), p.length > o.MEMORY_MAX_COUNT && (e(c), p.length = 0)) : (r().w("session id is null: ", c), 
                        f.unshift(t)));
                    },
                    setSessionId: function(e) {
                        if (c = e, i(f) && f.length && c) {
                            for (var t = 0; t < f.length; t++) this.addEvent(f[t]);
                            f.length = 0;
                        }
                    },
                    setStartId: function(e) {
                        l = e;
                    },
                    getStartId: function() {
                        return l;
                    },
                    getEkvs: function() {
                        var e = a().get(o.EKVS);
                        return p && p.length && (e = t(e, p)), e;
                    },
                    getEkvsLen: function() {
                        var e = a().get(o.EKVS) || {}, t = e[c] || [], n = p ? p.length : 0;
                        return t.length + n;
                    },
                    clear: function() {
                        a().remove(o.EKVS), p.length = 0, f.length = 0;
                    }
                };
            }
            var u, c, l, p = [], f = [];
            return function() {
                return u || (u = s()), u;
            };
        }();
    }, function(e, t) {
        "use strict";
        e.exports = function(e) {
            return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
        };
    }, function(e, t, n) {
        var a = n(22), r = n(16), o = n(3), i = n(23), s = n(24), u = n(35), c = n(10), l = n(33), p = n(11), f = n(2);
        e.exports = function() {
            function e(e, t, r) {
                t = t || {};
                var s = i(e);
                if (s) {
                    var u = n(2), p = u.getGlobalValue(o.APLUS), f = p._aplus_client || {};
                    s.header = l.assign(s.header, a.getNetInfo(f)), s.noCache = t.noCache, y.enqueue(s);
                }
                c(r) && r();
            }
            function t(e, n) {
                var a = e === o.REQUESTS, r = a ? y : b, i = r.dequeue(), u = function() {
                    t(e, n);
                }, c = function() {
                    i && !i.noCache && m.push(i), t(e, n);
                };
                i ? s(i, u, c) : (g(), n());
            }
            function g() {
                m.forEach(function(e) {
                    b.enqueue(e);
                }), m.length = 0;
            }
            function d(e, n) {
                var a = function() {
                    c(n) && n();
                };
                t(e, a);
            }
            function _() {
                this.send = function(e, t, n) {
                    e ? this.add(e, t, function() {
                        d(h, n);
                    }) : d(h, n);
                }, this.add = function(t, n, a) {
                    var r = f.getGlobalValue(o.APLUS);
                    p.checkOpenid(r.getMetaInfo(o._ANONY_ID)) && e(t, n, a);
                }, this.load = function() {
                    var e = h === o.REQUESTS, t = e ? y : b, n = r().get(h);
                    n && n.length && n.forEach(function(e) {
                        t.enqueue(e);
                    }), r().remove(h);
                }, this.save = function() {
                    var e = r().get(o.FAILED_REQUESTS) || [], t = e.concat(b.items());
                    t && t.length && r().set(o.FAILED_REQUESTS, t), b.clear();
                };
            }
            var h = null, v = null, m = [], y = new u(), b = new u();
            return function(e) {
                return h = e, v || (v = new _()), v;
            };
        }();
    }, function(e, t, n) {
        var a = n(9), r = n(3), o = n(16), i = n(2), s = n(18), u = n(11);
        t.getNetInfo = function(e) {
            var t = {}, n = e.networkType;
            switch ("none" === n && (n = "unknown"), n = n ? n.toLowerCase() : "") {
              case s.AccessType.MOBILE_NETWORK_4G:
                t.access_subtype = "LTE", t.access = "4G";
                break;

              case s.AccessType.MOBILE_NETWORK_3G:
                t.access_subtype = "CDMA", t.access = "3G";
                break;

              case s.AccessType.MOBILE_NETWORK_2G:
                t.access_subtype = "GRPS", t.access = "2G";
                break;

              default:
                t.access = n, delete t.access_subtype;
            }
            return t;
        }, t.getHeaderInfo = function() {
            var e = {}, t = i.getGlobalValue(r.APLUS), n = t.globalConfig || {}, s = t._aplus_client || {}, c = o().get(r.IMPRINT);
            c && (e.imprint = c), e.device_type = "Phone", e.sdk_version = n.lver, e.appkey = u.getAppKey(), 
            e.device_info = "", e.appid = s.appId, e.app_env = s.appEnv, e.app_version = t.getMetaInfo("appVersion") || "devtools";
            var l = t.getMetaInfo("aplus-global-args");
            l && l.debugId ? e.miniappDebugId = l.debugId : o().get("miniappDebugId") && (e.miniappDebugId = o().get("miniappDebugId"));
            var p = s || {};
            p.safeArea = p.safeArea || {};
            var f = p.model || "", g = p.platform || "", d = p.brand || "", _ = d.toLowerCase();
            e.sdk_type = a.getSdkType(), e.platform = a.getPlatformType(), e.platform_sdk_version = p.SDKVersion, 
            e.platform_version = p.platformVersion;
            var h = Math.round(p.screenWidth * p.pixelRatio), v = Math.round(p.screenHeight * p.pixelRatio);
            e.resolution = h > v ? h + "*" + v : v + "*" + h, e.pixel_ratio = p.pixelRatio, 
            e.os = g, e.font_size_setting = p.fontSizeSetting, e.device_model = f, e.device_brand = d, 
            e.device_manufacturer = _, e.device_manuid = f, e.device_name = f, e.os_version = p.os_version, 
            e.language = p.language;
            var m = this.getNetInfo(s);
            return e.access = m.access, m.access_subtype && (e.access_subtype = m.access_subtype), 
            e;
        };
    }, function(e, t, n) {
        function a() {
            var e = null, t = i().cloneCurrentSession();
            return t && (e = {
                header: {
                    st: "1"
                },
                analytics: {
                    sessions: [ t ]
                }
            }), e;
        }
        function r() {
            var e = null, t = {}, n = i().cloneCurrentSession();
            n && (t.sessions = [ n ]);
            var a = s().getEkvs();
            return a && (t.ekvs = c(a), s().clear()), (t.sessions || t.ekvs) && (e = {
                analytics: t
            }), e;
        }
        function o() {
            var e = null, t = s().getEkvs();
            return t && (e = {
                analytics: {
                    ekvs: c(t)
                }
            }, s().clear()), e;
        }
        var i = n(15), s = n(19), u = n(18), c = n(14);
        e.exports = function(e) {
            var t = null;
            switch (e) {
              case u.DataType.HALF_SESSION:
                t = a();
                break;

              case u.DataType.CLOSE_SESSION:
                t = r();
                break;

              case u.DataType.EKV:
                t = o();
            }
            return t;
        };
    }, function(e, t, n) {
        function a() {
            var e = d.getGlobalValue(h.APLUS), t = e.getMetaInfo(h.APLUS_PV_DOMAIN);
            if (!P.checkDomain(t)) return "";
            var n = s.getLogDomain();
            return n ? P.fixDomain(t) + n : (p().tip_w("current miniapp framework is not supported!!"), 
            "");
        }
        function r(e) {
            var t = s.getContext(), n = e.success, a = e.fail, r = !1, o = null;
            e.success = function(e) {
                r || (o && clearTimeout(o), v(n) && n(e));
            }, e.fail = function() {
                r || (o && clearTimeout(o), v(a) && a(!1));
            };
            try {
                t.request(e);
            } catch (t) {
                try {
                    dd && dd.httpRequest(e);
                } catch (e) {
                    p().w("request send failed, err msg: ", e);
                }
            }
            o = setTimeout(function() {
                o && clearTimeout(o), r = !0, v(a) && a(r);
            }, e.timeout || A);
        }
        function o(e) {
            var t = y().getSync(h.APLUS_IMPRINT_VERSION);
            if (e) {
                var n = d.getGlobalValue("aplus");
                if (e.imprintVersion && e.imprintVersion !== t) {
                    var a = e.imprintVersion;
                    y().setSync(h.APLUS_IMPRINT_VERSION, a);
                    var r = n.getMetaInfo(h.APLUS_PV_DOMAIN), o = P.fixDomain(r) + a;
                    n.requestRemoteConfig(o, function(e) {
                        e.data && e.data.data && (b.enableCfg(e.data.data), y().setSync(h.APLUS_REMOTE_CONFIG, e.data.data));
                    }, function(e) {
                        p().w("remote configuration request failed, errmsg:", e);
                    });
                } else {
                    var i = y().getSync(h.APLUS_REMOTE_CONFIG);
                    b.enableCfg(i);
                }
            }
        }
        function i() {
            var e = s.getSdkType() + "/json", t = !1;
            try {
                my && (t = !0);
            } catch (e) {}
            return t ? {
                headers: {
                    "Content-Type": e,
                    "Msg-Type": e
                }
            } : {
                header: {
                    "Content-Type": e,
                    "Msg-Type": e
                }
            };
        }
        var s = n(9), u = n(22), c = n(25), l = n(26), p = n(12), f = n(17), g = n(27), d = n(2), _ = n(18), h = n(3), v = n(10), m = n(28), y = n(16), b = n(29), S = n(19), P = n(11), A = 5e3;
        e.exports = function(e, t, n, y) {
            var b = d.getGlobalValue(h.APLUS), P = u.getHeaderInfo();
            try {
                if ("my" === s.getPlatformType() || "taobao" === s.getPlatformType() ? (P.id_type = "alipay_id", 
                P.id_tracking = {
                    alipay_id: b.getMetaInfo(h._ANONY_ID) || "",
                    unionid: b.getMetaInfo("_dev_id") || "",
                    userId: b.getMetaInfo(h._USER_ID) || ""
                }) : (P.id_type = "openid", P.id_tracking = {
                    openid: b.getMetaInfo(h._ANONY_ID) || "",
                    unionid: b.getMetaInfo("_dev_id") || "",
                    userId: b.getMetaInfo(h._USER_ID) || ""
                }), l.get() && (P[h.IMPRINT] = l.get()), e.analytics) {
                    var A = b.getMetaInfo(h._USER_ID), E = b.getMetaInfo("_user_nick");
                    e.analytics.active_user = {
                        puid: A,
                        provider: E
                    };
                }
                e.header = _.assign(P, e.header, {
                    ts: Date.now(),
                    traceId: _.getRandomStr(10) + Date.now() + _.getRandomStr(9),
                    start_id: S().getStartId()
                });
                var I = c(e), T = f.stringfy(I), C = a(), x = {
                    url: C,
                    method: "POST",
                    data: g.encode(T),
                    success: function(a) {
                        var r = a.code || a.status || a.statusCode;
                        if (200 === r || 413 === r) {
                            p().i("data send success:", e, T);
                            try {
                                a.profile && (m.push({
                                    end: a.profile.responseEnd,
                                    start: a.profile.requestStart
                                }), m.needSendPerformanceEvent());
                            } catch (e) {
                                p().w("current miniapp not support profile API");
                            }
                            o(a.data || {}), v(t) && t(a);
                        } else p().w("data send failed:", T), v(n) && n();
                    },
                    fail: function(e) {
                        p().w("timeout: ", T), v(n) && n();
                    },
                    complete: function() {
                        v(y) && y();
                    }
                };
                r(_.assign(x, i()));
            } catch (e) {}
        };
    }, function(e, t) {
        function n(e, t) {
            var n = a(e, t);
            return e && e.id_tracking && (n[t.id_tracking || "id_tracking"] = a(e.id_tracking, s)), 
            n;
        }
        function a(e, t) {
            var n = {};
            for (var a in e) t[a] ? n[t[a]] = e[a] : n[a] = e[a];
            return n;
        }
        function r(e, t) {
            var n = {};
            if (e) for (var a in e) e[a] && (n[t[a]] = e[a]);
            return n;
        }
        var o = {
            sessions: "sn",
            ekvs: "e",
            active_user: "active_user"
        }, i = {
            sdk_type: "sdt",
            access: "ac",
            access_subtype: "acs",
            device_model: "dm",
            language: "lang",
            device_type: "dt",
            device_manufacturer: "dmf",
            device_name: "dn",
            platform_version: "pv",
            id_type: "it",
            font_size_setting: "fss",
            os_version: "ov",
            device_manuid: "did",
            platform_sdk_version: "psv",
            device_brand: "db",
            appkey: "ak",
            _id: "id",
            id_tracking: "itr",
            imprint: "imp",
            sdk_version: "sv",
            resolution: "rl",
            testToken: "ttn",
            miniappDebugId: "dk",
            pixel_ratio: "pr"
        }, s = {
            uuid: "ud",
            unionid: "und",
            openid: "od",
            anonymousid: "nd",
            alipay_id: "ad",
            device_id: "dd",
            userid: "puid"
        };
        e.exports = function(e) {
            return {
                h: n(e.header, i),
                a: r(e.analytics, o)
            };
        };
    }, function(e, t, n) {
        function a() {
            var e = "", t = this;
            this.set = function(t) {
                e = "string" == typeof t ? t : i.encode(JSON.stringify(t));
            }, this.get = function() {
                return e;
            }, this.getImpObj = function() {
                return o.parse(i.decode(e));
            }, this.getItem = function(e) {
                var n = t.getImpObj();
                return n ? n[e] || "" : "";
            }, this.load = function() {
                e = r().get(s.IMPRINT);
            }, this.save = function() {
                e && r().set(s.IMPRINT, e);
            };
        }
        var r = n(16), o = n(17), i = n(27), s = n(3), u = new a();
        e.exports = u;
    }, function(e, t) {
        var n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", a = function(e) {
            for (var t = {}, n = 0, a = e.length; n < a; n++) t[e.charAt(n)] = n;
            return t;
        }(n), r = String.fromCharCode, o = function(e) {
            var t;
            return e.length < 2 ? (t = e.charCodeAt(0), t < 128 ? e : t < 2048 ? r(192 | t >>> 6) + r(128 | 63 & t) : r(224 | t >>> 12 & 15) + r(128 | t >>> 6 & 63) + r(128 | 63 & t)) : (t = 65536 + 1024 * (e.charCodeAt(0) - 55296) + (e.charCodeAt(1) - 56320), 
            r(240 | t >>> 18 & 7) + r(128 | t >>> 12 & 63) + r(128 | t >>> 6 & 63) + r(128 | 63 & t));
        }, i = /[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g, s = function(e) {
            return e.replace(i, o);
        }, u = function(e) {
            var t = [ 0, 2, 1 ][e.length % 3], a = e.charCodeAt(0) << 16 | (e.length > 1 ? e.charCodeAt(1) : 0) << 8 | (e.length > 2 ? e.charCodeAt(2) : 0), r = [ n.charAt(a >>> 18), n.charAt(a >>> 12 & 63), t >= 2 ? "=" : n.charAt(a >>> 6 & 63), t >= 1 ? "=" : n.charAt(63 & a) ];
            return r.join("");
        }, c = function(e) {
            return e.replace(/[\s\S]{1,3}/g, u);
        }, l = function(e) {
            return c(s(e));
        }, p = function(e, t) {
            return t ? l(String(e)).replace(/[+\/]/g, function(e) {
                return "+" == e ? "-" : "_";
            }).replace(/\=/g, "") : l(String(e));
        }, f = new RegExp([ "[-][-]", "[-][-]{2}", "[-][-]{3}" ].join("|"), "g"), g = function(e) {
            switch (e.length) {
              case 4:
                var t = (7 & e.charCodeAt(0)) << 18 | (63 & e.charCodeAt(1)) << 12 | (63 & e.charCodeAt(2)) << 6 | 63 & e.charCodeAt(3), n = t - 65536;
                return r((n >>> 10) + 55296) + r((1023 & n) + 56320);

              case 3:
                return r((15 & e.charCodeAt(0)) << 12 | (63 & e.charCodeAt(1)) << 6 | 63 & e.charCodeAt(2));

              default:
                return r((31 & e.charCodeAt(0)) << 6 | 63 & e.charCodeAt(1));
            }
        }, d = function(e) {
            return e.replace(f, g);
        }, _ = function(e) {
            var t = e.length, n = t % 4, o = (t > 0 ? a[e.charAt(0)] << 18 : 0) | (t > 1 ? a[e.charAt(1)] << 12 : 0) | (t > 2 ? a[e.charAt(2)] << 6 : 0) | (t > 3 ? a[e.charAt(3)] : 0), i = [ r(o >>> 16), r(o >>> 8 & 255), r(255 & o) ];
            return i.length -= [ 0, 0, 2, 1 ][n], i.join("");
        }, h = function(e) {
            return e.replace(/[\s\S]{1,4}/g, _);
        }, v = function(e) {
            return d(h(e));
        }, m = function(e) {
            return v(String(e).replace(/[-_]/g, function(e) {
                return "-" == e ? "+" : "/";
            }).replace(/[^A-Za-z0-9\+\/]/g, ""));
        };
        t.encode = p, t.decode = m;
    }, function(e, t, n) {
        "use strict";
        function a() {
            try {
                for (var e = u, t = [], n = -(1 / 0), a = 1 / 0, r = 0, o = 0, i = 0; i < e.length; i++) {
                    var c = e[i];
                    n < c && (n = c), a >= c && (a = c), r += c, t.push(c);
                }
                return t.length > 0 && (o = r / t.length, o = Math.floor(100 * o) / 100), {
                    max: n,
                    min: a,
                    average: o
                };
            } catch (e) {
                s().w(e);
            }
        }
        function r() {
            try {
                for (var e = performance.getEntries(), t = [], n = [ i.WEB_EVENT_SUFFIX, i.WEB_PC_PV_SUFFIX, i.WEB_WAP_PV_SUFFIX ], a = -(1 / 0), r = 1 / 0, o = 0, u = 0, c = 0; c < e.length; c++) {
                    var l = e[c], p = [ "beacon", "other", "img" ].some(function(e) {
                        return e === l.initiatorType;
                    }), f = n.some(function(e) {
                        return l.name.indexOf(e) > -1;
                    });
                    if (p && f) {
                        var g = l.duration;
                        a < g && (a = g), r >= g && (r = g), o += g, t.push(g);
                    }
                }
                return t.length > 0 && (u = o / t.length), {
                    max: a,
                    min: r,
                    average: u
                };
            } catch (e) {
                s().w(e);
            }
        }
        var o = n(2), i = n(3), s = n(12), u = [];
        t.getMetric = a, t.getMetricWeb = r, t.push = function(e) {
            var t = e.end - e.start;
            "number" == typeof t && t >= 300 ? u.push(t) : u = [];
        }, t.needSendPerformanceEvent = function() {
            if (u.length >= 10) {
                var e = o.getGlobalValue(i.APLUS);
                e._record(i.PERFORMANCE_WARING, "OTHER", {}), u = [];
            }
        }, t.clear = function() {
            u = [];
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t;
            return t = l.isWeb() ? p.getLsRemoteCfg(g) : f().getSync(c.APLUS_REMOTE_CONFIG), 
            t && t[e];
        }
        function r(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DISABLE_AUTOEVENT_REMOTE, e ]
            });
        }
        function o(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DEVICE_ENABLE, e ]
            });
        }
        function i(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_DISABLE_AUTOPV_REMOTE, e ]
            });
        }
        function s(e) {
            var t = l.getContext();
            t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_AUTOTRACK_ENABLED_REMOTE, e ]
            });
        }
        var u = n(11), c = n(3), l = n(2), p = n(30), f = n(16), g = "APLUS_REMOTE_CONFIG";
        t.getAutoEventStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOEVENT_REMOTE) || a("codelessClickEventStatus");
            return t;
        }, t.getDeviceStatus = function() {
            var e = l.getGlobalValue("aplus");
            return console.log("yz-----currentDeviceEnable", !!a("currentDeviceEnable")), console.log("yz-----APLUS_DEVICE_ENABLE", !!e.getMetaInfo(c.APLUS_DEVICE_ENABLE)), 
            a("currentDeviceEnable") || e.getMetaInfo(c.APLUS_DEVICE_ENABLE);
        }, t.getAutoPageStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_DISABLE_AUTOPV_REMOTE) || a("codelessCollectorPageStatus");
            return t;
        }, t.getAutoTrackStatus = function() {
            var e = l.getGlobalValue("aplus"), t = e.getMetaInfo(c.APLUS_AUTOTRACK_ENABLED_REMOTE) || a("codelessStatus");
            return t;
        }, t.enableCfg = function(e) {
            var t = l.getContext();
            e && (r(e.codelessClickEventStatus), i(e.codelessCollectorPageStatus), s(e.codelessStatus), 
            o(e.currentDeviceEnable), e.eventSamplingRate && e.eventSamplingRate.length > 0 && t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_EVENT_LIMITRATES, u.mapEventSampleRates(e.eventSamplingRate) ]
            }), e.codelessIgnoreComponent && e.codelessIgnoreComponent.length > 0 && t.aplus_queue.push({
                action: "aplus.setMetaInfo",
                arguments: [ c.APLUS_AUTOTRACK_CONFIG_REMOTE, e.codelessIgnoreComponent ]
            }));
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(31), r = n(32), o = n(2), i = n(33), s = n(17), u = n(11);
        e.exports = {
            tryToDecodeURIComponent: function(e, t) {
                var n = t || "";
                if (e) try {
                    n = decodeURIComponent(e);
                } catch (e) {}
                return n;
            },
            parseSemicolonContent: function(e, t, n) {
                t = t || {};
                var r, o, i = e.split(";"), s = i.length;
                for (r = 0; r < s; r++) {
                    o = i[r].split("=");
                    var u = a.trim(o.slice(1).join("="));
                    t[a.trim(o[0]) || ""] = n ? u : this.tryToDecodeURIComponent(u);
                }
                return t;
            },
            nodeListToArray: function(e) {
                var t, n;
                try {
                    return t = [].slice.call(e);
                } catch (r) {
                    t = [], n = e.length;
                    for (var a = 0; a < n; a++) t.push(e[a]);
                    return t;
                }
            },
            getLsCna: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("_") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return decodeURIComponent(n);
                }
                return "";
            },
            setLsCna: function(e, t, n) {
                n && r.set && r.test() && r.set(e, t + "_" + encodeURIComponent(n));
            },
            getLsImpv: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("||") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return decodeURIComponent(n);
                }
                return "";
            },
            setLsImpv: function(e, t, n) {
                n && r.set && r.test() && r.set(e, t + "||" + encodeURIComponent(n));
            },
            setLsRemoteCfg: function(e, t, n) {
                if (n && r.set && r.test()) {
                    var a = i.cloneDeep(n);
                    "object" == typeof a && (a = JSON.stringify(a)), r.set(e, t + "||" + encodeURIComponent(a));
                }
            },
            getLsRemoteCfg: function(e, t) {
                if (r.get && r.test()) {
                    var n = "", a = r.get(e);
                    if (a) {
                        var o = a.split("||") || [];
                        n = t ? o.length > 1 && t === o[0] ? o[1] : "" : o.length > 1 ? o[1] : "";
                    }
                    return s.parse(decodeURIComponent(n));
                }
                return "";
            },
            getUrl: function(e) {
                var t = o.getGlobalValue("aplus"), a = n(3), r = e || "//log.mmstat.com/eg.js";
                try {
                    var i = t.getMetaInfo(a.APLUS_PV_DOMAIN);
                    i = u.fixDomain(i).replace(/\/\w+.gif$/, ""), r = i + "/eg.js";
                } catch (e) {}
                return r;
            }
        };
    }, function(e, t) {
        "use strict";
        function n(e) {
            return "string" == typeof e ? e.replace(/^\s+|\s+$/g, "") : "";
        }
        t.trim = n;
    }, function(e, t) {
        "use strict";
        e.exports = {
            set: function(e, t) {
                try {
                    return localStorage.setItem(e, t), !0;
                } catch (e) {
                    return !1;
                }
            },
            get: function(e) {
                try {
                    return localStorage.getItem(e);
                } catch (e) {
                    return "";
                }
            },
            test: function() {
                var e = "grey_test_key";
                try {
                    return localStorage.setItem(e, 1), localStorage.removeItem(e), !0;
                } catch (e) {
                    return !1;
                }
            },
            remove: function(e) {
                localStorage.removeItem(e);
            }
        };
    }, function(e, t, n) {
        "use strict";
        t.assign = n(34), t.makeCacheNum = function() {
            return Math.floor(268435456 * Math.random()).toString(16);
        }, t.isStartWith = function(e, t) {
            return 0 === e.indexOf(t);
        }, t.isEndWith = function(e, t) {
            var n = e.length, a = t.length;
            return n >= a && e.indexOf(t) == n - a;
        }, t.any = function(e, t) {
            var n, a = e.length;
            for (n = 0; n < a; n++) if (t(e[n])) return !0;
            return !1;
        }, t.isNumber = function(e) {
            return "number" == typeof e;
        }, t.isNaN = function(e) {
            return isNaN ? isNaN(e) : e !== e;
        }, t.isContain = function(e, t) {
            return e.indexOf(t) > -1;
        };
        var a = function(e) {
            var t, n = e.constructor === Array ? [] : {};
            if ("object" == typeof e) {
                if (JSON && JSON.parse) t = JSON.stringify(e), n = JSON.parse(t); else for (var r in e) n[r] = "object" == typeof e[r] ? a(e[r]) : e[r];
                return n;
            }
        };
        t.cloneDeep = a;
        var r = function() {
            for (var e, t = /[?&]([^=#]+)=([^&#]*)/g, n = window.location.href, a = {}; e = t.exec(n); ) a[e[1]] = e[2];
            return a;
        };
        t.getUrlParams = r;
        var o = function(e) {
            if (!e) return !0;
            for (var t in e) if (Object.prototype.hasOwnProperty.call(e, t)) return !1;
            return !0;
        };
        t.isEmptyObject = o;
    }, function(e, t) {
        e.exports = function(e, t) {
            return "function" != typeof Object.assign ? function(e) {
                for (var t = Object(e), n = 1; n < arguments.length; n++) {
                    var a = arguments[n];
                    if (null !== a) for (var r in a) Object.prototype.hasOwnProperty.call(a, r) && (t[r] = a[r]);
                }
                return t;
            }(e, t) : Object.assign({}, e, t);
        };
    }, function(e, t, n) {
        var a = n(12);
        e.exports = function(e) {
            var t = e, n = [];
            this.enqueue = function(e) {
                "number" == typeof t && this.size() >= t && this.dequeue(), n.push(e);
            }, this.dequeue = function() {
                return n.shift();
            }, this.front = function() {
                return n[0];
            }, this.isEmpty = function() {
                return 0 === n.length;
            }, this.clear = function() {
                n.length = 0;
            }, this.size = function() {
                return n.length;
            }, this.items = function() {
                return n;
            }, this.print = function() {
                a().i("---queue: ", n.toString());
            };
        };
    }, function(e, t, n) {
        function a(e, t) {
            if (!e || "-" === e) return "-";
            var n = [];
            for (var a in t) n.push(a + "=" + t[a]);
            var r = n.join("&");
            return r ? e + "?" + r : e;
        }
        var r = n(2), o = "", i = {};
        t.getCurrentPagePath = function() {
            return o;
        }, t.setCurrentPath = function(e) {
            e && (o = e);
        }, t.getPageQuery = function(e) {
            if (e) return i[e];
        }, t.setPageQuery = function(e, t) {
            e && (i[e] = t);
        }, t.getFullPath = function(e) {
            return a(e, i[e]);
        }, t.getPageName = function(e) {
            var t = r.getGlobalValue("aplus"), n = t.getMetaInfo("pageConfig") || {}, a = e || o;
            n.hashMode && (a = location.hash);
            try {
                if (n && "object" == typeof n) for (var i in n) {
                    if (i === a) break;
                    if (n[i] && n[i].regRule) {
                        a = n[i].regRule.test(a) ? i : a;
                        break;
                    }
                }
            } catch (e) {}
            return n[a];
        };
        var s = n(12), u = n(37);
        t.getWxTitle = function(e) {
            if (!e) return "";
            var t = n(9), a = t.getPlatformType(), o = "";
            try {
                if ("wx" === a && __wxConfig) {
                    var i = __wxConfig, c = __wxConfig.page || {}, l = c[e] || c[e + ".html"], p = {}, f = {};
                    if (i.global && i.global.window && i.global.window.navigationBarTitleText && (p.title = i.global.window.navigationBarTitleText), 
                    l && l.window && l.window.navigationBarTitleText && (f.title = l.window.navigationBarTitleText), 
                    !f.title && __wxAppCode__) {
                        var g = __wxAppCode__[e + ".json"];
                        g && g.navigationBarTitleText && (f.title = g.navigationBarTitleText);
                    }
                    var d = r.getContext();
                    d.globalTitleMap && u(d.globalTitleMap, function(t, n) {
                        t === e && (o = n);
                    }), 0 === o.length && (o = f.title || p.title || "");
                }
                return o;
            } catch (e) {
                return s().w("current platform can not track page title"), o;
            }
        }, t.getPageCode = function(e) {
            return (this.getPageName(e) || {}).pageName;
        }, t.getPageTitle = function(e) {
            return (this.getPageName(e) || {}).pageTitle || this.getWxTitle(e);
        }, t.getVTRealtimeCode = function() {
            if (o) {
                var e = i[o] || {}, t = /^\$vt_/, n = decodeURIComponent(e.scene);
                return n && t.test(n) && n.replace(t, "");
            }
        };
    }, function(e, t) {
        "use strict";
        e.exports = function(e, t) {
            if (Object && Object.keys) for (var n = Object.keys(e), a = n.length, r = 0; r < a; r++) {
                var o = n[r];
                t(o, e[o]);
            } else for (var i in e) t(i, e[i]);
        };
    }, function(e, t, n) {
        function a() {
            var e = o.getContext();
            return e.ekvRank ? e.ekvRank++ : e.ekvRank = 1, e.ekvRank;
        }
        function r() {
            var e = o.getContext();
            e.ekvRank = 0;
        }
        var o = n(2);
        t.rank = a, t.clear = r;
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            var t = {};
            try {
                P(e, function(e, n) {
                    0 === e.indexOf("utm_") && (t[e] = n);
                });
            } catch (e) {}
            return t;
        }
        function r(e, t) {
            var n = y.getContext(), a = T.getCurrentPage(), r = a.route || a.is || "", o = a.options || {}, i = A.obj2param(o, !0);
            i && (r = r + "?" + i), e.query || (e.query = {}), e.query.$$_share_uid = n.aplus.getMetaInfo("_anony_id") || n.aplus.__ETAG__CNA__ID__, 
            e.query.$$_utm_medium = 3, e.query = C.assign({}, o, e.query);
            var s = e.path || r, u = "$$_share_uid=" + e.query.$$_share_uid + "&$$_utm_medium=3";
            return s.indexOf("?") > -1 ? e.path = s + "&" + u : e.path = s + "?" + u, e.status = "ready", 
            n.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ t, e ]
            }), e;
        }
        function o() {
            var e = y.getContext(), t = {
                status: "ready"
            };
            e.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onPullDownRefresh", t ]
            });
        }
        function i() {
            var e = y.getContext(), t = this, n = {
                status: "ready",
                context: t
            };
            e.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onReachBottom", n ]
            });
        }
        function s(e) {
            var t = y.getContext();
            try {
                I.setCurrentPath(this.route), e && I.setPageQuery(this.route, e), E().i("Page onLoad: ", this.route, e);
                var n = this;
                S.onAplusReady(t.aplus_queue, b.SUBSCRIBE, function() {
                    t.aplus.appendMetaInfo(b.GLOBAL_PROPERTY, a(e)), t.aplus_queue.push({
                        action: b.PUBLISH,
                        arguments: [ "onLoad", {
                            status: "ready",
                            context: n
                        } ]
                    });
                    var r = T.getCurrentPage();
                    S.resetFn(r, "setData", function(e) {
                        t.aplus_queue.push({
                            action: b.PUBLISH,
                            arguments: [ "onPageDataChanged", {
                                data: e,
                                context: n
                            } ]
                        });
                    });
                });
            } catch (e) {
                E().w("onPageLoad: ", e);
            }
        }
        function u() {
            var e = y.getContext();
            try {
                I.setCurrentPath(this.route), S.onAplusReady(e.aplus_queue, b.SUBSCRIBE, function() {
                    var t = this;
                    e.aplus_queue.push({
                        action: b.PUBLISH,
                        arguments: [ "onShow", {
                            status: "ready",
                            context: t
                        } ]
                    });
                });
            } catch (e) {
                E().w("onPageShow: ", e);
            }
        }
        function c() {
            var e = y.getContext();
            try {
                var t = this;
                e.aplus_queue.push({
                    action: b.PUBLISH,
                    arguments: [ "onReady", {
                        status: "ready",
                        context: t
                    } ]
                });
            } catch (e) {
                E().w("onPageReady: ", e);
            }
        }
        function l() {
            var e = y.getContext();
            try {
                e.aplus_queue.push({
                    action: b.PUBLISH,
                    arguments: [ "onHide", {
                        status: "ready"
                    } ]
                });
            } catch (e) {
                E().w("onPageHide: ", e);
            }
        }
        function p(e) {
            var t = y.getContext();
            t.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onAplusClk", {
                    status: "ready",
                    event: e,
                    context: this
                } ]
            });
        }
        function f(e) {
            var t = y.getContext(), n = this;
            t.aplus_queue.push({
                action: b.PUBLISH,
                arguments: [ "onAplusTouch", {
                    status: "ready",
                    context: n,
                    event: e
                } ]
            });
        }
        function g(e) {
            if (e.onShareAppMessage) {
                var t = e.onShareAppMessage;
                e.onShareAppMessage = function(e) {
                    var n = t.call(this, e) || {};
                    return r(n, "onShareAppMessage");
                };
            }
        }
        function d(e) {
            if (e.onShareTimeline) {
                var t = e.onShareTimeline;
                e.onShareTimeline = function(e) {
                    var n = t.call(this, e) || {};
                    return r(n, "onShareTimeline");
                };
            }
        }
        function _() {
            try {
                var e, t = Page;
                t.after && (e = t.after), Page = function(e) {
                    S.rewriteFn(e, "onShow", u), S.rewriteFn(e, "onHide", l), S.rewriteFn(e, "onUnload", l), 
                    S.rewriteFn(e, "onLoad", s), S.rewriteFn(e, "onReady", c), S.rewriteFn(e, "onPullDownRefresh", o), 
                    S.rewriteFn(e, "onReachBottom", i), S.rewriteFn(e, "onAplusClk", p), S.rewriteFn(e, "onAplusTouch", f), 
                    g(e), d(e), t(e);
                }, e && (Page.after = function() {
                    e.apply(this, arguments);
                });
            } catch (e) {
                E().w("Page hook error");
            }
        }
        function h() {
            try {
                var e = Component;
                Component = function(t) {
                    try {
                        t.methods = t.methods || {};
                        var n = t.methods;
                        S.rewriteFn(n, "onShow", u), S.rewriteFn(n, "onHide", l), S.rewriteFn(n, "onUnload", l), 
                        S.rewriteFn(n, "onLoad", s), g(n), e(t);
                    } catch (n) {
                        e(t);
                    }
                };
            } catch (e) {
                E().w("Component hook error");
            }
        }
        function v(e, t, n) {
            [ "object", "function" ].indexOf(typeof e) > -1 ? n() : E().w("typeof " + t + " is not object cant watchExp.");
        }
        function m() {
            var e = this, t = y.getContext(), a = n(9), r = a.getContext();
            try {
                if (r && r.setNavigationBarTitle) {
                    var o = r.setNavigationBarTitle;
                    Object.defineProperty(r, "setNavigationBarTitle", {
                        get: function() {
                            return function(n) {
                                var r = a.getCurrentPage(), i = r.route || r.is;
                                n = x.isObject(n) ? n : {}, O[i] = n.title, t.globalTitle = O, o.call(e, n);
                            };
                        }
                    });
                }
            } catch (e) {
                E().w(e);
            }
        }
        var y = n(2), b = n(3), S = n(40), P = n(37), A = n(42), E = n(12), I = n(36), T = n(9), C = n(18), x = n(13), O = {};
        e.exports = function() {
            return {
                run: function() {
                    v(Page, "Page", _), v(Component, "Component", h), m();
                }
            };
        };
    }, function(e, t, n) {
        t.resetFn = function() {
            var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "", n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : function() {}, a = e[t];
            e[t] = function() {
                var e = a && a.apply(this, arguments);
                return e ? n.call(this, e) : n.apply(this, arguments);
            };
        }, t.rewriteFn = function(e, t, n) {
            var a = e[t];
            e[t] = function(e) {
                n.call(this, e), a && a.call(this, e);
            };
        }, t.onAplusReady = function(e, t, n) {
            e.push({
                action: t,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && "function" == typeof n && n();
                } ]
            });
        };
        var a = n(41), r = n(9), o = n(12), i = n(11), s = n(37), u = n(13), c = n(34);
        t.click_proxy = function(e, t) {
            var l = n(2), p = l.getGlobalValue("aplus"), f = e[t];
            e[t] = function() {
                var e = f.apply(this, arguments), n = arguments[0];
                if (n && u.isObject(n) && p && p._record) {
                    var l = r.getCurrentPage(), g = Object.create(null);
                    n.currentTarget && (n.currentTarget.dataset && s(n.currentTarget.dataset, function(e, t) {
                        !u.isObject(t) && t && (g[e] = t);
                    }), n.currentTarget.id && (g.element_id = n.currentTarget.id));
                    var d = l.route || l.is || "unknown_page";
                    "unknown_page" === d && o().w("get pagepath failed in click_proxy", l), g = c(g, {
                        is_auto: 1
                    });
                    var _ = a.hash(d, i.getAppKey()) + a.hash(t, i.getAppKey());
                    p._record(_, "CLK", g);
                }
                return e;
            };
        };
    }, function(e, t) {
        "use strict";
        t.hash = function(e, t) {
            var n, a, r = 1315423911, o = t || r;
            for (n = e.length - 1; n >= 0; n--) a = e.charCodeAt(n), o ^= (o << 5) + a + (o >> 2);
            var i = (2147483647 & o).toString(16);
            return i;
        };
    }, function(e, t) {
        "use strict";
        function n(e, t) {
            var n, r, o, i = [], s = e.length;
            for (o = 0; o < s; o++) {
                n = e[o][0], r = e[o][1];
                var u = 0 === n.indexOf(a), c = u || t ? r : encodeURIComponent(r);
                i.push(u ? c : n + "=" + c);
            }
            return i.join("&");
        }
        t.arr2obj = function(e) {
            var t, n, a, r = {}, o = e.length;
            for (a = 0; a < o; a++) t = e[a][0], n = e[a][1], r[t] = n;
            return r;
        }, t.param2obj = function(e) {
            if ("object" == typeof e) return e;
            var t = {};
            if (!e || "string" != typeof e) return t;
            for (var n = e.split("&"), a = 0; a < n.length; a++) {
                var r = n[a], o = r.indexOf("="), i = r.split("="), s = r.length;
                if (2 === i.length) t[i[0]] = i[1] || ""; else if (o > 0) {
                    var u = r.slice(0, o), c = r.slice(o + 1, s) || "";
                    t[u] = c;
                } else t[i[0]] = "";
            }
            return t;
        };
        var a = "::-plain-::";
        t.s_plain_obj = a, t.arr2param = n, t.obj2param = function(e, t) {
            var n, r, o, i = [];
            for (n in e) n && e.hasOwnProperty(n) && ("object" == typeof e[n] ? (r = "" + this.obj2param(e[n]), 
            o = r) : (r = "" + e[n], o = n + "=" + r), t ? i.push(o) : i.push(0 === n.indexOf(a) ? r : o));
            return i.join("&");
        }, t.encodeGokeyValue = function(e) {
            return e;
        };
    }, function(e, t, n) {
        var a = n(44), r = n(2);
        e.exports = function() {
            return {
                run: function() {
                    var e = r.getGlobalValue("aplus");
                    e.aplus_pubsub || (e.aplus_pubsub = a.create());
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(10), r = n(45), o = function(e) {
            for (var t = e.length, n = new Array(t - 1), a = 1; a < t; a++) n[a - 1] = e[a];
            return n;
        }, i = r.extend({
            callable: function(e) {
                if (!a(e)) throw new TypeError(e + " is not a function");
                return e;
            },
            create: function(e) {
                var t = new this();
                for (var n in e) t[n] = e[n];
                return t.handlers = [], t.pubs = {}, t;
            },
            setHandlers: function(e) {
                this.handlers = e;
            },
            subscribe: function(e, t) {
                this.callable(t);
                var n = this, a = n.pubs || {}, r = a[e] || [];
                if (r) for (var o = 0; o < r.length; o++) {
                    var i = r[o]();
                    t.apply(n, i);
                }
                var s = n.handlers || [];
                return e in s || (s[e] = []), s[e].push(t), n.setHandlers(s), n;
            },
            unsubscribe: function(e, t) {
                this.callable(t);
                try {
                    var n = this.handlers[e];
                    if (!n) return this;
                    if ("object" == typeof n && n.length > 0) {
                        for (var a = 0; a < n.length; a++) {
                            var r = t.toString(), o = n[a].toString();
                            r === o && n.splice(a, 1);
                        }
                        this.handlers[e] = n;
                    } else delete this.handlers[e];
                } catch (e) {}
                return this;
            },
            publish: function(e) {
                var t = o(arguments), n = this.handlers || [], r = n[e] ? n[e].length : 0;
                if (r > 0) for (var i = 0; i < r; i++) {
                    var s = n[e][i];
                    a(s) && s.apply(this, t);
                }
                return this;
            },
            cachePubs: function(e) {
                var t = this.pubs || {}, n = o(arguments);
                t[e] || (t[e] = []), t[e].push(function() {
                    return n;
                });
            }
        });
        e.exports = i;
    }, function(e, t, n) {
        "use strict";
        function a() {}
        var r = n(10);
        a.prototype.extend = function() {}, a.prototype.create = function() {}, a.extend = function(e) {
            return this.prototype.extend.call(this, e);
        }, a.prototype.create = function(e) {
            var t = new this();
            for (var n in e) t[n] = e[n];
            return t;
        }, a.prototype.extend = function(e) {
            var t = function() {};
            try {
                r(Object.create) || (Object.create = function(e) {
                    function t() {}
                    return t.prototype = e, new t();
                }), t.prototype = Object.create(this.prototype);
                for (var n in e) t.prototype[n] = e[n];
                t.prototype.constructor = t, t.extend = t.prototype.extend, t.create = t.prototype.create;
            } catch (e) {
                console && console.log(e);
            } finally {
                return t;
            }
        }, e.exports = a;
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(47)(this.options.context.aplus_config);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(48);
        e.exports = function(e) {
            var t = a.getGlobalValue(r.APLUS), n = t._$ = t._$ || {};
            n.is_terminal = !0, n.send_pv_count = 0, n.spm = {
                data: {}
            }, n.meta_info = o.qGet() || {}, t.globalConfig = e.globalConfig;
            for (var i in e.metaInfo) o.setMetaInfo(i, e.metaInfo[i]);
            t._$ = n, t.isInternational = function() {
                return !1;
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            return i = f || {}, f;
        }
        function r() {
            return i || a();
        }
        function o(e, t) {
            return i || (i = {}), "aplus-inject-record-gokey" === e && (_("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter"), 
            p.record("/inject.record.gokey", "OTHER", "")), i[e] = t, !0;
        }
        var i, s = n(49), u = n(42), c = n(2), l = n(3), p = c.getGlobalValue(l.APLUS), f = {}, g = "object", d = "string";
        t.getInfo = a, t.qGet = r, t.setMetaInfo = o;
        var _ = function(e) {
            try {
                console && console.error(e);
            } catch (e) {}
        };
        t.catchException = _;
        var h = function(e) {
            return i || (i = {}), i[e] || "";
        };
        t.getMetaInfo = h;
        var v = function(e) {
            var t = h("aplus-inject-record-gokey");
            return "function" == typeof t ? t(e) : e.gokey;
        };
        t.getUserInjectGokey = v;
        var m = function(e, t) {
            if (e && t) {
                var n, a = function(n) {
                    try {
                        var a = typeof t === d ? JSON.parse(t) : t;
                        i(e, Object.assign({}, n, a));
                    } catch (e) {}
                }, r = function(n) {
                    try {
                        var a = typeof t === d ? JSON.parse(t) : t;
                        i(e, n.concat(a));
                    } catch (e) {}
                }, o = function(e) {
                    e.constructor === Array ? r(e) : a(e);
                }, i = function(e, t) {
                    y(e, t, {
                        from: "appendMetaInfo"
                    });
                }, s = h(e);
                if ("aplus-exinfo" === e && (i(e, Object.assign({}, s, u.param2obj(t))), n = !0), 
                "aplus-page-properties" === e) {
                    var c = t;
                    if (s) for (var l in s) t[l] ? c[l] = Object.assign({}, s[l], t[l]) : c[l] = s[l];
                    i(e, c), n = !0;
                }
                if (s) if (typeof s === g) o(s), n = !0; else try {
                    var p = JSON.parse(s);
                    typeof p === g && (o(p), n = !0);
                } catch (e) {}
                n || i(e, t);
            }
        };
        t.appendMetaInfo = m;
        var y = function(e, t) {
            var n, a, i = "OVERWRITE", u = i;
            if ("object" == typeof e ? (n = e.metaName, a = e.metaValue, u = e.mode || i) : (n = e, 
            a = t), u !== i) return m(n, a);
            if (o(n, a)) {
                var l = c.getGoldlogVal("_$") || {};
                l.meta_info = r();
                var p = c.setGoldlogVal("_$", l), f = [ "setMetaInfo", n, a, {} ];
                return s.doPubMsg(f), s.doCachePubs(f), p;
            }
        };
        t._setMetaInfo = y;
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = "function", o = function() {
            var e = a.getGlobalValue("aplus"), t = e.aplus_pubsub || {}, n = typeof t.publish === r;
            return n ? t : "";
        };
        t.doPubMsg = function(e) {
            var t = o();
            t && typeof t.publish === r && t.publish.apply(t, e);
        }, t.doCachePubs = function(e) {
            var t = o();
            t && typeof t.cachePubs === r && t.cachePubs.apply(t, e);
        }, t.doSubMsg = function(e, t) {
            var n = o();
            n && typeof n.subscribe === r && n.subscribe(e, t);
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(7);
        e.exports = function() {
            return {
                getLogConfig: function() {
                    var e = {}, t = this.options.config.plugins;
                    for (var n in t) e[n] = {
                        plugins: t[n],
                        context: {}
                    }, a(t[n], function(t) {
                        e[n].context[t.name] = t.config || {};
                    });
                    return e;
                },
                run: function() {
                    this.options.context.logConfig = this.getLogConfig(), this.options.context.logConfig.pageLoadTime = this.options.context.PAGE_LOAD_TIME;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(9), o = n(3), i = n(52), s = n(12), u = "EMPTY_CNA";
        e.exports = function() {
            return {
                _syncEtag: function(e) {
                    var t, n = a.getGlobalValue(o.APLUS), c = this, l = function(t) {
                        var r = t && t.data ? t.data.cna : "";
                        r ? (a.setGoldlogVal(g, r), e(r)) : "Y" === n.fetchEtagStatus ? n.aplus_pubsub.subscribe("etag", function(t) {
                            e(t);
                        }) : d();
                    }, p = n.getMetaInfo(o.APLUS_PV_DOMAIN);
                    p && (t = i.getUrl({
                        egUrl: (p.indexOf("//") === -1 ? "//" + p : p) + "/eg.js"
                    }), c.options.context.etag && (c.options.context.etag.egUrl = t));
                    var f = r.getContext(), g = n.globalConfig.ETAG_STORAGE_KEY, d = function() {
                        t && (n.fetchEtagStatus = "Y", r.request(t, {
                            dataType: "text",
                            requestMethodName: "request"
                        }, function(t) {
                            n.fetchEtagStatus = "N";
                            var r = "";
                            try {
                                var o = t.data || "", i = o.split(";");
                                if (i.length > 1) {
                                    var c = i[1], l = c.split("=");
                                    r = l[1] || "", r = r.replace(/\"/g, ""), a.setGoldlogVal(g, r), f.setStorage({
                                        key: g,
                                        data: {
                                            cna: r
                                        }
                                    }), n.aplus_pubsub.publish("etag", r), n.aplus_pubsub.cachePubs("etag", r);
                                }
                            } catch (e) {
                                s().w(e);
                            }
                            r || (r = u), e(r);
                        }, function(e) {
                            s().w(e);
                        }));
                    }, _ = a.getGoldlogVal(g);
                    _ ? e(_) : f.getStorage({
                        key: g,
                        success: function(e) {
                            l(e);
                        },
                        fail: function(e) {
                            l(e);
                        }
                    });
                },
                run: function(e, t) {
                    var n = this, r = a.getGlobalValue("aplus"), o = r.getMetaInfo("aplus-etag-timeout"), i = 200, s = i;
                    try {
                        s = parseInt(o), isNaN(s) && (s = i);
                    } catch (e) {}
                    if (this._syncEtag(function(e) {
                        n.options.context.etag && (n.options.context.etag.cna = e), s >= 200 && t(e);
                    }), !(s < 200)) return s;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(30);
        t.getUrl = function(e) {
            var t = a.getUrl(e && e.egUrl);
            return t;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3);
        e.exports = function() {
            return {
                getMetaInfo: function() {
                    var e = a.getGoldlogVal("_$") || {}, t = e.meta_info;
                    return t;
                },
                getAplusWaiting: function() {
                    var e = this.getMetaInfo() || {};
                    return e["aplus-waiting"];
                },
                run: function(e, t) {
                    var n = this.options.config || {}, a = this.getAplusWaiting();
                    if (a && n.is_auto) switch (a = this.getAplusWaiting() + "", this.options.context.when_to_sendpv = {
                        aplusWaiting: a
                    }, a) {
                      case r._USER_ID:
                      case r._ANONY_ID:
                      case "MAN":
                        return "done";

                      case "1":
                        return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                            t();
                        }, 6e3), 6e3;

                      default:
                        var o = 1 * a;
                        if (o + "" != "NaN") return this.options.context.when_to_sendpv.isWait = !0, setTimeout(function() {
                            t();
                        }, o), o;
                    }
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(12), o = n(9), i = n(3), s = n(11);
        e.exports = function() {
            return {
                getMetaInfo: function(e) {
                    var t = a.getGoldlogVal("_$") || {};
                    return (t.meta_info || {})[e];
                },
                getHostUrl: function() {
                    var e = this.getMetaInfo(i.APLUS_PV_DOMAIN);
                    if (s.checkDomain(e)) {
                        var t = o.getLogDomain();
                        return t ? s.fixDomain(e) + t : (r().tip_w("current miniapp framework is not supported!!"), 
                        "");
                    }
                },
                run: function() {
                    this.options.context.where_to_send.method = "POST";
                    var e = this.getHostUrl();
                    return !e || e.indexOf("https://") < 0 && e.indexOf("http://") ? (r().w("current trackDomain invalid: " + e), 
                    "done") : void (this.options.context.where_to_send.url = e);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(12), i = n(9), s = n(56), u = n(57), c = n(11), l = r.SPM_CNT, p = r.SPM_URL, f = r.SPM_PRE;
        e.exports = function() {
            return {
                getCommonParams: function() {
                    var e = a.getGlobalValue(r.APLUS), t = this.options.context || {}, g = t.etag || {}, d = t.userdata || {}, _ = a.getGoldlogVal("_$") || {}, h = _.spm || {}, v = this.options.config || {}, m = e.getMetaInfo("platformType") || i.getPlatformType(), y = {
                        _dev_id: e.getMetaInfo("_dev_id"),
                        _anony_id: e.getMetaInfo(r._ANONY_ID),
                        _user_id: e.getMetaInfo(r._USER_ID),
                        _user_nick: e.getMetaInfo("_user_nick"),
                        _session_id: e.getMetaInfo("_session_id"),
                        uaid: e.getMetaInfo("uaid") + "" == "1" ? 1 : 0
                    };
                    if (!e.globalConfig.isUM) {
                        var b = n(36), S = i.getCurrentPage(), P = S.route || S.is || "";
                        y._page_title = b.getPageTitle(P) || "";
                    }
                    var A = e._aplus_client || {}, E = e.globalConfig || {}, I = "-";
                    try {
                        var T = getCurrentPages(), C = T[T.length - 1] || {}, x = d.gokey && d.gokey.currentPath;
                        I = x || C.route || C.is;
                    } catch (e) {}
                    var O = new Date().getTime() + I, M = A.model + A.networkType + v.title + g.cna, w = (E.isDecodeUrl ? "DC_" : "") + s.getLogId(O, M), U = c.getAppKey();
                    U || o().w("please set appKey in aplus metaInfo before sendPV!");
                    var k = Object.assign({}, {
                        appKey: U,
                        cache: w,
                        cna: g.cna,
                        etag: g,
                        pre: _.page_referrer || "-",
                        sdk_info: {
                            jsver: E.script_name,
                            lver: E.lver,
                            customSdkId: e.getMetaInfo("customSdkId") || "",
                            platformType: m.toLowerCase()
                        },
                        title: v.title || "",
                        url: I || "-",
                        client: A,
                        timeZone: u.getTimeZone(),
                        gmkey: d.gmkey || "",
                        method: this.options.context.where_to_send.method
                    }, y), L = y;
                    return h.spm_url && (L[p] = h.spm_url || ""), h.spm_pre && (L[f] = h.spm_pre || ""), 
                    h.spm_cnt && (L[l] = h.spm_cnt || ""), L[r.PVID] = e.pvid || "", k.sessionArgs = e.getMetaInfo("aplus-session-args"), 
                    k.globalArgs = e.getMetaInfo("aplus-global-args"), k.gokey = L, k;
                },
                getPvParams: function() {
                    var e = a.getGlobalValue(r.APLUS), t = this.getCommonParams();
                    return this.options.config.is_auto || (t.sdk_info.mansndlog = 1), Object.assign({}, t, {
                        event_code: r.PV_CODE,
                        logtype: "1",
                        logkey: "/vx.gif",
                        event_timestamp: e._$.send_pv_count > 0 ? new Date() : e.logConfig.pageLoadTime
                    });
                },
                getHjljParams: function() {
                    var e = this.options.context || {}, t = e.userdata || {}, n = {
                        event_code: r.EVENT_ID_MAP[t.gmkey] || t.gmkey,
                        logtype: "2",
                        logkey: t.logkey,
                        event_timestamp: new Date()
                    };
                    return Object.assign({}, this.getCommonParams(), n);
                },
                run: function() {
                    var e = {};
                    e = "PV" === this.options.config.recordType ? this.getPvParams() : this.getHjljParams(), 
                    this.options.context.what_to_send.logdata = e;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t, n) {
            return e ? r.hash(encodeURIComponent(e)).substr(0, t) : n;
        }
        var r = n(41), o = function(e) {
            function t(e) {
                var t = "0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ", n = "0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ";
                return 1 == e ? t.substr(Math.floor(60 * Math.random()), 1) : 2 == e ? n.substr(Math.floor(60 * Math.random()), 1) : "0";
            }
            for (var n, a = "", r = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ", o = !1; a.length < e; ) n = r.substr(Math.floor(62 * Math.random()), 1), 
            !o && a.length <= 2 && ("g" == n.toLowerCase() || "l" == n.toLowerCase()) && (0 === a.length && "g" == n.toLowerCase() ? Math.random() < .5 && (n = t(1), 
            o = !0) : 1 == a.length && "l" == n.toLowerCase() && "g" == a.charAt(0).toLowerCase() && (n = t(2), 
            o = !0)), a += n;
            return a;
        };
        t.getLogId = function(e, t) {
            var n = o(8), r = n.substr(0, 4), i = n.substr(0, 6);
            return [ a(e, 4, r), a(t, 4, r), i ].join("");
        };
    }, function(e, t) {
        t.getTimeZone = function() {
            var e = -new Date().getTimezoneOffset() / 60, t = "+";
            e < 0 && (t = "-");
            var n = Math.abs(parseInt(e)), a = Math.abs(parseInt(e) - e), r = "00";
            return a > 0 && (r = 60 * a), "GMT" + t + (n > 9 ? n : "0" + n) + ":" + r;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(3), r = n(2), o = n(9);
        e.exports = function() {
            return {
                run: function() {
                    var e = o.isTB(), t = r.getGlobalValue(a.APLUS), n = this.options.context.what_to_send.logdata || {}, i = getCurrentPages(), s = i[i.length - 1] || {};
                    s && !n.title && (n.title = s.route || ""), t.globalConfig.isAli && (n.url = (e ? "" : "https://" + n.client.appId + "_") + (s.route || s.is || "-"));
                    var u = "-";
                    if (i.length > 1) {
                        var c = i[i.length - 2] || {};
                        u = (!e && t.globalConfig.isAli ? "https://" + n.client.appId + "_" : "") + (c.route || c.is || "-");
                    }
                    n.pre = u, n.sdk_info && (n.sdk_info.windmill = "1"), this.options.context.what_to_send.logdata = n;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(42), r = n(20), o = n(2), i = n(3), s = n(9), u = n(60);
        e.exports = function() {
            return {
                getUserdata: function() {
                    var e = o.getGlobalValue("aplus"), t = this.options.config || {}, n = {};
                    t && !t.is_auto && t.gokey && ("string" == typeof t.gokey ? n = a.param2obj(t.gokey) : "object" == typeof t.gokey && (n = t.gokey));
                    var i = function(e) {
                        r(e) ? e.forEach(function(e) {
                            n = Object.assign({}, n, e);
                        }) : n = Object.assign({}, n, e);
                    };
                    i(e.getMetaInfo("aplus-cpvdata"));
                    var u = s.getCurrentPage(), c = u.route || u.is || "page", l = e.getMetaInfo("aplus-page-properties") || {}, p = l[c];
                    "object" == typeof p && i(p);
                    var f = this.options.context || {}, g = f.userdata || {};
                    return i(g), n;
                },
                updatePre: function(e) {
                    var t = this.options.config || {}, n = o.getGoldlogVal("_$") || {};
                    return t && t.referrer && (n.page_referrer = t.referrer, e.pre = t.referrer), o.setGoldlogVal("_$", n), 
                    e;
                },
                updateUrl: function(e) {
                    var t = this.options.config || {};
                    return t && t.pageUrl && (e.url = t.pageUrl), e;
                },
                updateSpmUrl: function(e) {
                    var t = this.options.config || {}, n = t[i.SPM_URL] || t.spmUrl;
                    return u(n) || (e.gokey[i.SPM_URL] = n), e;
                },
                updateSpmPre: function(e) {
                    var t = this.options.config || {}, n = t[i.SPM_PRE] || t.spmPre;
                    return u(n) || (e.gokey[i.SPM_PRE] = n), e;
                },
                run: function() {
                    var e = this.options.context.what_to_send.logdata, t = Object.assign({}, this.getUserdata(), e.userdata || {});
                    e.gokey = Object.assign({}, e.gokey, t), e = this.updatePre(e), e = this.updateUrl(e), 
                    e = this.updateSpmUrl(e), e = this.updateSpmPre(e), this.options.context.what_to_send.logdata = e, 
                    this.options.context.userdata = e.gokey;
                }
            };
        };
    }, function(e, t) {
        e.exports = function(e) {
            return "undefined" == typeof e;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(62);
        e.exports = function() {
            return {
                run: function() {
                    var e = a.getGoldlogVal("_$") || {}, t = this.options.context.can_to_sendpv || {}, n = e.send_pv_count || 0, o = this.options.config || {};
                    return r.canSendPV(o.track_type) ? (t.flag = "YES", this.options.context.can_to_sendpv = t, 
                    e.send_pv_count = ++n, void a.setGoldlogVal("_$", e)) : "done";
                }
            };
        };
    }, function(e, t, n) {
        function a(e) {
            var t = o.getGlobalValue(i.APLUS), n = t.getMetaInfo(i.APLUS_EVENT_LIMITRATES);
            if (n && n.length > 0) {
                var a = c.find(n, function(t) {
                    return t.eventId === e;
                });
                if (a) {
                    var r = Math.ceil(1e3 * Math.random());
                    return r < 1e3 * a.samplingRate;
                }
                return !0;
            }
            return !0;
        }
        function r() {
            var e = o.getGlobalValue("aplus"), t = e.globalConfig.isUM;
            return !!t;
        }
        var o = n(2), i = n(3), s = n(29), u = n(63), c = n(64), l = n(9), p = n(33), f = n(11);
        t.canToSendHJLJ = function(e, t) {
            var n = s.getDeviceStatus();
            if (console.log("yz-----deviceStatus", !!n), !n) try {
                var r = l.getContext();
                return p.isEmptyObject(r) ? void 0 : t === i.APP_START || t === i.APP_END;
            } catch (e) {}
            var o = s.getAutoTrackStatus(), c = s.getAutoEventStatus(), g = u.getAutoTrackStatus(), d = {};
            if (d = "string" == typeof e ? f.arr2obj(f.param2arr(e)) : e, d.auto_element) {
                if (2 === c || 2 === o) return;
                if (!o && !g) return;
            }
            if (a(t)) return !0;
        }, t.canSendPV = function(e) {
            if (!r()) return !0;
            var t = s.getDeviceStatus(), n = s.getAutoPageStatus(), a = u.localAutoPVDisabled(), o = !0;
            if (t) {
                if ("1" === e) return !(2 === n || !n && a);
            } else o = !1;
            return o;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(3), r = n(2);
        t.localAutoEventDisabled = function() {
            var e = r.getGlobalValue("aplus");
            return !!e.getMetaInfo(a.APLUS_DISABLE_AUTOEVENT);
        }, t.localAutoPVDisabled = function() {
            var e = r.getGlobalValue("aplus");
            return !(!e.getMetaInfo(a.APLUS_DISABLE_AUTOPV) && "MAN" !== e.getMetaInfo("aplus-waiting"));
        }, t.getAutoTrackStatus = function() {
            var e = r.getGlobalValue("aplus");
            return !!e.getMetaInfo(a.APLUS_AUTOTRACK_ENABLED);
        };
    }, function(e, t) {
        "use strict";
        function n(e) {
            return Array.isArray ? Array.isArray(e) : /Array/.test(Object.prototype.toString.call(e));
        }
        function a(e) {
            var t = [];
            if (n(e)) for (var r = 0; r < e.length; r++) {
                var o = e[r];
                n(o) ? (e[r] = a(o), t = t.concat(e[r])) : t.push(o);
            }
            return t;
        }
        function r(e, t) {
            try {
                return e.find(t);
            } catch (r) {
                for (var n = 0; n < e.length; n++) {
                    var a = t(e[n]);
                    if (a) return e[n];
                }
            }
        }
        t.indexof = function(e, t) {
            var n = -1;
            try {
                n = e.indexOf(t);
            } catch (r) {
                for (var a = 0; a < e.length; a++) e[a] === t && (n = a);
            } finally {
                return n;
            }
        }, t.itemMatch = function(e, t) {
            var n = !1;
            try {
                if (!this.isArray(e)) return n;
                n = e.some(function(e) {
                    return e && e.length > 0 && t.indexOf(e) !== -1;
                });
            } catch (r) {
                for (var a = 0; a < e.length; a++) if (t.indexOf(e[a]) !== -1) {
                    n = !0;
                    break;
                }
            }
            return n;
        }, t.isArray = n, t.flat = a, t.find = r;
    }, function(e, t, n) {
        "use strict";
        var a = n(42), r = n(20), o = n(2);
        e.exports = function() {
            return {
                getUserData: function() {
                    var e = o.getGlobalValue("aplus"), t = this.options.context || {}, n = t.userdata || {}, i = t.what_to_send.logdata.gokey;
                    i = Object.assign({}, i, a.param2obj(n.gokey)), i = Object.assign({}, i, a.param2obj(e.getMetaInfo("aplus-exinfo") || {}));
                    var s = e.getMetaInfo("aplus-exdata");
                    return r(s) ? s.forEach(function(e) {
                        i = Object.assign({}, i, e);
                    }) : i = Object.assign({}, i, s || {}), i;
                },
                run: function() {
                    var e = this.options.context.what_to_send.logdata, t = this.getUserData();
                    "1010" === e.gmkey && (e.arg1 = t.duration || e.logkey), e.gokey = t, this.options.context.what_to_send.logdata = e;
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(67)(this.options.context.logConfig);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(49), r = n(3), o = n(2);
        e.exports = function(e) {
            var t = o.getGlobalValue(r.APLUS);
            if (!t._aplus_api) {
                t._aplus_api = {
                    status: r.COMPLETE
                };
                var i = n(68).run.create({
                    logConfig: e
                });
                for (var s in i) t[s] = i[s];
                o.setGlobalValue(r.APLUS, t);
                var u = [ r.APLUS + "Ready", r.COMPLETE ];
                a.doPubMsg(u), a.doCachePubs(u);
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(10), o = n(9), i = n(20), s = n(3), u = n(49), c = n(14), l = n(2), p = n(69), f = n(48), g = n(73), d = n(12), _ = n(11), h = n(36), v = n(62), m = function(e, t) {
            my && my.call && "function" == typeof t && my.call("handleLoggingAction", {
                type: "behavior",
                subType: e.subType
            }, function(n) {
                var a = {};
                a[e.spmType] = n[e.spmType], t(a);
            });
        }, y = !0, b = !1, S = a.extend({
            _send: function(e, t, n, a, r) {
                return "object" == typeof t && "POST" === n ? o.request(e, {
                    method: n,
                    data: t,
                    dataType: "base64"
                }, a, r) : o.request(e + "?" + t, {
                    method: n,
                    dataType: "base64"
                }, a, r), e;
            },
            _requestVTConfig: function(e, t, n) {
                o.request(e, {
                    method: "GET",
                    dataType: "json"
                }, t, n);
            },
            _requestRemoteConfig: function(e, t, n) {
                o.request(e, {
                    method: "GET"
                }, t, n);
            },
            _sendPV: function(e, t) {
                var n = l.getGlobalValue(s.APLUS);
                e = e || {}, e.pageName && n._setMetaInfo(s.APLUS + "-pagename", e.pageName);
                var a = new p();
                e.recordType = "PV", e.method || (e.method = "GET");
                var r = n.logConfig.pv;
                return a.run({
                    plugins: r.plugins,
                    context: c(r.context)
                }, {
                    config: e,
                    userdata: t || {},
                    pubsubType: "pv",
                    middlewareMessageKey: "mw_change_pv"
                }), !0;
            },
            _combineRecord: function(e, t, n, a) {
                var r = l.getGlobalValue(s.APLUS), o = "EXP";
                if (!r.globalConfig.isAli || t !== o && "CLK" !== t) console.warn("only support EXP or CLK log to combile record!"); else if (i(n)) {
                    a || (a = "POST");
                    var u = [], c = "true";
                    n.forEach(function(e) {
                        u.push({
                            exargs: "object" == typeof e.exargs ? e.exargs : {},
                            scm: e.scm,
                            spm: e.spm,
                            aplusContentId: e.aplusContentId
                        }), "false" === e._aplus_sendtomy && "true" === c && (c = "false");
                    });
                    var p = [];
                    p.push((t === o ? "expdata=" : "clkdata=") + JSON.stringify(u)), p.push(t === o ? "_is_auto_exp=1" : "_is_auto_clk=1"), 
                    p.push("_eventType=custom"), p.push("_method=" + a), p.push("_pkgSize=" + n.length), 
                    "false" === c && p.push("_aplus_sendtomy=false"), r.record(e, t, p.join("&"), a);
                } else console.warn("type of gokeys must be ArrayObject!");
            },
            _record: function(e, t, n, a, o) {
                var i = l.getGlobalValue(s.APLUS);
                n = f.getUserInjectGokey({
                    logkey: e,
                    gmkey: t,
                    gokey: n
                }), e += "", e && 0 !== e.indexOf("/") && i.globalConfig.isAli && (e = "/" + e);
                var u = i.globalConfig.isAli, g = new p(), d = i.logConfig.hjlj;
                return u ? g.run({
                    plugins: d.plugins,
                    context: c(d.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: a || "GET"
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n
                    },
                    pubsubType: "hjlj",
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    r(o) && o();
                }) : (console.log("yz-----abc", v.canToSendHJLJ(n, e)), v.canToSendHJLJ(n, e) && g.run({
                    plugins: d.plugins,
                    context: c(d.context)
                }, {
                    config: {
                        recordType: "COMMON_HJLJ",
                        method: a || "GET"
                    },
                    userdata: {
                        logkey: e,
                        gmkey: t,
                        gokey: n
                    },
                    pubsubType: "hjlj",
                    middlewareMessageKey: "mw_change_hjlj"
                }, function() {
                    r(o) && o();
                })), !0;
            },
            getPageSPM: function() {
                var e = l.getGlobalValue(s.APLUS), t = e._$ || {}, n = t.spm || {}, a = n.data || {};
                return [ a.a, a.b ];
            },
            _setPageSPM: function() {
                var e, t = {}, n = arguments;
                "object" == typeof n[0] ? (t = n[0], e = n[1]) : (t.spmCnt = [ n[0], n[1], "0", "0" ].join("."), 
                e = n[2]);
                var a;
                t.spmCnt || t.spmUrl || !f.getMetaInfo("pageConfig") ? (a = [ "setPageSPM", t ], 
                u.doPubMsg(a), u.doCachePubs(a)) : (a = [ "clearPageSPM" ], u.doPubMsg(a), u.doCachePubs(a));
                var r = "function" == typeof e ? e : function() {};
                r(a);
            },
            _setMetaInfo: function(e, t) {
                return f._setMetaInfo(e, t);
            },
            _updatePageProperties: function(e) {
                if ("object" == typeof e) {
                    g() ? my.reportAnalytics("updatePageProperties", e) : "my" === o.getPlatformType() && my.call("reportData", {
                        spmDetail: e,
                        ignoreDefaultPageMonitor: !0
                    });
                    var t = o.getCurrentPage(), n = t.route || t.is || "page", a = {};
                    a[n] = e, f.appendMetaInfo("aplus-page-properties", a);
                }
            },
            _updateNextPageProperties: function(e) {
                if (e || (e = {}), my) {
                    var t = {
                        type: "updateNextProp",
                        eventId: -1,
                        eventid: -1,
                        name: "",
                        pageName: "",
                        comName: "",
                        arg1: "",
                        arg2: "",
                        arg3: "",
                        param: e,
                        params: e
                    };
                    my.callUserTrack ? my.callUserTrack("commitut", t) : my.reportAnalytics && my.reportAnalytics("enter", t);
                }
            },
            _appendMetaInfo: f.appendMetaInfo,
            getMetaInfo: function(e) {
                return f.getMetaInfo(e);
            },
            cloneDeep: c,
            _skipPage: function() {
                my && my.callUserTrack && my.callUserTrack("skipPage");
            },
            _pageAppear: function() {
                my && my.callUserTrack && y && (y = !1, b = !0, my.callUserTrack("pageAppear"));
            },
            _pageDisappear: function() {
                my && my.callUserTrack && b && (y = !0, b = !1, my.callUserTrack("pageDisappear"));
            },
            _updatePageUtparam: function(e) {
                e || (e = {}), my && my.callUserTrack && my.callUserTrack("updatePageUtparam", {
                    utParamJson: JSON.stringify(e)
                });
            },
            _updateNextPageUtparam: function(e) {
                e || (e = {}), my && my.callUserTrack && my.callUserTrack("updateNextPageUtparam", {
                    utParamJson: JSON.stringify(e)
                });
            },
            _updateSessionProperties: function(e) {
                my && my.call && "object" == typeof e && my.call("handleLoggingAction", {
                    type: "behavior",
                    subType: "updateSessionProperties",
                    extData: e
                });
            },
            _getPageSpmUrl: function(e) {
                m({
                    subType: "getPageSpmUrl",
                    spmType: "spmUrl"
                }, e);
            },
            _getPageSpmPre: function(e) {
                m({
                    subType: "getPageSpmPre",
                    spmType: "spmPre"
                }, e);
            },
            _setPageName: function(e, t) {
                if (!e) return void d().w("setPageName failed:  pageName=" + e);
                var n = t || h.getCurrentPagePath(), a = c(f.getMetaInfo("pageConfig") || {});
                a[n] = e, f.appendMetaInfo("pageConfig", a);
            },
            getPageName: function(e) {
                return h.getPageCode(e);
            },
            _getElementSPM: function(e, t) {
                if (e) {
                    var n = h.getPageCode() || "";
                    if ("string" != typeof e) {
                        var a = e.dataset && e.dataset.trackerParams || "", r = _.jsonLikeStr2JSON(a);
                        return [ n, r.spmC, r.spmD ].join(".");
                    }
                    var i, s = o.getContext(), u = f.getMetaInfo("aplus-auto-clk") || [], c = f.getMetaInfo("aplus-auto-exp") || [];
                    try {
                        var l;
                        for (l = 0; l < u.length; l++) {
                            var p = u[l];
                            if (p.cssSelector === e) {
                                i = [ n, p.spmC, p.spmD ].join(".");
                                break;
                            }
                        }
                        for (l = 0; l < c.length; l++) {
                            var g = c[l];
                            if (g.cssSelector === e) {
                                i = [ n, g.spmC, g.spmD ].join(".");
                                break;
                            }
                        }
                        var v = s.createSelectorQuery().selectAll(e);
                        "function" == typeof v.fields && v.fields({
                            dataset: !0,
                            id: !0
                        }, function(e) {
                            var n = [];
                            if (e && e.length > 0) {
                                for (var a = 1; a <= e.length; a++) n.push(i + "_" + a);
                                t && "function" == typeof t && t(n);
                            }
                        }).exec();
                    } catch (e) {
                        d().w("current miniapp platform does not support dom element query, errmsg: ", e);
                    }
                }
            },
            _recordAppLink: function(e, t, n) {
                if (!e.targetAppKey) return d().w("send $$_app_link failed: targetAppKey is null"), 
                !1;
                var a = l.getGlobalValue(s.APLUS);
                return a._record("$$_app_link", "OTHER", e, t, n);
            }
        });
        t.run = S;
    }, function(e, t, n) {
        "use strict";
        var a = n(7), r = n(2), o = n(10), i = n(49), s = n(70), u = n(3), c = n(71), l = n(72), p = function() {};
        p.prototype.run = function(e, t, n) {
            var p = new l();
            p.init({
                middleware: [],
                config: t.config,
                plugins: e.plugins
            });
            var f = p.run(), g = o(e.context) ? new e.context() : e.context;
            g.userdata = t.userdata, g.logger = s.logger;
            var d = {
                context: g,
                pubsub: r.getGoldlogVal("aplus_pubsub"),
                pubsubType: t && t.pubsubType
            }, _ = new c();
            _.create(d), _.wrap(f, function() {
                d.context.status = u.COMPLETE, t && (t.middlewareMessageKey && i.doPubMsg([ t.middlewareMessageKey, d.context ]), 
                t.messageFnQueue && a(t.messageFnQueue, function(t) {
                    t(r.getGlobalValue(u.APLUS), e);
                })), o(n) && n(d.context);
            })();
        }, e.exports = p;
    }, function(e, t, n) {
        "use strict";
        var a = n(48), r = "[APLUS] -- ";
        t.logger = function(e) {
            e || (e = {});
            var t = e.level || "warn";
            console && console[t] && console[t](r + e.msg);
        }, t.log = function() {
            var e = a && a.getMetaInfo("debug");
            e && console.log.apply(console, [ r ].concat(Array.prototype.slice.apply(arguments)));
        }, t.debugLog = function(e) {
            var t = n(2).getGlobalValue("aplus");
            t && t.aplusDebug && this.logger(e);
        };
    }, function(e, t, n) {
        "use strict";
        function a() {}
        var r = n(10), o = n(64), i = n(12);
        a.prototype.create = function(e) {
            for (var t in e) "undefined" == typeof this[t] && (this[t] = e[t]);
            return this;
        }, a.prototype.calledList = [], a.prototype.setCalledList = function(e) {
            o.indexof(this.calledList, e) === -1 && this.calledList.push(e);
        }, a.prototype.resetCalledList = function() {
            this.calledList = [];
        }, a.prototype.wrap = function(e, t) {
            var n = this, a = this.context || {}, s = a.compose || {}, u = s.maxTimeout || 1e4;
            return function(a) {
                var s, c = e.length, l = 0, p = 0, f = function(g, d) {
                    if (l === c) return a = "done", n.resetCalledList(), r(t) && d !== a && t.call(n, a), 
                    void clearTimeout(s);
                    if (o.indexof(n.calledList, l) === -1) {
                        if (n.setCalledList && n.setCalledList(l), !(e && e[l] && r(e[l][0]))) return;
                        try {
                            a = e[l][0].call(n, a, function() {
                                l++, p = 1, f(l);
                            });
                        } catch (e) {
                            i().w(e);
                        }
                    }
                    var _ = "number" == typeof a;
                    if ("pause" === a || _) {
                        p = 0;
                        var h = _ ? a : u, v = e[l] ? e[l][1] : "";
                        s = setTimeout(function() {
                            0 === p && (i().w("jump the middleware about " + v + ", because waiting timeout maxTimeout = " + h), 
                            a = null, l++, f(l));
                        }, h);
                    } else "done" === a ? (l = c, f(l, a)) : (l++, f(l));
                };
                return n.calledList && n.calledList.length > 0 && n.resetCalledList(), f(l);
            };
        }, e.exports = a;
    }, function(e, t, n) {
        "use strict";
        var a = n(34), r = n(12);
        e.exports = function() {
            return {
                init: function(e) {
                    this.opts = e, e && "object" == typeof e.middleware && e.middleware.length > 0 ? this.middleware = e.middleware : this.middleware = [], 
                    this.plugins_name = [];
                },
                pubsubInfo: function(e, t) {
                    try {
                        var n = e.pubsub;
                        n && n.publish("plugins_change_" + e.pubsubType, t);
                    } catch (e) {
                        r().w(e);
                    }
                },
                run: function(e) {
                    e || (e = 0);
                    var t = this, n = this.middleware, r = this.opts || {}, o = r.plugins;
                    if (o && "object" == typeof o && o.length > 0) {
                        var i = o[e];
                        if (this.plugins_name.push(i.name), n.push([ function(e, n) {
                            t.pubsubInfo(this, i);
                            var o = new i.path();
                            return o.init || (o.init = function(e) {
                                this.options = e;
                            }), o.init({
                                context: this.context,
                                config: a(i.config || {}, r.config)
                            }), o.run(e, function(e) {
                                setTimeout(function() {
                                    n(i, e);
                                }, 1);
                            });
                        }, i.name ]), e++, o[e]) return this.run(e);
                    }
                    return n;
                }
            };
        };
    }, function(e, t) {
        function n() {
            try {
                var e = navigator ? navigator.userAgent || navigator.swuserAgent : "";
                return /Triver/g.test(e);
            } catch (e) {
                return !1;
            }
        }
        e.exports = n;
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(75)();
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(76), r = n(2), o = n(3), i = n(64), s = n(33), u = n(36), c = n(9);
        e.exports = function() {
            var e = r.getContext(), t = r.getGlobalValue("aplus"), n = [], l = function(e) {
                function r(t, r) {
                    i.isArray(t) && l.push({
                        config: r,
                        elements: t
                    }), l.length === n.length && a.watch_click(e.event, l, e.context);
                }
                n = t.getMetaInfo("aplus-auto-clk");
                var o = u.getPageCode(), l = [];
                i.isArray(n) && n.forEach(function(e) {
                    s.isStartWith(e.cssSelector, ".") || (e.cssSelector = "." + e.cssSelector), e.spmB || (e.spmB = o);
                    var t = c.getContext().createSelectorQuery().selectAll(e.cssSelector);
                    "function" == typeof t.fields ? t.fields({
                        id: !0,
                        dataset: !0,
                        rect: !0,
                        scrollOffset: !0
                    }, function(t) {
                        r(t, e);
                    }).exec() : t.boundingClientRect().exec(function(t) {
                        r(t, e);
                    });
                });
            };
            e.aplus_queue.push({
                action: o.SUBSCRIBE,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && (n = t.getMetaInfo("aplus-auto-clk"));
                } ]
            }), e.aplus_queue.push({
                action: o.SUBSCRIBE,
                arguments: [ "onAplusClk", function(e) {
                    "ready" === e.status && l(e);
                } ]
            });
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            var n = o.getGoldlogVal("_aplus_auto_exp") || {}, a = n.hashMap || {};
            for (var i in a) for (var s = a[i] || [], u = 0; u < s.length; u++) {
                var l = s[u] || {}, p = l.expConfig || {};
                if (e.cssSelector === p.cssSelector) {
                    var f = c({
                        index: t
                    }, p);
                    if (f === l.hash_value) return r(l.dataset);
                }
            }
        }
        var r = n(14), o = n(2), i = n(11), s = n(7), u = n(77), c = n(78), l = n(79);
        t.watch_click = function(e, t, n) {
            function c(e, t) {
                var n = {};
                e && (e.changedTouches ? n = e.changedTouches[0] : e.detail && (n = e.detail));
                var a = n.clientX || 0, r = n.clientY || 0, o = t.top, i = t.bottom;
                return t.scrollTop && (o += t.scrollTop, i += t.scrollTop), t.left < a && a < t.right && o < r && r < i;
            }
            var p = o.getGlobalValue("aplus"), f = [];
            s(t, function(t) {
                for (var n = t.elements, o = t.config, s = 0; s < n.length; s++) {
                    var u = n[s];
                    if (c(e, u)) {
                        var g = s + 1, d = u.dataset || a(o, g) || {}, _ = {}, h = i.jsonLikeStr2JSON(d.trackerParams) || {};
                        if (p.globalConfig.isAli) if (_ = r(p._$.spm.data || {}), document && p.getMetaInfo("aplus-vt-cfg-url")) {
                            var v = l.getDataSet(o, g - 1), m = v.spmC || o.spmC || "0", y = v.spmD || o.spmD || "0";
                            _.c = m, _.d = y, d = Object.assign(d, v);
                        } else {
                            var b = d.tracker || o.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                            if (_.c = b, _.c && "0" !== _.c) {
                                var S = "d" + g;
                                _.d = S;
                            }
                        } else _.b = o.spmB, o.spmC ? _.c = o.spmC : _.c = h.spmC ? encodeURIComponent(h.spmC) : "", 
                        o.spmD ? _.d = g ? o.spmD + "_" + g : o.spmD : _.d = h.spmD ? encodeURIComponent(h.spmD) : "";
                        f.push({
                            dataset: d,
                            config: o,
                            element: u,
                            spmData: _
                        });
                    }
                }
            });
            var g = void 0;
            1 === f.length ? g = f[0] : f.length > 1 && (g = f.reduce(function(e, t) {
                var n = e, a = e.element, r = t.element;
                return r.top >= a.top && r.right <= a.right && r.bottom <= a.bottom && r.left >= a.left && (n = t), 
                n;
            })), g && u.pushEvent("CLK", g.dataset, g.config, g.element, g.spmData, n);
        };
    }, function(e, t, n) {
        function a(e, t, n, a) {
            var r = o.getGlobalValue("aplus") || {}, u = r.getMetaInfo;
            if ("function" == typeof u) {
                var c = u(e), l = {};
                return "function" == typeof c && (l = c(t ? s(t) : {}, n, a)), i.param2obj(l);
            }
            return {};
        }
        function r(e, t) {
            var n = "";
            try {
                var a = new Number(e);
                n = parseFloat(a.toFixed(t));
            } catch (t) {
                n = e;
            }
            return n;
        }
        var o = n(2), i = n(42), s = n(14), u = n(20), c = n(45), l = n(70), p = {}, f = 3, g = "POST", d = "EXP", _ = c.extend({
            push: function(e) {
                var t = o.getGlobalValue("aplus");
                for (this.buffer.push(e); this.buffer.length >= this.pkgSize; ) {
                    var n = this.buffer.splice(0, this.pkgSize);
                    n.length > 0 && t.combineRecord(this.logkey, d, n, this.method);
                }
            }
        });
        t.pushEvent = function(e, t, n, i, c, f) {
            var _ = o.getGlobalValue("aplus"), h = !!_.globalConfig && _.globalConfig.isAli, v = n.props, m = {}, y = {};
            if (t) for (var b in t) b.toLowerCase().match(/^data-/) ? y[b.toLowerCase().replace(/^data-/, "").replace(/-/g, "")] = t[b] : y[b] = t[b];
            if (v && u(v)) for (var S = 0; S < v.length; S++) {
                var P = v[S].toLowerCase().replace(/^data-/, "").replace(/-/g, "");
                m[P] = y[P];
            } else m = Object.assign({}, y);
            i && e === d && (m = Object.assign({}, m, {
                _w: r(i.width, 2),
                _h: r(i.height, 2),
                _x: r(i.x, 2),
                _y: r(i.y, 2),
                _rate: r(i.viewabilityRate || i.intersectionRatio, 2),
                _viewability: "intersection"
            })), n._vt && (m._vt = n._vt);
            var A = e === d ? "aplus-auto-exp-userfn" : "aplus-auto-clk-userfn", E = a(A, i, n.cssSelector, c);
            E.spm || (h && c && c.a && c.b ? E.spm = [ c.a, c.b, c.c || "0", c.d || "0" ].join(".") : E.spm = c && c.b ? c : void 0);
            var I = {}, T = t.trackerParams || t["tracker-params"];
            if (T) try {
                var C = JSON.parse(T);
                m = Object.assign(m, C), delete m.trackerParams, delete m.trackerparams;
            } catch (e) {}
            if ("EXP" === e && h && p[n.logkey]) {
                var x = Object.assign({}, m, E);
                I = Object.assign({}, {
                    exargs: x
                }), l.log("auto exp:", n.logkey, x), p[n.logkey].push(s(I));
            } else if (I = Object.assign({
                is_auto: 1
            }, m, E, n.customArgs), l.log("auto clk:", n.logkey, I), f) {
                var O = f.route;
                _.record(n.logkey, e, Object.assign({}, I, {
                    currentPath: O
                }), g);
            } else _.record(n.logkey, e, I, g);
        }, t.watchRecord = function(e) {
            var t = o.getGlobalValue("aplus"), n = !!t.globalConfig && t.globalConfig.isAli;
            n && e && e.forEach(function(e) {
                p.hasOwnProperty(e.logkey) || (p[e.logkey] = _.create({
                    length: 0,
                    buffer: [],
                    logkey: e.logkey,
                    pkgSize: "number" == typeof e.pkgSize && e.pkgSize || f,
                    method: e.method || g
                }));
            });
        }, t.clearRecord = function() {
            var e = o.getGlobalValue("aplus"), t = !!e.globalConfig && e.globalConfig.isAli;
            if (t) for (var n in p) {
                var a = p[n].buffer || [];
                a.length > 0 && (e.combineRecord(n, d, a, g), p[n].buffer = []);
            }
        };
    }, function(e, t) {
        e.exports = function(e, t) {
            var n = [ t.logkey, t.cssSelector ];
            return t.positionSelector && n.push(t.positionSelector), e.id && n.push(e.id), e.index >= 0 && n.push(e.index), 
            e.dataset && e.dataset.privateNodeId && delete e.dataset.privateNodeId, e.dataset && n.push(JSON.stringify(e.dataset)), 
            n = n.join("_");
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(11), r = n(33);
        t.getDataSet = function(e, t) {
            var n, o = {};
            n = r.isStartWith(e.cssSelector, ".") ? e.cssSelector.slice(1, e.cssSelector.length) : e.cssSelector;
            var i = document.getElementsByClassName(n);
            if (i && i.length > 0) {
                var s = i[t].dataset || {};
                for (var u in s) {
                    var c = s[u];
                    switch (typeof c) {
                      case "function":
                        o[u] = c();
                        break;

                      case "object":
                        o = Object.assign(o, c);
                        break;

                      case "string":
                        if ("trackerParams" === u) {
                            var l = a.jsonLikeStr2JSON(s.trackerParams);
                            o = Object.assign(o, l);
                        } else o[u] = c;
                        break;

                      case "number":
                      case "boolean":
                        o[u] = c;
                        break;

                      default:
                        continue;
                    }
                }
            }
            return o;
        }, t.isRax = function() {
            return !!document;
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function() {
            return {
                run: function() {
                    n(81)();
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(82), o = n(83), i = n(3), s = n(9), u = {};
        e.exports = function() {
            function e(e, t, n) {
                var a = function(n, a) {
                    if ("aplus-auto-exp" === n) {
                        var i = o.getAutoExpConfig(a);
                        if (JSON.stringify(i) === JSON.stringify(g)) return;
                        g = i, a && g && g.length > 0 && r.watch_exposure(e, g, t);
                    }
                };
                c.aplus_queue.push({
                    action: n,
                    arguments: [ "setMetaInfo", a ]
                });
            }
            function t(e, t) {
                g = f.getMetaInfo("aplus-auto-exp"), setTimeout(function() {
                    r.watch_exposure(e, g, t);
                }, 0);
            }
            function n(e) {
                try {
                    var n = s.getCurrentPage(), a = n.route || n.is, r = u[a], o = JSON.stringify(e.data);
                    r !== o && (u[a] = o, t(e.context, 0));
                } catch (e) {}
            }
            var c = a.getContext(), l = 0, p = 0, f = a.getGlobalValue("aplus");
            if (!f._aplus_auto_exp) {
                f._aplus_auto_exp = {
                    hashMap: {}
                };
                var g = [];
                c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onShow", function(n) {
                        if ("ready" === n.status) {
                            e(n.context, 1, i.SUBSCRIBE), 0 === l ? (t(n.context, 1), l = 1) : t(n.context, 0);
                            try {
                                var a = s.getCurrentPage(), r = a.route || a.is;
                                u[r] = r;
                            } catch (e) {}
                        }
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onAplusTouch", function(e) {
                        "ready" === e.status && (0 === p ? (p = 1, t(e.context, 1)) : n(e));
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onPageDataChanged", function(e) {
                        setTimeout(function() {
                            n(e);
                        }, 200);
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onHide", function(t) {
                        "ready" === t.status && (u = {}, l = 0, p = 0, e(t.context, 1, i.UNSUBSCRIBE), r.clear());
                    } ]
                }), c.aplus_queue.push({
                    action: i.SUBSCRIBE,
                    arguments: [ "onUnload", function(e) {
                        "ready" === e.status && (u = {}, r.clear());
                    } ]
                });
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a, r = n(2), o = n(83), i = n(14), s = n(9), u = n(33), c = n(11), l = n(7), p = n(64), f = n(36), g = n(77), d = n(78), _ = n(79), h = n(6), v = [];
        t.watch_exposure = function(e, t, n, m) {
            function y(r) {
                function o(e) {
                    var t = c[0];
                    t && !u.isStartWith(c[0], ".") && (t = "." + t);
                    try {
                        var n = a.createSelectorQuery().selectAll(t);
                        "function" == typeof n.fields ? n.fields({
                            dataset: !0,
                            id: !0
                        }, function(t) {
                            p.isArray(t) && e({
                                elements: t,
                                type: "COMMON"
                            });
                        }).exec() : console.warn("current platform does not support auto exposure tracking!");
                    } catch (e) {
                        console.warn("current platform does not support auto exposure tracking! err = ", e);
                    }
                }
                if (r < t.length) {
                    var s = t[r];
                    T = 0, v.forEach(function(e) {
                        e.subject[0] === s.cssSelector && e.subject[1] === s.positionSelector && (T = 1);
                    });
                    var c = [ s.cssSelector, s.positionSelector ];
                    o(function(a) {
                        if (0 === T || 0 === n) {
                            var o = P(e);
                            if (o.subject = c, v.length > t.length - 1) {
                                var u = v.shift();
                                u.disconnect();
                            }
                            v.push(o), l(a.elements, function(e, t) {
                                e.index = t + 1 + "", b(e, s) || S(e, s);
                            }), A(o, s, function(e, t) {
                                h.getIndexByRect(t.cssSelector, e.boundingClientRect, function(n) {
                                    var a = n + 1;
                                    if (a) {
                                        var r = i(e);
                                        r.index = "" + a;
                                        var o = i(r.dataset);
                                        S({
                                            id: r.id,
                                            index: r.index,
                                            dataset: o
                                        }, t), E(r, o, s);
                                    }
                                });
                            });
                        }
                        y(++r);
                    });
                }
            }
            function b(e, t) {
                var n = d(e, t), a = e.index;
                return x[t.logkey] && x[t.logkey].forEach(function(e) {
                    if (e.hash_value === n && e.index === a) return !0;
                }), !1;
            }
            function S(e, t) {
                var n = d(e, t);
                try {
                    var a = e.index;
                    if (x[t.logkey]) {
                        var r = 0;
                        x[t.logkey].forEach(function(t) {
                            t.hash_value === n && (r = 1, e.id && (t.id = e.id), e.dataset && (t.dataset = e.dataset), 
                            e.status && (t.status = e.status));
                        }), r || x[t.logkey].push({
                            id: e.id,
                            hash_value: n,
                            status: 0,
                            expConfig: t,
                            dataset: e.dataset,
                            index: a
                        });
                    } else x[t.logkey] = [ {
                        id: e.id,
                        hash_value: n,
                        status: 0,
                        expConfig: t,
                        dataset: e.dataset,
                        index: a
                    } ];
                } catch (e) {
                    console.log("error === ", e);
                }
            }
            function P(e) {
                var t = {
                    thresholds: [ o.AUTO_AT_VIEW_RATE ],
                    initialRatio: 0
                }, n = !1;
                try {
                    my && (n = !0);
                } catch (e) {}
                return n ? (t.selectAll = !0, a.createIntersectionObserver(t)) : (t.observeAll = !0, 
                a.createIntersectionObserver(e, t));
            }
            function A(e, t, n) {
                var a = t.cssSelector;
                a && !u.isStartWith(a, ".") && (a = "." + a), t.positionSelector ? e.relativeTo(t.positionSelector).observe(a, function(e) {
                    try {
                        n(e, t);
                    } catch (e) {
                        console.log("errorMessage: ", e);
                    }
                }) : e.relativeToViewport().observe(a, function(e) {
                    try {
                        n(e, t);
                    } catch (e) {
                        console.log("errorMessage: ", e);
                    }
                });
            }
            function E(e, t, n) {
                var a = r.getGlobalValue("aplus"), o = new Date().getTime(), s = I(o, e, n);
                if (s && s.length > 0) {
                    var u = s[0], l = {}, p = c.jsonLikeStr2JSON(t.trackerParams || {}) || {}, d = u.index;
                    if (a.globalConfig && a.globalConfig.isAli) if (l = i(a._$.spm.data || {}), _.isRax()) {
                        var h = _.getDataSet(n, d - 1), v = h.spmC || n.spmC || "0", m = h.spmD || n.spmD || "0";
                        l.c = v, l.d = m, t = Object.assign(t, h);
                    } else {
                        var y = t.tracker || n.cssSelector.replace(/\'|\"|\;|\:|\=|\[|\]|\.|\#|\-|\/|\|/g, "");
                        if (l.c = y, l.c && "0" !== l.c) {
                            var b = "d" + d;
                            l.d = b;
                        }
                    } else f.getPageCode() && (l.b = f.getPageCode()), n.spmC ? l.c = n.spmC : l.c = p.spmC ? encodeURIComponent(p.spmC) : "", 
                    n.spmD ? l.d = d ? n.spmD + "_" + d : n.spmD : l.d = p.spmD ? encodeURIComponent(p.spmD) : "";
                    g.pushEvent("EXP", t, n, Object.assign({}, e, {
                        x: u.x,
                        y: u.y,
                        width: u.width,
                        height: u.height,
                        hash_value: u.hash_value
                    }), l);
                }
            }
            function I(e, t, n) {
                var a = r.getGoldlogVal("_aplus_auto_exp") || {}, i = a.hashMap || {}, s = [];
                for (var u in i) for (var c = i[u] || [], l = 0; l < c.length; l++) {
                    var p = d(t, n), f = c[l] || {};
                    if (0 === f.status && f.expConfig && p === f.hash_value) {
                        var g = t.boundingClientRect || {};
                        if (g.width && g.height) {
                            f.dataset = t.dataset, f.x = g.left, f.y = g.top, f.width = g.width, f.height = g.height, 
                            f.size = g.width * g.height;
                            var _ = o.AUTO_AT_VIEW_RATE;
                            t.intersectionRatio >= _ && (f.exposureTime = e, f.status = 1, s.push(f));
                        }
                    }
                }
                return s;
            }
            a && !m || (a = s.getContext());
            var T, C = r.getGoldlogVal("_aplus_auto_exp") || {}, x = C.hashMap || {};
            g.watchRecord(t), y(0);
        }, t.reset = function() {}, t.clear = function() {
            g.clearRecord();
            for (var e = 0; e < v.length; e++) v[e].disconnect();
            v = [];
            var t = r.getGoldlogVal("_aplus_auto_exp") || {}, n = t.hashMap || {};
            for (var a in n) delete n[a];
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            return aplus && aplus.getMetaInfo ? aplus.getMetaInfo(e) : o.getMetaCnt(e);
        }
        var r = n(64), o = n(84), i = n(12);
        t.DATA_APLUS_AE_KEY = "data-aplus-ae", t.DATA_APLUS_AC_KEY = "data-aplus-clk", t.DATA_APLUS_SPM_ANCHOR_ID_KEY = "data-spm-anchor-id", 
        t.DATA_APLUS_VT_ITEM_INDEX_KEY = "data-aplus-vt-pos", t.LOOP_TIME = 1e3, t.getDefaultRequestCfg = function() {
            return {
                method: "POST",
                pkgSize: 10
            };
        };
        var s = function(e) {
            var t = e;
            try {
                var n = a("aplus-auto-exp-visible");
                n && (t = parseFloat(n)), t <= 0 && (t = e);
            } catch (n) {
                t = e;
            } finally {
                return t;
            }
        };
        t.AUTO_AT_VIEW_RATE = s(.3);
        var u = function(e) {
            var t = e;
            try {
                var n = a("aplus-auto-exp-duration"), r = parseInt(n);
                r + "" != "NaN" && (t = r);
            } catch (e) {} finally {
                return t;
            }
        };
        t.EXP_DURATION = u(300);
        var c = function(e, t) {
            var n, o = [], s = [];
            try {
                n = t || a(e);
                var u = [];
                if (n && "string" == typeof n) try {
                    u = JSON.parse(n);
                } catch (e) {
                    u = JSON.parse(n.replace(/'/g, '"'));
                } else "object" == typeof n && n.constructor === Array && (u = n);
                if (u && u.constructor === Array) for (var c = 0; c < u.length; c++) {
                    var l = u[c] || {}, p = l.logkey || "", f = l.tag ? l.tag : "", g = l.filter, d = l.cssSelector, _ = d || f && g;
                    if (!p || !_) throw new Error("meta " + e + " config error, " + JSON.stringify(l));
                    g = "string" == typeof g ? g.split("=") : [];
                    var h = f;
                    if (g.length >= 2 ? h += "[" + g.shift() + '="' + decodeURIComponent(g.join("")) + '"]' : 1 == g.length && g[0] && (h += "[" + decodeURIComponent(g[0]) + "]"), 
                    d && (h += d), l.elementSelector = h, r.indexof(s, h) > -1) throw new Error("meta " + e + " config error, tag_filter_cssSelector " + h + " repeated");
                    s.push(h), o.push(l);
                }
            } catch (e) {
                i().w(e);
            } finally {
                return o;
            }
        };
        t.getAutoExpConfig = function(e) {
            return c("aplus-auto-exp", e) || [];
        }, t.getAutoExpUserFn = function() {
            var e = a("aplus-auto-exp-userfn");
            if (e) {
                var t = window[e] || e;
                if ("function" == typeof t) return t;
            }
            return null;
        }, t.isThrottleWatchDom = function() {
            var e = !1;
            try {
                e = "throttle" === a("aplus-auto-exp-watchdom");
            } catch (e) {}
            return e;
        }, t.getAutoClkConfig = function(e) {
            return c("aplus-auto-clk", e) || [];
        }, t.getAutoClkUserFn = function() {
            var e = a("aplus-auto-clk-userfn");
            if (e) {
                var t = window[e] || e;
                if ("function" == typeof t) return t;
            }
            return null;
        };
    }, function(e, t, n) {
        "use strict";
        function a(e) {
            return i = i || document.getElementsByTagName("head")[0], s && !e ? s : i ? s = i.getElementsByTagName("meta") : [];
        }
        function r(e, t) {
            var n, r, o, i = a(), s = i.length;
            for (n = 0; n < s; n++) r = i[n], u.tryToGetAttribute(r, "name") === e && (o = u.tryToGetAttribute(r, t || "content"));
            return o || "";
        }
        function o(e) {
            var t = {
                isonepage: "-1",
                urlpagename: ""
            }, n = e.qGet();
            if (n && n.hasOwnProperty("isonepage_data")) t.isonepage = n.isonepage_data.isonepage, 
            t.urlpagename = n.isonepage_data.urlpagename; else {
                var a = r("isonepage") || "-1", o = a.split("|");
                t.isonepage = o[0], t.urlpagename = o[1] ? o[1] : "";
            }
            return t;
        }
        var i, s, u = n(85);
        t.getMetaTags = a, t.getMetaCnt = r, t.getOnePageInfo = o;
    }, function(e, t) {
        "use strict";
        t.tryToGetAttribute = function(e, t) {
            return e && e.getAttribute ? e.getAttribute(t) || "" : "";
        };
        var n = function(e, t, n) {
            if (e && e.setAttribute) try {
                e.setAttribute(t, n);
            } catch (e) {}
        };
        t.tryToSetAttribute = n, t.tryToRemoveAttribute = function(e, t) {
            if (e && e.removeAttribute) try {
                e.removeAttribute(t);
            } catch (a) {
                n(e, t, "");
            }
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(3), o = n(7);
        e.exports = function() {
            return {
                pushQueue: function(e, t) {
                    var n = a.getGlobalValue("aplus_queue");
                    n.push({
                        action: "aplus." + e,
                        arguments: t
                    });
                },
                run: function() {
                    var e = this, t = a.getGlobalValue(r.APLUS);
                    o(r.openAPIs, function(n) {
                        t[n] = function() {
                            var t = [];
                            o(arguments, function(e) {
                                t.push(e);
                            });
                            var a = "enter" === n ? "_sendPV" : "_" + n;
                            e.pushQueue(a, t);
                        };
                    });
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(9), r = n(2);
        e.exports = function() {
            return {
                _getNetworkType: function(e) {
                    var t = a.getContext();
                    t.getNetworkType ? t.getNetworkType({
                        success: function(t) {
                            e(t ? t.networkType : "");
                        }
                    }) : e("");
                },
                _getSystemInfo: function(e) {
                    var t = this, n = {}, r = t.SYSTEM_INFO || {};
                    if (r && r.version) e(t.SYSTEM_INFO); else try {
                        a.getContext().getSystemInfo({
                            complete: function(a) {
                                a && a.version ? t._getNetworkType(function(n) {
                                    a.networkType = n, t.SYSTEM_INFO = a, e(a);
                                }) : t._getNetworkType(function(t) {
                                    n.networkType = t, e(n);
                                });
                            }
                        });
                    } catch (t) {
                        e(n);
                    }
                },
                _getAccountInfoSync: function() {
                    var e = {};
                    try {
                        var t = a.getContext();
                        if (t.getAccountInfoSync && t.canIUse("getAccountInfoSync")) {
                            var n = t.getAccountInfoSync(), r = n.miniProgram || {}, o = n.plugin || {};
                            e.appId = r.appId, e.appVersion = r.version || r.envVersion, e.pluginAppId = o.appId, 
                            e.pluginAppVersion = o.version;
                        } else if (t.getAppIdSync && t.canIUse("getAppIdSync")) {
                            var i = t.getAppIdSync() || {};
                            e.appId = i.appId || "";
                        }
                    } catch (e) {}
                    return e;
                },
                run: function(e, t) {
                    var n = this;
                    return this._getSystemInfo(function(e) {
                        e.userAgent = "-", e.os = e.platform ? e.platform.toLocaleUpperCase() : "", e.os_version = e.system ? e.system : "", 
                        e.access = e.brand ? e.brand : "";
                        var a = "";
                        e.host && "string" == typeof e.host.env && (a = e.host.env), e.host = a;
                        var o = n._getAccountInfoSync(), i = Object.assign({}, e, o), s = r.getGlobalValue("aplus");
                        s._aplus_client = i, t();
                    }), 2e3;
                }
            };
        };
    }, function(e, t, n) {
        var a = n(2), r = n(20), o = n(3), i = n(9), s = n(12);
        e.exports = function() {
            return {
                resetLastPageSpm: function() {
                    var e = a.getGlobalValue(o.APLUS, {}), t = e._$.spm || {};
                    t.spm_cnt = "";
                },
                listen: function() {
                    var e = this, t = a.getGlobalValue(o.APLUS_QUEUE, []);
                    t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "onShow", function(e) {
                            if ("ready" === e.status) {
                                var t = a.getGlobalValue(o.APLUS, {}), n = t.getMetaInfo("pages"), s = i.getCurrentPage(), u = s.route || s.is;
                                if (r(n)) for (var c = 0; c < n.length; c++) {
                                    var l = n[c];
                                    if (l.matchUrl === u) {
                                        t.setPageSPM(l.spmA, l.spmB);
                                        break;
                                    }
                                }
                            }
                        } ]
                    }), t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "clearPageSPM", function() {
                            e.resetLastPageSpm();
                        } ]
                    }), t.push({
                        action: o.SUBSCRIBE,
                        arguments: [ "setPageSPM", function(e) {
                            try {
                                var t = a.getGlobalValue(o.APLUS, {}), n = t._$.spm || {}, r = getCurrentPages() || [], i = e.spmCnt ? e.spmCnt.split(".") : [ n.data.a || "0", n.data.b || "0" ];
                                2 === i.length && (i = i.concat([ "0", "0" ]));
                                var u = i.join("."), c = r[r.length - 1], l = r[r.length - 2] || {}, p = r[r.length - 3] || {};
                                r.length > 0 && c && (r[r.length - 1].spm = u);
                                var f = n.data && n.data.a ? [ n.data.a, n.data.b, n.data.c || "0", n.data.d || "0" ].join(".") : "";
                                n.data.a = i[0] ? "" + i[0] : "0", n.data.b = i[1] ? "" + i[1] : "0", n.data.c = "0", 
                                n.data.d = "0", n.page_referrer = r.length > 1 && c ? c.route || c.is : "", n.spm_cnt = u;
                                var g = t.spm_orign || n.spm_orign;
                                n.spm_pre = e.spmPre || n.spm_url || p.spm || "", n.spm_url = e.spmUrl || f || l.spm || g || "", 
                                t._$.spm = n;
                            } catch (e) {
                                s().w("setPageSPM error, the errorInfo is ", e);
                            }
                        } ]
                    });
                },
                run: function() {
                    this.listen();
                }
            };
        };
    }, function(e, t, n) {
        e.exports = function() {
            return {
                run: function() {
                    var e = n(90), t = e.create();
                    t.run(this.options);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            if (s.checkEvent(e, t)) {
                var a = n(93)(e, t);
                a.rank = _.rank(), a && a.id === g.APP_END && (a.amount = a.rank), u().i("event: ", e, t), 
                o().addEvent(a);
                var r = p.getGlobalValue("aplus"), c = r.getMetaInfo("max-queue-count") || g.MAX_QUEUE_COUNT;
                (e === g.APP_END || o().getEkvsLen() >= c) && i(g.REQUESTS).send(s.DataType.EKV, {
                    noCache: !1
                }, function() {
                    u().i("event send success: ", e, a);
                });
            }
        }
        var r = n(91), o = n(19), i = n(21), s = n(18), u = n(12), c = n(14), l = n(33), p = n(2), f = n(9), g = n(3), d = n(36), _ = n(38);
        e.exports = r.extend({
            handlerMiddleware: function(e) {
                var t = p.getGlobalValue("aplus");
                u().setDebug(!!t.getMetaInfo("DEBUG"));
                var n, r, o, i = e && e.userdata && e.userdata.logkey, _ = e && e.userdata && e.userdata.gmkey, h = e && e.what_to_send && e.what_to_send.logdata && e.what_to_send.logdata || {}, v = t.getMetaInfo("globalproperty");
                if ("CLK" === _ || "EXP" === _ || "OTHER" === _ || i === g.APP_START || i === g.APP_END) {
                    n = c(e && e.userdata && e.userdata.gokey) || {}, r = h.gokey || {};
                    var m, y = {};
                    "$$_share" === i && (y.refer_page = h.url, y.share_type = n.share_type), r.scene && (y.scene = f.getPlatformType() + "_" + r.scene), 
                    r.targetAppKey && (y.targetAppKey = n.targetAppKey, delete n.targetAppKey), o = n["data-pagename"] || n.page_name || n.spm && n.spm.b || t.getPageName() || h.url || "", 
                    y.page_name = o, y.url = h.url || "-", (n.page_name || n["data-pagename"]) && (delete n.page_name, 
                    delete n["data-pagename"]), l.isEmptyObject(v) || (y.gp = v), n.spm && (y["spm-cnt"] = [ encodeURIComponent(o), n.spm.c, n.spm.d ].filter(function(e) {
                        return !!e;
                    }).join("."), delete n.spm), n.page_title ? (y.page_title = n.page_title || d.getPageTitle(h.url) || "", 
                    delete n.page_title) : y.page_title = r._page_title || "", n.is_auto ? (y.is_auto = n.is_auto, 
                    y.track_type = "1", delete n.is_auto, h.event_code && (y.event_type_id = h.event_code)) : (y.is_auto = 0, 
                    y.track_type = "0");
                    var b = c(n);
                    for (var S in b) "string" == typeof S && s.startsWith(S, "_") && (y[S] = b[S], delete n[S]);
                    m = i === g.APP_START || i === g.APP_END ? l.assign(y, n) : l.assign(y, {
                        cusp: n
                    }), a(i, m);
                } else if ("2001" === h.event_code) {
                    var P = {}, A = g.PAGE_START;
                    r = c(h.gokey) || {}, o = r.page_name || t.getPageName() || d.getPageCode(h.url) || h.url || "", 
                    P.r = h.arg1 || h.logkey || "-", P.page_name = o, r._page_auto_pv ? (P.is_auto = 1, 
                    P.url = r.path || "-", P.ref_url = r.referrer, P.track_type = "1", delete r._page_auto_pv, 
                    delete r.referrer, delete r.path, delete r.page_name) : (P.is_auto = 0, P.url = h.url || "-", 
                    P.ref_url = h.pre, P.track_type = "0"), r.duration && (P.duration = r.duration, 
                    delete r.duration), l.isEmptyObject(v) || (P.gp = v), r.scene && (P.scene = f.getPlatformType() + "_" + r.scene), 
                    r = s.deleteInfo(r, [ "_anony_id", "_dev_id", "_session_id", "_user_id", "_user_nick", "uaid", "pvid", "scene" ]), 
                    P["spm-cnt"] = encodeURIComponent(o), r._page_auto_id && (A = r._page_auto_id, delete r._page_auto_id), 
                    r.page_start && (P.page_start = r.page_start, delete r.page_start), r.page_title ? (P.page_title = r.page_title || d.getPageTitle(h.url) || "", 
                    delete r.page_title) : P.page_title = r._page_title, delete r._page_title, P.url = d.getFullPath(P.url), 
                    P.ref_url = d.getFullPath(P.ref_url), a(A, l.assign(P, {
                        cusp: r
                    }));
                }
            },
            run: function() {
                this.watchLOG();
            }
        });
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(92), o = n(3);
        e.exports = a.extend({
            subscribeLogs: function(e, t) {
                r.pushIntoGoldlogQueue(o.SUBSCRIBE, [ e, function(e) {
                    e.status === o.COMPLETE && t(e);
                } ]);
            },
            getLogicSymbol: function() {
                return "ALI" === this.format ? "&" : "||";
            },
            handlerMiddleware: function() {},
            watchLOG: function() {
                var e = this;
                e.subscribeLogs(o.MW_CHANGE_PV, function(t) {
                    e.handlerMiddleware(t, "pv");
                }), e.subscribeLogs(o.MW_CHANGE_HJLJ, function(t) {
                    e.handlerMiddleware(t, o.APLUS);
                });
            },
            run: function() {
                this.watchLOG();
            }
        });
    }, function(e, t, n) {
        "use strict";
        var a = n(2);
        t.pushIntoGoldlogQueue = function(e, t) {
            var n = a.getGlobalValue("aplus_queue"), r = a.getGlobalValue("aplus"), o = e.split("."), i = r[o[1]], s = i ? i[o[2]] : null;
            r && 2 === o.length && i ? i.apply(r, t) : 3 === o.length && s ? s.apply(i, t) : n.push({
                action: e,
                arguments: t
            });
        };
    }, function(e, t, n) {
        var a = n(2), r = n(33), o = n(12), i = n(17);
        e.exports = function(e, t) {
            if ("string" != typeof e || !e) return void o().w("event logkey is invalid, id =", e || "'' event properties = ", i.stringfy(t.cusp));
            var n = Object.create(null);
            n.id = e, t && t.ts || (n.ts = Date.now());
            var s = typeof t;
            if ("object" === s) for (var u in t) ({}).hasOwnProperty.call(t, u) && (n[u] = t[u]);
            var c = a.getGlobalValue("aplus"), l = c.getMetaInfo("globalproperty");
            return r.isEmptyObject(l) || (n.gp = l), n;
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(95), r = n(2);
        e.exports = function() {
            return {
                run: function() {
                    var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE, n = r.getContext(), o = n[t] || [], i = a.getFormatQueue(o, "metaQueue");
                    n[t] = i.queue, a.processGoldlogQueue(i.formatQueue, this.options.config);
                }
            };
        };
    }, function(e, t, n) {
        function a() {
            var e = u.getGoldlogVal("_$") || {}, t = e.meta_info;
            return t;
        }
        function r() {
            var e = a() || {}, t = e.uaid + "";
            return "1" !== t || e._anony_id ? e._hold || e["aplus-waiting"] : "BLOCK";
        }
        function o(e) {
            var t = r(), n = a() || {}, o = !0, i = e.arguments || [], s = i[0], u = i[1], c = "START";
            if ("_hold" === s && u === c) return c;
            if ("_anony_id" === s && u) return c;
            if (e && /sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(e.action)) switch (t) {
              case "BLOCK":
                n[t] || (h.push(e), o = !1);
            }
            return o;
        }
        function i(e) {
            g(d, e), g(_, e), g(h, e);
        }
        function s(e, t) {
            return t && f.openAPIs.indexOf(e) > -1 && (e = "_" + e), e;
        }
        var u = n(2), c = n(64), l = n(10), p = n(12), f = n(3), g = function(e, t) {
            function n() {
                if (e && c.isArray(e) && e.length) {
                    for (var n = m(e).queue, a = {}, r = []; a = n.shift(); ) v(a, t, function(e) {
                        r.push(e);
                    });
                    r.length > 0 && setTimeout(function() {
                        for (;a = r.shift(); ) v(a, t);
                    }, 100);
                }
            }
            try {
                n();
            } catch (e) {
                p().w(e);
            }
        };
        t.processGoldlogQueue = g;
        var d = [], _ = [], h = [];
        t.subscribeAndProcessQueue = function(e, t) {
            var n = u.getGlobalValue(e);
            n.push({
                action: f.SUBSCRIBE,
                arguments: [ f.SET_META_INFO, function(e, n) {
                    e === f._USER_ID && n ? g(d, t) : e === f._ANONY_ID && n ? g(_, t) : "_hold" === e && "START" === n && i(t);
                } ]
            });
        };
        var v = function(e, t, n) {
            var a = !!t.isOpenApi, r = e ? e.action : "", f = e ? e.arguments : "", g = o(e);
            if (g) {
                var d = u.getContext();
                try {
                    if (r && f && c.isArray(f)) {
                        var _, h = r.split("."), v = d, m = d;
                        if (3 === h.length) v = d[h[0]][h[1]] || {}, _ = s(h[2], a), m = v[_] ? v[_] : ""; else for (;h.length; ) if (_ = s(h.shift(), a), 
                        m = v = v[_], !v) return void (l(n) && n(e));
                        l(m) && m.apply(v, f), "START" === g && i(t);
                    }
                } catch (e) {
                    p().w(e);
                }
            }
        };
        t.processTask = v;
        var m = function(e, t) {
            for (var n = {
                subscribeMwChangeQueue: [],
                subscribeMetaQueue: [],
                subscribeQueue: [],
                metaQueue: [],
                othersQueue: []
            }, a = [], r = {}; r = e.shift(); ) try {
                var o = r.action, i = r.arguments[0];
                /subscribe/.test(o) ? "setMetaInfo" === i ? n.subscribeMetaQueue.push(r) : i === f.MW_CHANGE_PV || i === f.MW_CHANGE_HJLJ ? n.subscribeMwChangeQueue.push(r) : n.subscribeQueue.push(r) : /MetaInfo/.test(o) ? n.metaQueue.push(r) : n.othersQueue.push(r);
            } catch (e) {
                p().w(e), n.othersQueue.push(r);
            }
            var s;
            return t && n[t] && (s = n[t], n[t] = []), a = n.subscribeMwChangeQueue.concat(n.metaQueue), 
            a = a.concat(n.subscribeQueue), a = a.concat(n.subscribeMetaQueue, n.othersQueue), 
            {
                queue: a,
                formatQueue: s
            };
        };
        t.getFormatQueue = m;
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(2), o = n(95), i = a.extend({
            push: function(e) {
                this.length++, o.processTask(e, this.opts);
            }
        });
        e.exports = function() {
            return {
                processAplusQueue: function(e) {
                    var t = this.options.config || {}, n = r.getGlobalValue(e);
                    o.processGoldlogQueue(n, t), r.setGlobalValue(e, i.create({
                        opts: t,
                        startLength: n.length,
                        length: 0
                    }));
                },
                run: function() {
                    var e = this.options.context.aplus_config, t = e.globalConfig.APLUS_QUEUE;
                    this.processAplusQueue(t), "aplus_queue" === t && this.processAplusQueue("goldlog_queue"), 
                    o.subscribeAndProcessQueue(t, this.options.config);
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        function a() {
            function e() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", t = i.getCurrentPage(), n = t.route || t.is;
                switch (e) {
                  case "onPullDownRefresh":
                    y.onPullDownRefresh += 1, h.push({
                        action: "aplus.record",
                        arguments: [ s.logkey || "$$_pull_down_refresh", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onPullDownRefresh
                        } ]
                    });
                    break;

                  case "onReachBottom":
                    y.onReachBottom += 1, h.push({
                        action: "aplus.record",
                        arguments: [ a.logkey || "$$_reach_bottom", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onReachBottom
                        } ]
                    });
                    break;

                  case "onShareAppMessage":
                    y.onShareAppMessage += 1, h.push({
                        action: "aplus.record",
                        arguments: [ g.logkey || "$$_share", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onShareAppMessage,
                            share_type: 1
                        } ]
                    });
                    break;

                  case "onShareTimeline":
                    y.onShareTimeline += 1, h.push({
                        action: "aplus.record",
                        arguments: [ g.logkey || "$$_share", "CLK", {
                            event: e,
                            pagename: p.getPageCode() || n,
                            count: y.onShareTimeline,
                            share_type: 0
                        } ]
                    });
                    break;

                  case "onPageShow":
                    t.route && !v && (m = {
                        path: t.route,
                        page_name: t.route
                    }, m.ts = Date.now(), v = !0);
                    break;

                  case "onPageHide":
                    if (v) {
                        var r = Date.now() - m.ts || 0, u = i.getReferrerPage().route || i.getReferrerPage().is || "-", c = (p.getPageName() || {}).extraParams, l = Object.assign({}, c, {
                            duration: r,
                            path: m.path,
                            page_name: p.getPageCode() || m.page_name,
                            page_start: m.ts,
                            isMini: !0,
                            _page_auto_id: o.PAGE_END,
                            _page_auto_pv: !0,
                            referrer: u
                        });
                        h.push({
                            action: "aplus.sendPV",
                            arguments: [ {
                                is_auto: !0,
                                track_type: "1"
                            }, l ]
                        }), m = null, v = !1;
                    }
                }
            }
            function t() {
                a = _.getMetaInfo("rb_config"), s = _.getMetaInfo("pdr_config"), g = _.getMetaInfo("share_config");
            }
            function n(e, t) {
                if (e && t) try {
                    var n = _.getMetaInfo("aplus-api-host"), a = /[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/, r = n.match(a);
                    if (r && r[0]) {
                        var s = o.HTTPS;
                        /(\d+\.){3,}\d+/.test(r[0]) && (s = "http:");
                        var u = s + "//" + n + "/vt/loadTransferConfig?code=" + e + "&appInfoId=" + t;
                        i.request(u, {}, function(e) {
                            try {
                                var t = e.data && e.data.data && e.data.data.config || "", n = e.data && e.data.data && e.data.data.debugId || "";
                                n && _.appendMetaInfo("aplus-global-args", {
                                    debugId: n
                                });
                                var a = new Date().getTime();
                                _._minicfg_load = new Date().getTime() - a, t && (_._aplus_vt_cfg = JSON.parse(t) || {}, 
                                l.vt2autoEvent());
                            } catch (e) {
                                f().w("fetch real-time visualization verification failed, err msg:" + e);
                            }
                        });
                    }
                } catch (e) {}
            }
            var a, s, g, d = r.getContext(), _ = r.getGlobalValue(o.APLUS), h = r.getGlobalValue(o.APLUS_QUEUE), v = !1, m = {
                ts: Date.now()
            }, y = {
                onPullDownRefresh: 0,
                onShareTimeline: 0,
                onReachBottom: 0,
                onShareAppMessage: 0,
                onClick: 0
            };
            h.push({
                action: o.SUBSCRIBE,
                arguments: [ "aplusReady", function(e) {
                    "complete" === e && t();
                } ]
            }), _.aplus_pubsub.subscribe("onLoad", function(e) {
                if ("ready" === e.status) try {
                    var t = p.getVTRealtimeCode();
                    if (t) {
                        var a = _.getMetaInfo("appInfoId");
                        n(t, a);
                    } else !!_.getMetaInfo("aplus-vt-cfg-url") && l.vt2autoEvent();
                } catch (e) {
                    f().w("fetch real-time visualization verification failed, errmsg:" + e);
                }
            }), _.aplus_pubsub.subscribe("onShow", function(t) {
                if ("ready" === t.status) {
                    var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                    n && e("onPageShow");
                }
            }), _.aplus_pubsub.subscribe("onHide", function(t) {
                if ("ready" === t.status) {
                    var n = "MAN" !== d.aplus.getMetaInfo("aplus-waiting");
                    n && e("onPageHide");
                }
            }), _.aplus_pubsub.subscribe("onPullDownRefresh", function(t) {
                "ready" === t.status && e("onPullDownRefresh");
            }), _.aplus_pubsub.subscribe("onReachBottom", function(t) {
                "ready" === t.status && e("onReachBottom");
            }), _.aplus_pubsub.subscribe("onShareAppMessage", function(t) {
                "ready" === t.status && e("onShareAppMessage");
            }), _.aplus_pubsub.subscribe("onShareTimeline", function(t) {
                "ready" === t.status && e("onShareTimeline");
            }), _.getMetaInfo("aplus-vt-cfg-url") && u.pushIntoGoldlogQueue(o.SUBSCRIBE, [ c, function(e) {
                var t = e.pageConfig;
                t && t.enabled && (_._aplus_vt_cfg = t);
            } ]);
        }
        var r = n(2), o = n(3), i = n(9), s = n(98), u = n(92), c = "MiniVtConfigFormat", l = n(101), p = n(36), f = n(12);
        e.exports = function() {
            return {
                run: function() {
                    var e = r.getGlobalValue("aplus");
                    if (a(), !e._aplus_aleady_load_minivt) {
                        e._aplus_aleady_load_minivt = 1;
                        var t = s.create();
                        t.run();
                    }
                }
            };
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(45), r = n(92), o = n(99), i = n(7), s = n(33), u = n(100), c = n(3), l = n(2), p = "MiniVtConfigBack", f = "MiniVtConfigFormat", g = c.PUBLISH;
        e.exports = a.extend(s.assign(u, {
            pathname: "",
            pageConfig: {},
            originSpm: {
                spmA: "",
                spmB: ""
            },
            updateCfgLs: function() {
                var e = this;
                setTimeout(function() {
                    e.fetchFromCdn();
                }, 1e3);
            },
            fetchFromCdn: function() {
                var e = this, t = l.getGlobalValue("aplus"), n = t.getMetaInfo("aplus-vt-cfg-url");
                if (n) {
                    var a = new Date().getTime();
                    t.requestVTConfig(n, function(n) {
                        var o = n.data;
                        if (t._minicfg_load = new Date().getTime() - a, o) try {
                            t._aplus_vt_cfg = "object" == typeof o ? o : JSON.parse(o), t._aplus_vt_cfg.points && i(t._aplus_vt_cfg.points, function(e) {
                                e.selector = decodeURIComponent(e.selector);
                            }), e.setConfigIntoLs(t._aplus_vt_cfg);
                        } catch (e) {
                            t._aplus_vt_cfg = {
                                enabled: !1
                            };
                        }
                        r.pushIntoGoldlogQueue(g, [ p, {
                            pageConfig: t._aplus_vt_cfg,
                            enable: 0
                        } ]);
                    }, function(e) {
                        t._aplus_vt_cfg && t._aplus_vt_cfg.enabled && r.pushIntoGoldlogQueue(g, [ p, {
                            pageConfig: t._aplus_vt_cfg,
                            enable: 0
                        } ]), o.catchException("getTrackerCfg", e, {
                            msg: n
                        });
                    }, {
                        timeout: 5e3
                    });
                }
            },
            getMiniVtData: function(e, t, n) {
                var a = l.getGlobalValue("aplus");
                if (a._minicfg_load = 0, e) {
                    var o = this.fetchFromLS(e);
                    if ("string" == typeof o) try {
                        o = JSON.parse(o);
                    } catch (e) {
                        o = {};
                    }
                    o && o.enabled && (a._aplus_vt_cfg = o), n ? this.fetchFromCdn(e, t) : r.pushIntoGoldlogQueue(g, [ p, {
                        pageConfig: o,
                        enable: 0
                    } ]);
                }
            },
            syncMiniVtData: function() {
                var e = this.getVtConfigPath();
                this.getMiniVtData(e, "", !0);
            },
            init: function() {
                var e = this, t = c.SUBSCRIBE;
                r.pushIntoGoldlogQueue(t, [ p, function(t) {
                    t.enable || (e.pageConfig = t.pageConfig), r.pushIntoGoldlogQueue(g, [ f, {
                        pageConfig: e.pageConfig,
                        originSpm: e.originSpm
                    } ]), !t.enable && e.setConfigIntoLs(e.pageConfig);
                } ]), e.syncMiniVtData();
            },
            run: function() {
                return this.init(), this;
            }
        }));
    }, function(e, t, n) {
        "use strict";
        var a = n(92);
        t.catchException = function(e, t) {
            var n = e;
            "object" == typeof t && t.message && (n = n + "_" + t.message), a.pushIntoGoldlogQueue("aplus._aplus_cplugin_m.do_tracker_jserror", [ {
                message: n,
                error: JSON.stringify(t),
                filename: e
            } ]);
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(2), r = n(9), o = n(11);
        e.exports = {
            lsMinivtConfigKey: "APLUS_MINI_CONFIG",
            getMiniVtTplCdnPath: function() {
                var e = a.getGlobalValue("aplus"), t = e.getMetaInfo("aplus-track-config-id"), n = t && t.turnon, r = t && t.value;
                return "1" === n && r ? r : "";
            },
            getVtConfigPath: function() {
                var e, t = this.getMiniVtTplCdnPath(), n = [], a = o.getAppKey();
                return a && (e = a), e && (n = e.split(".")), 2 === n.length ? this.originSpm = {
                    spmA: n[0],
                    spmB: n[1]
                } : 1 === n.length && (this.originSpm.spmA = n[0]), t ? t : 2 === n.length ? n.join("_") : 1 === n.length ? n[0] : void 0;
            },
            fetchFromLS: function(e) {
                this.cdnpath || (this.cdnpath = e || this.getMiniVtTplCdnPath());
                var t = r.getContext();
                return decodeURIComponent(t.getStorageSync(this.lsMinivtConfigKey + "-" + e)) || {};
            },
            setConfigIntoLs: function(e) {
                this.cdnpath || (this.cdnpath = this.getVtConfigPath());
                var t = r.getContext();
                t.setStorageSync(this.lsMinivtConfigKey + "-" + this.cdnpath, encodeURIComponent(JSON.stringify(e)));
            }
        };
    }, function(e, t, n) {
        "use strict";
        function a(e, t) {
            function n(e, t) {
                for (var n = -1, a = 0; a < t.length; a++) {
                    var r = t[a];
                    if (r.cssSelector === e.cssSelector && r.logkey === e.logkey) {
                        n = a;
                        break;
                    }
                }
                return n;
            }
            e = u.isArray(e) ? e : [], t = u.isArray(t) ? t : [];
            var a = [].concat(t, e), r = a.filter(function(e, t, a) {
                return n(e, a) === t;
            });
            return r;
        }
        function r(e) {
            return u.isArray(e) ? e.filter(function(e) {
                return void 0 === e._vt;
            }) : [];
        }
        function o(e) {
            return /^[.#]/.test(e) ? e : e ? "." + e : "";
        }
        function i(e) {
            var t = s.getCurrentPage(), n = e || t.route, a = p._aplus_vt_cfg || p._aplus_tracking_cfg, r = [], i = [];
            return a && a.pages && l(a.pages, function(e) {
                p.setPageName({
                    pageName: e.spmB,
                    extraParams: e.extraParams
                }, e.matchUrl), e.matchUrl === n && (l(a.points, function(t) {
                    e.spmB === t.spmB && ("exposure" === t.trackerType ? r.push({
                        cssSelector: o(t.selector),
                        positionSelector: t.positionSelector,
                        logkey: t.logkey,
                        props: t.props,
                        spmB: t.spmB,
                        spmC: t.spmC,
                        spmD: t.spmD,
                        customArgs: t.customArgs,
                        _vt: e.template || e.stdId ? 2 : 1
                    }) : i.push({
                        cssSelector: o(t.selector),
                        logkey: t.logkey,
                        props: t.props,
                        spmB: t.spmB,
                        spmC: t.spmC,
                        spmD: t.spmD,
                        customArgs: t.customArgs,
                        _vt: e.template || e.stdId ? 2 : 1
                    }));
                }), a.common_exdata && "object" == typeof a.common_exdata && p.setMetaInfo("aplus-exdata", a.common_exdata), 
                a.common_pvdata && "object" == typeof a.common_pvdata && p.setMetaInfo("aplus-cpvdata", a.common_pvdata));
            }), {
                EXP: r,
                CLK: i
            };
        }
        var s = n(9), u = n(64), c = n(2), l = n(7), p = c.getGlobalValue("aplus"), f = n(36);
        t.getCurrentPageVTCfg = function() {
            var e = p._aplus_vt_cfg;
            if (e) for (var t = f.getCurrentPagePath(), n = 0; n < e.pages.length; n++) {
                var a = e.pages[n];
                if (a.matchUrl === t) return a;
            }
        }, t.getTrackConfigByPath = i, t.getTrackConfigByPointCssSelector = function(e, t, n) {
            var a = i(n)[t] || [], r = null;
            return l(a, function(t) {
                t.cssSelector === e && (r = t);
            }), r;
        }, t.vt2autoEvent = function() {
            var e = p._aplus_vt_cfg || p._aplus_tracking_cfg;
            if (e && e.pages) {
                var t = i(), n = r(p.getMetaInfo("aplus-auto-exp"));
                p.setMetaInfo("aplus-auto-exp", a(n, t.EXP));
                var o = r(p.getMetaInfo("aplus-auto-clk"));
                p.setMetaInfo("aplus-auto-clk", a(o, t.CLK));
            }
        };
    }, function(e, t, n) {
        "use strict";
        e.exports = function(e, t) {
            var a = n(2), r = n(49), o = n(12), i = n(7), s = n(9), u = n(103);
            s.initIsTB(), "object" == typeof e && (e.siteId && (t.globalConfig.siteId = e.siteId), 
            t.metaInfo = Object.assign({}, t.metaInfo, e.metaInfo));
            var c = "running", l = "complete", p = [ "aplusReady", c ];
            return r.doPubMsg(p), u.run({
                plugins: t.plugins,
                context: function() {
                    var e = {
                        PAGE_LOAD_TIME: new Date()
                    }, n = [];
                    return i(t.plugins, function(t) {
                        e[t.name] = t.config, "aplus_log_inject" === t.name && t.config && t.config.plugins && (n = t.config.plugins.pv, 
                        i(n, function(t) {
                            e[t.name] = t.config;
                        }));
                    }), Object.assign({}, e, {
                        aplus_config: t
                    });
                }
            }, function() {
                o().v("APLUS INIT SUCCESS"), p[1] = l, r.doPubMsg(p);
            }), a.getContext();
        };
    }, function(e, t, n) {
        "use strict";
        var a = n(69), r = n(10), o = n(49);
        t.run = function(e, t) {
            var n = new a();
            n.run({
                plugins: e.plugins,
                context: e.context
            }, {
                config: {},
                userdata: {},
                pubsubType: "aplusinit",
                messageFnQueue: [],
                middlewareMessageKey: "mw_change_aplusinit"
            }, function(e) {
                var n = [ "aplusInitContext", e ];
                o.doPubMsg(n), o.doCachePubs(n), r(t) && t(e);
            });
        };
    } ]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9hcGx1c19taW5pX2Nsb3VkX3VtLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjZWQ4NWIyNDA2MzEwNmUyMWY0ZSIsIndlYnBhY2s6Ly8vLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2FwbHVzU3RhdGljLmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19taW5pX2Nsb3VkX3VtX2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNQbGFpbk9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdWxvZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91bV9zZXNzaW9uX21hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2NhY2hlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS91bV9oZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2JvZHlCdWlsZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9yZXF1ZXN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl91bS9tYW5nbGVfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vaW1wcmludE1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2Jhc2U2NC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFBlcmZvcm1hbmNlLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsUmVtb3RlQ2ZnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFRyaW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfdW0vcXVldWUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsTW9uaXRvci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9mb3JtYXQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21lc3NhZ2VyL3B1YnN1Yl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9CYXNlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX21ldGEvbWFpbl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21ldGFJbmZvTWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbFB1YnN1Yi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19sb2dfaW5qZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hlbl90b19zZW5kcHYuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfbWluaV9jbG91ZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvbG9nSWQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi91dGlsUGFyYW1zLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YV9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1VuZGVmaW5lZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdl9taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsRXZlbnRMaW1pdC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbExvY2FsQ29uZmlnLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2hqbGovd2hhdF90b19oamxqX3VzZXJkYXRhX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvYXBsdXNfYXBpX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluX21pbmkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1c19taW5pLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2dnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L2NvcmUvY29tcG9zZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvY29yZS9wbHVnaW5zTG9hZGVyLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9pc1RyaXZlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2F1dG9fdHJhY2tlcl9jbGsuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9saWJfYXV0b19jbGsvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9jb2xsZWN0X2Nsay5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL3dhdGNoVHJhY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL3V0aWxzL2dldEhhc2hLZXkuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS91dGlscy9yYXhVdGlsLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2V4cC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fZXhwL2NvbGxlY3RfZXhwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX3dlYi9saWJfY29tbW9uL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbE1ldGEuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2xpYl91L3V0aWxzL3V0aWxBdHRyaWJ1dGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnNfbWluaS9vcGVuX2FwaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL21pbmlfc3BtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fbWluaV91bV9odHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fYmFzZV9odHRwLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy91dGlsR1EuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50LmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX3VtLmpzIiwid2VicGFjazovLy8uL3NyYy9wbHVnaW5zX21pbmkvbGliX21pbml2dC9mZXRjaENvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbGliX3UvdXRpbHMvdXRpbENhdGNoLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS91dGlscy9taW5pdnRTdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGx1Z2luc19taW5pL2xpYl9taW5pdnQvdXRpbFZULmpzIiwid2VicGFjazovLy8uL3NyYy9hcGx1c19taW5pX2Jhc2ljLmpzIiwid2VicGFjazovLy8uL3NyYy9saWJfdS9jb3JlL2FwbHVzaW5pdC5qcyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJhIiwiaSIsInRoaXMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsImluaXRHbG9iYWwiLCJhcHBDb25maWciLCJhcGx1c19jb25maWciLCJfYXBsdXNfY29udGV4dCIsImFwbHVzU3RhdGljIiwiQVBMVVMiLCJBUExVU19RVUVVRSIsIkdPTERMT0ciLCJHT0xETE9HX1FVRVVFIiwiaXNXZWIiLCJ3aW5kb3ciLCJlIiwiZ2V0Q29udGV4dCIsImNvbnRleHQiLCJ2IiwiYXBsdXMiLCJhcGx1c19xdWV1ZSIsIl9hcGx1c0RlZmF1bHRWYWx1ZSIsIl9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlIiwiZ29sZGxvZyIsIl9nb2xkbG9nX3F1ZXVlIiwiZ29sZGxvZ19xdWV1ZSIsImNvbmNhdCIsImdldEdsb2JhbFZhbHVlIiwia2V5IiwiZyIsInEiLCJzZXRHbG9iYWxWYWx1ZSIsInZhbHVlIiwiZ2V0R29sZGxvZ1ZhbCIsInNldEdvbGRsb2dWYWwiLCJ2YWwiLCJmIiwiZ2V0Q2xpZW50SW5mbyIsIk1XX0NIQU5HRSIsIk1FVEFfSU5GTyIsIkFQUEVORF9NRVRBX0lORk8iLCJTRVRfTUVUQV9JTkZPIiwiSFRUUCIsIl9wdWJzdWIiLCJkZWZhdWx0Q29kZSIsIkNMSyIsIkVYUCIsIklNUEVYUCIsIk9USEVSIiwiQVBQX1NIT1ciLCJBUFBfSElERV9PUl9VTkxPQUQiLCJTRVNTSU9OX0lOVEVSVkFMIiwiU0hBUkVfQ0FDSEVfSU5URVJWQUwiLCJFS1ZTIiwiRVZFTlRfTUFYX0NPVU5UIiwiTUVNT1JZX01BWF9DT1VOVCIsIk1BWF9RVUVVRV9DT1VOVCIsIkVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTCIsIlBBR0VfU1RBUlQiLCJQQUdFX0VORCIsIkFQUF9TVEFSVCIsIkFQUF9FTkQiLCJVU0VSX1BST0ZJTEVfS0VZIiwiSU1QUklOVCIsIklEX1RZUEUiLCJKU0JSSURHRV9PTkxZIiwiUEFHRV9DT05GSUciLCJBUExVU19TS0lQX0FQVl9SVUxFUyIsIkFQTFVTX1BWX0RPTUFJTiIsIkFQTFVTX0VLVl9ET01BSU4iLCJQQUdFX0VOVEVSIiwiQ1VSUkVOVF9QQUdFX0NPTkZJRyIsIl9BTk9OWV9JRCIsIl9VU0VSX0lEIiwiREVGQVVMVF9DT0RFIiwiRVZFTlRfTUFQIiwiMjEwMSIsIjIyMDEiLCIyMjAyIiwiMTk5OTkiLCIxMDIzIiwiMTAxMCIsIkVWRU5UX0lEX01BUCIsIlNIT1ciLCJIX09SX1UiLCJVTlNVQlNDUklCRSIsIlNVQlNDUklCRSIsIlBVQkxJU0giLCJDQUNIRV9QVUJTIiwiQVBMVVNfVU5JVkVSU0FMIiwiQ09NUExFVEUiLCJQVl9DT0RFIiwiRVhQX0NPREUiLCJDTEtfQ09ERSIsIk9USEVSX0NPREUiLCJTUE1fQ05UIiwiU1BNX1VSTCIsIlNQTV9QUkUiLCJNV19DSEFOR0VfUFYiLCJNV19DSEFOR0VfSEpMSiIsIkhUVFBTIiwiQVBMVVNfQVBQRU5EX01FVEFfSU5GTyIsIkFQTFVTX1NFVF9NRVRBX0lORk8iLCJQVklEIiwiQVBMVVNfTE9HX1BJUEUiLCJvcGVuQVBJcyIsIlNFU1NJT05fUEFVU0VfVElNRSIsIkNVUlJFTlRfU0VTU0lPTiIsIk1BWF9FVkVOVElEX0xFTkdUSCIsIk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIIiwiTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQiLCJGQUlMRURfUkVRVUVTVFMiLCJSRVFVRVNUUyIsIlNIQVJFUyIsIkFQTFVTX1NTUkMiLCJHTE9CQUxfUFJPUEVSVFkiLCJBUExVU19JTVBSSU5UX1ZFUlNJT04iLCJBUExVU19SRU1PVEVfQ09ORklHIiwiUkFOSyIsIldFQl9FVkVOVF9TVUZGSVgiLCJXRUJfUENfUFZfU1VGRklYIiwiV0VCX1dBUF9QVl9TVUZGSVgiLCJQQUdFX0xFQVZFIiwiQVBMVVNfQVVUT1RSQUNLX0VOQUJMRUQiLCJBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUiLCJBUExVU19BVVRPVFJBQ0tfQ09ORklHIiwiQVBMVVNfQVVUT1RSQUNLX0NPTkZJR19SRU1PVEUiLCJBUExVU19ESVNBQkxFX0FVVE9FVkVOVCIsIkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URSIsIkFQTFVTX0RJU0FCTEVfQVVUT1BWIiwiQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFIiwiQVBMVVNfREVWSUNFX0VOQUJMRSIsIlBFUkZPUk1BTkNFX1dBUklORyIsIlNUQVJUX0lEIiwibWV0YUluZm8iLCJhcGx1cy1yaG9zdC12IiwiYXBsdXMtcmhvc3QtZyIsImFwbHVzLW1tc3RhdC10aW1lb3V0IiwiYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQiLCJhcGx1cy1kaXNhYmxlLWFwdiIsImFwbHVzLWF1dG90cmFjay1lbmFibGVkIiwiYXBsdXMtZGV2aWNlLWVuYWJsZSIsImFwbHVzLWRldmljZS1lbmFibGVkIiwic2RrSWQiLCJnbG9iYWxDb25maWciLCJpc0FsaSIsImlzRGVjb2RlVXJsIiwiRVRBR19TVE9SQUdFX0tFWSIsInNjcmlwdF9uYW1lIiwiYXBsdXMtZ2xvYmFsZGF0YSIsImx2ZXIiLCJwbHVnaW5zIiwibmFtZSIsInBhdGgiLCJkZXBzIiwiY29uZmlnIiwicHYiLCJhcGx1c1dhaXRpbmciLCJsb2dkYXRhVG9VdCIsImhqbGoiLCJpc09wZW5BcGkiLCJnZXRHbG9iYWxBcmdzIiwicXVlcnkiLCJzY2VuZSIsImdsb2JhbF9hcmdzIiwibWluaWFwcERlYnVnSWQiLCJkZWJ1Z0lkIiwiayIsImluZGV4T2YiLCJzZXNzaW9uU3RhcnQiLCJvcHRpb25zIiwiY2FjaGUiLCJsb2FkIiwidWxvZyIsInciLCJnZXQiLCJzZXQiLCJuZXdPcHRpb25zIiwiZGVlcENsb25lIiwiY2xvbmVEZWVwIiwidXRpbERhc2giLCJhc3NpZ24iLCJyZXF1ZXN0UXVldWUiLCJjYiIsInNlbmQiLCJpc05ld1Nlc3Npb24iLCJzZXNzaW9uTWFuYWdlciIsInJlc3VtZSIsInNlc3Npb25JZCIsImdldEN1cnJlbnRTZXNzaW9uSWQiLCJldmVudE1hbmFnZXIiLCJzZXRTZXNzaW9uSWQiLCJzZXNzaW9uRW5kIiwicGF1c2UiLCJzYXZlIiwiYWRhcHRNeUFwcEhpZGUiLCJteSIsIm9uVGl0bGVDbG9zZUNsaWNrIiwiaW5qZWN0QXBwIiwiYXBwQmFrIiwiQXBwIiwiYWxyZWFkeVN0YXJ0ZWQiLCJsYW51Y2hlZCIsImN0eCIsInV0aWxHb2xkbG9nIiwibWluaSIsImZuIiwib25MYXVuY2giLCJpbml0SXNUQiIsInJlZmVycmVySW5mbyIsInV0aWxSZW1vdGVDZmciLCJlbmFibGVDZmciLCJnZXRTeW5jIiwiQVBQX0xBVU5DSF9UWVBFIiwicHVzaCIsImFjdGlvbiIsImFyZ3VtZW50cyIsInF1ZXJ5RGF0YSIsInNwbSIsInNwbV9vcmlnbiIsInRyaW0iLCJkZWJ1Z0luZm9zIiwic3BsaXQiLCJhcGx1c193b3JrX25vIiwibGVuZ3RoIiwiYXBsdXNfdHJhY2tfZGVidWdfaWQiLCJhcGx1c19mbGFnIiwib25TaG93Iiwib3B0cyIsInN0YXJ0X3R5cGUiLCJ1dGlscyIsIm9uQXBsdXNSZWFkeSIsInV0aWxNb25pdG9yIiwiY2xlYXIiLCJzdGFydGlkIiwidW1VdGlscyIsImdldFN0YXJ0SWQiLCJzZXRTdGFydElkIiwicGFnZUNvZGUiLCJQYWdlTWFuYWdlciIsImdldFBhZ2VDb2RlIiwib25BcHBTaG93VGltZSIsIkRhdGUiLCJub3ciLCJwYWdlX25hbWUiLCJ1cmwiLCJvbkhpZGUiLCJnZXRDdXJyZW50UGFnZVBhdGgiLCJkdXJhdGlvbiIsImVuZF90eXBlIiwic3RhcnRfdGltZSIsImFmdGVyIiwibWV0aG9kcyIsInQiLCJ0aGlzT2JqZWN0IiwiYXJncyIsIm9uQXBwU2hvdyIsImlzRnVuY3Rpb24iLCJnZXRMYXVuY2hPcHRpb25zU3luYyIsIm9uQXBwSGlkZSIsInJ1biIsImVhY2giLCJyZXNldEZuIiwibiIsInJzIiwiYXBwbHkiLCJyZXdyaXRlRm4iLCJvYmoiLCJuZXdGbiIsIm9sZEZuIiwiY2FsbGJhY2siLCJzdGF0dXMiLCJjbGlja19wcm94eSIsIm1ldGhvZCIsInV0aWxPYmplY3QiLCJvcmlGdW5jIiwicmVzdWx0IiwiZXZlbnQiLCJpc09iamVjdCIsInJlY29yZCIsImdldEluZGV4QnlSZWN0Iiwic2VsZWN0b3IiLCJ0YXJnZXRSZWN0IiwidGFyZ2V0SW5kZXgiLCJjcmVhdGVTZWxlY3RvclF1ZXJ5Iiwic2VsZWN0QWxsIiwiYm91bmRpbmdDbGllbnRSZWN0IiwiZXhlYyIsInJlY3QiLCJpdGVtIiwiaW5kZXgiLCJ3aWR0aCIsImhlaWdodCIsImxlZnQiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImlzUGxhaW5PYmplY3QiLCJhcnIiLCJhdHRyIiwiaGFzT3duUHJvcGVydHkiLCJsIiwicHJvdG8iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsIl9pc1RiIiwiVUEiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJzd3VzZXJBZ2VudCIsInRlc3QiLCJnZXRQbGF0Zm9ybVR5cGUiLCJjYW5JVXNlIiwiaXNUQiIsInV0aWwiLCJnZXRDdXJyZW50UGFnZSIsInBhZ2VzIiwiZ2V0Q3VycmVudFBhZ2VzIiwiZ2V0UmVmZXJyZXJQYWdlIiwicmVzZXRJc1RCIiwiZGQiLCJwbGF0VHlwZSIsInNka1R5cGUiLCJsb2dEb21haW4iLCJ0YiIsInR0Iiwic3dhbiIsInd4IiwiZ2V0U2RrVHlwZSIsImdldExvZ0RvbWFpbiIsIkhUVFBfUkVRVUVTVCIsIlJFUVVFU1QiLCJGTiIsInJlcXVlc3QiLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsdXJlQ2FsbGJhY2siLCJtZXRob2ROYW1lIiwicmVxdWVzdE1ldGhvZE5hbWUiLCJyZXEiLCJjYWxsYmFja2VkIiwiZGF0YVR5cGUiLCJ0aW1lb3V0IiwiZml4RG9tYWluIiwibXNnIiwicmVxT3B0aW9ucyIsInN1Y2Nlc3MiLCJyZXMiLCJmYWlsIiwiZmFpbHVyZSIsImRhdGEiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiSlNPTiIsInN0cmluZ2lmeSIsIl9leHRJbmZvIiwiZ2V0TWV0YUluZm8iLCJzZXRUaW1lb3V0IiwiY29uc29sZSIsIndhcm4iLCJvIiwiYXJyMnBhcmFtIiwibGVuIiwic19wbGFpbl9vYmoiLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwibWtQbGFpbktleSIsIk1hdGgiLCJyYW5kb20iLCJta1BsYWluS2V5Rm9yRXhwYXJhbXMiLCJrZXlfcHJlZml4IiwiX2tleSIsInBhcmFtMmFyciIsInBhcmFtcyIsInNoaWZ0IiwiYXJyMm9iaiIsInJldCIsImpzb25MaWtlU3RyMkpTT04iLCJqc29uU3RyIiwic3RyIiwicmVwbGFjZSIsImFycjEiLCJhcnIyIiwiZ2V0QXBwS2V5IiwiY2hlY2tFbXB0eU9iaiIsImtleXMiLCJjaGVja0RvbWFpbiIsInJlZyIsIlJlZ0V4cCIsIm1hdGNoZWQiLCJtYXRjaCIsInRpcF93IiwicmVwZWF0IiwiY2hlY2tPcGVuaWQiLCJvZCIsIm1hcEV2ZW50U2FtcGxlUmF0ZXMiLCJldmVudElkcyIsImVrdiIsImV2ZW50SWQiLCJzYW1wbGluZ1JhdGUiLCJMT0dfUFJFRklYIiwiVUxvZyIsInNldERlYnVnIiwiZGVidWciLCJfZGVidWciLCJpbmZvIiwiZXJyb3IiLCJsb2ciLCJjaGFyIiwiX2luc3RhbmNlIiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJpc0VtcHR5T2JqZWN0IiwiciIsIm5ld29iaiIsIkFycmF5IiwiaXNBcnJheSIsInBhcnNlIiwiaW5pdCIsIm5ld1Nlc3Npb24iLCJfY3VycmVudFNlc3Npb24iLCJkYXRlIiwiX3Jlc3VtZVRpbWUiLCJnZXRUaW1lIiwiZW5kX3RpbWUiLCJfY3JlYXRlTmV3U2Vzc2lvbiIsInRvTG9jYWxlVGltZVN0cmluZyIsIl9lbmRTZXNzaW9uIiwiZ2V0Q3VycmVudFNlc3Npb24iLCJjbG9uZUN1cnJlbnRTZXNzaW9uIiwiX2dldFVtUGFyYW1zIiwiYXBsdXNfcXVlcnkiLCJwcmV2T3B0aW9ucyIsImxhdW5jaE9wdGlvbnMiLCJyZWZlcnJlckFwcElkIiwiYXBwSWQiLCJncCIsInRzIiwiZ2V0UmFuZG9tU3RyIiwic3RhdGVfcyIsImpzb25VdGlsIiwiQ2FjaGUiLCJfZGF0YSIsInJlbW92ZVN0b3JhZ2UiLCJfbmFtZSIsImdldFN0b3JhZ2UiLCJfbG9hZGVkIiwiZXJyTXNnIiwic2V0U3RvcmFnZSIsInN0cmluZ2Z5IiwicmVtb3ZlIiwiZ2V0QWxsIiwiaGFzIiwiaXNMb2FkZWQiLCJnZXRTdG9yYWdlU3luYyIsInNldFN5bmMiLCJzZXRTdG9yYWdlU3luYyIsImpzb24iLCJwYXJzZVRvQXJyYXkiLCJOdW1iZXIiLCJwb3MiLCJyb3VuZCIsInN0YXJ0c1dpdGgiLCJzZWFyY2hWYWwiLCJzdWJzdHIiLCJ0YXJnZXQiLCJ1bmRlZmluZWQiLCJUeXBlRXJyb3IiLCJvdXRwdXQiLCJzb3VyY2UiLCJuZXh0S2V5IiwiY2hlY2tFdmVudCIsInByb3BlcnRpZXMiLCJjdXNwIiwicmVzZXJ2ZVdvcmRzIiwicmVzZXJ2ZVdvcmRNYXAiLCJmb3JFYWNoIiwid29yZCIsImNvdW50IiwiZGVsZXRlSW5mbyIsImdva2V5IiwiRGF0YVR5cGUiLCJIQUxGX1NFU1NJT04iLCJDTE9TRV9TRVNTSU9OIiwiRUtWIiwiRU5URVJfUEFHRSIsIkxFQVZFX1BBR0UiLCJBY2Nlc3NUeXBlIiwiTU9CSUxFX05FVFdPUktfMkciLCJNT0JJTEVfTkVUV09SS18zRyIsIk1PQklMRV9ORVRXT1JLXzRHIiwiTU9CSUxFX05FVFdPUktfTk9ORSIsIl9jYWNoZUV2ZW50cyIsIl9tZW1vcnlFdmVudHMiLCJla3ZzIiwiX2dldENhY2hlRXZlbnRzTGVuZ3RoIiwiX2J1aWxkRWt2cyIsIm1lbW9yeUV2ZW50cyIsImV2ZW50cyIsIl9zZXNzaW9uSWQiLCJldmVudHNNYXAiLCJhZGRFdmVudCIsInVuc2hpZnQiLCJfbm9TZXNzaW9uRXZlbnRzIiwic3RhcnRJZCIsIl9zdGFydElkIiwiZ2V0RWt2cyIsImdldEVrdnNMZW4iLCJtZW1vcnlFdmVudHNMZW4iLCJIZWFkZXIiLCJidWlsZEJvZHkiLCJRdWV1ZSIsIl9lbnF1ZXVlUmVxdWVzdCIsImNsaWVudCIsIl9hcGx1c19jbGllbnQiLCJoZWFkZXIiLCJnZXROZXRJbmZvIiwibm9DYWNoZSIsIl9xdWV1ZSIsImVucXVldWUiLCJfc2VuZFF1ZXVlIiwiY29tcGxldGVkQ2FsbGJhY2siLCJpc05SIiwic2VuZFF1ZXVlIiwiX2ZhaWxlZFF1ZXVlIiwiZGVxdWV1ZSIsIl9mYWlsUmVxdWVzdHMiLCJfcHJvY2Vzc0ZhaWxSZXF1ZXN0cyIsIl9zdGFydFNlbmQiLCJSZXF1ZXN0UXVldWUiLCJhZGQiLCJfcmVxS2V5IiwibG9hZFF1ZXVlIiwiaXRlbXMiLCJjYWNoZWQiLCJuZXdDYWNoZSIsInJlcUtleSIsImFjY2VzcyIsIm5ldHdvcmtUeXBlIiwidG9Mb3dlckNhc2UiLCJhY2Nlc3Nfc3VidHlwZSIsImdldEhlYWRlckluZm8iLCJpbXByaW50IiwiZGV2aWNlX3R5cGUiLCJzZGtfdmVyc2lvbiIsImFwcGtleSIsImRldmljZV9pbmZvIiwiYXBwaWQiLCJhcHBfZW52IiwiYXBwRW52IiwiYXBwX3ZlcnNpb24iLCJzeXN0ZW1JbmZvIiwic2FmZUFyZWEiLCJtb2RlbCIsInBsYXRmb3JtIiwiYnJhbmQiLCJicmFuZEwiLCJzZGtfdHlwZSIsInBsYXRmb3JtX3Nka192ZXJzaW9uIiwiU0RLVmVyc2lvbiIsInBsYXRmb3JtX3ZlcnNpb24iLCJwbGF0Zm9ybVZlcnNpb24iLCJzY3JlZW5XaWR0aCIsInBpeGVsUmF0aW8iLCJoIiwic2NyZWVuSGVpZ2h0IiwicmVzb2x1dGlvbiIsInBpeGVsX3JhdGlvIiwib3MiLCJmb250X3NpemVfc2V0dGluZyIsImZvbnRTaXplU2V0dGluZyIsImRldmljZV9tb2RlbCIsImRldmljZV9icmFuZCIsImRldmljZV9tYW51ZmFjdHVyZXIiLCJkZXZpY2VfbWFudWlkIiwiZGV2aWNlX25hbWUiLCJvc192ZXJzaW9uIiwibGFuZ3VhZ2UiLCJuZXRJbmZvIiwiX2J1aWxkSGFsZlNlc3Npb24iLCJzZXNzaW9uIiwic3QiLCJhbmFseXRpY3MiLCJzZXNzaW9ucyIsIl9idWlsZENsb3NlU2Vzc2lvbiIsIl9idWlsZEVrdiIsImdldFVybCIsInJob3N0IiwiYXBsdXNVdGlsIiwibWluaUxvZyIsInNka1JlcXVlc3QiLCJzcmNTdWNjZXNzIiwic3JjRmFpbCIsImlzVGltZW91dCIsInJlc3AiLCJjbGVhclRpbWVvdXQiLCJodHRwUmVxdWVzdCIsIk1BWF9SRVFVRVNUX1RJTUVPVVQiLCJzYXZlSW1wcmludCIsImxvY2FsSW1wdiIsImltcHJpbnRWZXJzaW9uIiwicmVtb3RlSW1wdiIsInRyYWNrRG9tYWluIiwicmVxdWVzdFJlbW90ZUNvbmZpZyIsImVyciIsImxzUmVtb3RlQ2ZnIiwiYnVpbGRIdHRwSGVhZGVyIiwiaGVhZGVyVHlwZSIsImlzTXkiLCJNc2ctVHlwZSIsIm1hbmdsZSIsImltcHJpbnRNYW5hZ2VyIiwiYmFzZTY0IiwidXRpbFBlcmZvcm1hbmNlIiwiZmFpbENhbGxiYWNrIiwicF9oZWFkZXIiLCJhbGlwYXlfaWQiLCJ1bmlvbmlkIiwidXNlcklkIiwib3BlbmlkIiwidXNlcl9uaWNrIiwiYWN0aXZlX3VzZXIiLCJwdWlkIiwicHJvdmlkZXIiLCJ0cmFjZUlkIiwic3RhcnRfaWQiLCJtYW5nbGVEYXRhIiwicmVxdWVzdERhdGEiLCJlbmNvZGUiLCJzdGF0dXNDb2RlIiwiY29kZSIsInByb2ZpbGUiLCJlbmQiLCJyZXNwb25zZUVuZCIsInN0YXJ0IiwicmVxdWVzdFN0YXJ0IiwibmVlZFNlbmRQZXJmb3JtYW5jZUV2ZW50IiwiY29tcGxldGUiLCJfbWFuZ2xlSGVhZGVyIiwibWFwIiwiX21hbmdsZU9iaiIsImlkX3RyYWNraW5nIiwiaWRNYXAiLCJfbWFuZ2xlQW5hbHl0aWNzIiwicHJvcCIsImFuYWx5dGljc01hcCIsImhlYWRlck1hcCIsImlkX3R5cGUiLCJfaWQiLCJ0ZXN0VG9rZW4iLCJ1dWlkIiwiYW5vbnltb3VzaWQiLCJkZXZpY2VfaWQiLCJ1c2VyaWQiLCJJbXByaW50TWFuYWdlciIsIl9pbXByaW50IiwiZ2V0SW1wT2JqIiwiZGVjb2RlIiwiZ2V0SXRlbSIsImltcG9iaiIsImI2NGNoYXJzIiwiYjY0dGFiIiwiYmluIiwiY2hhckF0IiwiZnJvbUNoYXJDb2RlIiwiU3RyaW5nIiwiY2JfdXRvYiIsImNjIiwiY2hhckNvZGVBdCIsInJlX3V0b2IiLCJ1dG9iIiwidSIsImNiX2VuY29kZSIsImNjYyIsInBhZGxlbiIsIm9yZCIsImNoYXJzIiwiYnRvYSIsImIiLCJfZW5jb2RlIiwidXJpc2FmZSIsIm0wIiwicmVfYnRvdSIsImNiX2J0b3UiLCJjY2NjIiwiY3AiLCJvZmZzZXQiLCJidG91IiwiY2JfZGVjb2RlIiwiYXRvYiIsIl9kZWNvZGUiLCJnZXRNZXRyaWMiLCJlbnRyaWVzIiwiZHVyYXRpb25BcnJheSIsIm1heCIsIkluZmluaXR5IiwibWluIiwic3VtIiwiYXZlcmFnZSIsImZsb29yIiwiZ2V0TWV0cmljV2ViIiwicGVyZm9ybWFuY2UiLCJnZXRFbnRyaWVzIiwid2ViRG9tYWlucyIsInR5cGVNYXRjaCIsInNvbWUiLCJpbml0aWF0b3JUeXBlIiwiZG9tYWluTWF0Y2giLCJkIiwiX3JlY29yZCIsImdldExvY2FsU3RhdHVzIiwibHNjZmciLCJ1dGlsRGF0YSIsImdldExzUmVtb3RlQ2ZnIiwic2V0QXV0b0V2ZW50U3RhdHVzIiwic2V0RGV2aWNlU3RhdHVzIiwiZW5hYmxlIiwic2V0QXV0b1BhZ2VTdGF0dXMiLCJzZXRBdXRvVHJhY2tTdGF0dXMiLCJnZXRBdXRvRXZlbnRTdGF0dXMiLCJnZXREZXZpY2VTdGF0dXMiLCJnZXRBdXRvUGFnZVN0YXR1cyIsImdldEF1dG9UcmFja1N0YXR1cyIsImNmZyIsImNvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cyIsImNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyIsImNvZGVsZXNzU3RhdHVzIiwiY3VycmVudERldmljZUVuYWJsZSIsImV2ZW50U2FtcGxpbmdSYXRlIiwiQVBMVVNfRVZFTlRfTElNSVRSQVRFUyIsImNvZGVsZXNzSWdub3JlQ29tcG9uZW50IiwidXRpbFRyaW0iLCJ1dGlsU3RvcmUiLCJ0cnlUb0RlY29kZVVSSUNvbXBvbmVudCIsImRlZmF1bHRfdmFsIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2VTZW1pY29sb25Db250ZW50IiwicyIsImRpY3QiLCJ1bmRlY29kZSIsImoiLCJhMiIsImFfbGVuIiwiX3ZhbHVlIiwic2xpY2UiLCJub2RlTGlzdFRvQXJyYXkiLCJub2RlcyIsImdldExzQ25hIiwiX2xzX2NuYSIsIl9hcnIiLCJzZXRMc0NuYSIsInRvZGF5IiwiY25hIiwiZ2V0THNJbXB2IiwiSU1QUklOVF9TVE9SQUdFX0tFWSIsIl9sc19pbXB2Iiwic2V0THNJbXB2IiwiaW1wdiIsInNldExzUmVtb3RlQ2ZnIiwiUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSIsImNsb25lQ2ZnIiwiX2xzX3JlbW90ZUNmZyIsImVnVXJsIiwicmhvc3RfdiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJ0ZXN0S2V5IiwicmVtb3ZlSXRlbSIsIm1ha2VDYWNoZU51bSIsImlzU3RhcnRXaXRoIiwiczEiLCJzMiIsImlzRW5kV2l0aCIsImwxIiwibDIiLCJhbnkiLCJpc051bWJlciIsImlzTmFOIiwiaXNDb250YWluIiwiY29uc3RydWN0b3IiLCJnZXRVcmxQYXJhbXMiLCJyZWdleCIsImxvY2F0aW9uIiwiaHJlZiIsInRhcmdldE9iaiIsImFyZ3NPYmoiLCJ0byIsIm5leHRTb3VyY2UiLCJtYXhDb3VudCIsIl9tYXhDb3VudCIsIl9pdGVtcyIsInNpemUiLCJmcm9udCIsImlzRW1wdHkiLCJwcmludCIsImJ1aWxkUGF0aCIsInFzIiwicXNzIiwiY3VycmVudFBhdGgiLCJwYWdlT3B0aW9uTWFwIiwic2V0Q3VycmVudFBhdGgiLCJnZXRQYWdlUXVlcnkiLCJzZXRQYWdlUXVlcnkiLCJnZXRGdWxsUGF0aCIsImdldFBhZ2VOYW1lIiwibWV0YSIsInJlYWxQYXRoIiwiaGFzaE1vZGUiLCJoYXNoIiwicmVnUnVsZSIsImVhY2hNYXAiLCJnZXRXeFRpdGxlIiwiX193eENvbmZpZyIsInd4Q29uZmlnIiwicGFnZSIsInJvdXRlIiwiZ2xvYmFsIiwibmF2aWdhdGlvbkJhclRpdGxlVGV4dCIsInRpdGxlIiwiX193eEFwcENvZGVfXyIsImFwcEpTT04iLCJnbG9iYWxUaXRsZU1hcCIsInBhZ2VOYW1lIiwiZ2V0UGFnZVRpdGxlIiwicGFnZVRpdGxlIiwiZ2V0VlRSZWFsdGltZUNvZGUiLCJyZWdFeHAiLCJrMSIsInJhbmsiLCJla3ZSYW5rIiwiZ2V0VXRtUGFyYW1zT2JqIiwiaGFuZGxlclNoYXJlQXBwTXNnIiwib3B0IiwiaXMiLCJsaW5rUGFybWFzIiwiZm9ybWF0Iiwib2JqMnBhcmFtIiwiJCRfc2hhcmVfdWlkIiwiX19FVEFHX19DTkFfX0lEX18iLCIkJF91dG1fbWVkaXVtIiwiYXBwZW5kUGFyYW1zIiwib25QdWxsRG93blJlZnJlc2giLCJvblJlYWNoQm90dG9tIiwidGhhdCIsIm9uUGFnZUxvYWQiLCJ1dGlsRnVuY3Rpb24iLCJhcHBlbmRNZXRhSW5mbyIsIl9jdXJyZW50UGFnZSIsIm9uUGFnZVNob3ciLCJvblBhZ2VSZWFkeSIsIm9uUGFnZUhpZGUiLCJvbkFwbHVzQ2xrIiwib25BcGx1c1RvdWNoIiwicmV3cml0ZVNoYXJlIiwib25TaGFyZUFwcE1lc3NhZ2UiLCJvbGRPblNoYXJlQXBwTWVzc2FnZSIsInNoYXJlUmVzdWx0IiwicmV3cml0ZVNoYXJlVGltZWxpbmUiLCJvblNoYXJlVGltZWxpbmUiLCJvbGRPblNoYXJlVGltZWxpbmUiLCJpbmplY3RQYWdlIiwib2xkUGFnZUFmdGVyIiwib2xkUGFnZSIsIlBhZ2UiLCJwYWdlT3B0aW9ucyIsImluamVjdENvbXBvbmVudCIsIm9sZENvbXBvbmVudCIsIkNvbXBvbmVudCIsImluamVjdE1pZHdheSIsIm1wQ3R4IiwiaG9va1NldE5hdmlnYXRpb25CYXJUaXRsZSIsInBsYXRmb3JtQ3R4Iiwic2V0TmF2aWdhdGlvbkJhclRpdGxlIiwib2xkRnVuYyIsImRlZmluZVByb3BlcnR5IiwiZ2xvYmFsVGl0bGUiLCJ1dGlsSGFzaCIsImN1cnJlbnRwYWdlIiwiY3JlYXRlIiwiY3VycmVudFRhcmdldCIsImRhdGFzZXQiLCJpc19hdXRvIiwiZXZlbnRjb2RlIiwiY2giLCJkZWZfdiIsInNraXBFbmNvZGUiLCJpc0luUGxhbk9iaiIsInBhcmFtMm9iaiIsImZyYWdtZW50IiwiY29tbVRyYW5zbGF0ZSIsIl92IiwiZW5jb2RlR29rZXlWYWx1ZSIsIlB1YlN1YiIsImFwbHVzX3B1YnN1YiIsIkJhc2UiLCJnZXRBcmdzIiwiX2FyZ3MiLCJleHRlbmQiLCJjYWxsYWJsZSIsInByb3BzIiwiaW5zdGFuY2UiLCJoYW5kbGVycyIsInB1YnMiLCJzZXRIYW5kbGVycyIsInN1YnNjcmliZSIsImVUeXBlIiwiX3NlbGYiLCJ1bnN1YnNjcmliZSIsImhfc3RyIiwic19zdHIiLCJzcGxpY2UiLCJwdWJsaXNoIiwiY2FjaGVQdWJzIiwiU3ViQmFzZSIsIkYiLCJfJCIsImlzX3Rlcm1pbmFsIiwic2VuZF9wdl9jb3VudCIsIm1ldGFfaW5mbyIsInFHZXQiLCJzZXRNZXRhSW5mbyIsImlzSW50ZXJuYXRpb25hbCIsImdldEluZm8iLCJsYXN0X2luZm8iLCJjYXRjaEV4Y2VwdGlvbiIsInV0aWxQdWJzdWIiLCJPQkpFQ1QiLCJTVFJJTkciLCJnZXRVc2VySW5qZWN0R29rZXkiLCJ1c2VyRm4iLCJmbGFnIiwicHJvY2Vzc09iamVjdCIsIm9sZF92YWx1ZSIsIm5ld192YWx1ZSIsInRvU2V0TWV0YUluZm8iLCJwcm9jZXNzQXJyYXkiLCJwcm9jZXNzT2JqIiwiX3NldE1ldGFJbmZvIiwiZnJvbSIsIl9vbGRWYWx1ZSIsInBhZ2VQcm9wZXJ0aWVzIiwiX2siLCJ0bXBfcGFyc2UiLCJhcmcxIiwiZGVmYXVsdE1vZGUiLCJtb2RlIiwibWV0YU5hbWUiLCJtZXRhVmFsdWUiLCJtc2dzIiwiZG9QdWJNc2ciLCJkb0NhY2hlUHVicyIsImdldFB1YnN1YiIsInB1YnN1YiIsImRvU3ViTXNnIiwiZ2V0TG9nQ29uZmlnIiwibG9nQ29uZmlnIiwicGFnZUxvYWRUaW1lIiwiUEFHRV9MT0FEX1RJTUUiLCJ1dGlsRXRhZyIsIkVNUFRZX0NOQSIsIl9zeW5jRXRhZyIsImNoZWNrIiwiZXRhZ1N0b3JhZ2VLZXkiLCJmZXRjaEV0YWdTdGF0dXMiLCJ0b1N5bmNFdGFnIiwiYXBsdXNfcmhvc3RfdiIsImV0YWciLCJldGFnS2V5VmFsdWUiLCJldGFncyIsInJlczIiLCJDTkEiLCJzdGF0ZSIsImV0YWdUaW1lb3V0IiwiZGVmYXVsdFRpbWUiLCJ0aW1lIiwicGFyc2VJbnQiLCJnZXRBcGx1c1dhaXRpbmciLCJ3aGVuX3RvX3NlbmRwdiIsImlzV2FpdCIsImdldEhvc3RVcmwiLCJ3aGVyZV90b19zZW5kIiwibG9nSWQiLCJ1dGlsUGFyYW1zIiwiQ05UIiwiVVJMIiwiUFJFIiwiZ2V0Q29tbW9uUGFyYW1zIiwidXNlcmRhdGEiLCJwbGF0Zm9ybVR5cGUiLCJ1c2VySW5mbyIsIl9kZXZfaWQiLCJfYW5vbnlfaWQiLCJfdXNlcl9pZCIsIl91c2VyX25pY2siLCJfc2Vzc2lvbl9pZCIsInVhaWQiLCJpc1VNIiwiX3BhZ2VfdGl0bGUiLCJwYWdlSW5zdGFuY2UiLCJjdXJQYXRoIiwibG9nSWRLZXkiLCJsb2dJZEtleTIiLCJnZXRMb2dJZCIsImFwcEtleSIsImNvbW1vblBhcmFtcyIsInByZSIsInBhZ2VfcmVmZXJyZXIiLCJzZGtfaW5mbyIsImpzdmVyIiwiY3VzdG9tU2RrSWQiLCJ0aW1lWm9uZSIsImdldFRpbWVab25lIiwiZ21rZXkiLCJzcG1fdXJsIiwic3BtX3ByZSIsInNwbV9jbnQiLCJwdmlkIiwic2Vzc2lvbkFyZ3MiLCJnbG9iYWxBcmdzIiwiZ2V0UHZQYXJhbXMiLCJtYW5zbmRsb2ciLCJldmVudF9jb2RlIiwibG9ndHlwZSIsImxvZ2tleSIsImV2ZW50X3RpbWVzdGFtcCIsImdldEhqbGpQYXJhbXMiLCJoamxqUGFyYW1zIiwicmVjb3JkVHlwZSIsIndoYXRfdG9fc2VuZCIsImxvZ2RhdGEiLCJnZXRDaGFycyIsImRlZmF1bHRWYWwiLCJnZXRSYW5kb21JZCIsImhhbmRsZVBWSWQiLCJjaGFyUG9zIiwiY2hhcnNXaXRob3V0RyIsImNoYXJzV2l0aG91dEwiLCJybmRfc3RycyIsImhhbmRsZWQiLCJwYWdlVXJsIiwibG9nTmFtZSIsInJhbmRvbThDaGFycyIsInJhbmRvbTRDaGFycyIsInJhbmRvbTZDaGFycyIsIl90aW1lWm9uZSIsImdldFRpbWV6b25lT2Zmc2V0IiwiX2FuZCIsInpvbmUiLCJhYnMiLCJyZW1haW5kZXIiLCJyZW1haW5kZXJab25lIiwiaXNUQkVudiIsImN1cnJlbnRQYWdlIiwicHJlUGFnZSIsIndpbmRtaWxsIiwiaXNVbmRlZmluZWQiLCJnZXRVc2VyZGF0YSIsImNvbWJvVXNlcmRhdGEiLCJwYWdlUHJvcGVydHkiLCJ1cGRhdGVQcmUiLCJyZWZlcnJlciIsInVwZGF0ZVVybCIsInVwZGF0ZVNwbVVybCIsInNwbVVybCIsInVwZGF0ZVNwbVByZSIsInNwbVByZSIsInV0aWxFdmVudExpbWl0IiwiY2FuX3RvX3NlbmRwdiIsImNhblNlbmRQViIsInRyYWNrX3R5cGUiLCJuZWVkTGltaXRTZW5kIiwiZXZlbnRMaW1pdFJhdGVzIiwidXRpbEFycmF5IiwiZmluZCIsImNlaWwiLCJ1dGlsTG9jYWxDZmciLCJhcGx1c1V0aWxzIiwiY2FuVG9TZW5kSEpMSiIsImRldmljZVN0YXR1cyIsInJlbW90ZUF1dG90cmFja1N0YXR1cyIsImF1dG9ldmVudFN0YXR1cyIsImxvY2FsQXV0b3RyYWNrRW5hYmxlZCIsImF1dG9fZWxlbWVudCIsImF1dG9wdlN0YXR1cyIsImxvY2FsQXV0b1B2RGlzYWJsZWQiLCJsb2NhbEF1dG9QVkRpc2FibGVkIiwibG9jYWxBdXRvRXZlbnREaXNhYmxlZCIsImZsYXQiLCJpbmRleG9mIiwiaXRlbU1hdGNoIiwiZ2V0VXNlckRhdGEiLCJleGRhdGEiLCJfYXBsdXNfYXBpIiwiYXBsdXNPYmoiLCJtc2dBcnIiLCJSZWR1Y2VyIiwiaXNUcml2ZXIiLCJfZ2V0UGFnZVNwbSIsInR5cGUiLCJzdWJUeXBlIiwic3BtVHlwZSIsImlzUGFnZURpc0FwcGVhciIsImlzUGFnZUFwcGVhciIsIl9zZW5kIiwiX3JlcXVlc3RWVENvbmZpZyIsIl9yZXF1ZXN0UmVtb3RlQ29uZmlnIiwiX3NlbmRQViIsInJlZHVjZXIiLCJwdWJzdWJUeXBlIiwibWlkZGxld2FyZU1lc3NhZ2VLZXkiLCJfY29tYmluZVJlY29yZCIsImdva2V5cyIsInNlbmR0b215IiwiZXhhcmdzIiwic2NtIiwiYXBsdXNDb250ZW50SWQiLCJfYXBsdXNfc2VuZHRvbXkiLCJfZ29rZXlzIiwiZ2V0UGFnZVNQTSIsIl9zZXRQYWdlU1BNIiwic3BtQ250IiwiX3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzIiwicmVwb3J0QW5hbHl0aWNzIiwic3BtRGV0YWlsIiwiaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yIiwiX3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcyIsImV2ZW50aWQiLCJjb21OYW1lIiwiYXJnMiIsImFyZzMiLCJwYXJhbSIsImNhbGxVc2VyVHJhY2siLCJfYXBwZW5kTWV0YUluZm8iLCJfc2tpcFBhZ2UiLCJfcGFnZUFwcGVhciIsIl9wYWdlRGlzYXBwZWFyIiwiX3VwZGF0ZVBhZ2VVdHBhcmFtIiwidXRQYXJhbUpzb24iLCJfdXBkYXRlTmV4dFBhZ2VVdHBhcmFtIiwiX3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzIiwiZXh0RGF0YSIsIl9nZXRQYWdlU3BtVXJsIiwiX2dldFBhZ2VTcG1QcmUiLCJfc2V0UGFnZU5hbWUiLCJwYWdlTWV0YSIsIl9nZXRFbGVtZW50U1BNIiwic3BtQiIsInRyYWNrZXJQYXJhbXMiLCJzcG1DRCIsInNwbUMiLCJzcG1EIiwidGFyZ2V0U3BtIiwiYXV0b19jbGtfbWV0YWluZm8iLCJhdXRvX2V4cF9tZXRhaW5mbyIsImNsa19pbmZvIiwiY3NzU2VsZWN0b3IiLCJleHBfaW5mbyIsImVsZW1lbnRzIiwiZmllbGRzIiwiX3JlY29yZEFwcExpbmsiLCJ0YXJnZXRBcHBLZXkiLCJ1dGlsTG9nZ2VyIiwiQ29tcG9zZSIsInBsdWdpbnNMb2FkZXIiLCJDT05GSUciLCJwbCIsIm1pZGRsZXdhcmUiLCJsb2dnZXIiLCJhcHAiLCJjb21wb3NlIiwid3JhcCIsIm1lc3NhZ2VGblF1ZXVlIiwicHJlZml4IiwibGV2ZWwiLCJkZWJ1Z0xvZyIsImFwbHVzRGVidWciLCJjYWxsZWRMaXN0Iiwic2V0Q2FsbGVkTGlzdCIsInJlc2V0Q2FsbGVkTGlzdCIsIm13IiwibWF4VGltZW91dCIsInNsZWVwSGFuZGVyMSIsIl90aW1lX291dCIsIl9td19uYW1lIiwicGx1Z2luc19uYW1lIiwicHVic3ViSW5mbyIsInBsdWdpbiIsImNvbGxlY3RfY2xrIiwiYXBsdXNDdHgiLCJjbGtfY29uZmlnIiwiaW5pdENsayIsImVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayIsImVsZW1lbnRzR3JvdXBzIiwid2F0Y2hfY2xpY2siLCJzY3JvbGxPZmZzZXQiLCJnZXREYXRhU2V0IiwiX2FwbHVzX2F1dG9fZXhwIiwiX2hhc2hNYXAiLCJoYXNoTWFwIiwiZWxlX3MiLCJleHBDb25maWciLCJnZXRIYXNoS2V5IiwiaGFzaF92YWx1ZSIsIndhdGNoVHJhY2tlciIsInJheFV0aWwiLCJjbGtJbmZvIiwicGFnZUN0eCIsImlzSW5BcmVhIiwiZWxlSW5mbyIsImNoYW5nZWRUb3VjaCIsImNoYW5nZWRUb3VjaGVzIiwiZGV0YWlsIiwieCIsImNsaWVudFgiLCJ5IiwiY2xpZW50WSIsIl90b3AiLCJfYm90dG9tIiwic2Nyb2xsVG9wIiwicmVzdWx0cyIsImdyb3VwIiwic3BtRGF0YSIsIl9zcG1EYXRhIiwiZG9jdW1lbnQiLCJkb21EYXRhU2V0IiwidHJhY2tlciIsImVsZW1lbnQiLCJyZWR1Y2UiLCJwcmV2aW91cyIsImN1cnJlbnQiLCJtYXRjaGVkUmVzdWx0IiwicHJldmlvdXNFbGVtZW50IiwiY3VycmVudEVsZW1lbnQiLCJwdXNoRXZlbnQiLCJnZXRVc2VySW5mbyIsInVzZXJGbk5hbWUiLCJnZXRGaXhlZE51bWJlciIsIl9yZXN1bHQiLCJfbnVtIiwicGFyc2VGbG9hdCIsInRvRml4ZWQiLCJyZWNvcmRFeHBNYXBRdWV1ZSIsIkRFRkFVTFRfUEtHX1NJWkUiLCJQT1NUIiwiRXZlbnRBcnJheSIsImJ1ZmZlciIsInBrZ1NpemUiLCJjb21iaW5lUmVjb3JkIiwiZGF0YWtleSIsIl93IiwiX2giLCJfeCIsIl95IiwiX3JhdGUiLCJ2aWV3YWJpbGl0eVJhdGUiLCJpbnRlcnNlY3Rpb25SYXRpbyIsIl92aWV3YWJpbGl0eSIsIl92dCIsIl90cmFja2VyUGFyYW1zIiwidHJhY2tlcnBhcmFtcyIsImN1c3RvbUFyZ3MiLCJjdXIiLCJ3YXRjaFJlY29yZCIsImNsZWFyUmVjb3JkIiwiZWxlbWVudEF0dHIiLCJoYXNoS2V5IiwicG9zaXRpb25TZWxlY3RvciIsImNseCIsImRvbXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidHAiLCJpc1JheCIsImNvbGxlY3RfZXhwIiwiUEFHRV9EQVRBX01BUCIsIndhdGNoTWV0YUluZm8iLCJpc0ZpcnN0Iiwid2F0Y2hUeXBlIiwiaGFuZGxlck1ldGFJbmZvIiwibWV0YUtleSIsIl9jb25maWcyIiwiZ2V0QXV0b0V4cENvbmZpZyIsIl9jb25maWciLCJ3YXRjaF9leHBvc3VyZSIsImluaXRFeHAiLCJyZXNldEF1dG9FeHAiLCJfcGF0aCIsIl9jdXJyZW50RGF0YSIsImlzU3RhcnQiLCJpc0ZpcnN0VG91Y2giLCJtaW5pVXRpbCIsIm9ic2VydmVycyIsImNvbmYiLCJyZWxvYWRDdHgiLCJ3YWl0IiwiaGFzaGluZyIsInN1YmplY3QiLCJkdXAiLCJuZXdPYnNlcnZlciIsImluaXRPYnNlcnZlciIsInJlbW92ZWRPYnNlcnZlciIsImRpc2Nvbm5lY3QiLCJjaGVja0lzSW5IYXNoTWFwIiwidXBkYXRlSGFzaE1hcCIsImFkZE9ic2VydmUiLCJlbnRyeSIsIl9pbmRleCIsIl9lbnRyeSIsImV4cG9zdXJlSGFuZGxlIiwiZXhpc3QiLCJ0aHJlc2hvbGRzIiwiQVVUT19BVF9WSUVXX1JBVEUiLCJpbml0aWFsUmF0aW8iLCJpc01ZIiwiY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiLCJvYnNlcnZlQWxsIiwib2JzZXJ2ZXIiLCJjc3MiLCJyZWxhdGl2ZVRvIiwib2JzZXJ2ZSIsInJlbGF0aXZlVG9WaWV3cG9ydCIsImV4cG9zdXJlVGltZSIsImV4cEVsZW1lbnRzIiwiY2hlY2tTdGFydCIsInRlbXBzIiwiX2VsZVBvcyIsImRlZmF1bHRSYXRpbyIsInJlc2V0IiwiZ2V0TWV0YVZhbHVlIiwidXRpbE1ldGEiLCJnZXRNZXRhQ250IiwiREFUQV9BUExVU19BRV9LRVkiLCJEQVRBX0FQTFVTX0FDX0tFWSIsIkRBVEFfQVBMVVNfU1BNX0FOQ0hPUl9JRF9LRVkiLCJEQVRBX0FQTFVTX1ZUX0lURU1fSU5ERVhfS0VZIiwiTE9PUF9USU1FIiwiZ2V0RGVmYXVsdFJlcXVlc3RDZmciLCJnZXRBdXRvRXhwVmlld1JhdGUiLCJkZWZhdWx0X3ZhbHVlIiwicmF0ZSIsInZpc2libGVfcmF0ZSIsImdldEF1dG9FeHBEdXJhdGlvbiIsInRtcF9kdXJhdGlvbiIsImR1cmF0aW9uX24iLCJFWFBfRFVSQVRJT04iLCJnZXRBdXRvQ29uZmlnIiwiY29uZmlnS2V5IiwibWV0YU9iaiIsImFwbHVzQXV0b0V4cCIsImNvbmZpZ3MiLCJ0bXBfdGFnX2ZpbHRlciIsInRtcCIsInRhZyIsImZpbHRlciIsIndob2xlU2VsZWN0b3IiLCJFcnJvciIsInRhZ19maWx0ZXIiLCJlbGVtZW50U2VsZWN0b3IiLCJnZXRBdXRvRXhwVXNlckZuIiwiYWVBdXRvVXNlckZuIiwiaXNUaHJvdHRsZVdhdGNoRG9tIiwiZ2V0QXV0b0Nsa0NvbmZpZyIsImdldEF1dG9DbGtVc2VyRm4iLCJhY0F1dG9Vc2VyRm4iLCJnZXRNZXRhVGFncyIsImZvcmNlIiwiX2hlYWRfbm9kZSIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiX21ldGFfbm9kZXMiLCJjb250ZW50IiwibWV0YV9ub2RlcyIsInV0aWxBdHRyaWJ1dGUiLCJ0cnlUb0dldEF0dHJpYnV0ZSIsImdldE9uZVBhZ2VJbmZvIiwiaXNvbmVwYWdlIiwidXJscGFnZW5hbWUiLCJpc29uZXBhZ2VfZGF0YSIsImFycl9jb250ZW50IiwiYXR0cl9uYW1lIiwiZ2V0QXR0cmlidXRlIiwidHJ5VG9TZXRBdHRyaWJ1dGUiLCJhdHRyX3ZhbHVlIiwic2V0QXR0cmlidXRlIiwidHJ5VG9SZW1vdmVBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJwdXNoUXVldWUiLCJfZ2V0TmV0d29ya1R5cGUiLCJnZXROZXR3b3JrVHlwZSIsIl9nZXRTeXN0ZW1JbmZvIiwiZW1wdHlPYmoiLCJzeXNJbmZvIiwiU1lTVEVNX0lORk8iLCJ2ZXJzaW9uIiwiZ2V0U3lzdGVtSW5mbyIsIl9nZXRBY2NvdW50SW5mb1N5bmMiLCJnZXRBY2NvdW50SW5mb1N5bmMiLCJhY2NvdW50SW5mbyIsIm1pbmlQcm9ncmFtIiwiYXBwVmVyc2lvbiIsImVudlZlcnNpb24iLCJwbHVnaW5BcHBJZCIsInBsdWdpbkFwcFZlcnNpb24iLCJnZXRBcHBJZFN5bmMiLCJhcHBJbmZvIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJzeXN0ZW0iLCJob3N0IiwiZW52IiwicmVzZXRMYXN0UGFnZVNwbSIsImxpc3RlbiIsImN1cnJlbnRQYWdlUGF0aCIsIm1hdGNoVXJsIiwic2V0UGFnZVNQTSIsInNwbUEiLCJzcG1hYiIsInNwbWFic3RyIiwicHJlUHJlUGFnZSIsImN1cnJlbnRQYWdlU3BtIiwiTWFpbiIsIm1haW4iLCJoYW5kbGVFdmVudCIsImFtb3VudCIsIm1heFF1ZXVlQ291bnQiLCJtYWluX2Jhc2VfaHR0cCIsImhhbmRsZXJNaWRkbGV3YXJlIiwidXNlckV2ZW50QXJncyIsImV2ZW50X2FyZ3MiLCJzZGtBcmdzIiwicmVmZXJfcGFnZSIsInNoYXJlX3R5cGUiLCJwYWdlX3RpdGxlIiwiZXZlbnRfdHlwZV9pZCIsImNsb25lUCIsInB2YXJncyIsInBhZ2VfaWQiLCJfcGFnZV9hdXRvX3B2IiwicmVmX3VybCIsIl9wYWdlX2F1dG9faWQiLCJwYWdlX3N0YXJ0Iiwid2F0Y2hMT0ciLCJ1dGlsR1EiLCJzdWJzY3JpYmVMb2dzIiwicHVzaEludG9Hb2xkbG9nUXVldWUiLCJvcmlEYXRhcyIsImdldExvZ2ljU3ltYm9sIiwibmFtZXMiLCJhcGx1c18xIiwiYXBsdXNfMiIsInByb3BzVHlwZSIsInF1ZSIsImdldEZvcm1hdFF1ZXVlIiwicXVldWUiLCJwcm9jZXNzR29sZGxvZ1F1ZXVlIiwiZm9ybWF0UXVldWUiLCJnZXRBcGx1c0hvbGRUeXBlIiwiZmlsdGVyVGFzayIsInRhc2siLCJob2xkVHlwZSIsIlNUQVJUIiwiQVBMVVNfSE9MRF9RVUVVRSIsInByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIiwiQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUiLCJBUExVU19IT0xEX0FOT05ZX1FVRVVFIiwiZ2V0TWV0aG9kTmFtZSIsIlFVRVVFIiwiZGVsYXlUYXNrcyIsInByb2Nlc3NUYXNrIiwic3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlIiwicXVldWVOYW1lIiwiX2ZuIiwicXVldWVNYXAiLCJzdWJzY3JpYmVNd0NoYW5nZVF1ZXVlIiwic3Vic2NyaWJlTWV0YVF1ZXVlIiwic3Vic2NyaWJlUXVldWUiLCJtZXRhUXVldWUiLCJvdGhlcnNRdWV1ZSIsImFjIiwicHJvY2Vzc0FwbHVzUXVldWUiLCJzdGFydExlbmd0aCIsImF1dG9UcmFja2VyIiwiZXZlbnRIYW5kbGUiLCJldmVudE5hbWUiLCJwZHJfY29uZmlnIiwicGFnZW5hbWUiLCJyYl9jb25maWciLCJzaGFyZV9jb25maWciLCJfaGFzVHJhY2tlZCIsImV4dHJhUGFyYW1zIiwiaXNNaW5pIiwiZ2V0Q29uZmlnIiwiZmV0Y2hWZXJpZnlDb25maWciLCJhcHBJbmZvSWQiLCJhcGlfaG9zdCIsInZlcmlmeV9ob3N0IiwicHJvdG9jYWwiLCJ2ZXJpZnlVcmwiLCJjZmdEYXRhIiwiX2JlZ2luTG9hZCIsIl9taW5pY2ZnX2xvYWQiLCJfYXBsdXNfdnRfY2ZnIiwidXRpbFZUIiwidnQyYXV0b0V2ZW50Iiwib25DbGljayIsImlzQXV0byIsIk1JTklfVlRfQ09ORklHX0ZPUk1BVCIsInBhZ2VDb25maWciLCJlbmFibGVkIiwiRmV0Y2hDb25maWciLCJfYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0IiwiZmMiLCJ1dGlsQ2F0Y2giLCJtaW5pdnRTdG9yZSIsIk1JTklfVlRfQ09ORklHX0JBQ0siLCJHT0xETE9HX1BVQkxJU0giLCJwYXRobmFtZSIsIm9yaWdpblNwbSIsInVwZGF0ZUNmZ0xzIiwiZmV0Y2hGcm9tQ2RuIiwicmVxdWVzdFZUQ29uZmlnIiwicG9pbnRzIiwic2V0Q29uZmlnSW50b0xzIiwiZ2V0TWluaVZ0RGF0YSIsImNkbnBhdGgiLCJwcmVVcmwiLCJmcm9tQ0ROIiwidnRDb25maWciLCJmZXRjaEZyb21MUyIsInN5bmNNaW5pVnREYXRhIiwiZ2V0VnRDb25maWdQYXRoIiwiR09MRExPR19TVUJTQ1JJQkUiLCJmaWxlbmFtZSIsIm1lc3NhZ2UiLCJsc01pbml2dENvbmZpZ0tleSIsImdldE1pbmlWdFRwbENkblBhdGgiLCJhcGx1c1RyYWNrQ29uZmlnSWRJbmZvIiwidHVybm9uIiwic3BtSWQiLCJ0ZW1wbGF0ZVZhbCIsInNwbUFCIiwibWVyZ2VBdXRvQ2ZncyIsImNmZzEiLCJjZmcyIiwiZ2V0SW5kZXgiLCJ0b3RhbEF1dG9DZmdzIiwiZmluYWxBdXRvQ2ZncyIsImFycmF5IiwicmVtb3ZlQXV0b0NmZ3NGcm9tVnQiLCJmb3JtYXRTZWxlY3RvciIsImdldFRyYWNrQ29uZmlnQnlQYXRoIiwiZmluYWxQYXRoIiwiZnVsbExvd0NvZGVDb25maWciLCJfYXBsdXNfdHJhY2tpbmdfY2ZnIiwiYXV0b0V4cEFyciIsImF1dG9DbGtBcnIiLCJwYyIsInNldFBhZ2VOYW1lIiwidHJhY2tlclR5cGUiLCJ0ZW1wbGF0ZSIsInN0ZElkIiwiY29tbW9uX2V4ZGF0YSIsImNvbW1vbl9wdmRhdGEiLCJnZXRDdXJyZW50UGFnZVZUQ2ZnIiwidnRDZmciLCJnZXRUcmFja0NvbmZpZ0J5UG9pbnRDc3NTZWxlY3RvciIsInRyYWNrQ29uZmlnIiwibWF0Y2hlZENvbmZpZyIsImNvbmZpZ0l0ZW0iLCJ2dF9jZmciLCJvbGRfYXV0b19leHBfYXJyIiwib2xkX2F1dG9fY2xrX2FyciIsImFwbHVzaW5pdCIsInNpdGVJZCIsIlJVTk5JTkciLCJhcGx1c1N0YXR1cyIsImNvbmZpZ19wdl9jb250ZXh0IiwiUExVR0lOU19QViJdLCJtYXBwaW5ncyI6IjtDQUFBLFNBQUFBLEdBQUFDO0lBQ0EsdUJB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QVIsRUFBQWlSLE1BQUEsU0FBQWhDLEdBQUEwQztZQUNBLElBQUFvMEIsSUFBQSxJQUFBWjtZQUNBWSxFQUFBOTBCO2dCQUNBN0csU0FBQTZFLEVBQUE3RTtnQkFDQXRJLFNBQUFtTixFQUFBbk47O2dCQUVBMEk7Z0JBQ0ErekI7Z0JBQ0F5SCxZQUFBO2dCQUNBK0Q7Z0JBQ0E5RCxzQkFBQTtlQUNHLFNBQUF6NEI7Z0JBQ0gsSUFBQXd1QixNQUFBLG9CQUFBeHVCO2dCQUNBaXRCLEVBQUF3QixTQUFBRCxJQUNBdkIsRUFBQXlCLFlBQUFGLElBQ0FsckIsRUFBQWEsTUFDQUEsRUFBQW5FIiwiZmlsZSI6ImFwbHVzX21pbmlfY2xvdWRfdW0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2Uge1xuXHRcdHZhciBhID0gZmFjdG9yeSgpO1xuXHRcdGZvcih2YXIgaSBpbiBhKSAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnID8gZXhwb3J0cyA6IHJvb3QpW2ldID0gYVtpXTtcblx0fVxufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSB7XG5cdFx0dmFyIGEgPSBmYWN0b3J5KCk7XG5cdFx0Zm9yKHZhciBpIGluIGEpICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgPyBleHBvcnRzIDogcm9vdClbaV0gPSBhW2ldO1xuXHR9XG59KSh0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFwbHVzX21pbmlfY2xvdWQuanNcblx0ICog5LqR5LiK5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0X193ZWJwYWNrX3JlcXVpcmVfXygyKS5pbml0R2xvYmFsKCk7XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcENvbmZpZykge1xuXHQgIHZhciBhcGx1c19jb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpOyBcblx0ICByZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygxMDIpKGFwcENvbmZpZyxhcGx1c19jb25maWcpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5pON5L2cYXBsdXPnmoTlt6Xlhbfnsbtcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0dmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG5cdHZhciBBUExVU19RVUVVRSA9IGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFO1xuXHRcblx0dmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xuXHR2YXIgR09MRExPR19RVUVVRSA9IGFwbHVzU3RhdGljLkdPTERMT0dfUVVFVUU7XG5cdFxuXHR2YXIgX2FwbHVzX2NvbnRleHQ7XG5cdHZhciBpc1dlYiA9IGZhbHNlO1xuXHR0cnkge1xuXHQgIGlmICh3aW5kb3cpIHtcblx0ICAgIF9hcGx1c19jb250ZXh0ID0gd2luZG93O1xuXHQgICAgaXNXZWIgPSB0cnVlO1xuXHQgIH1cblx0fSBjYXRjaCAoZSkge1xuXHQgIF9hcGx1c19jb250ZXh0ID0ge307XG5cdCAgaXNXZWIgPSBmYWxzZTtcblx0fVxuXHRcblx0ZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBfYXBsdXNfY29udGV4dDtcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNXZWIgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4gd2luZG93O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pbml0R2xvYmFsID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcblx0ICBpZiAoY29udGV4dCkge1xuXHQgICAgX2FwbHVzX2NvbnRleHQgPSBjb250ZXh0O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBfYXBsdXNfY29udGV4dCA9IHtcblx0ICAgICAgdjogMSxcblx0ICAgICAgYXBsdXM6IHt9LFxuXHQgICAgICBhcGx1c19xdWV1ZTogW11cblx0ICAgIH07XG5cdCAgfVxuXHQgIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG5cdCAgdmFyIF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuXHQgIGlmIChpc1dlYikge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgX2FwbHVzRGVmYXVsdFZhbHVlID0gKF9hcGx1c19jb250ZXh0LmFwbHVzIHx8IF9hcGx1c19jb250ZXh0LmdvbGRsb2cgfHwgKF9hcGx1c19jb250ZXh0LmFwbHVzID0ge30pKTtcblx0ICAgICAgdmFyIF9nb2xkbG9nX3F1ZXVlID0gKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgfHwgKF9hcGx1c19jb250ZXh0LmdvbGRsb2dfcXVldWUgPSBbXSkpO1xuXHQgICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBbXSkpO1xuXHQgICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9nb2xkbG9nX3F1ZXVlLmNvbmNhdChfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSk7ICBcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgfSBlbHNlIHtcblx0ICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzO1xuXHQgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZTtcblx0ICB9XG5cdCAgXG5cdCAgX2FwbHVzX2NvbnRleHQuYXBsdXMgPSBfYXBsdXNfY29udGV4dC5nb2xkbG9nID0gX2FwbHVzRGVmYXVsdFZhbHVlO1xuXHQgIF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuXHQgIFxuXHQgIHJldHVybiBfYXBsdXNfY29udGV4dDtcblx0fTtcblx0XG5cdHZhciBnZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICBpZiAoa2V5ID09PSBBUExVUyB8fCBrZXkgPT09IEdPTERMT0cpIHtcblx0ICAgIHZhciBnID0gX2FwbHVzX2NvbnRleHRbQVBMVVNdIHx8IF9hcGx1c19jb250ZXh0W0dPTERMT0ddO1xuXHQgICAgaWYgKCFnKSB7XG5cdCAgICAgIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gPSBfYXBsdXNfY29udGV4dFtHT0xETE9HXSA9IHt9O1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGc7XG5cdCAgfVxuXHQgIHZhciBnb2xkbG9nX3F1ZXVlID0gR09MRExPR19RVUVVRTtcblx0ICB2YXIgYXBsdXNfcXVldWUgPSBBUExVU19RVUVVRTtcblx0ICBpZiAoa2V5ID09PSBhcGx1c19xdWV1ZSB8fCBrZXkgPT09IGdvbGRsb2dfcXVldWUpIHtcblx0ICAgIHZhciBxID0gX2FwbHVzX2NvbnRleHRbYXBsdXNfcXVldWVdIHx8IF9hcGx1c19jb250ZXh0W2dvbGRsb2dfcXVldWVdO1xuXHQgICAgaWYgKCFxKSB7XG5cdCAgICAgIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gPSBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXSA9IFtdO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHE7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLmdldEdsb2JhbFZhbHVlID0gZ2V0R2xvYmFsVmFsdWU7XG5cdFxuXHRleHBvcnRzLnNldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICBfYXBsdXNfY29udGV4dFtrZXldID0gdmFsdWU7XG5cdH07XG5cdFxuXHQvKipcblx0ICog6I635Y+WYXBsdXPlhoXpg6jlj5jph49cblx0ICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcblx0ICogQHJldHVybiBbT2JqZWN0fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbl1cblx0ICovXG5cdHZhciBnZXRHb2xkbG9nVmFsID0gZnVuY3Rpb24oa2V5KSB7XG5cdCAgdmFyIHY7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcblx0ICAgIHYgPSBhcGx1c1trZXldO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHYgPSAnJztcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIHY7XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLmdldEdvbGRsb2dWYWwgPSBnZXRHb2xkbG9nVmFsO1xuXHQvKipcblx0ICog6K6+572uYXBsdXPlhoXpg6jlj5jph49cblx0ICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcblx0ICogQHBhcmFtcyBbT2JqZWN0fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbl0gdmFsXG5cdCAqIEByZXR1cm4gW0Jvb2xlYW5dXG5cdCAqL1xuXHR2YXIgc2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSwgdmFsKSB7XG5cdCAgdmFyIGYgPSBmYWxzZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIGFwbHVzID0gZ2V0R2xvYmFsVmFsdWUoQVBMVVMpO1xuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBhcGx1c1trZXldID0gdmFsO1xuXHQgICAgICBmID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBmID0gZmFsc2U7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBmO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5zZXRHb2xkbG9nVmFsID0gc2V0R29sZGxvZ1ZhbDtcblx0XG5cdC8qKlxuXHQgKiDojrflj5ZjbGllbnRJbmZvKOa1j+iniOWZqOOAgeiuvuWkh+etieS/oeaBrylcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKiAgIHZlcnNpb246IDIsXG5cdCAqICAgdWFfaW5mbzoge1xuXHQgKiAgICAgYjogXCJjaHJvbWU1OFwiXG5cdCAqICAgICBpc206IFwibWFjXCJcblx0ICogICAgIG14OiBcIjM2MGVlXCJcblx0ICogICAgIG86IFwibWFjXCJcblx0ICogICAgIHA6IDFcblx0ICogICAgIHM6IFwiMTkyMHgxMDgwXCJcblx0ICogICAgIHc6IFwid2Via2l0XCJcblx0ICogICB9XG5cdCAqIH1cblx0ICovXG5cdGV4cG9ydHMuZ2V0Q2xpZW50SW5mbyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBnZXRHb2xkbG9nVmFsKCdfYXBsdXNfY2xpZW50JykgfHwge307XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0dmFyIEFQTFVTID0gJ2FwbHVzJztcblx0dmFyIEdPTERMT0cgPSAnZ29sZGxvZyc7XG5cdHZhciBBUExVU19RVUVVRSA9IEFQTFVTICsgJ19xdWV1ZSc7XG5cdHZhciBHT0xETE9HX1FVRVVFID0gR09MRExPRyArICdfcXVldWUnO1xuXHR2YXIgTVdfQ0hBTkdFID0gJ213X2NoYW5nZSc7XG5cdHZhciBNRVRBX0lORk8gPSAnTWV0YUluZm8nO1xuXHR2YXIgQVBQRU5EX01FVEFfSU5GTyA9ICdhcHBlbmQnICsgTUVUQV9JTkZPO1xuXHR2YXIgU0VUX01FVEFfSU5GTyA9ICdzZXQnICsgTUVUQV9JTkZPO1xuXHR2YXIgSFRUUCA9ICdodHRwJztcblx0dmFyIF9wdWJzdWIgPSAnX3B1YnN1Yic7XG5cdFxuXHR2YXIgZGVmYXVsdENvZGUgPSAnb3RoZXInO1xuXHR2YXIgQ0xLID0gJzIxMDEnO1xuXHR2YXIgRVhQID0gJzIyMDEnO1xuXHR2YXIgSU1QRVhQID0gJzIyMDInO1xuXHR2YXIgT1RIRVIgPSAnMTk5OTknO1xuXHR2YXIgQVBQX1NIT1cgPSAnMTAyMyc7XG5cdHZhciBBUFBfSElERV9PUl9VTkxPQUQgPSAnMTAxMCc7IFxuXHR2YXIgU0VTU0lPTl9JTlRFUlZBTCA9IDMwMDAwOyAvLyBzZXNzaW9uSWTov4fmnJ/ml7bpl7QgMzDnp5Jcblx0dmFyIFNIQVJFX0NBQ0hFX0lOVEVSVkFMID0gMTAwMCAqIDYwICogMzA7XG5cdHZhciBFS1ZTID0gJ2VrdnMnO1xuXHR2YXIgRVZFTlRfTUFYX0NPVU5UID0gMTAwMDA7IC8vIOacrOWcsOacgOWkmuWtmOWCqOi/meS5iOWkmmVrduaVsOaNrlxuXHR2YXIgTUVNT1JZX01BWF9DT1VOVCA9IDE7IC8vIOWGheWtmOS4reWtmOWCqOeahOacgOWkp+aVsOaNruaVsOmHj++8jOi2hei/h+WImee8k+WtmOWIsOacrOWcsFxuXHR2YXIgTUFYX1FVRVVFX0NPVU5UID0gMTsgLy8g5Li66Ziy5q2i5Zug572R57uc5byC5bi45a+86Ie057yT5a2Y6L+H5aSn77yM6K6+572u57yT5a2Y5Liq5pWw5LiK6ZmQXG5cdHZhciBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwgPSAzMDAwOyAvLyBla3bpu5jorqTlj5HpgIHpl7TpmpTml7bpl7Q6IDPnp5Jcblx0dmFyIFBBR0VfU1RBUlQgPSAnJCRfcGFnZV9zdGFydCc7XG5cdHZhciBQQUdFX0VORCA9ICckJF9wYWdlX2VuZCc7XG5cdHZhciBBUFBfU1RBUlQgPSAnJCRfYXBwX3N0YXJ0Jztcblx0dmFyIEFQUF9FTkQgPSAnJCRfYXBwX2VuZCc7XG5cdHZhciBVU0VSX1BST0ZJTEVfS0VZID0gJ2FwbHVzX3VzZXJfcHJvZmlsZSc7XG5cdHZhciBJTVBSSU5UID0gJ2ltcHJpbnQnO1xuXHR2YXIgSURfVFlQRSA9ICdhcGx1cy1pZHR5cGUnO1xuXHR2YXIgSlNCUklER0VfT05MWSA9ICdhcGx1cy1qc2JyaWRnZS1vbmx5Jztcblx0dmFyIFBBR0VfQ09ORklHID0gJ2FwbHVzLXBhZ2UtY29uZmlnJzsgXG5cdHZhciBBUExVU19TS0lQX0FQVl9SVUxFUyA9ICdhcGx1cy1za2lwLWFwdi1ydWxlcyc7XG5cdHZhciBBUExVU19QVl9ET01BSU4gPSAnYXBsdXMtcmhvc3Qtdic7XG5cdHZhciBBUExVU19FS1ZfRE9NQUlOID0gJ2FwbHVzLXJob3N0LWcnO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBQQUdFX0VOVEVSOiAnUEFHRV9FTlRFUicsXG5cdCAgQ1VSUkVOVF9QQUdFX0NPTkZJRzogJ0NVUlJFTlRfUEFHRV9DT05GSUcnLFxuXHQgIF9BTk9OWV9JRDogJ19hbm9ueV9pZCcsXG5cdCAgX1VTRVJfSUQ6ICdfdXNlcl9pZCcsXG5cdCAgREVGQVVMVF9DT0RFOiBkZWZhdWx0Q29kZSxcblx0ICBPVEhFUjogT1RIRVIsXG5cdCAgRVZFTlRfTUFQOiB7XG5cdCAgICAnMjEwMSc6ICdjbGljaycsXG5cdCAgICAnMjIwMSc6ICdleHBvc3VyZScsXG5cdCAgICAnMjIwMic6ICdleHBvc3VyZScsXG5cdCAgICAnMTk5OTknOiBkZWZhdWx0Q29kZSxcblx0ICAgICcxMDIzJzogJ2FwcF9zaG93Jyxcblx0ICAgICcxMDEwJzogJ2FwcF9oaWRlX29yX3VubG9hZCdcblx0ICB9LFxuXHQgIEVWRU5UX0lEX01BUDoge1xuXHQgICAgJ0VYUCc6IEVYUCxcblx0ICAgICdJTVBFWFAnOiBJTVBFWFAsXG5cdCAgICAnQ0xLJzogQ0xLLFxuXHQgICAgJ09USEVSJzogT1RIRVIsXG5cdCAgICAnU0hPVyc6IEFQUF9TSE9XLFxuXHQgICAgJ0hfT1JfVSc6IEFQUF9ISURFX09SX1VOTE9BRFxuXHQgIH0sXG5cdCAgQVBMVVM6IEFQTFVTLFxuXHQgIEdPTERMT0c6IEdPTERMT0csXG5cdCAgVU5TVUJTQ1JJQkU6IEFQTFVTICsgJy4nICsgQVBMVVMgKyBfcHVic3ViICsgJy51bnN1YnNjcmliZScsXG5cdCAgU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuc3Vic2NyaWJlJyxcblx0ICBQVUJMSVNIOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcucHVibGlzaCcsXG5cdCAgQ0FDSEVfUFVCUzogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLmNhY2hlUHVicycsXG5cdCAgQVBMVVNfVU5JVkVSU0FMOiBBUExVUyArICdfdW5pdmVyc2FsJyxcblx0ICBBUExVU19RVUVVRTogQVBMVVNfUVVFVUUsXG5cdCAgR09MRExPR19RVUVVRTogR09MRExPR19RVUVVRSxcblx0ICBDT01QTEVURTogJ2NvbXBsZXRlJyxcblx0ICBQVl9DT0RFOiAnMjAwMScsXG5cdCAgRVhQX0NPREU6IEVYUCxcblx0ICBDTEtfQ09ERTogQ0xLLFxuXHQgIE9USEVSX0NPREU6IE9USEVSLFxuXHQgIENMSzogJ0NMSycsXG5cdCAgRVhQOiAnRVhQJyxcblx0ICAvLyBPVEhFUjogJ09USEVSJyxcblx0ICBTUE1fQ05UOiAnc3BtLWNudCcsXG5cdCAgU1BNX1VSTDogJ3NwbS11cmwnLFxuXHQgIFNQTV9QUkU6ICdzcG0tcHJlJyxcblx0ICBNV19DSEFOR0VfUFY6IE1XX0NIQU5HRSArICdfcHYnLFxuXHQgIE1XX0NIQU5HRV9ISkxKOiBNV19DSEFOR0UgKyAnX2hqbGonLFxuXHQgIEhUVFA6IEhUVFAgKyAnOicsXG5cdCAgSFRUUFM6ICdodHRwczonLFxuXHQgIEFQUEVORF9NRVRBX0lORk86IEFQUEVORF9NRVRBX0lORk8sXG5cdCAgU0VUX01FVEFfSU5GTzogU0VUX01FVEFfSU5GTyxcblx0ICBBUExVU19BUFBFTkRfTUVUQV9JTkZPOiBBUExVUyArICcuJyArIEFQUEVORF9NRVRBX0lORk8sXG5cdCAgQVBMVVNfU0VUX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBTRVRfTUVUQV9JTkZPLFxuXHQgIFBWSUQ6J3B2aWQnLFxuXHQgIEFQTFVTX0xPR19QSVBFOidhcGx1cy1sb2ctcGlwZScsXG5cdCAgb3BlbkFQSXM6IFtcblx0ICAgICdzZW5kJywgJ2VudGVyJywgJ3NlbmRQVicsICdyZWNvcmQnLCBcblx0ICAgICdjb21iaW5lUmVjb3JkJywgJ3JlY29yZFVkYXRhJywgJ3JlcXVlc3RWVENvbmZpZycsICdyZXF1ZXN0UmVtb3RlQ29uZmlnJyxcblx0ICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcblx0ICAgICd1cGRhdGVQYWdlUHJvcGVydGllcycsIFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlUHJvcGVydGllcycsXG5cdCAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuXHQgICAgJ3VwZGF0ZU5leHRQYWdlVXRwYXJhbScsXG5cdCAgICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJywgJ3NraXBQYWdlJyxcblx0ICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuXHQgICAgJ3NldFBhZ2VOYW1lJywgJ2dldEVsZW1lbnRTUE0nLCAncmVjb3JkQXBwTGluaydcblx0ICBdLFxuXHQgIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG5cdCAgU0VTU0lPTl9QQVVTRV9USU1FOiAnc2Vzc2lvbl9wYXVzZV90aW1lJyxcblx0ICBJTVBSSU5UOiAnaW1wcmludCcsXG5cdCAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcblx0ICBNQVhfRVZFTlRJRF9MRU5HVEg6IDEyOCxcblx0ICBNQVhfUFJPUEVSVFlfS0VZX0xFTkdUSDogMjU2LFxuXHQgIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG5cdCAgRkFJTEVEX1JFUVVFU1RTOiAnZmFpbGVkX3JlcXVlc3RzJyxcblx0ICBSRVFVRVNUUzogJ3JlcXVlc3RzJyxcblx0ICBTSEFSRVM6ICdzaGFyZXMnLFxuXHQgIEFQTFVTX1NTUkM6ICdfYXBsdXNfc3NyYycsXG5cdCAgRUtWUzogRUtWUyxcblx0ICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcblx0ICBNRU1PUllfTUFYX0NPVU5UOiBNRU1PUllfTUFYX0NPVU5ULFxuXHQgIE1BWF9RVUVVRV9DT1VOVDogTUFYX1FVRVVFX0NPVU5ULFxuXHQgIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuXHQgIFBBR0VfU1RBUlQ6IFBBR0VfU1RBUlQsXG5cdCAgUEFHRV9FTkQ6IFBBR0VfRU5ELFxuXHQgIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuXHQgIEFQUF9FTkQ6IEFQUF9FTkQsXG5cdCAgVVNFUl9QUk9GSUxFX0tFWTogVVNFUl9QUk9GSUxFX0tFWSxcblx0ICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG5cdCAgSU1QUklOVDogSU1QUklOVCxcblx0ICBJRF9UWVBFOiBJRF9UWVBFLFxuXHQgIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5Jyxcblx0ICAvLyBVVE1fS0VZUzogWyd1dG1fc291cmNlJywgJ3V0bV9jb250ZW50JywgJ3V0bV9tZWRpdW0nLCAndXRtX2NhbXBhaWduJywgJ3V0bV90ZXJtJ10sXG5cdCAgSlNCUklER0VfT05MWTogSlNCUklER0VfT05MWSxcblx0ICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG5cdCAgQVBMVVNfU0tJUF9BUFZfUlVMRVM6IEFQTFVTX1NLSVBfQVBWX1JVTEVTLFxuXHQgIEFQTFVTX1BWX0RPTUFJTjogQVBMVVNfUFZfRE9NQUlOLFxuXHQgIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU4sXG5cdCAgQVBMVVNfSU1QUklOVF9WRVJTSU9OOiAnQVBMVVNfSU1QUklOVF9WRVJTSU9OJyxcblx0ICBBUExVU19SRU1PVEVfQ09ORklHOiAnQVBMVVNfUkVNT1RFX0NPTkZJRycsXG5cdCAgUkFOSzogJ2Vrdl9yYW5rJyxcblx0ICBXRUJfRVZFTlRfU1VGRklYOiAnL3dlYl9sb2dzJyxcblx0ICBXRUJfUENfUFZfU1VGRklYOiAndi5naWYnLFxuXHQgIFdFQl9XQVBfUFZfU1VGRklYOiAnbS5naWYnLFxuXHQgIFBBR0VfTEVBVkU6ICckJF9wYWdlX2xlYXZlJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRDogJ2FwbHVzLWF1dG90cmFjay1lbmFibGVkJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEU6ICdhcGx1cy1hdXRvdHJhY2stZW5hYmxlZC1yZW1vdGUnLFxuXHQgIEFQTFVTX0FVVE9UUkFDS19DT05GSUc6ICdhcGx1cy1hdXRvdHJhY2stY29uZmlnJyxcblx0ICBBUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URTogJ2FwbHVzLWF1dG90cmFjay1jb25maWctcmVtb3RlJyxcblx0ICBBUExVU19ESVNBQkxFX0FVVE9FVkVOVDogJ2FwbHVzLWRpc2FibGUtYXV0b2V2ZW50Jyxcblx0ICBBUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEU6ICdhcGx1cy1kaXNhYmxlLWF1dG9ldmVudCcsXG5cdCAgQVBMVVNfRElTQUJMRV9BVVRPUFY6ICdhcGx1cy1kaXNhYmxlLWFwdicsXG5cdCAgQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hcHYtcmVtb3RlJyxcblx0ICBBUExVU19ERVZJQ0VfRU5BQkxFOiAnYXBsdXMtZGV2aWNlLWVuYWJsZScsXG5cdCAgUEVSRk9STUFOQ0VfV0FSSU5HOiAnJCRfcGVyZl93YXJuaW5nJyxcblx0ICBTVEFSVF9JRDogJ1NUQVJUX0lEJyxcblx0fTtcblx0XG5cdC8vIHZhciBvcGVuQVBJcyA9IFtcblx0Ly8gICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJyxcblx0Ly8gICAnc2V0UGFnZVNQTScsICdzZXRNZXRhSW5mbycsICdhcHBlbmRNZXRhSW5mbycsXG5cdC8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcblx0Ly8gICBVUERBVEUgKyAnUGFnZVV0cGFyYW0nLFxuXHQvLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuXHQvLyAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLFxuXHQvLyAgICdza2lwUGFnZSdcblx0Ly8gXTtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgXCJtZXRhSW5mb1wiOiB7XG5cdCAgICBcImFwbHVzLXJob3N0LXZcIjogXCJcIixcblx0ICAgIFwiYXBsdXMtcmhvc3QtZ1wiOiBcIlwiLFxuXHQgICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG5cdCAgICBcImFwbHVzLWRpc2FibGUtYXV0b2V2ZW50XCI6IGZhbHNlLFxuXHQgICAgXCJhcGx1cy1kaXNhYmxlLWFwdlwiOiBmYWxzZSxcblx0ICAgIFwiYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWRcIjogZmFsc2UsXG5cdCAgICBcImFwbHVzLWRldmljZS1lbmFibGVcIjogdHJ1ZSxcblx0ICAgIFwiYXBsdXMtZGV2aWNlLWVuYWJsZWRcIjogdHJ1ZSxcblx0ICAgIFwic2RrSWRcIjogXCJhcGx1c19taW5pX2Nsb3VkX3VtXCJcblx0ICB9LFxuXHQgIFwiZ2xvYmFsQ29uZmlnXCI6IHtcblx0ICAgIFwiaXNBbGlcIjogZmFsc2UsXG5cdCAgICBcImlzRGVjb2RlVXJsXCI6IHRydWUsXG5cdCAgICBcIkFQTFVTX1FVRVVFXCI6IFwiYXBsdXNfcXVldWVcIixcblx0ICAgIFwiRVRBR19TVE9SQUdFX0tFWVwiOiBcIl9fRVRBR19fQ05BX19JRF9fXCIsXG5cdCAgICBcInNjcmlwdF9uYW1lXCI6IFwiYXBsdXNfbWluaS5qc1wiLFxuXHQgICAgXCJhcGx1cy1nbG9iYWxkYXRhXCI6IHt9LFxuXHQgICAgXCJsdmVyXCI6IFwiMS45LjIyXCJcblx0ICB9LFxuXHQgIFwicGx1Z2luc1wiOiBbXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImluamVjdF9hcHBfdW1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcImluamVjdF9wYWdlX3VtXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDM5KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwicHVic3ViXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWV0YV9pbmplY3RcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19sb2dfaW5qZWN0XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImFwbHVzX21ldGFfaW5qZWN0XCJcblx0ICAgICAgXSxcblx0ICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgIFwicGx1Z2luc1wiOiB7XG5cdCAgICAgICAgICBcInB2XCI6IFtcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTMpLFxuXHQgICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcblx0ICAgICAgICAgICAgICAgIFwiYXBsdXNXYWl0aW5nXCI6IFwiXCJcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTQpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1NSksXG5cdCAgICAgICAgICAgICAgXCJjb25maWdcIjoge1xuXHQgICAgICAgICAgICAgICAgXCJsb2dkYXRhVG9VdFwiOiB7fVxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU4KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kcHZfdXNlcmRhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg1OSksXG5cdCAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICAgICAgICAgIFwid2hhdF90b19zZW5kXCJcblx0ICAgICAgICAgICAgICBdXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJjYW5fdG9fc2VuZHB2XCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIF0sXG5cdCAgICAgICAgICBcImhqbGpcIjogW1xuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hlcmVfdG9fc2VuZFwiLFxuXHQgICAgICAgICAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDU0KVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTUpLFxuXHQgICAgICAgICAgICAgIFwiZGVwc1wiOiBbXVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB7XG5cdCAgICAgICAgICAgICAgXCJuYW1lXCI6IFwibWluaWFwcF9kYXRhXCIsXG5cdCAgICAgICAgICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHtcblx0ICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX2hqbGpfdXNlcmRhdGFcIixcblx0ICAgICAgICAgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg2NSlcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgXVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYXBpXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDY2KSxcblx0ICAgICAgXCJkZXBzXCI6IFtcblx0ICAgICAgICBcImFwbHVzX2xvZ19pbmplY3RcIixcblx0ICAgICAgICBcImFwbHVzX21ldGFfaW5qZWN0XCJcblx0ICAgICAgXVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWNcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oNzQpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuXHQgICAgICBdXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19hZVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg4MCksXG5cdCAgICAgIFwiZGVwc1wiOiBbXG5cdCAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG5cdCAgICAgIF1cblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcIm9wZW5fYXBpXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg2KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfY2xpZW50XCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWluaV9zcG1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oODgpXG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3JlcG9ydF91bVwiLFxuXHQgICAgICBcInBhdGhcIjogX193ZWJwYWNrX3JlcXVpcmVfXyg4OSlcblx0ICAgIH0sXG5cdCAgICB7XG5cdCAgICAgIFwibmFtZVwiOiBcIm1ldGFfcXVldWVcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTQpLFxuXHQgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgXCJpc09wZW5BcGlcIjogdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJldGFnXCIsXG5cdCAgICAgIFwicGF0aFwiOiBfX3dlYnBhY2tfcmVxdWlyZV9fKDUxKVxuXHQgICAgfSxcblx0ICAgIHtcblx0ICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfcXVldWVcIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTYpLFxuXHQgICAgICBcImNvbmZpZ1wiOiB7XG5cdCAgICAgICAgXCJpc09wZW5BcGlcIjogdHJ1ZVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAge1xuXHQgICAgICBcIm5hbWVcIjogXCJhdXRvX3RyYWNrZXJfdW1cIixcblx0ICAgICAgXCJwYXRoXCI6IF9fd2VicGFja19yZXF1aXJlX18oOTcpLFxuXHQgICAgICBcImRlcHNcIjogW1xuXHQgICAgICAgIFwiaW5qZWN0X3BhZ2VfdW1cIlxuXHQgICAgICBdXG5cdCAgICB9XG5cdCAgXVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2luc19taW5pL2luamVjdF9hcHBfdW1fbmV3LmpzXG5cdCAqIOaWsOeJiOiHquWKqOmHh+mbhuWwj+eoi+W6j+S/oeaBr+eahOaPkuS7tiAtIGFwcOazqOWFpVxuXHQgKlxuXHQgKiDpgJrov4fph43lhpl3eOeahGFwaeadpeaooeaLn+eUn+WRveWRqOacn++8jOS7peatpOe7lei/h+S4ieaWueahhuaetuWvueeUn+WRveWRqOacn+eahOmHjeWGmeacuuWItlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiChuWPgSA8c2lzYW4ucWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0XG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBzZXNzaW9uTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHR2YXIgZXZlbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciByZXF1ZXN0UXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxNb25pdG9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCk7XG5cdHZhciB1dGlsUmVtb3RlQ2ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSk7XG5cdHZhciB1bVV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdFxuXHR2YXIgQVBQX0xBVU5DSF9UWVBFID0gMDtcblx0XG5cdGZ1bmN0aW9uIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKSB7XG5cdCAgdmFyIGdsb2JhbF9hcmdzID0ge307XG5cdCAgaWYgKHNjZW5lKSB7XG5cdCAgICBnbG9iYWxfYXJncy5zY2VuZSA9IHNjZW5lO1xuXHQgIH1cblx0ICBpZiAocXVlcnkgJiYgcXVlcnkubWluaWFwcERlYnVnSWQpIHtcblx0ICAgIGdsb2JhbF9hcmdzLmRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZDtcblx0ICB9XG5cdCAgZm9yICh2YXIgayBpbiBxdWVyeSkge1xuXHQgICAgaWYgKGsgPT09ICckJF9zaGFyZV91aWQnIHx8IGsuaW5kZXhPZignJCRfdXRtXycpID09PSAwKSB7XG5cdCAgICAgIGdsb2JhbF9hcmdzW2tdID0gcXVlcnlba107XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBnbG9iYWxfYXJncztcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2Vzc2lvblN0YXJ0KG9wdGlvbnMpIHtcblx0ICBjYWNoZSgpLmxvYWQoZnVuY3Rpb24oKXtcblx0ICAgIHVsb2coKS53KCdjYWNoZSBpbml0IHN1Y2Nlc3MnKTtcblx0ICAgIGlmIChvcHRpb25zLnF1ZXJ5ICYmIG9wdGlvbnMucXVlcnkubWluaWFwcERlYnVnSWQgJiYgb3B0aW9ucy5xdWVyeS5taW5pYXBwRGVidWdJZCAhPSBjYWNoZSgpLmdldCgnbWluaWFwcERlYnVnSWQnKSkge1xuXHQgICAgICBjYWNoZSgpLnNldCgnbWluaWFwcERlYnVnSWQnLCBvcHRpb25zLnF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgdmFyIG5ld09wdGlvbnMgPSB7fTtcblx0ICB2YXIgZGVlcENsb25lID0gY2xvbmVEZWVwKG9wdGlvbnMpO1xuXHQgIGZvciAodmFyIGkgaW4gZGVlcENsb25lKSB7XG5cdCAgICBpZiAodHlwZW9mIGRlZXBDbG9uZVtpXSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgbmV3T3B0aW9ucyA9IHV0aWxEYXNoLmFzc2lnbihkZWVwQ2xvbmVbaV0sIG5ld09wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGRlZXBDbG9uZVtpXSkge1xuXHQgICAgICAgIG5ld09wdGlvbnNbaV0gPSBkZWVwQ2xvbmVbaV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLmxvYWQoKTtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLmxvYWQoKTtcblx0ICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBmdW5jdGlvbigpIHtcblx0ICAgICAgdWxvZygpLncoJ3NlbmQgZmFpbGVkIHJlcXVlc3QgcXVldWUnKTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdCAgdmFyIGlzTmV3U2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkucmVzdW1lKG5ld09wdGlvbnMpO1xuXHQgIHZhciBzZXNzaW9uSWQgPSBzZXNzaW9uTWFuYWdlcigpLmdldEN1cnJlbnRTZXNzaW9uSWQoKTtcblx0ICBldmVudE1hbmFnZXIoKS5zZXRTZXNzaW9uSWQoc2Vzc2lvbklkKTtcblx0ICBpZiAoaXNOZXdTZXNzaW9uKSB7XG5cdCAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBjYik7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2Vzc2lvbkVuZCgpIHtcblx0ICBzZXNzaW9uTWFuYWdlcigpLnBhdXNlKCk7XG5cdCAgLy8gYXBwIGhpZGXml7blj5HpgIHlvZPliY3or7fmsYLpmJ/liJcm5aSx6LSl6Zif5YiXXG5cdCAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLkZBSUxFRF9SRVFVRVNUUykuc2VuZCgnJywge30sIGZ1bmN0aW9uKCkge1xuXHQgICAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLkZBSUxFRF9SRVFVRVNUUykuc2F2ZSgpO1xuXHQgICAgY2FjaGUoKS5zYXZlKCk7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBhZGFwdE15QXBwSGlkZShjYikge1xuXHQgIHRyeSB7XG5cdCAgICBpZiAobXkgJiYgbXkub25UaXRsZUNsb3NlQ2xpY2spIHtcblx0ICAgICAgY2IgJiYgbXkub25UaXRsZUNsb3NlQ2xpY2soY2IpO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSl7fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpbmplY3RBcHAoKSB7XG5cdCAgdmFyIGFwcEJhayA9IEFwcDtcblx0ICB2YXIgYWxyZWFkeVN0YXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgbGFudWNoZWQgPSBmYWxzZTtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBjb250ZXh0ID0gbWluaS5nZXRDb250ZXh0KCk7ICAgLy8g5bmz5Y+w5LiK5LiL5paH77yaIHd444CBZGTjgIFteeOAgXR044CBc3dhblxuXHQgIHZhciBmbiA9IHtcblx0ICAgIG9uTGF1bmNoOiBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICBtaW5pLmluaXRJc1RCKCk7XG5cdCAgICAgIHZhciBxdWVyeSA9IG9wdGlvbnMgPyBvcHRpb25zLnF1ZXJ5IDoge307XG5cdCAgICAgIHZhciByZWZlcnJlckluZm8gPSBvcHRpb25zID8gb3B0aW9ucy5yZWZlcnJlckluZm8gOiB7fTtcblx0ICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLndlaXhpbi5xcS5jb20vbWluaXByb2dyYW0vZGV2L2FwaS9iYXNlL2FwcC9saWZlLWN5Y2xlL3d4LmdldExhdW5jaE9wdGlvbnNTeW5jLmh0bWwjJUU4JUJGJTk0JUU1JTlCJTlFJUU2JTlDJTg5JUU2JTk1JTg4JTIwcmVmZXJyZXJJbmZvJTIwJUU3JTlBJTg0JUU1JTlDJUJBJUU2JTk5JUFGXG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcGFyYW1zIHtPYmplY3R9IHJlZmVycmVySW5mbyB7XG5cdCAgICAgICAqICAgYXBwSWQgIHN0cmluZyAg5p2l5rqQ5bCP56iL5bqP44CB5YWs5LyX5Y+35oiWIEFwcCDnmoQgYXBwSWRcblx0ICAgICAgICogICBleHRyYURhdGEgIE9iamVjdCAg5p2l5rqQ5bCP56iL5bqP5Lyg6L+H5p2l55qE5pWw5o2u77yMc2NlbmU9MTAzN+aIljEwMzjml7bmlK/mjIFcblx0ICAgICAgICogfVxuXHQgICAgICAgKi9cblx0ICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcoY2FjaGUoKS5nZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcpKTtcblx0XG5cdCAgICAgIEFQUF9MQVVOQ0hfVFlQRSArPSAxO1xuXHRcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywgdXRpbERhc2guYXNzaWduKHJlZmVycmVySW5mbywge1xuXHQgICAgICAgICAgc2NlbmU6IG9wdGlvbnMuc2NlbmUgfHwgJydcblx0ICAgICAgICB9KV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChxdWVyeSkge1xuXHQgICAgICAgIHZhciBxdWVyeURhdGEgPSB7fTsgLy8gY2xvbmVEZWVwKHF1ZXJ5KTtcblx0ICAgICAgICBpZiAocXVlcnkuc3BtKSB7XG5cdCAgICAgICAgICBjdHguYXBsdXMuc3BtX29yaWduID0gcXVlcnkuc3BtO1xuXHQgICAgICAgICAgLy8gZGVsZXRlIHF1ZXJ5RGF0YS5zcG07XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChvcHRpb25zLnNjZW5lKSB7XG5cdCAgICAgICAgICBxdWVyeURhdGEuc2NlbmUgPSBvcHRpb25zLnNjZW5lO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocXVlcnkubWluaWFwcERlYnVnSWQpIHtcblx0ICAgICAgICAgIHZhciBkZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQudHJpbSgpO1xuXHQgICAgICAgICAgdmFyIGRlYnVnSW5mb3MgPSBkZWJ1Z0lkLnNwbGl0KCdfJyk7XG5cdCAgICAgICAgICBxdWVyeURhdGEgPSB1dGlsRGFzaC5hc3NpZ24ocXVlcnlEYXRhLCB7XG5cdCAgICAgICAgICAgIGFwbHVzX3dvcmtfbm86IGRlYnVnSW5mb3MubGVuZ3RoID4gMiA/IGRlYnVnSW5mb3NbMV0gOiBkZWJ1Z0lkLFxuXHQgICAgICAgICAgICBhcGx1c190cmFja19kZWJ1Z19pZDogZGVidWdJZCxcblx0ICAgICAgICAgICAgYXBsdXNfZmxhZzogJ2FwbHVzX3Rlc3QnXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEubWluaWFwcERlYnVnSWQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCBxdWVyeURhdGFdXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCBxdWVyeURhdGFdXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuXHQgICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWdsb2JhbC1hcmdzJywgZ2V0R2xvYmFsQXJncyhxdWVyeSwgb3B0aW9ucy5zY2VuZSldXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdCAgICBvblNob3c6IGZ1bmN0aW9uIChvcHRzKSB7XG5cdCAgICAgIEFQUF9MQVVOQ0hfVFlQRSArPSAxO1xuXHQgICAgICB2YXIgcXVlcnkgPSBvcHRzID8gb3B0cy5xdWVyeSA6IHt9O1xuXHQgICAgICB2YXIgc2NlbmUgPSBvcHRzID8gb3B0cy5zY2VuZSA6ICcnO1xuXHQgICAgICB2YXIgc3RhcnRfdHlwZTsgLy/lsI/nqIvluo/lkK/liqjnsbvlnosgXG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsICAvLyDmraTlpITpnIDopoHnlKhzZXRNZXRhSW5mb+WBmuimhuebluW8j+abtOaWsO+8jOWboOS4uuW+ruS/oeWwj+eoi+W6j+S8muaciee8k+WtmFxuXHQgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1nbG9iYWwtYXJncycsIGdldEdsb2JhbEFyZ3MocXVlcnksIHNjZW5lKV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChzY2VuZSkge1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1leGRhdGEnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHtcblx0ICAgICAgICAgICAgc2NlbmU6IHNjZW5lXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydhcGx1cy1zZXNzaW9uLWFyZ3MnLCB7XG5cdCAgICAgICAgICAgIHNjZW5lOiBzY2VuZVxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAyKSB7XG5cdCAgICAgICAgc3RhcnRfdHlwZSA9IDE7XG5cdCAgICAgIH0gZWxzZSBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAxKSB7XG5cdCAgICAgICAgc3RhcnRfdHlwZSA9IDA7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdWxvZygpLncoJ0FQUF9MQVVOQ0hfVFlQRSBzaG91bGQgbm90IHJlYWNoIHRoaXMsIHZhbHVlID0gJyArICBBUFBfTEFVTkNIX1RZUEUpO1xuXHQgICAgICB9XG5cdCAgICAgIHV0aWxzLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmICghYWxyZWFkeVN0YXJ0ZWQpIHtcblx0ICAgICAgICAgIGFscmVhZHlTdGFydGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIHNlc3Npb25TdGFydChvcHRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gQOaWh+W/gyAxLuWIsOi+vueOh+a1i+ivlemcgOimgSAyLuWNleadoeS6i+S7tueahGxvZ2lk6ZyA6KaBXG5cdCAgICAgICAgdXRpbE1vbml0b3IuY2xlYXIoKTtcblx0ICAgICAgICB2YXIgc3RhcnRpZCA9IHVtVXRpbHMuZ2V0U3RhcnRJZCgpO1xuXHQgICAgICAgIGV2ZW50TWFuYWdlcigpLnNldFN0YXJ0SWQoc3RhcnRpZCk7XG5cdCAgICAgICAgXG5cdCAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICAgIHZhciBwYWdlQ29kZSA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG5cdCAgICAgICAgICBjdHgub25BcHBTaG93VGltZSA9IERhdGUubm93KCk7XG5cdCAgICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQUF9TVEFSVCwgJ1NIT1cnLCB7XG5cdCAgICAgICAgICAgICAgLy8gc2NlbmU6IHNjZW5lLFxuXHQgICAgICAgICAgICAgIHN0YXJ0X3R5cGU6IHN0YXJ0X3R5cGUsXG5cdCAgICAgICAgICAgICAgcGFnZV9uYW1lOiBwYWdlQ29kZSB8fCBvcHRzLnBhdGggfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHVybDogb3B0cy5wYXRoIHx8ICctJ1xuXHQgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdCAgICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdXRpbHMub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGN0eC5hcGx1cy5nbG9iYWxDb25maWcgfHwge307XG5cdCAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcblx0ICAgICAgICBpZiAoIWdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgdmFyIHVybCA9IFBhZ2VNYW5hZ2VyLmdldEN1cnJlbnRQYWdlUGF0aCgpO1xuXHQgICAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIGN0eC5vbkFwcFNob3dUaW1lO1xuXHQgICAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuXHQgICAgICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUFBfRU5ELCAnSF9PUl9VJywge1xuXHQgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcblx0ICAgICAgICAgICAgICBlbmRfdHlwZTogMCxcblx0ICAgICAgICAgICAgICBwYWdlX25hbWU6IHBhZ2VDb2RlIHx8IHVybCB8fCAnLScsXG5cdCAgICAgICAgICAgICAgdXJsOiB1cmwgfHwgJy0nLFxuXHQgICAgICAgICAgICAgIHN0YXJ0X3RpbWU6IGN0eC5vbkFwcFNob3dUaW1lXG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9KTsgICAgICAgICAgICBcblx0ICAgICAgICB9XG5cdCAgICAgICAgYWxyZWFkeVN0YXJ0ZWQgPSBmYWxzZTtcblx0ICAgICAgICBzZXNzaW9uRW5kKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBBUFBfTEFVTkNIX1RZUEUgPSAwO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGlmIChhcHBCYWsuYWZ0ZXIpIHtcblx0ICAgIGFwcEJhay5hZnRlcih7XG5cdCAgICAgIG1ldGhvZHM6IHtcblx0ICAgICAgICBvbkxhdW5jaDogZnVuY3Rpb24odCkgeyAgICAgXG5cdCAgICAgICAgICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpOyAgICAgXG5cdCAgICAgICAgICBpZiAodC50aGlzT2JqZWN0KSB7XG5cdCAgICAgICAgICAgIHQudGhpc09iamVjdC5hcGx1cyA9IGN0eC5hcGx1cztcblx0ICAgICAgICAgICAgdC50aGlzT2JqZWN0LmFwbHVzX3F1ZXVlID0gY3R4LmFwbHVzX3F1ZXVlO1xuXHQgICAgICAgICAgfSBcblx0ICAgICAgICAgIGZuLm9uTGF1bmNoKHQuYXJncyk7XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBvblNob3c6IGZ1bmN0aW9uKHQpIHtcblx0ICAgICAgICAgIGZuLm9uU2hvdyh0LmFyZ3MpO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgb25IaWRlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAgIGZuLm9uSGlkZSgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIEFwcCA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgICAgIGUuYXBsdXMgPSBjdHg7IC8vIOazqOWGjOWFqOWxgOWPmOmHj1xuXHQgICAgICBhcHBCYWsoZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIGNvbnRleHQub25BcHBTaG93KGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgIC8vIOmAmui/h3d4LmdldExhdW5jaE9wdGlvbnNTeW5j5pa55rOV77yM5a6e546w5a+5b25MYW51Y2jnmoTnm5HlkKxcblx0ICAgICAgaWYoIWxhbnVjaGVkKSB7XG5cdCAgICAgICAgLy8g55m+5bqm5LiN5pSv5oyBZ2V0TGF1bmNoT3B0aW9uc1N5bmPvvIznlKhvblNob3fnmoRvcHRpb25z5Luj5pu/XG5cdCAgICAgICAgdmFyIG9wdHMgPSB7fTtcblx0ICAgICAgICBpZihpc0Z1bmN0aW9uKGNvbnRleHQuZ2V0TGF1bmNoT3B0aW9uc1N5bmMpKSB7XG5cdCAgICAgICAgICBvcHRzID0gY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYygpIHx8IHt9O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBvcHRzID0gZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgZm4ub25MYXVuY2gob3B0cyk7XG5cdCAgICAgICAgbGFudWNoZWQgPSB0cnVlO1xuXHQgICAgICB9O1xuXHQgICAgICBcblx0ICAgICAgLy8gb25TaG93XG5cdCAgICAgIGZuLm9uU2hvdyhlKTtcblx0ICAgIH0pLFxuXHRcblx0ICAgIGNvbnRleHQub25BcHBIaWRlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gb25IaWRlXG5cdCAgICAgIGZuLm9uSGlkZSgpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgYWRhcHRNeUFwcEhpZGUoZm4ub25IaWRlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIEFwcCkgPiAtMSkge1xuXHQgICAgICAgIGluamVjdEFwcCgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICByZXNldEZuOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiB7fSxcblx0ICAgICAgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogJycsXG5cdCAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcblx0ICAgICAgaSA9IGVbdF07XG5cdCAgICBlW3RdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cblx0ICAgICAgaWYgKHJzKSB7XG5cdCAgICAgICAgcmV0dXJuIG4uY2FsbCh0aGlzLCBycyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdGFybzF444CBdGFybzJ4IOW/hemhu+WKoOS4qumineWklueahOivreWPpW4uYXBwbHnmiY3og73miafooYzvvIzmr5TlpoJ0cnljYXRjaO+8jOWPmOmHj+WjsOaYjuetie+8jOatpOWkhOWKoOS6hnJldHVyblxuXHQgICAgICAgIHJldHVybiBuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcmV3cml0ZUZuOiBmdW5jdGlvbihvYmosIG5hbWUsIG5ld0ZuKSB7XG5cdCAgICB2YXIgb2xkRm4gPSBvYmpbbmFtZV07XG5cdCAgICBvYmpbbmFtZV0gPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgICBuZXdGbi5jYWxsKHRoaXMsIGUpO1xuXHQgICAgICBvbGRGbiAmJiBvbGRGbi5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBvbkFwbHVzUmVhZHk6IGZ1bmN0aW9uIChhcGx1c19xdWV1ZSwgU1VCU0NSSUJFLCBjYWxsYmFjaykge1xuXHQgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogU1VCU0NSSUJFLFxuXHQgICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcblx0ICAgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgY2FsbGJhY2soKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9LFxuXHRcblx0ICBjbGlja19wcm94eTogZnVuY3Rpb24ob3B0aW9ucywgbWV0aG9kKSB7ICAgIFxuXHQgICAgdmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHV0aWxPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0ICAgIHZhciBvcmlGdW5jID0gb3B0aW9uc1ttZXRob2RdO1xuXHQgICAgb3B0aW9uc1ttZXRob2RdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciByZXN1bHQgPSBvcmlGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50c1swXTtcblx0ICAgICAgaWYgKHV0aWxPYmplY3QuaXNPYmplY3QoZXZlbnQpICYmIGFwbHVzICYmIGFwbHVzLnJlY29yZCkge1xuXHQgICAgICAgIGFwbHVzLnJlY29yZChcIiQkX2F1dG9fY2xrXCIsIFwiQ0xLXCIsIHt9KTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfTtcblx0ICB9LFxuXHQgIFxuXHQgIGdldEluZGV4QnlSZWN0OiBmdW5jdGlvbihzZWxlY3RvciwgdGFyZ2V0UmVjdCwgY2FsbGJhY2spe1xuXHQgICAgdmFyIHRhcmdldEluZGV4ID0gLTE7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICBtaW5pLmdldENvbnRleHQoKS5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKHNlbGVjdG9yKS5ib3VuZGluZ0NsaWVudFJlY3QoKS5leGVjKGZ1bmN0aW9uKHJlY3Qpe1xuXHQgICAgICBlYWNoKHJlY3RbMF0sZnVuY3Rpb24oaXRlbSxpbmRleCl7XG5cdCAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgaWYoaXRlbS53aWR0aCA9PT0gdGFyZ2V0UmVjdC53aWR0aCAmJiBpdGVtLmhlaWdodCA9PT0gdGFyZ2V0UmVjdC5oZWlnaHQgJiYgaXRlbS5sZWZ0ID09PSB0YXJnZXRSZWN0LmxlZnQgJiYgaXRlbS50b3AgPT09IHRhcmdldFJlY3QudG9wICYmIGl0ZW0ucmlnaHQgPT09IHRhcmdldFJlY3QucmlnaHQgJiYgaXRlbS5ib3R0b20gPT09IHRhcmdldFJlY3QuYm90dG9tKXtcblx0ICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSBpbmRleDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGFyZ2V0SW5kZXggPSBpbmRleDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYWxsYmFjayh0YXJnZXRJbmRleCk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciBpc1BsYWluT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFyciwgZm4pIHtcblx0ICBpZihpc1BsYWluT2JqZWN0KGFycikgJiYgYXJyLmxlbmd0aCA9PT0gdm9pZCAwKXtcblx0ICAgIGZvcih2YXIgYXR0ciBpbiBhcnIpe1xuXHQgICAgICBpZihhcnIuaGFzT3duUHJvcGVydHkoYXR0cikpe1xuXHQgICAgICAgIGZuKGF0dHIsYXJyW2F0dHJdLGFycik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9ZWxzZSB7XG5cdCAgICB2YXIgaTtcblx0ICAgIHZhciBsID0gYXJyLmxlbmd0aDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHJzID0gZm4oYXJyW2ldLCBpKTtcblx0ICAgICAgaWYgKHJzID09PSAnYnJlYWsnKSB7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqKXtcblx0ICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdFxuXHQgIHZhciBwcm90byA9IG9iajtcblx0ICB3aGlsZSAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKSAhPT0gbnVsbCkge1xuXHQgICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBwcm90bztcblx0fTtcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlsI/nqIvluo/lt6Xlhbdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7IFxuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0Ly8gdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXHRcblx0ZXhwb3J0cy5nZXRDdXJyZW50UGFnZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICByZXR1cm4gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0gfHwge307XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFJlZmVycmVyUGFnZSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuXHQgIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcblx0fTtcblx0XG5cdHZhciBfaXNUYjtcblx0Ly8g5Y2V6aG15rWL6K+V6ZyA6KaBXG5cdGV4cG9ydHMucmVzZXRJc1RCID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgX2lzVGIgPSB2YWx1ZTtcblx0fTtcblx0XG5cdFxuXHRmdW5jdGlvbiBpbml0SXNUQiAoKSB7XG5cdCAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gX2lzVGI7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZXN1bHQgPSBmYWxzZTtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcblx0ICAgICAgcmVzdWx0ID0gISEvQWxpQXBwL2kudGVzdChVQSk7XG5cdCAgICAgIGlmICgvQWxpQXBwXFwoKEFQfERpbmdUYWxrfEFNQVB8VUN8UVVBUkspL2kudGVzdChVQSkpIHtcblx0ICAgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoL0FsaUFwcFxcKEtCL2kudGVzdChVQSkpIHtcblx0ICAgICAgICByZXN1bHQgPSAhIS9NaXN0Ly50ZXN0KFVBKTtcblx0ICAgICAgfVxuXHQgICAgICAvL0lERS3mt5jlrp0t5ZWG5a625bqU55So5LiL5pyf5pyb6L+U5ZuedHJ1ZVxuXHQgICAgICBpZigvQWxpcGF5SURFIFRhb2Jhby8udGVzdChVQSkpe1xuXHQgICAgICAgIHJlc3VsdCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlc3VsdCkge1xuXHQgICAgICAgIHZhciBjdHggPSBnZXRQbGF0Zm9ybVR5cGUoKS5jdHg7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY3R4LmNhbklVc2UpKSB7XG5cdCAgICAgICAgICByZXN1bHQgPSAhIWN0eC5jYW5JVXNlKCdjYWxsVXNlclRyYWNrJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgX2lzVGIgPSByZXN1bHQ7XG5cdCAgICByZXR1cm4gcmVzdWx0OyAgXG5cdCAgfVxuXHR9XG5cdGV4cG9ydHMuaW5pdElzVEIgPSBpbml0SXNUQjtcblx0XG5cdGZ1bmN0aW9uIGlzVEIoKSB7XG5cdCAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG5cdCAgICByZXR1cm4gISFfaXNUYjsgIFxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gaW5pdElzVEIoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBnZXRQbGF0Zm9ybVR5cGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGN0eDogZGQsXG5cdCAgICAgIHBsYXRUeXBlOiAnZGQnLFxuXHQgICAgICBzZGtUeXBlOiAnZGRtcCcsXG5cdCAgICAgIGxvZ0RvbWFpbjogJy9kZG1fbG9ncydcblx0ICAgIH07XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjdHg6IG15LFxuXHQgICAgICAgIHBsYXRUeXBlOiBteSAmJiBteS50YiA/ICd0YW9iYW8nIDogJ215Jyxcblx0ICAgICAgICBzZGtUeXBlOiBteSAmJiBteS50YiA/ICd0YW9iYW9tcCcgOiAnbXltcCcsXG5cdCAgICAgICAgbG9nRG9tYWluOiAnL2FsaXBheW1fbG9ncydcblx0ICAgICAgfTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgY3R4OiB0dCxcblx0ICAgICAgICAgIHBsYXRUeXBlOiAndHQnLFxuXHQgICAgICAgICAgc2RrVHlwZTogJ3R0bXAnLFxuXHQgICAgICAgICAgbG9nRG9tYWluOiAnL2J5dGVkYW5jZW1fbG9ncydcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICAgIGN0eDogc3dhbixcblx0ICAgICAgICAgICAgcGxhdFR5cGU6ICdiZCcsXG5cdCAgICAgICAgICAgIHNka1R5cGU6ICdiZG1wJyxcblx0ICAgICAgICAgICAgbG9nRG9tYWluOiAnL2JhaWR1bV9sb2dzJ1xuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgICAgIGN0eDogd3gsXG5cdCAgICAgICAgICAgICAgcGxhdFR5cGU6ICd3eCcsXG5cdCAgICAgICAgICAgICAgc2RrVHlwZTogJ3d4bXAnLFxuXHQgICAgICAgICAgICAgIGxvZ0RvbWFpbjogJy93eG1fbG9ncydcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgICAgICBjdHg6IHt9LFxuXHQgICAgICAgICAgICAgIHBsYXRUeXBlOiAnVU5LTk9XJyxcblx0ICAgICAgICAgICAgICBzZGtUeXBlOiAnVU5LTk9XJ1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5pc1RCID0gaXNUQjtcblx0ZXhwb3J0cy5nZXRQbGF0Zm9ybVR5cGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLnBsYXRUeXBlO1xuXHR9O1xuXHRleHBvcnRzLmdldFNka1R5cGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLnNka1R5cGU7XG5cdH07XG5cdGV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuXHR9O1xuXHRleHBvcnRzLmdldExvZ0RvbWFpbiA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5sb2dEb21haW47XG5cdH07XG5cdFxuXHRcblx0dmFyIEhUVFBfUkVRVUVTVCA9ICdodHRwUmVxdWVzdCc7XG5cdHZhciBSRVFVRVNUID0gJ3JlcXVlc3QnO1xuXHR2YXIgRk4gPSBmdW5jdGlvbiAoKSB7fTtcblx0XG5cdC8qKlxuXHQgKiDlj5HpgIFHRVTor7fmsYJcblx0ICogQHBhcmFtcyB7U3RyaW5nfSB1cmxcblx0ICogQHBhcmFtcyB7U3RyaW5nfSBvcHRzIHtcblx0ICogICB0aW1lb3V0OiA1MDAwXG5cdCAqIH1cblx0ICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIHtcblx0ICogICB0aW1lb3V0OiA1MDAwXG5cdCAqIH1cblx0ICovXG5cdGV4cG9ydHMucmVxdWVzdCA9IGZ1bmN0aW9uICh1cmwsIG9wdHMsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG5cdCAgLy8gdmFyIGN0eCA9IHV0aWxzLmdldENvbnRleHQoKSB8fCB7fTtcblx0ICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuXHQgIGlmICghaXNGdW5jdGlvbihmYWlsdXJlQ2FsbGJhY2spKSB7XG5cdCAgICBmYWlsdXJlQ2FsbGJhY2sgPSBGTjtcblx0ICB9XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKHN1Y2Nlc3NDYWxsYmFjaykpIHtcblx0ICAgIHN1Y2Nlc3NDYWxsYmFjayA9IEZOO1xuXHQgIH1cblx0XG5cdCAgdmFyIG1ldGhvZE5hbWUgPSBvcHRzLnJlcXVlc3RNZXRob2ROYW1lIHx8IFJFUVVFU1Q7XG5cdCAgdmFyIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblx0ICBpZiAoIWlzRnVuY3Rpb24ocmVxKSAmJiBtZXRob2ROYW1lICE9PSBSRVFVRVNUKSB7XG5cdCAgICBtZXRob2ROYW1lID0gUkVRVUVTVDtcblx0ICAgIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcblx0ICB9XG5cdCAgaWYgKCFpc0Z1bmN0aW9uKHJlcSkgJiYgbWV0aG9kTmFtZSAhPT0gSFRUUF9SRVFVRVNUKSB7XG5cdCAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2Fybign5pa55rOVXCInICsgbWV0aG9kTmFtZSArICdcIuS4jeWtmOWcqCEnKTtcblx0ICAgIG1ldGhvZE5hbWUgPSBIVFRQX1JFUVVFU1Q7XG5cdCAgICByZXEgPSBjdHhbbWV0aG9kTmFtZV07XG5cdCAgfVxuXHRcblx0ICB2YXIgZGF0YVR5cGUgPSBvcHRzICYmIG9wdHMuZGF0YVR5cGUgPyBvcHRzLmRhdGFUeXBlIDogJ2Jhc2U2NCc7XG5cdCAgdmFyIHRpbWVvdXQgPSBvcHRzICYmIG9wdHMudGltZW91dCA/IG9wdHMudGltZW91dCA6IDMwMDA7XG5cdCAgdmFyIG1ldGhvZCA9IG9wdHMubWV0aG9kIHx8ICdHRVQnO1xuXHRcblx0ICB2YXIgY2FsbGJhY2tlZDtcblx0ICAvLyDlpoLmnpx1cmzmsqHmnInluKbljY/orq7vvIzov5nph4zooaXlhYXlrozmlbRcblx0ICB1cmwgPSB1dGlsLmZpeERvbWFpbih1cmwpO1xuXHQgIHZhciBtc2c7XG5cdCAgaWYgKGlzRnVuY3Rpb24ocmVxKSkge1xuXHQgICAgdmFyIHJlcU9wdGlvbnMgPSB7XG5cdCAgICAgIHVybDogdXJsLFxuXHQgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgZGF0YVR5cGU6IGRhdGFUeXBlLFxuXHQgICAgICB0aW1lb3V0OiB0aW1lb3V0LFxuXHQgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgaWYgKCFjYWxsYmFja2VkKSB7XG5cdCAgICAgICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcblx0ICAgICAgICAgIHN1Y2Nlc3NDYWxsYmFjayhyZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgIC8vIGNvbnNvbGUgJiYgY29uc29sZS53YXJuKCdhcGx1c+aXpeW/l+ivt+axglwiJyArIHVybCArICdcIuWksei0pe+8jOWOn+WboO+8micgKyBKU09OLnN0cmluZ2lmeShyZXMpKTtcblx0ICAgICAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuXHQgICAgICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcblx0ICAgICAgICAgICAgZmFpbHVyZTogdHJ1ZSxcblx0ICAgICAgICAgICAgZGF0YTogcmVzXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAobWV0aG9kID09PSAnUE9TVCcgJiYgdHlwZW9mIG9wdHMuZGF0YSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVxT3B0aW9ucy51cmwgPSByZXFPcHRpb25zLnVybC5zcGxpdCgnPycpWzBdO1xuXHQgICAgICBpZiAoSFRUUF9SRVFVRVNUID09PSBtZXRob2ROYW1lKSB7XG5cdCAgICAgICAgLy8g5LiT6Zeo5a+56ZKJ6ZKJ55qE5pSv5oyBXG5cdCAgICAgICAgcmVxT3B0aW9ucy5oZWFkZXJzID0ge1xuXHQgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuXHQgICAgICAgIH07XG5cdCAgICAgICAgcmVxT3B0aW9ucy5kYXRhVHlwZSA9ICdqc29uJztcblx0ICAgICAgICByZXFPcHRpb25zLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRzLmRhdGEpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IG9wdHMuZGF0YTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuXHQgICAgaWYgKHR5cGVvZiBfZXh0SW5mbyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVxT3B0aW9ucy5fZXh0SW5mbyA9IF9leHRJbmZvO1xuXHQgICAgfVxuXHQgICAgcmVxKHJlcU9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAoIWNhbGxiYWNrZWQpIHtcblx0ICAgICAgY2FsbGJhY2tlZCA9IHRydWU7XG5cdCAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG5cdCAgICAgICAgZmFpbHVyZTogdHJ1ZSxcblx0ICAgICAgICBkYXRhOiBtc2dcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFjYWxsYmFja2VkKSB7XG5cdCAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuXHQgICAgICBtc2cgPSAnYXBsdXMgbG9nIHJlcXVlc3RcIicgKyB1cmwgKyAnIHRpbWVvdXRcIiwgdGltZSBzcGVuZCcgKyB0aW1lb3V0ICsgJ21zJztcblx0ICAgICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4obXNnKTtcblx0ICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcblx0ICAgICAgICBmYWlsdXJlOiB0cnVlLFxuXHQgICAgICAgIGRhdGE6IG1zZ1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB0aW1lb3V0KTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcblx0ICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOagh+WHhuW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCcuL3V0aWxBcnJheScpO1xuXHQvLyB2YXIgZm9ybWF0ID0gcmVxdWlyZSgnLi9mb3JtYXQnKTtcblx0XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMubWtQbGFpbktleSA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xuXHR9O1xuXHRleHBvcnRzLnNfcGxhaW5fb2JqID0gc19wbGFpbl9vYmo7XG5cdFxuXHQvLyAyMDE2LTA4LTI0IOeQrOWtkOmcgOaxgu+8jGV4cGFyYW1z5Y2V54us5aSE55CG77yMd2luZHZhbmXph4zpnIDopoEgQOiwi+Wjq1xuXHRleHBvcnRzLm1rUGxhaW5LZXlGb3JFeHBhcmFtcyA9IGZ1bmN0aW9uKGtleV9wcmVmaXgpIHtcblx0ICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG5cdCAgcmV0dXJuIF9rZXkgKyAnZXhwYXJhbXMnO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIGFycmF5IHRvIHBhcmFtXG5cdCAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG5cdCAqIOWFtuS4reaVsOe7hOS4ulxuXHQgKiAgICAgIFtbazEsIHYxXSwgW2syLCB2Ml0sIFtrMywgdjNdLCAuLi5dXG5cdCAqIOeahOW9ouW8j+OAglxuXHQgKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuXHQgKiBAcGFyYW0gYXJyIHtBcnJheX1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gYXJyMnBhcmFtKGFycikge1xuXHQgIHZhciBhID0gW10sXG5cdCAgICBrLFxuXHQgICAgdixcblx0ICAgIGksXG5cdCAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXHRcblx0ICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgIGsgPSBhcnJbaV1bMF07XG5cdCAgICB2ID0gYXJyW2ldWzFdO1xuXHQgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGEuam9pbignJicpO1xuXHR9O1xuXHRleHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblx0XG5cdFxuXHQvKipcblx0ICogcGFyYW0gdG8gYXJyYXlcblx0ICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG5cdCAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgYXJyYXkg5qC85byP77yM5aaC77yaXG5cdCAqIFtbXCJhXCIsIFwiMVwiXSwgW1wiYlwiLCBcIjJcIl0sIFtcImNcIiwgXCIzXCJdXVxuXHQgKlxuXHQgKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICB2YXIgYSA9IHBhcmFtcy5zcGxpdChcIiZcIiksXG5cdCAgICBpID0gMCwgbCA9IGEubGVuZ3RoLFxuXHQgICAgaXRlbSxcblx0ICAgIGFyciA9IFtdO1xuXHQgIGZvciAoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG5cdCAgICBhcnIucHVzaChbaXRlbS5zaGlmdCgpLCBpdGVtLmpvaW4oXCI9XCIpXSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gYXJyO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hcnIyb2JqID0gZnVuY3Rpb24gKGFycikge1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgaTtcblx0ICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHJldFtrXSA9IHY7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdC8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcblx0ZXhwb3J0cy5qc29uTGlrZVN0cjJKU09OID0gZnVuY3Rpb24oanNvblN0cikge1xuXHQgIGlmICghanNvblN0ciB8fCB0eXBlb2YganNvblN0ciAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB7fTtcblx0ICB9XG5cdCAgdmFyIHN0ciA9IGpzb25TdHIucmVwbGFjZSgvWydcInt9XSsvZywgJycpO1xuXHQgIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuXHQgIHZhciBhcnIyID0gW107IFxuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyMS5sZW5ndGg7IGkrKykge1xuXHQgICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0aGlzLmFycjJvYmooYXJyMik7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGV4cG9ydHMuZml4RG9tYWluID0gZnVuY3Rpb24odXJsKSB7ICBcblx0ICBpZiAodXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgIT09IC0xIHx8IHVybC5pbmRleE9mKCdodHRwOi8vJykgIT09IC0xKSB7XG5cdCAgICByZXR1cm4gdXJsO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB1cmwgPSAoL15cXC9cXC8vLnRlc3QodXJsKSA/ICcnIDogJy8vJykgKyB1cmw7ICAgIFxuXHQgICAgaWYgKC9eXFwvXFwvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgICByZXR1cm4gJ2h0dHA6JyArIHVybDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAnaHR0cHM6JyArIHVybDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEFwcEtleSA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikuZ2V0R2xvYmFsVmFsdWUoXCJhcGx1c1wiKTtcblx0ICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcGtleScpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJZCcpIHx8IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBLZXknKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2hlY2tFbXB0eU9iaiA9IGZ1bmN0aW9uKGRhdGEpIHtcblx0ICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja0RvbWFpbiA9IGZ1bmN0aW9uKHVybCkge1xuXHQgIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eKChodHRwfGh0dHBzfCcnKTpcXC9cXC8pPyhbYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfShcXC5bYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfSkrKDpbMC05XXsxLDV9KSopJC8pO1xuXHQgIHZhciBtYXRjaGVkID0gKHVybC5tYXRjaChyZWcpIHx8IFtdKVswXTsgIFxuXHQgIGlmICghdXJsIHx8ICFtYXRjaGVkKSB7XG5cdCAgICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcblx0ICAgIHVsb2coKS50aXBfdyhcInRyYWNrRG9tYWluIGVycm9yLCBwbGVhc2UgY2hlY2sgYXBsdXMtcmhvc3QtdiBzZXR0aW5nLCBjdXJyZW50IHZhbHVlIGlzOiBcIiArIHVybCB8fCAndW5kZWZpbmVkJyk7XG5cdCAgICB1bG9nKCkudGlwX3coXCJ3ZSBhY2NlcHQgdGhlc2UgdGhyZWUgcGF0dGVybnM6XCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiZWcxOiBodHRwczovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcImVnMjogaHR0cDovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcImVnMzogdGVzdC1xdHJhY2tpbmcteHh4LmNvbTpwb3J0LCBwb3J0IGlzIG9wdGlvbmFsXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9IFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5jaGVja09wZW5pZCA9IGZ1bmN0aW9uKG9kKSB7XG5cdCAgaWYgKCFvZCkge1xuXHQgICAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICAgIHVsb2coKS50aXBfdyh1bG9nKCkucmVwZWF0KCchJykpO1xuXHQgICAgdWxvZygpLnRpcF93KFwiUVQgbmVlZCBhbiB1bmlxdWUgaWQgYXMgUVQncyBkZXZpY2VpZCEhXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KFwic2V0dGluZyBleGFtcGxlczogYXBsdXNfcXVldWUucHVzaCh7YWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCBhcmd1bWVudHM6IFsnX2Fub255X2lkJywgeHh4eHh4XX0pO1wiKTtcblx0ICAgIHVsb2coKS50aXBfdyhcInJlZmVycmVuY2UgZG9jdW1lbnQ6IGh0dHBzOi8vdC50Yi5jbi8xZFRIalRUUUYwVWpPVE5IaUNrYUNTXCIpO1xuXHQgICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoJyEnKSk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHRleHBvcnRzLm1hcEV2ZW50U2FtcGxlUmF0ZXMgPSBmdW5jdGlvbihhcnIpIHtcblx0ICB2YXIgcmVzdWx0ID0gW107XG5cdCAgZWFjaChhcnIsIGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgaWYgKGl0ZW0uZXZlbnRJZHMgJiYgaXRlbS5ldmVudElkcy5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGVhY2goaXRlbS5ldmVudElkcywgZnVuY3Rpb24oZWt2KXtcblx0ICAgICAgICByZXN1bHQucHVzaCh7XG5cdCAgICAgICAgICBldmVudElkOiBla3YsXG5cdCAgICAgICAgICBzYW1wbGluZ1JhdGU6IGl0ZW0uc2FtcGxpbmdSYXRlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG5cdHZhciBMT0dfUFJFRklYID0gJ1tBUExVU10gLS0gJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX2luc3RhbmNlID0gbnVsbDtcblx0ICB2YXIgX2RlYnVnID0gZmFsc2U7XG5cdFxuXHQgIGZ1bmN0aW9uIFVMb2coKSB7XG5cdCAgICB0aGlzLnNldERlYnVnID0gZnVuY3Rpb24gKGRlYnVnKSB7XG5cdCAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGVidWcpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICAgIGFyZ3VtZW50c1swXSA9IExPR19QUkVGSVggKyBhcmd1bWVudHNbMF07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IuYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAvLyBlXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMudyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKF9kZWJ1Zykge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIC8vIGVcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy52ID0gZnVuY3Rpb24gKCkgeyAgICAgIFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy50aXBfdyA9IGZ1bmN0aW9uIChtc2cpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBjb25zb2xlLmxvZyhcblx0ICAgICAgICAgICclYyAnICsgTE9HX1BSRUZJWCArIG1zZyxcblx0ICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuXHQgICAgICAgICk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAvLyBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5yZXBlYXQgPSBmdW5jdGlvbihjaGFyKSB7XG5cdCAgICAgIHZhciByZXMgPSBjaGFyO1xuXHQgICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG5cdCAgICAgICAgcmVzID0gcmVzICsgY2hhcjtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoX2luc3RhbmNlID09PSBudWxsKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2luc3RhbmNlO1xuXHQgIH07XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsT2JqZWN0LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdGV4cG9ydHMuaXNPYmplY3QgPSBmdW5jdGlvbihlKSB7XG5cdCAgcmV0dXJuIG51bGwgIT09IGUgJiYgXCJbb2JqZWN0IE9iamVjdF1cIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc0VtcHR5T2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuXHQgIGlmICh0aGlzLmlzT2JqZWN0KGUpKSB7XG5cdCAgICBmb3IgKHZhciByIGluIGUpIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCByKSkgXG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDlhYvpmobkuIDkuKpvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIGNsb25lRGVlcCAob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gQXJyYXkuaXNBcnJheShvYmopID8gW10gOiB7fTsgLy9GaXggb2JqLmNvbnRydWN0b3IgdHlwZUVycm9yIGNvbnN0cnVjdG9yIHVuZGVmaW5lZFxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG5cdCAgICBzdHIgPSBKU09OLnN0cmluZ2lmeShvYmopOyAvL+ezu+WIl+WMluWvueixoVxuXHQgICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBpIGluIG9iaikge1xuXHQgICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbmV3b2JqO1xuXHR9XG5cdG1vZHVsZS5leHBvcnRzID0gY2xvbmVEZWVwO1xuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9yZXN1bWVUaW1lID0gbnVsbDtcblx0ICB2YXIgX2N1cnJlbnRTZXNzaW9uID0gbnVsbDsgLy8g5b2T5YmNc2Vzc2lvbuWvueixoVxuXHRcblx0ICBmdW5jdGlvbiBpbml0KCl7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICByZXN1bWU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgdmFyIG5ld1Nlc3Npb24gPSBmYWxzZTtcblx0XG5cdCAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkNVUlJFTlRfU0VTU0lPTik7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG5cdCAgICAgICAgX3Jlc3VtZVRpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvblxuXHQgICAgICAgICAgfHwgIV9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZVxuXHQgICAgICAgICAgfHwgX3Jlc3VtZVRpbWUgLSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPiBhcGx1c1N0YXRpYy5TRVNTSU9OX0lOVEVSVkFMKSB7XG5cdCAgICAgICAgICBuZXdTZXNzaW9uID0gdHJ1ZTtcblx0ICAgICAgICAgIF9jcmVhdGVOZXdTZXNzaW9uKG9wdGlvbnMpO1xuXHQgICAgICAgICAgdWxvZygpLmkoJ3N0YXJ0IG5ldyBzZXNzaW9uKCVzKTogJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1bG9nKCkuaSgnY29udGludWUgbGFzdCBzZXNzaW9uKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gbmV3U2Vzc2lvbjtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIC8vIOWcqG9uSGlkZeaWueazleaXtumXreWQiHNlc3Npb25cblx0ICAgICAgcGF1c2U6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBfZW5kU2Vzc2lvbigpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgLy8g6I635Y+W5b2T5YmN55qEc2Vzc2lvbklk77yM5rKh5pyJ5YiZ6L+U5Zue56m6XG5cdCAgICAgIGdldEN1cnJlbnRTZXNzaW9uSWQ6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICByZXR1cm4gKF9jdXJyZW50U2Vzc2lvbiB8fCB7fSkuaWQ7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBnZXRDdXJyZW50U2Vzc2lvbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHJldHVybiBfY3VycmVudFNlc3Npb247XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbG9uZUN1cnJlbnRTZXNzaW9uOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcmV0dXJuIGNsb25lRGVlcChfY3VycmVudFNlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX2dldFVtUGFyYW1zKHF1ZXJ5KSB7XG5cdCAgICB2YXIgYXBsdXNfcXVlcnkgPSB7fTtcblx0ICAgIGZvciAodmFyIGkgaW4gcXVlcnkpIHtcblx0ICAgICAgYXBsdXNfcXVlcnlbaV0gPSBxdWVyeVtpXTtcblx0ICAgIH1cblx0XG5cdCAgICB1bG9nKCkuaSgncXVlcnk6ICcsIHF1ZXJ5KTtcblx0ICAgIHJldHVybiBhcGx1c19xdWVyeTtcblx0ICB9XG5cdFxuXHQgIC8vIOW8gOWni+S4gOS4quaWsHNlc3Npb25cblx0ICBmdW5jdGlvbiBfY3JlYXRlTmV3U2Vzc2lvbihuZXdPcHRpb25zKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgcHJldk9wdGlvbnMgPSAoX2N1cnJlbnRTZXNzaW9uIHx8IHt9KS5vcHRpb25zIHx8IHt9O1xuXHQgICAgICBcblx0ICAgICAgdmFyIGxhdW5jaE9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe30sIF9nZXRVbVBhcmFtcyhuZXdPcHRpb25zLnF1ZXJ5KSk7XG5cdCAgICAgIGxhdW5jaE9wdGlvbnMucGF0aCA9IG5ld09wdGlvbnMucGF0aCB8fCBwcmV2T3B0aW9ucy5wYXRoO1xuXHQgICAgICBsYXVuY2hPcHRpb25zLnNjZW5lID0gbmV3T3B0aW9ucy5zY2VuZVxuXHQgICAgICAgID8gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKSArICdfJyArIG5ld09wdGlvbnMuc2NlbmVcblx0ICAgICAgICA6IHByZXZPcHRpb25zLnNjZW5lO1xuXHRcblx0ICAgICAgdmFyIHJlZmVycmVySW5mbyA9IG5ld09wdGlvbnMucmVmZXJyZXJJbmZvO1xuXHQgICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG5cdCAgICAgICAgbGF1bmNoT3B0aW9ucy5yZWZlcnJlckFwcElkID0gcmVmZXJyZXJJbmZvLmFwcElkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB1bG9nKCkuaSgnc2Vzc2lvbiBvcHRpb25zOiAnLCBsYXVuY2hPcHRpb25zKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuXHQgICAgICB2YXIgdHMgPSBEYXRlLm5vdygpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24gPSB7XG5cdCAgICAgICAgaWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyB0cyxcblx0ICAgICAgICBzdGFydF90aW1lOiB0cyxcblx0ICAgICAgICBvcHRpb25zOiBsYXVuY2hPcHRpb25zLFxuXHQgICAgICAgIHN0YXRlX3M6IDFcblx0ICAgICAgfTsgXG5cdCAgICAgIGlmIChncCkge1xuXHQgICAgICAgIF9jdXJyZW50U2Vzc2lvblsnZ3AnXSA9IGdwO1xuXHQgICAgICB9IFxuXHRcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgdWxvZygpLmUoJ2dlbmVyYXRlIG5ldyBzZXNzaW9uIGZhaWxlZCwgZXJybXNnOiAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8vIOe7k+adn+W9k+WJjXNlc3Npb27vvIznlLHkuo4zMOenkuacuuWItu+8jOS4gOS4qnNlc3Npb27kvJrooqvnu5PmnZ/lpJrmrKFcblx0ICBmdW5jdGlvbiBfZW5kU2Vzc2lvbigpIHtcblx0ICAgIGlmIChfY3VycmVudFNlc3Npb24pIHtcblx0ICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXHQgICAgICBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPSBkYXRlLmdldFRpbWUoKTtcblx0ICAgICAgaWYgKHR5cGVvZiBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gIT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gMDtcblx0ICAgICAgfVxuXHQgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgLSBfcmVzdW1lVGltZTtcblx0ICAgICAgX2N1cnJlbnRTZXNzaW9uLnN0YXRlX3MgPSAwO1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5DVVJSRU5UX1NFU1NJT04sIF9jdXJyZW50U2Vzc2lvbik7XG5cdFxuXHQgICAgICB1bG9nKCkuaSgnc2Vzc2lvbiBlbmQgKCVzKTogJXMgJywgX2N1cnJlbnRTZXNzaW9uLmlkLCBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLCBfY3VycmVudFNlc3Npb24pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IGluaXQoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0XG5cdH0pKCk7XG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9uYW1lID0gJyc7XG5cdCAgdmFyIF9kYXRhID0gbnVsbDtcblx0ICB2YXIgX2xvYWRlZCA9IGZhbHNlO1xuXHRcblx0ICBmdW5jdGlvbiBDYWNoZSgpIHtcblx0ICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgIHRoaXMubG9hZCA9IGZ1bmN0aW9uIChjYikge1xuXHQgICAgICBpZiAoIV9kYXRhKSB7XG5cdCAgICAgICAgX25hbWUgPSAnYXBsdXNfY2FjaGVfJyArIHV0aWwuZ2V0QXBwS2V5KCkgfHwgJyc7XG5cdCAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBfbmFtZSxcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgaWYgKHJlcyAmJiByZXMuZGF0YSkge1xuXHQgICAgICAgICAgICAgIF9kYXRhID0ganNvblV0aWwucGFyc2UocmVzLmRhdGEpIHx8IHt9O1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIF9kYXRhID0ge307XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcblx0ICAgICAgICAgICAgICBrZXk6IF9uYW1lXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG5cdFxuXHQgICAgICAgICAgICB1bG9nKCkudyhfbmFtZSArICc6ICcgKyBlLmVyck1zZyk7XG5cdCAgICAgICAgICAgIF9kYXRhID0ge307XG5cdCAgICAgICAgICAgIF9sb2FkZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG5cdCAgICAgICAgICAgICAga2V5OiBfbmFtZVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG5cdCAgICAgICAgICBrZXk6IF9uYW1lXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChfZGF0YSkge1xuXHQgICAgICAgIGN0eC5zZXRTdG9yYWdlKHtcblx0ICAgICAgICAgIGtleTogX25hbWUsXG5cdCAgICAgICAgICBkYXRhOiBqc29uVXRpbC5zdHJpbmdmeShfZGF0YSlcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIGlmIChfZGF0YSkge1xuXHQgICAgICAgIF9kYXRhW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXkpIHsgICAgICBcblx0ICAgICAgcmV0dXJuIChfZGF0YSB8fCB7fSlba2V5XTtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIGlmIChfZGF0YSAmJiBfZGF0YVtrZXldKSB7XG5cdCAgICAgICAgZGVsZXRlIF9kYXRhW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5nZXRBbGwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBfZGF0YTtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgX2RhdGEgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuICEhdGhpcy5nZXQoa2V5KTtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5pc0xvYWRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIF9sb2FkZWQ7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMuZ2V0U3luYyA9IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICAgICAgICB2YXIgcmVzdWx0ID0gY3R4LmdldFN0b3JhZ2VTeW5jKGtleSk7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuQVBMVVNfSU1QUklOVF9WRVJTSU9OKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH0gICBcblx0ICAgICAgICByZXR1cm4gdHlwZW9mIHJlc3VsdCA9PT0gJ3N0cmluZycgPyAganNvblV0aWwucGFyc2UocmVzdWx0KSA6IHJlc3VsdDtcblx0ICAgICAgfSBjYXRjaChlKSB7fVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLnNldFN5bmMgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICBjdHguc2V0U3RvcmFnZVN5bmMoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjdHguc2V0U3RvcmFnZVN5bmMoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoKGUpIHt9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBDYWNoZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFxuXHRleHBvcnRzLnN0cmluZ2Z5ID0gZnVuY3Rpb24oZGF0YSkge1xuXHQgIGlmIChkYXRhKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIC8vIGVtcHR5XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fTtcblx0XG5cdGV4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihqc29uKSB7XG5cdCAgaWYgKGpzb24pIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBKU09OLnBhcnNlKGpzb24pO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAvLyBlbXB0eVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdGV4cG9ydHMucGFyc2VUb0FycmF5ID0gZnVuY3Rpb24oanNvbikge1xuXHQgIGlmIChqc29uKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgLy8gZW1wdHlcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIFtdO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZnVuY3Rpb24gZ2V0UmFuZG9tU3RyKGxlbikge1xuXHQgIHZhciBzdHIgPSAnJztcblx0ICB2YXIgYXJyID0gWycwJywgJzEnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJ2EnLCAnYicsICdjJywgJ2QnLCAnZScsICdmJywgJ2cnLCAnaCcsICdpJywgJ2onLCAnaycsICdsJywgJ20nLCAnbicsICdvJywgJ3AnLCAncScsICdyJywgJ3MnLCAndCcsICd1JywgJ3YnLCAndycsICd4JywgJ3knLCAneicsICdBJywgJ0InLCAnQycsICdEJywgJ0UnLCAnRicsICdHJywgJ0gnLCAnSScsICdKJywgJ0snLCAnTCcsICdNJywgJ04nLCAnTycsICdQJywgJ1EnLCAnUicsICdTJywgJ1QnLCAnVScsICdWJywgJ1cnLCAnWCcsICdZJywgJ1onXTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IE51bWJlcihsZW4pOyBpKyspIHtcblx0ICAgIHZhciBwb3MgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAoYXJyLmxlbmd0aCAtIDEpKTtcblx0ICAgIHN0ciArPSBhcnJbcG9zXTtcblx0ICB9XG5cdCAgcmV0dXJuIHN0cjtcblx0fTtcblx0ZXhwb3J0cy5nZXRSYW5kb21TdHIgPSBnZXRSYW5kb21TdHI7XG5cdFxuXHRleHBvcnRzLnN0YXJ0c1dpdGggPSBmdW5jdGlvbihzdHIsIHNlYXJjaFZhbCkge1xuXHQgIGlmICghc3RyIHx8ICFzZWFyY2hWYWwgfHwgc2VhcmNoVmFsLmxlbmd0aCA9PT0gMCB8fCBzZWFyY2hWYWwubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gc3RyLnN1YnN0cigwLCBzZWFyY2hWYWwubGVuZ3RoKSA9PT0gc2VhcmNoVmFsO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbih0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQgfHwgdGFyZ2V0ID09PSBudWxsKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcblx0ICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuXHQgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICBpZiAoc291cmNlKSB7XG5cdCAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG5cdCAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIG5leHRLZXkpKSB7XG5cdCAgICAgICAgICBvdXRwdXRbbmV4dEtleV0gPSBzb3VyY2VbbmV4dEtleV07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBvdXRwdXQ7XG5cdH07XG5cdFxuXHQvLyAxLmVrduS4reWtmOWcqOinhOWImeS4jeWQiOazleaDheWGte+8jOS4ouW8g+aVtOadoeS6i+S7tlxuXHQvLyAyLmV2ZW50aWTplb/luqbkuI3og73otoXov4cxMjjkuKrlrZfnrKZcblx0Ly8gMy5rZXnplb/luqbkuI3og73otoXov4cyNTbkuKrlrZfnrKZcblx0Ly8gNC7mr4/kuKpldmVudOaQuuW4pmtleeS4quaVsOS4jeiDvei2hei/hzEwMOS4qlxuXHRleHBvcnRzLmNoZWNrRXZlbnQgPSBmdW5jdGlvbihldmVudElkLCBwcm9wZXJ0aWVzKSB7XG5cdCAgdmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0ICB2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHQgIHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHQgIGlmICghKGV2ZW50SWQgJiYgdHlwZW9mIGV2ZW50SWQgPT09ICdzdHJpbmcnKSkge1xuXHQgICAgdWxvZygpLncoJ2V2ZW50IGxvZ2tleSBpcyBpbnZhbGlkLCBpZCA9JywgZXZlbnRJZCB8fCBcIicnIGV2ZW50IHByb3BlcnRpZXMgPSBcIiwganNvblV0aWwuc3RyaW5nZnkocHJvcGVydGllcy5jdXNwKSk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICAvLyDkv53nlZnlhbPplK7lrZdcblx0ICB2YXIgcmVzZXJ2ZVdvcmRzID0gWydpZCcsICdkdSddO1xuXHQgIHZhciByZXNlcnZlV29yZE1hcCA9IHt9O1xuXHRcblx0ICByZXNlcnZlV29yZHMuZm9yRWFjaChmdW5jdGlvbiAod29yZCkge1xuXHQgICAgcmVzZXJ2ZVdvcmRNYXBbd29yZF0gPSAxO1xuXHQgIH0pO1xuXHRcblx0ICAvLyDmo4Dmn6VldmVudElk5piv5ZCm5LiO5L+d55WZ5YWz6ZSu5a2X5Yay56qBXG5cdCAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG5cdCAgICB1bG9nKCkuZSgnZXZlbnRJZCBoYXMgY29uZmxpY3Qgd2l0aCByZXNlcnZld29yZHM6ICcgKyByZXNlcnZlV29yZHMuam9pbignLCcpKTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdFxuXHQgIGlmIChldmVudElkLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1BWF9FVkVOVElEX0xFTkdUSCkge1xuXHQgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBldmVudCBpZCBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfRVZFTlRJRF9MRU5HVEgpO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0XG5cdCAgLy8gcHJvcGVydGllc+eahOWQiOazleexu+Wei+S4uiBzdHJpbmcgfCBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpXG5cdCAgaWYgKHByb3BlcnRpZXNcblx0ICAgICYmICh0eXBlb2YgcHJvcGVydGllcyAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSlcblx0ICAgICYmIHR5cGVvZiBwcm9wZXJ0aWVzICE9PSAnc3RyaW5nJykge1xuXHQgICAgdWxvZygpLmUoJ3BsZWFzZSBjaGVjayB0cmFja0V2ZW50IHByb3BlcnRpZXMuIHByb3BlcnRpZXMgc2hvdWxkIGJlIHN0cmluZyBvciBvYmplY3Qobm90IGluY2x1ZGUgQXJyYXkpJyk7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICB2YXIgY291bnQgPSAwO1xuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcblx0ICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuXHQgICAgICAgIGlmIChrZXkubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpIHtcblx0ICAgICAgICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBsZW5ndGggb2YgcHJvcGVydHkga2V5IHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIKTtcblx0ICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjb3VudCA+PSBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCkge1xuXHQgICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGNvdW50IG9mIHByb3BlcnRpZXMgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWVNfQ09VTlQpO1xuXHQgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHJlc2VydmVXb3JkTWFwW2tleV0pIHtcblx0ICAgICAgICAgIHVsb2coKS5lKCdwcm9wZXJ0eSBrZXkgaGFzIGNvbmZsaWN0IHdpdGggcmVzZXJ2ZVdvcmRzOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG5cdCAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBjb3VudCArPSAxO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0XG5cdFxuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHRleHBvcnRzLmRlbGV0ZUluZm8gPSBmdW5jdGlvbihnb2tleSwgYXJyKSB7XG5cdCAgZWFjaChhcnIsIGZ1bmN0aW9uKHYpIHtcblx0ICAgIGRlbGV0ZSBnb2tleVt2XTtcblx0ICB9KTtcblx0ICByZXR1cm4gZ29rZXk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNoZWNrRW1wdHlPYmogPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgaWYgKHR5cGVvZiBkYXRhICE9PSAnb2JqZWN0JyB8fCAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09PSAwKSkge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0U3RhcnRJZCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBnZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuRGF0YVR5cGUgPSB7XG5cdCAgSEFMRl9TRVNTSU9OOiAnaGFsZl9zZXNzaW9uJyxcblx0ICBDTE9TRV9TRVNTSU9OOiAnY2xvc2Vfc2Vzc2lvbicsXG5cdCAgRUtWOiAnZWt2Jyxcblx0ICBFTlRFUl9QQUdFOiAnZW50ZXJfcGFnZScsXG5cdCAgTEVBVkVfUEFHRTogJ2xlYXZlX3BhZ2UnXG5cdH07XG5cdFxuXHRleHBvcnRzLkFjY2Vzc1R5cGUgPSB7XG5cdCAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG5cdCAgTU9CSUxFX05FVFdPUktfM0c6ICczZycsXG5cdCAgTU9CSUxFX05FVFdPUktfNEc6ICc0ZycsXG5cdCAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG5cdH07XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cdCAgdmFyIF9pbnN0YW5jZTtcblx0ICB2YXIgX3Nlc3Npb25JZDtcblx0ICB2YXIgX3N0YXJ0SWQ7XG5cdCAgdmFyIF9tZW1vcnlFdmVudHMgPSBbXTtcblx0XG5cdCAgLy8g5Zyo5Yib5bu6c2Vzc2lvbklk5YmN5re75Yqg55qE5LqL5Lu2XG5cdCAgdmFyIF9ub1Nlc3Npb25FdmVudHMgPSBbXTtcblx0XG5cdCAgZnVuY3Rpb24gX2NhY2hlRXZlbnRzKCkge1xuXHQgICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG5cdCAgICAgIFxuXHQgICAgICAvLyDmnKzlnLDmnIDlpJrlrZjlgqggRVZFTlRfTUFYX0NPVU5UIOadoeaVsOaNru+8jOOAjOWkmuS9meaVsOaNruOAjeaaguaXtuWFiOaKm+W8g1xuXHQgICAgICBpZiAoX2dldENhY2hlRXZlbnRzTGVuZ3RoKGVrdnMpICsgX21lbW9yeUV2ZW50cy5sZW5ndGggPD0gYXBsdXNTdGF0aWMuRVZFTlRfTUFYX0NPVU5UKSB7XG5cdCAgICAgICAgZWt2cyA9IF9idWlsZEVrdnMoZWt2cywgX21lbW9yeUV2ZW50cyk7XG5cdCAgICAgICAgXG5cdCAgICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuRUtWUywgZWt2cyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIF9idWlsZEVrdnMoZWt2cywgbWVtb3J5RXZlbnRzKSB7XG5cdCAgICBla3ZzID0gZWt2cyB8fCB7fTtcblx0ICAgIHZhciBldmVudHMgPSBla3ZzW19zZXNzaW9uSWRdO1xuXHQgICAgaWYgKGlzQXJyYXkoZXZlbnRzKSAmJiBldmVudHMubGVuZ3RoKSB7XG5cdCAgICAgIGVrdnNbX3Nlc3Npb25JZF0gPSBldmVudHMuY29uY2F0KG1lbW9yeUV2ZW50cyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBla3ZzW19zZXNzaW9uSWRdID0gW10uY29uY2F0KG1lbW9yeUV2ZW50cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGVrdnM7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZXZlbnRzTWFwKSB7XG5cdCAgICB2YXIgbGVuID0gMDtcblx0ICAgIGZvciAodmFyIGtleSBpbiBldmVudHNNYXApIHtcblx0ICAgICAgaWYgKGlzQXJyYXkoZXZlbnRzTWFwW2tleV0pKSB7XG5cdCAgICAgICAgbGVuICs9IGV2ZW50c01hcFtrZXldLmxlbmd0aDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGxlbjtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgaWYgKCFldmVudCkgcmV0dXJuO1xuXHQgICAgICAgIGlmIChfc2Vzc2lvbklkKSB7XG5cdCAgICAgICAgICBfbWVtb3J5RXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuXHQgICAgICAgICAgXG5cdCAgICAgICAgICBpZiAoX21lbW9yeUV2ZW50cy5sZW5ndGggPiBhcGx1c1N0YXRpYy5NRU1PUllfTUFYX0NPVU5UKSB7XG5cdCAgICAgICAgICAgIF9jYWNoZUV2ZW50cyhfc2Vzc2lvbklkKTtcblx0ICAgICAgICAgICAgX21lbW9yeUV2ZW50cy5sZW5ndGggPSAwO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1bG9nKCkudygnc2Vzc2lvbiBpZCBpcyBudWxsOiAnLCBfc2Vzc2lvbklkKTtcblx0ICAgICAgICAgIFxuXHQgICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBzZXRTZXNzaW9uSWQ6IGZ1bmN0aW9uIChzZXNzaW9uSWQpIHtcblx0ICAgICAgICBfc2Vzc2lvbklkID0gc2Vzc2lvbklkO1xuXHQgICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICB0aGlzLmFkZEV2ZW50KF9ub1Nlc3Npb25FdmVudHNbaV0pO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBzZXRTdGFydElkOiBmdW5jdGlvbihzdGFydElkKSB7XG5cdCAgICAgICAgX3N0YXJ0SWQgPSBzdGFydElkO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgZ2V0U3RhcnRJZDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIF9zdGFydElkO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgZ2V0RWt2czogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG5cdCAgICAgICAgXG5cdCAgICAgICAgaWYgKF9tZW1vcnlFdmVudHMgJiYgX21lbW9yeUV2ZW50cy5sZW5ndGgpIHtcblx0ICAgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZWt2cztcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIC8vIOi/lOWbnuW9k+WJjWVrdnPlhoXnmoTml6Xlv5fmnaHmlbBcblx0ICAgICAgZ2V0RWt2c0xlbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUykgfHwge307XG5cdCAgICAgICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF0gfHwgW107XG5cdCAgICAgICAgdmFyIG1lbW9yeUV2ZW50c0xlbiA9IF9tZW1vcnlFdmVudHMgPyBfbWVtb3J5RXZlbnRzLmxlbmd0aCA6IDA7XG5cdCAgICAgICAgcmV0dXJuIGV2ZW50cy5sZW5ndGggKyBtZW1vcnlFdmVudHNMZW47XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNhY2hlKCkucmVtb3ZlKGFwbHVzU3RhdGljLkVLVlMpO1xuXHQgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcblx0ICAgICAgICBfbm9TZXNzaW9uRXZlbnRzLmxlbmd0aCA9IDA7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFfaW5zdGFuY2UpIHtcblx0ICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9pbnN0YW5jZTtcblx0ICB9O1xuXHR9KSgpO1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkb23mk43kvZzlt6XlhbfnsbvvvIzov5nkuKrln7rnoYDlt6XlhbfnsbvkvJrooqvlhbbku5blt6XlhbfnsbvlvJXnlKjvvIzmlYXkuKXnpoHlnKjov5nph4zlho3lvJXnlKjlhbbku5bmqKHlnZfku6XlhY3lh7rnjrDpl67pophcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDIxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGJ1aWxkQm9keSA9IF9fd2VicGFja19yZXF1aXJlX18oMjMpO1xuXHR2YXIgcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpO1xuXHR2YXIgUXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdC8vIHZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpeyBcblx0ICB2YXIgX3JlcUtleSA9IG51bGw7XG5cdCAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG5cdCAgdmFyIF9mYWlsUmVxdWVzdHMgPSBbXTtcblx0ICAvLyDljp/mnaXnmoRhcGx1c1N0YXRpYy5NQVhfUVVFVUVfQ09VTlTpmZDliLbkuoZfcXVldWXnmoTplb/luqbvvIzlnKjlrp7pmYXlnLrmma/kuK3ml6DnlKhcblx0ICB2YXIgX3F1ZXVlID0gbmV3IFF1ZXVlKCk7XG5cdCAgdmFyIF9mYWlsZWRRdWV1ZT0gbmV3IFF1ZXVlKCk7XG5cdCAgZnVuY3Rpb24gX2VucXVldWVSZXF1ZXN0KGRhdGFUeXBlLCBvcHRpb25zLCBjYikge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdCAgICB2YXIgZGF0YSA9IGJ1aWxkQm9keShkYXRhVHlwZSk7XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICB2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuXHQgICAgICBkYXRhLmhlYWRlciA9IHV0aWxEYXNoLmFzc2lnbihkYXRhLmhlYWRlciwgSGVhZGVyLmdldE5ldEluZm8oY2xpZW50KSk7XG5cdCAgICAgIGRhdGEubm9DYWNoZSA9IG9wdGlvbnMubm9DYWNoZTtcblx0ICAgICAgX3F1ZXVlLmVucXVldWUoZGF0YSk7XG5cdCAgICB9XG5cdCAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuXHQgIH1cblx0ICBmdW5jdGlvbiBfc2VuZFF1ZXVlKGtleSwgY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICAgIHZhciBpc05SID0ga2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcblx0ICAgIHZhciBzZW5kUXVldWUgPSBpc05SID8gX3F1ZXVlIDogX2ZhaWxlZFF1ZXVlO1xuXHQgICAgLy8g5L2/55SoZGVxdWV1ZeS7o+abv2Zyb2505pa55rOV77yMZGVxdWV1ZeWxnuS6juWHuumYn++8jOmBv+WFjeS6humYn+WIl+acquabtOaWsOW4puadpeeahOmHjeWkjeS4iuaKpVxuXHQgICAgdmFyIGRhdGEgPSBzZW5kUXVldWUuZGVxdWV1ZSgpO1xuXHQgICAgdmFyIHN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIF9xdWV1ZS5kZXF1ZXVlKCk7XG5cdCAgICAgIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBmYWlsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyDlj5HpgIHlpLHotKXmlL7lhaXlpLHotKXpmJ/liJfvvIznrYnlvoXkuIvkuIDmrKHlj5HpgIHml7bmnLpcblx0ICAgICAgLy8g5Zug5Li6ZGF0YeS9v+eUqOWHuumYn+WIl+aWueazle+8jOaJgOS7pV9xdWV1ZeW3suabtOaWsO+8jOmAmui/h2l0ZW3lj5bliLDnmoRkYXRh5LiN5piv5b2T5YmN5Y+R6YCB55qEZGF0YTtcblx0ICAgICAgZGF0YSAmJiAoIWRhdGEubm9DYWNoZSkgJiYgX2ZhaWxSZXF1ZXN0cy5wdXNoKGRhdGEpO1xuXHQgICAgICBfc2VuZFF1ZXVlKGtleSwgY29tcGxldGVkQ2FsbGJhY2spO1xuXHQgICAgfTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIHJlcXVlc3QoZGF0YSwgc3VjY2VzcywgZmFpbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpO1xuXHQgICAgICBjb21wbGV0ZWRDYWxsYmFjaygpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX3Byb2Nlc3NGYWlsUmVxdWVzdHMoKSB7XG5cdCAgICAvLyDlj5HpgIHlrozmiJDlkI7lsIblpLHotKXnmoTor7fmsYLmt7vliqDliLDlpLHotKXpmJ/liJfkuK1cblx0ICAgIF9mYWlsUmVxdWVzdHMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICBfZmFpbGVkUXVldWUuZW5xdWV1ZShpdGVtKTtcblx0ICAgIH0pO1xuXHQgICAgX2ZhaWxSZXF1ZXN0cy5sZW5ndGggPSAwO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gX3N0YXJ0U2VuZChrZXksIGNvbXBsZXRlZENhbGxiYWNrKSB7XG5cdCAgICAvLyDlnKh0YXJvMXjjgIF0YXJvMnjmoYbmnrbkuK3vvIzlv4XpobvpgJrov4flj5jph4/lo7DmmI7nmoTmlrnlvI/kvKDlhaXvvIzlkKbliJlfc2VuZFF1ZXVl6Zi75aGe77yM5Zue6LCD5peg5rOV6YeN572uX3J1bm5pbmfvvIzlr7zoh7Tml6Xlv5flj5HpgIHkuI3lh7rvvJvljp/lm6DkuI3mmI5cblx0ICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaXNGdW5jdGlvbihjb21wbGV0ZWRDYWxsYmFjaykgJiYgY29tcGxldGVkQ2FsbGJhY2soKTtcblx0ICAgIH07XG5cdCAgICBfc2VuZFF1ZXVlKGtleSwgY2IpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gUmVxdWVzdFF1ZXVlKCkge1xuXHQgICAgdGhpcy5zZW5kID0gZnVuY3Rpb24gKGRhdGFUeXBlLCBvcHRpb25zLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuXHQgICAgICBpZiAoZGF0YVR5cGUpIHtcblx0ICAgICAgICB0aGlzLmFkZChkYXRhVHlwZSwgb3B0aW9ucywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgX3N0YXJ0U2VuZChfcmVxS2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgX3N0YXJ0U2VuZChfcmVxS2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5hZGQgPSBmdW5jdGlvbiAoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgaWYgKCF1dGlsLmNoZWNrT3BlbmlkKGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIF9lbnF1ZXVlUmVxdWVzdChkYXRhVHlwZSwgb3B0aW9ucywgY2IpO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpc05SID0gX3JlcUtleSA9PT0gYXBsdXNTdGF0aWMuUkVRVUVTVFM7XG5cdCAgICAgIHZhciBsb2FkUXVldWUgPSBpc05SID8gX3F1ZXVlIDogX2ZhaWxlZFF1ZXVlO1xuXHQgICAgICB2YXIgaXRlbXMgPSBjYWNoZSgpLmdldChfcmVxS2V5KTtcblx0ICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgIGxvYWRRdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNhY2hlKCkucmVtb3ZlKF9yZXFLZXkpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyDlvZPliY3lj6rmnInlpLHotKXpmJ/liJfosIPnlKhzYXZl5pa55rOVXG5cdCAgICB0aGlzLnNhdmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBjYWNoZWQgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpIHx8IFtdO1xuXHQgICAgICB2YXIgbmV3Q2FjaGUgPSBjYWNoZWQuY29uY2F0KF9mYWlsZWRRdWV1ZS5pdGVtcygpKTtcblx0ICAgICAgaWYobmV3Q2FjaGUgJiYgbmV3Q2FjaGUubGVuZ3RoKSB7XG5cdCAgICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTLCBuZXdDYWNoZSk7XG5cdCAgICAgIH0gXG5cdCAgICAgIF9mYWlsZWRRdWV1ZS5jbGVhcigpOyAvLyDkuIDlrpropoHlhYjkv53lrZjlho3muIXnqbrvvIzlkKbliJnkv53lrZjnmoTmsLjov5zmmK/nqbrmlbDmja5cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gKHJlcUtleSkge1xuXHQgICAgX3JlcUtleSA9IHJlcUtleTtcblx0ICAgIGlmICghX2luc3RhbmNlKSB7XG5cdCAgICAgIF9pbnN0YW5jZSA9IG5ldyBSZXF1ZXN0UXVldWUoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfaW5zdGFuY2U7XG5cdCAgfTtcblx0fSkoKTtcblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0ZXhwb3J0cy5nZXROZXRJbmZvID0gZnVuY3Rpb24oY2xpZW50KXtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgdmFyIGFjY2VzcyA9IGNsaWVudC5uZXR3b3JrVHlwZTtcblx0ICBpZiAoYWNjZXNzID09PSAnbm9uZScpIHtcblx0ICAgIGFjY2VzcyA9ICd1bmtub3duJztcblx0ICB9XG5cdFxuXHQgIGFjY2VzcyA9IGFjY2VzcyA/IGFjY2Vzcy50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgc3dpdGNoIChhY2Nlc3MpIHtcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfNEc6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnTFRFJztcblx0ICAgIHJlc3VsdC5hY2Nlc3MgPSAnNEcnO1xuXHQgICAgYnJlYWs7XG5cdCAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzNHOlxuXHQgICAgcmVzdWx0LmFjY2Vzc19zdWJ0eXBlID0gJ0NETUEnO1xuXHQgICAgcmVzdWx0LmFjY2VzcyA9ICczRyc7XG5cdCAgICBicmVhaztcblx0ICBjYXNlIHV0aWxzLkFjY2Vzc1R5cGUuTU9CSUxFX05FVFdPUktfMkc6XG5cdCAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnR1JQUyc7XG5cdCAgICByZXN1bHQuYWNjZXNzID0gJzJHJztcblx0ICAgIGJyZWFrO1xuXHQgIGRlZmF1bHQ6XG5cdCAgICByZXN1bHQuYWNjZXNzID0gYWNjZXNzO1xuXHQgICAgZGVsZXRlIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZTtcblx0ICAgIGJyZWFrO1xuXHQgIH07XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEhlYWRlckluZm8gPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgaGVhZGVyID0ge307XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHRcblx0ICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHQgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuXHRcblx0ICB2YXIgZGF0YSA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgIGlmIChkYXRhKSB7XG5cdCAgICBoZWFkZXIuaW1wcmludCA9IGRhdGE7XG5cdCAgfVxuXHRcblx0ICBoZWFkZXIuZGV2aWNlX3R5cGUgPSAnUGhvbmUnO1xuXHQgIGhlYWRlci5zZGtfdmVyc2lvbiA9IGdsb2JhbENvbmZpZy5sdmVyO1xuXHQgIGhlYWRlci5hcHBrZXkgPSB1dGlsLmdldEFwcEtleSgpO1xuXHQgIGhlYWRlci5kZXZpY2VfaW5mbyA9ICcnO1xuXHQgIGhlYWRlci5hcHBpZCA9IGNsaWVudC5hcHBJZDtcblx0ICBoZWFkZXIuYXBwX2VudiA9IGNsaWVudC5hcHBFbnY7XG5cdCAgaGVhZGVyLmFwcF92ZXJzaW9uID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwcFZlcnNpb24nKSB8fCAnZGV2dG9vbHMnO1xuXHRcblx0ICB2YXIgZ2xvYmFsX2FyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTtcblx0ICBpZiAoZ2xvYmFsX2FyZ3MgJiYgZ2xvYmFsX2FyZ3MuZGVidWdJZCkge1xuXHQgICAgaGVhZGVyLm1pbmlhcHBEZWJ1Z0lkID0gZ2xvYmFsX2FyZ3MuZGVidWdJZDtcblx0ICB9IGVsc2UgaWYgKGNhY2hlKCkuZ2V0KCdtaW5pYXBwRGVidWdJZCcpKSB7XG5cdCAgICBoZWFkZXIubWluaWFwcERlYnVnSWQgPSBjYWNoZSgpLmdldCgnbWluaWFwcERlYnVnSWQnKTtcblx0ICB9XG5cdFxuXHQgIHZhciBzeXN0ZW1JbmZvID0gY2xpZW50IHx8IHt9O1xuXHQgIHN5c3RlbUluZm8uc2FmZUFyZWEgPSBzeXN0ZW1JbmZvLnNhZmVBcmVhIHx8IHt9O1xuXHRcblx0ICB2YXIgbW9kZWwgPSBzeXN0ZW1JbmZvLm1vZGVsIHx8ICcnO1xuXHQgIHZhciBwbGF0Zm9ybSA9IHN5c3RlbUluZm8ucGxhdGZvcm0gfHwgJyc7XG5cdCAgdmFyIGJyYW5kID0gc3lzdGVtSW5mby5icmFuZCB8fCAnJztcblx0ICB2YXIgYnJhbmRMID0gYnJhbmQudG9Mb3dlckNhc2UoKTtcblx0XG5cdCAgaGVhZGVyLnNka190eXBlID0gbWluaS5nZXRTZGtUeXBlKCk7XG5cdCAgaGVhZGVyLnBsYXRmb3JtID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcblx0ICBoZWFkZXIucGxhdGZvcm1fc2RrX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLlNES1ZlcnNpb247XG5cdCAgaGVhZGVyLnBsYXRmb3JtX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLnBsYXRmb3JtVmVyc2lvbjtcblx0ICAgIFxuXHQgIHZhciB3ID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbldpZHRoICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcblx0ICB2YXIgaCA9IE1hdGgucm91bmQoc3lzdGVtSW5mby5zY3JlZW5IZWlnaHQgKiBzeXN0ZW1JbmZvLnBpeGVsUmF0aW8pO1xuXHQgIGhlYWRlci5yZXNvbHV0aW9uID0gdyA+IGggPyB3ICsgJyonICsgaCA6IGggKyAnKicgKyB3O1xuXHRcblx0ICBoZWFkZXIucGl4ZWxfcmF0aW8gPSBzeXN0ZW1JbmZvLnBpeGVsUmF0aW87XG5cdCAgaGVhZGVyLm9zID0gcGxhdGZvcm07XG5cdCAgaGVhZGVyLmZvbnRfc2l6ZV9zZXR0aW5nID0gc3lzdGVtSW5mby5mb250U2l6ZVNldHRpbmc7XG5cdCAgaGVhZGVyLmRldmljZV9tb2RlbCA9IG1vZGVsOyAvLyDorr7lpIflnovlj7dcblx0ICBoZWFkZXIuZGV2aWNlX2JyYW5kID0gYnJhbmQ7IC8vIOiuvuWkh+eUn+S6p+WVhlxuXHQgIC8vIF9oZWFkZXIuY2hhbm5lbCA9IGJyYW5kTDsgLy8g6L+Z6YeM5rig6YGT5pqC5pe25YWI55SoIOeUn+S6p+WVhueahOWQjeWtl1xuXHQgIGhlYWRlci5kZXZpY2VfbWFudWZhY3R1cmVyID0gYnJhbmRMO1xuXHQgIGhlYWRlci5kZXZpY2VfbWFudWlkID0gbW9kZWw7IC8vIOiuvuWkh+WTgeeJjC/lnovlj7dcblx0ICBoZWFkZXIuZGV2aWNlX25hbWUgPSBtb2RlbDsgLy8g5YaF6YOo5Lqn5ZOB5Luj5Y+3XG5cdCAgaGVhZGVyLm9zX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLm9zX3ZlcnNpb247IC8vIG9z54mI5pys5Y+3XG5cdCAgaGVhZGVyLmxhbmd1YWdlID0gc3lzdGVtSW5mby5sYW5ndWFnZTsgLy8g6K+t6KiA77yMemhcblx0XG5cdCAgdmFyIG5ldEluZm8gPSB0aGlzLmdldE5ldEluZm8oY2xpZW50KTtcblx0ICBoZWFkZXIuYWNjZXNzID0gbmV0SW5mby5hY2Nlc3M7XG5cdCAgaWYgKG5ldEluZm8uYWNjZXNzX3N1YnR5cGUpIHtcblx0ICAgIGhlYWRlci5hY2Nlc3Nfc3VidHlwZSA9IG5ldEluZm8uYWNjZXNzX3N1YnR5cGU7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gaGVhZGVyO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHNlc3Npb25NYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG5cdHZhciBldmVudE1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGFUeXBlKSB7XG5cdCAgdmFyIGRhdGEgPSBudWxsO1xuXHQgIHN3aXRjaCAoZGF0YVR5cGUpIHtcblx0ICBjYXNlIHV0aWxzLkRhdGFUeXBlLkhBTEZfU0VTU0lPTjpcblx0ICAgIGRhdGEgPSBfYnVpbGRIYWxmU2Vzc2lvbigpO1xuXHQgICAgYnJlYWs7XG5cdCAgY2FzZSB1dGlscy5EYXRhVHlwZS5DTE9TRV9TRVNTSU9OOlxuXHQgICAgZGF0YSA9IF9idWlsZENsb3NlU2Vzc2lvbigpO1xuXHQgICAgYnJlYWs7XG5cdCAgY2FzZSB1dGlscy5EYXRhVHlwZS5FS1Y6XG5cdCAgICBkYXRhID0gX2J1aWxkRWt2KCk7XG5cdCAgICBicmVhaztcblx0ICBkZWZhdWx0OlxuXHQgICAgYnJlYWs7XG5cdCAgfVxuXHQgIHJldHVybiBkYXRhO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2J1aWxkSGFsZlNlc3Npb24oKSB7XG5cdCAgdmFyIGRhdGEgPSBudWxsO1xuXHQgIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG5cdCAgaWYgKHNlc3Npb24pIHtcblx0ICAgIGRhdGEgPSB7XG5cdCAgICAgIGhlYWRlcjoge1xuXHQgICAgICAgIHN0OiAnMSdcblx0ICAgICAgfSxcblx0ICAgICAgYW5hbHl0aWNzOiB7XG5cdCAgICAgICAgc2Vzc2lvbnM6IFtzZXNzaW9uXVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfYnVpbGRDbG9zZVNlc3Npb24oKSB7XG5cdCAgdmFyIGRhdGEgPSBudWxsO1xuXHRcblx0ICB2YXIgYW5hbHl0aWNzID0ge307XG5cdFxuXHQgIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG5cdCAgaWYgKHNlc3Npb24pIHtcblx0ICAgIGFuYWx5dGljcy5zZXNzaW9ucyA9IFtzZXNzaW9uXTtcblx0ICB9XG5cdFxuXHQgIHZhciBla3ZzID0gZXZlbnRNYW5hZ2VyKCkuZ2V0RWt2cygpO1xuXHQgIGlmIChla3ZzKSB7XG5cdCAgICBhbmFseXRpY3MuZWt2cyA9IGNsb25lRGVlcChla3ZzKTtcblx0ICAgIGV2ZW50TWFuYWdlcigpLmNsZWFyKCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoYW5hbHl0aWNzLnNlc3Npb25zIHx8IGFuYWx5dGljcy5la3ZzKSB7XG5cdCAgICBkYXRhID0ge1xuXHQgICAgICBhbmFseXRpY3M6IGFuYWx5dGljc1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBkYXRhO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gX2J1aWxkRWt2KCkge1xuXHQgIHZhciBkYXRhID0gbnVsbDtcblx0XG5cdCAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG5cdCAgaWYgKGVrdnMpIHtcblx0ICAgIGRhdGEgPSB7XG5cdCAgICAgIGFuYWx5dGljczoge1xuXHQgICAgICAgIGVrdnM6IGNsb25lRGVlcChla3ZzKVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcblx0ICB9XG5cdCAgcmV0dXJuIGRhdGE7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAyNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIEhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjIpO1xuXHR2YXIgbWFuZ2xlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdHZhciBpbXByaW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIGJhc2U2NCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxQZXJmb3JtYW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpO1xuXHR2YXIgY2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0dmFyIHV0aWxSZW1vdGVDZmcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI5KTtcblx0dmFyIGV2ZW50TWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXHR2YXIgYXBsdXNVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRmdW5jdGlvbiBnZXRVcmwoKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciByaG9zdCA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG5cdFxuXHQgIGlmICghYXBsdXNVdGlsLmNoZWNrRG9tYWluKHJob3N0KSkge1xuXHQgICAgcmV0dXJuICcnO1xuXHQgIH1cblx0XG5cdCAgdmFyIG1pbmlMb2cgPSBtaW5pLmdldExvZ0RvbWFpbigpO1xuXHQgIGlmICghbWluaUxvZykge1xuXHQgICAgdWxvZygpLnRpcF93KCdjdXJyZW50IG1pbmlhcHAgZnJhbWV3b3JrIGlzIG5vdCBzdXBwb3J0ZWQhIScpO1xuXHQgICAgcmV0dXJuICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cdCAgfSAgXG5cdCAgcmV0dXJuIGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3QpICsgbWluaUxvZztcblx0fTtcblx0XG5cdHZhciBNQVhfUkVRVUVTVF9USU1FT1VUID0gNTAwMDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcmVxdWVzdChkYXRhLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWxDYWxsYmFjaywgY29tcGxldGVkQ2FsbGJhY2spIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIHBfaGVhZGVyID0gSGVhZGVyLmdldEhlYWRlckluZm8oKTtcblx0ICB0cnkgeyAgXG5cdCAgICBpZiAobWluaS5nZXRQbGF0Zm9ybVR5cGUoKSA9PT0gJ215JyB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAndGFvYmFvJykge1xuXHQgICAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ2FsaXBheV9pZCc7XG5cdCAgICAgIHBfaGVhZGVyWydpZF90cmFja2luZyddID0ge1xuXHQgICAgICAgIGFsaXBheV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCAnJyxcblx0ICAgICAgICB1bmlvbmlkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8ICcnLFxuXHQgICAgICAgIHVzZXJJZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpIHx8ICcnLFxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcF9oZWFkZXJbJ2lkX3R5cGUnXSA9ICdvcGVuaWQnO1xuXHQgICAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcblx0ICAgICAgICBvcGVuaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCkgfHwgJycsXG5cdCAgICAgICAgdW5pb25pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCAnJyxcblx0ICAgICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICBcblx0ICAgIGlmIChpbXByaW50TWFuYWdlci5nZXQoKSkge1xuXHQgICAgICBwX2hlYWRlclthcGx1c1N0YXRpYy5JTVBSSU5UXSA9IGltcHJpbnRNYW5hZ2VyLmdldCgpO1xuXHQgICAgfVxuXHQgIFxuXHQgICAgaWYgKGRhdGEuYW5hbHl0aWNzKSB7XG5cdCAgICAgIHZhciB1c2VySWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCk7XG5cdCAgICAgIHZhciB1c2VyX25pY2sgPSBhcGx1cy5nZXRNZXRhSW5mbygnX3VzZXJfbmljaycpO1xuXHQgICAgICBkYXRhLmFuYWx5dGljcy5hY3RpdmVfdXNlciA9IHtcblx0ICAgICAgICBwdWlkOiB1c2VySWQsXG5cdCAgICAgICAgcHJvdmlkZXI6IHVzZXJfbmlja1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIFxuXHQgICAgZGF0YS5oZWFkZXIgPSB1dGlscy5hc3NpZ24ocF9oZWFkZXIsIGRhdGEuaGVhZGVyLCB7XG5cdCAgICAgIHRzOiBEYXRlLm5vdygpLFxuXHQgICAgICB0cmFjZUlkOiB1dGlscy5nZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKSArIHV0aWxzLmdldFJhbmRvbVN0cig5KSxcblx0ICAgICAgc3RhcnRfaWQ6IGV2ZW50TWFuYWdlcigpLmdldFN0YXJ0SWQoKVxuXHQgICAgfSk7XG5cdCAgICB2YXIgbWFuZ2xlRGF0YSA9IG1hbmdsZShkYXRhKTtcblx0ICAgIHZhciByZXF1ZXN0RGF0YSA9IGpzb25VdGlsLnN0cmluZ2Z5KG1hbmdsZURhdGEpO1xuXHQgICAgdmFyIHVybCA9IGdldFVybCgpO1xuXHQgICAgdmFyIGNvbmZpZyA9IHtcblx0ICAgICAgdXJsOiB1cmwsXG5cdCAgICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgICBkYXRhOiBiYXNlNjQuZW5jb2RlKHJlcXVlc3REYXRhKSxcblx0ICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3ApIHtcblx0ICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IHJlc3AuY29kZSB8fCByZXNwLnN0YXR1cyB8fCByZXNwLnN0YXR1c0NvZGU7XG5cdCAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT09IDIwMCB8fCBzdGF0dXNDb2RlID09PSA0MTMpIHtcblx0ICAgICAgICAgIHVsb2coKS5pKCdkYXRhIHNlbmQgc3VjY2VzczonLCBkYXRhLCByZXF1ZXN0RGF0YSk7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBpZiAocmVzcC5wcm9maWxlKSB7XG5cdCAgICAgICAgICAgICAgdXRpbFBlcmZvcm1hbmNlLnB1c2goe2VuZDogcmVzcC5wcm9maWxlLnJlc3BvbnNlRW5kLCBzdGFydDogcmVzcC5wcm9maWxlLnJlcXVlc3RTdGFydH0pO1xuXHQgICAgICAgICAgICAgIHV0aWxQZXJmb3JtYW5jZS5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQoKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdjdXJyZW50IG1pbmlhcHAgbm90IHN1cHBvcnQgcHJvZmlsZSBBUEknKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8v5Zyo5q2k5aSE5bCGaW1wcmludOWGheWuueWKoOWFpeWIsOacrOWcsOe8k+WtmOS4rVxuXHQgICAgICAgICAgc2F2ZUltcHJpbnQoKHJlc3AuZGF0YSB8fCB7fSkpO1xuXHQgICAgICAgICAgaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spICYmIHN1Y2Nlc3NDYWxsYmFjayhyZXNwKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdWxvZygpLncoJ2RhdGEgc2VuZCBmYWlsZWQ6JywgcmVxdWVzdERhdGEpO1xuXHQgICAgICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0ICAgICAgZmFpbDogZnVuY3Rpb24gKGlzVGltZW91dCkge1xuXHQgICAgICAgIHVsb2coKS53KCB0cnVlID8gJ3RpbWVvdXQ6ICcgOiAnZmFpbGVkOiAnLCByZXF1ZXN0RGF0YSk7XG5cdCAgICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuXHQgICAgICB9LFxuXHQgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHRcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcblx0ICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHNyY1N1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cdCAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG5cdCAgdmFyIGlzVGltZW91dCA9IGZhbHNlO1xuXHQgIHZhciBzdCA9IG51bGw7XG5cdFxuXHQgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uIChyZXNwKSB7XG5cdCAgICBpZiAoIWlzVGltZW91dCkge1xuXHQgICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuXHQgICAgICBpc0Z1bmN0aW9uKHNyY1N1Y2Nlc3MpICYmIHNyY1N1Y2Nlc3MocmVzcCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgb3B0aW9ucy5mYWlsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKCFpc1RpbWVvdXQpIHtcblx0ICAgICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcblx0ICAgICAgaXNGdW5jdGlvbihzcmNGYWlsKSAmJiBzcmNGYWlsKGZhbHNlKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHRyeSB7XG5cdCAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB1bG9nKCkudygncmVxdWVzdCBzZW5kIGZhaWxlZCwgZXJyIG1zZzogJywgZSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBzdCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgc3QgJiYgY2xlYXJUaW1lb3V0KHN0KTtcblx0ICAgIGlzVGltZW91dCA9IHRydWU7XG5cdFxuXHQgICAgaXNGdW5jdGlvbihzcmNGYWlsKSAmJiBzcmNGYWlsKGlzVGltZW91dCk7XG5cdCAgfSwgb3B0aW9ucy50aW1lb3V0IHx8IE1BWF9SRVFVRVNUX1RJTUVPVVQpO1xuXHR9XG5cdFxuXHQvLyDmnI3liqHnq6/kuIvlj5Hlj5HpgIHnrZbnlaVcblx0ZnVuY3Rpb24gc2F2ZUltcHJpbnQoaW1wcmludCkge1xuXHQgIHZhciBsb2NhbEltcHYgPSBjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfSU1QUklOVF9WRVJTSU9OKTtcblx0ICBpZiAoaW1wcmludCkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICBpZiAoaW1wcmludC5pbXByaW50VmVyc2lvbiAmJiBpbXByaW50LmltcHJpbnRWZXJzaW9uICE9PSBsb2NhbEltcHYpIHtcblx0ICAgICAgdmFyIHJlbW90ZUltcHYgPSBpbXByaW50LmltcHJpbnRWZXJzaW9uO1xuXHQgICAgICBjYWNoZSgpLnNldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfSU1QUklOVF9WRVJTSU9OLCByZW1vdGVJbXB2KTtcblx0ICAgICAgdmFyIHRyYWNrRG9tYWluID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcblx0XG5cdCAgICAgIHZhciB1cmwgPSBhcGx1c1V0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSAgKyByZW1vdGVJbXB2O1xuXHQgICAgICBhcGx1cy5yZXF1ZXN0UmVtb3RlQ29uZmlnKFxuXHQgICAgICAgIHVybCwgXG5cdCAgICAgICAgZnVuY3Rpb24ocmVzcCl7XG5cdCAgICAgICAgICBpZiAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhKSB7XG5cdCAgICAgICAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKHJlc3AuZGF0YS5kYXRhKTtcblx0ICAgICAgICAgICAgY2FjaGUoKS5zZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcsIHJlc3AuZGF0YS5kYXRhKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBcblx0ICAgICAgICBmdW5jdGlvbihlcnIpe1xuXHQgICAgICAgICAgdWxvZygpLncoJ3JlbW90ZSBjb25maWd1cmF0aW9uIHJlcXVlc3QgZmFpbGVkLCBlcnJtc2c6JywgZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgbHNSZW1vdGVDZmcgPSBjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG5cdCAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGxzUmVtb3RlQ2ZnKTtcblx0ICAgIH1cblx0ICB9IFxuXHR9XG5cdFxuXHRmdW5jdGlvbiBidWlsZEh0dHBIZWFkZXIoKSB7XG5cdCAgdmFyIGhlYWRlclR5cGUgPSBtaW5pLmdldFNka1R5cGUoKSArICcvanNvbic7XG5cdCAgdmFyIGlzTXkgPSBmYWxzZTtcblx0ICB0cnkge1xuXHQgICAgaWYgKG15KSB7XG5cdCAgICAgIGlzTXkgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSl7fTtcblx0XG5cdCAgaWYgKGlzTXkpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGhlYWRlcnM6IHtcblx0ICAgICAgICAnQ29udGVudC1UeXBlJzogaGVhZGVyVHlwZSxcblx0ICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGhlYWRlcjoge1xuXHQgICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuXHQgICAgICAgICdNc2ctVHlwZSc6IGhlYWRlclR5cGVcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdH1cblx0XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHR2YXIgYW5hbHl0aWNzTWFwID0ge1xuXHQgIHNlc3Npb25zOiAnc24nLFxuXHQgIC8vIHBhZ2VzOiAncCcsXG5cdCAgLy8gc2hhcmVzOiAnc3InLFxuXHQgIGVrdnM6ICdlJyxcblx0ICBhY3RpdmVfdXNlcjogJ2FjdGl2ZV91c2VyJ1xuXHR9O1xuXHRcblx0dmFyIGhlYWRlck1hcCA9IHtcblx0ICBzZGtfdHlwZTogJ3NkdCcsXG5cdCAgYWNjZXNzOiAnYWMnLFxuXHQgIGFjY2Vzc19zdWJ0eXBlOiAnYWNzJyxcblx0ICBkZXZpY2VfbW9kZWw6ICdkbScsXG5cdCAgbGFuZ3VhZ2U6ICdsYW5nJyxcblx0ICBkZXZpY2VfdHlwZTogJ2R0Jyxcblx0ICBkZXZpY2VfbWFudWZhY3R1cmVyOiAnZG1mJyxcblx0ICBkZXZpY2VfbmFtZTogJ2RuJyxcblx0ICBwbGF0Zm9ybV92ZXJzaW9uOiAncHYnLFxuXHQgIGlkX3R5cGU6ICdpdCcsXG5cdCAgZm9udF9zaXplX3NldHRpbmc6ICdmc3MnLFxuXHQgIG9zX3ZlcnNpb246ICdvdicsXG5cdCAgZGV2aWNlX21hbnVpZDogJ2RpZCcsXG5cdCAgcGxhdGZvcm1fc2RrX3ZlcnNpb246ICdwc3YnLFxuXHQgIGRldmljZV9icmFuZDogJ2RiJyxcblx0ICBhcHBrZXk6ICdhaycsXG5cdCAgX2lkOiAnaWQnLFxuXHQgIGlkX3RyYWNraW5nOiAnaXRyJyxcblx0ICBpbXByaW50OiAnaW1wJyxcblx0ICBzZGtfdmVyc2lvbjogJ3N2Jyxcblx0ICByZXNvbHV0aW9uOiAncmwnLFxuXHQgIHRlc3RUb2tlbjogJ3R0bicsXG5cdCAgbWluaWFwcERlYnVnSWQ6ICdkaycsXG5cdCAgcGl4ZWxfcmF0aW86ICdwcicsXG5cdH07XG5cdFxuXHR2YXIgaWRNYXAgPSB7XG5cdCAgdXVpZDogJ3VkJyxcblx0ICB1bmlvbmlkOiAndW5kJyxcblx0ICBvcGVuaWQ6ICdvZCcsXG5cdCAgYW5vbnltb3VzaWQ6ICduZCcsXG5cdCAgYWxpcGF5X2lkOiAnYWQnLFxuXHQgIGRldmljZV9pZDogJ2RkJyxcblx0ICB1c2VyaWQ6ICdwdWlkJ1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkYXRhKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIGg6IF9tYW5nbGVIZWFkZXIoZGF0YS5oZWFkZXIsIGhlYWRlck1hcCksXG5cdCAgICBhOiBfbWFuZ2xlQW5hbHl0aWNzKGRhdGEuYW5hbHl0aWNzLCBhbmFseXRpY3NNYXApXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0gX21hbmdsZU9iaihoZWFkZXIsIG1hcCk7XG5cdFxuXHQgIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG5cdCAgICByZXN1bHRbbWFwLmlkX3RyYWNraW5nIHx8ICdpZF90cmFja2luZyddID0gX21hbmdsZU9iaihoZWFkZXIuaWRfdHJhY2tpbmcsIGlkTWFwKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBfbWFuZ2xlT2JqKG9iaiwgbWFwKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgIFxuXHQgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgIGlmIChtYXBba2V5XSkge1xuXHQgICAgICByZXN1bHRbbWFwW2tleV1dID0gb2JqW2tleV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHRba2V5XSA9IG9ialtrZXldO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIF9tYW5nbGVBbmFseXRpY3MoYW5hbHl0aWNzLCBtYXApIHtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdFxuXHQgIGlmIChhbmFseXRpY3MpIHtcblx0ICAgIGZvciAodmFyIHByb3AgaW4gYW5hbHl0aWNzKSB7XG5cdCAgICAgIGlmIChhbmFseXRpY3NbcHJvcF0pIHtcblx0ICAgICAgICByZXN1bHRbbWFwW3Byb3BdXSA9IGFuYWx5dGljc1twcm9wXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHR2YXIgYmFzZTY0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHRmdW5jdGlvbiBJbXByaW50TWFuYWdlcigpIHtcblx0ICB2YXIgX2ltcHJpbnQgPSAnJztcblx0ICB2YXIgdCA9IHRoaXM7XG5cdCAgLy8gdmFyIGltcHJpbnRWZXJzaW9uID0gXCJpbXByaW50VmVyc2lvblwiO1xuXHQgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGltcHJpbnQpIHtcblx0ICAgIGlmICh0eXBlb2YgaW1wcmludCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgX2ltcHJpbnQgPSBpbXByaW50O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgX2ltcHJpbnQgPSBiYXNlNjQuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGltcHJpbnQpKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaW1wcmludDtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIGpzb25VdGlsLnBhcnNlKGJhc2U2NC5kZWNvZGUoX2ltcHJpbnQpKTtcblx0ICB9O1xuXHQgIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciBpbXBvYmogPSB0LmdldEltcE9iaigpO1xuXHQgICAgcmV0dXJuIGltcG9iaiA/IGltcG9ialtuYW1lXSB8fCBcIlwiIDogXCJcIjtcblx0ICB9O1xuXHRcblx0ICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChfaW1wcmludCkge1xuXHQgICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5JTVBSSU5ULCBfaW1wcmludCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHR2YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaW1wcmludE1hbmFnZXI7XG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHR2YXIgYjY0Y2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cdHZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuXHQgIHZhciB0ID0ge307XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBiaW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB0W2Jpbi5jaGFyQXQoaSldID0gaTtcblx0ICByZXR1cm4gdDtcblx0fSkoYjY0Y2hhcnMpO1xuXHR2YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblx0dmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuXHQgIHZhciBjYztcblx0ICBpZiAoYy5sZW5ndGggPCAyKSB7XG5cdCAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcblx0ICAgIHJldHVybiBjYyA8IDEyOCA/IGMgOiBjYyA8IDIwNDggPyBmcm9tQ2hhckNvZGUoMTkyIHwgY2MgPj4+IDYpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpIDogZnJvbUNoYXJDb2RlKDIyNCB8IGNjID4+PiAxMiAmIDE1KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoMjQwIHwgY2MgPj4+IDE4ICYgNykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDEyICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiA2ICYgNjMpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjICYgNjMpO1xuXHQgIH1cblx0fTtcblx0dmFyIHJlX3V0b2IgPSAvW1xcdUQ4MDAtXFx1REJGRl1bXFx1REMwMC1cXHVERkZGRl18W15cXHgwMC1cXHg3Rl0vZztcblx0dmFyIHV0b2IgPSBmdW5jdGlvbiAodSkge1xuXHQgIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG5cdH07XG5cdHZhciBjYl9lbmNvZGUgPSBmdW5jdGlvbiAoY2NjKSB7XG5cdCAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG5cdCAgICBvcmQgPSBjY2MuY2hhckNvZGVBdCgwKSA8PCAxNiB8IChjY2MubGVuZ3RoID4gMSA/IGNjYy5jaGFyQ29kZUF0KDEpIDogMCkgPDwgOCB8IChjY2MubGVuZ3RoID4gMiA/IGNjYy5jaGFyQ29kZUF0KDIpIDogMCksXG5cdCAgICBjaGFycyA9IFtiNjRjaGFycy5jaGFyQXQob3JkID4+PiAxOCksIGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDEyICYgNjMpLCBwYWRsZW4gPj0gMiA/ICc9JyA6IGI2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDYgJiA2MyksIHBhZGxlbiA+PSAxID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCAmIDYzKV07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYnRvYSA9IGZ1bmN0aW9uIChiKSB7XG5cdCAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xuXHR9O1xuXHR2YXIgX2VuY29kZSA9IGZ1bmN0aW9uICh1KSB7XG5cdCAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG5cdH07XG5cdHZhciBlbmNvZGUgPSBmdW5jdGlvbiAodSwgdXJpc2FmZSkge1xuXHQgIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG5cdCAgICByZXR1cm4gbTAgPT0gJysnID8gJy0nIDogJ18nO1xuXHQgIH0pLnJlcGxhY2UoL1xcPS9nLCAnJyk7XG5cdH07XG5cdC8vIHZhciBlbmNvZGVVUkkgPSBmdW5jdGlvbiAodSkge1xuXHQvLyAgIHJldHVybiBlbmNvZGUodSwgdHJ1ZSk7XG5cdC8vIH07XG5cdHZhciByZV9idG91ID0gbmV3IFJlZ0V4cChbJ1vDgC3Dn11bwoAtwr9dJywgJ1vDoC3Dr11bwoAtwr9dezJ9JywgJ1vDsC3Dt11bwoAtwr9dezN9J10uam9pbignfCcpLCAnZycpO1xuXHR2YXIgY2JfYnRvdSA9IGZ1bmN0aW9uIChjY2NjKSB7XG5cdCAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuXHQgIGNhc2UgNDpcblx0ICAgIHZhciBjcCA9ICg3ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxOCB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMikpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgzKSwgb2Zmc2V0ID0gY3AgLSA2NTUzNjtcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcblx0ICBjYXNlIDM6XG5cdCAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgxNSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgMTIgfCAoNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpIDw8IDYgfCA2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSk7XG5cdCAgZGVmYXVsdDpcblx0ICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDMxICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCA2IHwgNjMgJiBjY2NjLmNoYXJDb2RlQXQoMSkpO1xuXHQgIH1cblx0fTtcblx0dmFyIGJ0b3UgPSBmdW5jdGlvbiAoYikge1xuXHQgIHJldHVybiBiLnJlcGxhY2UocmVfYnRvdSwgY2JfYnRvdSk7XG5cdH07XG5cdHZhciBjYl9kZWNvZGUgPSBmdW5jdGlvbiAoY2NjYykge1xuXHQgIHZhciBsZW4gPSBjY2NjLmxlbmd0aCxcblx0ICAgIHBhZGxlbiA9IGxlbiAlIDQsXG5cdCAgICBuID0gKGxlbiA+IDAgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMCldIDw8IDE4IDogMCkgfCAobGVuID4gMSA/IGI2NHRhYltjY2NjLmNoYXJBdCgxKV0gPDwgMTIgOiAwKSB8IChsZW4gPiAyID8gYjY0dGFiW2NjY2MuY2hhckF0KDIpXSA8PCA2IDogMCkgfCAobGVuID4gMyA/IGI2NHRhYltjY2NjLmNoYXJBdCgzKV0gOiAwKSxcblx0ICAgIGNoYXJzID0gW2Zyb21DaGFyQ29kZShuID4+PiAxNiksIGZyb21DaGFyQ29kZShuID4+PiA4ICYgMjU1KSwgZnJvbUNoYXJDb2RlKG4gJiAyNTUpXTtcblx0ICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG5cdCAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xuXHR9O1xuXHR2YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGEucmVwbGFjZSgvW1xcc1xcU117MSw0fS9nLCBjYl9kZWNvZGUpO1xuXHR9O1xuXHR2YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgcmV0dXJuIGJ0b3UoYXRvYihhKSk7XG5cdH07XG5cdHZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuXHQgIHJldHVybiBfZGVjb2RlKFN0cmluZyhhKS5yZXBsYWNlKC9bLV9dL2csIGZ1bmN0aW9uIChtMCkge1xuXHQgICAgcmV0dXJuIG0wID09ICctJyA/ICcrJyA6ICcvJztcblx0ICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuXHRleHBvcnRzLmRlY29kZSA9IGRlY29kZTtcblxuLyoqKi8gfSksXG4vKiAyOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxQZXJmb3JtYW5jZS5qc1xuXHQgKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG5cdCAqICAgICAgXG5cdCAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqICAgICAgXG5cdCAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBkdXJhdGlvbkFycmF5ID0gW107XG5cdGZ1bmN0aW9uIGdldE1ldHJpYygpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIGVudHJpZXMgPSBkdXJhdGlvbkFycmF5O1xuXHQgICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgICAgdmFyIG1heCA9IC1JbmZpbml0eSwgbWluID0gSW5maW5pdHksIHN1bSA9IDAsIGF2ZXJhZ2UgPSAwO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBpdGVtID0gZW50cmllc1tpXTtcblx0ICAgICAgaWYgKG1heCA8IGl0ZW0pIHtcblx0ICAgICAgICBtYXggPSBpdGVtO1xuXHQgICAgICB9IFxuXHQgICAgICBpZiAobWluID49IGl0ZW0pIHtcblx0ICAgICAgICBtaW4gPSBpdGVtO1xuXHQgICAgICB9XG5cdCAgICAgIHN1bSArPSBpdGVtO1xuXHQgICAgICByZXN1bHQucHVzaChpdGVtKTtcblx0ICAgIH1cblx0ICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuXHQgICAgICBhdmVyYWdlID0gc3VtIC8gcmVzdWx0Lmxlbmd0aDtcblx0ICAgICAgYXZlcmFnZSA9IE1hdGguZmxvb3IoYXZlcmFnZSAqIDEwMCkgLyAxMDA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBtYXg6IG1heCxcblx0ICAgICAgbWluOiBtaW4sXG5cdCAgICAgIGF2ZXJhZ2U6IGF2ZXJhZ2Vcblx0ICAgIH07XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICB9XG5cdH1cblx0ZXhwb3J0cy5nZXRNZXRyaWMgPSBnZXRNZXRyaWM7XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRyaWNXZWIoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBlbnRyaWVzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllcygpOyAgXG5cdCAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICB2YXIgd2ViRG9tYWlucyA9IFthcGx1c1N0YXRpYy5XRUJfRVZFTlRfU1VGRklYLCBhcGx1c1N0YXRpYy5XRUJfUENfUFZfU1VGRklYLCBhcGx1c1N0YXRpYy5XRUJfV0FQX1BWX1NVRkZJWF07XG5cdCAgICB2YXIgbWF4ID0gLUluZmluaXR5LCBtaW4gPSBJbmZpbml0eSwgc3VtID0gMCwgYXZlcmFnZSA9IDA7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIGl0ZW0gPSBlbnRyaWVzW2ldO1xuXHQgICAgICB2YXIgdHlwZU1hdGNoID0gWydiZWFjb24nLCAnb3RoZXInLCAnaW1nJ10uc29tZShmdW5jdGlvbih2KSB7XG5cdCAgICAgICAgcmV0dXJuIHYgPT09IGl0ZW0uaW5pdGlhdG9yVHlwZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIFxuXHQgICAgICB2YXIgZG9tYWluTWF0Y2ggPSB3ZWJEb21haW5zLnNvbWUoZnVuY3Rpb24odikge1xuXHQgICAgICAgIHJldHVybiBpdGVtLm5hbWUuaW5kZXhPZih2KSA+IC0xO1xuXHQgICAgICB9KTtcblx0ICBcblx0ICAgICAgaWYgKHR5cGVNYXRjaCAmJiBkb21haW5NYXRjaCkge1xuXHQgICAgICAgIHZhciBkdXJhdGlvbiA9IGl0ZW0uZHVyYXRpb247XG5cdCAgICAgICAgaWYgKG1heCA8IGR1cmF0aW9uKSB7XG5cdCAgICAgICAgICBtYXggPSBkdXJhdGlvbjtcblx0ICAgICAgICB9IFxuXHQgICAgICAgIGlmIChtaW4gPj0gZHVyYXRpb24pIHtcblx0ICAgICAgICAgIG1pbiA9IGR1cmF0aW9uO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzdW0gKz0gZHVyYXRpb247XG5cdCAgICAgICAgcmVzdWx0LnB1c2goZHVyYXRpb24pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuXHQgICAgICBhdmVyYWdlID0gc3VtIC8gcmVzdWx0Lmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbWF4OiBtYXgsXG5cdCAgICAgIG1pbjogbWluLFxuXHQgICAgICBhdmVyYWdlOiBhdmVyYWdlXG5cdCAgICB9O1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRNZXRyaWNXZWIgPSBnZXRNZXRyaWNXZWI7XG5cdFxuXHRleHBvcnRzLnB1c2ggPSBmdW5jdGlvbihpdGVtKSB7XG5cdCAgdmFyIGQgPSBpdGVtLmVuZCAtIGl0ZW0uc3RhcnQ7XG5cdCAgLy/pgJrov4d3eC5yZXF1ZXN05Y+R6LW355qE6ICX5pe26LaF6L+HIDMwMG1zIFxuXHQgIGlmICh0eXBlb2YgZCA9PT0gJ251bWJlcicgJiYgZCA+PSAzMDApIHtcblx0ICAgIGR1cmF0aW9uQXJyYXkucHVzaChkKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZHVyYXRpb25BcnJheSA9IFtdO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMubmVlZFNlbmRQZXJmb3JtYW5jZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8v6K+35rGC5bm25Y+R5pWw5LiN6LaF6L+HIDEwIOS4qiAgXG5cdCAgaWYgKGR1cmF0aW9uQXJyYXkubGVuZ3RoID49IDEwKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICBhcGx1cy5fcmVjb3JkKGFwbHVzU3RhdGljLlBFUkZPUk1BTkNFX1dBUklORywgJ09USEVSJywge30pO1xuXHQgICAgZHVyYXRpb25BcnJheSA9IFtdO1xuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbigpIHtcblx0ICBkdXJhdGlvbkFycmF5ID0gW107XG5cdH07XG5cbi8qKiovIH0pLFxuLyogMjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsUmVtb3RlQ2ZnLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0dmFyIGFwbHVzVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKTtcblx0dmFyIGNhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG5cdHZhciBBUExVU19SRU1PVEVfQ09ORklHID0gJ0FQTFVTX1JFTU9URV9DT05GSUcnO1xuXHRcblx0XG5cdC8qKlxuXHQgKiDlhajln4vngrnov5znqIvphY3nva4g6K+75Y+WXG5cdCovXG5cdFxuXHRmdW5jdGlvbiBnZXRMb2NhbFN0YXR1cyhrZXkpIHtcblx0ICB2YXIgbHNjZmc7XG5cdCAgaWYgKHV0aWxHb2xkbG9nLmlzV2ViKCkpIHtcblx0ICAgIGxzY2ZnID0gdXRpbERhdGEuZ2V0THNSZW1vdGVDZmcoQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGxzY2ZnID0gY2FjaGUoKS5nZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcpO1xuXHQgIH1cblx0ICByZXR1cm4gbHNjZmcgJiYgbHNjZmdba2V5XTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldEF1dG9FdmVudFN0YXR1cyhzdGF0dXMpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UX1JFTU9URSwgc3RhdHVzXVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRBdXRvRXZlbnRTdGF0dXMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgcmVzdWx0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFKSB8fCBnZXRMb2NhbFN0YXR1cygnY29kZWxlc3NDbGlja0V2ZW50U3RhdHVzJyk7XG5cdCAgXG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldERldmljZVN0YXR1cyhlbmFibGUpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0RFVklDRV9FTkFCTEUsIGVuYWJsZV1cblx0ICB9KTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0RGV2aWNlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgY29uc29sZS5sb2coJ3l6LS0tLS1jdXJyZW50RGV2aWNlRW5hYmxlJywgISFnZXRMb2NhbFN0YXR1cygnY3VycmVudERldmljZUVuYWJsZScpICk7XG5cdCAgY29uc29sZS5sb2coJ3l6LS0tLS1BUExVU19ERVZJQ0VfRU5BQkxFJywgISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFKSk7XG5cdCAgXG5cdCAgcmV0dXJuIGdldExvY2FsU3RhdHVzKCdjdXJyZW50RGV2aWNlRW5hYmxlJykgfHwgYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfREVWSUNFX0VOQUJMRSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRBdXRvUGFnZVN0YXR1cyhzdGF0dXMpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSwgc3RhdHVzXVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRBdXRvUGFnZVN0YXR1cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMnKTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gc2V0QXV0b1RyYWNrU3RhdHVzKHN0YXR1cykge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRURfUkVNT1RFLCBzdGF0dXNdXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5nZXRBdXRvVHJhY2tTdGF0dXMgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgcmVzdWx0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRURfUkVNT1RFKSB8fCBnZXRMb2NhbFN0YXR1cygnY29kZWxlc3NTdGF0dXMnKTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5lbmFibGVDZmcgPSBmdW5jdGlvbihjZmcpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGlmIChjZmcpIHtcblx0ICAgIC8vIEDmloflv4MgY29kZWxlc3NDb2xsZWN0b3JQYWdlU3RhdHVzID0gMSDlhbPpl63oh6rliqhwdlxuXHQgICAgc2V0QXV0b0V2ZW50U3RhdHVzKGNmZy5jb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMpO1xuXHQgICAgc2V0QXV0b1BhZ2VTdGF0dXMoY2ZnLmNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyk7XG5cdCAgICBzZXRBdXRvVHJhY2tTdGF0dXMoY2ZnLmNvZGVsZXNzU3RhdHVzKTtcblx0ICAgIHNldERldmljZVN0YXR1cyhjZmcuY3VycmVudERldmljZUVuYWJsZSk7XG5cdCAgICBcblx0ICAgIGlmIChjZmcuZXZlbnRTYW1wbGluZ1JhdGUgJiYgY2ZnLmV2ZW50U2FtcGxpbmdSYXRlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTLCBhcGx1c1V0aWwubWFwRXZlbnRTYW1wbGVSYXRlcyhjZmcuZXZlbnRTYW1wbGluZ1JhdGUpXVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50ICYmIGNmZy5jb2RlbGVzc0lnbm9yZUNvbXBvbmVudC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0NPTkZJR19SRU1PVEUsIGNmZy5jb2RlbGVzc0lnbm9yZUNvbXBvbmVudF1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0XG5cdFxuXHRcblxuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsVHJpbSA9IF9fd2VicGFja19yZXF1aXJlX18oMzEpO1xuXHR2YXIgdXRpbFN0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIganNvblV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0dmFyIGFwbHVzVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB7XG5cdCAgdHJ5VG9EZWNvZGVVUklDb21wb25lbnQ6IGZ1bmN0aW9uICh2YWwsIGRlZmF1bHRfdmFsKSB7XG5cdCAgICB2YXIgdiA9IGRlZmF1bHRfdmFsIHx8ICcnO1xuXHQgICAgaWYgKHZhbCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHYgPSBkZWNvZGVVUklDb21wb25lbnQodmFsKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdjtcblx0ICB9LFxuXHQgIFxuXHQgIC8qKlxuXHQgICAqIOWwhuW9ouWmgiBcInBhZ2VJZD0xMjM7IHNpdGVJZD00NTZcIiDnmoTlhoXlrrnop6PmnpDkuLogT2JqZWN0XG5cdCAgICogQHBhcmFtIHMge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RpY3RdIHtPYmplY3R9XG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHQgIHBhcnNlU2VtaWNvbG9uQ29udGVudDogZnVuY3Rpb24gKHMsIGRpY3QsIHVuZGVjb2RlKSB7XG5cdCAgICBkaWN0ID0gZGljdCB8fCB7fTtcblx0ICAgIHZhciBhID0gcy5zcGxpdCgnOycpO1xuXHQgICAgdmFyIGo7XG5cdCAgICB2YXIgYV9sZW4gPSBhLmxlbmd0aDtcblx0ICAgIHZhciBhMjtcblx0XG5cdCAgICBmb3IgKGogPSAwOyBqIDwgYV9sZW47IGorKykge1xuXHQgICAgICBhMiA9IGFbal0uc3BsaXQoJz0nKTtcblx0ICAgICAgdmFyIF92YWx1ZSA9IHV0aWxUcmltLnRyaW0oYTIuc2xpY2UoMSkuam9pbignPScpKTtcblx0ICAgICAgZGljdFt1dGlsVHJpbS50cmltKGEyWzBdKSB8fCAnJ10gPSB1bmRlY29kZSA/IF92YWx1ZSA6IHRoaXMudHJ5VG9EZWNvZGVVUklDb21wb25lbnQoX3ZhbHVlKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gZGljdDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlsIbkuIDkuKogbm9kZSBsaXN0IOi9rOS4uuaVsOe7hFxuXHQgICAqIEBwYXJhbSBub2RlcyB7Tm9kZUxpc3R9XG5cdCAgICog5Y+C6KeB77yaaHR0cDovL3d3dy5wbGFuYWJjLm5ldC8yMDEwLzAxLzA2L2FyZ3VtZW50c190b19hcnJheS9cblx0ICAgKi9cblx0ICBub2RlTGlzdFRvQXJyYXk6IGZ1bmN0aW9uIChub2Rlcykge1xuXHQgICAgdmFyIGFycjtcblx0ICAgIHZhciBsZW5ndGg7XG5cdFxuXHQgICAgdHJ5IHtcblx0ICAgICAgLy8gd29ya3MgaW4gZXZlcnkgYnJvd3NlciBleGNlcHQgSUVcblx0ICAgICAgYXJyID0gW10uc2xpY2UuY2FsbChub2Rlcyk7XG5cdCAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgLy8gc2xvd2VyLCBidXQgd29ya3MgaW4gSUVcblx0ICAgICAgYXJyID0gW107XG5cdCAgICAgIGxlbmd0aCA9IG5vZGVzLmxlbmd0aDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBhcnIucHVzaChub2Rlc1tpXSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG5cdCAgICBpZiAodXRpbFN0b3JlLmdldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHZhciBfbHNfY25hID0gJyc7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KEVUQUdfU1RPUkFHRV9LRVkpO1xuXHQgICAgICBpZiAoX3ZhbHVlKSB7XG5cdCAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ18nKSB8fCBbXTtcblx0ICAgICAgICBpZiAoZGF0ZSkge1xuXHQgICAgICAgICAgX2xzX2NuYSA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19jbmEpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5FVEFHX1NUT1JBR0VfS0VZLCAgdGhpcy50b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcblx0ICBzZXRMc0NuYTogZnVuY3Rpb24gKEVUQUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjbmEpIHtcblx0ICAgIGlmIChjbmEgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHV0aWxTdG9yZS5zZXQoRVRBR19TVE9SQUdFX0tFWSwgIHRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgXG5cdCAgZ2V0THNJbXB2OiBmdW5jdGlvbihJTVBSSU5UX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG5cdCAgICBpZiAodXRpbFN0b3JlLmdldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHZhciBfbHNfaW1wdiA9ICcnO1xuXHQgICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChJTVBSSU5UX1NUT1JBR0VfS0VZKTtcblx0ICAgICAgaWYgKF92YWx1ZSkge1xuXHQgICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCd8fCcpIHx8IFtdO1xuXHQgICAgICAgIGlmIChkYXRlKSB7XG5cdCAgICAgICAgICBfbHNfaW1wdiA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBfbHNfaW1wdiA9IF9hcnIubGVuZ3RoID4gMSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChfbHNfaW1wdik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc2V0THNJbXB2OiBmdW5jdGlvbihJTVBSSU5UX1NUT1JBR0VfS0VZLCB0b2RheSwgaW1wdikge1xuXHQgICAgaWYgKGltcHYgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHV0aWxTdG9yZS5zZXQoSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXkgKyAnfHwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGltcHYpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0XG5cdCAgc2V0THNSZW1vdGVDZmc6IGZ1bmN0aW9uKFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVksIHRvZGF5LCBjZmcpIHtcblx0ICAgIGlmIChjZmcgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHZhciBjbG9uZUNmZyA9IHV0aWxEYXNoLmNsb25lRGVlcChjZmcpO1xuXHQgICAgICBpZiAodHlwZW9mIGNsb25lQ2ZnID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGNsb25lQ2ZnID0gSlNPTi5zdHJpbmdpZnkoY2xvbmVDZmcpO1xuXHQgICAgICB9XG5cdCAgICAgIHV0aWxTdG9yZS5zZXQoUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgdG9kYXkgKyAnfHwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGNsb25lQ2ZnKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdFxuXHQgIGdldExzUmVtb3RlQ2ZnOiBmdW5jdGlvbihSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG5cdCAgICBpZiAodXRpbFN0b3JlLmdldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG5cdCAgICAgIHZhciBfbHNfcmVtb3RlQ2ZnID0gJyc7XG5cdCAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KFJFTU9URV9DT05GSUdfU1RPUkFHRV9LRVkpO1xuXHQgICAgICBpZiAoX3ZhbHVlKSB7XG5cdCAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ3x8JykgfHwgW107XG5cdCAgICAgICAgaWYgKGRhdGUpIHtcblx0ICAgICAgICAgIF9sc19yZW1vdGVDZmcgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgX2xzX3JlbW90ZUNmZyA9IF9hcnIubGVuZ3RoID4gMSA/IF9hcnJbMV0gOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGpzb25VdGlsLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChfbHNfcmVtb3RlQ2ZnKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJyc7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZ2V0VXJsOiBmdW5jdGlvbiAodXJsKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdCAgICB2YXIgZWdVcmwgPSB1cmwgfHwgJy8vbG9nLm1tc3RhdC5jb20vZWcuanMnO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIHJob3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXHQgICAgICByaG9zdF92ID0gYXBsdXNVdGlsLmZpeERvbWFpbihyaG9zdF92KS5yZXBsYWNlKC9cXC9cXHcrLmdpZiQvLCcnKTtcblx0ICAgICAgLy8gdmFyIHJlZyA9IC9bW2EtenxcXC18XFxffDAtOVxcLl0rW2EtenxcXC18XFxffDAtOV0oOlxcZCopPy87XG5cdCAgICAgIC8vIHZhciBjdXN0b21faG9zdCA9IHJob3N0X3YubWF0Y2gocmVnKTtcblx0ICAgICAgLy8gaWYgKGN1c3RvbV9ob3N0ICYmIGN1c3RvbV9ob3N0WzBdKSB7XG5cdCAgICAgIC8vICAgLy8gZWdVcmwgPSBlZ1VybC5yZXBsYWNlKHJlZywgY3VzdG9tX2hvc3RbMF0pO1xuXHQgICAgICAvLyB9XG5cdCAgICAgIGVnVXJsID0gcmhvc3RfdiArICcvZWcuanMnO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGVnVXJsO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDlr7nlrZfnrKbkuLLov5vooYx0cmlt5aSE55CGXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuXHQgKiBAcGFyYW0gcyB7U3RyaW5nfVxuXHQgKi9cblx0ZnVuY3Rpb24gdHJpbShzKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpID8gcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJykgOiAnJztcblx0fTtcblx0ZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIHNldDogZnVuY3Rpb24gKGssIHYpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGssIHYpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgLy8g57uP6L+HdGVzdOS5i+WQjmdldOW6lOivpeS4jeS8muaciemXrumimFxuXHQgIGdldDogZnVuY3Rpb24gKGspIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgcmV0dXJuICcnO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgdGVzdDogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHRlc3RLZXkgPSAnZ3JleV90ZXN0X2tleSc7XG5cdCAgICB0cnkge1xuXHQgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcblx0ICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0odGVzdEtleSk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZW1vdmU6IGZ1bmN0aW9uIChrKSB7XG5cdCAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiAzMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmFzc2lnbiA9IF9fd2VicGFja19yZXF1aXJlX18oMzQpO1xuXHRcblx0LyoqXG5cdCAqIOeUn+aIkOS4gOS4queUqOS6jumBv+WFjee8k+WtmOeahOmaj+acuuaVsFxuXHQgKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuXHQgKiDkuLrkuoblh4/lsJHnorDmkp7vvIzkvb/nlKggMTYg6L+b5Yi25pWw5a2XXG5cdCAqXG5cdCAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcblx0ICovXG5cdGV4cG9ydHMubWFrZUNhY2hlTnVtID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiDliKTmlq3lrZfnrKbkuLIgczEg5piv5ZCm5Lul5a2X56ym5LiyIHMyIOW8gOWktFxuXHQgKiBAcGFyYW0gczEge1N0cmluZ31cblx0ICogQHBhcmFtIHMyIHtTdHJpbmd9XG5cdCAqL1xuXHRleHBvcnRzLmlzU3RhcnRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xuXHR9O1xuXHQvKipcblx0ICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0VuZFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcblx0ICB2YXIgbDEgPSBzMS5sZW5ndGgsIGwyID0gczIubGVuZ3RoO1xuXHQgIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG5cdH07XG5cdFxuXHRleHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbCA9IGFyci5sZW5ndGg7XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgaWYgKGZuKGFycltpXSkpIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOdW1iZXIgPSBmdW5jdGlvbih2KSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcblx0fTtcblx0XG5cdGV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG5cdCAgaWYoaXNOYU4pIHtcblx0ICAgIHJldHVybiBpc05hTih2KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHYgIT09IHY7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcblx0ICogQHBhcmFtIHMxIHtTdHJpbmd9XG5cdCAqIEBwYXJhbSBzMiB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5pc0NvbnRhaW4gPSBmdW5jdGlvbiAoczEsIHMyKSB7XG5cdCAgcmV0dXJuIHMxLmluZGV4T2YoczIpID4gLTE7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YWL6ZqG5LiA5Liqb2JqZWN0XG5cdCAqL1xuXHR2YXIgY2xvbmVEZWVwID0gZnVuY3Rpb24ob2JqKSB7XG5cdCAgdmFyIHN0cjtcblx0ICB2YXIgbmV3b2JqID0gb2JqLmNvbnN0cnVjdG9yID09PSBBcnJheSA/IFtdIDoge307XG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIGlmIChKU09OICYmIEpTT04ucGFyc2UpIHtcblx0ICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG5cdCAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG5cdCAgfSBlbHNlIHtcblx0ICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG5cdCAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBuZXdvYmo7XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblx0XG5cdC8qKlxuXHQgKiDojrflj5Z1cmzlj4LmlbAs5LuF6ZmQd2Vi44CBaDVcblx0ICovXG5cdHZhciBnZXRVcmxQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHJlZ2V4ID0gL1s/Jl0oW149I10rKT0oW14mI10qKS9nO1xuXHQgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcblx0ICB2YXIgcGFyYW1zID0ge307XG5cdCAgdmFyIG1hdGNoO1xuXHQgIHdoaWxlIChtYXRjaCA9IHJlZ2V4LmV4ZWModXJsKSkge1xuXHQgICAgcGFyYW1zW21hdGNoWzFdXSA9IG1hdGNoWzJdO1xuXHQgIH1cblx0ICByZXR1cm4gcGFyYW1zO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRVcmxQYXJhbXMgPSBnZXRVcmxQYXJhbXM7XG5cdFxuXHQvKipcblx0ICog5Yik5pat56m65a+56LGhXG5cdCAqL1xuXHR2YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcblx0ICBpZighbykge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfTtcblx0ICBmb3IgKHZhciBrIGluIG8pIHtcblx0ICAgIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRleHBvcnRzLmlzRW1wdHlPYmplY3QgPSBpc0VtcHR5T2JqZWN0O1xuXG4vKioqLyB9KSxcbi8qIDM0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XG5cdC8qKlxuXHQgKiDlr7nosaFtZXJnZVxuXHQgKiAgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBPYmplY3QuYXNzaWduICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuXHQgICAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcblx0ICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8IGFyZ3VtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcblx0ICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG5cdCAgICAgICAgaWYgKG5leHRTb3VyY2UgIT09IG51bGwpIHsgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXG5cdCAgICAgICAgICBmb3IgKHZhciBuZXh0S2V5IGluIG5leHRTb3VyY2UpIHtcblx0ICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuXHQgICAgICAgICAgICAgIHRvW25leHRLZXldID0gbmV4dFNvdXJjZVtuZXh0S2V5XTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdG87XG5cdCAgICB9KHRhcmdldE9iaiwgYXJnc09iaik7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1heENvdW50KSB7XG5cdCAgdmFyIF9tYXhDb3VudCA9IG1heENvdW50O1xuXHQgIHZhciBfaXRlbXMgPSBbXTtcblx0XG5cdCAgdGhpcy5lbnF1ZXVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgIGlmICh0eXBlb2YgX21heENvdW50ID09PSAnbnVtYmVyJyAmJiB0aGlzLnNpemUoKSA+PSBfbWF4Q291bnQpIHtcblx0ICAgICAgdGhpcy5kZXF1ZXVlKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2l0ZW1zLnB1c2goaXRlbSk7XG5cdCAgfTtcblx0XG5cdCAgdGhpcy5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcy5zaGlmdCgpO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuZnJvbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zWzBdO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBfaXRlbXMubGVuZ3RoID09PSAwO1xuXHQgIH07XG5cdFxuXHQgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBfaXRlbXMubGVuZ3RoID0gMDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLnNpemUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICByZXR1cm4gX2l0ZW1zLmxlbmd0aDtcblx0ICB9O1xuXHRcblx0ICB0aGlzLml0ZW1zID0gZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIF9pdGVtcztcblx0ICB9O1xuXHRcblx0ICB0aGlzLnByaW50ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdWxvZygpLmkoJy0tLXF1ZXVlOiAnLCBfaXRlbXMudG9TdHJpbmcoKSk7XG5cdCAgfTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBjdXJyZW50UGF0aCA9IFwiXCI7XG5cdHZhciBwYWdlT3B0aW9uTWFwID0ge307XG5cdFxuXHRmdW5jdGlvbiBidWlsZFBhdGgocGF0aCwgcXVlcnkpIHtcblx0ICBpZiAoIXBhdGggfHwgcGF0aCA9PT0gJy0nKSB7XG5cdCAgICByZXR1cm4gXCItXCI7XG5cdCAgfVxuXHQgIHZhciBxcyA9IFtdO1xuXHQgIGZvciAodmFyIHEgaW4gcXVlcnkpIHtcblx0ICAgIHFzLnB1c2gocSArICc9JyArIHF1ZXJ5W3FdKTtcblx0ICB9XG5cdCAgdmFyIHFzcyA9IHFzLmpvaW4oJyYnKTtcblx0ICByZXR1cm4gcXNzID8gcGF0aCArICc/JyArIHFzcyA6IHBhdGg7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldEN1cnJlbnRQYWdlUGF0aCA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiBjdXJyZW50UGF0aDtcblx0fTtcblx0XG5cdGV4cG9ydHMuc2V0Q3VycmVudFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIGN1cnJlbnRQYXRoID0gcGF0aDtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcmV0dXJuIHBhZ2VPcHRpb25NYXBbcGF0aF07XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5zZXRQYWdlUXVlcnkgPSBmdW5jdGlvbihwYXRoLCBxdWVyeSkge1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICBwYWdlT3B0aW9uTWFwW3BhdGhdID0gcXVlcnk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRGdWxsUGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICByZXR1cm4gYnVpbGRQYXRoKHBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xuXHR9O1xuXHRcblx0ZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgbWV0YSA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykgfHwge307XG5cdCAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcblx0ICBpZiAobWV0YS5oYXNoTW9kZSkge1xuXHQgICAgcmVhbFBhdGggPSBsb2NhdGlvbi5oYXNoO1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgLy8g5a+55LqO5Yqo5oCB6Lev55Sx77yM5pSv5oyB55So5oi35Lyg5YWl5q2j5YiZ6L+b6KGM5Yy56YWNXG5cdCAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YSkge1xuXHQgICAgICAgIGlmIChrZXkgPT09IHJlYWxQYXRoKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9IGVsc2UgaWYgKG1ldGFba2V5XSAmJiBtZXRhW2tleV0ucmVnUnVsZSkge1xuXHQgICAgICAgICAgcmVhbFBhdGggPSBtZXRhW2tleV0ucmVnUnVsZS50ZXN0KHJlYWxQYXRoKSA/IGtleSA6IHJlYWxQYXRoO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICAvL1xuXHQgIH1cblx0ICByZXR1cm4gbWV0YVtyZWFsUGF0aF07XG5cdH07XG5cdFxuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgZWFjaE1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHQvKiBlc2xpbnQtZGlzYWJsZSAqL1xuXHRleHBvcnRzLmdldFd4VGl0bGUgPSBmdW5jdGlvbihwYXRoKSB7XG5cdCAgaWYgKCFwYXRoKSByZXR1cm4gXCJcIjtcblx0ICB2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdCAgdmFyIHBsYXRUeXBlID0gbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcblx0ICB2YXIgdCA9IFwiXCI7XG5cdCAgdHJ5IHtcblx0ICAgIGlmIChwbGF0VHlwZSA9PT0gJ3d4JyAmJiBfX3d4Q29uZmlnKSB7XG5cdCAgICAgIHZhciB3eENvbmZpZyA9IF9fd3hDb25maWc7ICAgICAgXG5cdCAgICAgIHZhciBwYWdlID0gX193eENvbmZpZy5wYWdlIHx8IHt9O1xuXHQgICAgICB2YXIgcm91dGUgPSBwYWdlW3BhdGhdIHx8IHBhZ2VbcGF0aCArIFwiLmh0bWxcIl07XG5cdCAgICAgIHZhciBuID0ge30sIGkgPSB7fTtcblx0ICAgICAgaWYgKHd4Q29uZmlnLmdsb2JhbCAmJiB3eENvbmZpZy5nbG9iYWwud2luZG93ICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuXHQgICAgICAgIG4udGl0bGUgPSB3eENvbmZpZy5nbG9iYWwud2luZG93Lm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJvdXRlICYmIHJvdXRlLndpbmRvdyAmJiByb3V0ZS53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuXHQgICAgICAgIGkudGl0bGUgPSByb3V0ZS53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCFpLnRpdGxlICYmIF9fd3hBcHBDb2RlX18pIHtcblx0ICAgICAgICB2YXIgYXBwSlNPTiA9IF9fd3hBcHBDb2RlX19bcGF0aCArIFwiLmpzb25cIl07XG5cdCAgICAgICAgaWYgKGFwcEpTT04gJiYgYXBwSlNPTi5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG5cdCAgICAgICAgICBpLnRpdGxlID0gYXBwSlNPTi5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuXHQgICAgICAgIH0gXG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICAgICAgaWYgKGN0eC5nbG9iYWxUaXRsZU1hcCkge1xuXHQgICAgICAgIGVhY2hNYXAoY3R4Lmdsb2JhbFRpdGxlTWFwLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcblx0ICAgICAgICAgIGlmIChrZXkgPT09IHBhdGgpIHtcblx0ICAgICAgICAgICAgdCA9IHZhbHVlO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkge1xuXHQgICAgICAgIHQgPSBpLnRpdGxlIHx8IG4udGl0bGUgfHwgJyc7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0O1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ2N1cnJlbnQgcGxhdGZvcm0gY2FuIG5vdCB0cmFjayBwYWdlIHRpdGxlJyk7XG5cdCAgICByZXR1cm4gdDtcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VDb2RlID0gZnVuY3Rpb24ocGF0aCkge1xuXHQgIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZU5hbWU7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFBhZ2VUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcblx0ICByZXR1cm4gKHRoaXMuZ2V0UGFnZU5hbWUocGF0aCkgfHwge30pLnBhZ2VUaXRsZSB8fCB0aGlzLmdldFd4VGl0bGUocGF0aCk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmdldFZUUmVhbHRpbWVDb2RlID0gZnVuY3Rpb24oKSB7XG5cdCAgaWYgKGN1cnJlbnRQYXRoKSB7XG5cdCAgICB2YXIgcXVlcnkgPSBwYWdlT3B0aW9uTWFwW2N1cnJlbnRQYXRoXSB8fCB7fTtcblx0ICAgIHZhciByZWdFeHAgPSAvXlxcJHZ0Xy87XG5cdCAgICB2YXIgc2NlbmUgPSBkZWNvZGVVUklDb21wb25lbnQocXVlcnkuc2NlbmUpO1xuXHQgICAgcmV0dXJuIHNjZW5lICYmIHJlZ0V4cC50ZXN0KHNjZW5lKSAmJiBzY2VuZS5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuXHQgIGlmIChPYmplY3QgJiYgT2JqZWN0LmtleXMpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblx0ICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgdmFyIGsxID0ga2V5c1tpXTtcblx0ICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuXHQgICAgICBjYWxsYmFjayhrLCBtYXBba10pO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbE1vbml0b3IuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0ZnVuY3Rpb24gcmFuaygpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGlmIChjdHguZWt2UmFuaykge1xuXHQgICAgY3R4LmVrdlJhbmsrKztcblx0ICB9IGVsc2Uge1xuXHQgICAgY3R4LmVrdlJhbmsgPSAxO1xuXHQgIH1cblx0ICByZXR1cm4gY3R4LmVrdlJhbms7XG5cdH07XG5cdGV4cG9ydHMucmFuayA9IHJhbms7XG5cdFxuXHRmdW5jdGlvbiBjbGVhcigpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIGN0eC5la3ZSYW5rID0gMDtcblx0fVxuXHRleHBvcnRzLmNsZWFyID0gY2xlYXI7XG5cbi8qKiovIH0pLFxuLyogMzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfcGx1Z2luX21pbmkvbGliX2F1dG9fY29sbGVjdC9pbmplY3RfcGFnZS5qc1xuXHQgKiDoh6rliqjph4fpm4blsI/nqIvluo/kv6Hmga/nmoTmj5Lku7YgLSDpobXpnaLms6jlhaVcblx0ICpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQwKTtcblx0dmFyIGVhY2hNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KTtcblx0dmFyIGZvcm1hdCA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdW1VdGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXHR2YXIgdXRpbE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0ZnVuY3Rpb24gZ2V0VXRtUGFyYW1zT2JqIChxKSB7XG5cdCAgdmFyIG9iaiA9IHt9O1xuXHQgIHRyeSB7XG5cdCAgICBlYWNoTWFwKHEsIGZ1bmN0aW9uIChrLCB2KSB7XG5cdCAgICAgIC8vIOmBv+WFjeS4uuepuuaXtumHjeWGmWdsb2JhbHByb3BlcnR55YaF55qE5bGe5oCnXG5cdCAgICAgIGlmKGsuaW5kZXhPZigndXRtXycpID09PSAwKSB7XG5cdCAgICAgICAgb2JqW2tdID0gdjtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfSBjYXRjaCAoZSkge31cblx0ICByZXR1cm4gb2JqO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBoYW5kbGVyU2hhcmVBcHBNc2cgKG9wdCwgbmFtZSkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgdmFyIHJvdXRlID0gcGFnZS5yb3V0ZSB8fCBwYWdlLmlzIHx8ICcnO1xuXHQgIHZhciBvcHRpb25zID0gcGFnZS5vcHRpb25zIHx8IHt9O1xuXHQgIHZhciBsaW5rUGFybWFzID0gZm9ybWF0Lm9iajJwYXJhbShvcHRpb25zLCB0cnVlKTtcblx0ICAvLyDmi7zmjqVjdXJyZW50UGFnZeeahHVybOS4jnF1ZXJ5XG5cdCAgaWYobGlua1Bhcm1hcykge1xuXHQgICAgcm91dGUgPSByb3V0ZSArICc/JyArIGxpbmtQYXJtYXM7XG5cdCAgfSBcblx0ICBpZiAoIW9wdC5xdWVyeSkge1xuXHQgICAgb3B0LnF1ZXJ5ID0ge307XG5cdCAgfVxuXHQgIG9wdC5xdWVyeS4kJF9zaGFyZV91aWQgPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ19hbm9ueV9pZCcpIHx8IGN0eC5hcGx1cy5fX0VUQUdfX0NOQV9fSURfXztcblx0ICBvcHQucXVlcnkuJCRfdXRtX21lZGl1bSA9IDM7XG5cdFxuXHQgIC8vIG9uU2hhcmVBcHBNZXNzYWdl5rKh5pyJcmV0dXJuIOaIliBvblNoYXJlVGltZWxpbmXml7bvvIzlhaXlj4JvcHTnmoRwYXRo5LiOcXVlcnnkuLrnqbrvvIzmraTml7bnlKhjdXJyZW50UGFnZeeahHBhdGjlkoxvcHRpb25z5YWc5bqVXG5cdCAgb3B0LnF1ZXJ5ID0gdW1VdGlscy5hc3NpZ24oe30sIG9wdGlvbnMsIG9wdC5xdWVyeSk7XG5cdCAgdmFyIHBhdGggPSBvcHQucGF0aCB8fCByb3V0ZTtcblx0XG5cdCAgdmFyIGFwcGVuZFBhcmFtcyA9ICckJF9zaGFyZV91aWQ9JyArIG9wdC5xdWVyeS4kJF9zaGFyZV91aWQgKyAnJiQkX3V0bV9tZWRpdW09Myc7XG5cdCBcblx0ICBpZiAocGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuXHQgICAgb3B0LnBhdGggPSBwYXRoICsgJyYnICsgYXBwZW5kUGFyYW1zO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvcHQucGF0aCA9IHBhdGggKyAnPycgKyBhcHBlbmRQYXJhbXM7XG5cdCAgfVxuXHQgIG9wdC5zdGF0dXMgPSAncmVhZHknO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogW25hbWUsIG9wdF1cblx0ICB9KTtcblx0ICByZXR1cm4gb3B0O1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25QdWxsRG93blJlZnJlc2goKSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgb3B0ID0ge1xuXHQgICAgc3RhdHVzOiAncmVhZHknXG5cdCAgfTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICBhcmd1bWVudHM6IFsnb25QdWxsRG93blJlZnJlc2gnLCBvcHRdXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblJlYWNoQm90dG9tKCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgIHZhciBvcHQgPSB7XG5cdCAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICBjb250ZXh0OiB0aGF0XG5cdCAgfTtcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICBhcmd1bWVudHM6IFsnb25SZWFjaEJvdHRvbScsIG9wdF1cblx0ICB9KTtcblx0fTtcblx0XG5cdC8vIOmhtemdouWKoOi9vVxuXHRmdW5jdGlvbiBvblBhZ2VMb2FkKHF1ZXJ5KSB7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB0cnkge1xuXHQgICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG5cdCAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgUGFnZU1hbmFnZXIuc2V0UGFnZVF1ZXJ5KHRoaXMucm91dGUsIHF1ZXJ5KTtcblx0ICAgIH1cblx0ICAgIHVsb2coKS5pKCdQYWdlIG9uTG9hZDogJywgdGhpcy5yb3V0ZSwgcXVlcnkpO1xuXHQgICAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgICAgdXRpbEZ1bmN0aW9uLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24oKXtcblx0ICAgICAgLy8g5YWo5bGA5bGe5oCn6L+95YqgdXRt5Y+C5pWwXG5cdCAgICAgIGN0eC5hcGx1cy5hcHBlbmRNZXRhSW5mbyhhcGx1c1N0YXRpYy5HTE9CQUxfUFJPUEVSVFksIGdldFV0bVBhcmFtc09iaihxdWVyeSkpO1xuXHQgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgICAgIGFyZ3VtZW50czogWydvbkxvYWQnLCB7XG5cdCAgICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgICAgICBjb250ZXh0OiB0aGF0LFxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyDpobXpnaLliqDovb3lrozlkI7mt7flhaVzZXREYXRh77yM5pa55L6/6Ieq5Yqo5pud5YWJ44CB6Ieq5Yqo54K55Ye7562J5o+S5Lu25L2/55SoXG5cdCAgICAgIHZhciBfY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXNldEZuKF9jdXJyZW50UGFnZSwgJ3NldERhdGEnLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgICAgIGFyZ3VtZW50czogWydvblBhZ2VEYXRhQ2hhbmdlZCcsIHtcblx0ICAgICAgICAgICAgZGF0YTogZGF0YSxcblx0ICAgICAgICAgICAgY29udGV4dDogdGhhdFxuXHQgICAgICAgICAgfV1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VMb2FkOiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VTaG93KCkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIFBhZ2VNYW5hZ2VyLnNldEN1cnJlbnRQYXRoKHRoaXMucm91dGUpO1xuXHQgICAgdXRpbEZ1bmN0aW9uLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbJ29uU2hvdycsIHtcblx0ICAgICAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VTaG93OiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBvblBhZ2VSZWFkeSgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgYXJndW1lbnRzOiBbJ29uUmVhZHknLCB7XG5cdCAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQgICAgICAgIGNvbnRleHQ6IHRoYXRcblx0ICAgICAgfV1cblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VSZWFkeTogJywgZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gb25QYWdlSGlkZSgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHRyeSB7XG5cdCAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcblx0ICAgICAgICBzdGF0dXM6ICdyZWFkeScsXG5cdCAgICAgIH1dXG5cdCAgICB9KTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KCdvblBhZ2VIaWRlOiAnLCBlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBmdW5jdGlvbiBvblBhZ2VVbmxvYWQoKSB7XG5cdC8vICAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0Ly8gICB0cnkge1xuXHQvLyAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQvLyAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG5cdC8vICAgICAgIGFyZ3VtZW50czogWydvbkhpZGUnLCB7XG5cdC8vICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuXHQvLyAgICAgICB9XVxuXHQvLyAgICAgfSk7XG5cdC8vICAgfSBjYXRjaChlKXtcblx0Ly8gICAgIHVsb2coKS53KCdvblBhZ2VVbmxvYWQ6ICcsIGUpO1xuXHQvLyAgIH1cblx0Ly8gfTtcblx0XG5cdGZ1bmN0aW9uIG9uQXBsdXNDbGsoZSkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCB7XG5cdCAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgZXZlbnQ6IGUsXG5cdCAgICAgIGNvbnRleHQ6IHRoaXNcblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHQvL+inpuaRuOS6i+S7tlxuXHRmdW5jdGlvbiBvbkFwbHVzVG91Y2goZSkge1xuXHQgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIHRoYXQgPSB0aGlzO1xuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcblx0ICAgIGFyZ3VtZW50czogWydvbkFwbHVzVG91Y2gnLCB7XG5cdCAgICAgIHN0YXR1czogJ3JlYWR5Jyxcblx0ICAgICAgY29udGV4dDogdGhhdCxcblx0ICAgICAgZXZlbnQ6IGUsXG5cdCAgICB9XVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmV3cml0ZVNoYXJlKG9wdCkge1xuXHQgIGlmIChvcHQub25TaGFyZUFwcE1lc3NhZ2UpIHtcblx0ICAgIHZhciBvbGRPblNoYXJlQXBwTWVzc2FnZSA9IG9wdC5vblNoYXJlQXBwTWVzc2FnZTtcblx0ICAgIG9wdC5vblNoYXJlQXBwTWVzc2FnZSA9IGZ1bmN0aW9uKHJlcykge1xuXHQgICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlQXBwTWVzc2FnZS5jYWxsKHRoaXMsIHJlcykgfHwge307XG5cdCAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlQXBwTWVzc2FnZScpO1xuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBmdW5jdGlvbiBhdXRvSG9va01hcChrZXkpIHtcblx0Ly8gICB2YXIgYWhNYXAgPSB7XG5cdC8vICAgICBkYXRhOiAxLFxuXHQvLyAgICAgb25Mb2FkOiAxLFxuXHQvLyAgICAgb25TaG93OiAxLFxuXHQvLyAgICAgb25SZWFkeTogMSxcblx0Ly8gICAgIG9uUHVsbERvd25SZWZyZXNoOiAxLFxuXHQvLyAgICAgb25TaGFyZUFwcE1lc3NhZ2U6IDEsXG5cdC8vICAgICBvblNoYXJlQXBwTWVzc2FnZTogMSxcblx0Ly8gICAgIG9uU2hhcmVUaW1lbGluZTogMSxcblx0Ly8gICAgIG9uUmVhY2hCb3R0b206IDEsXG5cdC8vICAgICBvblBhZ2VTY3JvbGw6IDEsXG5cdC8vICAgICBvblJlc2l6ZTogMSxcblx0Ly8gICAgIG9uVGFiSXRlbVRhcDogMSxcblx0Ly8gICAgIG9uSGlkZTogMSxcblx0Ly8gICAgIG9uVW5sb2FkOiAxLFxuXHQvLyAgICAgb25BcGx1c1RvdWNoOiAxLFxuXHQvLyAgICAgb25BcGx1c0NsazogMVxuXHQvLyAgIH07XG5cdC8vICAgcmV0dXJuICEhYWhNYXBba2V5XTtcblx0Ly8gfVxuXHRcblx0Ly8gZnVuY3Rpb24gZ2V0TWV0aG9kcyhvcHRpb25zKSB7XG5cdC8vICAgdmFyIHJlc3VsdCA9IFtdO1xuXHQvLyAgIGZvciAodmFyIGEgaW4gb3B0aW9ucykge1xuXHQvLyAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2FdID09PSAnZnVuY3Rpb24nICYmICFhdXRvSG9va01hcChhKSkge1xuXHQvLyAgICAgICByZXN1bHQucHVzaChhKTtcblx0Ly8gICAgIH1cblx0Ly8gICB9XG5cdC8vICAgcmV0dXJuIHJlc3VsdDtcblx0Ly8gfTtcblx0XG5cdC8vIGZ1bmN0aW9uIGhvb2tBdXRvVHJhY2tNZXRob2RzKG9wdGlvbnMpIHtcblx0Ly8gICB2YXIgbWV0aG9kcyA9IGdldE1ldGhvZHMob3B0aW9ucyk7XG5cdC8vICAgaWYgKG1ldGhvZHMgJiYgbWV0aG9kcy5sZW5ndGgpIHtcblx0Ly8gICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkrKykge1xuXHQvLyAgICAgICB1dGlsRnVuY3Rpb24uY2xpY2tfcHJveHkob3B0aW9ucywgbWV0aG9kc1tpXSk7XG5cdC8vICAgICB9XG5cdC8vICAgfVxuXHQvLyB9XG5cdFxuXHQvLyDliIbkuqvmnIvlj4vlnIhcblx0ZnVuY3Rpb24gcmV3cml0ZVNoYXJlVGltZWxpbmUob3B0KSB7XG5cdCAgaWYgKG9wdC5vblNoYXJlVGltZWxpbmUpIHtcblx0ICAgIHZhciBvbGRPblNoYXJlVGltZWxpbmUgPSBvcHQub25TaGFyZVRpbWVsaW5lO1xuXHQgICAgb3B0Lm9uU2hhcmVUaW1lbGluZSA9IGZ1bmN0aW9uKHJlcykge1xuXHQgICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlVGltZWxpbmUuY2FsbCh0aGlzLCByZXMpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gaGFuZGxlclNoYXJlQXBwTXNnKHNoYXJlUmVzdWx0LCAnb25TaGFyZVRpbWVsaW5lJyk7XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluamVjdFBhZ2UoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBvbGRQYWdlID0gUGFnZTtcblx0ICAgIHZhciBvbGRQYWdlQWZ0ZXI7XG5cdCAgICBpZiAob2xkUGFnZS5hZnRlcikge1xuXHQgICAgICBvbGRQYWdlQWZ0ZXIgPSBvbGRQYWdlLmFmdGVyO1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICBQYWdlID0gZnVuY3Rpb24ocGFnZU9wdGlvbnMpIHsgICAgICBcblx0ICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuXHQgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25IaWRlJywgb25QYWdlSGlkZSk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblVubG9hZCcsIG9uUGFnZUhpZGUpO1xuXHQgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25Mb2FkJywgb25QYWdlTG9hZCk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWR5Jywgb25QYWdlUmVhZHkpO1xuXHQgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25QdWxsRG93blJlZnJlc2gnLCBvblB1bGxEb3duUmVmcmVzaCk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWNoQm90dG9tJywgb25SZWFjaEJvdHRvbSk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzQ2xrJywgb25BcGx1c0Nsayk7XG5cdCAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvbkFwbHVzVG91Y2gnLCBvbkFwbHVzVG91Y2gpO1xuXHRcblx0ICAgICAgcmV3cml0ZVNoYXJlKHBhZ2VPcHRpb25zKTtcblx0ICAgICAgcmV3cml0ZVNoYXJlVGltZWxpbmUocGFnZU9wdGlvbnMpO1xuXHQgICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhwYWdlT3B0aW9ucyk7XG5cdCAgICAgIG9sZFBhZ2UocGFnZU9wdGlvbnMpO1xuXHQgICAgfTtcblx0ICAgIC8vIOmAgumFjeeZvuW6pnN0YXJ0bWluaXByb2dyYW1cblx0ICAgIGlmIChvbGRQYWdlQWZ0ZXIpIHtcblx0ICAgICAgUGFnZS5hZnRlciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIG9sZFBhZ2VBZnRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ1BhZ2UgaG9vayBlcnJvcicpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluamVjdENvbXBvbmVudCgpIHtcblx0ICB0cnkge1xuXHQgICAgdmFyIG9sZENvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgIENvbXBvbmVudCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBvcHRpb25zLm1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHMgfHwge307XG5cdCAgICAgICAgdmFyIG1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihtZXRob2RzLCAnb25TaG93Jywgb25QYWdlU2hvdyk7XG5cdCAgICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihtZXRob2RzLCAnb25IaWRlJywgb25QYWdlSGlkZSk7XG5cdCAgICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihtZXRob2RzLCAnb25VbmxvYWQnLCBvblBhZ2VIaWRlKTtcblx0ICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcblx0ICAgICAgICByZXdyaXRlU2hhcmUobWV0aG9kcyk7XG5cdCAgICAgICAgLy8gaG9va0F1dG9UcmFja01ldGhvZHMobWV0aG9kcyk7XG5cdCAgICAgICAgb2xkQ29tcG9uZW50KG9wdGlvbnMpO1xuXHQgICAgICB9IGNhdGNoKHQpIHtcblx0ICAgICAgICBvbGRDb21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIH07XG5cdCAgICB9O1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgdWxvZygpLncoJ0NvbXBvbmVudCBob29rIGVycm9yJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRcblx0ZnVuY3Rpb24gaW5qZWN0TWlkd2F5IChtcEN0eCwgbmFtZSwgY2FsbGJhY2spIHtcblx0ICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBtcEN0eCkgPiAtMSkge1xuXHQgICAgY2FsbGJhY2soKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gY29uc29sZS5sb2coJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuXHQgICAgdWxvZygpLncoJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuXHQgIH1cblx0fVxuXHR2YXIgZ2xvYmFsVGl0bGVNYXAgPSB7fTtcblx0ZnVuY3Rpb24gaG9va1NldE5hdmlnYXRpb25CYXJUaXRsZSgpIHtcblx0ICB2YXIgdGhhdCA9IHRoaXM7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdCAgdmFyIHBsYXRmb3JtQ3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHtcblx0ICAgIGlmIChwbGF0Zm9ybUN0eCAmJiBwbGF0Zm9ybUN0eC5zZXROYXZpZ2F0aW9uQmFyVGl0bGUpIHtcblx0ICAgICAgdmFyIG9sZEZ1bmMgPSBwbGF0Zm9ybUN0eC5zZXROYXZpZ2F0aW9uQmFyVGl0bGU7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwbGF0Zm9ybUN0eCwgXCJzZXROYXZpZ2F0aW9uQmFyVGl0bGVcIiwge1xuXHQgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuXHQgICAgICAgICAgICB2YXIgdCA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICAgICAgdmFyIHJvdXRlID0gdC5yb3V0ZSB8fCB0LmlzO1xuXHQgICAgICAgICAgICBlID0gdXRpbE9iamVjdC5pc09iamVjdChlKSA/IGUgOiB7fTtcblx0ICAgICAgICAgICAgZ2xvYmFsVGl0bGVNYXBbcm91dGVdID0gZS50aXRsZTtcblx0ICAgICAgICAgICAgY3R4Lmdsb2JhbFRpdGxlID0gZ2xvYmFsVGl0bGVNYXA7XG5cdCAgICAgICAgICAgIG9sZEZ1bmMuY2FsbCh0aGF0LCBlKTtcblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSxcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSBjYXRjaChlKSB7XG5cdCAgICB1bG9nKCkudyhlKTtcblx0ICB9XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBydW46IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaW5qZWN0TWlkd2F5KFBhZ2UsICdQYWdlJywgaW5qZWN0UGFnZSk7XG5cdCAgICAgIGluamVjdE1pZHdheShDb21wb25lbnQsICdDb21wb25lbnQnLCBpbmplY3RDb21wb25lbnQpO1xuXHQgICAgICBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogdXRpbEZ1bmMuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0ZXhwb3J0cy5yZXNldEZuID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LFxuXHQgICAgdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogJycsXG5cdCAgICBuID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gPyBhcmd1bWVudHNbMl0gOiBmdW5jdGlvbiAoKSB7IH0sXG5cdCAgICBpID0gZVt0XTtcblx0ICBlW3RdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIHJzID0gaSAmJiBpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IC8vIGFwcOacrOi6q+eahGZ1bmN0aW9uXG5cdCAgICBpZiAocnMpIHtcblx0ICAgICAgcmV0dXJuIG4uY2FsbCh0aGlzLCBycyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB0YXJvMXjjgIF0YXJvMngg5b+F6aG75Yqg5Liq6aKd5aSW55qE6K+t5Y+lbi5hcHBseeaJjeiDveaJp+ihjO+8jOavlOWmgnRyeWNhdGNo77yM5Y+Y6YeP5aOw5piO562J77yM5q2k5aSE5Yqg5LqGcmV0dXJuXG5cdCAgICAgIHJldHVybiBuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMucmV3cml0ZUZuID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBuZXdGbikge1xuXHQgIHZhciBvbGRGbiA9IG9ialtuYW1lXTtcblx0ICBvYmpbbmFtZV0gPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgbmV3Rm4uY2FsbCh0aGlzLCBlKTtcblx0ICAgIG9sZEZuICYmIG9sZEZuLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fTtcblx0XG5cdGV4cG9ydHMub25BcGx1c1JlYWR5ID0gZnVuY3Rpb24gKGFwbHVzX3F1ZXVlLCBTVUJTQ1JJQkUsIGNhbGxiYWNrKSB7XG5cdCAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IFNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuXHQgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIGNhbGxiYWNrKCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHR2YXIgdXRpbEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZWFjaE1hcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzcpO1xuXHR2YXIgdXRpbE9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdGV4cG9ydHMuY2xpY2tfcHJveHkgPSAgZnVuY3Rpb24ob3B0aW9ucywgbWV0aG9kKSB7ICAgIFxuXHQgIHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIG9yaUZ1bmMgPSBvcHRpb25zW21ldGhvZF07XG5cdCAgb3B0aW9uc1ttZXRob2RdID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzWzBdO1xuXHQgICAgaWYgKGV2ZW50ICYmIHV0aWxPYmplY3QuaXNPYmplY3QoZXZlbnQpICYmIGFwbHVzICYmIGFwbHVzLl9yZWNvcmQpIHtcblx0ICAgICAgdmFyIGN1cnJlbnRwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICB2YXIgY3VzcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0KSB7XG5cdCAgICAgICAgaWYoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0KSB7XG5cdCAgICAgICAgICBlYWNoTWFwKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldCwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHQgICAgICAgICAgICBpZiAoIXV0aWxPYmplY3QuaXNPYmplY3QodmFsdWUpICYmIHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgY3VzcFtrZXldID0gdmFsdWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5pZCkge1xuXHQgICAgICAgICAgY3VzcFtcImVsZW1lbnRfaWRcIl0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmlkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgdmFyIHJvdXRlID0gY3VycmVudHBhZ2Uucm91dGUgfHwgY3VycmVudHBhZ2UuaXMgfHwgJ3Vua25vd25fcGFnZSc7XG5cdCAgICAgIGlmIChyb3V0ZSA9PT0gJ3Vua25vd25fcGFnZScpIHtcblx0ICAgICAgICB1bG9nKCkudyhcImdldCBwYWdlcGF0aCBmYWlsZWQgaW4gY2xpY2tfcHJveHlcIiwgY3VycmVudHBhZ2UpO1xuXHQgICAgICB9XG5cdCAgICAgIGN1c3AgPSBhc3NpZ24oY3VzcCwgeyBpc19hdXRvOiAxIH0pO1xuXHQgICAgICB2YXIgZXZlbnRjb2RlID0gdXRpbEhhc2guaGFzaChyb3V0ZSwgdXRpbC5nZXRBcHBLZXkoKSkgKyB1dGlsSGFzaC5oYXNoKG1ldGhvZCwgdXRpbC5nZXRBcHBLZXkoKSk7XG5cdCAgICAgIGFwbHVzLl9yZWNvcmQoZXZlbnRjb2RlLCBcIkNMS1wiLCBjdXNwKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIOagueaNruWvhumSpXPlr7nlrZfnrKbkuLJzdHLov5vooYzovazkuYlcblx0ZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG5cdCAgdmFyIGRlZl92ID0gMTMxNTQyMzkxMTtcblx0ICB2YXIgaGFzaCA9IHMgfHwgZGVmX3YsIGksIGNoO1xuXHQgIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHQgICAgY2ggPSBzdHIuY2hhckNvZGVBdChpKTtcblx0ICAgIGhhc2ggXj0gKChoYXNoIDw8IDUpICsgY2ggKyAoaGFzaCA+PiAyKSk7XG5cdCAgfVxuXHQgIHZhciBycyA9IChoYXNoICYgMHg3RkZGRkZGRikudG9TdHJpbmcoMTYpO1xuXHQgIHJldHVybiBycztcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG5cdCAqIOW3peWFt+exu1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB0cnlUb0RlY29kZSA9IHJlcXVpcmUoJy4vdHJ5VG9EZWNvZGUnKTtcblx0XG5cdGV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgdmFyIGs7XG5cdCAgdmFyIHY7XG5cdCAgdmFyIGk7XG5cdCAgdmFyIGxlbiA9IGFyci5sZW5ndGg7XG5cdFxuXHQgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgayA9IGFycltpXVswXTtcblx0ICAgIHYgPSBhcnJbaV1bMV07XG5cdCAgICByZXRba10gPSB2O1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIHBhcmFtIHRvIG9iamVjdFxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIG9iamVjdCDmoLzlvI/vvIzlpoLvvJpcblx0ICoge1xuXHQgKiAgIGE6IFwiMVwiLFxuXHQgKiAgIGI6IFwiMlwiLFxuXHQgKiAgIGM6IFwiM1wiXG5cdCAqIH1cblx0ICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuXHQgKi9cblx0ZXhwb3J0cy5wYXJhbTJvYmogPSBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gcGFyYW1zO1xuXHQgIH1cblx0ICB2YXIgb2JqID0ge307XG5cdCAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiBvYmo7XG5cdCAgfVxuXHQgIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgaXRlbSA9IGFbaV07XG5cdCAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcblx0ICAgIHZhciBmcmFnbWVudCA9IGl0ZW0uc3BsaXQoJz0nKTtcblx0ICAgIHZhciBsZW4gPSBpdGVtLmxlbmd0aDtcblx0ICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9IGZyYWdtZW50WzFdIHx8ICcnOyAgXG5cdCAgICB9IGVsc2UgaWYgKGluZGV4ID4gMCkge1xuXHQgICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uc2xpY2UoaW5kZXggKyAxLCBsZW4pIHx8ICcnO1xuXHQgICAgICBvYmpba2V5XSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JqW2ZyYWdtZW50WzBdXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gb2JqO1xuXHR9O1xuXHRcblx0Ly8gY29uc29sZS5sb2coJ1RPRE8gZGVsZXRlIHNfcGxhaW5fb2JqJyk7XG5cdHZhciBzX3BsYWluX29iaiA9ICc6Oi1wbGFpbi06Oic7XG5cdGV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblx0XG5cdC8qKlxuXHQgKiBhcnJheSB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXnmoTmlbDnu4TovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j++8jFxuXHQgKiDlhbbkuK3mlbDnu4TkuLpcblx0ICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuXHQgKiDnmoTlvaLlvI/jgIJcblx0ICog5LiOIG9iajJwYXJhbSDnm7jmr5TvvIzov5nkuKrmlrnms5XnmoTlpb3lpITmmK/lj6/ku6Xkv53or4HmnIDlkI7lj4LmlbDnmoTpobrluo9cblx0ICogQHBhcmFtIGFyciB7QXJyYXl9XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdGZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcblx0ICB2YXIgYSA9IFtdLFxuXHQgICAgayxcblx0ICAgIHYsXG5cdCAgICBpLFxuXHQgICAgbGVuID0gYXJyLmxlbmd0aDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICBrID0gYXJyW2ldWzBdO1xuXHQgICAgdiA9IGFycltpXVsxXTtcblx0ICAgIHZhciBpc0luUGxhbk9iaiA9IGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDA7XG5cdCAgICB2YXIgX3ZhbHVlID0gaXNJblBsYW5PYmogfHwgc2tpcEVuY29kZSA/IHYgOiBlbmNvZGVVUklDb21wb25lbnQodik7XG5cdCAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdGV4cG9ydHMuYXJyMnBhcmFtID0gYXJyMnBhcmFtO1xuXHRcblx0LyoqXG5cdCAqIG9iamVjdCB0byBwYXJhbVxuXHQgKiDlsIbkuIDkuKrnroDljZXlr7nosaHovazljJbkuLogdXJsIOWPguaVsOeahOW9ouW8j1xuXHQgKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG5cdCAqIEBwYXJhbSBvYmoge09iamVjdH1cblx0ICogQHBhcmFtIGNvbW1UcmFuc2xhdGUge0Jvb2xlYW59IOaZrumAmui9rOaNouS4jeWBmmlzU3RhcnRXaXRo5qCh6aqMXG5cdCAqXG5cdCAqL1xuXHRleHBvcnRzLm9iajJwYXJhbSA9IGZ1bmN0aW9uIChvYmosIGNvbW1UcmFuc2xhdGUpIHtcblx0ICB2YXIgYSA9IFtdO1xuXHQgIHZhciBrO1xuXHQgIHZhciB2O1xuXHQgIHZhciBfdjtcblx0ICBmb3IgKGsgaW4gb2JqKVxuXHQgIC8vIFRPRE86IOWvueS6jmV4YXJncyBrZXksIHZhbHVlIOS5n+aYr29iauexu+Wei++8jOmcgOimgemAkuW9kuino+aekCBA6ZKw5pitXG5cdCAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBvYmpba10gPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgdiA9ICcnICsgdGhpcy5vYmoycGFyYW0ob2JqW2tdKTtcblx0ICAgICAgICBfdiA9IHY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdiA9ICcnICsgb2JqW2tdO1xuXHQgICAgICAgIF92ID0gayArICc9JyArIHY7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCFjb21tVHJhbnNsYXRlKSB7XG5cdCAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGEucHVzaChfdik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICByZXR1cm4gYS5qb2luKCcmJyk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmVuY29kZUdva2V5VmFsdWUgPSBmdW5jdGlvbiAoZ29rZXkpIHtcblx0ICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAvLyAvLyDlr7lnb2tleeWGheeahHZhbHVl57uf5LiA5Yqg5LiA5bGC57yW56CBXG5cdCAgLy8gaWYgKHR5cGVvZiBnb2tleSA9PT0gJ29iamVjdCcgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpKSB7XG5cdCAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG5cdCAgLy8gICAgIGlmICh0eXBlb2YgZ29rZXlba10gPT09ICdzdHJpbmcnKSB7XG5cdCAgLy8gICAgICAgdHJ5IHtcblx0ICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuXHQgIC8vICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgLy8gICAgIH1cblx0ICAvLyAgIH1cblx0ICAvLyB9XG5cdCAgcmV0dXJuIGdva2V5O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0dmFyIFB1YlN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgLy8g5L+d6K+B5Y+q5Lya5pyJ5LiA5LiqcHVic3Vi6L+Q6KGMXG5cdCAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuXHQgICAgICBhcGx1cy5hcGx1c19wdWJzdWIgPSBQdWJTdWIuY3JlYXRlKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDQ0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL1B1YlN1Yi5qc1xuXHQgKiDmtojmga/orqLpmIXmqKHlnotcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHRcblx0dmFyIGdldEFyZ3MgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuXHQgIHZhciBfYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcblx0ICBmb3IgKHZhciBqID0gMTsgaiA8IGxlbjsgaisrKSB7XG5cdCAgICBfYXJnc1tqIC0gMV0gPSBhcmdzW2pdO1xuXHQgIH1cblx0ICByZXR1cm4gX2FyZ3M7XG5cdH07XG5cdFxuXHR2YXIgUHViU3ViID0gQmFzZS5leHRlbmQoe1xuXHQgIC8qKlxuXHQgICAqIOWvuWZu6L+b6KGM5pat6KiA77yM5LiN5piv4oCYZnVuY3Rpb27igJnnsbvlnovmiqXplJnvvIzlkKbliJnov5Tlm55mblxuXHQgICAqL1xuXHQgIGNhbGxhYmxlOiBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIGlmICghaXNGdW5jdGlvbihmbikpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG5cdCAgICByZXR1cm4gZm47XG5cdCAgfSxcblx0XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiAocHJvcHMpIHtcblx0ICAgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgICAvLyDnu5Hlrpror6Xlrp7kvovnmoTlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0XG5cdCAgICBpbnN0YW5jZS5oYW5kbGVycyA9IFtdO1xuXHQgICAgaW5zdGFuY2UucHVicyA9IHt9O1xuXHQgICAgcmV0dXJuIGluc3RhbmNlO1xuXHQgIH0sXG5cdFxuXHQgIHNldEhhbmRsZXJzOiBmdW5jdGlvbihoYW5kbGVycykge1xuXHQgICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiuoumYheWPpeafhOS4uuKAnGVUeXBl4oCd55qE5raI5oGv77yM5b2T5pyJ5raI5oGv6L+H5p2l5omn6KGM5Zue6LCD5Ye95pWw77ya4oCcaOKAnVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4Rcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuXHQgICAqIEByZXR1cm4gY29udGV4dFxuXHQgICAqL1xuXHQgIHN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpe1xuXHQgICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG5cdCAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXHRcblx0ICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgcHVicyA9IF9zZWxmLnB1YnMgfHwge307XG5cdFxuXHQgICAgdmFyIGFyciA9IHB1YnNbZVR5cGVdIHx8IFtdO1xuXHQgICAgaWYgKGFycikge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHZhciBfYXJncyA9IGFycltpXSgpO1xuXHQgICAgICAgIGguYXBwbHkoX3NlbGYsIF9hcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGhhbmRsZXJzID0gX3NlbGYuaGFuZGxlcnMgfHwgW107XG5cdCAgICBpZighKGVUeXBlIGluIGhhbmRsZXJzKSkge1xuXHQgICAgICBoYW5kbGVyc1tlVHlwZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIGhhbmRsZXJzW2VUeXBlXS5wdXNoKGgpO1xuXHQgICAgX3NlbGYuc2V0SGFuZGxlcnMoaGFuZGxlcnMpO1xuXHQgICAgcmV0dXJuIF9zZWxmO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOWPlua2iOiuoumYhe+8jOWwhuS8muWPlua2iOKAnGVUeXBl4oCd5Y+l5p+E5a+55bqU55qE4oCcaOKAneWbnuiwg+WHveaVsOS4i+eahOaJgOacieiuoumYhVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBlVHlwZSDorqLpmIXnmoTmtojmga/lj6Xmn4Rcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuXHQgICAqIEByZXR1cm4gY29udGV4dFxuXHQgICAqL1xuXHQgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbihlVHlwZSwgaCkge1xuXHQgICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG5cdCAgICB0aGlzLmNhbGxhYmxlKGgpO1xuXHRcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBzID0gdGhpcy5oYW5kbGVyc1tlVHlwZV07XG5cdCAgICAgIGlmICghcykgcmV0dXJuIHRoaXM7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIHMgPT09ICdvYmplY3QnICYmIHMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgaF9zdHIgPSBoLnRvU3RyaW5nKCk7XG5cdCAgICAgICAgICB2YXIgc19zdHIgPSBzW2ldLnRvU3RyaW5nKCk7XG5cdCAgICAgICAgICBpZiAoaF9zdHIgPT09IHNfc3RyKSB7XG5cdCAgICAgICAgICAgIHMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLmhhbmRsZXJzW2VUeXBlXSA9IHM7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuXHQgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5raI5oGv5YiG5Y+R77yM5bCG5Lya5YiG5Y+R5Yiw5omA5pyJ6K6i6ZiFZVR5cGXlj6Xmn4TnmoTorqLpmIXogIVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg5YiG5Y+R5raI5oGv5Y+l5p+EXG5cdCAgICovXG5cdCAgcHVibGlzaDogZnVuY3Rpb24gKGVUeXBlKSB7XG5cdFxuXHQgICAgdmFyIGFyZ3MgPSBnZXRBcmdzKGFyZ3VtZW50cyk7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzIHx8IFtdO1xuXHRcblx0ICAgIHZhciBzaXplID0gaGFuZGxlcnNbZVR5cGVdID8gaGFuZGxlcnNbZVR5cGVdLmxlbmd0aCA6IDA7XG5cdCAgICBpZiAoc2l6ZSA+IDApIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcblx0ICAgICAgICB2YXIgZm4gPSBoYW5kbGVyc1tlVHlwZV1baV07XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG5cdCAgICAgICAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9LFxuXHRcblx0ICBjYWNoZVB1YnM6IGZ1bmN0aW9uIChlVHlwZSkge1xuXHQgICAgdmFyIHB1YnMgPSB0aGlzLnB1YnMgfHwge307XG5cdCAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcblx0ICAgIGlmICghcHVic1tlVHlwZV0pIHtcblx0ICAgICAgcHVic1tlVHlwZV0gPSBbXTtcblx0ICAgIH1cblx0ICAgIHB1YnNbZVR5cGVdLnB1c2goZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gYXJncztcblx0ICAgIH0pO1xuXHQgIH1cblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjtcblxuXG4vKioqLyB9KSxcbi8qIDQ1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcblx0ICog5Z+657G777yM5o+Q5L6b57G75omA6ZyA6KaB55qE5Z+656GA5bGe5oCnXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0XG5cdC8vIOWfuuexu1xuXHRmdW5jdGlvbiBCYXNlKCkge31cblx0XG5cdC8vIOWwhmV4dGVuZOWSjGNyZWF0Zee9ruS6jnByb3RvdHlwZeWvueixoeS4re+8jOS7peS+v+WtkOexu+e7p+aJv1xuXHRCYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuXHRCYXNlLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcblx0Ly8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuXHRCYXNlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgcmV0dXJuIHRoaXMucHJvdG90eXBlLmV4dGVuZC5jYWxsKHRoaXMsIHByb3BzKTtcblx0fTtcblx0XG5cdEJhc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cdCAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG5cdCAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuXHQgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICB9XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9O1xuXHRcblx0QmFzZS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpIHtcblx0ICAvLyDmtL7nlJ/lh7rmnaXnmoTmlrDnmoTlrZDnsbtcblx0ICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG5cdCAgdHJ5IHtcblx0ICAgIC8qKlxuXHQgICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG5cdCAgICAgKiDlvZPnhLbliY3mj5DmmK/niLbnsbvnmoTlsZ7mgKfpg73mlL7lnKhwcm90b3R5cGXkuK1cblx0ICAgICAqIOiAjOmdnuS4iumdomNyZWF0ZeaWueazleeahOKAnOWunuS+i+WxnuaAp+KAneS4rVxuXHQgICAgICovXG5cdCAgICBpZiAoIWlzRnVuY3Rpb24oT2JqZWN0LmNyZWF0ZSkpIHtcblx0ICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgZnVuY3Rpb24gRigpIHt9XG5cdCAgICAgICAgRi5wcm90b3R5cGUgPSBvO1xuXHQgICAgICAgIHJldHVybiBuZXcgRigpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgICAgU3ViQmFzZS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblx0XG5cdCAgICAvLyDlubbkuJTmt7vliqDoh6rlt7HnmoTmlrnms5XlkozlsZ7mgKdcblx0ICAgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcblx0ICAgIH1cblx0ICAgIFN1YkJhc2UucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViQmFzZTtcblx0XG5cdCAgICAvLyDpnIDopoHku6UuZXh0ZW5k55qE5pa55byP5ZKMLmNyZWF0ZeeahOaWueW8j+iwg+eUqO+8mlxuXHQgICAgU3ViQmFzZS5leHRlbmQgPSBTdWJCYXNlLnByb3RvdHlwZS5leHRlbmQ7XG5cdCAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcblx0ICB9IGNhdGNoKGVycikge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlcnIpO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gU3ViQmFzZTtcblx0ICB9XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEJhc2U7XG5cblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog6I635Y+W6aG16Z2i5LiK55qEIDxtZXRhPiDkuK3kuI4gYXBsdXMg5omT54K555u45YWz55qE5YC8XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KSh0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA0NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zL2xpYl9hcGkvbWFpbi5qc1xuXHQgKiBtZXRh6YWN572u5o+S5Lu277yM6KKrYXBp5o+S5Lu25L6d6LWWXG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwbHVzX2NvbmZpZykge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICB2YXIgXyQgPSAoYXBsdXMuXyQgPSBhcGx1cy5fJCB8fCB7fSk7IC8vIOWGhemDqOS9v+eUqOeahOWPmOmHj1xuXHQgIF8kLmlzX3Rlcm1pbmFsID0gdHJ1ZTtcblx0ICBfJC5zZW5kX3B2X2NvdW50ID0gMDtcblx0ICAvLyBfJC5zdGF0dXMgPSBTVEFUVVM7XG5cdCAgLy8gXyQuc2NyaXB0X25hbWUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lO1xuXHQgIF8kLnNwbSA9IHtcblx0ICAgIGRhdGE6IHt9XG5cdCAgfTtcblx0ICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG5cdCAgYXBsdXMuZ2xvYmFsQ29uZmlnID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZztcblx0XG5cdCAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcblx0ICAgIG1ldGFJbmZvLnNldE1ldGFJbmZvKGssIGFwbHVzX2NvbmZpZy5tZXRhSW5mb1trXSk7XG5cdCAgfVxuXHQgIGFwbHVzLl8kID0gXyQ7XG5cdFxuXHQgIGFwbHVzLmlzSW50ZXJuYXRpb25hbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0XG5cdHZhciBpbmZvID0ge307XG5cdFxuXHR2YXIgT0JKRUNUID0gJ29iamVjdCc7XG5cdHZhciBTVFJJTkcgPSAnc3RyaW5nJztcblx0XG5cdC8qKlxuXHQgKiBAcmV0dXJucyB7e319XG5cdCAqL1xuXHR2YXIgbGFzdF9pbmZvO1xuXHRmdW5jdGlvbiBnZXRJbmZvKCkge1xuXHQgIGxhc3RfaW5mbyA9IGluZm8gfHwge307XG5cdCAgcmV0dXJuIGluZm87XG5cdH07XG5cdGV4cG9ydHMuZ2V0SW5mbyA9IGdldEluZm87XG5cdFxuXHQvLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuXHRmdW5jdGlvbiBxR2V0ICgpIHtcblx0ICByZXR1cm4gbGFzdF9pbmZvIHx8IGdldEluZm8oKTtcblx0fTtcblx0ZXhwb3J0cy5xR2V0ID0gcUdldDtcblx0XG5cdC8qKlxuXHQgKiDliqjmgIHphY3nva5tZXRhXG5cdCAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuXHQgKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtcblx0ICogQHBhcmFtIHtPYmplY3R9IHZcblx0ICovXG5cdGZ1bmN0aW9uIHNldE1ldGFJbmZvIChrLCB2KSB7XG5cdCAgaWYgKCFsYXN0X2luZm8pIHtcblx0ICAgIGxhc3RfaW5mbyA9IHt9O1xuXHQgIH1cblx0ICBpZihrID09PSAnYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleScpe1xuXHQgICAgY2F0Y2hFeGNlcHRpb24oJ3RoZSBBUEkgYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleSBpcyBkZXByZWNhdGVkLCBpZiBuZWVkZWQgcGxlYXNlIGNvbmNhdCBBUExVUyBTREsgc3VwcG9ydGVyJyk7XG5cdCAgICBhcGx1cy5yZWNvcmQoJy9pbmplY3QucmVjb3JkLmdva2V5JywnT1RIRVInLCcnKTtcblx0ICB9XG5cdCAgbGFzdF9pbmZvW2tdID0gdjtcblx0ICByZXR1cm4gdHJ1ZTtcblx0fTtcblx0ZXhwb3J0cy5zZXRNZXRhSW5mbyA9IHNldE1ldGFJbmZvO1xuXHRcblx0XG5cdHZhciBjYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChtc2cpIHtcblx0ICB0cnkge1xuXHQgICAgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKG1zZyk7XG5cdCAgfSBjYXRjaCAoZSkge31cblx0fTtcblx0ZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGNhdGNoRXhjZXB0aW9uO1xuXHRcblx0LyoqXG5cdCAqIGdldCBtZXRhSW5mbyBieSBrZXlcblx0ICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG5cdCAqIOivpuinge+8mmh0dHBzOi8vbGFyay5hbGlwYXkuY29tL2FwbHVzanMvcHJvamVjdC9wZXJmb3JtYW5jZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ31cblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0dmFyIGdldE1ldGFJbmZvID0gZnVuY3Rpb24oaykge1xuXHQgIGlmICghbGFzdF9pbmZvKSB7XG5cdCAgICBsYXN0X2luZm8gPSB7fTtcblx0ICB9XG5cdCAgcmV0dXJuIGxhc3RfaW5mb1trXSB8fCAnJztcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhSW5mbyA9IGdldE1ldGFJbmZvO1xuXHRcblx0XG5cdC8qKlxuXHQgKiDor4bliKvkuJrliqHliqjmgIHmi5PlsZXlj4LmlbBcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICAgbG9na2V5OiBsb2drZXksXG5cdCAqICAgIGdta2V5OiBnbWtleSxcblx0ICogICAgZ29rZXk6IGdva2V5XG5cdCAqIH1cblx0ICovXG5cdHZhciBnZXRVc2VySW5qZWN0R29rZXkgPSBmdW5jdGlvbiAob3B0cykge1xuXHQgIHZhciB1c2VyRm4gPSBnZXRNZXRhSW5mbygnYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleScpO1xuXHQgIGlmICh0eXBlb2YgdXNlckZuID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gdXNlckZuKG9wdHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gb3B0cy5nb2tleTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuZ2V0VXNlckluamVjdEdva2V5ID0gZ2V0VXNlckluamVjdEdva2V5O1xuXHRcblx0LyoqXG5cdCAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcblx0ICogIC0gYEFycmF5LnByb3RvdHlwZS5jb25jYXRgIGNhbGxlZCBvbiBBcnJheSB2YWx1ZXMuXG5cdCAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICogIEBwYXJhbSBrXG5cdCAqICBAcGFyYW0gdlxuXHQgKi9cblx0dmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcblx0ICAvLyBjb25zb2xlLmxvZyhrLCB2KTtcblx0ICBpZiAoayAmJiB2KSB7XG5cdCAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG5cdCAgICB2YXIgcHJvY2Vzc09iamVjdCA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgb2xkX3ZhbHVlLCBuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdCAgICAvLyBhcGx1cy1hdXRvLWV4cCB8fCBhcGx1cy1hdXRvLWNsa1xuXHQgICAgdmFyIHByb2Nlc3NBcnJheSA9IGZ1bmN0aW9uIChvbGRfdmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuXHQgICAgICAgIHRvU2V0TWV0YUluZm8oaywgb2xkX3ZhbHVlLmNvbmNhdChuZXdfdmFsdWUpKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICAgIHByb2Nlc3NBcnJheSh2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgdG9TZXRNZXRhSW5mbyA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgICAgIF9zZXRNZXRhSW5mbyhrZXksIHZhbHVlLCB7XG5cdCAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGZsYWc7XG5cdCAgICB2YXIgX29sZFZhbHVlID0gZ2V0TWV0YUluZm8oayk7XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCBPYmplY3QuYXNzaWduKHt9LCBfb2xkVmFsdWUsIGZvcm1hdC5wYXJhbTJvYmoodikpKTtcblx0ICAgICAgZmxhZyA9IHRydWU7XG5cdCAgICB9XG5cdCAgICBpZiAoayA9PT0gJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHtcblx0ICAgICAgdmFyIHBhZ2VQcm9wZXJ0aWVzID0gdjtcblx0ICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuXHQgICAgICAgIGZvciAodmFyIF9rIGluIF9vbGRWYWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHZbX2tdKSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IF9vbGRWYWx1ZVtfa107XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuXHQgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIGlmIChfb2xkVmFsdWUpIHtcblx0ICAgICAgaWYgKHR5cGVvZiBfb2xkVmFsdWUgPT09IE9CSkVDVCkge1xuXHQgICAgICAgIHByb2Nlc3NPYmooX29sZFZhbHVlKTtcblx0ICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0eXBlb2YgdG1wX3BhcnNlID09PSBPQkpFQ1QpIHtcblx0ICAgICAgICAgICAgcHJvY2Vzc09iaih0bXBfcGFyc2UpO1xuXHQgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoIWZsYWcpIHtcblx0ICAgICAgdG9TZXRNZXRhSW5mbyhrLCB2KTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuYXBwZW5kTWV0YUluZm8gPSBhcHBlbmRNZXRhSW5mbztcblx0XG5cdHZhciBfc2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoYXJnMSwgdmFsdWUpIHtcblx0ICB2YXIgaztcblx0ICB2YXIgdjtcblx0ICB2YXIgZGVmYXVsdE1vZGUgPSAnT1ZFUldSSVRFJztcblx0ICB2YXIgbW9kZSA9IGRlZmF1bHRNb2RlO1xuXHQgIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGsgPSBhcmcxLm1ldGFOYW1lO1xuXHQgICAgdiA9IGFyZzEubWV0YVZhbHVlO1xuXHQgICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgayA9IGFyZzE7XG5cdCAgICB2ID0gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChtb2RlID09PSBkZWZhdWx0TW9kZSkge1xuXHQgICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIF8kLm1ldGFfaW5mbyA9IHFHZXQoKTtcblx0ICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdFxuXHQgICAgICB2YXIgbXNncyA9IFsnc2V0TWV0YUluZm8nLCBrLCB2LCB7fV07XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICAgIHJldHVybiBycztcblx0ICAgIH0gXG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBhcHBlbmRNZXRhSW5mbyhrLCB2KTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuX3NldE1ldGFJbmZvID0gX3NldE1ldGFJbmZvO1xuXG4vKioqLyB9KSxcbi8qIDQ5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR2YXIgRk4gPSAnZnVuY3Rpb24nO1xuXHRcblx0dmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBwdWJzdWIgPSBhcGx1cy5hcGx1c19wdWJzdWIgfHwge307XG5cdCAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuXHQgIHJldHVybiBmbGFnID8gcHVic3ViIDogJyc7XG5cdH07XG5cdFxuXHQvKipcblx0ICog5YiG5Y+R5raI5oGv5bel5YW35Ye95pWwXG5cdCAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuXHQgKi9cblx0ZXhwb3J0cy5kb1B1Yk1zZyA9IGZ1bmN0aW9uKGFyZ3MpIHtcblx0ICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG5cdCAgaWYgKHB1YnN1YiAmJiB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOKSB7XG5cdCAgICBwdWJzdWIucHVibGlzaC5hcHBseShwdWJzdWIsIGFyZ3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBjYWNoZeW9k+WJjeeahOWIhuWPkeWHveaVsOeahOW3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtBcnJheX0gYXJncyBba2V5LCBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl1cblx0ICovXG5cdGV4cG9ydHMuZG9DYWNoZVB1YnMgPSBmdW5jdGlvbihhcmdzKSB7XG5cdCAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuXHQgIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG5cdCAgICBwdWJzdWIuY2FjaGVQdWJzLmFwcGx5KHB1YnN1YiwgYXJncyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuXHQgKiBAcGFyYW1zIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IoWyBtc2dWYWx1ZTEsIG1zZ1ZhbHVlMiwgbXNnVmFsdWUzLCBtc2dWYWx1ZU4sIC4uLl0pXG5cdCAqL1xuXHRleHBvcnRzLmRvU3ViTXNnID0gZnVuY3Rpb24oa2V5LCBjYikge1xuXHQgIHZhciBwdWJzdWIgPSBnZXRQdWJzdWIoKTtcblx0ICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuXHQgICAgcHVic3ViLnN1YnNjcmliZShrZXksIGNiKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICog5rOo5YWlbG9nQ29uZmlnLOS+m+WQjue7reaPkuS7tuS9v+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBnZXRMb2dDb25maWc6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGxvZ0NvbmZpZyA9IHt9O1xuXHQgICAgICB2YXIgcGx1Z2lucyA9IHRoaXMub3B0aW9ucy5jb25maWcucGx1Z2lucztcblx0XG5cdCAgICAgIGZvciAodmFyIGsgaW4gcGx1Z2lucykge1xuXHQgICAgICAgIGxvZ0NvbmZpZ1trXSA9IHtcblx0ICAgICAgICAgIHBsdWdpbnM6IHBsdWdpbnNba10sXG5cdCAgICAgICAgICBjb250ZXh0OiB7fVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgZWFjaChwbHVnaW5zW2tdLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgbG9nQ29uZmlnW2tdLmNvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnIHx8IHt9O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBsb2dDb25maWc7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcgPSB0aGlzLmdldExvZ0NvbmZpZygpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcucGFnZUxvYWRUaW1lID0gdGhpcy5vcHRpb25zLmNvbnRleHQuUEFHRV9MT0FEX1RJTUU7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDUxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2V0YWcuanNcblx0ICpcblx0ICog5L2c55So77ya5ZCM5q2lYXBsdXNfaW5pdOW3peS9nOa1geeahOS/oeaBr1xuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsRXRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNTIpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgRU1QVFlfQ05BID0gJ0VNUFRZX0NOQSc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBfc3luY0V0YWc6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBjaGVjayA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgICAgICAgdmFyIGNuYSA9IG8gJiYgby5kYXRhID8gby5kYXRhLmNuYSA6ICcnO1xuXHQgICAgICAgIGlmICghY25hKSB7XG5cdCAgICAgICAgICBpZiAoYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID09PSAnWScpIHtcblx0ICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWIgQOiwi+WjqyAyMDAyMS0wMS0xOVxuXHQgICAgICAgICAgICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdldGFnJywgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRvU3luY0V0YWcoKTsgIFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5LCBjbmEpO1xuXHQgICAgICAgICAgY2FsbGJhY2soY25hKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIFxuXHQgICAgICB2YXIgYXBsdXNfcmhvc3RfdiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG5cdCAgICAgIHZhciB1cmw7XG5cdFxuXHQgICAgICBpZiAoYXBsdXNfcmhvc3Rfdikge1xuXHQgICAgICAgIHVybCA9IHV0aWxFdGFnLmdldFVybCh7XG5cdCAgICAgICAgICBlZ1VybDogKGFwbHVzX3Job3N0X3YuaW5kZXhPZignLy8nKSA9PT0gLTEgPyAnLy8nICsgYXBsdXNfcmhvc3RfdiA6IGFwbHVzX3Job3N0X3YpICsgJy9lZy5qcydcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcblx0ICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmVnVXJsID0gdXJsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIHZhciBldGFnU3RvcmFnZUtleSA9IGFwbHVzLmdsb2JhbENvbmZpZy5FVEFHX1NUT1JBR0VfS0VZO1xuXHQgICAgICB2YXIgdG9TeW5jRXRhZyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAodXJsKSB7XG5cdCAgICAgICAgICBhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPSAnWSc7XG5cdCAgICAgICAgICBtaW5pLnJlcXVlc3QodXJsLCB7XG5cdCAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG5cdCAgICAgICAgICAgIHJlcXVlc3RNZXRob2ROYW1lOiAncmVxdWVzdCdcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ04nO1xuXHQgICAgICAgICAgICB2YXIgZXRhZyA9ICcnO1xuXHQgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgJyc7XG5cdCAgICAgICAgICAgICAgdmFyIGFyciA9IGRhdGEuc3BsaXQoJzsnKTtcblx0ICAgICAgICAgICAgICBpZiAoYXJyLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBldGFnS2V5VmFsdWUgPSBhcnJbMV07XG5cdCAgICAgICAgICAgICAgICB2YXIgZXRhZ3MgPSBldGFnS2V5VmFsdWUuc3BsaXQoJz0nKTtcblx0ICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnc1sxXSB8fCAnJztcblx0ICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnLnJlcGxhY2UoL1xcXCIvZywgJycpO1xuXHQgICAgICAgICAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSwgZXRhZyk7XG5cdCAgICAgICAgICAgICAgICBjdHguc2V0U3RvcmFnZSh7XG5cdCAgICAgICAgICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG5cdCAgICAgICAgICAgICAgICAgIGRhdGE6IHtcblx0ICAgICAgICAgICAgICAgICAgICBjbmE6IGV0YWdcblx0ICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAvLyDkuLrkuobop6PlhrPlubblj5Hpl67popjvvIzku45hcGx1c19xdWV1ZeaUueaIkOebtOaOpeeUqGFwbHVzLmFwbHVzX3B1YnN1YlxuXHQgICAgICAgICAgICAgICAgLy8g5bm2Y2FjaGXkvY/kuIrkuIDmrKHnmoTnu5PmnpwgQOiwi+WjqyAyMDAyMS0wMS0xOVxuXHQgICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnB1Ymxpc2goJ2V0YWcnLCBldGFnKTtcblx0ICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5jYWNoZVB1YnMoJ2V0YWcnLCBldGFnKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICB1bG9nKCkudyhlKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBpZiAoIWV0YWcpIHtcblx0ICAgICAgICAgICAgICBldGFnID0gRU1QVFlfQ05BO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIGNhbGxiYWNrKGV0YWcpO1xuXHQgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlczIpIHtcblx0ICAgICAgICAgICAgdWxvZygpLncocmVzMik7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIHZhciBDTkEgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKGV0YWdTdG9yYWdlS2V5KTtcblx0ICAgICAgaWYgKENOQSkge1xuXHQgICAgICAgIGNhbGxiYWNrKENOQSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY3R4LmdldFN0b3JhZ2Uoe1xuXHQgICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcblx0ICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgY2hlY2socmVzKTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBmYWlsOiBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgICAgIGNoZWNrKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYzvvIzov5Tlm57igJxwYXVzZeKAneaaguWBnOS4remXtOS7tuaJp+ihjO+8jOi/lOWbnuS4gOS4quaVtOaVsOKAnG7igJ3lkYror4nkuK3pl7Tku7bigJxu4oCd5q+r56eS5ZCO57un57ut5omn6KGM5Lit6Ze05Lu2XG5cdCAgICAgKiDigJzmmoLlgZzigJ3mnIDlpJoxMHPvvIzoi6XotoXml7bkuK3pl7Tku7bkvJrlvLrliLbnu6fnu63miafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIC8vIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBldGFnVGltZW91dCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1ldGFnLXRpbWVvdXQnKTtcblx0ICAgICAgdmFyIGRlZmF1bHRUaW1lID0gMjAwO1xuXHQgICAgICB2YXIgdGltZSA9IGRlZmF1bHRUaW1lO1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRpbWUgPSBwYXJzZUludChldGFnVGltZW91dCk7XG5cdCAgICAgICAgaWYgKGlzTmFOKHRpbWUpKSB7XG5cdCAgICAgICAgICB0aW1lID0gZGVmYXVsdFRpbWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuX3N5bmNFdGFnKGZ1bmN0aW9uIChjbmEpIHtcblx0ICAgICAgICBpZiAoX3NlbGYub3B0aW9ucy5jb250ZXh0LmV0YWcpIHtcblx0ICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmNuYSA9IGNuYTsgIFxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGltZSA+PSAyMDApIHtcblx0ICAgICAgICAgIGNiKGNuYSk7ICBcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyDlkYror4ljb21wb3Nl5pqC5YGc5omn6KGM5Lit6Ze05Lu277yM55u05YiwY2Llm57liLDlkI7lho3nu6fnu61cblx0ICAgICAgaWYgKHRpbWUgPCAyMDApIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRpbWU7XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZG9t5pON5L2c5bel5YW357G777yM6L+Z5Liq5Z+656GA5bel5YW357G75Lya6KKr5YW25LuW5bel5YW357G75byV55So77yM5pWF5Lil56aB5Zyo6L+Z6YeM5YaN5byV55So5YW25LuW5qih5Z2X5Lul5YWN5Ye6546w6Zeu6aKYXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCk7XG5cdFxuXHQvLyDku4XpmZDlvLnlhoXvvJvlsI/nsbPnpoHnlKhlZy5qc+W6lOWvueetlueVpe+8muS9v+eUqOWKqOaAgeWQjue8gOWQjVxuXHQvLyDlkI7nvIDlkI3nlJ/miJDmlrnms5U6IOW9k+WJjeaXtumXtOaIs+i9rDE26L+b5Yi277yM5Y+W5ZCOOOS9je+8jFxuXHQvLyBmdW5jdGlvbiBldGFnVXJsU3VmZml4KGV0YWdVcmwpIHtcblx0Ly8gICB2YXIgZHluYW1pY1VybCA9IGV0YWdVcmw7XG5cdC8vICAgdHJ5IHtcblx0Ly8gICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQvLyAgICAgICB0cnkge1xuXHQvLyAgICAgICAgIHZhciB0aW1lU3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblx0Ly8gICAgICAgICB2YXIgZHluYW1pY1N1ZmZpeCA9IHRpbWVTdGFtcC50b1N0cmluZygxNikuc2xpY2UoLTgpO1xuXHQvLyAgICAgICAgIHdoaWxlKGR5bmFtaWNTdWZmaXgubGVuZ3RoIDwgOCkge1xuXHQvLyAgICAgICAgICAgZHluYW1pY1N1ZmZpeCA9IGR5bmFtaWNTdWZmaXggKyAnZic7XG5cdC8vICAgICAgICAgfVxuXHQvLyAgICAgICAgIGR5bmFtaWNVcmwgPSBldGFnVXJsLnJlcGxhY2UoL2VnLmpzLywgZHluYW1pY1N1ZmZpeCArICcuanMnKTtcblx0Ly8gICAgICAgfSBjYXRjaChlKSB7XG5cdC8vICAgICAgIH1cblx0Ly8gICAgICAgcmV0dXJuIGR5bmFtaWNVcmw7XG5cdC8vICAgICB9XG5cdC8vICAgfSBjYXRjaChlKSB7XG5cdFxuXHQvLyAgIH1cblx0Ly8gICByZXR1cm4gZHluYW1pY1VybDtcblx0Ly8gfVxuXHRcblx0ZXhwb3J0cy5nZXRVcmwgPSBmdW5jdGlvbiAoZXRhZykge1xuXHQgIHZhciB1cmwgPSB1dGlsRGF0YS5nZXRVcmwoZXRhZyAmJiBldGFnLmVnVXJsKTsgIFxuXHQgIC8vIHVybCA9IGV0YWdVcmxTdWZmaXgodXJsKTtcblx0ICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuXHQgIC8vIGlmICh1cmwuaW5kZXhPZignaHR0cCcpICE9PSAwKSB7XG5cdCAgLy8gICB2YXIgcHJvdG9jYWwgPSAnaHR0cHM6Jztcblx0ICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgIC8vICAgICBwcm90b2NhbCA9ICdodHRwOic7XG5cdCAgLy8gICB9XG5cdCAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAvLyB9XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA1MyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcblx0ICpcblx0ICogICDkvZznlKjvvJog5L2V5pe25omn6KGMc2VuZHB25o+S5Lu2XG5cdCAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2Vcblx0ICogICBmbjogcnVuICjmj5Lku7bmoIflh4bnmoTmiafooYzlhaXlj6MpXG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIjFcIjog562J5b6FNuenkuWQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG5cdCAqICAgYXBsdXMtd2FpdGluZz1cIm5cIjog5YW25LitbuS4uuWkp+S6jjHnmoTmraPmlbTmlbAsIGFwbHVz5Zyo562J5b6Fbuavq+enkuS5i+WQjuWwneivleWPkemAgVBW5pel5b+XO1xuXHQgKlxuXHQgKiAgIGRlcHPvvJog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+WbWV0YV9pbmZvXG5cdCAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuXHQgICAgICog5q2k5aSE6ZyA6KaB5Yqo5oCB5LuOIG1ldGFJbmZv5qih5Z2X5Lit5Y676LCD55SoZ2V0SW5mb+aWueazleadpeiOt+WPluebuOWFs+S/oeaBr++8jOi/meagt+WBmueahOWdj+WkhOaYr+a2iOiAl+aAp+iDvVxuXHQgICAgICovXG5cdCAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mbztcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIG1ldGFfaW5mbyA9IHRoaXMuZ2V0TWV0YUluZm8oKSB8fCB7fTtcblx0ICAgICAgcmV0dXJuIG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcblx0ICAgICAqIDxtZXRhIG5hbWU9XCJhcGx1cy13YWl0aW5nXCIgY29udGVudD1cInh4eFwiIC8+XG5cdCAgICAgKiAgIHh4eDogJ01BTicgLSDkuI3lj5HpgIFwdueahOagh+ivhlxuXHQgICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiKOe7iOatouS4remXtOS7tuaJp+ihjCkgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbihzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuXHQgICAgICBpZiAoYXBsdXNXYWl0aW5nICYmIGNvbmZpZy5pc19hdXRvKSB7XG5cdCAgICAgICAgYXBsdXNXYWl0aW5nID0gdGhpcy5nZXRBcGx1c1dhaXRpbmcoKSArICcnO1xuXHQgICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuXHQgICAgICAgICAgYXBsdXNXYWl0aW5nOiBhcGx1c1dhaXRpbmdcblx0ICAgICAgICB9O1xuXHQgICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcblx0ICAgICAgICBjYXNlIGFwbHVzU3RhdGljLl9VU0VSX0lEOlxuXHQgICAgICAgIGNhc2UgYXBsdXNTdGF0aWMuX0FOT05ZX0lEOlxuXHQgICAgICAgIGNhc2UgJ01BTic6XG5cdCAgICAgICAgICByZXR1cm4gJ2RvbmUnO1xuXHQgICAgICAgIGNhc2UgJzEnOlxuXHQgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgY2IoKTtcblx0ICAgICAgICAgIH0sIDYwMDApO1xuXHQgICAgICAgICAgcmV0dXJuIDYwMDA7XG5cdCAgICAgICAgZGVmYXVsdDpcblx0ICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcblx0ICAgICAgICAgIGlmICgobiArICcnKSAhPT0gJ05hTicpIHtcblx0ICAgICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcblx0ICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgICAgIH0sIG4pO1xuXHQgICAgICAgICAgICByZXR1cm4gbjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfSxcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB3aGVyZV90b19zZW5kX21pbmlfdW0uanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICAvKipcblx0ICAgICAqIOiOt+WPliBtZXRhX2luZm8gXG5cdCAgICAqL1xuXHQgICAgZ2V0TWV0YUluZm86IGZ1bmN0aW9uKGtleSkge1xuXHQgICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuXHQgICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciB0cmFja0RvbWFpbiA9IHRoaXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTsgICAgICBcblx0ICAgICAgaWYgKCF1dGlsLmNoZWNrRG9tYWluKHRyYWNrRG9tYWluKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIG1pbmlMb2cgPSBtaW5pLmdldExvZ0RvbWFpbigpO1xuXHQgICAgICBpZiAoIW1pbmlMb2cpIHtcblx0ICAgICAgICB1bG9nKCkudGlwX3coJ2N1cnJlbnQgbWluaWFwcCBmcmFtZXdvcmsgaXMgbm90IHN1cHBvcnRlZCEhJyk7XG5cdCAgICAgICAgcmV0dXJuICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cdCAgICAgIH1cblx0ICAgICAgLy8gdmFyIHVybCA9IFsnLy8nLCByaG9zdCwgbG9nRG9tYWluXTtcblx0ICAgICAgcmV0dXJuIHV0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSArIG1pbmlMb2c7XG5cdCAgICB9LFxuXHRcblx0XG5cdCAgICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZCA9ICdQT1NUJztcblx0ICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpO1xuXHQgICAgICBpZiAoIXVybCB8fCAodXJsLmluZGV4T2YoJ2h0dHBzOi8vJykgPCAwICYmIHVybC5pbmRleE9mKCdodHRwOi8vJykpKSB7XG5cdCAgICAgICAgdWxvZygpLncoJ2N1cnJlbnQgdHJhY2tEb21haW4gaW52YWxpZDogJyArIHVybCk7XG5cdCAgICAgICAgcmV0dXJuICdkb25lJztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLnVybCA9IHVybDtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvd2hhdF90b19zZW5kLmpzXG5cdCAqXG5cdCAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuXHQgKiAgICAgIOaMiemhuuW6j+WwhmFwbHVzLnB2X2RhdGEuYmFzaWPjgIFleHBhcmFtc+OAgW9sZFBhcmFtc+OAgWFwbHVzLnB2X2RhdGEuZXh0cmHlm5vkuK3nsbvlnovnmoTlj4LmlbBtZXJnZeWcqOS4gOS4quaVsOe7hOS4rVxuXHQgKiBkZXBzOiDml6Bcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHQvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTsgIFxuXHR2YXIgbG9nSWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KTtcblx0dmFyIHV0aWxQYXJhbXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KTtcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIENOVCA9IGFwbHVzU3RhdGljLlNQTV9DTlQ7XG5cdHZhciBVUkwgPSBhcGx1c1N0YXRpYy5TUE1fVVJMO1xuXHR2YXIgUFJFID0gYXBsdXNTdGF0aWMuU1BNX1BSRTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBnZXRDb21tb25QYXJhbXM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgZXRhZyA9IGNvbnRleHQuZXRhZyB8fCB7fTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcblx0ICAgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBwbGF0Zm9ybVR5cGUgPSBhcGx1cy5nZXRNZXRhSW5mbygncGxhdGZvcm1UeXBlJykgfHwgbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcblx0XG5cdCAgICAgIHZhciB1c2VySW5mbyA9IHtcblx0ICAgICAgICBfZGV2X2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpLFxuXHQgICAgICAgIF9hbm9ueV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSxcblx0ICAgICAgICBfdXNlcl9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX1VTRVJfSUQpLFxuXHQgICAgICAgIF91c2VyX25pY2s6IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJyksXG5cdCAgICAgICAgX3Nlc3Npb25faWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdfc2Vzc2lvbl9pZCcpLFxuXHQgICAgICAgIHVhaWQ6IChhcGx1cy5nZXRNZXRhSW5mbygndWFpZCcpICsgJycpID09PSAnMScgPyAxIDogMCxcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIGlmICghYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU0pIHtcblx0ICAgICAgICB2YXIgUGFnZU1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2KTtcblx0ICAgICAgICB2YXIgcGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG5cdCAgICAgICAgdXNlckluZm8uX3BhZ2VfdGl0bGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlVGl0bGUocm91dGUpIHx8ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuXHQgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuXHRcblx0ICAgICAgdmFyIHVybCA9ICctJztcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcblx0ICAgICAgICB2YXIgcGFnZUluc3RhbmNlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0xXSB8fCB7fTtcblx0ICAgICAgICB2YXIgY3VyUGF0aCA9IHVzZXJkYXRhLmdva2V5ICYmIHVzZXJkYXRhLmdva2V5LmN1cnJlbnRQYXRoO1xuXHQgICAgICAgIHVybCA9IGN1clBhdGggfHwgcGFnZUluc3RhbmNlLnJvdXRlIHx8IHBhZ2VJbnN0YW5jZS5pcztcblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgXG5cdCAgICAgIHZhciBsb2dJZEtleSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgdXJsO1xuXHQgICAgICB2YXIgbG9nSWRLZXkyID0gY2xpZW50Lm1vZGVsICsgY2xpZW50Lm5ldHdvcmtUeXBlICsgY29uZmlnLnRpdGxlICsgZXRhZy5jbmE7XG5cdCAgICAgIHZhciBjYWNoZSA9IChnbG9iYWxDb25maWcuaXNEZWNvZGVVcmwgPyAnRENfJyA6ICcnKSArIGxvZ0lkLmdldExvZ0lkKGxvZ0lkS2V5LCBsb2dJZEtleTIpO1xuXHRcblx0ICAgICAgdmFyIGFwcEtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG5cdCAgICAgIGlmICghYXBwS2V5KSB7XG5cdCAgICAgICAgdWxvZygpLncoJ3BsZWFzZSBzZXQgYXBwS2V5IGluIGFwbHVzIG1ldGFJbmZvIGJlZm9yZSBzZW5kUFYhJyk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNvbW1vblBhcmFtcyA9ICBPYmplY3QuYXNzaWduKHt9LCB7XG5cdCAgICAgICAgYXBwS2V5OiBhcHBLZXksXG5cdCAgICAgICAgY2FjaGU6IGNhY2hlLFxuXHQgICAgICAgIGNuYTogZXRhZy5jbmEsXG5cdCAgICAgICAgZXRhZzogZXRhZyxcblx0ICAgICAgICBwcmU6IF8kLnBhZ2VfcmVmZXJyZXIgfHwgJy0nLFxuXHQgICAgICAgIHNka19pbmZvOiB7XG5cdCAgICAgICAgICBqc3ZlcjogZ2xvYmFsQ29uZmlnLnNjcmlwdF9uYW1lLFxuXHQgICAgICAgICAgbHZlcjogZ2xvYmFsQ29uZmlnLmx2ZXIsXG5cdCAgICAgICAgICBjdXN0b21TZGtJZDogYXBsdXMuZ2V0TWV0YUluZm8oJ2N1c3RvbVNka0lkJykgfHwgJycsXG5cdCAgICAgICAgICBwbGF0Zm9ybVR5cGU6IHBsYXRmb3JtVHlwZS50b0xvd2VyQ2FzZSgpLFxuXHQgICAgICAgIH0sXG5cdCAgICAgICAgdGl0bGU6IGNvbmZpZy50aXRsZSB8fCAnJyxcblx0ICAgICAgICB1cmw6IHVybCB8fCAnLScsXG5cdCAgICAgICAgY2xpZW50OiBjbGllbnQsXG5cdCAgICAgICAgdGltZVpvbmU6IHV0aWxQYXJhbXMuZ2V0VGltZVpvbmUoKSxcblx0ICAgICAgICBnbWtleTogdXNlcmRhdGEuZ21rZXkgfHwgJycsXG5cdCAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZFxuXHQgICAgICB9LCB1c2VySW5mbyk7XG5cdCAgICAgIFxuXHQgICAgICB2YXIgZ29rZXkgPSB1c2VySW5mbztcblx0XG5cdCAgICAgIGlmIChzcG0uc3BtX3VybCkge1xuXHQgICAgICAgIGdva2V5W1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJzsgIFxuXHQgICAgICB9XG5cdCAgICAgIGlmIChzcG0uc3BtX3ByZSkge1xuXHQgICAgICAgIGdva2V5W1BSRV0gPSBzcG0uc3BtX3ByZSB8fCAnJzsgIFxuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoc3BtLnNwbV9jbnQpIHtcblx0ICAgICAgICBnb2tleVtDTlRdID0gc3BtLnNwbV9jbnQgfHwgJyc7XG5cdCAgICAgIH1cblx0ICAgICAgZ29rZXlbYXBsdXNTdGF0aWMuUFZJRF0gPSBhcGx1cy5wdmlkIHx8ICcnO1xuXHQgICAgICBjb21tb25QYXJhbXMuc2Vzc2lvbkFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtc2Vzc2lvbi1hcmdzJyk7XG5cdCAgICAgIGNvbW1vblBhcmFtcy5nbG9iYWxBcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7ICAvLyAyMDIxLTAxLTE0QOS5nemUoemcgOaxglxuXHQgICAgICAvLyDpnIDopoHliKDpmaTnmoTku6PnoIEtLS0tZW5kXG5cdCAgICAgIGNvbW1vblBhcmFtcy5nb2tleSA9IGdva2V5O1xuXHQgICAgICByZXR1cm4gY29tbW9uUGFyYW1zO1xuXHQgICAgfSxcblx0XG5cdFxuXHQgICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgICB2YXIgY29tbW9uUGFyYW1zID0gdGhpcy5nZXRDb21tb25QYXJhbXMoKTtcblx0ICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBjb21tb25QYXJhbXMuc2RrX2luZm8ubWFuc25kbG9nID0gMTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uUGFyYW1zLCB7XG5cdCAgICAgICAgZXZlbnRfY29kZTogYXBsdXNTdGF0aWMuUFZfQ09ERSxcblx0ICAgICAgICBsb2d0eXBlOiAnMScsXG5cdCAgICAgICAgbG9na2V5OiAnL3Z4LmdpZicsXG5cdCAgICAgICAgZXZlbnRfdGltZXN0YW1wOiBhcGx1cy5fJC5zZW5kX3B2X2NvdW50ID4gMCA/IG5ldyBEYXRlKCkgOiBhcGx1cy5sb2dDb25maWcucGFnZUxvYWRUaW1lLFxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2V0SGpsalBhcmFtczogZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICAgIHZhciBjID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGMudXNlcmRhdGEgfHwge307XG5cdFxuXHQgICAgICB2YXIgaGpsalBhcmFtcyA9IHtcblx0ICAgICAgICBldmVudF9jb2RlOiBhcGx1c1N0YXRpYy5FVkVOVF9JRF9NQVBbdXNlcmRhdGEuZ21rZXldIHx8IHVzZXJkYXRhLmdta2V5LCAvLyBhcGx1c1N0YXRpYy5PVEhFUl9DT0RFLFxuXHQgICAgICAgIGxvZ3R5cGU6ICcyJyxcblx0ICAgICAgICBsb2drZXk6IHVzZXJkYXRhLmxvZ2tleSxcblx0ICAgICAgICBldmVudF90aW1lc3RhbXA6IG5ldyBEYXRlKCksXG5cdCAgICAgICAgLy8gbWFuc25kbG9nOiAnMScsXG5cdCAgICAgIH07XG5cdFxuXHQgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuXHQgICAgICogMi4gYmVhY29u5omp5bGV5Y+C5pWwOiBleHBhcmFtc1xuXHQgICAgICogMy4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlrqLmiLfnq6/lj4LmlbA6IGV4dHJhTGlzdFxuXHQgICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcblx0ICAgICAqIDQuIGxvY2FsU3RvcmFnZeS4reWtmOWCqOeahOS4iuS4gOmhtXNwbeS/oeaBrzogc3BtYWJ0ZXN0XG5cdCAgICAgKiDku6XkuIo06YOo5YiG5ou86KOF5oiQcHZkYXRhXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBwYXJhbXMgPSB7fTtcblx0ICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25maWcucmVjb3JkVHlwZSA9PT0gXCJQVlwiKSB7XG5cdCAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRQdlBhcmFtcygpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHBhcmFtcyA9IHRoaXMuZ2V0SGpsalBhcmFtcygpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gcGFyYW1zO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBwdmlkXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxIYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MSk7XG5cdFxuXHR2YXIgZ2V0UmFuZG9tSWQgPSBmdW5jdGlvbiAoc2l6ZSkge1xuXHQgIC8qKlxuXHQgICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuXHQgICAqIHB2IGlkIOWPqumcgOimgeW9k+WJjeeUqOaIt+S8muivneWUr+S4gOWNs+WPr++8jOi/meWEv+S9v+eUqOS4gOS4qiA2IOS9jeeahCAxNiDov5vliLbmlbDlrZdcblx0ICAgKi9cblx0ICB2YXIgcm5kX3N0cnMgPSAnJztcblx0ICB2YXIgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonO1xuXHQgIHZhciBoYW5kbGVkID0gZmFsc2U7XG5cdCAgdmFyIGNoYXI7XG5cdFxuXHQgIC8qKlxuXHQgICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcblx0ICAgKiDmjpLpmaQgcHZpZCDku6UgZ2wg5byA5aS055qE5oOF5Ya1XG5cdCAgICovXG5cdCAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuXHQgICAgdmFyIGNoYXJzV2l0aG91dEcgPSAnMDEyMzQ1Njc4OWFiY2RlZmhpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZISUpLTE1OT1BRUlNUVVZXWFlaJztcblx0ICAgIHZhciBjaGFyc1dpdGhvdXRMID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa21ub3BxcnN0dXZ3eHl6QUJDREVGR0hJSktNTk9QUVJTVFVWV1hZWic7XG5cdFxuXHQgICAgaWYgKGNoYXJQb3MgPT0gMSkge1xuXHQgICAgICByZXR1cm4gY2hhcnNXaXRob3V0Ry5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcblx0ICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG5cdCAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRMLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuICcwJztcblx0ICB9O1xuXHRcblx0ICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuXHQgICAgY2hhciA9IGNoYXJzLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MiksIDEpO1xuXHQgICAgLy8g5aSE55CG6KKr5aKZ55qE5oOF5Ya177yM55uu5YmN5Y+q6ZKI5a+5Z2zlvIDlpLTnmoRcblx0ICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuXHQgICAgICBpZiAocm5kX3N0cnMubGVuZ3RoID09PSAwICYmIGNoYXIudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcblx0ICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA8IDAuNSkge1xuXHQgICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG5cdCAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcblx0ICAgICAgICBjaGFyID0gaGFuZGxlUFZJZCgyKTtcblx0ICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcm5kX3N0cnMgKz0gY2hhcjtcblx0ICB9XG5cdCAgcmV0dXJuIHJuZF9zdHJzO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2hhcnMgKGFyZ3MsIHNpemUsIGRlZmF1bHRWYWwpIHtcblx0ICBpZiAoYXJncykge1xuXHQgICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBkZWZhdWx0VmFsO1xuXHQgIH1cblx0fVxuXHRcblx0ZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG5cdCAgdmFyIHJhbmRvbThDaGFycyA9IGdldFJhbmRvbUlkKDgpO1xuXHQgIHZhciByYW5kb200Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDQpO1xuXHQgIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuXHQgIHJldHVybiBbXG5cdCAgICBnZXRDaGFycyhwYWdlVXJsLCA0LCByYW5kb200Q2hhcnMpLFxuXHQgICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcblx0ICAgIHJhbmRvbTZDaGFyc1xuXHQgIF0uam9pbignJyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA1NyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG5cdCAqL1xuXHRleHBvcnRzLmdldFRpbWVab25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG5cdCAgdmFyIF9hbmQgPSAnKyc7XG5cdCAgaWYgKF90aW1lWm9uZSA8IDApIHtcblx0ICAgIF9hbmQgPSAnLSc7XG5cdCAgfVxuXHQgIHZhciB6b25lID0gTWF0aC5hYnMocGFyc2VJbnQoX3RpbWVab25lKSk7XG5cdCAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuXHQgIHZhciByZW1haW5kZXJab25lID0gJzAwJztcblx0ICBpZiAocmVtYWluZGVyID4gMCkge1xuXHQgICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuXHQgIH1cblx0ICByZXR1cm4gJ0dNVCcgKyBfYW5kICsgKHpvbmUgPiA5ID8gem9uZSA6ICgnMCcgKyB6b25lKSkgKyAnOicgKyByZW1haW5kZXJab25lO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNTggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL21pbmlhcHBfZGF0YS5qc1xuXHQgKlxuXHQgKiDkvZznlKjvvJrml6Xlv5flj5HpgIHln7rnoYDlj4LmlbDmlLbpm4bvvJpcblx0ICogICAgICDmjInpobrluo/lsIZhcGx1cy5wdl9kYXRhLmJhc2lj44CBZXhwYXJhbXPjgIFvbGRQYXJhbXPjgIFhcGx1cy5wdl9kYXRhLmV4dHJh5Zub5Lit57G75Z6L55qE5Y+C5pWwbWVyZ2XlnKjkuIDkuKrmlbDnu4TkuK1cblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog5L2V5pe25omn6KGMc2VuZHB25omn6KGM5YWl5Y+jXG5cdCAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuXHQgICAgICogMi4gYmVhY29u5omp5bGV5Y+C5pWwOiBleHBhcmFtc1xuXHQgICAgICogMy4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlrqLmiLfnq6/lj4LmlbA6IGV4dHJhTGlzdFxuXHQgICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcblx0ICAgICAqIDQuIGxvY2FsU3RvcmFnZeS4reWtmOWCqOeahOS4iuS4gOmhtXNwbeS/oeaBrzogc3BtYWJ0ZXN0XG5cdCAgICAgKiDku6XkuIo06YOo5YiG5ou86KOF5oiQcHZkYXRhXG5cdCAgICAgKlxuXHQgICAgICogQHJldHVybiBcImRvbmVcIiB8fCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBpc1RCRW52ID0gbWluaS5pc1RCKCk7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcblx0ICAgICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG5cdCAgICAgIHZhciBjdXJyZW50UGFnZSAgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAxXSB8fCB7fTtcblx0ICAgICAgaWYgKGN1cnJlbnRQYWdlICYmICFsb2dkYXRhLnRpdGxlKSB7XG5cdCAgICAgICAgbG9nZGF0YS50aXRsZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8ICcnOyAgXG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgIGxvZ2RhdGEudXJsID0gKCFpc1RCRW52ID8gJ2h0dHBzOi8vJysgbG9nZGF0YS5jbGllbnQuYXBwSWQgKyAnXycgOiAnJykgKyAoY3VycmVudFBhZ2Uucm91dGUgIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICctJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBwcmUgPSAnLSc7XG5cdCAgICAgIGlmIChwYWdlcy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcblx0ICAgICAgICBwcmUgPSAoIWlzVEJFbnYgJiYgYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpID8gJ2h0dHBzOi8vJysgbG9nZGF0YS5jbGllbnQuYXBwSWQgKyAnXycgOiAnJykgKyAocHJlUGFnZS5yb3V0ZSB8fCBwcmVQYWdlLmlzIHx8ICctJyk7XG5cdCAgICAgIH1cblx0ICAgICAgbG9nZGF0YS5wcmUgPSBwcmU7XG5cdCAgICAgIGlmIChsb2dkYXRhLnNka19pbmZvKSB7XG5cdCAgICAgICAgbG9nZGF0YS5zZGtfaW5mby53aW5kbWlsbCA9ICcxJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBsb2dkYXRhO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDU5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L3BsdWdpbnMvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBwdmRhdGHlkI7pnaLvvJpwdmRhdGEuY29uY2F0KHVzZXJkYXRhKVxuXHQgKiAgZGVwczogd2hhdF90b19zZW5kcHZcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGlzVW5kZWZpbmVkID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MCk7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcblx0ICByZXR1cm4ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6YeH6ZuG5Liq5oCn5YyW5Y+C5pWwXG5cdCAgICAgKlxuXHQgICAgICogZ29rZXk6XG5cdCAgICAgKiAgIOi/meWdl+S4uuWvueWOhuWPsnVzZXJkYXRh5Lyg6YCS55qE5YW85a655YGa5rOV77yMVE9ET++8muaOqOWKqOW6lOeUqOaWueWPmOabtFxuXHQgICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuXHQgICAgICogICAgIOWmgiBnb2tleT1cImE9MSZiPTJcIiDmiJYge1wiYVwiOlt7XCJrZXlcIjoyMDE2MTIyNjE1NTAsXCJ2YWx1ZVwiOjAuMX0se1wia2V5XCI6MjAxNjEyMjYxNjAwLFwidmFsdWVcIjowLjV9LHtcImtleVwiOjIwMTYxMjI2MTYxMCxcInZhbHVlXCI6MX1dfVxuXHQgICAgICogICDov5nlnZfpgLvovpHmmK/pgKDmiJBleHRlbmRhcmdz5YaF6YOo5Ye6546w5aSa5Liq5pac5p2g55qE5YWD5Ye277yB77yB77yBXG5cdCAgICAgKiBwYWdlX2lkOlxuXHQgICAgICogICDmnIlwYWdlX2lk5bCx5Zyoc3BtYuS4rea3u+WKoOWtkOWPguaVsFxuXHQgICAgICogICDml6BwYWdlX2lk5bCx5riF6Zmkc3BtYuS4reeahOWtkOWPguaVsFxuXHQgICAgICogc3BtX2NudFxuXHQgICAgICogICDmm7TmlLnlroxzcG1i5L2N6L+Y6ZyA6KaB5pu05pawc3BtX2NudCBA6LCL5aOrIGluIDIwMTgtMDMtMjAgIOS7peWFjXRvVVTnmoRzcG0tY2505Lii5aSx5YiG5qG25Y+3XG5cdCAgICAgKiDkuKrmgKfljJblj4LmlbDvvJpcblx0ICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuXHQgICAgICogICAyLiDmlrnms5XkvKDlhaU6IGFwbHVzLnNlbmRQVih7Q09ORklHfSwge1VTRVJEQVRFfSk7XG5cdCAgICAgKiDlj43kvZzlvIrnmoTmlofmoaPlrr3pq5g6IF9wdyxfcGhcblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgZCA9IHt9O1xuXHRcblx0ICAgICAgaWYgKGNvbmZpZyAmJiAhY29uZmlnLmlzX2F1dG8pIHtcblx0ICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG5cdCAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgICAgZCA9IGZvcm1hdC5wYXJhbTJvYmooY29uZmlnLmdva2V5KTtcblx0ICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICAgICAgZCA9IGNvbmZpZy5nb2tleTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcblx0ICAgICAgICBpZihpc0FycmF5KF9kYXRhKSl7XG5cdCAgICAgICAgICBfZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuXHQgICAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgaXRlbSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIF9kYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cdFxuXHQgICAgICB2YXIgY3VycmVudFBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG5cdCAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcblx0ICAgICAgdmFyIHBhZ2VQcm9wZXJ0aWVzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycpIHx8IHt9O1xuXHQgICAgICB2YXIgcGFnZVByb3BlcnR5ID0gcGFnZVByb3BlcnRpZXNbcGFnZU5hbWVdO1xuXHQgICAgICBpZiAodHlwZW9mIHBhZ2VQcm9wZXJ0eSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgICBjb21ib1VzZXJkYXRhKHBhZ2VQcm9wZXJ0eSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdGhpcy5vcHRpb25zLmNvbnRleHQgfHwge307XG5cdCAgICAgIHZhciB1c2VyZGF0YSA9IGNvbnRleHQudXNlcmRhdGEgfHwge307XG5cdCAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXHRcblx0ICAgICAgcmV0dXJuIGQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG5cdCAgICAgKi9cblx0ICAgIHVwZGF0ZVByZTogZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIGlmIChjb25maWcgJiYgY29uZmlnLnJlZmVycmVyKSB7XG5cdCAgICAgICAgXyQucGFnZV9yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcblx0ICAgICAgICBkYXRhLnByZSA9IGNvbmZpZy5yZWZlcnJlcjtcblx0ICAgICAgfVxuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9LFxuXHQgICAgLyoqXG5cdCAgICAgKiDmm7TmlrDpobXpnaLnmoRVcmxcblx0ICAgICAqL1xuXHQgICAgdXBkYXRlVXJsOmZ1bmN0aW9uKGRhdGEpe1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0ICAgICAgaWYoY29uZmlnJiZjb25maWcucGFnZVVybCl7XG5cdCAgICAgICAgZGF0YS51cmwgPSBjb25maWcucGFnZVVybDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOabtOaWsOadpea6kHNwbVxuXHQgICAgICovXG5cdCAgICB1cGRhdGVTcG1Vcmw6ZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtVXJsID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9VUkxdfHxjb25maWcuc3BtVXJsO1xuXHQgICAgICBpZighaXNVbmRlZmluZWQoc3BtVXJsKSl7XG5cdCAgICAgICAgZGF0YS5nb2tleVthcGx1c1N0YXRpYy5TUE1fVVJMXSA9IHNwbVVybDtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOabtOaWsOadpea6kOeahOadpea6kHNwbVxuXHQgICAgICovXG5cdCAgICB1cGRhdGVTcG1QcmU6ZnVuY3Rpb24oZGF0YSl7XG5cdCAgICAgIHZhciBjb25maWcgPSB0aGlzLm9wdGlvbnMuY29uZmlnIHx8IHt9O1xuXHQgICAgICB2YXIgc3BtUHJlID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9QUkVdfHxjb25maWcuc3BtUHJlO1xuXHQgICAgICBpZighaXNVbmRlZmluZWQoc3BtUHJlKSl7XG5cdCAgICAgICAgZGF0YS5nb2tleVthcGx1c1N0YXRpYy5TUE1fUFJFXSA9IHNwbVByZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0sXG5cdCAgICAvKipcblx0ICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuXHQgICAgICog6L+U5ZueXCJkb25lXCLnu4jmraLkuK3pl7Tku7bmiafooYxcblx0ICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcblx0ICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcblx0ICAgICAqIEByZXR1cm4gXCJkb25lXCIgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGQgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcblx0ICAgICAgdmFyIHVzZXJkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRVc2VyZGF0YSgpLCBkLnVzZXJkYXRhIHx8IHt9KTtcblx0ICAgICAgZC5nb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGQuZ29rZXksIHVzZXJkYXRhKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlUHJlKGQpO1xuXHQgICAgICBkID0gdGhpcy51cGRhdGVVcmwoZCk7XG5cdCAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVVybChkKTtcblx0ICAgICAgZCA9IHRoaXMudXBkYXRlU3BtUHJlKGQpO1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGQ7XG5cdCAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odmFsdWUpe1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDYxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9wbHVnaW5zL2Nhbl90b19zZW5kcHYuanNcblx0ICpcblx0ICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcblx0ICogZGVwczog5pegXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxFdmVudExpbWl0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Mik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6Ncblx0ICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG5cdCAgICAgKiBAcGFyYW0gW1N0cmluZ10gc3RhdGUg54q25oCBXG5cdCAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG5cdCAgICAgKi9cblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgICAgIHZhciBjYW5fdG9fc2VuZHB2ID0gdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiB8fCB7fTtcblx0ICAgICAgdmFyIGNvdW50ID0gXyQuc2VuZF9wdl9jb3VudCB8fCAwO1xuXHQgICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcblx0XG5cdCAgICAgIGlmICghdXRpbEV2ZW50TGltaXQuY2FuU2VuZFBWKGNvbmZpZy50cmFja190eXBlKSkge1xuXHQgICAgICAgIHJldHVybiAnZG9uZSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FuX3RvX3NlbmRwdi5mbGFnID0gJ1lFUyc7XG5cdCAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQuY2FuX3RvX3NlbmRwdiA9IGNhbl90b19zZW5kcHY7XG5cdCAgICAgICAgXyQuc2VuZF9wdl9jb3VudCA9ICsrY291bnQ7XG5cdCAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA2MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qXG5cdCAqIEZpbGU6IHV0aWxFdmVudExpbWl0LmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMiBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgdXRpbFJlbW90ZUNmZyA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpO1xuXHR2YXIgdXRpbExvY2FsQ2ZnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2Myk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIGFwbHVzVXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdGZ1bmN0aW9uIG5lZWRMaW1pdFNlbmQobG9na2V5KSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgIHZhciBldmVudExpbWl0UmF0ZXMgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTKTtcblx0ICBpZiAoZXZlbnRMaW1pdFJhdGVzICYmIGV2ZW50TGltaXRSYXRlcy5sZW5ndGggPiAwKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB1dGlsQXJyYXkuZmluZChldmVudExpbWl0UmF0ZXMsIGZ1bmN0aW9uKGl0ZW0pIHtcblx0ICAgICAgcmV0dXJuIGl0ZW0uZXZlbnRJZCA9PT0gbG9na2V5O1xuXHQgICAgfSk7XG5cdCAgICBcblx0ICAgIGlmIChldmVudCkge1xuXHQgICAgICB2YXIgcmFuZG9tID0gTWF0aC5jZWlsKE1hdGgucmFuZG9tKCkqMTAwMCk7XG5cdCAgICAgIGlmIChyYW5kb20gPCAoZXZlbnQuc2FtcGxpbmdSYXRlICogMTAwMCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpc1VNKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBpc1VNID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzVU07XG5cdCAgcmV0dXJuICEhaXNVTTtcblx0fTtcblx0XG5cdGV4cG9ydHMuY2FuVG9TZW5kSEpMSiA9IGZ1bmN0aW9uKGdva2V5LCBsb2drZXkpIHtcblx0ICB2YXIgZGV2aWNlU3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXREZXZpY2VTdGF0dXMoKTtcblx0ICBjb25zb2xlLmxvZygneXotLS0tLWRldmljZVN0YXR1cycsICEhZGV2aWNlU3RhdHVzKTtcblx0ICBcblx0ICBpZiAoIWRldmljZVN0YXR1cykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgICBpZiAodXRpbERhc2guaXNFbXB0eU9iamVjdChjdHgpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQ7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2goZSkge31cblx0ICB9XG5cdFxuXHQgIC8vIOWmguaenOWFqOWfi+eCueWFs+mXrSDmiJbogIUg5YWo5Z+L54K55LqL5Lu25YWz6Zet6YeH6ZuG77yM5LiN5Y+R6YCB5LqL5Lu2XG5cdCAgdmFyIHJlbW90ZUF1dG90cmFja1N0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0QXV0b1RyYWNrU3RhdHVzKCk7XG5cdCAgdmFyIGF1dG9ldmVudFN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0QXV0b0V2ZW50U3RhdHVzKCk7XG5cdCAgLy8gQOaWh+W/gyBcblx0ICB2YXIgbG9jYWxBdXRvdHJhY2tFbmFibGVkID0gdXRpbExvY2FsQ2ZnLmdldEF1dG9UcmFja1N0YXR1cygpO1xuXHRcblx0ICB2YXIgcGFyYW1zID0ge307XG5cdCAgaWYgKHR5cGVvZiBnb2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHBhcmFtcyA9IGFwbHVzVXRpbHMuYXJyMm9iaihhcGx1c1V0aWxzLnBhcmFtMmFycihnb2tleSkpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwYXJhbXMgPSBnb2tleTtcblx0ICB9XG5cdFxuXHQgIGlmIChwYXJhbXMuYXV0b19lbGVtZW50KSB7XG5cdCAgICBpZiAoYXV0b2V2ZW50U3RhdHVzID09PSAyIHx8IHJlbW90ZUF1dG90cmFja1N0YXR1cyA9PT0gMikge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9IGVsc2UgaWYgKCFyZW1vdGVBdXRvdHJhY2tTdGF0dXMgJiYgIWxvY2FsQXV0b3RyYWNrRW5hYmxlZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoIW5lZWRMaW1pdFNlbmQobG9na2V5KSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH0gIFxuXHQgIHJldHVybiB0cnVlO1xuXHR9O1xuXHRcblx0XG5cdGV4cG9ydHMuY2FuU2VuZFBWID0gZnVuY3Rpb24odHJhY2tfdHlwZSkge1xuXHQgIGlmICghaXNVTSgpKSB7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9IFxuXHQgIC8v6K6+5aSH5byA5YWzIFxuXHQgIHZhciBkZXZpY2VTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldERldmljZVN0YXR1cygpO1xuXHQgIC8vIOi/nOeoi+WFqOWfi+eCuSDoh6rliqhwdiDlvIDlhbNcblx0ICB2YXIgYXV0b3B2U3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvUGFnZVN0YXR1cygpO1xuXHQgIC8vIOacrOWcsOWFqOWfi+eCuemFjee9riDoh6rliqhwdiDlvIDlhbNcblx0ICB2YXIgbG9jYWxBdXRvUHZEaXNhYmxlZCA9IHV0aWxMb2NhbENmZy5sb2NhbEF1dG9QVkRpc2FibGVkKCk7XG5cdCAgXG5cdCAgdmFyIHJlc3VsdCA9IHRydWU7XG5cdCAgaWYgKCFkZXZpY2VTdGF0dXMpIHtcblx0ICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgIH0gZWxzZSBpZiAodHJhY2tfdHlwZSA9PT0gJzEnKXtcblx0ICAgIHJldHVybiAhKGF1dG9wdlN0YXR1cyA9PT0gMiB8fCAoIWF1dG9wdlN0YXR1cyAmJiBsb2NhbEF1dG9QdkRpc2FibGVkKSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNjMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsTG9jYWxDb25maWcuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHQvKipcblx0ICog5YWo5Z+L54K55pys5Zyw6YWN572uIOivu+WPllxuXHQgKiDlj5blgLwg5Y+q5pyJIHRydWUgb3IgZmFsc2Vcblx0Ki9cblx0XG5cdGV4cG9ydHMubG9jYWxBdXRvRXZlbnREaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHJldHVybiAhIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT0VWRU5UKTsgXG5cdH07XG5cdFxuXHRcblx0ZXhwb3J0cy5sb2NhbEF1dG9QVkRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPUFYpIHx8ICEhKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy13YWl0aW5nJykgPT09ICdNQU4nKTtcblx0fTtcblx0XG5cdGV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRUQpO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDY0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDmlbDnu4Tlt6Xlhbdcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogSUU45LiN5pSv5oyB5pWw57uE5Y6f55Sf55qEaW5kZXhPZu+8jOaVheiHquihjOWunueOsOS4gOS4qmluZGV4b2Zcblx0ICogQHBhcmFtIFtBcnJheV0gYXJyXG5cdCAqIEBwYXJhbSBbT2JqZWN0XSBpdGVtXG5cdCAqIEByZXR1cm4gW051bWJlcl0gaW5kZXhcblx0ICovXG5cdGV4cG9ydHMuaW5kZXhvZiA9IGZ1bmN0aW9uKGFyciwgaXRlbSkge1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHRyeSB7XG5cdCAgICBpbmRleCA9IGFyci5pbmRleE9mKGl0ZW0pO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGZvciAodmFyIGogPSAwOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgIGlmIChhcnJbal0gPT09IGl0ZW0pIHtcblx0ICAgICAgICBpbmRleCA9IGo7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIGluZGV4O1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5pdGVtTWF0Y2ggPSBmdW5jdGlvbihhcnIsIGl0ZW0pIHtcblx0ICB2YXIgbWF0Y2hlZCA9IGZhbHNlO1xuXHQgIHRyeSB7XG5cdCAgICBpZiAoIXRoaXMuaXNBcnJheShhcnIpKSB7XG5cdCAgICAgIHJldHVybiBtYXRjaGVkO1xuXHQgICAgfVxuXHQgICAgbWF0Y2hlZCA9IGFyci5zb21lKGZ1bmN0aW9uKHMpIHtcblx0ICAgICAgcmV0dXJuIChzICYmIHMubGVuZ3RoID4gMCkgJiYgaXRlbS5pbmRleE9mKHMpICE9PSAtMTtcblx0ICAgIH0pO1xuXHQgIH0gY2F0Y2goZSkge1xuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgaWYgKGl0ZW0uaW5kZXhPZihhcnJbal0pICE9PSAtMSkge1xuXHQgICAgICAgIG1hdGNoZWQgPSB0cnVlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBtYXRjaGVkO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaXNBcnJheShvKSB7XG5cdCAgaWYgKEFycmF5LmlzQXJyYXkpIHtcblx0ICAgIHJldHVybiBBcnJheS5pc0FycmF5KG8pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblx0XG5cdGZ1bmN0aW9uIGZsYXQoYXJyKSB7XG5cdCAgdmFyIHJlc3VsdCA9IFtdO1xuXHQgIGlmIChpc0FycmF5KGFycikpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciB2ID0gYXJyW2ldO1xuXHQgICAgICBpZiAoaXNBcnJheSh2KSkge1xuXHQgICAgICAgIC8v6YCS5b2S5omB5bmz5YyW5pWw57uEXG5cdCAgICAgICAgYXJyW2ldID0gZmxhdCh2KTtcblx0ICAgICAgICAvLyDpgJLlvZLlkI4g6L+e5o6l5pWw57uEXG5cdCAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmNvbmNhdChhcnJbaV0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdGV4cG9ydHMuZmxhdCA9IGZsYXQ7XG5cdFxuXHRmdW5jdGlvbiBmaW5kKGFyciwgY2FsbGJhY2spIHtcblx0ICB0cnkge1xuXHQgICAgcmV0dXJuIGFyci5maW5kKGNhbGxiYWNrKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBtYXRjaCA9IGNhbGxiYWNrKGFycltpXSk7XG5cdCAgICAgIGlmIChtYXRjaCkge1xuXHQgICAgICAgIHJldHVybiBhcnJbaV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGV4cG9ydHMuZmluZCA9IGZpbmQ7XG5cbi8qKiovIH0pLFxuLyogNjUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX2hqbGpfdXNlcmRhdGEuanNcblx0ICpcblx0ICogIOaPkuS7tuS9nOeUqO+8muaUtumbhuW6lOeUqOaWueiHquWumuS5iXB25Y+C5pWwXG5cdCAqICAgICAgICAgICDlubblsIbmlLbpm4bliLDnmoToh6rlrprkuYnlj4LmlbDku6XmlbDnu4TmoLzlvI/ov73liqDliLBsb2dkYXRh5ZCO6Z2i77yabG9nZGF0YS5jb25jYXQodXNlcmRhdGEpXG5cdCAqICBkZXBzOiB3aGF0X3RvX2hqbGpcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZm9ybWF0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdC8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuXHQgIHJldHVybiB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcblx0ICAgICAqXG5cdCAgICAgKiByZWNvcmQobG9na2V5LCBnbWtleSwgZ29rZXkpIEFQSeS4reeahGdva2V5XG5cdCAgICAgKiBtZXRhOmFwbHVzLWV4aW5mb+S/oeaBrywgbWV0YTphcGx1cy1leGRhdGHkv6Hmga9cblx0ICAgICAqXG5cdCAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHsuLi59XG5cdCAgICAgKi9cblx0ICAgIGdldFVzZXJEYXRhOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuXHQgICAgICB2YXIgdXNlcmRhdGEgPSBjLnVzZXJkYXRhIHx8IHt9O1xuXHQgICAgICB2YXIgZ29rZXkgPSBjLndoYXRfdG9fc2VuZC5sb2dkYXRhLmdva2V5O1xuXHQgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKHVzZXJkYXRhLmdva2V5KSk7XG5cdCAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGZvcm1hdC5wYXJhbTJvYmooYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4aW5mbycpfHx7fSkpO1xuXHQgICAgICB2YXIgZXhkYXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV4ZGF0YScpO1xuXHQgICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG5cdCAgICAgICAgZXhkYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG5cdCAgICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBpdGVtKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBleGRhdGEgfHwge30pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBnb2tleTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDkvZXml7bmiafooYxzZW5kcHbmiafooYzlhaXlj6Ncblx0ICAgICAqIOi/lOWbnidkb25lJ+e7iOatouS4remXtOS7tuaJp+ihjFxuXHQgICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuXHQgICAgICogQHBhcmFtIFtGdW5jdGlvbl0gY2IgIOWbnuiwg1xuXHQgICAgICogQHJldHVybiAnZG9uZScgfCB1bmRlZmluZWRcblx0ICAgICAqL1xuXHQgICAgcnVuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcblx0ICAgICAgdmFyIGdva2V5ID0gdGhpcy5nZXRVc2VyRGF0YSgpO1xuXHQgICAgICAvLyDlupTnlKjpgIDlh7rkuovku7bmr5TovoPnibnmrorvvIxkdXJhdGlvbuWNs2FyZzEgQOaWh+mdklxuXHQgICAgICBpZiAobG9nZGF0YS5nbWtleSA9PT0gJzEwMTAnKSB7XG5cdCAgICAgICAgbG9nZGF0YS5hcmcxID0gZ29rZXkuZHVyYXRpb24gfHwgbG9nZGF0YS5sb2drZXk7XG5cdCAgICAgIH1cblx0ICAgICAgbG9nZGF0YS5nb2tleSA9IGdva2V5O1xuXHQgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogNjYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcblx0ICogQVBJ5o+S5Lu2XG5cdCAqXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNjcpKHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG5cdCAqIEFQSeaPkuS7tlxuXHQgKlxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IGxvZ0NvbmZpZyB7XG5cdCAqICAgIHB2OiB7XG5cdCAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfcHYnKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ191Jylcblx0ICogICAgfSxcblx0ICogICAgaGpsajoge1xuXHQgKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX2hqbGonKSxcblx0ICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ19oamxqX3UnKVxuXHQgKiAgICB9XG5cdCAqICB9XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsb2dDb25maWcpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgaWYgKGFwbHVzLl9hcGx1c19hcGkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXMuX2FwbHVzX2FwaSA9IHtcblx0ICAgICAgc3RhdHVzOiBhcGx1c1N0YXRpYy5DT01QTEVURVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIHZhciBhcGx1c09iaiA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpLnJ1bi5jcmVhdGUoe1xuXHQgICAgbG9nQ29uZmlnOiBsb2dDb25maWdcblx0ICB9KTtcblx0ICBmb3IgKHZhciBrIGluIGFwbHVzT2JqKSB7XG5cdCAgICBhcGx1c1trXSA9IGFwbHVzT2JqW2tdO1xuXHQgIH1cblx0ICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUywgYXBsdXMpO1xuXHQgIHZhciBtc2dBcnIgPSBbYXBsdXNTdGF0aWMuQVBMVVMgKyAnUmVhZHknLCBhcGx1c1N0YXRpYy5DT01QTEVURV07XG5cdCAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dBcnIpO1xuXHQgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNnQXJyKTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDY4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiBkZXNjcmlwdGlvblxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgUmVkdWNlciA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXHR2YXIgbWV0YUluZm8gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KTtcblx0dmFyIGlzVHJpdmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Myk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgdXRpbEV2ZW50TGltaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKTtcblx0XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0dmFyIF9nZXRQYWdlU3BtID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgaWYgKG15ICYmIG15LmNhbGwgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBteS5jYWxsKCdoYW5kbGVMb2dnaW5nQWN0aW9uJywge1xuXHQgICAgICAndHlwZSc6ICdiZWhhdmlvcicsXG5cdCAgICAgICdzdWJUeXBlJzogb3B0cy5zdWJUeXBlXG5cdCAgICB9LCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgIHZhciBycyA9IHt9O1xuXHQgICAgICByc1tvcHRzLnNwbVR5cGVdID0gcmVzW29wdHMuc3BtVHlwZV07XG5cdCAgICAgIGNhbGxiYWNrKHJzKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBpc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuXHR2YXIgaXNQYWdlQXBwZWFyID0gZmFsc2U7XG5cdFxuXHR2YXIgcnVuID0gQmFzZS5leHRlbmQoe1xuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB1cmwge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmcgfHwgT2JqZWN0fVxuXHQgICAqIEBwYXJhbSBbbWV0aG9kXSB7U3RyaW5nfSAgLy8gUE9TVCBPUiBHRVRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdCAgX3NlbmQ6IGZ1bmN0aW9uICh1cmwsIGRhdGEsIG1ldGhvZCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIC8vIHVybCA9IHV0aWwuY2FuMmh0dHBzKHVybCk7XG5cdCAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG5cdCAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcblx0ICAgICAgICBtZXRob2Q6IG1ldGhvZCxcblx0ICAgICAgICBkYXRhOiBkYXRhLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtaW5pLnJlcXVlc3QodXJsICsgJz8nICsgZGF0YSwge1xuXHQgICAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuXHQgICAgICB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIHJldHVybiB1cmw7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR0VUIOivt+axguS4gOS4quWPr+inhuWMlumFjee9ruS/oeaBr++8jOWQkeacjeWKoeWZqOWPkVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuXHQgICAqL1xuXHQgIF9yZXF1ZXN0VlRDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIC8vIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgLy8gICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcblx0ICAgIC8vICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgIC8vICAgfVxuXHQgICAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAgIC8vIH1cblx0ICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyxkYXRhVHlwZTonanNvbicgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdFVCDor7fmsYLov5znqIvphY3nva7vvIzlkJHmnI3liqHlmajlj5Fcblx0ICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9XG5cdCAgICogKi8gXG5cdCAgX3JlcXVlc3RSZW1vdGVDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcblx0ICAgIC8vIGlmICh1cmwuaW5kZXhPZignLy8nKSA9PT0gMCkge1xuXHQgICAgLy8gICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcblx0ICAgIC8vICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuXHQgICAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgIC8vICAgfVxuXHQgICAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcblx0ICAgIC8vIH1cblx0ICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyB9LCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjayk7XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiBAcGFyYW0gW09iamVjdF0gY29uZmlnOiB7XG5cdCAgICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG5cdCAgICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuXHQgICAqICAgcGFnZV9pZDogMTIzLCAgICAgICAgIC8vIOWwhuS8muS9k+eOsOWcqHNwbWLkvY3kuIpcblx0ICAgKiAgIGdva2V5OiAnJywgICAgICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnlj4LmlbDvvIjlkJHkuIvlhbzlrrnvvIxUT0RP5ZCO57ut5LiL5o6J77yJXG5cdCAgICogfVxuXHQgICAqIEBwYXJhbSBbT2JqZWN0XSB1c2VyZGF0YToge1xuXHQgICAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcblx0ICAgKiAgIHh4eDE6ICd2dnYxJyxcblx0ICAgKiAgIHh4eDI6ICd2dnYyJyxcblx0ICAgKiAgIHh4eE46ICd2dnZOJyxcblx0ICAgKiB9ICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcblx0ICAgKi9cblx0ICBfc2VuZFBWOiBmdW5jdGlvbiAoY29uZmlnLCB1c2VyZGF0YSkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuXHQgICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXHRcblx0ICAgIGlmIChjb25maWcucGFnZU5hbWUpIHtcblx0ICAgICAgYXBsdXMuX3NldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTICsgJy1wYWdlbmFtZScsIGNvbmZpZy5wYWdlTmFtZSk7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICBjb25maWcucmVjb3JkVHlwZSA9ICdQVic7IC8vIOWIpOaWreWNleWPjOWPkeeUqOeahO+8jOiAg+iZkeenu+mZpFxuXHQgICAgaWYgKCFjb25maWcubWV0aG9kKSB7XG5cdCAgICAgIGNvbmZpZy5tZXRob2QgPSAnR0VUJztcblx0ICAgIH1cblx0ICAgIHZhciBwdiA9IGFwbHVzLmxvZ0NvbmZpZy5wdjtcblx0ICAgIHJlZHVjZXIucnVuKHtcblx0ICAgICAgcGx1Z2luczogcHYucGx1Z2lucyxcblx0ICAgICAgY29udGV4dDogY2xvbmVEZWVwKHB2LmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgfSwge1xuXHQgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgdXNlcmRhdGE6IHVzZXJkYXRhIHx8IHt9LFxuXHQgICAgICBwdWJzdWJUeXBlOiAncHYnLFxuXHQgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcHYsXG5cdCAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX3B2J1xuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDogZrlkIjkuIrmiqXku6Tnrq3ml6Xlv5dcblx0ICAgKlxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbG9na2V577yI5b+F5aGr77yJXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSBnbWtlee+8iOW/heWhq++8iSDmnprkuL7lgLzvvJogQ0xLIOWSjCBFWFBcblx0ICAgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gZ29rZXlz77yI5b+F5aGr77yJ5YaF572u55qE5a+56LGh5Y+C5pWw5qC85byP5aaC77yaXG5cdCAgICogIFt7XG5cdCAgICogICAgXCJleGFyZ3NcIjogeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5LiK5oql55qE6Ieq5a6a5LmJ5Y+C5pWw77yM5YaF5a655Z2H5Li65Y+v6YCJ77yM5aaC5peg6Ieq5a6a5LmJ5Y+C5pWw5YiZ5Lyg56m65a+56LGhXG5cdCAgICogICAgICBcIl93XCI6IDM3NSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5a695bqmXG5cdCAgICogICAgICBcIl9oXCI6IDE4OCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X6auY5bqmXG5cdCAgICogICAgICBcIl94XCI6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5qiq5Z2Q5qCHXG5cdCAgICogICAgICBcIl95XCI6IDg3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X57q15Z2Q5qCHXG5cdCAgICogICAgICBcIl9yYXRlXCI6IFwiMS4wMFwiLCAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnpnaLnp6/mr5Tkvotcblx0ICAgKiAgICAgIFwiX3ZpZXdhYmlsaXR5XCI6IFwiaW50ZXJzZWN0aW9uXCIsICAgICAgIC8vIOabneWFieaWueW8jyBpbnRlcnNlY3Rpb24g5oiWIGZpbGx3aW5kb3dcblx0ICAgKiAgICAgIC8vIOmZpOS6huS4iui/sOS/neeVmeWPguaVsOWklueahOWFtuS7luWPguaVsGtleS12YWx1ZeiHquihjOWumuS5ie+8mlxuXHQgICAqICAgICAgXCJ5b3VyS2V5MVwiOiBcInlvdXJWYWx1ZTFcIiwgICAgICAgIFxuXHQgICAqICAgICAgXCJ5b3VyS2V5MlwiOiBcIiVFNCVCOCVBRCVFNSU5QiVCRFwiICAgICAgLy8g5aaC5Li65Lit5paH77yM5YiZ6ZyA6Ieq6KGM57yW56CBXG5cdCAgICogICAgICAuLi4uLi5cblx0ICAgKiAgICB9LFxuXHQgICAqICAgIFwic2NtXCI6IFwiYS5iLmMuZFwiLCAgICAgICAgICAgICAgICAgICAgICAgLy8gc2Nt5Li65Y+v6YCJ5Y+C5pWw77yM5aaC5peg5YiZ5Lyg56m65YC8XG5cdCAgICogICAgXCJzcG1cIjogXCJzcG1hLnNwbWIuc3BtYy5zcG1kXCIsICAgICAgICAgICAvLyBzcG3kuLrlv4XpgInlj4LmlbDvvIzkvb/nlKjmoIflh4bnmoTlm5vmrrXlvI9cblx0ICAgKiAgICBcImFwbHVzQ29udGVudElkXCI6IFwiXCIgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWtl+aute+8jOaaguaXtuS4jemcgOimgeS8oFxuXHQgICAqICB9XVxuXHQgICAqIEBwYXJhbXMge1N0cmluZ30gbWV0aG9k77yI5Y+v6YCJ77yJICAgICAgICAgICAgICAvLyDmnprkuL7lgLzvvJogR0VU5ZKMUE9TVO+8jOm7mOiupOS9v+eUqFBPU1TmlrnlvI/kuIrmiqVcblx0ICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2IgICAgICAgICAgICAgICAgICAgICAgLy8g5L+d55WZ5bGe5oCn77yM5pqC5pe25LiN6ZyA6KaB5LygXG5cdCAgICovXG5cdCAgX2NvbWJpbmVSZWNvcmQ6IGZ1bmN0aW9uKGxvZ2tleSwgZ21rZXksIGdva2V5cywgbWV0aG9kKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgICB2YXIgRVhQID0gJ0VYUCc7XG5cdCAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIChnbWtleSA9PT0gRVhQIHx8IGdta2V5ID09PSAnQ0xLJykpIHtcblx0ICAgICAgaWYgKGlzQXJyYXkoZ29rZXlzKSkge1xuXHQgICAgICAgIGlmICghbWV0aG9kKSB7XG5cdCAgICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciB1c2VyZGF0YSA9IFtdO1xuXHQgICAgICAgIHZhciBzZW5kdG9teSA9ICd0cnVlJztcblx0ICAgICAgICBnb2tleXMuZm9yRWFjaChmdW5jdGlvbih2KXtcblx0ICAgICAgICAgIHVzZXJkYXRhLnB1c2goe1xuXHQgICAgICAgICAgICBleGFyZ3M6IHR5cGVvZiB2LmV4YXJncyA9PT0gJ29iamVjdCcgPyB2LmV4YXJncyA6IHt9LFxuXHQgICAgICAgICAgICBzY206IHYuc2NtLFxuXHQgICAgICAgICAgICBzcG06IHYuc3BtLFxuXHQgICAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogdi5hcGx1c0NvbnRlbnRJZCxcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgaWYgKHYuX2FwbHVzX3NlbmR0b215ID09PSAnZmFsc2UnICYmIHNlbmR0b215ID09PSAndHJ1ZScpIHtcblx0ICAgICAgICAgICAgc2VuZHRvbXkgPSAnZmFsc2UnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBfZ29rZXlzID0gW107XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKChnbWtleSA9PT0gRVhQID8gJ2V4cGRhdGE9JyA6ICdjbGtkYXRhPScpICsgSlNPTi5zdHJpbmdpZnkodXNlcmRhdGEpKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goZ21rZXkgPT09IEVYUCA/ICdfaXNfYXV0b19leHA9MScgOiAnX2lzX2F1dG9fY2xrPTEnKTtcblx0ICAgICAgICBfZ29rZXlzLnB1c2goJ19ldmVudFR5cGU9Y3VzdG9tJyk7XG5cdCAgICAgICAgX2dva2V5cy5wdXNoKCdfbWV0aG9kPScgKyBtZXRob2QpO1xuXHQgICAgICAgIF9nb2tleXMucHVzaCgnX3BrZ1NpemU9JyArIGdva2V5cy5sZW5ndGgpO1xuXHQgICAgICAgIGlmIChzZW5kdG9teSA9PT0gJ2ZhbHNlJykge1xuXHQgICAgICAgICAgX2dva2V5cy5wdXNoKCdfYXBsdXNfc2VuZHRvbXk9ZmFsc2UnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYXBsdXMucmVjb3JkKGxvZ2tleSwgZ21rZXksIF9nb2tleXMuam9pbignJicpLCBtZXRob2QpOyAgXG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY29uc29sZS53YXJuKCd0eXBlIG9mIGdva2V5cyBtdXN0IGJlIEFycmF5T2JqZWN0IScpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjb25zb2xlLndhcm4oJ29ubHkgc3VwcG9ydCBFWFAgb3IgQ0xLIGxvZyB0byBjb21iaWxlIHJlY29yZCEnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDlj5HpgIHpu4Tph5Hku6Tnrq3miZPngrlcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbG9na2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGdva2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZCDor7fmsYLmlrnms5XkuLogUE9TVCBvciBHRVRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gY2Jcblx0ICAgKi9cblx0ICBfcmVjb3JkOiBmdW5jdGlvbiAobG9na2V5LCBnbWtleSwgZ29rZXksIG1ldGhvZCwgY2IpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIGdva2V5ID0gbWV0YUluZm8uZ2V0VXNlckluamVjdEdva2V5KHtcblx0ICAgICAgbG9na2V5OiBsb2drZXksXG5cdCAgICAgIGdta2V5OiBnbWtleSxcblx0ICAgICAgZ29rZXk6IGdva2V5XG5cdCAgICB9KTtcblx0ICAgIGxvZ2tleSA9IGxvZ2tleSArICcnO1xuXHQgICAgaWYgKGxvZ2tleSAmJiBsb2drZXkuaW5kZXhPZignLycpICE9PSAwICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICBsb2drZXkgPSAnLycgKyBsb2drZXk7XG5cdCAgICB9XG5cdCAgICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGk7XG5cdCAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG5cdCAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuXHQgICAgaWYgKCFpc0FsaSkge1xuXHQgICAgICBjb25zb2xlLmxvZygneXotLS0tLWFiYycsIHV0aWxFdmVudExpbWl0LmNhblRvU2VuZEhKTEooZ29rZXksIGxvZ2tleSkpO1xuXHQgICAgICBcblx0ICAgICAgdXRpbEV2ZW50TGltaXQuY2FuVG9TZW5kSEpMSihnb2tleSwgbG9na2V5KSAmJiByZWR1Y2VyLnJ1bih7XG5cdCAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuXHQgICAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgY29uZmlnOiB7XG5cdCAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICAgIG1ldGhvZDogbWV0aG9kIHx8ICdHRVQnXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB1c2VyZGF0YToge1xuXHQgICAgICAgICAgbG9na2V5OiBsb2drZXksXG5cdCAgICAgICAgICBnbWtleTogZ21rZXksXG5cdCAgICAgICAgICBnb2tleTogZ29rZXlcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcblx0ICAgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuXHQgICAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG5cdCAgICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG5cdCAgICAgICAgICBjYigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWR1Y2VyLnJ1bih7XG5cdCAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuXHQgICAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgY29uZmlnOiB7XG5cdCAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcblx0ICAgICAgICAgIG1ldGhvZDogbWV0aG9kIHx8ICdHRVQnXG5cdCAgICAgICAgfSxcblx0ICAgICAgICB1c2VyZGF0YToge1xuXHQgICAgICAgICAgbG9na2V5OiBsb2drZXksXG5cdCAgICAgICAgICBnbWtleTogZ21rZXksXG5cdCAgICAgICAgICBnb2tleTogZ29rZXlcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcblx0ICAgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuXHQgICAgICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2hqbGonXG5cdCAgICAgIH0sIGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG5cdCAgICAgICAgICBjYigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9LFxuXHQgIFxuXHQgIGdldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIHZhciBfJCA9IGFwbHVzLl8kIHx8IHt9O1xuXHQgICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcblx0ICAgIHZhciBkYXRhID0gc3BtLmRhdGEgfHwge307XG5cdCAgICByZXR1cm4gW2RhdGEuYSwgZGF0YS5iXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG5cdCAgICog6ZyA5rGC5Y+C6KeB77yaaHR0cDovL2dpdGxhYi5hbGliYWJhLWluYy5jb20vYWxpbG9nL2tiL2lzc3Vlcy8xMzdcblx0ICAgKiBAcGFyYW0gYSB7U3RyaW5nfVxuXHQgICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cblx0ICAgKiBAcGFyYW0gW2NiXSB7RnVuY3Rpb259XG5cdCAgICovXG5cdCAgX3NldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvYmogPSB7fTtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdmFyIGNiO1xuXHQgICAgaWYgKHR5cGVvZiBhcmdzWzBdID09PSAnb2JqZWN0Jykge1xuXHQgICAgICBvYmogPSBhcmdzWzBdO1xuXHQgICAgICBjYiA9IGFyZ3NbMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvYmouc3BtQ250ID0gW2FyZ3NbMF0sIGFyZ3NbMV0sICcwJywgJzAnXS5qb2luKCcuJyk7XG5cdCAgICAgIGNiID0gYXJnc1syXTtcblx0ICAgIH1cblx0ICAgIHZhciBtc2dzO1xuXHQgICAgaWYgKCFvYmouc3BtQ250ICYmICFvYmouc3BtVXJsICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykpIHtcblx0ICAgICAgbXNncyA9IFsnY2xlYXJQYWdlU1BNJ107XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG5cdCAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvKipcblx0ICAgICAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuXHQgICAgICAgKiAgIHNwbUNudDogJ2EuYi4wLjAnXG5cdCAgICAgICAqICAgc3BtVXJsOiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiB9XG5cdCAgICAgICAqL1xuXHQgICAgICBtc2dzID0gWydzZXRQYWdlU1BNJywgb2JqXTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcblx0ICAgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIH1cblx0ICAgIHZhciBjYWxsYmFjayA9IHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJyA/IGNiIDogZnVuY3Rpb24gKCkge307XG5cdCAgICBjYWxsYmFjayhtc2dzKTtcblx0ICB9LFxuXHRcblx0XG5cdCAgLyoqXG5cdCAgICog5Yqo5oCB6YWN572ubWV0YVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHZcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0cyB7XG5cdCAgICogICBmcm9tOiAnYXBwZW5kTWV0YUluZm8nXG5cdCAgICogfVxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdCAgX3NldE1ldGFJbmZvOiBmdW5jdGlvbihhcmcxLCB2YWx1ZSkge1xuXHQgICAgcmV0dXJuIG1ldGFJbmZvLl9zZXRNZXRhSW5mbyhhcmcxLCB2YWx1ZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogaHR0cHM6Ly95dXF1ZS5hbnRmaW4taW5jLmNvbS9hcGx1c2pzL3Byb2plY3QvYXBsdXNfY2xvdWQjMzMyZGU2MmNcblx0ICAgKiDkuI3mlK/mjIF1cGRhdGVQYWdlUHJvcGVydGllc++8jOaUueeUqOabv+S7o+aWueahiHNldE1ldGFJbmZvXG5cdCAgICogQHBhcmFtcyB7U3RyaW5nfSDpgI/kvKBqc29u5a2X56ym5Liy77yM5b+F6aG75piv5a2X56ym5LiyXG5cdCAgICovXG5cdCAgX3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuXHQgICAgaWYgKHR5cGVvZiBwYXJhbXMgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIC8vIOaWsOWuueWZqFRyaXZlcumHh+eUqHVwZGF0ZVBhZ2VQcm9wZXJ0aWVzXG5cdCAgICAgIGlmIChpc1RyaXZlcigpKSB7XG5cdCAgICAgICAgbXkucmVwb3J0QW5hbHl0aWNzKCd1cGRhdGVQYWdlUHJvcGVydGllcycsIHBhcmFtcyk7XG5cdCAgICAgIH0gZWxzZSBpZihtaW5pLmdldFBsYXRmb3JtVHlwZSgpPT09J215Jyl7XG5cdCAgICAgICAgbXkuY2FsbCgncmVwb3J0RGF0YScse1xuXHQgICAgICAgICAgc3BtRGV0YWlsOnBhcmFtcyxcblx0ICAgICAgICAgIGlnbm9yZURlZmF1bHRQYWdlTW9uaXRvcjp0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8g5ZCR5LiL5YW85a6577yM5LiN566h5oCO5LmI5qC36YO95b6AbWV0YUluZm/orr7nva7kuIDku71cblx0ICAgICAgdmFyIGN1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICB2YXIgcGFnZU5hbWUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcyB8fCAncGFnZSc7XG5cdCAgICAgIHZhciBkYXRhID0ge307XG5cdCAgICAgIGRhdGFbcGFnZU5hbWVdID0gcGFyYW1zO1xuXHQgICAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbygnYXBsdXMtcGFnZS1wcm9wZXJ0aWVzJywgZGF0YSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCM2MDM0YzFkYVxuXHQgICAqL1xuXHQgIF91cGRhdGVOZXh0UGFnZVByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMpIHtcblx0ICAgIGlmICghcGFyYW1zKSB7XG5cdCAgICAgIHBhcmFtcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKG15KSB7XG5cdCAgICAgIHZhciBkYXRhID0ge1xuXHQgICAgICAgIHR5cGU6ICd1cGRhdGVOZXh0UHJvcCcsXG5cdCAgICAgICAgZXZlbnRJZDogLTEsXG5cdCAgICAgICAgZXZlbnRpZDogLTEsXG5cdCAgICAgICAgbmFtZTogJycsXG5cdCAgICAgICAgcGFnZU5hbWU6ICcnLFxuXHQgICAgICAgIGNvbU5hbWU6ICcnLFxuXHQgICAgICAgIGFyZzE6ICcnLFxuXHQgICAgICAgIGFyZzI6ICcnLFxuXHQgICAgICAgIGFyZzM6ICcnLFxuXHQgICAgICAgIHBhcmFtOiBwYXJhbXMsXG5cdCAgICAgICAgcGFyYW1zOiBwYXJhbXNcblx0ICAgICAgfTtcblx0ICAgICAgaWYgKG15LmNhbGxVc2VyVHJhY2spIHtcblx0ICAgICAgICBteS5jYWxsVXNlclRyYWNrKCdjb21taXR1dCcsIGRhdGEpO1xuXHQgICAgICB9IGVsc2UgaWYgKG15LnJlcG9ydEFuYWx5dGljcykge1xuXHQgICAgICAgIG15LnJlcG9ydEFuYWx5dGljcygnZW50ZXInLCBkYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRvIGFwcGVuZCBgbWV0YWAgdGFnIGlmIHRoZXJlJ3Mgbm9uZSBhcGx1cyBtZXRhLlxuXHQgICAqIE90aGVyd2lzZSwgbWVyZ2UgY29udGVudCBhdHRyaWJ1dGVzOlxuXHQgICAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuXHQgICAqICAtIGBPYmplY3QuYXNzaWduYCBjYWxsZWQgb24gT2JqZWN0IHZhbHVlcy5cblx0ICAgKiAgQHBhcmFtIGtcblx0ICAgKiAgQHBhcmFtIHZcblx0ICAgKi9cblx0ICBfYXBwZW5kTWV0YUluZm86IG1ldGFJbmZvLmFwcGVuZE1ldGFJbmZvLFxuXHRcblx0ICAvKipcblx0ICAgKiBnZXQgbWV0YUluZm8gYnkga2V5XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9XG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHQgIGdldE1ldGFJbmZvOiBmdW5jdGlvbiAoaykge1xuXHQgICAgcmV0dXJuIG1ldGFJbmZvLmdldE1ldGFJbmZvKGspO1xuXHQgIH0sXG5cdFxuXHQgIC8vIOa3seW6puWFi+mahu+8jOS7juaguOW/g+W6k+aatOmcsuWHuuWOu+S+m2FwbHVzSlPmj5Lku7bkvb/nlKhcblx0ICBjbG9uZURlZXA6IGNsb25lRGVlcCxcblx0ICAvKipcblx0ICAgKiDlpoLmnpzlrrnlmajlrp7njrDkuoZhcHBlYXLjgIFkaXNhcHBlYXLvvIzkvYbkuJrliqHlj4jmg7PmiYvliqjmjqfliLbmiZPngrnnlJ/lkb3lkajmnJ/ml7bkvb/nlKhcblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKi9cblx0ICBfc2tpcFBhZ2U6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcblx0ICAgIC8vIFVzZXJUcmFjay5za2lwUGFnZSgpO1xuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygnc2tpcFBhZ2UnKTtcblx0ICAgIH1cblx0ICB9LFxuXHQgIC8qKlxuXHQgICAqIOWmguaenOWuueWZqOacquaPkOS+m2FwcGVhcuOAgWRpc2FwcGVhcuaXtumcgOimgeS4muWKoeaJi+WKqOiwg+eUqFxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuXHQgICAqL1xuXHQgIF9wYWdlQXBwZWFyOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbigpe1xuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgaXNQYWdlRGlzQXBwZWFyKSB7XG5cdCAgICAgIGlzUGFnZURpc0FwcGVhciA9IGZhbHNlO1xuXHQgICAgICBpc1BhZ2VBcHBlYXIgPSB0cnVlO1xuXHQgICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlQXBwZWFyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiDlpoLmnpzlrrnlmajmnKrmj5DkvpthcHBlYXLjgIFkaXNhcHBlYXLml7bpnIDopoHkuJrliqHmiYvliqjosIPnlKhcblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKi9cblx0ICBfcGFnZURpc2FwcGVhcjogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKXtcblx0ICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrICYmIGlzUGFnZUFwcGVhcikge1xuXHQgICAgICBpc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuXHQgICAgICBpc1BhZ2VBcHBlYXIgPSBmYWxzZTtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygncGFnZURpc2FwcGVhcicpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgX3VwZGF0ZVBhZ2VVdHBhcmFtOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zKSB7XG5cdCAgICBpZiAoIXBhcmFtcykge1xuXHQgICAgICBwYXJhbXMgPSB7fTtcblx0ICAgIH1cblx0ICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG5cdCAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3VwZGF0ZVBhZ2VVdHBhcmFtJywge1xuXHQgICAgICAgICd1dFBhcmFtSnNvbic6IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgX3VwZGF0ZU5leHRQYWdlVXRwYXJhbTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24ocGFyYW1zKXtcblx0ICAgIGlmICghcGFyYW1zKSB7XG5cdCAgICAgIHBhcmFtcyA9IHt9O1xuXHQgICAgfVxuXHQgICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2spIHtcblx0ICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJywge1xuXHQgICAgICAgICd1dFBhcmFtSnNvbic6IEpTT04uc3RyaW5naWZ5KHBhcmFtcylcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5LuF5omL5reY77yIVjkuMTAuMO+8ieWwj+eoi+W6j+aUr+aMgVxuXHQgICAqIEBwYXJhbXMge09iamVjdH0gcHJvcGVydGllc1xuXHQgICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cblx0ICAgKi9cblx0ICBfdXBkYXRlU2Vzc2lvblByb3BlcnRpZXM6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwcm9wZXJ0aWVzKSB7XG5cdCAgICAvLyBpZiAobXkgJiYgbXkucmVwb3J0QW5hbHl0aWNzICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuXHQgICAgLy8gICBteS5yZXBvcnRBbmFseXRpY3MoJ3VwZGF0ZVNlc3Npb25Qcm9wZXJ0aWVzJywgcHJvcGVydGllcyk7XG5cdCAgICAvLyB9XG5cdCAgICBpZiAobXkgJiYgbXkuY2FsbCAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgbXkuY2FsbCgnaGFuZGxlTG9nZ2luZ0FjdGlvbicsIHtcblx0ICAgICAgICB0eXBlOiAnYmVoYXZpb3InLFxuXHQgICAgICAgIHN1YlR5cGU6ICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsXG5cdCAgICAgICAgZXh0RGF0YTogcHJvcGVydGllcyxcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICAvKipcblx0ICAgKiDku4XmiYvmt5jvvIhWOS45LjDvvInlsI/nqIvluo/mlK/mjIFcblx0ICAgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2s6IHtzcG1Vcmw6ICcnfVxuXHQgICAqL1xuXHQgIF9nZXRQYWdlU3BtVXJsOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgIF9nZXRQYWdlU3BtKHtcblx0ICAgICAgc3ViVHlwZTogJ2dldFBhZ2VTcG1VcmwnLFxuXHQgICAgICBzcG1UeXBlOiAnc3BtVXJsJ1xuXHQgICAgfSwgY2FsbGJhY2spO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOS7heaJi+a3mO+8iFY5LjkuMO+8ieWwj+eoi+W6j+aUr+aMgVxuXHQgICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayA6IHtzcG1QcmU6ICcnfVxuXHQgICAqL1xuXHQgIF9nZXRQYWdlU3BtUHJlOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcblx0ICAgIF9nZXRQYWdlU3BtKHtcblx0ICAgICAgc3ViVHlwZTogJ2dldFBhZ2VTcG1QcmUnLFxuXHQgICAgICBzcG1UeXBlOiAnc3BtUHJlJ1xuXHQgICAgfSwgY2FsbGJhY2spO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIOiuvue9rlBhZ2VOYW1lIFxuXHQgICovXG5cdCAgX3NldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYWdlTmFtZSwgcGF0aCkge1xuXHQgICAgaWYgKCFwYWdlTmFtZSkge1xuXHQgICAgICB1bG9nKCkudygnc2V0UGFnZU5hbWUgZmFpbGVkOiAnICsgJyBwYWdlTmFtZT0nICsgcGFnZU5hbWUpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgY3VyUGF0aCA9IHBhdGggfHwgUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG5cdCAgICBcblx0ICAgIHZhciBwYWdlTWV0YSA9IGNsb25lRGVlcChtZXRhSW5mby5nZXRNZXRhSW5mbygncGFnZUNvbmZpZycpIHx8IHt9KTtcblx0ICAgIHBhZ2VNZXRhW2N1clBhdGhdID0gcGFnZU5hbWU7XG5cdCAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbygncGFnZUNvbmZpZycsIHBhZ2VNZXRhKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDojrflj5ZQYWdlTmFtZVxuXHQgICovXG5cdCAgZ2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhdGgpIHtcblx0ICAgIHJldHVybiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZShwYXRoKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDojrflj5blhYPntKDnmoRzcG1cblx0ICAgKiAqLyBcblx0ICBfZ2V0RWxlbWVudFNQTTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24odGFyZ2V0LCBjYWxsYmFjaykge1xuXHQgICAgaWYgKCF0YXJnZXQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgXG5cdCAgICB2YXIgc3BtQiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgJyc7IFxuXHRcblx0ICAgIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnc3RyaW5nJykge1xuXHQgICAgICB2YXIgdHJhY2tlclBhcmFtcyA9IHRhcmdldC5kYXRhc2V0ICYmIHRhcmdldC5kYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwgJyc7XG5cdCAgICAgIHZhciBzcG1DRCA9IHV0aWwuanNvbkxpa2VTdHIySlNPTih0cmFja2VyUGFyYW1zKTtcblx0ICAgICAgcmV0dXJuIFtzcG1CLCBzcG1DRC5zcG1DLCBzcG1DRC5zcG1EXS5qb2luKCcuJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIHZhciBhdXRvX2Nsa19tZXRhaW5mbyA9IG1ldGFJbmZvLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpIHx8IFtdO1xuXHQgICAgICB2YXIgYXV0b19leHBfbWV0YWluZm8gPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKSB8fCBbXTtcblx0ICAgICAgdmFyIHRhcmdldFNwbTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgaTtcblx0ICAgICAgICAvL+iHquWKqOeCueWHu+S8mOWFiOe6p+abtOmrmFxuXHQgICAgICAgIGZvcihpID0gMDsgaSA8IGF1dG9fY2xrX21ldGFpbmZvLmxlbmd0aDsgaSsrKXtcblx0ICAgICAgICAgIHZhciBjbGtfaW5mbyA9IGF1dG9fY2xrX21ldGFpbmZvW2ldO1xuXHQgICAgICAgICAgaWYgKGNsa19pbmZvLmNzc1NlbGVjdG9yID09PSB0YXJnZXQpIHtcblx0ICAgICAgICAgICAgdGFyZ2V0U3BtID0gW3NwbUIsIGNsa19pbmZvLnNwbUMsIGNsa19pbmZvLnNwbURdLmpvaW4oJy4nKTtcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfTtcblx0ICAgICAgICBcblx0ICAgICAgICBmb3IoaSA9IDA7IGkgPCBhdXRvX2V4cF9tZXRhaW5mby5sZW5ndGg7IGkrKyl7XG5cdCAgICAgICAgICB2YXIgZXhwX2luZm8gPSBhdXRvX2V4cF9tZXRhaW5mb1tpXTtcblx0ICAgICAgICAgIGlmIChleHBfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG5cdCAgICAgICAgICAgIHRhcmdldFNwbSA9IFtzcG1CLCBleHBfaW5mby5zcG1DLCBleHBfaW5mby5zcG1EXS5qb2luKCcuJyk7XG5cdCAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH07IFxuXHRcblx0ICAgICAgICB2YXIgZWxlbWVudHMgPSBjdHguY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbCh0YXJnZXQpO1xuXHQgICAgICAgIGlmICh0eXBlb2YgZWxlbWVudHMuZmllbGRzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuXHQgICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuXHQgICAgICAgICAgICBpZDogdHJ1ZSxcblx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKHJldCkge1xuXHQgICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG5cdCAgICAgICAgICAgIGlmIChyZXQgJiYgcmV0Lmxlbmd0aCA+IDApIHtcblx0ICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSByZXQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRhcmdldFNwbSArICdfJyArIGkpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQpOyAgXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KS5leGVjKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlcnJvcikge1xuXHQgICAgICAgIHVsb2coKS53KCdjdXJyZW50IG1pbmlhcHAgcGxhdGZvcm0gZG9lcyBub3Qgc3VwcG9ydCBkb20gZWxlbWVudCBxdWVyeSwgZXJybXNnOiAnLCBlcnJvcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiDkuZ3plKHpnIDmsYLvvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2x4bG43aC9idnp5bXIvYWtiNDlmI2hQYVhMXG5cdCAgICogYXBw5ZSk6LW35LqL5Lu25o6l5Y+j77yM5a6e6ZmF5bCx5pivcmVjb3JkXG5cdCAgICovXG5cdCAgX3JlY29yZEFwcExpbms6IGZ1bmN0aW9uIChnb2tleSwgbWV0aG9kLCBjYikge1xuXHQgICAgaWYoIWdva2V5LnRhcmdldEFwcEtleSkge1xuXHQgICAgICB1bG9nKCkudygnc2VuZCAkJF9hcHBfbGluayBmYWlsZWQ6IHRhcmdldEFwcEtleSBpcyBudWxsJyk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIHJldHVybiBhcGx1cy5fcmVjb3JkKCckJF9hcHBfbGluaycsICdPVEhFUicsIGdva2V5LCBtZXRob2QsIGNiKTtcblx0ICB9LFxuXHR9KTtcblx0XG5cdGV4cG9ydHMucnVuID0gcnVuO1xuXG5cbi8qKiovIH0pLFxuLyogNjkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHR2YXIgdXRpbFB1YnN1YiA9IF9fd2VicGFja19yZXF1aXJlX18oNDkpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgQ29tcG9zZSA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpO1xuXHR2YXIgcGx1Z2luc0xvYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpO1xuXHRcblx0LyoqXG5cdCAqIHNlbnB2XG5cdCAqIEBwYXJhbSBbT2JqZWN0XSBjb25maWc6IHtcblx0ICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG5cdCAqICAgaXNfYXV0bzogdHJ1ZS9mYWxzZe+8jCAvLyDmoIfor4bmmK/lkKboh6rliqjmiZPngrnvvIzpu5jorqTkuLp0cnVl77yM5Y2V6aG15bqU55So6ZyA6KaB5LygZmFsc2Vcblx0ICogICBwYWdlX2lkOiAxMjMsICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG5cdCAqICAgZ29rZXk6ICcnLCAgICAgICAgICAgLy8g55uu5YmN5bey57uP5aSx5pWIXG5cdCAqICAgcmVmZXJyZXI6ICdodHRwOi8vd3d3LnRhb2Jhby5jb20nICAgLy8g5bCG5Lya5pu/5o2icHbor7fmsYLnmoRwcmXlj4LmlbBcblx0ICogfSAvLyDlkIwgYXBsdXMubGF1bmNo56ys5LqM5Liq5YWl5Y+C4oCcbWFudWFs4oCdXG5cdCAqXG5cdCAqIEBwYXJhbSBbT2JqZWN0XSB1c2VyZGF0YSAgIC8vIOWQhOenjeiHquWumuS5iXB25Y+C5pWwXG5cdCAqXG5cdCAqIEBwYXJhbSBbT2JqZWN0XSBvYmogLSB7Zm5fYWZ0ZXJfcHY6IGZuX2FmdGVyX3B2LCB4eHg6IHh4eH1cblx0ICpcblx0ICogc3RlcDE6IGxvYWRlciBwbHVnaW5zICBtaWRkbGV3YXJlXG5cdCAqIHN0ZXAyOiBsb2FkZXIgZG9TZW5kUHYgbWlkZGxld2FyZVxuXHQgKiBzdGVwMzogcnVuIG1pZGRsZXdhcmVzXG5cdCAqL1xuXHRcblx0dmFyIFJlZHVjZXIgPSBmdW5jdGlvbigpIHtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIE9iamVjdCBDT05GSUcge1xuXHQgKiAgIGNvbnRleHQ6IHh4eCxcblx0ICogICBwbHVnaW5zOiB4eHggXG5cdCAqIH1cblx0ICogQHBhcmFtcyBPYmplY3Qgb3B0cyB7XG5cdCAqICAgY29uZmlnOiBjb25maWcsXG5cdCAqICAgdXNlcmRhdGE6IHVzZXJkYXRhLFxuXHQgKiAgIHB1YnN1YlR5cGU6ICdwdicgfHwgJ2hqbGonIHx8ICdwcmVwdidcblx0ICogICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9wdicgfHwgJ213X2NoYW5nZV9oamxqJyB8fCAnbXdfY2hhbmdlX3ByZXB2J1xuXHQgKiAgIG1lc3NhZ2VGblF1ZXVlOiBbZm4xLCBmbjIgLi4uXVxuXHQgKiB9XG5cdCAqL1xuXHRSZWR1Y2VyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoQ09ORklHLCBvcHRzLCBjYWxsYmFjaykge1xuXHQgIC8vIDHjgIFpbml0IHBsdWdpbnNcblx0ICB2YXIgcGwgPSBuZXcgcGx1Z2luc0xvYWRlcigpO1xuXHQgIHBsLmluaXQoe1xuXHQgICAgbWlkZGxld2FyZTogW10sXG5cdCAgICBjb25maWc6IG9wdHMuY29uZmlnLFxuXHQgICAgcGx1Z2luczogQ09ORklHLnBsdWdpbnNcblx0ICB9KTtcblx0ICB2YXIgbWlkZGxld2FyZSA9IHBsLnJ1bigpO1xuXHRcblx0ICAvLyDliJ3lp4vljJbkuIrkuIvmlofnjq/looPvvIxjb250ZXh05YaF55qEZGF0YeWwhuS8muWcqOWQhOS4quaPkuS7tuS4rei/m+ihjOi1i+WAvOaIluiAheS/ruaUue+8iOmHjeimge+8iVxuXHQgIHZhciBjb250ZXh0ID0gaXNGdW5jdGlvbihDT05GSUcuY29udGV4dCkgPyBuZXcgQ09ORklHLmNvbnRleHQoKSA6IENPTkZJRy5jb250ZXh0O1xuXHQgIGNvbnRleHQudXNlcmRhdGEgPSBvcHRzLnVzZXJkYXRhO1xuXHQgIGNvbnRleHQubG9nZ2VyID0gdXRpbExvZ2dlci5sb2dnZXI7XG5cdFxuXHQgIHZhciBhcHAgPSB7XG5cdCAgICBjb250ZXh0OiBjb250ZXh0LFxuXHQgICAgcHVic3ViOiB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdhcGx1c19wdWJzdWInKSxcblx0ICAgIHB1YnN1YlR5cGU6IG9wdHMgJiYgb3B0cy5wdWJzdWJUeXBlXG5cdCAgfTtcblx0XG5cdCAgdmFyIGNvbXBvc2UgPSBuZXcgQ29tcG9zZSgpO1xuXHQgIGNvbXBvc2UuY3JlYXRlKGFwcCk7XG5cdCAgLy8g5omn6KGM5Lit6Ze05Lu2XG5cdCAgY29tcG9zZS53cmFwKG1pZGRsZXdhcmUsIGZ1bmN0aW9uKCkge1xuXHQgICAgYXBwLmNvbnRleHQuc3RhdHVzID0gYXBsdXNTdGF0aWMuQ09NUExFVEU7XG5cdCAgICBpZiAob3B0cykge1xuXHQgICAgICBpZiAob3B0cy5taWRkbGV3YXJlTWVzc2FnZUtleSkge1xuXHQgICAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coW29wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXksIGFwcC5jb250ZXh0XSk7ICBcblx0ICAgICAgfVxuXHQgICAgICBpZiAob3B0cy5tZXNzYWdlRm5RdWV1ZSkge1xuXHQgICAgICAgIGVhY2gob3B0cy5tZXNzYWdlRm5RdWV1ZSwgZnVuY3Rpb24gKGZuKSB7XG5cdCAgICAgICAgICBmbih1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyksIENPTkZJRyk7XG5cdCAgICAgICAgfSk7ICBcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG5cdCAgICAgIGNhbGxiYWNrKGFwcC5jb250ZXh0KTtcblx0ICAgIH1cblx0ICB9KSgpO1xuXHRcblx0fTtcblx0bW9kdWxlLmV4cG9ydHMgPSBSZWR1Y2VyO1xuXG5cbi8qKiovIH0pLFxuLyogNzAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIOaXpeW/l+exu+W3peWFt+mbhuWQiFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG8gOntcblx0ICogICBsZXZlbDogJ3dhcm4vaW5mby9sb2cnIGRlZmF1bHQgaXMgd2FyblxuXHQgKiAgIG1zZzogJ21zZydcblx0ICogfVxuXHQgKi9cblx0dmFyIG1ldGFJbmZvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OCk7XG5cdHZhciBwcmVmaXggPSAnW0FQTFVTXSAtLSAnO1xuXHRleHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG5cdCAgaWYgKCFvKSB7XG5cdCAgICBvID0ge307XG5cdCAgfVxuXHQgIHZhciBsZXZlbCA9IG8ubGV2ZWwgfHwgJ3dhcm4nO1xuXHQgIGNvbnNvbGUgJiYgY29uc29sZVtsZXZlbF0gJiYgY29uc29sZVtsZXZlbF0ocHJlZml4K28ubXNnKTtcblx0fTtcblx0ZXhwb3J0cy5sb2cgPSBmdW5jdGlvbigpe1xuXHQgIHZhciBkZWJ1ZyA9IG1ldGFJbmZvICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdkZWJ1ZycpO1xuXHQgIGRlYnVnICYmIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsW3ByZWZpeF0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSk7XG5cdH07XG5cdFxuXHRleHBvcnRzLmRlYnVnTG9nID0gZnVuY3Rpb24obykge1xuXHQgIHZhciBhcGx1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMikuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgaWYgKGFwbHVzICYmIGFwbHVzLmFwbHVzRGVidWcpIHtcblx0ICAgIHRoaXMubG9nZ2VyKG8pO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDcxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zIC0gc3JjL2xpYl91L2NvbmZpZy9jb21wb3NlLmpzXG5cdCAqIOWHveaVsOmYn+WIl+WMheijheWZqCBFeHBvc2UgY29tcG9zaXRvclxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0ZnVuY3Rpb24gY29tcG9zZSAoKSB7fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG5cdCAgLyoqXG5cdCAgICogY3JlYXRl5a6e6ZmF5LiK5piv5a+5bmV355qE5bCB6KOF77ybXG5cdCAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG5cdCAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuXHQgICAqL1xuXHQgIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcblx0ICAgIGlmICh0eXBlb2YgdGhpc1tuYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdGhpc1tuYW1lXSA9IHByb3BzW25hbWVdO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLmNhbGxlZExpc3QgPSBbXTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLnNldENhbGxlZExpc3QgPSBmdW5jdGlvbihpKSB7XG5cdCAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRoaXMuY2FsbGVkTGlzdCwgaSkgPT09IC0xKSB7XG5cdCAgICB0aGlzLmNhbGxlZExpc3QucHVzaChpKTtcblx0ICB9XG5cdH07XG5cdFxuXHRjb21wb3NlLnByb3RvdHlwZS5yZXNldENhbGxlZExpc3QgPSBmdW5jdGlvbigpIHtcblx0ICB0aGlzLmNhbGxlZExpc3QgPSBbXTtcblx0fTtcblx0XG5cdGNvbXBvc2UucHJvdG90eXBlLndyYXAgPSBmdW5jdGlvbihtdywgY2FsbGJhY2spIHtcblx0ICB2YXIgY29udGV4dCA9IHRoaXM7XG5cdCAgdmFyIGN0eCA9IHRoaXMuY29udGV4dCB8fCB7fTtcblx0ICB2YXIgY29tcG9zZSA9IGN0eC5jb21wb3NlIHx8IHt9O1xuXHQgIHZhciBtYXhUaW1lb3V0ID0gY29tcG9zZS5tYXhUaW1lb3V0IHx8IDEwICogMTAwMDtcblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSkge1xuXHQgICAgdmFyIHNpemUgPSBtdy5sZW5ndGg7IC8vIOS4remXtOS7tumYn+WIl+mVv+W6plxuXHQgICAgdmFyIGkgPSAwOyAvLyDkuK3pl7Tku7bntKLlvJVcblx0ICAgIHZhciBqID0gMDsgLy8g5LiA5Liq5qCH6K+G77yMMC3liJ3lp4vnirbmgIHvvIwxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuXHQgICAgdmFyIHNsZWVwSGFuZGVyMTtcblx0ICAgIHZhciBydW4gPSBmdW5jdGlvbihpbmRleCwgc3RhdHVzKSB7XG5cdCAgICAgIC8vIGNvbnRleHQucHVic3ViSW5mbyhjb250ZXh0LCBtd1tpXSk7XG5cdCAgICAgIC8vIOS4remXtOS7tumYn+WIl+aJp+ihjOWujOavleWQjui/lOWbnlxuXHQgICAgICBpZiAoaSA9PT0gc2l6ZSkge1xuXHQgICAgICAgIHN0YXRlID0gJ2RvbmUnO1xuXHQgICAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7IC8vIOmHjee9rmNhbGxlZExpc3Tlj5jph49cblx0ICAgICAgICAvLyBzdGF0dXPlpoLmnpznrYnkuo5kb25l77yM6K+05piO5piv5Lit6YCU6YCA5Ye655qE5Lit6Ze05Lu277yM5LiN6ZyA6KaB5omn6KGM5Zue6LCDXG5cdCAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spICYmIHN0YXR1cyAhPT0gc3RhdGUpIHtcblx0ICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgc3RhdGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjbGVhclRpbWVvdXQoc2xlZXBIYW5kZXIxKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdmFyIGNiX3N0YXRlID0gbnVsbDtcblx0ICAgICAgLy8g5L+d6K+B5q+P5Liq5Lit6Ze05Lu25Y+q5Lya5omn6KGM5LiA5qyhXG5cdCAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZihjb250ZXh0LmNhbGxlZExpc3QsIGkpID09PSAtMSkge1xuXHQgICAgICAgIGNvbnRleHQuc2V0Q2FsbGVkTGlzdCAmJiBjb250ZXh0LnNldENhbGxlZExpc3QoaSk7XG5cdCAgICAgICAgaWYgKG13ICYmIG13W2ldICYmIGlzRnVuY3Rpb24obXdbaV1bMF0pKSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1pZGRsZXdhcmVcblx0ICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1zZ1xuXHQgICAgICAgICAgICAgKi9cblx0ICAgICAgICAgICAgc3RhdGUgPSBtd1tpXVswXS5jYWxsKGNvbnRleHQsIHN0YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgaSsrO1xuXHQgICAgICAgICAgICAgIGogPSAxOyAgLy8gMS3kuK3pl7Tku7blm57osIPmiafooYzkuoZcblx0ICAgICAgICAgICAgICBydW4oaSk7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICB1bG9nKCkudyhlKTtcblx0ICAgICAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgICAgICAvLyAgIG1zZzogZVxuXHQgICAgICAgICAgICAvLyB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICAvLyDnirbmgIHkuLpwYXVzZeetieW+hTIwMG1z6L2u6K+i77yM54q25oCB5Li6bnVtYmVy57G75Z6L55qE5pWw5YC8562J5b6Fc3RhdGVtc+i9ruivolxuXHQgICAgICB2YXIgaXNOdW1iZXIgPSB0eXBlb2Ygc3RhdGUgPT09ICdudW1iZXInO1xuXHQgICAgICBpZiAoc3RhdGUgPT09ICdwYXVzZScgfHwgaXNOdW1iZXIpIHtcblx0ICAgICAgICBqID0gMDtcblx0ICAgICAgICAvLyDmnIDlpKfnrYnlvoXml7bplb9cblx0ICAgICAgICB2YXIgX3RpbWVfb3V0ID0gaXNOdW1iZXIgPyBzdGF0ZSA6IG1heFRpbWVvdXQ7XG5cdCAgICAgICAgdmFyIF9td19uYW1lID0gbXdbaV0gPyBtd1tpXVsxXSA6ICcnO1xuXHQgICAgICAgIHNsZWVwSGFuZGVyMSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgICBpZiAoaiA9PT0gMCkge1xuXHQgICAgICAgICAgICB1bG9nKCkudygnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dCk7XG5cdCAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcblx0ICAgICAgICAgICAgLy8gICBtc2c6ICdqdW1wIHRoZSBtaWRkbGV3YXJlIGFib3V0ICcgKyBfbXdfbmFtZSArICcsIGJlY2F1c2Ugd2FpdGluZyB0aW1lb3V0IG1heFRpbWVvdXQgPSAnICsgX3RpbWVfb3V0XG5cdCAgICAgICAgICAgIC8vIH0pO1xuXHQgICAgICAgICAgICBzdGF0ZSA9IG51bGw7XG5cdCAgICAgICAgICAgIGkrKztcblx0ICAgICAgICAgICAgcnVuKGkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIF90aW1lX291dCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuXHQgICAgICAgIC8vIOeKtuaAgeS4umRvbmXooajnpLrnu5PmnZ/vvIzkuI3nrqHlkI7pnaLov5jmnInmsqHmnInkuK3pl7Tku7bpg73nu5PmnZ9cblx0ICAgICAgICBpID0gc2l6ZTtcblx0ICAgICAgICBydW4oaSwgc3RhdGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIOm7mOiupOeKtuaAge+8jOWPqueuoeaJp+ihjOS4remXtOS7tumYn+WIl1xuXHQgICAgICAgIGkrKztcblx0ICAgICAgICBydW4oaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICBpZiAoY29udGV4dC5jYWxsZWRMaXN0ICYmIGNvbnRleHQuY2FsbGVkTGlzdC5sZW5ndGggPiAwKSB7XG5cdCAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcnVuKGkpO1xuXHQgIH07XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvbXBvc2U7XG5cbi8qKiovIH0pLFxuLyogNzIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvcGx1Z2luc0xvYWRlci5qc1xuXHQgKiDmj5Lku7bliqDovb3lmahcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYXNzaWduID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICogQHBhcmFtcyBvcHRzIHtcblx0ICAgICAqICAgbWlkZGxld2FyZTogW10sXG5cdCAgICAgKiAgIHBsdWdpbnM6IFtdLFxuXHQgICAgICogICBjb25maWc6IHt9XG5cdCAgICAgKiB9XG5cdCAgICAgKi9cblx0ICAgIGluaXQ6IGZ1bmN0aW9uKG9wdHMpIHtcblx0ICAgICAgdGhpcy5vcHRzID0gb3B0cztcblx0ICAgICAgaWYgKG9wdHMgJiYgdHlwZW9mIG9wdHMubWlkZGxld2FyZSA9PT0gJ29iamVjdCcgJiYgb3B0cy5taWRkbGV3YXJlLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB0aGlzLm1pZGRsZXdhcmUgPSBvcHRzLm1pZGRsZXdhcmU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5taWRkbGV3YXJlID0gW107XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5wbHVnaW5zX25hbWUgPSBbXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiDliIblj5HorqLpmIXlj5jljJZcblx0ICAgICAqIEBwYXJhbSBvIHtcblx0ICAgICAqICAgcHVic3ViOiB7Li4ufSxcblx0ICAgICAqICAgY29udGV4dDogey4uLn1cblx0ICAgICAqIH0sXG5cdCAgICAgKiBAcGFyYW0gbXcg5b2T5YmN5omn6KGM55qE5Lit6Ze05Lu2XG5cdCAgICAgKi9cblx0ICAgIHB1YnN1YkluZm86IGZ1bmN0aW9uKGN0eCwgbXcpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgcHVic3ViID0gY3R4LnB1YnN1Yjtcblx0ICAgICAgICBpZiAocHVic3ViKSB7XG5cdCAgICAgICAgICBwdWJzdWIucHVibGlzaCgncGx1Z2luc19jaGFuZ2VfJyArIGN0eC5wdWJzdWJUeXBlLCBtdyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdWxvZygpLncoZSk7XG5cdCAgICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAgIC8vICAgbXNnOiBlXG5cdCAgICAgICAgLy8gfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoaW5kZXgpIHtcblx0ICAgICAgaWYoIWluZGV4KSBpbmRleCA9IDA7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBtaWRkbGV3YXJlID0gdGhpcy5taWRkbGV3YXJlO1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0cyB8fCB7fTtcblx0ICAgICAgdmFyIHBsdWdpbnMgPSBvcHRzLnBsdWdpbnM7XG5cdCAgICAgIGlmIChwbHVnaW5zICYmIHR5cGVvZiBwbHVnaW5zID09PSAnb2JqZWN0JyAmJiBwbHVnaW5zLmxlbmd0aCA+IDApIHtcblx0ICAgICAgICB2YXIgcGx1Z2luID0gcGx1Z2luc1tpbmRleF07XG5cdCAgICAgICAgdGhpcy5wbHVnaW5zX25hbWUucHVzaChwbHVnaW4ubmFtZSk7XG5cdCAgICAgICAgbWlkZGxld2FyZS5wdXNoKFtmdW5jdGlvbihzdGF0ZSwgY2Ipe1xuXHQgICAgICAgICAgX3NlbGYucHVic3ViSW5mbyh0aGlzLCBwbHVnaW4pO1xuXHQgICAgICAgICAgLy8g6I635Y+W5o+S5Lu25qih5Z2X6Lev5b6E5bm25Yid5aeL5YyWXG5cdCAgICAgICAgICB2YXIgbSA9IG5ldyBwbHVnaW4ucGF0aCgpO1xuXHRcblx0ICAgICAgICAgIC8vIOS4uuiKguecgeS7o+eggemHj++8jOm7mOiupOeahOWIneWni+WMluaWueazleWcqOWKoOi9veWZqOWGheWBmuWFnOW6leWkhOeQhu+8jOWNs+aPkuS7tuWGheaXoOeJueauiuaDheWGteaXoOmcgOWunueOsGluaXTmlrnms5Vcblx0ICAgICAgICAgIGlmICghbS5pbml0KSB7XG5cdCAgICAgICAgICAgIG0uaW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIOWwhuS4iuS4i+aWh+azqOWFpeWIsOaPkuS7tuWGhVxuXHQgICAgICAgICAgbS5pbml0KHtcblx0ICAgICAgICAgICAgY29udGV4dDogdGhpcy5jb250ZXh0LFxuXHQgICAgICAgICAgICBjb25maWc6IGFzc2lnbihwbHVnaW4uY29uZmlnIHx8IHt9LCBvcHRzLmNvbmZpZylcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgcmV0dXJuIG0ucnVuKHN0YXRlLCBmdW5jdGlvbiAobXNnKSB7XG5cdCAgICAgICAgICAgIC8vIOi/memHjOS9v+eUqDHmr6vnp5Llu7bov5/miafooYzvvIzpmLLmraLkuK3pl7Tku7bkuLvkvZPlhoXnmoRjYWxsYmFja+WFiOaJp+ihjO+8jOWvvOiHtOahhuaetuaLv+S4jeWIsOS4remXtOS7tnJldHVybueahOetieW+heaXtumVv++8jOS7juiAjOWvvOiHtOebkeaOp+W8guW4uFxuXHQgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICBjYihwbHVnaW4sIG1zZyk7XG5cdCAgICAgICAgICAgIH0sIDEpO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSwgcGx1Z2luLm5hbWVdKTtcblx0XG5cdCAgICAgICAgaW5kZXgrKztcblx0ICAgICAgICBpZihwbHVnaW5zW2luZGV4XSl7XG5cdCAgICAgICAgICByZXR1cm4gdGhpcy5ydW4oaW5kZXgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gbWlkZGxld2FyZTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDczICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0ZnVuY3Rpb24gaXNUcml2ZXIoKSB7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciBVQSA9IG5hdmlnYXRvciA/IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci5zd3VzZXJBZ2VudCkgOiAnJztcblx0ICAgIHJldHVybiAvVHJpdmVyL2cudGVzdChVQSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNUcml2ZXI7XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogNzQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oNzUpKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGNvbGxlY3RfY2xrID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nik7XG5cdC8vIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgdXRpbERhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcblx0ICB2YXIgYXBsdXNDdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGNsa19jb25maWcgPSBbXTtcblx0XG5cdCAgdmFyIGluaXRDbGsgPSBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG5cdCAgICB2YXIgc3BtQiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG5cdCAgICB2YXIgZWxlbWVudHNHcm91cHMgPSBbXTtcblx0ICAgIGZ1bmN0aW9uIGVsZW1lbnRzUXVlcnlSZXN1bHRDYWxsYmFjayhlbGVtZW50cyxjb25maWcpe1xuXHQgICAgICBpZih1dGlsQXJyYXkuaXNBcnJheShlbGVtZW50cykpe1xuXHQgICAgICAgIGVsZW1lbnRzR3JvdXBzLnB1c2goe1xuXHQgICAgICAgICAgY29uZmlnOiBjb25maWcsXG5cdCAgICAgICAgICBlbGVtZW50czogZWxlbWVudHNcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICBpZihlbGVtZW50c0dyb3Vwcy5sZW5ndGg9PT1jbGtfY29uZmlnLmxlbmd0aCl7XG5cdCAgICAgICAgY29sbGVjdF9jbGsud2F0Y2hfY2xpY2sob3B0LmV2ZW50LCBlbGVtZW50c0dyb3Vwcywgb3B0LmNvbnRleHQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkoY2xrX2NvbmZpZykpIHtcblx0ICAgICAgY2xrX2NvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChjb25maWcpIHtcblx0ICAgICAgICBpZiAoIXV0aWxEYXNoLmlzU3RhcnRXaXRoKGNvbmZpZy5jc3NTZWxlY3RvciwgJy4nKSkge1xuXHQgICAgICAgICAgY29uZmlnLmNzc1NlbGVjdG9yID0gJy4nICsgY29uZmlnLmNzc1NlbGVjdG9yO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoIWNvbmZpZy5zcG1CKSB7XG5cdCAgICAgICAgICBjb25maWcuc3BtQiA9IHNwbUI7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBlbGVtZW50cyA9IG1pbmkuZ2V0Q29udGV4dCgpLmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoY29uZmlnLmNzc1NlbGVjdG9yKTtcblx0ICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZWxlbWVudHMuZmllbGRzKHtcblx0ICAgICAgICAgICAgaWQ6IHRydWUsXG5cdCAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG5cdCAgICAgICAgICAgIHJlY3Q6IHRydWUsXG5cdCAgICAgICAgICAgIHNjcm9sbE9mZnNldDogdHJ1ZVxuXHQgICAgICAgICAgfSwgZnVuY3Rpb24gKHJldCkge1xuXHQgICAgICAgICAgICBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2socmV0LGNvbmZpZyk7XG5cdCAgICAgICAgICB9KS5leGVjKCk7IFxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyDkuI3mlK/mjIFmaWVsZHPmlrnms5XnmoTlnLrmma/vvIjmlK/ku5jlrp3kuIvvvIzmlLnnlKjlnZDmoIfvvIlcblx0ICAgICAgICAgIGVsZW1lbnRzLmJvdW5kaW5nQ2xpZW50UmVjdCgpLmV4ZWMoZnVuY3Rpb24gKHJldCkge1xuXHQgICAgICAgICAgICBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2socmV0LGNvbmZpZyk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgXG5cdCAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuXHQgICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG5cdCAgICAgICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHQgIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgIC8vICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgLy8gICBhcmd1bWVudHM6IFsnb25TaG93JywgZnVuY3Rpb24gKCkge1xuXHQgIC8vICAgICAvLyBUT0RPXG5cdCAgLy8gICB9XVxuXHQgIC8vIH0pO1xuXHQgIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgIC8vICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgLy8gICBhcmd1bWVudHM6IFsnb25IaWRlJywgZnVuY3Rpb24gKCkge1xuXHQgIC8vICAgICAvLyBUT0RPXG5cdCAgLy8gICB9XVxuXHQgIC8vIH0pO1xuXHRcblx0ICBhcGx1c0N0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgaW5pdENsayhvcHQpO1xuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICAvLyBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblVubG9hZCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAvLyAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgLy8gICAgIC8vIFRPRE9cblx0ICAvLyAgIH1cblx0ICAvLyB9KTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA3NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY2xvbmVEZWVwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciB1dGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdHZhciBlYWNoID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0dmFyIHdhdGNoVHJhY2tlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzcpO1xuXHR2YXIgZ2V0SGFzaEtleSA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpO1xuXHR2YXIgcmF4VXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHQvKipcblx0ICog5oqK6Ieq5Yqo5pud5YWJ55u45ZCMY3NzU2VsZWN0b3LnmoTnm7jlkIzkvY3nva7nmoRkYXRhc2V05ou/5Yiw57uZ6Ieq5Yqo54K55Ye75L2/55SoXG5cdCAqIOWboOS4uuWcqOaUr+S7mOWuneeOr+Wig+S4i+iHquWKqOeCueWHu+S6i+S7tuaLv+S4jeWIsGRhdGFzZXRcblx0ICovXG5cdGZ1bmN0aW9uIGdldERhdGFTZXQgKGNvbmZpZywgaW5kZXgpIHtcblx0ICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG5cdCAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG5cdCAgXG5cdCAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG5cdCAgICB2YXIgZWxlX3MgPSBfaGFzaE1hcFtsb2drZXldIHx8IFtdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgdmFyIHYgPSBlbGVfc1tpXSB8fCB7fTtcblx0ICAgICAgdmFyIGV4cENvbmZpZyA9IHYuZXhwQ29uZmlnIHx8IHt9O1xuXHQgICAgICAvLyDmm53lhYljc3NTZWxlY3RvcuS4jueCueWHu+eahGNzc1NlbGVjdG9y55u45ZCM5omN6K6k5Li65piv5ZCM57G75Z6L5YWD57SgXG5cdCAgICAgIGlmIChjb25maWcuY3NzU2VsZWN0b3IgPT09IGV4cENvbmZpZy5jc3NTZWxlY3Rvcikge1xuXHQgICAgICAgIHZhciBoYXNoID0gZ2V0SGFzaEtleSh7XG5cdCAgICAgICAgICBpbmRleDogaW5kZXhcblx0ICAgICAgICB9LCBleHBDb25maWcpO1xuXHQgICAgICAgIFxuXHQgICAgICAgIGlmIChoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcblx0ICAgICAgICAgIHJldHVybiBjbG9uZURlZXAodi5kYXRhc2V0KTtcblx0ICAgICAgICB9ICBcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdGV4cG9ydHMud2F0Y2hfY2xpY2sgPSBmdW5jdGlvbiAoY2xrSW5mbywgZWxlbWVudHNHcm91cHMsIHBhZ2VDdHgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgcmVzdWx0cyA9IFtdO1xuXHQgIGVhY2goZWxlbWVudHNHcm91cHMsZnVuY3Rpb24oZ3JvdXApe1xuXHQgICAgdmFyIGVsZW1lbnRzID0gZ3JvdXAuZWxlbWVudHM7XG5cdCAgICB2YXIgY29uZmlnID0gZ3JvdXAuY29uZmlnO1xuXHQgICAgZm9yICh2YXIgaiA9IDA7IGogPCBlbGVtZW50cy5sZW5ndGg7IGorKykge1xuXHQgICAgICB2YXIgX3ZhbHVlID0gZWxlbWVudHNbal07XG5cdCAgICAgIGlmIChpc0luQXJlYShjbGtJbmZvLCBfdmFsdWUpKSB7XG5cdCAgICAgICAgdmFyIGluZGV4ID0gaiArIDE7XG5cdCAgICAgICAgdmFyIGRhdGFzZXQgPSBfdmFsdWUuZGF0YXNldCB8fCBnZXREYXRhU2V0KGNvbmZpZywgaW5kZXgpIHx8IHt9O1xuXHQgICAgICAgIHZhciBzcG1EYXRhID0ge307XG5cdCAgICAgICAgdmFyIF9zcG1EYXRhID0gdXRpbC5qc29uTGlrZVN0cjJKU09OKGRhdGFzZXQudHJhY2tlclBhcmFtcykgfHwge307XG5cdCAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuXHQgICAgICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuXHQgICAgICAgICAgc3BtRGF0YSA9IGNsb25lRGVlcChhcGx1cy5fJC5zcG0uZGF0YSB8fCB7fSk7XG5cdCAgICAgICAgICBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuXHQgICAgICAgICAgICB2YXIgZG9tRGF0YVNldCA9IHJheFV0aWwuZ2V0RGF0YVNldChjb25maWcsIGluZGV4LTEpO1xuXHQgICAgICAgICAgICB2YXIgYyA9IGRvbURhdGFTZXQuc3BtQyB8fCBjb25maWcuc3BtQyB8fCAnMCc7XG5cdCAgICAgICAgICAgIHZhciBkID0gZG9tRGF0YVNldC5zcG1EIHx8IGNvbmZpZy5zcG1EIHx8ICcwJztcblx0ICAgICAgICAgICAgc3BtRGF0YS5jID0gYztcblx0ICAgICAgICAgICAgc3BtRGF0YS5kID0gZDtcblx0ICAgICAgICAgICAgLy8g6KGl5YWFIHJheCBkYXRhLSog5bGe5oCnXG5cdCAgICAgICAgICAgIGRhdGFzZXQgPSBPYmplY3QuYXNzaWduKGRhdGFzZXQsIGRvbURhdGFTZXQpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuXHQgICAgICAgICAgICBzcG1EYXRhLmMgPSBzcG1DO1xuXHQgICAgICAgICAgICBpZiAoc3BtRGF0YS5jICYmIHNwbURhdGEuYyAhPT0gJzAnKSB7XG5cdCAgICAgICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBpbmRleDtcblx0ICAgICAgICAgICAgICBzcG1EYXRhLmQgPSBzcG1EO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHNwbURhdGEuYiA9IGNvbmZpZy5zcG1CO1xuXHQgICAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG5cdCAgICAgICAgICAgIHNwbURhdGEuYyA9IGNvbmZpZy5zcG1DO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuXHQgICAgICAgICAgfVxuXHQgIFxuXHQgICAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG5cdCAgICAgICAgICAgIHNwbURhdGEuZCA9IGluZGV4ID8gY29uZmlnLnNwbUQgKyAnXycgKyBpbmRleCA6IGNvbmZpZy5zcG1EO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXN1bHRzLnB1c2goe1xuXHQgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcblx0ICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgZWxlbWVudDogX3ZhbHVlLFxuXHQgICAgICAgICAgc3BtRGF0YTogc3BtRGF0YVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblx0ICBpZihyZXN1bHRzLmxlbmd0aD09PTEpe1xuXHQgICAgcmVzdWx0ID0gcmVzdWx0c1swXTtcblx0ICB9ZWxzZSBpZihyZXN1bHRzLmxlbmd0aD4xKXtcblx0ICAgIHJlc3VsdCA9IHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uKHByZXZpb3VzLGN1cnJlbnQpe1xuXHQgICAgICB2YXIgbWF0Y2hlZFJlc3VsdCA9IHByZXZpb3VzO1xuXHQgICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gcHJldmlvdXMuZWxlbWVudDtcblx0ICAgICAgdmFyIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudC5lbGVtZW50O1xuXHQgICAgICBpZihjdXJyZW50RWxlbWVudC50b3AgPj0gcHJldmlvdXNFbGVtZW50LnRvcCAmJiBjdXJyZW50RWxlbWVudC5yaWdodCA8PSBwcmV2aW91c0VsZW1lbnQucmlnaHQgJiYgY3VycmVudEVsZW1lbnQuYm90dG9tIDw9IHByZXZpb3VzRWxlbWVudC5ib3R0b20gJiYgY3VycmVudEVsZW1lbnQubGVmdCA+PSBwcmV2aW91c0VsZW1lbnQubGVmdCl7XG5cdCAgICAgICAgbWF0Y2hlZFJlc3VsdCA9IGN1cnJlbnQ7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIG1hdGNoZWRSZXN1bHQ7XG5cdCAgICB9KTtcblx0ICB9XG5cdCAgaWYocmVzdWx0KXtcblx0ICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0NMSycsIHJlc3VsdC5kYXRhc2V0LCByZXN1bHQuY29uZmlnLCByZXN1bHQuZWxlbWVudCwgcmVzdWx0LnNwbURhdGEsIHBhZ2VDdHgpO1xuXHQgIH1cblx0ICBmdW5jdGlvbiBpc0luQXJlYSAoY2xrSW5mbywgZWxlSW5mbykge1xuXHQgICAgdmFyIGNoYW5nZWRUb3VjaCA9IHt9O1xuXHQgICAgaWYgKGNsa0luZm8pIHtcblx0ICAgICAgaWYgKGNsa0luZm8uY2hhbmdlZFRvdWNoZXMpIHtcblx0ICAgICAgICAvLyDlvq7kv6Fcblx0ICAgICAgICBjaGFuZ2VkVG91Y2ggPSBjbGtJbmZvLmNoYW5nZWRUb3VjaGVzWzBdO1xuXHQgICAgICB9IGVsc2UgaWYgKGNsa0luZm8uZGV0YWlsKSB7XG5cdCAgICAgICAgLy8g5pSv5LuY5a6dXG5cdCAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5kZXRhaWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciB4ID0gY2hhbmdlZFRvdWNoLmNsaWVudFggfHwgMDtcblx0ICAgIHZhciB5ID0gY2hhbmdlZFRvdWNoLmNsaWVudFkgfHwgMDtcblx0XG5cdCAgICB2YXIgX3RvcCA9IGVsZUluZm8udG9wO1xuXHQgICAgdmFyIF9ib3R0b20gPSBlbGVJbmZvLmJvdHRvbTtcblx0ICAgIGlmIChlbGVJbmZvLnNjcm9sbFRvcCkge1xuXHQgICAgICBfdG9wICs9IGVsZUluZm8uc2Nyb2xsVG9wO1xuXHQgICAgICBfYm90dG9tICs9IGVsZUluZm8uc2Nyb2xsVG9wO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChlbGVJbmZvLmxlZnQgPCB4ICYmIHggPCBlbGVJbmZvLnJpZ2h0ICYmIF90b3AgPCB5ICYmIHkgPCBfYm90dG9tKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDc3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBmb3JtYXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQyKTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHR2YXIgQmFzZSA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpO1xuXHR2YXIgdXRpbExvZ2dlciA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHR2YXIgcmVjb3JkRXhwTWFwUXVldWUgPSB7fTtcblx0dmFyIERFRkFVTFRfUEtHX1NJWkUgPSAzO1xuXHR2YXIgUE9TVCA9ICdQT1NUJztcblx0dmFyIEVYUCA9ICdFWFAnO1xuXHRcblx0LyoqXG5cdCAqIOiOt+WPlueUqOaIt+azqOWFpeeahOWfi+eCueS/oeaBr++8mmh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9kb2NzL21ldGEjYjdkOGNjYzdcblx0ICogQHBhcmFtcyB7RnVuY3Rpb259IHVzZXJGbk5hbWVcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBlbGVtZW50XG5cdCAqIEBwYXJhbXMge09iamVjdH0gc2VsZWN0b3Jcblx0ICpcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0VXNlckluZm8gKHVzZXJGbk5hbWUsIGVsZW1lbnQsIHNlbGVjdG9yLCBzcG1EYXRhKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJykgfHwge307XG5cdCAgdmFyIGdldE1ldGFJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm87XG5cdCAgaWYgKHR5cGVvZiBnZXRNZXRhSW5mbyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdmFyIHVzZXJGbiA9IGdldE1ldGFJbmZvKHVzZXJGbk5hbWUpO1xuXHQgICAgdmFyIHVzZXJJbmZvID0ge307XG5cdCAgICBpZiAodHlwZW9mIHVzZXJGbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB1c2VySW5mbyA9IHVzZXJGbihlbGVtZW50ID8gY2xvbmVEZWVwKGVsZW1lbnQpIDoge30sIHNlbGVjdG9yLCBzcG1EYXRhKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmb3JtYXQucGFyYW0yb2JqKHVzZXJJbmZvKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHt9O1xuXHQgIH1cblx0fVxuXHRcblx0Ly8g6IGa5ZCI5LiK5oql5pud5YWJ5pel5b+XXG5cdHZhciBFdmVudEFycmF5ID0gQmFzZS5leHRlbmQoe1xuXHQgIHB1c2g6IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB0aGlzLmJ1ZmZlci5wdXNoKHZhbHVlKTtcblx0ICAgIHdoaWxlICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5wa2dTaXplKSB7XG5cdCAgICAgIHZhciBnb2tleXMgPSB0aGlzLmJ1ZmZlci5zcGxpY2UoMCwgdGhpcy5wa2dTaXplKTtcblx0ICAgICAgaWYgKGdva2V5cy5sZW5ndGggPiAwKSB7XG5cdCAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZCh0aGlzLmxvZ2tleSwgRVhQLCBnb2tleXMsIHRoaXMubWV0aG9kKTtcblx0ICAgICAgfVxuXHQgICAgfSBcblx0ICB9XG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gZ2V0Rml4ZWROdW1iZXIgKHZhbHVlLCBsZW5ndGgpIHtcblx0ICB2YXIgX3Jlc3VsdCA9ICcnO1xuXHQgIHRyeSB7XG5cdCAgICB2YXIgX251bSA9IG5ldyBOdW1iZXIodmFsdWUpO1xuXHQgICAgX3Jlc3VsdCA9IHBhcnNlRmxvYXQoX251bS50b0ZpeGVkKGxlbmd0aCkpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIF9yZXN1bHQgPSB2YWx1ZTtcblx0ICB9XG5cdCAgcmV0dXJuIF9yZXN1bHQ7XG5cdH1cblx0XG5cdGV4cG9ydHMucHVzaEV2ZW50ID0gZnVuY3Rpb24gKGdta2V5LCBkYXRhLCBjb25maWcsIGVsZW1lbnQsIHNwbURhdGEsIHBhZ2VDdHgpIHtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB2YXIgaXNBbGkgPSBhcGx1cy5nbG9iYWxDb25maWcgPyBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkgOiBmYWxzZTtcblx0ICB2YXIgcHJvcHMgPSBjb25maWcucHJvcHM7XG5cdCAgdmFyIHBhcmFtcyA9IHt9O1xuXHQgIHZhciBkYXRhc2V0ID0ge307XG5cdFxuXHQgIGlmIChkYXRhKSB7XG5cdCAgICBmb3IgKHZhciBkYXRha2V5IGluIGRhdGEpIHtcblx0ICAgICAgaWYgKCEhZGF0YWtleS50b0xvd2VyQ2FzZSgpLm1hdGNoKC9eZGF0YS0vKSkge1xuXHQgICAgICAgIGRhdGFzZXRbZGF0YWtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKV0gPSBkYXRhW2RhdGFrZXldO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIFRPRE86IOWvueS6jua3mOWuneWwj+eoi+W6jyxkYXRha2V55bey57uP5ZyoZGF0YeWGheS6hu+8jOW5tuS4lOS4jeWQq2RhdGEt5YmN57yALOmcgOWNleeLrOWKoOWFpUDpkrDmmK1cblx0ICAgICAgICBkYXRhc2V0W2RhdGFrZXldID0gZGF0YVtkYXRha2V5XTtcblx0ICAgICAgfVxuXHQgICAgfSAgXG5cdCAgfVxuXHQgIGlmIChwcm9wcyAmJiBpc0FycmF5KHByb3BzKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gcHJvcHNbaV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyk7XG5cdCAgICAgIHBhcmFtc1trZXldID0gZGF0YXNldFtrZXldO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBkYXRhc2V0KTtcblx0ICB9XG5cdCAgXG5cdCAgaWYgKGVsZW1lbnQgJiYgZ21rZXkgPT09IEVYUCkge1xuXHQgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB7XG5cdCAgICAgICdfdyc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQud2lkdGgsIDIpLFxuXHQgICAgICAnX2gnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LmhlaWdodCwgMiksXG5cdCAgICAgICdfeCc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueCwgMiksXG5cdCAgICAgICdfeSc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueSwgMiksXG5cdCAgICAgIC8vICdfaGFzaCc6IGVsZW1lbnQuaGFzaF92YWx1ZSB8fCAnJyxcblx0ICAgICAgJ19yYXRlJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC52aWV3YWJpbGl0eVJhdGUgfHwgZWxlbWVudC5pbnRlcnNlY3Rpb25SYXRpbywgMiksXG5cdCAgICAgICdfdmlld2FiaWxpdHknOiAnaW50ZXJzZWN0aW9uJ1xuXHQgICAgfSk7XG5cdCAgfSAgXG5cdCAgaWYgKGNvbmZpZy5fdnQpIHtcblx0ICAgIHBhcmFtcy5fdnQgPSBjb25maWcuX3Z0O1xuXHQgIH1cblx0XG5cdCAgLy8gaWYgKGRvY3VtZW50ICYmIGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykpIHtcblx0ICAvLyAgIHZhciBzcG1EYXRhID0gXG5cdCAgLy8gfVxuXHRcblx0ICB2YXIgdXNlckZuTmFtZSA9IGdta2V5ID09PSBFWFAgPyAnYXBsdXMtYXV0by1leHAtdXNlcmZuJyA6ICdhcGx1cy1hdXRvLWNsay11c2VyZm4nO1xuXHQgIHZhciB1c2VySW5mbyA9IGdldFVzZXJJbmZvKHVzZXJGbk5hbWUsIGVsZW1lbnQsIGNvbmZpZy5jc3NTZWxlY3Rvciwgc3BtRGF0YSk7XG5cdFxuXHQgIGlmICghdXNlckluZm8uc3BtKSB7XG5cdCAgICBpZiAoaXNBbGkgJiYgc3BtRGF0YSAmJiBzcG1EYXRhLmEgJiYgc3BtRGF0YS5iKSB7XG5cdCAgICAgIHVzZXJJbmZvLnNwbSA9IFtzcG1EYXRhLmEsIHNwbURhdGEuYiwgc3BtRGF0YS5jIHx8ICcwJywgc3BtRGF0YS5kIHx8ICcwJ10uam9pbignLicpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdXNlckluZm8uc3BtID0gc3BtRGF0YSAmJiBzcG1EYXRhLmIgPyBzcG1EYXRhIDogdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGdva2V5ID0ge307XG5cdCAgdmFyIHRyYWNrZXJQYXJhbXMgPSBkYXRhLnRyYWNrZXJQYXJhbXMgfHwgZGF0YVsndHJhY2tlci1wYXJhbXMnXTtcblx0ICBpZiAodHJhY2tlclBhcmFtcykge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIF90cmFja2VyUGFyYW1zID0gSlNPTi5wYXJzZSh0cmFja2VyUGFyYW1zKTtcblx0ICAgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihwYXJhbXMsIF90cmFja2VyUGFyYW1zKTtcblx0ICAgICAgZGVsZXRlIHBhcmFtcy50cmFja2VyUGFyYW1zO1xuXHQgICAgICBkZWxldGUgcGFyYW1zLnRyYWNrZXJwYXJhbXM7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgIH1cblx0ICBcblx0ICBpZiAoZ21rZXkgPT09ICdFWFAnICYmIGlzQWxpICYmIHJlY29yZEV4cE1hcFF1ZXVlW2NvbmZpZy5sb2drZXldKSB7XG5cdCAgICB2YXIgZXhkYXRhID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zLCB1c2VySW5mbyk7XG5cdCAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIHtcblx0ICAgICAgZXhhcmdzOiBleGRhdGFcblx0ICAgIH0pO1xuXHQgICAgdXRpbExvZ2dlci5sb2coJ2F1dG8gZXhwOicsY29uZmlnLmxvZ2tleSxleGRhdGEpO1xuXHQgICAgcmVjb3JkRXhwTWFwUXVldWVbY29uZmlnLmxvZ2tleV0ucHVzaChjbG9uZURlZXAoZ29rZXkpKTtcblx0ICB9IGVsc2UgeyAgICBcblx0ICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7aXNfYXV0bzogMX0sIHBhcmFtcywgdXNlckluZm8sIGNvbmZpZy5jdXN0b21BcmdzKTtcblx0ICAgIHV0aWxMb2dnZXIubG9nKCdhdXRvIGNsazonLGNvbmZpZy5sb2drZXksZ29rZXkpO1xuXHQgICAgaWYgKHBhZ2VDdHgpIHtcblx0ICAgICAgdmFyIGN1ciA9IHBhZ2VDdHgucm91dGU7XG5cdCAgICAgIGFwbHVzLnJlY29yZChjb25maWcubG9na2V5LCBnbWtleSwgT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIHtjdXJyZW50UGF0aDogY3VyIH0pLCBQT1NUKTsgIFxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYXBsdXMucmVjb3JkKGNvbmZpZy5sb2drZXksIGdta2V5LCBnb2tleSwgUE9TVCk7XG5cdCAgICB9XG5cdFxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gY29uZmlnIDogW3tcblx0ICogICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiAnLnNjcm9sbC12aWV3Jyxcblx0ICogICAgJ2Nzc1NlbGVjdG9yJzonLmJhbGwnLFxuXHQgKiAgICAnbG9na2V5JzonL3Rlc3QuYmFsbC4xJyxcblx0ICogICAgJ3Byb3BzJzogWydkYXRhLXRyYWNrZXInXSxcblx0ICogIH0sIHtcblx0ICogICAgJ2Nzc1NlbGVjdG9yJzonLm15YnV0dG9uJyxcblx0ICogICAgJ2xvZ2tleSc6Jy90ZXN0Lm15YnV0dG9uLjEnLFxuXHQgKiAgICAncHJvcHMnOiBbJ2RhdGEtdHJhY2tlciddLFxuXHQgKiAgfV1cblx0ICovXG5cdGV4cG9ydHMud2F0Y2hSZWNvcmQgPSBmdW5jdGlvbiAoY29uZmlnKSB7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnID8gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpIDogZmFsc2U7XG5cdCAgXG5cdCAgaWYgKGlzQWxpICYmIGNvbmZpZykge1xuXHQgICAgY29uZmlnLmZvckVhY2goZnVuY3Rpb24gKGNmZykge1xuXHQgICAgICBpZiAoIXJlY29yZEV4cE1hcFF1ZXVlLmhhc093blByb3BlcnR5KGNmZy5sb2drZXkpKSB7XG5cdCAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbY2ZnLmxvZ2tleV0gPSBFdmVudEFycmF5LmNyZWF0ZSh7XG5cdCAgICAgICAgICBsZW5ndGg6IDAsXG5cdCAgICAgICAgICBidWZmZXI6IFtdLFxuXHQgICAgICAgICAgbG9na2V5OiBjZmcubG9na2V5LFxuXHQgICAgICAgICAgcGtnU2l6ZTogdHlwZW9mIGNmZy5wa2dTaXplID09PSAnbnVtYmVyJyAmJiBjZmcucGtnU2l6ZSB8fCBERUZBVUxUX1BLR19TSVpFLFxuXHQgICAgICAgICAgbWV0aG9kOiBjZmcubWV0aG9kIHx8IFBPU1Rcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBcblx0ICAgIH0pOyAgICBcblx0ICB9XG5cdH07XG5cdFxuXHRleHBvcnRzLmNsZWFyUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZyA/IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA6IGZhbHNlO1xuXHRcblx0ICBpZiAoaXNBbGkpIHtcblx0ICAgIGZvciAodmFyIGxvZ2tleSBpbiByZWNvcmRFeHBNYXBRdWV1ZSkge1xuXHQgICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgfHwgW107XG5cdCAgICAgIGlmIChnb2tleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgIGFwbHVzLmNvbWJpbmVSZWNvcmQobG9na2V5LCBFWFAsIGdva2V5cywgUE9TVCk7XG5cdCAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cblxuLyoqKi8gfSksXG4vKiA3OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiDmoLnmja7lhYPntKDlsZ7mgKflkozln4vngrnphY3nva7nsr7noa7ojrflj5bkuIDkuKrlhYPntKDnmoRoYXNoS2V5XG5cdCAqIEBwYXJhbXMge09iamVjdH0gZWxlbWVudEF0dHIge1xuXHQgKiAgIGlkXG5cdCAqIH1cblx0ICogQHBhcmFtcyB7T2JqZWN0fSBjb25maWcge1xuXHQgKiAgIGxvZ2tleSwgY3NzU2VsZWN0b3IsIHBvc2l0aW9uU2VsZWN0b3Jcblx0ICogfVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IGhhc2hLZXlcblx0ICovXG5cdFxuXHQvLyBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChlbGVtZW50QXR0ciwgY29uZmlnKSB7XG5cdC8vICAgdmFyIGhhc2hLZXkgPSBbXG5cdC8vICAgICBjb25maWcubG9na2V5LFxuXHQvLyAgICAgY29uZmlnLmNzc1NlbGVjdG9yLFxuXHQvLyAgICAgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IsXG5cdC8vICAgICBlbGVtZW50QXR0ci5pbmRleFxuXHQvLyAgIF0uam9pbignXycpO1xuXHQvLyAgIHJldHVybiBoYXNoS2V5O1xuXHQvLyB9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuXHQgIHZhciBoYXNoS2V5ID0gW1xuXHQgICAgY29uZmlnLmxvZ2tleSxcblx0ICAgIGNvbmZpZy5jc3NTZWxlY3Rvcixcblx0ICAgIC8vIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yIHx8ICcnLFxuXHQgICAgLy8gZWxlbWVudEF0dHIuaW5kZXggLy/mt5jlrp3lsI/nqIvluo/liKTmlq1oYXNoS2V5XG5cdCAgXTtcblx0XG5cdCAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICBoYXNoS2V5LnB1c2goY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpO1xuXHQgIH1cblx0ICBcblx0ICBpZiAoZWxlbWVudEF0dHIuaWQpIHtcblx0ICAgIGhhc2hLZXkucHVzaChlbGVtZW50QXR0ci5pZCk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZWxlbWVudEF0dHIuaW5kZXggPj0gMCkge1xuXHQgICAgaGFzaEtleS5wdXNoKGVsZW1lbnRBdHRyLmluZGV4KTtcblx0ICB9XG5cdCAgLy8gUmF45qGG5p626L+Q6KGM5pe26I635b6X55qEZGF0YXNldOWJjeWQjuS4jeS4gOiHtO+8jOWIoOmZpOaXoOaViOWxnuaApyBA6ZKw5pitIDIwMjEtMDktMTggMDk6MTc6NTJcblx0ICBpZiAoZWxlbWVudEF0dHIuZGF0YXNldCAmJiBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ10pIHtcblx0ICAgIGRlbGV0ZSBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ107XG5cdCAgfVxuXHQgIGlmIChlbGVtZW50QXR0ci5kYXRhc2V0KSB7XG5cdCAgICBoYXNoS2V5LnB1c2goSlNPTi5zdHJpbmdpZnkoZWxlbWVudEF0dHIuZGF0YXNldCkpO1xuXHQgIH1cblx0ICBoYXNoS2V5ID0gaGFzaEtleS5qb2luKCdfJyk7XG5cdCAgcmV0dXJuIGhhc2hLZXk7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogNzkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiByYXhVdGlsLmpzXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdFxuXHRleHBvcnRzLmdldERhdGFTZXQgPSBmdW5jdGlvbiAoY29uZmlnLGluZGV4KSB7XG5cdCAgdmFyIGQgPSB7fTtcblx0ICB2YXIgY2x4O1xuXHQgIGlmICh1dGlsRGFzaC5pc1N0YXJ0V2l0aChjb25maWcuY3NzU2VsZWN0b3IsICcuJykpIHtcblx0ICAgIGNseCA9IGNvbmZpZy5jc3NTZWxlY3Rvci5zbGljZSgxLCBjb25maWcuY3NzU2VsZWN0b3IubGVuZ3RoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY2x4ID0gY29uZmlnLmNzc1NlbGVjdG9yO1xuXHQgIH1cblx0ICB2YXIgZG9tcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2x4KTtcblx0ICBpZiAoZG9tcyAmJiBkb21zLmxlbmd0aCA+IDApe1xuXHQgICAgdmFyIGRvbURhdGFTZXQgPSBkb21zW2luZGV4XS5kYXRhc2V0IHx8IHt9O1xuXHQgICAgZm9yICh2YXIga2V5IGluIGRvbURhdGFTZXQpIHtcblx0ICAgICAgdmFyIHQgPSBkb21EYXRhU2V0W2tleV07XG5cdCAgICAgIHN3aXRjaCh0eXBlb2YgdCl7XG5cdCAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcblx0ICAgICAgICBkW2tleV0gPSB0KCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ29iamVjdCc6XG5cdCAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oZCwgdCk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3N0cmluZyc6XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJ3RyYWNrZXJQYXJhbXMnKSB7XG5cdCAgICAgICAgICB2YXIgdHAgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZG9tRGF0YVNldC50cmFja2VyUGFyYW1zKTtcblx0ICAgICAgICAgIGQgPSBPYmplY3QuYXNzaWduKGQsIHRwKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZFtrZXldID0gdDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ251bWJlcic6XG5cdCAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuXHQgICAgICAgIGRba2V5XSA9IHQ7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGQ7XG5cdH07XG5cdFxuXHRleHBvcnRzLmlzUmF4ID0gZnVuY3Rpb24oKXtcblx0ICByZXR1cm4gZG9jdW1lbnQgPyB0cnVlIDogZmFsc2U7XG5cdH07XG5cbi8qKiovIH0pLFxuLyogODAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0XG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICByZXR1cm4ge1xuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF9fd2VicGFja19yZXF1aXJlX18oODEpKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDgxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGNvbGxlY3RfZXhwID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Mik7XG5cdHZhciBjb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQvLyB2YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xuXHRcblx0Ly8g55So5LqO55uR5ZCsXG5cdHZhciBQQUdFX0RBVEFfTUFQID0ge307XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgIHZhciBpc1N0YXJ0ID0gMDtcblx0ICB2YXIgaXNGaXJzdFRvdWNoID0gMDtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICBpZiAoYXBsdXMuX2FwbHVzX2F1dG9fZXhwKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfSBlbHNlIHtcblx0ICAgIGFwbHVzLl9hcGx1c19hdXRvX2V4cCA9IHtcblx0ICAgICAgaGFzaE1hcDoge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICB2YXIgX2NvbmZpZyA9IFtdO1xuXHRcblx0ICBmdW5jdGlvbiB3YXRjaE1ldGFJbmZvKGNvbnRleHQsIGlzRmlyc3QsIHdhdGNoVHlwZSkge1xuXHQgICAgdmFyIGhhbmRsZXJNZXRhSW5mbyA9IGZ1bmN0aW9uIChtZXRhS2V5LCBtZXRhVmFsdWUpIHsgICBcblx0ICAgICAgaWYgKG1ldGFLZXkgPT09ICdhcGx1cy1hdXRvLWV4cCcpIHtcblx0ICAgICAgICB2YXIgX2NvbmZpZzIgPSBjb25maWcuZ2V0QXV0b0V4cENvbmZpZyhtZXRhVmFsdWUpO1xuXHQgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeShfY29uZmlnMikgPT09IEpTT04uc3RyaW5naWZ5KF9jb25maWcpKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIF9jb25maWcgPSBfY29uZmlnMjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKG1ldGFWYWx1ZSAmJiBfY29uZmlnICYmIF9jb25maWcubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgY29sbGVjdF9leHAud2F0Y2hfZXhwb3N1cmUoY29udGV4dCwgX2NvbmZpZywgaXNGaXJzdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICBhY3Rpb246IHdhdGNoVHlwZSwgLy8gYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgICBhcmd1bWVudHM6IFsnc2V0TWV0YUluZm8nLCBoYW5kbGVyTWV0YUluZm9dXG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluaXRFeHAgKGNvbnRleHQsIGlzRmlyc3QpIHtcblx0ICAgIF9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKTtcblx0ICAgIC8vIFRhcm/moYbmnrbln7rkuo7ov5DooYzml7bvvIzoh6rliqjmm53lhYnkvJrlh7rnjrDojrflj5bkuI3liLDmm53lhYnlhYPntKDnmoTmg4XlhrVcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICAgIGNvbGxlY3RfZXhwLndhdGNoX2V4cG9zdXJlKGNvbnRleHQsIF9jb25maWcsIGlzRmlyc3QpO1xuXHQgICAgfSwgMCk7XG5cdCAgfVxuXHRcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgd2F0Y2hNZXRhSW5mbyhvcHQuY29udGV4dCwgMSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFKTtcblx0ICAgICAgICBpZiAoaXNTdGFydCA9PT0gMCkge1xuXHQgICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMSk7XG5cdCAgICAgICAgICBpc1N0YXJ0ID0gMTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuXHQgICAgICAgICAgdmFyIF9wYXRoID0gX2N1cnJlbnRQYWdlLnJvdXRlIHx8IF9jdXJyZW50UGFnZS5pcztcblx0ICAgICAgICAgIFBBR0VfREFUQV9NQVBbX3BhdGhdID0gX3BhdGg7IC8vIEpTT04uc3RyaW5naWZ5KF9jdXJyZW50UGFnZS5kYXRhKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XVxuXHQgIH0pO1xuXHRcblx0ICBmdW5jdGlvbiByZXNldEF1dG9FeHAgKG9wdCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgdmFyIF9wYXRoID0gX2N1cnJlbnRQYWdlLnJvdXRlIHx8IF9jdXJyZW50UGFnZS5pcztcblx0ICAgICAgdmFyIF9kYXRhID0gUEFHRV9EQVRBX01BUFtfcGF0aF07XG5cdCAgICAgIFxuXHQgICAgICB2YXIgX2N1cnJlbnREYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0LmRhdGEpO1xuXHQgICAgICBpZiAoX2RhdGEgIT09IF9jdXJyZW50RGF0YSkge1xuXHQgICAgICAgIFBBR0VfREFUQV9NQVBbX3BhdGhdID0gX2N1cnJlbnREYXRhO1xuXHQgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDApO1xuXHQgICAgICB9ICBcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgfVxuXHRcblx0ICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgIGFyZ3VtZW50czogWydvbkFwbHVzVG91Y2gnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgaWYgKGlzRmlyc3RUb3VjaCA9PT0gMCkge1xuXHQgICAgICAgICAgaXNGaXJzdFRvdWNoID0gMTtcblx0ICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDEpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25QYWdlRGF0YUNoYW5nZWQnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgICByZXNldEF1dG9FeHAob3B0KTtcblx0ICAgICAgfSwgMjAwKTtcblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHQgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgICBQQUdFX0RBVEFfTUFQID0ge307XG5cdCAgICAgICAgaXNTdGFydCA9IDA7XG5cdCAgICAgICAgaXNGaXJzdFRvdWNoID0gMDtcblx0ICAgICAgICB3YXRjaE1ldGFJbmZvKG9wdC5jb250ZXh0LCAxLCBhcGx1c1N0YXRpYy5VTlNVQlNDUklCRSk7XG5cdCAgICAgICAgY29sbGVjdF9leHAuY2xlYXIoKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICBhcmd1bWVudHM6IFsnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgICAgUEFHRV9EQVRBX01BUCA9IHt9O1xuXHQgICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdFxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIF9jb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKTtcblx0dmFyIGNsb25lRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB1dGlsQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdHZhciB3YXRjaFRyYWNrZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0dmFyIGdldEhhc2hLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0dmFyIHJheFV0aWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0dmFyIG1pbmlVdGlsID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblx0dmFyIG9ic2VydmVycyA9IFtdO1xuXHR2YXIgY3R4O1xuXHRcblx0Ly8gcmVsb2FkQ3R4IOeUqOS6juWNleWFg+a1i+ivle+8jOWNlea1i+S4remcgOimgeWIh+aNouaUr+S7mOWuneOAgeW+ruS/oeeOr+Wig++8jOWunumZheeUn+S6p+eOr+Wig+eUqOS4jeWIsFxuXHRleHBvcnRzLndhdGNoX2V4cG9zdXJlID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbmYsIGlzRmlyc3QsIHJlbG9hZEN0eCkge1xuXHQgIGlmICghY3R4IHx8IHJlbG9hZEN0eCkge1xuXHQgICAgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgfVxuXHQgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTtcblx0ICB2YXIgZHVwO1xuXHQgIFxuXHQgIHdhdGNoVHJhY2tlci53YXRjaFJlY29yZChjb25mKTtcblx0ICBcblx0ICBmdW5jdGlvbiB3YWl0IChjb3VudCkge1xuXHQgICAgaWYgKGNvdW50IDwgY29uZi5sZW5ndGgpIHtcblx0ICAgICAgdmFyIGNvbmZpZyA9IGNvbmZbY291bnRdO1xuXHQgICAgICBkdXAgPSAwO1xuXHQgICAgICBvYnNlcnZlcnMuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xuXHQgICAgICAgIGlmIChlbGVtZW50LnN1YmplY3RbMF0gPT09IGNvbmZpZy5jc3NTZWxlY3RvciAmJlxuXHQgICAgICAgICAgZWxlbWVudC5zdWJqZWN0WzFdID09PSBjb25maWcucG9zaXRpb25TZWxlY3Rvcikge1xuXHQgICAgICAgICAgZHVwID0gMTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICB2YXIgc3ViamVjdCA9IFtjb25maWcuY3NzU2VsZWN0b3IsIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yXTtcblx0ICAgICAgZnVuY3Rpb24gaGFzaGluZyAoY2FsbGJhY2spIHtcblx0ICAgICAgICB2YXIgY3NzU2VsZWN0b3IgPSBzdWJqZWN0WzBdO1xuXHQgICAgICAgIGlmIChjc3NTZWxlY3RvciAmJiAhdXRpbERhc2guaXNTdGFydFdpdGgoc3ViamVjdFswXSwgJy4nKSkge1xuXHQgICAgICAgICAgY3NzU2VsZWN0b3IgPSAnLicgKyBjc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNzc1NlbGVjdG9yKTsgICAgICAgICAgXG5cdCAgICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBlbGVtZW50cy5maWVsZHMoe1xuXHQgICAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG5cdCAgICAgICAgICAgICAgaWQ6IHRydWUsXG5cdCAgICAgICAgICAgIH0sIGZ1bmN0aW9uKHJldCkge1xuXHQgICAgICAgICAgICAgIC8vIOmFjee9ruWMluWfi+eCueWFvOWuueeCueS9jeaXoOaViOaXtuS4jemYu+WhnuabneWFieino+aekFxuXHQgICAgICAgICAgICAgIGlmICh1dGlsQXJyYXkuaXNBcnJheShyZXQpKSB7XG5cdCAgICAgICAgICAgICAgICBjYWxsYmFjayh7XG5cdCAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiByZXQsXG5cdCAgICAgICAgICAgICAgICAgIHR5cGU6ICdDT01NT04nXG5cdCAgICAgICAgICAgICAgICB9KTsgIFxuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSkuZXhlYygpOyAgXG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2N1cnJlbnQgcGxhdGZvcm0gZG9lcyBub3Qgc3VwcG9ydCBhdXRvIGV4cG9zdXJlIHRyYWNraW5nIScpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gfVxuXHRcblx0ICAgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICAgIGNvbnNvbGUud2FybignY3VycmVudCBwbGF0Zm9ybSBkb2VzIG5vdCBzdXBwb3J0IGF1dG8gZXhwb3N1cmUgdHJhY2tpbmchIGVyciA9ICcsIGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGhhc2hpbmcoZnVuY3Rpb24gKG9wdHMpIHtcblx0ICAgICAgICAvLyB2YXIgdHlwZSA9IG9wdHMudHlwZTtcblx0ICAgICAgICBpZiAoZHVwID09PSAwIHx8IGlzRmlyc3QgPT09IDApIHtcblx0ICAgICAgICAgIHZhciBuZXdPYnNlcnZlciA9IGluaXRPYnNlcnZlcihjb250ZXh0KTtcblx0ICAgICAgICAgIG5ld09ic2VydmVyLnN1YmplY3QgPSBzdWJqZWN0O1xuXHQgICAgICAgICAgaWYob2JzZXJ2ZXJzLmxlbmd0aD5jb25mLmxlbmd0aC0xKXtcblx0ICAgICAgICAgICAgdmFyIHJlbW92ZWRPYnNlcnZlciA9IG9ic2VydmVycy5zaGlmdCgpO1xuXHQgICAgICAgICAgICByZW1vdmVkT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgb2JzZXJ2ZXJzLnB1c2gobmV3T2JzZXJ2ZXIpO1xuXHQgICAgICAgICAgLy8g5pu05pawaGFzaG1hcFxuXHQgICAgICAgICAgZWFjaChvcHRzLmVsZW1lbnRzLGZ1bmN0aW9uKGl0ZW0saW5kZXgpe1xuXHQgICAgICAgICAgICBpdGVtLmluZGV4ID0gKGluZGV4KzEpICsgJyc7XG5cdCAgICAgICAgICAgIGlmICghY2hlY2tJc0luSGFzaE1hcChpdGVtLCBjb25maWcpKSB7XG5cdCAgICAgICAgICAgICAgdXBkYXRlSGFzaE1hcChpdGVtLCBjb25maWcpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGFkZE9ic2VydmUobmV3T2JzZXJ2ZXIsIGNvbmZpZywgZnVuY3Rpb24gKGVudHJ5LCBfY29uZmlnKSB7XG5cdCAgICAgICAgICAgIG1pbmlVdGlsLmdldEluZGV4QnlSZWN0KF9jb25maWcuY3NzU2VsZWN0b3IsZW50cnkuYm91bmRpbmdDbGllbnRSZWN0LGZ1bmN0aW9uKGluZGV4KXtcblx0ICAgICAgICAgICAgICB2YXIgX2luZGV4ID0gaW5kZXggKyAxO1xuXHQgICAgICAgICAgICAgIGlmIChfaW5kZXgpIHtcblx0ICAgICAgICAgICAgICAgIHZhciBfZW50cnkgPSBjbG9uZURlZXAoZW50cnkpO1xuXHQgICAgICAgICAgICAgICAgX2VudHJ5LmluZGV4ID0gJycgKyBfaW5kZXg7XG5cdCAgICAgICAgICAgICAgICB2YXIgZGF0YXNldCA9IGNsb25lRGVlcChfZW50cnkuZGF0YXNldCk7XG5cdCAgICAgICAgICAgICAgICB1cGRhdGVIYXNoTWFwKHtcblx0ICAgICAgICAgICAgICAgICAgaWQ6IF9lbnRyeS5pZCxcblx0ICAgICAgICAgICAgICAgICAgaW5kZXg6IF9lbnRyeS5pbmRleCxcblx0ICAgICAgICAgICAgICAgICAgZGF0YXNldDogZGF0YXNldCxcblx0ICAgICAgICAgICAgICAgIH0sIF9jb25maWcpO1xuXHQgICAgICAgICAgICAgICAgZXhwb3N1cmVIYW5kbGUoX2VudHJ5LCBkYXRhc2V0LCBjb25maWcpOyAgXG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB3YWl0KCsrY291bnQpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgd2FpdCgwKTtcblx0XG5cdCAgZnVuY3Rpb24gY2hlY2tJc0luSGFzaE1hcCAoZWxlbWVudCwgY29uZmlnKSB7XG5cdCAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZWxlbWVudCwgY29uZmlnKTtcblx0ICAgIHZhciBpbmRleCA9IGVsZW1lbnQuaW5kZXg7XG5cdCAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG5cdCAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCAmJiBlbGVtZW50LmluZGV4ID09PSBpbmRleCkge1xuXHQgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLyoqXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBlIHtcblx0ICAgKiAgIGlkLCBkYXRhc2V0LCBwb3NpdGlvblxuXHQgICAqIH1cblx0ICAgKi9cblx0ICBmdW5jdGlvbiB1cGRhdGVIYXNoTWFwKGUsIGNvbmZpZykge1xuXHQgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGUsIGNvbmZpZyk7XG5cdCAgICB0cnkge1xuXHQgICAgICB2YXIgaW5kZXggPSBlLmluZGV4O1xuXHQgICAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcblx0ICAgICAgICB2YXIgZXhpc3QgPSAwO1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuXHQgICAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCkge1xuXHQgICAgICAgICAgICBleGlzdCA9IDE7XG5cdCAgICAgICAgICAgIGlmIChlLmlkKSBlbGVtZW50LmlkID0gZS5pZDtcblx0ICAgICAgICAgICAgaWYgKGUuZGF0YXNldCkgZWxlbWVudC5kYXRhc2V0ID0gZS5kYXRhc2V0O1xuXHQgICAgICAgICAgICBpZiAoZS5zdGF0dXMpIGVsZW1lbnQuc3RhdHVzID0gZS5zdGF0dXM7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgaWYgKCFleGlzdCkge1xuXHQgICAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0ucHVzaCh7XG5cdCAgICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuXHQgICAgICAgICAgICBzdGF0dXM6IDAsXG5cdCAgICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG5cdCAgICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldID0gW3tcblx0ICAgICAgICAgIGlkOiBlLmlkLFxuXHQgICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcblx0ICAgICAgICAgIHN0YXR1czogMCxcblx0ICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuXHQgICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuXHQgICAgICAgICAgaW5kZXg6IGluZGV4XG5cdCAgICAgICAgfV07XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ2Vycm9yID09PSAnLCBlKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGluaXRPYnNlcnZlcihjb250ZXh0KSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgdGhyZXNob2xkczogW19jb25maWcuQVVUT19BVF9WSUVXX1JBVEVdLFxuXHQgICAgICBpbml0aWFsUmF0aW86IDBcblx0ICAgIH07XG5cdCAgICB2YXIgaXNNWSA9IGZhbHNlO1xuXHQgICAgdHJ5IHtcblx0ICAgICAgaWYgKG15KSB7XG5cdCAgICAgICAgaXNNWSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICBpZiAoaXNNWSkge1xuXHQgICAgICAvLyDomoLomoHnmoTmm53lhYnnm5HlkKzlkozlvq7kv6HkuI3kuIDoh7TvvIxodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL3d4bWwvd3guY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIuaHRtbFxuXHQgICAgICAvLyBodHRwczovL29wZW5kb2NzLmFsaXBheS5jb20vbWluaS9hcGkvaW50ZXJzZWN0aW9ub2JzZXJ2ZXJcblx0ICAgICAgb3B0aW9ucy5zZWxlY3RBbGwgPSB0cnVlO1xuXHQgICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3B0aW9ucy5vYnNlcnZlQWxsID0gdHJ1ZTtcblx0ICAgICAgcmV0dXJuIGN0eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlcihjb250ZXh0LCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZE9ic2VydmUob2JzZXJ2ZXIsIGNvbmZpZywgY2FsbGJhY2spIHtcblx0ICAgIHZhciBjc3MgPSBjb25maWcuY3NzU2VsZWN0b3I7XG5cdCAgICBpZiAoY3NzICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChjc3MsICcuJykpIHtcblx0ICAgICAgY3NzID0gJy4nICsgY3NzO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yKSB7XG5cdCAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG8oY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3JNZXNzYWdlOiAnLCBlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb2JzZXJ2ZXIucmVsYXRpdmVUb1ZpZXdwb3J0KCkub2JzZXJ2ZShjc3MsIGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgY2FsbGJhY2socmVzLCBjb25maWcpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvck1lc3NhZ2U6ICcsIGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBleHBvc3VyZUhhbmRsZSAoZW50cnksIGRhdGFzZXQsIGNvbmZpZykge1xuXHQgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgICB2YXIgZXhwb3N1cmVUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdCAgICB2YXIgZXhwRWxlbWVudHMgPSBjaGVja1N0YXJ0KGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZyk7XG5cdFxuXHQgICAgaWYgKGV4cEVsZW1lbnRzICYmIGV4cEVsZW1lbnRzLmxlbmd0aCA+IDApIHtcblx0ICAgICAgdmFyIGVsZW1lbnQgPSBleHBFbGVtZW50c1swXTtcblx0XG5cdCAgICAgIHZhciBzcG1EYXRhID0ge307XG5cdCAgICAgIHZhciBfc3BtRGF0YSA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwge30pIHx8IHt9O1xuXHQgICAgICB2YXIgX2luZGV4ID0gZWxlbWVudC5pbmRleDtcblx0ICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcblx0ICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcblx0ICAgICAgICBpZiAocmF4VXRpbC5pc1JheCgpKSB7XG5cdCAgICAgICAgICB2YXIgZG9tRGF0YVNldCA9IHJheFV0aWwuZ2V0RGF0YVNldChjb25maWcsX2luZGV4LTEpO1xuXHQgICAgICAgICAgdmFyIGMgPSBkb21EYXRhU2V0LnNwbUMgfHwgY29uZmlnLnNwbUMgfHwgJzAnO1xuXHQgICAgICAgICAgdmFyIGQgPSBkb21EYXRhU2V0LnNwbUQgfHwgY29uZmlnLnNwbUQgfHwgJzAnO1xuXHQgICAgICAgICAgc3BtRGF0YS5jID0gYztcblx0ICAgICAgICAgIHNwbURhdGEuZCA9IGQ7XG5cdCAgICAgICAgICAvLyDooaXlhYUgcmF4IGRhdGEtKiDlsZ7mgKdcblx0ICAgICAgICAgIGRhdGFzZXQgPSBPYmplY3QuYXNzaWduKGRhdGFzZXQsIGRvbURhdGFTZXQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyDlj5ZkYXRhLXRyYWNrZXIg5oiWIGNzc1NlbGVjdG9yXG5cdCAgICAgICAgICB2YXIgc3BtQyA9IGRhdGFzZXQudHJhY2tlciB8fCBjb25maWcuY3NzU2VsZWN0b3IucmVwbGFjZSgvXFwnfFxcXCJ8XFw7fFxcOnxcXD18XFxbfFxcXXxcXC58XFwjfFxcLXxcXC98XFx8L2csICcnKTsgLy8g5Y675o6J54m55q6K5a2X56ymXG5cdCAgICAgICAgICAvLyDmm53lhYnop6blj5HnmoRzcG3kuI3msaHmn5PlhajlsYBhcGx1cy5fJC5zcG0uZGF0Ye+8jOaVhei/memHjOWBmua3seaLt+i0nVxuXHQgICAgICAgICAgc3BtRGF0YS5jID0gc3BtQztcblx0ICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcblx0ICAgICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBfaW5kZXg7XG5cdCAgICAgICAgICAgIHNwbURhdGEuZCA9IHNwbUQ7XG5cdCAgICAgICAgICB9ICBcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkpIHtcblx0ICAgICAgICAgIHNwbURhdGEuYiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIFxuXHQgICAgICAgIGlmIChjb25maWcuc3BtQykge1xuXHQgICAgICAgICAgc3BtRGF0YS5jID0gY29uZmlnLnNwbUM7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHNwbURhdGEuYyA9IF9zcG1EYXRhLnNwbUMgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtQykgOiAnJztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjb25maWcuc3BtRCkge1xuXHQgICAgICAgICAgc3BtRGF0YS5kID0gX2luZGV4ID8gY29uZmlnLnNwbUQgKyAnXycgKyBfaW5kZXggOiBjb25maWcuc3BtRDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB3YXRjaFRyYWNrZXIucHVzaEV2ZW50KCdFWFAnLCBkYXRhc2V0LCBjb25maWcsIE9iamVjdC5hc3NpZ24oe30sIGVudHJ5LCB7XG5cdCAgICAgICAgeDogZWxlbWVudC54LFxuXHQgICAgICAgIHk6IGVsZW1lbnQueSxcblx0ICAgICAgICB3aWR0aDogZWxlbWVudC53aWR0aCxcblx0ICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuaGVpZ2h0LFxuXHQgICAgICAgIGhhc2hfdmFsdWU6IGVsZW1lbnQuaGFzaF92YWx1ZVxuXHQgICAgICB9KSwgc3BtRGF0YSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjaGVja1N0YXJ0IChleHBvc3VyZVRpbWUsIGVudHJ5LCBjb25maWcpIHtcblx0ICAgIC8vIHZhciBzaXplID0gMDtcblx0ICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcblx0ICAgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9OyAgICBcblx0ICAgIHZhciB0ZW1wcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG5cdCAgICAgIHZhciBlbGVfcyA9IF9oYXNoTWFwW2xvZ2tleV0gfHwgW107XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAvLyB2YXIgc3RyaW5nID0gY29uZmlnLmxvZ2tleSArICdfJyArIGNvbmZpZy5jc3NTZWxlY3RvciArICdfJ1xuXHQgICAgICAgIC8vICAgICAgICAgICAgICArIGNvbmZpZy5wb3NpdGlvblNlbGVjdG9yICsgJ18nICsgb3B0cy5pZCArIEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YXNldCk7XG5cdCAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVudHJ5LCBjb25maWcpO1xuXHQgICAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG5cdCAgICAgICAgaWYgKHYuc3RhdHVzID09PSAwICYmIHYuZXhwQ29uZmlnICYmIGhhc2ggPT09IHYuaGFzaF92YWx1ZSkge1xuXHQgICAgICAgICAgdmFyIF9lbGVQb3MgPSBlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QgfHwge307XG5cdCAgICAgICAgICBpZiAoX2VsZVBvcy53aWR0aCAmJiBfZWxlUG9zLmhlaWdodCkge1xuXHQgICAgICAgICAgICB2LmRhdGFzZXQgPSBlbnRyeS5kYXRhc2V0O1xuXHQgICAgICAgICAgICB2LnggPSBfZWxlUG9zLmxlZnQ7XG5cdCAgICAgICAgICAgIHYueSA9IF9lbGVQb3MudG9wO1xuXHQgICAgICAgICAgICB2LndpZHRoID0gX2VsZVBvcy53aWR0aDtcblx0ICAgICAgICAgICAgdi5oZWlnaHQgPSBfZWxlUG9zLmhlaWdodDtcblx0ICAgICAgICAgICAgdi5zaXplID0gX2VsZVBvcy53aWR0aCAqIF9lbGVQb3MuaGVpZ2h0O1xuXHQgICAgICAgICAgICAvLyBSYXjmoYbmnrblhoXvvIzmt5jlrp3lsI/nqIvluo8g6YCa6L+HIHRocmVzaG9sZHMsIG9ic2VydmVyLm9ic2VydmUg5rKh5pyJY2FsbGJhY2vov5Tlm57vvIzlm6DmraTmlLnmiJDpu5jorqTlgLzkuLowXG5cdCAgICAgICAgICAgIHZhciBkZWZhdWx0UmF0aW8gPSBfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFO1xuXHQgICAgICAgICAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPj0gZGVmYXVsdFJhdGlvKSB7XG5cdCAgICAgICAgICAgICAgdi5leHBvc3VyZVRpbWUgPSBleHBvc3VyZVRpbWU7XG5cdCAgICAgICAgICAgICAgdi5zdGF0dXMgPSAxOyAvLyDmm53lhYnnirbmgIFcblx0ICAgICAgICAgICAgICB0ZW1wcy5wdXNoKHYpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGVtcHM7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZXhwb3J0cy5yZXNldCA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcblx0ZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICB3YXRjaFRyYWNrZXIuY2xlYXJSZWNvcmQoKTtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xuXHQgICAgb2JzZXJ2ZXJzW2ldLmRpc2Nvbm5lY3QoKTtcblx0ICB9XG5cdCAgb2JzZXJ2ZXJzID0gW107XG5cdCAgdmFyIF9hcGx1c19hdXRvX2V4cCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ19hcGx1c19hdXRvX2V4cCcpIHx8IHt9O1xuXHQgIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuXHQgIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuXHQgICAgZGVsZXRlIF9oYXNoTWFwW2xvZ2tleV07XG5cdCAgfVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCAqIGRlc2NyaXB0aW9uXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNjQpO1xuXHR2YXIgdXRpbE1ldGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg0KTtcblx0Ly8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfQUVfS0VZID0gJ2RhdGEtYXBsdXMtYWUnO1xuXHRleHBvcnRzLkRBVEFfQVBMVVNfQUNfS0VZID0gJ2RhdGEtYXBsdXMtY2xrJztcblx0ZXhwb3J0cy5EQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZID0gJ2RhdGEtc3BtLWFuY2hvci1pZCc7XG5cdGV4cG9ydHMuREFUQV9BUExVU19WVF9JVEVNX0lOREVYX0tFWSA9ICdkYXRhLWFwbHVzLXZ0LXBvcyc7XG5cdFxuXHQvLyDkuI3mlK/mjIFvYnNlcnZlcueahOaDheWGteS4i++8jOi9ruivoumXtOmalO+8iG1zKVxuXHRleHBvcnRzLkxPT1BfVElNRSA9IDEwMDA7XG5cdFxuXHRleHBvcnRzLmdldERlZmF1bHRSZXF1ZXN0Q2ZnID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBtZXRob2Q6ICdQT1NUJyxcblx0ICAgIHBrZ1NpemU6IDEwXG5cdCAgfTtcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGFWYWx1ZSAoa2V5KSB7XG5cdCAgaWYgKGFwbHVzICYmIGFwbHVzLmdldE1ldGFJbmZvKSB7XG5cdCAgICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oa2V5KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIHV0aWxNZXRhLmdldE1ldGFDbnQoa2V5KTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xuXHR2YXIgZ2V0QXV0b0V4cFZpZXdSYXRlID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuXHQgIHZhciByYXRlID0gZGVmYXVsdF92YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFyIHZpc2libGVfcmF0ZSA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdmlzaWJsZScpO1xuXHQgICAgaWYgKHZpc2libGVfcmF0ZSkge1xuXHQgICAgICByYXRlID0gcGFyc2VGbG9hdCh2aXNpYmxlX3JhdGUpO1xuXHQgICAgfVxuXHQgICAgaWYgKHJhdGUgPD0gMCkge1xuXHQgICAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuXHQgIH0gZmluYWxseSB7XG5cdCAgICByZXR1cm4gcmF0ZTtcblx0ICB9XG5cdH07XG5cdGV4cG9ydHMuQVVUT19BVF9WSUVXX1JBVEUgPSBnZXRBdXRvRXhwVmlld1JhdGUoMC4zKTtcblx0XG5cdC8vIHZhciBFWFBfREVCT1VOQ0VfRFVSQVRJT04gPSAxMDA7IC8vIGRlYm91Y2UgZHVyYXRpb24gMTAwbXNcblx0XG5cdC8qKlxuXHQgKiDmnInmlYjmm53lhYnml7bplb/lupXnur8gLSDmr6vnp5LmlbAobXMpXG5cdCAqIEBwYXJhbXMge051bWJlcn0gZGVmYXVsdF92YWx1ZSBpcyAzMDBtc1xuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IGR1cmF0aW9uXG5cdCAqL1xuXHR2YXIgZ2V0QXV0b0V4cER1cmF0aW9uID0gZnVuY3Rpb24oZGVmYXVsdF92YWx1ZSkge1xuXHQgIHZhciBkdXJhdGlvbiA9IGRlZmF1bHRfdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhciB0bXBfZHVyYXRpb24gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLWR1cmF0aW9uJyk7XG5cdCAgICB2YXIgZHVyYXRpb25fbiA9IHBhcnNlSW50KHRtcF9kdXJhdGlvbik7XG5cdCAgICBpZiAoKGR1cmF0aW9uX24gKyAnJykgIT09ICdOYU4nKSB7XG5cdCAgICAgIGR1cmF0aW9uID0gZHVyYXRpb25fbjtcblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICB9IGZpbmFsbHkge1xuXHQgICAgcmV0dXJuIGR1cmF0aW9uO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5FWFBfRFVSQVRJT04gPSBnZXRBdXRvRXhwRHVyYXRpb24oMzAwKTsgLy/pu5jorqQzMDBtc1xuXHRcblx0Ly8gZGVib3VjZSBkdXJhdGlvbiAxMDBtc1xuXHQvLyBleHBvcnRzLmdldERlYm91bmNlRHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cdC8vICAgcmV0dXJuIEVYUF9ERUJPVU5DRV9EVVJBVElPTjtcblx0Ly8gfTtcblx0XG5cdC8qKlxuXHQgKiDojrflj5boh6rliqjmm53lhYnphY3nva7pobnvvIzlubblsIZmaWx0ZXLjgIF0YWflkoxjc3NTZWxlY3RvcuWQiOW5tuS4umVsZW1lbnRTZWxlY3RvclxuXHQgKiBUT0RPIEpTT04ucGFyc2Ug5LuF5pSv5oyBSUU45Y+K5Lul5LiK5rWP6KeI5ZmoID0+IGpzIGFwaVxuXHQgKiBAcGFyYW1zIGtleSB7U3RyaW5nfSAnYXBsdXMtYXV0by1leHAnLydhcGx1cy1hdXRvLWNsaydcblx0ICogQHJldHVybiB7QXJyYXl9IFt7XG5cdCAqICAgIGxvZ2tleTogL2EuYi5jMSxcblx0ICogICAgZWxlbWVudFNlbGVjdG9yOiAnZGl2W3NjbT0xMjM0XScsXG5cdCAqICAgIHRhZzogZGl2LFxuXHQgKiAgICBmaWx0ZXI6IHNjbT0xMjM0XG5cdCAqICAgIHBvc2l0aW9uU2VsZWN0b3I6IHRydWUvLnBhcmVudENsYXNzbmFtZSAvLyDnm7jlr7nlrprkvY3kuJrliqHln4vngrlcblx0ICogfSwge1xuXHQgKiAgICBsb2drZXk6IC9hLmIuYzIsXG5cdCAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3Bbc2NtPTIzNDVdLm9uZScsXG5cdCAqICAgIHRhZzogcCxcblx0ICogICAgZmlsdGVyOiBzY209MjM0NSxcblx0ICogICAgY3NzU2VsZWN0b3I6IC5vbmVcblx0ICogfSwge1xuXHQgKiAgICBsb2drZXk6IC9hLmIuYzMsXG5cdCAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ3BbZGF0YS1zcG0tY2xpY2tdJyxcblx0ICogICAgdGFnOiBwLFxuXHQgKiAgICBmaWx0ZXI6IGRhdGEtc3BtLWNsaWNrXG5cdCAqIH1dXG5cdCAqL1xuXHR2YXIgZ2V0QXV0b0NvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZ0tleSwgbWV0YU9iaikge1xuXHQgIHZhciBjb25maWdzID0gW107XG5cdCAgLy8gdmFyIHRtcF9sb2drZXlzID0gW107XG5cdCAgdmFyIHRtcF90YWdfZmlsdGVyID0gW107XG5cdCAgdmFyIGFwbHVzQXV0b0V4cDtcblx0ICB0cnkge1xuXHQgICAgYXBsdXNBdXRvRXhwID0gbWV0YU9iaiB8fCBnZXRNZXRhVmFsdWUoY29uZmlnS2V5KTtcblx0ICAgIHZhciB0ZW1wcyA9IFtdO1xuXHQgICAgaWYgKGFwbHVzQXV0b0V4cCAmJiB0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHRlbXBzID0gSlNPTi5wYXJzZShhcGx1c0F1dG9FeHApO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cC5yZXBsYWNlKC8nL2csICdcIicpKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgYXBsdXNBdXRvRXhwID09PSAnb2JqZWN0JyAmJiBhcGx1c0F1dG9FeHAuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdCAgICAgIHRlbXBzID0gYXBsdXNBdXRvRXhwO1xuXHQgICAgfVxuXHQgICAgaWYgKHRlbXBzICYmIHRlbXBzLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHRtcCA9IHRlbXBzW2ldIHx8IHt9O1xuXHQgICAgICAgIHZhciBsb2drZXkgPSB0bXAubG9na2V5IHx8ICcnO1xuXHQgICAgICAgIHZhciB0YWcgPSB0bXAudGFnID8gdG1wLnRhZyA6ICcnO1xuXHQgICAgICAgIHZhciBmaWx0ZXIgPSB0bXAuZmlsdGVyO1xuXHQgICAgICAgIHZhciBjc3NTZWxlY3RvciA9IHRtcC5jc3NTZWxlY3Rvcjtcblx0ICAgICAgICB2YXIgd2hvbGVTZWxlY3RvciA9IGNzc1NlbGVjdG9yIHx8ICh0YWcgJiYgZmlsdGVyKTtcblx0ICAgICAgICBpZiAoIWxvZ2tleSB8fCAhd2hvbGVTZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgJyArIEpTT04uc3RyaW5naWZ5KHRtcCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyAyMDE3LTExLTIzIOaJi+a3mOaOpeWFpeWSjGxhemFkYeS4muWKoemcgOaxgu+8jOWFgeiuuGxvZ2tleemHjeWkjVxuXHQgICAgICAgIC8vIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfbG9na2V5cywgbG9na2V5KSA+IC0xKSB7XG5cdCAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCBsb2drZXkgJyArIGxvZ2tleSArICcgcmVwZWF0ZWQnKTtcblx0ICAgICAgICAvLyB9XG5cdCAgICAgICAgZmlsdGVyID0gdHlwZW9mIGZpbHRlciA9PT0gJ3N0cmluZycgPyBmaWx0ZXIuc3BsaXQoXCI9XCIpIDogW107XG5cdCAgICAgICAgdmFyIHRhZ19maWx0ZXIgPSB0YWc7XG5cdCAgICAgICAgaWYgKGZpbHRlci5sZW5ndGggPj0gMikge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSAnWycgKyBmaWx0ZXIuc2hpZnQoKSArICc9XCInICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlci5qb2luKCcnKSkgKyAnXCJdJztcblx0ICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci5sZW5ndGggPT0gMSAmJiBmaWx0ZXJbMF0pIHtcblx0ICAgICAgICAgIHRhZ19maWx0ZXIgKz0gJ1snICsgZGVjb2RlVVJJQ29tcG9uZW50KGZpbHRlclswXSkgKyAnXSc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChjc3NTZWxlY3Rvcikge1xuXHQgICAgICAgICAgdGFnX2ZpbHRlciArPSBjc3NTZWxlY3Rvcjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRtcC5lbGVtZW50U2VsZWN0b3IgPSB0YWdfZmlsdGVyO1xuXHQgICAgICAgIGlmICh1dGlsQXJyYXkuaW5kZXhvZih0bXBfdGFnX2ZpbHRlciwgdGFnX2ZpbHRlcikgPiAtMSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgdGFnX2ZpbHRlcl9jc3NTZWxlY3RvciAnICsgdGFnX2ZpbHRlciArICcgcmVwZWF0ZWQnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdG1wX2xvZ2tleXMucHVzaChsb2drZXkpO1xuXHQgICAgICAgIHRtcF90YWdfZmlsdGVyLnB1c2godGFnX2ZpbHRlcik7XG5cdCAgICAgICAgY29uZmlncy5wdXNoKHRtcCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoIChlcnIpIHtcblx0ICAgIC8vIFRPRE8g55uR5o6n6L+Z5Z2X5YaF5a65XG5cdCAgICB1bG9nKCkudyhlcnIpO1xuXHQgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgLy8gICBtc2c6IGVyclxuXHQgICAgLy8gfSk7XG5cdCAgfSBmaW5hbGx5IHtcblx0ICAgIHJldHVybiBjb25maWdzO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0V4cENvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcblx0ICByZXR1cm4gZ2V0QXV0b0NvbmZpZygnYXBsdXMtYXV0by1leHAnLCBtZXRhT2JqKSB8fCBbXTtcblx0fTtcblx0LyoqXG5cdCAqIOiOt+WPluabneWFieiHquWKqOmHh+mbhueahOmFjee9rumhuVxuXHQgKi9cblx0ZXhwb3J0cy5nZXRBdXRvRXhwVXNlckZuID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIGFlQXV0b1VzZXJGbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtdXNlcmZuJyk7XG5cdCAgaWYgKGFlQXV0b1VzZXJGbikge1xuXHQgICAgdmFyIGZuID0gd2luZG93W2FlQXV0b1VzZXJGbl0gfHwgYWVBdXRvVXNlckZuO1xuXHQgICAgaWYgKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICByZXR1cm4gZm47XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBudWxsO1xuXHR9O1xuXHRcblx0Ly8gPG1ldGEgbmFtZT1cImFwbHVzLWF1dG8tZXhwLXdhdGNoZG9tXCIgY29udGVudD1cInRocm90dGxlXCIgLz5cblx0ZXhwb3J0cy5pc1Rocm90dGxlV2F0Y2hEb20gPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHJzID0gZmFsc2U7XG5cdCAgdHJ5IHtcblx0ICAgIHJzID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC13YXRjaGRvbScpID09PSAndGhyb3R0bGUnO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICB9XG5cdCAgcmV0dXJuIHJzO1xuXHR9O1xuXHQvKipcblx0ICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG5cdCAqL1xuXHRleHBvcnRzLmdldEF1dG9DbGtDb25maWcgPSBmdW5jdGlvbihtZXRhT2JqKSB7XG5cdCAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tY2xrJywgbWV0YU9iaikgfHwgW107XG5cdH07XG5cdC8qKlxuXHQgKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcblx0ICovXG5cdGV4cG9ydHMuZ2V0QXV0b0Nsa1VzZXJGbiA9IGZ1bmN0aW9uKCkge1xuXHQgIHZhciBhY0F1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbicpO1xuXHQgIGlmKCBhY0F1dG9Vc2VyRm4gKXtcblx0ICAgIHZhciBmbiA9IHdpbmRvd1thY0F1dG9Vc2VyRm5dIHx8IGFjQXV0b1VzZXJGbjtcblx0ICAgIGlmKCB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgKXtcblx0ICAgICAgcmV0dXJuIGZuO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIHByb2plY3QgLSBmaWxlcGF0aFxuXHQgKiDmk43kvZxtZXRh55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9oZWFkX25vZGU7XG5cdHZhciBfbWV0YV9ub2Rlcztcblx0XG5cdHZhciB1dGlsQXR0cmlidXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7XG5cdC8qKlxuXHQgKiDlj5blvpfpobXpnaLkuIogaGVhZCDkuK3nmoTmiYDmnIkgbWV0YSDlhYPntKBcblx0ICogQHBhcmFtIFtmb3JjZV0ge2Jvb2xlYW59IOaYr+WQpuW8uuWItuiOt+WPluaWsOWGheWuuVxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWV0YVRhZ3MoZm9yY2UpIHtcblx0ICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXHRcblx0ICBpZiAoX21ldGFfbm9kZXMgJiYgIWZvcmNlKSB7XG5cdCAgICByZXR1cm4gX21ldGFfbm9kZXM7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gX2hlYWRfbm9kZSA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSkgOiBbXTtcblx0fTtcblx0ZXhwb3J0cy5nZXRNZXRhVGFncyA9IGdldE1ldGFUYWdzO1xuXHRcblx0LyoqXG5cdCAqIOWPluW+lyBoZWFkIC8gbWV0YSDkuK3mjIflrpogbWV0YSDnmoQgKGF0dHIgfHwgY29udGVudCkg5YC8XG5cdCAqIDxtZXRhIG5hbWU9XCJhcGx1cy10ZXJtaW5hbFwiIGNvbnRlbnQ9XCIxXCI+XG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNZXRhQ250KG5hbWUsIGF0dHIpIHtcblx0ICB2YXIgaTtcblx0ICB2YXIgbWV0YTtcblx0ICB2YXIgbWV0YV9ub2RlcyA9IGdldE1ldGFUYWdzKCk7XG5cdCAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcblx0ICB2YXIgY29udGVudDtcblx0XG5cdCAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHQgICAgbWV0YSA9IG1ldGFfbm9kZXNbaV07XG5cdCAgICBpZiAodXRpbEF0dHJpYnV0ZS50cnlUb0dldEF0dHJpYnV0ZShtZXRhLCAnbmFtZScpID09PSBuYW1lKSB7XG5cdCAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIGF0dHIgfHwgJ2NvbnRlbnQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHJldHVybiBjb250ZW50IHx8ICcnO1xuXHR9O1xuXHRleHBvcnRzLmdldE1ldGFDbnQgPSBnZXRNZXRhQ250O1xuXHRcblx0XG5cdC8qKlxuXHQgKiDnoa7lrpogaGVhZCAvIG1ldGEg5Lit55qEIGlzb25lcGFnZSDnmoTmlbDmja5cblx0ICog5b2i5aaC77yaXG5cdCAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMFwiIC8+IOihqOekuuS4jeaYr29uZXBhZ2Vcblx0ICogPG1ldGEgbmFtZT1cImlzb25lcGFnZVwiIGNvbnRlbnQ9XCIxfGh0dHA6Ly9oNS5tLnRhb2Jhby5jb20vd2UvaW5kZXguaHRtI2RldGFpbFwiIC8+IOihqOekuuaYr29uZXBhZ2Vcblx0ICovXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdGZ1bmN0aW9uIGdldE9uZVBhZ2VJbmZvKG1ldGFJbmZvKSB7XG5cdCAgdmFyIG9iaiA9IHtcblx0ICAgIGlzb25lcGFnZTogJy0xJyxcblx0ICAgIHVybHBhZ2VuYW1lOiAnJ1xuXHQgIH07XG5cdCAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcblx0ICBpZiAobWV0YV9pbmZvICYmIG1ldGFfaW5mby5oYXNPd25Qcm9wZXJ0eSgnaXNvbmVwYWdlX2RhdGEnKSkge1xuXHQgICAgb2JqLmlzb25lcGFnZSA9IG1ldGFfaW5mby5pc29uZXBhZ2VfZGF0YS5pc29uZXBhZ2U7XG5cdCAgICBvYmoudXJscGFnZW5hbWUgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEudXJscGFnZW5hbWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250ZW50ID0gZ2V0TWV0YUNudCgnaXNvbmVwYWdlJykgfHwgJy0xJztcblx0ICAgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoXCJ8XCIpO1xuXHQgICAgb2JqLmlzb25lcGFnZSA9IGFycl9jb250ZW50WzBdO1xuXHQgICAgb2JqLnVybHBhZ2VuYW1lID0gYXJyX2NvbnRlbnRbMV0gPyBhcnJfY29udGVudFsxXSA6IFwiXCI7XG5cdCAgfVxuXHQgIHJldHVybiBvYmo7XG5cdH07XG5cdGV4cG9ydHMuZ2V0T25lUGFnZUluZm8gPSBnZXRPbmVQYWdlSW5mbztcblxuXG4vKioqLyB9KSxcbi8qIDg1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZXhwb3J0cy50cnlUb0dldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIHJldHVybiBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlID8gKGVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJfbmFtZSkgfHwgJycpIDogJyc7XG5cdH07XG5cdFxuXHR2YXIgdHJ5VG9TZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lLCBhdHRyX3ZhbHVlKSB7XG5cdCAgaWYgKGVsZW1lbnQgJiYgZWxlbWVudC5zZXRBdHRyaWJ1dGUpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGF0dHJfbmFtZSwgYXR0cl92YWx1ZSk7XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRleHBvcnRzLnRyeVRvU2V0QXR0cmlidXRlID0gdHJ5VG9TZXRBdHRyaWJ1dGU7XG5cdFxuXHRleHBvcnRzLnRyeVRvUmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuXHQgIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShhdHRyX25hbWUpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB0cnlUb1NldEF0dHJpYnV0ZShlbGVtZW50LCBhdHRyX25hbWUsICcnKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4NiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogZGVzY3JpcHRpb25cblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgYXBsdXNTdGF0aWMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdC8vIHZhciBVUERBVEUgPSAndXBkYXRlJztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwdXNoUXVldWU6ZnVuY3Rpb24obWV0aG9kTmFtZSwgYXJncyl7XG5cdCAgICAgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1c19xdWV1ZScpO1xuXHQgICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgICAgICBhY3Rpb246ICdhcGx1cy4nICsgbWV0aG9kTmFtZSxcblx0ICAgICAgICBhcmd1bWVudHM6IGFyZ3Ncblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgICAgZWFjaChhcGx1c1N0YXRpYy5vcGVuQVBJcywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICBhcGx1c1t2XSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBpdGVtcyA9IFtdO1xuXHQgICAgICAgICAgZWFjaChhcmd1bWVudHMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIHZhciBtZXRob2ROYW1lID0gdiA9PT0gJ2VudGVyJyA/ICdfc2VuZFBWJyA6ICdfJyArIHY7XG5cdFxuXHQgICAgICAgICAgX3NlbGYucHVzaFF1ZXVlKG1ldGhvZE5hbWUsIGl0ZW1zKTtcblx0ICAgICAgICB9O1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuLyogODcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qc1xuXHQgKlxuXHQgKiBjbGllbnRJbmZvIGZvciBtaW5pYXBwXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIC8qKlxuXHQgICAgICog5Yid5aeL5YyW5qih5Z2XLCDkuKrmgKfljJbpg6jliIblrZDnsbvkuK3lrp7njrBcblx0ICAgICAqL1xuXHQgICAgLy8gaW5pdDogZnVuY3Rpb24ob3B0aW9ucykge1xuXHQgICAgLy8gICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHQgICAgLy8gfSxcblx0XG5cdCAgICBfZ2V0TmV0d29ya1R5cGU6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgIGlmIChjdHguZ2V0TmV0d29ya1R5cGUpIHtcblx0ICAgICAgICBjdHguZ2V0TmV0d29ya1R5cGUoe1xuXHQgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHQgICAgICAgICAgICBjYWxsYmFjayhyZXMgPyByZXMubmV0d29ya1R5cGUgOiAnJyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgY2FsbGJhY2soJycpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICog6I635Y+W57O757uf5L+h5oGvIGh0dHBzOi8vZG9jcy5hbGlwYXkuY29tL21pbmkvYXBpL3N5c3RlbS1pbmZvXG5cdCAgICAgKiDmiYvmnLrlnovlj7fjgIHlsY/luZXliIbovqjnjofjgIHns7vnu5/niYjmnKznrYnkv6Hmga9cblx0ICAgICAqL1xuXHQgICAgX2dldFN5c3RlbUluZm86IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgZW1wdHlPYmogPSB7fTtcblx0ICAgICAgdmFyIHN5c0luZm8gPSBfc2VsZi5TWVNURU1fSU5GTyB8fCB7fTtcblx0ICAgICAgaWYgKHN5c0luZm8gJiYgc3lzSW5mby52ZXJzaW9uKSB7XG5cdCAgICAgICAgY2FsbGJhY2soX3NlbGYuU1lTVEVNX0lORk8pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBtaW5pLmdldENvbnRleHQoKS5nZXRTeXN0ZW1JbmZvKHtcblx0ICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAgICAgICBpZiAocmVzICYmIHJlcy52ZXJzaW9uKSB7XG5cdCAgICAgICAgICAgICAgICBfc2VsZi5fZ2V0TmV0d29ya1R5cGUoZnVuY3Rpb24gKG4pIHtcblx0ICAgICAgICAgICAgICAgICAgcmVzLm5ldHdvcmtUeXBlID0gbjtcblx0ICAgICAgICAgICAgICAgICAgX3NlbGYuU1lTVEVNX0lORk8gPSByZXM7XG5cdCAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG5cdCAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG5cdCAgICAgICAgICAgICAgICAgIGVtcHR5T2JqLm5ldHdvcmtUeXBlID0gbjtcblx0ICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZW1wdHlPYmopO1xuXHQgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhlbXB0eU9iaik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIF9nZXRBY2NvdW50SW5mb1N5bmM6IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGluZm8gPSB7fTtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICAgICAgaWYgKGN0eC5nZXRBY2NvdW50SW5mb1N5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFjY291bnRJbmZvU3luYycpKSB7XG5cdCAgICAgICAgICAvLyDlvq7kv6Fcblx0ICAgICAgICAgIHZhciBhY2NvdW50SW5mbyA9IGN0eC5nZXRBY2NvdW50SW5mb1N5bmMoKTtcblx0ICAgICAgICAgIHZhciBtaW5pUHJvZ3JhbSA9IGFjY291bnRJbmZvLm1pbmlQcm9ncmFtIHx8IHt9O1xuXHQgICAgICAgICAgdmFyIHBsdWdpbiA9IGFjY291bnRJbmZvLnBsdWdpbiB8fCB7fTtcblx0ICAgICAgICAgIGluZm8uYXBwSWQgPSBtaW5pUHJvZ3JhbS5hcHBJZDsgIC8vIOWwj+eoi+W6jyBhcHBJZFxuXHQgICAgICAgICAgaW5mby5hcHBWZXJzaW9uID0gbWluaVByb2dyYW0udmVyc2lvbiB8fCBtaW5pUHJvZ3JhbS5lbnZWZXJzaW9uOyAgLy8g5bCP56iL5bqPIGFwcFZlcnNpb25cblx0ICAgICAgICAgIGluZm8ucGx1Z2luQXBwSWQgPSBwbHVnaW4uYXBwSWQ7IC8vIOaPkuS7tiBhcHBJZFxuXHQgICAgICAgICAgaW5mby5wbHVnaW5BcHBWZXJzaW9uID0gcGx1Z2luLnZlcnNpb247IC8vIOaPkuS7tiBhcHBWZXJzaW9uICBcblx0ICAgICAgICB9IGVsc2UgaWYgKGN0eC5nZXRBcHBJZFN5bmMgJiYgY3R4LmNhbklVc2UoJ2dldEFwcElkU3luYycpKSB7XG5cdCAgICAgICAgICB2YXIgYXBwSW5mbyA9IGN0eC5nZXRBcHBJZFN5bmMoKSB8fCB7fTtcblx0ICAgICAgICAgIGluZm8uYXBwSWQgPSBhcHBJbmZvLmFwcElkIHx8ICcnO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgcmV0dXJuIGluZm87XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogd29ya25vXG5cdCAgICAgKiAgIDEuIGNvb2tpZS5nZXRDb29raWUoJ3dvcmtubycpXG5cdCAgICAgKiAgIDIuIGNvb2tpZS5nZXRDb29raWUoJ2VtcGxJZCcpXG5cdCAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHx8IHVuZGVmaW5lZFxuXHQgICAgICovXG5cdCAgICBydW46IGZ1bmN0aW9uIChzdGF0ZSwgY2IpIHtcblx0ICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgLy8gY29uc29sZS5sb2coJ1RPRE8gZ2V0U3lzdGVtSW5mbycpO1xuXHQgICAgICB0aGlzLl9nZXRTeXN0ZW1JbmZvKGZ1bmN0aW9uIChyZXMpIHtcblx0ICAgICAgICAvLyDmlK/ku5jlrp3lsI/nqIvluo/mlofmoaMgIHN5c3RlbS3ns7vnu5/niYjmnKwgcGxhdGZvcm0t57O757uf5ZCNXG5cdCAgICAgICAgcmVzLnVzZXJBZ2VudCA9ICctJztcblx0ICAgICAgICByZXMub3MgPSByZXMucGxhdGZvcm0gPyByZXMucGxhdGZvcm0udG9Mb2NhbGVVcHBlckNhc2UoKSA6ICcnO1xuXHQgICAgICAgIHJlcy5vc192ZXJzaW9uID0gcmVzLnN5c3RlbSA/IHJlcy5zeXN0ZW0gOiAnJztcblx0ICAgICAgICByZXMuYWNjZXNzID0gcmVzLmJyYW5kID8gcmVzLmJyYW5kIDogJyc7XG5cdCAgICAgICAgdmFyIGhvc3QgPSAnJztcblx0ICAgICAgICBpZihyZXMuaG9zdCAmJiAodHlwZW9mIHJlcy5ob3N0LmVudiA9PT0gJ3N0cmluZycpKXtcblx0ICAgICAgICAgIGhvc3QgPSByZXMuaG9zdC5lbnY7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJlcy5ob3N0ID0gaG9zdDtcblx0XG5cdCAgICAgICAgdmFyIGFjY291bnRJbmZvID0gX3NlbGYuX2dldEFjY291bnRJbmZvU3luYygpO1xuXHQgICAgICAgIHZhciBycyA9IE9iamVjdC5hc3NpZ24oe30sIHJlcywgYWNjb3VudEluZm8pO1xuXHRcblx0ICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfY2xpZW50ID0gcnM7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHJldHVybiAyMDAwO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA4OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDlsI/nqIvluo/kuIvpnaLnmoRzcG3kvZPns7tcblx0ICpcblx0ICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKlxuXHQgKiBBdXRob3JzOlxuXHQgKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG5cdCAqL1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgaXNBcnJheSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0dmFyIGFwbHVzU3RhdGljICA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICByZXNldExhc3RQYWdlU3BtOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuXHQgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuXHQgICAgICBzcG0uc3BtX2NudCA9ICcnO1xuXHQgICAgfSxcblx0ICAgIGxpc3RlbjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuXHQgICAgICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSxbXSk7ICBcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcblx0ICAgICAgICBhcmd1bWVudHM6WydvblNob3cnLGZ1bmN0aW9uKG9wdCl7XG5cdCAgICAgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICAgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyx7fSk7IFxuXHQgICAgICAgICAgICB2YXIgcGFnZXMgPSBhcGx1cy5nZXRNZXRhSW5mbygncGFnZXMnKTtcblx0ICAgICAgICAgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlUGF0aCA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG5cdCAgICAgICAgICAgIGlmIChpc0FycmF5KHBhZ2VzKSkge1xuXHQgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gcGFnZXNbaV07XG5cdCAgICAgICAgICAgICAgICBpZihjdXJyZW50Lm1hdGNoVXJsID09PSBjdXJyZW50UGFnZVBhdGgpe1xuXHQgICAgICAgICAgICAgICAgICBhcGx1cy5zZXRQYWdlU1BNKGN1cnJlbnQuc3BtQSwgY3VycmVudC5zcG1CKTtcblx0ICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgYXJndW1lbnRzOlsnY2xlYXJQYWdlU1BNJyxmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBfc2VsZi5yZXNldExhc3RQYWdlU3BtKCk7XG5cdCAgICAgICAgfV0sXG5cdCAgICAgIH0pO1xuXHQgICAgICBcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwYXJhbXMgZGF0YSB7T2JqZWN0fSB7XG5cdCAgICAgICAqICAgc3BtQ250OiAnYS5iLjAuMCdcblx0ICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuXHQgICAgICAgKiAgIHNwbVByZTogJ2EuYi4wLjAnXG5cdCAgICAgICAqIH1cblx0ICAgICAgICovXG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG5cdCAgICAgICAgYXJndW1lbnRzOlsnc2V0UGFnZVNQTScsZnVuY3Rpb24gKGRhdGEpIHtcblx0ICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCB7fSk7IFxuXHQgICAgICAgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuXHQgICAgICAgICAgICBcblx0ICAgICAgICAgICAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCkgfHwgW107XG5cdCAgICAgICAgICAgIHZhciBzcG1hYiA9IGRhdGEuc3BtQ250ID8gZGF0YS5zcG1DbnQuc3BsaXQoJy4nKSA6IFtzcG0uZGF0YS5hIHx8ICcwJywgc3BtLmRhdGEuYiB8fCAnMCddO1xuXHQgICAgICAgICAgICBpZiAoc3BtYWIubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgICAgICAgICAgc3BtYWIgPSBzcG1hYi5jb25jYXQoWycwJywgJzAnXSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdmFyIHNwbWFic3RyID0gc3BtYWIuam9pbignLicpO1xuXHRcblx0ICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICAgIHZhciBwcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMl0gfHwge307XG5cdCAgICAgICAgICAgIHZhciBwcmVQcmVQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gM10gfHwge307XG5cdFxuXHQgICAgICAgICAgICBpZiAocGFnZXMubGVuZ3RoID4gMCAmJiBjdXJyZW50UGFnZSkge1xuXHQgICAgICAgICAgICAgIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdLnNwbSA9IHNwbWFic3RyO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICB2YXIgY3VycmVudFBhZ2VTcG0gPSBzcG0uZGF0YSAmJiBzcG0uZGF0YS5hID8gW3NwbS5kYXRhLmEsIHNwbS5kYXRhLmIsIHNwbS5kYXRhLmMgfHwgJzAnLCBzcG0uZGF0YS5kIHx8ICcwJ10uam9pbignLicpIDogJyc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmEgPSBzcG1hYlswXSA/ICcnICsgc3BtYWJbMF0gOiAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmIgPSBzcG1hYlsxXSA/ICcnICsgc3BtYWJbMV0gOiAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmMgPSAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5kYXRhLmQgPSAnMCc7XG5cdCAgICAgICAgICAgIHNwbS5wYWdlX3JlZmVycmVyID0gcGFnZXMubGVuZ3RoID4gMSAmJiBjdXJyZW50UGFnZSA/IChjdXJyZW50UGFnZS5yb3V0ZSB8fCBjdXJyZW50UGFnZS5pcykgOiAnJztcblx0ICAgICAgICAgICAgc3BtLnNwbV9jbnQgPSBzcG1hYnN0cjtcblx0XG5cdCAgICAgICAgICAgIC8vIOS7peeUqOaIt+WcqFVSTOS4iuaLvOaOpeeahHNwbeS4uuWHhu+8jGFwbHVzLnNwbV9vcmlnbuadpea6kOS6jmF1dG9faW5pdC9pbmplY3RfYXBwLmpzXG5cdCAgICAgICAgICAgIHZhciBzcG1fb3JpZ24gPSBhcGx1cy5zcG1fb3JpZ24gfHwgc3BtLnNwbV9vcmlnbjtcblx0ICAgICAgICAgICAgc3BtLnNwbV9wcmUgPSBkYXRhLnNwbVByZSB8fCBzcG0uc3BtX3VybCB8fCBwcmVQcmVQYWdlLnNwbSB8fCAnJztcblx0ICAgICAgICAgICAgc3BtLnNwbV91cmwgPSBkYXRhLnNwbVVybCB8fCBjdXJyZW50UGFnZVNwbSB8fCBwcmVQYWdlLnNwbSB8fCBzcG1fb3JpZ24gfHwgICcnO1xuXHQgICAgICAgICAgICBhcGx1cy5fJC5zcG0gPSBzcG07XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuXHQgICAgICAgICAgICB1bG9nKCkudygnc2V0UGFnZVNQTSBlcnJvciwgdGhlIGVycm9ySW5mbyBpcyAnLCBlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIFxuXHQgICAgICAgIH1dLFxuXHQgICAgICB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcnVuOiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMubGlzdGVuKCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDg5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogYXBsdXNfbWluaV9yZXBvcnRfdW0uanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBNYWluID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5MCk7XG5cdCAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoKTtcblx0ICAgICAgbWFpbi5ydW4odGhpcy5vcHRpb25zKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9O1xuXG4vKioqLyB9KSxcbi8qIDkwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogbWFpbl9taW5pX3VtX2h0dHAuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0Ly8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG5cdHZhciBtYWluX2Jhc2VfaHR0cCA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpO1xuXHR2YXIgZXZlbnRNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOSk7XG5cdHZhciByZXF1ZXN0UXVldWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBjbG9uZURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHR2YXIgbWluaSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cdHZhciBhcGx1c1N0YXRpYyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgdXRpbE1vbml0b3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KTtcblx0XG5cdGZ1bmN0aW9uIGhhbmRsZUV2ZW50KGlkLCBvcHRpb25zKSB7XG5cdCAgaWYgKHV0aWxzLmNoZWNrRXZlbnQoaWQsIG9wdGlvbnMpKSB7XG5cdCAgICB2YXIgZXZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKShpZCwgb3B0aW9ucyk7XG5cdCAgICBldmVudC5yYW5rID0gdXRpbE1vbml0b3IucmFuaygpO1xuXHQgICAgaWYgKGV2ZW50ICYmIGV2ZW50LmlkID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG5cdCAgICAgIGV2ZW50LmFtb3VudCA9IGV2ZW50LnJhbms7XG5cdCAgICB9XG5cdCAgICB1bG9nKCkuaSgnZXZlbnQ6ICcsIGlkLCBvcHRpb25zKTtcblx0ICAgIGV2ZW50TWFuYWdlcigpLmFkZEV2ZW50KGV2ZW50KTtcblx0ICAgIC8vIOavj+asoWFkZEV2ZW505ZCO77yM5Yik5pat5piv5ZCmZWt2c+WGheeahOaXpeW/l+adoeaVsOaYr+WQpui2heWHum1heExpbWl0XG5cdCAgICAvLyBtYXgtcXVldWUtY291bnTnlKjkuo7oh6rlrprkuYnogZrlkIjpmJ/liJfplb/luqZcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIG1heFF1ZXVlQ291bnQgPSBhcGx1cy5nZXRNZXRhSW5mbygnbWF4LXF1ZXVlLWNvdW50JykgfHwgYXBsdXNTdGF0aWMuTUFYX1FVRVVFX0NPVU5UO1xuXHQgICAgaWYoaWQgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQgfHwgZXZlbnRNYW5hZ2VyKCkuZ2V0RWt2c0xlbigpID49IG1heFF1ZXVlQ291bnQpIHtcblx0ICAgICAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLlJFUVVFU1RTKS5zZW5kKHV0aWxzLkRhdGFUeXBlLkVLViwgeyBub0NhY2hlOiBmYWxzZSB9LCBmdW5jdGlvbigpe1xuXHQgICAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFpbl9iYXNlX2h0dHAuZXh0ZW5kKHtcblx0XG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgIC8vIEDmloflv4Mg5YWo5Z+L54K5IHRyYWNrX3R5cGVcblx0ICAgIHVsb2coKS5zZXREZWJ1ZyghIWFwbHVzLmdldE1ldGFJbmZvKCdERUJVRycpKTtcblx0ICAgIHZhciB1c2VyRXZlbnRBcmdzLCBnb2tleTtcblx0ICAgIHZhciBsb2drZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5sb2drZXk7XG5cdCAgICB2YXIgZ21rZXkgPSBkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nbWtleTtcblx0ICAgIHZhciBsb2dkYXRhID0gZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZCAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhICYmIGRhdGEud2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG5cdCAgICB2YXIgZ3AgPSBhcGx1cy5nZXRNZXRhSW5mbygnZ2xvYmFscHJvcGVydHknKTtcblx0ICAgIHZhciBwYWdlX25hbWU7XG5cdCAgICBpZiAoZ21rZXkgPT09ICdDTEsnIHx8IGdta2V5ID09PSAnRVhQJyB8fCBnbWtleSA9PT0gJ09USEVSJyB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQpIHtcblx0ICAgICAgdXNlckV2ZW50QXJncyA9IGNsb25lRGVlcChkYXRhICYmIGRhdGEudXNlcmRhdGEgJiYgZGF0YS51c2VyZGF0YS5nb2tleSkgfHwge307XG5cdCAgICAgIGdva2V5ID0gbG9nZGF0YS5nb2tleSB8fCB7fTtcblx0ICAgICAgdmFyIGV2ZW50X2FyZ3M7XG5cdCAgICAgIHZhciBzZGtBcmdzID0ge307XG5cdCAgICAgIGlmIChsb2drZXkgPT09ICckJF9zaGFyZScpIHtcblx0ICAgICAgICBzZGtBcmdzLnJlZmVyX3BhZ2UgPSBsb2dkYXRhLnVybDtcblx0ICAgICAgICBzZGtBcmdzLnNoYXJlX3R5cGUgPSB1c2VyRXZlbnRBcmdzLnNoYXJlX3R5cGU7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuXHQgICAgICAgIHNka0FyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIC8vICQkX2FwcF9saW5r5LqL5Lu255qEdGFyZ2V0QXBwS2V5XG5cdCAgICAgIGlmKGdva2V5LnRhcmdldEFwcEtleSkge1xuXHQgICAgICAgIHNka0FyZ3MudGFyZ2V0QXBwS2V5ID0gdXNlckV2ZW50QXJncy50YXJnZXRBcHBLZXk7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBwYWdlX25hbWUgPSB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10gfHwgdXNlckV2ZW50QXJncy5wYWdlX25hbWUgfHwgKHVzZXJFdmVudEFyZ3Muc3BtICYmIHVzZXJFdmVudEFyZ3Muc3BtLmIpIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG5cdCAgICAgIHNka0FyZ3MucGFnZV9uYW1lID0gcGFnZV9uYW1lO1xuXHQgICAgICBcblx0ICAgICAgc2RrQXJncy51cmwgPSBsb2dkYXRhLnVybCB8fCAnLSc7XG5cdCAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZSB8fCB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10pIHtcblx0ICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5wYWdlX25hbWU7XG5cdCAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3NbJ2RhdGEtcGFnZW5hbWUnXTtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuXHQgICAgICAgIHNka0FyZ3MuZ3AgPSBncDtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKHVzZXJFdmVudEFyZ3Muc3BtKSB7XG5cdCAgICAgICAgc2RrQXJnc1snc3BtLWNudCddID0gW2VuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpLCB1c2VyRXZlbnRBcmdzLnNwbS5jLCB1c2VyRXZlbnRBcmdzLnNwbS5kXS5maWx0ZXIoZnVuY3Rpb24odil7XG5cdCAgICAgICAgICByZXR1cm4gISF2O1xuXHQgICAgICAgIH0pLmpvaW4oJy4nKTtcblx0ICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5zcG07XG5cdCAgICAgIH1cblx0ICAgICAgXG5cdCAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnBhZ2VfdGl0bGUpIHtcblx0ICAgICAgICBzZGtBcmdzLnBhZ2VfdGl0bGUgPSB1c2VyRXZlbnRBcmdzLnBhZ2VfdGl0bGUgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKGxvZ2RhdGEudXJsKSB8fCAnJztcblx0ICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5wYWdlX3RpdGxlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNka0FyZ3MucGFnZV90aXRsZSA9IGdva2V5Ll9wYWdlX3RpdGxlIHx8ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAodXNlckV2ZW50QXJncy5pc19hdXRvKSB7XG5cdCAgICAgICAgc2RrQXJncy5pc19hdXRvID0gdXNlckV2ZW50QXJncy5pc19hdXRvO1xuXHQgICAgICAgIHNka0FyZ3MudHJhY2tfdHlwZSA9IFwiMVwiO1xuXHQgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzLmlzX2F1dG87XG5cdCAgICAgICAgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSkgeyAvL+WFqOWfi+eCueS4u+WKqOS4iuaKpeS6i+S7tuexu+WeiyBA6ZKw5pitIEDmloflv4Ncblx0ICAgICAgICAgIHNka0FyZ3MuZXZlbnRfdHlwZV9pZCA9IGxvZ2RhdGEuZXZlbnRfY29kZTsgLy8gQOaWh+W/gyDkuovku7bnsbvlnovlj4LmlbDlkI3mm7TmlLlcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2RrQXJncy5pc19hdXRvID0gMDtcblx0ICAgICAgICBzZGtBcmdzLnRyYWNrX3R5cGUgPSBcIjBcIjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGNsb25lUCA9IGNsb25lRGVlcCh1c2VyRXZlbnRBcmdzKTtcblx0ICAgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGsgPT09ICdzdHJpbmcnICYmIHV0aWxzLnN0YXJ0c1dpdGgoaywgJ18nKSkge1xuXHQgICAgICAgICAgc2RrQXJnc1trXSA9IGNsb25lUFtrXTtcblx0ICAgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzW2tdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAobG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG5cdCAgICAgICAgZXZlbnRfYXJncyA9IHV0aWxEYXNoLmFzc2lnbihzZGtBcmdzLCB1c2VyRXZlbnRBcmdzKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHsgY3VzcDogdXNlckV2ZW50QXJncyB9KTtcblx0ICAgICAgfVxuXHQgICAgICBoYW5kbGVFdmVudChsb2drZXksIGV2ZW50X2FyZ3MpO1xuXHQgICAgfSBlbHNlIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUgPT09ICcyMDAxJykgeyBcblx0ICAgICAgdmFyIHB2YXJncyA9IHt9O1xuXHQgICAgICB2YXIgcGFnZV9pZCA9IGFwbHVzU3RhdGljLlBBR0VfU1RBUlQ7XG5cdCAgICAgIGdva2V5ID0gY2xvbmVEZWVwKGxvZ2RhdGEuZ29rZXkpIHx8IHt9O1xuXHQgICAgICBwYWdlX25hbWUgPSBnb2tleS5wYWdlX25hbWUgfHwgYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZShsb2dkYXRhLnVybCkgfHwgbG9nZGF0YS51cmwgfHwgJyc7XG5cdCAgICAgIHB2YXJncy5yID0gbG9nZGF0YS5hcmcxIHx8IGxvZ2RhdGEubG9na2V5IHx8ICctJztcblx0ICAgICAgcHZhcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcblx0ICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9fcHYpIHtcblx0ICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDE7XG5cdCAgICAgICAgcHZhcmdzLnVybCA9IGdva2V5LnBhdGggfHwgJy0nO1xuXHQgICAgICAgIHB2YXJncy5yZWZfdXJsID0gZ29rZXkucmVmZXJyZXI7XG5cdCAgICAgICAgcHZhcmdzLnRyYWNrX3R5cGUgPSBcIjFcIjtcblx0ICAgICAgICBkZWxldGUgZ29rZXkuX3BhZ2VfYXV0b19wdjtcblx0ICAgICAgICBkZWxldGUgZ29rZXkucmVmZXJyZXI7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LnBhdGg7XG5cdCAgICAgICAgZGVsZXRlIGdva2V5LnBhZ2VfbmFtZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwdmFyZ3MuaXNfYXV0byA9IDA7XG5cdCAgICAgICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcblx0ICAgICAgICBwdmFyZ3MucmVmX3VybCA9IGxvZ2RhdGEucHJlO1xuXHQgICAgICAgIHB2YXJncy50cmFja190eXBlID0gXCIwXCI7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChnb2tleS5kdXJhdGlvbikge1xuXHQgICAgICAgIHB2YXJncy5kdXJhdGlvbiA9IGdva2V5LmR1cmF0aW9uO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5kdXJhdGlvbjtcblx0ICAgICAgfVxuXHQgICAgICBcblx0ICAgICAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuXHQgICAgICAgIHB2YXJncy5ncCA9IGdwO1xuXHQgICAgICB9XG5cdCAgICAgIFxuXHQgICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcblx0ICAgICAgICBwdmFyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG5cdCAgICAgIH1cblx0ICAgICAgZ29rZXkgPSB1dGlscy5kZWxldGVJbmZvKGdva2V5LCBbJ19hbm9ueV9pZCcsICdfZGV2X2lkJywgJ19zZXNzaW9uX2lkJywgJ191c2VyX2lkJywgJ191c2VyX25pY2snLCAndWFpZCcsICdwdmlkJywgJ3NjZW5lJ10pO1xuXHQgICAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpO1xuXHQgICAgICBpZiAoZ29rZXkuX3BhZ2VfYXV0b19pZCkge1xuXHQgICAgICAgIHBhZ2VfaWQgPSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZ29rZXkucGFnZV9zdGFydCkge1xuXHQgICAgICAgIHB2YXJncy5wYWdlX3N0YXJ0ID0gZ29rZXkucGFnZV9zdGFydDtcblx0ICAgICAgICBkZWxldGUgZ29rZXkucGFnZV9zdGFydDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8g6YeH6ZuG6aG16Z2icGFnZV90aXRsZVxuXHQgICAgICBpZiAoZ29rZXkucGFnZV90aXRsZSkge1xuXHQgICAgICAgIHB2YXJncy5wYWdlX3RpdGxlID0gZ29rZXkucGFnZV90aXRsZSB8fCBQYWdlTWFuYWdlci5nZXRQYWdlVGl0bGUobG9nZGF0YS51cmwpIHx8ICcnO1xuXHQgICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3RpdGxlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHB2YXJncy5wYWdlX3RpdGxlID0gZ29rZXkuX3BhZ2VfdGl0bGU7XG5cdCAgICAgIH1cblx0ICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX3RpdGxlO1xuXHRcblx0ICAgICAgcHZhcmdzLnVybCA9IFBhZ2VNYW5hZ2VyLmdldEZ1bGxQYXRoKHB2YXJncy51cmwpO1xuXHQgICAgICBwdmFyZ3MucmVmX3VybCA9IFBhZ2VNYW5hZ2VyLmdldEZ1bGxQYXRoKHB2YXJncy5yZWZfdXJsKTtcblx0ICAgICAgaGFuZGxlRXZlbnQocGFnZV9pZCwgdXRpbERhc2guYXNzaWduKHB2YXJncywgeyBjdXNwOiBnb2tleX0gKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBjb25zb2xlLmxvZygyMjIyLCBkYXRhKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBydW46IGZ1bmN0aW9uKCkge1xuXHQgICAgdGhpcy53YXRjaExPRygpO1xuXHQgIH1cblx0ICBcblx0fSk7XG5cbi8qKiovIH0pLFxuLyogOTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICog5oum5oiq5bm25oyJaHR0cOWNj+iuruWPkemAgeaXpeW/l1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIEJhc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ1KTtcblx0Ly8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0Ly8gdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cdC8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh7XG5cdFxuXHQgIHN1YnNjcmliZUxvZ3M6IGZ1bmN0aW9uIChhY3Rpb24sIGNhbGxiYWNrKSB7XG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbYWN0aW9uLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gYXBsdXNTdGF0aWMuQ09NUExFVEUpIHtcblx0ICAgICAgICBjYWxsYmFjayhvcmlEYXRhcyk7XG5cdCAgICAgIH1cblx0ICAgIH1dKTtcblx0ICB9LFxuXHRcblx0ICBnZXRMb2dpY1N5bWJvbDogZnVuY3Rpb24gKCkge1xuXHQgICAgcmV0dXJuIHRoaXMuZm9ybWF0ID09PSAnQUxJJyA/ICcmJyA6ICd8fCc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICog5Zyo5a2Q57G75Lit5a6e546wXG5cdCAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG5cdCAgICovXG5cdCAgaGFuZGxlck1pZGRsZXdhcmU6IGZ1bmN0aW9uICgpIHt9LFxuXHQgIFxuXHRcblx0ICB3YXRjaExPRzogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIFxuXHQgICAgLy8g6K6i6ZiFcHbkuovku7Zcblx0ICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWLCBmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICBfc2VsZi5oYW5kbGVyTWlkZGxld2FyZShkYXRhLCAncHYnKTtcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIOiuoumYhWhqbGovYXBsdXPkuovku7Zcblx0ICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEosIGZ1bmN0aW9uIChkYXRhKSB7XG5cdCAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsIGFwbHVzU3RhdGljLkFQTFVTKTtcblx0ICAgIH0pO1xuXHQgIH0sXG5cdFxuXHQgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy53YXRjaExPRygpO1xuXHQgIH1cblx0fSk7XG5cblxuLyoqKi8gfSksXG4vKiA5MiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG5cdCAqIOaTjeS9nGFwbHVzX3F1ZXVl55qE5bel5YW357G7XG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdGV4cG9ydHMucHVzaEludG9Hb2xkbG9nUXVldWUgPSBmdW5jdGlvbiAoYWN0aW9uLCBhcmdzKSB7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzX3F1ZXVlJyk7XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIG5hbWVzID0gYWN0aW9uLnNwbGl0KCcuJyk7XG5cdCAgdmFyIGFwbHVzXzEgPSBhcGx1c1tuYW1lc1sxXV07XG5cdCAgdmFyIGFwbHVzXzIgPSBhcGx1c18xID8gYXBsdXNfMVtuYW1lc1syXV0gOiBudWxsO1xuXHRcblx0ICBpZiAoYXBsdXMgJiYgbmFtZXMubGVuZ3RoID09PSAyICYmIGFwbHVzXzEpIHtcblx0ICAgIGFwbHVzXzEuYXBwbHkoYXBsdXMsIGFyZ3MpO1xuXHQgIH0gZWxzZSBpZiAobmFtZXMubGVuZ3RoID09PSAzICYmIGFwbHVzXzIpIHtcblx0ICAgIGFwbHVzXzIuYXBwbHkoYXBsdXNfMSwgYXJncyk7ICBcblx0ICB9IGVsc2Uge1xuXHQgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgIGFjdGlvbjogYWN0aW9uLFxuXHQgICAgICBhcmd1bWVudHM6IGFyZ3Ncblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDkzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0ICogRmlsZTogZXZlbnQuanNcblx0ICogUHJvamVjdDogQGFsaS9hcGx1c1xuXHQgKiAgICAgIFxuXHQgKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKi9cblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIHV0aWxEYXNoID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyk7XG5cdHZhciB1bG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cdHZhciBqc29uVXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnIHx8ICFpZCkge1xuXHQgICAgdWxvZygpLncoJ2V2ZW50IGxvZ2tleSBpcyBpbnZhbGlkLCBpZCA9JywgaWQgfHwgXCInJyBldmVudCBwcm9wZXJ0aWVzID0gXCIsIGpzb25VdGlsLnN0cmluZ2Z5KHByb3BlcnRpZXMuY3VzcCkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgZXZlbnQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV2ZW50LmlkID0gaWQ7XG5cdCAgaWYgKCFwcm9wZXJ0aWVzIHx8ICFwcm9wZXJ0aWVzLnRzKSB7XG5cdCAgICBldmVudC50cyA9IERhdGUubm93KCk7XG5cdCAgfVxuXHQgIHZhciBwcm9wc1R5cGUgPSB0eXBlb2YgcHJvcGVydGllcztcblx0ICBpZiAocHJvcHNUeXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcblx0ICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuXHQgICAgICAgIGV2ZW50W2tleV0gPSBwcm9wZXJ0aWVzW2tleV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdCAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG5cdCAgaWYgKCF1dGlsRGFzaC5pc0VtcHR5T2JqZWN0KGdwKSkge1xuXHQgICAgZXZlbnRbJ2dwJ10gPSBncDsgXG5cdCAgfVxuXHQgIHJldHVybiBldmVudDtcblx0fTtcblxuLyoqKi8gfSksXG4vKiA5NCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG5cdCAqIOWIneWni+WMluWfuuehgOaooeWdl++8jOS4jeiDveebtOaOpeS9v+eUqO+8jOmcgOimgemAmui/h2luaXRMb2FkX3BjLmpz5oiWaW5pdExvYWRfd2FwLmpz562J5YW35L2T55qE5Zy65pmv5qih5Z2X6LCD55SoXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGFjdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpO1xuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcblx0ICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblx0XG5cdCAgICAgIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHQgICAgICB2YXIgcXVlID0gY29udGV4dFtBUExVU19RVUVVRV0gfHwgW107XG5cdCAgICAgIHZhciBycyA9IGFjdGlvbi5nZXRGb3JtYXRRdWV1ZShxdWUsICdtZXRhUXVldWUnKTtcblx0ICAgICAgY29udGV4dFtBUExVU19RVUVVRV0gPSBycy5xdWV1ZTtcblx0ICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocnMuZm9ybWF0UXVldWUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5NSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgdXRpbEFycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NCk7XG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdC8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcblx0dmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKlxuXHQgKiBAcGFyYW1zIHtBcnJheX0gUVVFVUVcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdHZhciBwcm9jZXNzR29sZGxvZ1F1ZXVlID0gZnVuY3Rpb24gKFFVRVVFLCBvcHRzKSB7XG5cdCAgZnVuY3Rpb24gZigpIHtcblx0ICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG5cdCAgICAvLyDmjpLluo9cblx0ICAgIHZhciBxdWUgPSBnZXRGb3JtYXRRdWV1ZShRVUVVRSkucXVldWU7XG5cdCAgICB2YXIgdGFzayA9IHt9O1xuXHQgICAgdmFyIGRlbGF5VGFza3MgPSBbXTtcblx0ICAgIHdoaWxlICh0YXNrID0gcXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcblx0ICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcblx0ICAgICAgICBkZWxheVRhc2tzLnB1c2godCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgaWYgKGRlbGF5VGFza3MubGVuZ3RoID4gMCkge1xuXHQgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuXHQgICAgICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMDApO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgdHJ5IHtcblx0ICAgIGYoKTtcblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KGUpO1xuXHQgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgLy8gICBtc2c6IGVcblx0ICAgIC8vIH0pO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblx0XG5cdGZ1bmN0aW9uIGdldE1ldGFJbmZvKCkge1xuXHQgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG5cdCAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuXHQgIHJldHVybiBtZXRhX2luZm87XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldEFwbHVzSG9sZFR5cGUgKCkge1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciB1YWlkID0gbWV0YV9pbmZvLnVhaWQgKyAnJztcblx0ICBpZiAodWFpZCA9PT0gJzEnICYmICFtZXRhX2luZm8uX2Fub255X2lkKSB7XG5cdCAgICByZXR1cm4gJ0JMT0NLJztcblx0ICB9XG5cdCAgcmV0dXJuIG1ldGFfaW5mb1snX2hvbGQnXSB8fCBtZXRhX2luZm9bJ2FwbHVzLXdhaXRpbmcnXTtcblx0fVxuXHRcblx0dmFyIEFQTFVTX0hPTERfVVNFUklEX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG5cdHZhciBBUExVU19IT0xEX1FVRVVFID0gW107XG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG5cdCAgdmFyIGhvbGRUeXBlID0gZ2V0QXBsdXNIb2xkVHlwZSgpO1xuXHQgIC8vIGNvbnNvbGUubG9nKCdob2xkVHlwZSA9PT0gJywgaG9sZFR5cGUpO1xuXHQgIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuXHQgIHZhciBmbGFnID0gdHJ1ZTtcblx0XG5cdCAgLy8gMDogXCJfaG9sZFwiXG5cdCAgLy8gMTogXCJTVEFSVFwiXG5cdCAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3VtZW50cyB8fCBbXTtcblx0ICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG5cdCAgdmFyIG1ldGFWYWx1ZSA9IGFyZ3NbMV07XG5cdCAgdmFyIFNUQVJUID0gJ1NUQVJUJztcblx0ICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG5cdCAgICByZXR1cm4gU1RBUlQ7XG5cdCAgfVxuXHQgIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcblx0ICAgIHJldHVybiBTVEFSVDtcblx0ICB9XG5cdCAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG5cdCAgICBzd2l0Y2ggKGhvbGRUeXBlKSB7XG5cdCAgICBjYXNlICdCTE9DSyc6XG5cdCAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuXHQgICAgICAgIEFQTFVTX0hPTERfUVVFVUUucHVzaCh0YXNrKTtcblx0ICAgICAgICBmbGFnID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZsYWc7XG5cdH1cblx0XG5cdFxuXHQvLyB2YXIgcHJvY2Vzc2VkID0gZmFsc2U7XG5cdGZ1bmN0aW9uIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlIChvcHRzKSB7XG5cdCAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcblx0ICAvLyAgIHByb2Nlc3NlZCA9IHRydWU7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1VTRVJJRF9RVUVVRSwgb3B0cyk7XG5cdCAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcblx0ICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfUVVFVUUsIG9wdHMpOyAgXG5cdCAgLy8gfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcblx0ICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcblx0ICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG5cdCAqIH1cblx0ICovXG5cdGV4cG9ydHMuc3Vic2NyaWJlQW5kUHJvY2Vzc1F1ZXVlID0gZnVuY3Rpb24gKHF1ZXVlTmFtZSwgb3B0cykge1xuXHQgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgIHF1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuX1VTRVJfSUQgJiYgdmFsdWUpIHtcblx0ICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuXHQgICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9BTk9OWV9RVUVVRSwgb3B0cyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnX2hvbGQnICYmIHZhbHVlID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1dXG5cdCAgfSk7XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuXHQgIGlmIChpc09wZW5BcGkgJiYgYXBsdXNTdGF0aWMub3BlbkFQSXMuaW5kZXhPZihrZXkpID4gLTEpIHtcblx0ICAgIGtleSA9ICdfJyArIGtleTtcblx0ICB9XG5cdCAgcmV0dXJuIGtleTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gdGFza1xuXHQgKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuXHQgKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcblx0ICogfVxuXHQgKi9cblx0dmFyIHByb2Nlc3NUYXNrID0gZnVuY3Rpb24odGFzaywgb3B0cywgY2FsbGJhY2spIHtcblx0ICB2YXIgaXNPcGVuQXBpID0gISFvcHRzLmlzT3BlbkFwaTtcblx0ICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG5cdCAgdmFyIGFyZ3MgPSB0YXNrID8gdGFzay5hcmd1bWVudHMgOiAnJztcblx0XG5cdCAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG5cdCAgaWYgKCFyZXN1bHQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG5cdCAgdHJ5IHsgLy8g56Gu5L+d5p+Q5Liq5Lu75Yqh5omn6KGM5aSx6LSl5LiN5Lya5b2x5ZON5YW25a6D5Lu75YqhXG5cdCAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcblx0ICAgICAgdmFyIGEgPSBhY3Rpb24uc3BsaXQoJy4nKTtcblx0ICAgICAgdmFyIG9iaiA9IGNvbnRleHQ7XG5cdCAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuXHQgICAgICB2YXIgbWV0aG9kTmFtZTtcblx0ICAgICAgaWYgKGEubGVuZ3RoID09PSAzKSB7XG5cdCAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcblx0ICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhWzJdLCBpc09wZW5BcGkpO1xuXHQgICAgICAgIF9mbiA9IG9ialttZXRob2ROYW1lXSA/IG9ialttZXRob2ROYW1lXSA6ICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdoaWxlIChhLmxlbmd0aCkge1xuXHQgICAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYS5zaGlmdCgpLCBpc09wZW5BcGkpO1xuXHQgICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuXHQgICAgICAgICAgaWYgKCFvYmopIHsgLy8g6Z2e5rOVIGFjdGlvblxuXHQgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcblx0ICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcblx0ICAgICAgICBfZm4uYXBwbHkob2JqLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG5cdCAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGNhdGNoKGUpIHtcblx0ICAgIHVsb2coKS53KGUpO1xuXHQgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgLy8gICBtc2c6IGVcblx0ICAgIC8vIH0pO1xuXHQgIH1cblx0fTtcblx0ZXhwb3J0cy5wcm9jZXNzVGFzayA9IHByb2Nlc3NUYXNrO1xuXHRcblx0dmFyIGdldEZvcm1hdFF1ZXVlID0gZnVuY3Rpb24gKHF1ZXVlLCB0eXBlKSB7XG5cdCAgdmFyIHF1ZXVlTWFwID0ge1xuXHQgICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG5cdCAgICBzdWJzY3JpYmVNZXRhUXVldWU6IFtdLFxuXHQgICAgc3Vic2NyaWJlUXVldWU6IFtdLFxuXHQgICAgbWV0YVF1ZXVlOiBbXSxcblx0ICAgIG90aGVyc1F1ZXVlOiBbXVxuXHQgIH07XG5cdFxuXHQgIHZhciBxID0gW107XG5cdCAgdmFyIHRhc2sgPSB7fTtcblx0ICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcblx0ICAgIHRyeSB7XG5cdCAgICAgIHZhciBhYyA9IHRhc2suYWN0aW9uO1xuXHQgICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG5cdCAgICAgIGlmICgvc3Vic2NyaWJlLy50ZXN0KGFjKSkge1xuXHQgICAgICAgIGlmIChrZXkgPT09ICdzZXRNZXRhSW5mbycpIHtcblx0ICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBhcGx1c1N0YXRpYy5NV19DSEFOR0VfUFYgfHwga2V5ID09PSBhcGx1c1N0YXRpYy5NV19DSEFOR0VfSEpMSikge1xuXHQgICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZS5wdXNoKHRhc2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG5cdCAgICAgICAgcXVldWVNYXAubWV0YVF1ZXVlLnB1c2godGFzayk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB1bG9nKCkudyhlKTtcblx0ICAgICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuXHQgICAgICAvLyAgIG1zZzogZVxuXHQgICAgICAvLyB9KTtcblx0ICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGZvcm1hdFF1ZXVlO1xuXHQgIGlmICh0eXBlICYmIHF1ZXVlTWFwW3R5cGVdKSB7XG5cdCAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuXHQgICAgcXVldWVNYXBbdHlwZV0gPSBbXTtcblx0ICB9XG5cdCAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG5cdCAgcSA9IHEuY29uY2F0KHF1ZXVlTWFwLnN1YnNjcmliZVF1ZXVlKTtcblx0ICBxID0gcS5jb25jYXQocXVldWVNYXAuc3Vic2NyaWJlTWV0YVF1ZXVlLCBxdWV1ZU1hcC5vdGhlcnNRdWV1ZSk7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHF1ZXVlOiBxLFxuXHQgICAgZm9ybWF0UXVldWU6IGZvcm1hdFF1ZXVlXG5cdCAgfTtcblx0fTtcblx0ZXhwb3J0cy5nZXRGb3JtYXRRdWV1ZSA9IGdldEZvcm1hdFF1ZXVlO1xuXG5cbi8qKiovIH0pLFxuLyogOTYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKipcblx0ICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuXHQgKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG5cdCAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciB1dGlsR29sZGxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBhY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk1KTtcblx0XG5cdHZhciBRdWV1ZSA9IEJhc2UuZXh0ZW5kKHtcblx0ICBwdXNoOiBmdW5jdGlvbih0YXNrKSB7XG5cdCAgICB0aGlzLmxlbmd0aCsrO1xuXHQgICAgYWN0aW9uLnByb2Nlc3NUYXNrKHRhc2ssIHRoaXMub3B0cyk7ICBcblx0ICB9LFxuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgIHJldHVybiB7XG5cdCAgICBwcm9jZXNzQXBsdXNRdWV1ZTogZnVuY3Rpb24gKHF1ZXVlTmFtZSkge1xuXHQgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cdCAgICAgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuXHQgICAgICBhY3Rpb24ucHJvY2Vzc0dvbGRsb2dRdWV1ZShxdWUsIG9wdHMpO1xuXHQgICAgICB1dGlsR29sZGxvZy5zZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUsIFF1ZXVlLmNyZWF0ZSh7XG5cdCAgICAgICAgb3B0czogb3B0cywgXG5cdCAgICAgICAgc3RhcnRMZW5ndGg6IHF1ZS5sZW5ndGgsXG5cdCAgICAgICAgbGVuZ3RoOiAwXG5cdCAgICAgIH0pKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcGFyYW1zIHtTdHJpbmd9IHR5cGVcblx0ICAgICAqL1xuXHQgICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuXHQgICAgICB2YXIgQVBMVVNfUVVFVUUgPSBhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFO1xuXHRcblx0ICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZShBUExVU19RVUVVRSk7XG5cdFxuXHQgICAgICBpZiAoQVBMVVNfUVVFVUUgPT09ICdhcGx1c19xdWV1ZScpIHtcblx0ICAgICAgICB0aGlzLnByb2Nlc3NBcGx1c1F1ZXVlKCdnb2xkbG9nX3F1ZXVlJyk7XG5cdCAgICAgIH1cblx0ICAgICAgYWN0aW9uLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZShBUExVU19RVUVVRSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcbi8qIDk3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyoqXG5cdCAqIOWPi+ebn+S6keadoeS7tuS4i+eahOiHquWKqOS6i+S7tuaPkuS7tiAgICAgXG5cdCAqIFxuXHQgKiAgICAgIFxuXHQgKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuXHQgKiBcblx0ICogQXV0aG9yOiBcblx0ICogICAg6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG5cdCAqL1xuXHRcblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgRmV0Y2hDb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KTtcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHR2YXIgTUlOSV9WVF9DT05GSUdfRk9STUFUID0gJ01pbmlWdENvbmZpZ0Zvcm1hdCc7XG5cdHZhciB1dGlsVlQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMSk7XG5cdHZhciBQYWdlTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYpO1xuXHR2YXIgdWxvZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuXHRcblx0ZnVuY3Rpb24gYXV0b1RyYWNrZXIgKCkge1xuXHQgIHZhciByYl9jb25maWcsIHBkcl9jb25maWcsIHNoYXJlX2NvbmZpZztcblx0ICAvLyB2YXIgcHJlZml4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcblx0ICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cdCAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVNfUVVFVUUpO1xuXHQgIHZhciBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuXHQgIHZhciBfY3VycmVudFBhZ2UgPSB7XG5cdCAgICB0czogRGF0ZS5ub3coKVxuXHQgIH07XG5cdCAgdmFyIGNvdW50ID0ge1xuXHQgICAgJ29uUHVsbERvd25SZWZyZXNoJzogMCxcblx0ICAgICdvblNoYXJlVGltZWxpbmUnOiAwLFxuXHQgICAgJ29uUmVhY2hCb3R0b20nOiAwLFxuXHQgICAgJ29uU2hhcmVBcHBNZXNzYWdlJzogMCxcblx0ICAgICdvbkNsaWNrJzogMFxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGV2ZW50SGFuZGxlICgpIHtcblx0ICAgIHZhciBldmVudE5hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6ICcnO1xuXHQgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICAgIHZhciBjdXJyZW50UGFnZSA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG5cdCAgICAvLyB2YXIgcDtcblx0ICAgIFxuXHQgICAgc3dpdGNoIChldmVudE5hbWUpIHtcblx0ICAgIGNhc2UgJ29uUHVsbERvd25SZWZyZXNoJzpcblx0ICAgICAgY291bnQub25QdWxsRG93blJlZnJlc2ggKz0gMTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFtwZHJfY29uZmlnLmxvZ2tleSB8fCAnJCRfcHVsbF9kb3duX3JlZnJlc2gnLCAnQ0xLJywge1xuXHQgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcblx0ICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuXHQgICAgICAgICAgY291bnQ6IGNvdW50Lm9uUHVsbERvd25SZWZyZXNoXG5cdCAgICAgICAgfV1cblx0ICAgICAgfSk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgY2FzZSAnb25SZWFjaEJvdHRvbSc6XG5cdCAgICAgIGNvdW50Lm9uUmVhY2hCb3R0b20gKz0gMTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFtyYl9jb25maWcubG9na2V5IHx8ICckJF9yZWFjaF9ib3R0b20nLCAnQ0xLJywge1xuXHQgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcblx0ICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuXHQgICAgICAgICAgY291bnQ6IGNvdW50Lm9uUmVhY2hCb3R0b21cblx0ICAgICAgICB9XVxuXHQgICAgICB9KTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblNoYXJlQXBwTWVzc2FnZSc6XG5cdCAgICAgIGNvdW50Lm9uU2hhcmVBcHBNZXNzYWdlICs9IDE7XG5cdCAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuXHQgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG5cdCAgICAgICAgYXJndW1lbnRzOiBbc2hhcmVfY29uZmlnLmxvZ2tleSB8fCAnJCRfc2hhcmUnLCAnQ0xLJywge1xuXHQgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcblx0ICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuXHQgICAgICAgICAgY291bnQ6IGNvdW50Lm9uU2hhcmVBcHBNZXNzYWdlLFxuXHQgICAgICAgICAgc2hhcmVfdHlwZTogMVxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ29uU2hhcmVUaW1lbGluZSc6IFxuXHQgICAgICBjb3VudC5vblNoYXJlVGltZWxpbmUgKz0gMTtcblx0ICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcblx0ICAgICAgICBhcmd1bWVudHM6IFtzaGFyZV9jb25maWcubG9na2V5IHx8ICckJF9zaGFyZScsICdDTEsnLCB7XG5cdCAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuXHQgICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG5cdCAgICAgICAgICBjb3VudDogY291bnQub25TaGFyZVRpbWVsaW5lLFxuXHQgICAgICAgICAgc2hhcmVfdHlwZTogMFxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0pO1xuXHQgICAgICBicmVhaztcblx0ICAgIGNhc2UgJ29uUGFnZVNob3cnOlxuXHQgICAgICBpZiAocGFnZUluc3RhbmNlLnJvdXRlICYmICFfaGFzVHJhY2tlZCkge1xuXHQgICAgICAgIF9jdXJyZW50UGFnZSA9IHtcblx0ICAgICAgICAgIHBhdGg6IHBhZ2VJbnN0YW5jZS5yb3V0ZSxcblx0ICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUluc3RhbmNlLnJvdXRlLFxuXHQgICAgICAgIH07XG5cdCAgICAgICAgX2N1cnJlbnRQYWdlLnRzID0gRGF0ZS5ub3coKTtcblx0ICAgICAgICBfaGFzVHJhY2tlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBjYXNlICdvblBhZ2VIaWRlJzogIFxuXHQgICAgICBpZiAoX2hhc1RyYWNrZWQpIHtcblx0ICAgICAgICB2YXIgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gX2N1cnJlbnRQYWdlLnRzIHx8IDA7XG5cdCAgICAgICAgLy8g5Yqg6L295pe25py655qE6Zeu6aKY77yM5pS+5Zyo5q2k5aSE5Y+WcmVmZXJyZXLnm7jmr5Tkuo5taW5pYXBwX2RhdGHlh4bnoa5cblx0ICAgICAgICB2YXIgcmVmZXJyZXIgPSBtaW5pLmdldFJlZmVycmVyUGFnZSgpLnJvdXRlIHx8IG1pbmkuZ2V0UmVmZXJyZXJQYWdlKCkuaXMgfHwgJy0nO1xuXHQgICAgICAgIHZhciBleHRyYVBhcmFtcyA9IChQYWdlTWFuYWdlci5nZXRQYWdlTmFtZSgpIHx8IHt9KS5leHRyYVBhcmFtcztcblx0ICAgICAgICB2YXIgcHZhcmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZXh0cmFQYXJhbXMsIHtcblx0ICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbixcblx0ICAgICAgICAgIHBhdGg6IF9jdXJyZW50UGFnZS5wYXRoLFxuXHQgICAgICAgICAgcGFnZV9uYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IF9jdXJyZW50UGFnZS5wYWdlX25hbWUsXG5cdCAgICAgICAgICBwYWdlX3N0YXJ0OiBfY3VycmVudFBhZ2UudHMsXG5cdCAgICAgICAgICBpc01pbmk6IHRydWUsXG5cdCAgICAgICAgICBfcGFnZV9hdXRvX2lkOiBhcGx1c1N0YXRpYy5QQUdFX0VORCxcblx0ICAgICAgICAgIF9wYWdlX2F1dG9fcHY6IHRydWUsXG5cdCAgICAgICAgICByZWZlcnJlcjogcmVmZXJyZXIsXG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG5cdCAgICAgICAgICBhY3Rpb246IFwiYXBsdXMuc2VuZFBWXCIsXG5cdCAgICAgICAgICBhcmd1bWVudHM6IFt7IGlzX2F1dG86IHRydWUsIHRyYWNrX3R5cGU6IFwiMVwiIH0sIHB2YXJnc11cblx0ICAgICAgICB9KTtcblx0ICAgICAgICBfY3VycmVudFBhZ2UgPSBudWxsO1xuXHQgICAgICAgIF9oYXNUcmFja2VkID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgYnJlYWs7XG5cdCAgICBkZWZhdWx0OlxuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBnZXRDb25maWcgKCkge1xuXHQgICAgcmJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3JiX2NvbmZpZycpO1xuXHQgICAgcGRyX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwZHJfY29uZmlnJyk7XG5cdCAgICBzaGFyZV9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnc2hhcmVfY29uZmlnJyk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpIHtcblx0ICAgIGlmICghY29kZSB8fCAhYXBwSW5mb0lkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB0cnkgeyBcblx0ICAgICAgdmFyIGFwaV9ob3N0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWFwaS1ob3N0Jyk7XG5cdCAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuXHQgICAgICB2YXIgdmVyaWZ5X2hvc3QgPSBhcGlfaG9zdC5tYXRjaChyZWcpO1xuXHQgICAgICBcblx0ICAgICAgaWYgKHZlcmlmeV9ob3N0ICYmIHZlcmlmeV9ob3N0WzBdKSB7XG5cdCAgICAgICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG5cdCAgICAgICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh2ZXJpZnlfaG9zdFswXSkpIHtcblx0ICAgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6Jztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHZlcmlmeVVybCA9IHByb3RvY2FsICsgJy8vJyArIGFwaV9ob3N0KyAnL3Z0L2xvYWRUcmFuc2ZlckNvbmZpZz9jb2RlPScgKyBjb2RlICsgJyZhcHBJbmZvSWQ9JyArIGFwcEluZm9JZDtcblx0ICAgICAgICBtaW5pLnJlcXVlc3QodmVyaWZ5VXJsLCB7fSwgZnVuY3Rpb24ocmVzcCl7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICB2YXIgY2ZnRGF0YSA9IChyZXNwLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEgJiYgcmVzcC5kYXRhLmRhdGEuY29uZmlnKSB8fCAnJztcblx0ICAgICAgICAgICAgdmFyIGRlYnVnSWQgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmRlYnVnSWQpIHx8ICcnO1xuXHQgICAgICAgICAgICBpZihkZWJ1Z0lkKXtcblx0ICAgICAgICAgICAgICBhcGx1cy5hcHBlbmRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnLHtcblx0ICAgICAgICAgICAgICAgIGRlYnVnSWQ6ZGVidWdJZFxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG5cdCAgICAgICAgICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIF9iZWdpbkxvYWQ7XG5cdCAgICAgICAgICAgIGlmIChjZmdEYXRhKSB7XG5cdCAgICAgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IEpTT04ucGFyc2UoY2ZnRGF0YSkgfHwge307XG5cdCAgICAgICAgICAgICAgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgIHVsb2coKS53KCdmZXRjaCByZWFsLXRpbWUgdmlzdWFsaXphdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkLCBlcnIgbXNnOicgKyBlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZXJyb3IpIHtcblx0ICAgICAgXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBhcGx1c19xdWV1ZS5wdXNoKHtcblx0ICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuXHQgICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG5cdCAgICAgIGlmIChzdGF0dXMgPT09ICdjb21wbGV0ZScpIHtcblx0ICAgICAgICBnZXRDb25maWcoKTtcblx0ICAgICAgfVxuXHQgICAgfV1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25Mb2FkJywgZnVuY3Rpb24ob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHZhciBjb2RlID0gUGFnZU1hbmFnZXIuZ2V0VlRSZWFsdGltZUNvZGUoKTtcblx0ICAgICAgICBpZiAoY29kZSkge1xuXHQgICAgICAgICAgdmFyIGFwcEluZm9JZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJbmZvSWQnKTtcblx0ICAgICAgICAgIGZldGNoVmVyaWZ5Q29uZmlnKGNvZGUsIGFwcEluZm9JZCk7XG5cdCAgICAgICAgfSBlbHNlIHsgICAgICAgICAgXG5cdCAgICAgICAgICAhIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykgJiYgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgdWxvZygpLncoJ2ZldGNoIHJlYWwtdGltZSB2aXN1YWxpemF0aW9uIHZlcmlmaWNhdGlvbiBmYWlsZWQsIGVycm1zZzonICsgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25TaG93JywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgdmFyIGlzQXV0byA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtd2FpdGluZycpICE9PSAnTUFOJztcblx0ICAgICAgaXNBdXRvICYmIGV2ZW50SGFuZGxlKCdvblBhZ2VTaG93Jyk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uSGlkZScsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG5cdCAgICAgIGlzQXV0byAmJiBldmVudEhhbmRsZSgnb25QYWdlSGlkZScpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblB1bGxEb3duUmVmcmVzaCcsIGZ1bmN0aW9uIChvcHQpIHtcblx0ICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG5cdCAgICAgIGV2ZW50SGFuZGxlKCdvblB1bGxEb3duUmVmcmVzaCcpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblJlYWNoQm90dG9tJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgZXZlbnRIYW5kbGUoJ29uUmVhY2hCb3R0b20nKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25TaGFyZUFwcE1lc3NhZ2UnLCBmdW5jdGlvbiAob3B0KSB7XG5cdCAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuXHQgICAgICBldmVudEhhbmRsZSgnb25TaGFyZUFwcE1lc3NhZ2UnKTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25TaGFyZVRpbWVsaW5lJywgZnVuY3Rpb24gKG9wdCkge1xuXHQgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcblx0ICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVUaW1lbGluZScpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICBpZiAoISFhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpKSB7XG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBbTUlOSV9WVF9DT05GSUdfRk9STUFULCBmdW5jdGlvbihvcHRpb25zKXtcblx0ICAgICAgdmFyIHBhZ2VDb25maWcgPSBvcHRpb25zLnBhZ2VDb25maWc7XG5cdCAgICAgIGlmIChwYWdlQ29uZmlnICYmIHBhZ2VDb25maWcuZW5hYmxlZCkge1xuXHQgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSBwYWdlQ29uZmlnO1xuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgcmV0dXJuIHtcblx0ICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0ICAgICAgYXV0b1RyYWNrZXIoKTtcblx0ICAgICAgaWYgKCFhcGx1cy5fYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0KXtcblx0ICAgICAgICBhcGx1cy5fYXBsdXNfYWxlYWR5X2xvYWRfbWluaXZ0ID0gMTtcblx0ICAgICAgICB2YXIgZmMgPSBGZXRjaENvbmZpZy5jcmVhdGUoKTtcblx0ICAgICAgICBmYy5ydW4oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG4vKiA5OCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiDlj6/op4bljJbln4vngrnphY3nva7kv6Hmga/or7fmsYIgXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICBBYXJvbnzpkrDmmK0gPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0XG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBCYXNlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSk7XG5cdHZhciB1dGlsR1EgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkyKTtcblx0dmFyIHV0aWxDYXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oOTkpO1xuXHR2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdHZhciB1dGlsRGFzaCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMpO1xuXHR2YXIgbWluaXZ0U3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMCk7XG5cdC8vIHZhciB1dGlsVXJsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVcmwnKTtcblx0dmFyIGFwbHVzU3RhdGljID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0Ly8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cdHZhciBNSU5JX1ZUX0NPTkZJR19CQUNLID0gJ01pbmlWdENvbmZpZ0JhY2snO1xuXHR2YXIgTUlOSV9WVF9DT05GSUdfRk9STUFUID0gJ01pbmlWdENvbmZpZ0Zvcm1hdCc7XG5cdFxuXHR2YXIgR09MRExPR19QVUJMSVNIID0gYXBsdXNTdGF0aWMuUFVCTElTSDtcblx0Ly8gcHJvZDogaHR0cHM6Ly9hbGlkdC5hbGljZG4uY29tL2FsaWxvZy92dGRhaWx5LyR7Y29tcG9uZW50SUR9Lmpzb25cblx0Ly8gaHR0cHM6Ly9kLmFsaWNkbi5jb20vYWxpbG9nL3Z0L2ExejFkMV8xMjI3OTkxNC5qc29uXG5cdC8vIHZhciBIT1NUID0gJy8vZy5hbGljZG4uY29tL2FsaWxvZyc7XG5cdC8vIHZhciBIT1NUID0gJy8vZC5hbGljZG4uY29tL2FsaWxvZyc7XG5cdFxuXHQvLyBmdW5jdGlvbiBpc0RhaWx5ICgpIHtcblx0Ly8gICB2YXIgcnMgPSBmYWxzZTtcblx0Ly8gICBpZiAoYXBsdXMgJiYgYXBsdXMuYXBsdXNEZWJ1Zykge1xuXHQvLyAgICAgcmV0dXJuIHRydWU7XG5cdC8vICAgfVxuXHQvLyAgIHJldHVybiBycztcblx0Ly8gfVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBCYXNlLmV4dGVuZCh1dGlsRGFzaC5hc3NpZ24obWluaXZ0U3RvcmUsIHtcblx0XG5cdCAgcGF0aG5hbWU6ICcnLFxuXHRcblx0ICBwYWdlQ29uZmlnOiB7fSxcblx0XG5cdCAgb3JpZ2luU3BtOiB7XG5cdCAgICBzcG1BOiAnJyxcblx0ICAgIHNwbUI6ICcnXG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlQ2ZnTHM6IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0ICAgICAgX3NlbGYuZmV0Y2hGcm9tQ2RuKCk7XG5cdCAgICB9LDEwMDApO1xuXHQgIH0sXG5cdFxuXHQgIGZldGNoRnJvbUNkbjogZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIHBhdGggPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpO1xuXHQgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cdCAgICB2YXIgX2JlZ2luTG9hZCA9IChuZXcgRGF0ZSkuZ2V0VGltZSgpO1xuXHQgICAgYXBsdXMucmVxdWVzdFZUQ29uZmlnKHBhdGgsIGZ1bmN0aW9uKHJlc3ApIHtcblx0ICAgICAgdmFyIGNmZ0RhdGEgPSByZXNwLmRhdGE7XG5cdCAgICAgIGFwbHVzLl9taW5pY2ZnX2xvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKSAtIF9iZWdpbkxvYWQ7XG5cdCAgICAgIGlmIChjZmdEYXRhKSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB0eXBlb2YgY2ZnRGF0YSA9PT0gJ29iamVjdCcgPyBjZmdEYXRhIDogSlNPTi5wYXJzZShjZmdEYXRhKTtcblx0ICAgICAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnLnBvaW50cykge1xuXHQgICAgICAgICAgICBlYWNoKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICAgIHYuc2VsZWN0b3IgPSBkZWNvZGVVUklDb21wb25lbnQodi5zZWxlY3Rvcik7XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgX3NlbGYuc2V0Q29uZmlnSW50b0xzKGFwbHVzLl9hcGx1c192dF9jZmcpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB7XG5cdCAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlXG5cdCAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19QVUJMSVNILCBbTUlOSV9WVF9DT05GSUdfQkFDSywge3BhZ2VDb25maWc6YXBsdXMuX2FwbHVzX3Z0X2NmZywgZW5hYmxlOiAwfV0pO1xuXHQgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cdCAgICAgIGlmIChhcGx1cy5fYXBsdXNfdnRfY2ZnICYmIGFwbHVzLl9hcGx1c192dF9jZmcuZW5hYmxlZCkge1xuXHQgICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7ICBcblx0ICAgICAgfVxuXHQgICAgICB1dGlsQ2F0Y2guY2F0Y2hFeGNlcHRpb24oJ2dldFRyYWNrZXJDZmcnLCBlcnJvciwge1xuXHQgICAgICAgIG1zZzogcGF0aFxuXHQgICAgICB9KTtcblx0ICAgIH0sIHtcblx0ICAgICAgdGltZW91dDogNTAwMFxuXHQgICAgfSk7XG5cdCAgfSxcblx0XG5cdCAgZ2V0TWluaVZ0RGF0YTogZnVuY3Rpb24oY2RucGF0aCwgcHJlVXJsLCBmcm9tQ0ROKXtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgYXBsdXMuX21pbmljZmdfbG9hZCA9IDA7XG5cdCAgICBpZiAoY2RucGF0aCkge1xuXHQgICAgICB2YXIgdnRDb25maWcgPSB0aGlzLmZldGNoRnJvbUxTKGNkbnBhdGgpO1xuXHQgICAgICBpZih0eXBlb2YgdnRDb25maWcgPT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0cnl7XG5cdCAgICAgICAgICB2dENvbmZpZyA9IEpTT04ucGFyc2UodnRDb25maWcpO1xuXHQgICAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgICAgdnRDb25maWcgPSB7fTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh2dENvbmZpZyAmJiB2dENvbmZpZy5lbmFibGVkKSB7XG5cdCAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHZ0Q29uZmlnO1xuXHQgICAgICB9XG5cdCAgICAgIGlmKCAhZnJvbUNETikge1xuXHQgICAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzp2dENvbmZpZywgZW5hYmxlOiAwfV0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuZmV0Y2hGcm9tQ2RuKGNkbnBhdGgsIHByZVVybCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnRfZGFpbHkvYTF6MWQxXzEyMjc5OTE0Lmpzb25cblx0ICBzeW5jTWluaVZ0RGF0YTogZnVuY3Rpb24oKXtcblx0ICAgIC8vc3Vic2NyaWJlICB3cy5yZWFkeVxuXHQgICAgdmFyIGNkbnBhdGggPSB0aGlzLmdldFZ0Q29uZmlnUGF0aCgpO1xuXHQgICAgdGhpcy5nZXRNaW5pVnREYXRhKGNkbnBhdGgsICcnLCB0cnVlKTtcblx0ICB9LFxuXHRcblx0ICBpbml0OiBmdW5jdGlvbigpe1xuXHQgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgIFxuXHQgICAgdmFyIEdPTERMT0dfU1VCU0NSSUJFID0gYXBsdXNTdGF0aWMuU1VCU0NSSUJFO1xuXHQgICAgLy90aGlzIGV2ZW50IGZyb20gTFMgb3IgZnJvbSBXUyB0byBnZXQgY29uZmlnXG5cdCAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcblx0ICAgICAgaWYoIW9yaURhdGFzLmVuYWJsZSkge1xuXHQgICAgICAgIF9zZWxmLnBhZ2VDb25maWcgPSBvcmlEYXRhcy5wYWdlQ29uZmlnO1xuXHQgICAgICB9XG5cdCAgICAgIC8vdGhpcyBldmVudCB0byB1c2U7XG5cdCAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIHtcblx0ICAgICAgICBwYWdlQ29uZmlnOiBfc2VsZi5wYWdlQ29uZmlnLFxuXHQgICAgICAgIG9yaWdpblNwbTogX3NlbGYub3JpZ2luU3BtXG5cdCAgICAgIH1dKTtcblx0ICAgICAgIW9yaURhdGFzLmVuYWJsZSAmJiBfc2VsZi5zZXRDb25maWdJbnRvTHMoX3NlbGYucGFnZUNvbmZpZyk7XG5cdCAgICB9XSk7XG5cdCAgICBfc2VsZi5zeW5jTWluaVZ0RGF0YSgpO1xuXHQgIH0sXG5cdFxuXHQgIHJ1bjogZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5pbml0KCk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9XG5cdH0pKTtcblxuXG4vKioqLyB9KSxcbi8qIDk5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxHUSA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpO1xuXHRcblx0ZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGZ1bmN0aW9uIChmaWxlbmFtZSwgZXJyb3IpIHtcblx0ICB2YXIgbWVzc2FnZSA9IGZpbGVuYW1lO1xuXHQgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmIGVycm9yLm1lc3NhZ2UpIHtcblx0ICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgJ18nICsgZXJyb3IubWVzc2FnZTtcblx0ICB9XG5cdCAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKCdhcGx1cy5fYXBsdXNfY3BsdWdpbl9tLmRvX3RyYWNrZXJfanNlcnJvcicsIFt7XG5cdCAgICBtZXNzYWdlOiBtZXNzYWdlLFxuXHQgICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KGVycm9yKSxcblx0ICAgIGZpbGVuYW1lOiBmaWxlbmFtZVxuXHQgIH1dKTtcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuXHQvKipcblx0ICogcHJvamVjdCAtIGZpbGVwYXRoXG5cdCogZGVzY3JpcHRpb25cblx0KlxuXHQqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0KlxuXHQqIEF1dGhvcnM6XG5cdCogICBBYXJvbiB8IOmSsOaYrSA8Y2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tPlxuXHQqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHR2YXIgdXRpbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBsc01pbml2dENvbmZpZ0tleTogJ0FQTFVTX01JTklfQ09ORklHJyxcblx0XG5cdCAgLyoqXG5cdCAgICog5YWs5YWx5qih5p2/5Zy65pmv77yM5aaC5p6cdHVybm9uPT09JzEnIOaLieWPlnZhbHVl5YaF55qE5YaF5a65XG5cdCAgICogbWV0YUluZm86IHtcblx0ICAgKiAgJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCc6IHtcblx0ICAgKiAgICAndmFsdWUnOiAncGFDd1psRzJXdjdsbGhobScsXG5cdCAgICogICAgJ3R1cm5vbic6ICcwJyBvciAnMScgICBcblx0ICAgKiAgfVxuXHQgICAqIH1cblx0ICAgKi9cblx0ICBnZXRNaW5pVnRUcGxDZG5QYXRoOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXHQgICAgdmFyIGFwbHVzVHJhY2tDb25maWdJZEluZm8gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdHJhY2stY29uZmlnLWlkJyk7XG5cdCAgICB2YXIgdHVybm9uID0gYXBsdXNUcmFja0NvbmZpZ0lkSW5mbyAmJiBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvLnR1cm5vbjtcblx0ICAgIHZhciB2YWx1ZSA9IGFwbHVzVHJhY2tDb25maWdJZEluZm8gJiYgYXBsdXNUcmFja0NvbmZpZ0lkSW5mby52YWx1ZTtcblx0ICAgIGlmICh0dXJub24gPT09ICcxJyAmJiB2YWx1ZSkge1xuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gJyc7XG5cdCAgfSxcblx0XG5cdCAgZ2V0VnRDb25maWdQYXRoOiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciB0ZW1wbGF0ZVZhbCA9IHRoaXMuZ2V0TWluaVZ0VHBsQ2RuUGF0aCgpO1xuXHQgICAgdmFyIHNwbUFCID0gW107XG5cdCAgICB2YXIgc3BtSWQ7XG5cdCAgICB2YXIgYXBwa2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcblx0ICAgIGlmIChhcHBrZXkpIHtcblx0ICAgICAgc3BtSWQgPSBhcHBrZXk7XG5cdCAgICB9XG5cdCAgICBcblx0ICAgIGlmIChzcG1JZCkge1xuXHQgICAgICBzcG1BQiA9IHNwbUlkLnNwbGl0KCcuJyk7XG5cdCAgICB9IFxuXHQgICAgLy8gcmVtb3ZlIGVsc2UgbG9naWMgaW5zaWRlIHdlYnZ0U3RvcmUsIGJlY2F1c2UgbWluaV9jbG91ZCBkb250IHN1cHBvcnQgc3BtXG5cdCAgICBpZiAoc3BtQUIubGVuZ3RoID09PSAyKSB7XG5cdCAgICAgIHRoaXMub3JpZ2luU3BtID0ge1xuXHQgICAgICAgIHNwbUE6IHNwbUFCWzBdLFxuXHQgICAgICAgIHNwbUI6IHNwbUFCWzFdXG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2UgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICB0aGlzLm9yaWdpblNwbS5zcG1BID0gc3BtQUJbMF07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHRlbXBsYXRlVmFsKSB7XG5cdCAgICAgIHJldHVybiB0ZW1wbGF0ZVZhbDtcblx0ICAgIH1cblx0ICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcblx0ICAgICAgcmV0dXJuIHNwbUFCLmpvaW4oJ18nKTtcblx0ICAgIH0gZWxzZSBpZiAoc3BtQUIubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIHJldHVybiBzcG1BQlswXTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBmZXRjaEZyb21MUzogZnVuY3Rpb24gKGNkbnBhdGgpIHtcblx0ICAgIGlmICghdGhpcy5jZG5wYXRoKSB7XG5cdCAgICAgIHRoaXMuY2RucGF0aCA9IGNkbnBhdGggfHwgdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG5cdCAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGN0eC5nZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgY2RucGF0aCkpIHx8IHt9O1xuXHQgIH0sXG5cdFxuXHQgIHNldENvbmZpZ0ludG9MczogZnVuY3Rpb24oY29uZmlnKSB7XG5cdCAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuXHQgICAgICB0aGlzLmNkbnBhdGggPSB0aGlzLmdldFZ0Q29uZmlnUGF0aCgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuXHQgICAgY3R4LnNldFN0b3JhZ2VTeW5jKHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyB0aGlzLmNkbnBhdGgsIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb25maWcpKSk7XG5cdCAgICAvLyB1dGlsU3RvcmUuc2V0KHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyB0aGlzLmNkbnBhdGgsIGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjb25maWcpKSk7XG5cdCAgfVxuXHRcblx0fTtcblxuLyoqKi8gfSksXG4vKiAxMDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKlxuXHQgKiBGaWxlOiB1dGlsVlQuanNcblx0ICog5Y+v6KeG5YyW6YWN572uIOino+aekOmFjee9ruS/oeaBr+S4uuiHquWKqOeCueWHu+OAgeiHquWKqOabneWFieOAgeiHquWKqHB25YWs5YWx5Ye95pWwXG5cdCAqIFByb2plY3Q6IEBhbGkvYXBsdXNcblx0ICogICAgICBcblx0ICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcblx0ICogICAgICBcblx0ICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICovXG5cdFxuXHQndXNlIHN0cmljdCc7XG5cdHZhciBtaW5pID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0dmFyIHV0aWxBcnJheSAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY0KTtcblx0dmFyIHV0aWxHb2xkbG9nID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0dmFyIGVhY2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuXHR2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcblx0dmFyIFBhZ2VNYW5hZ2VyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHRleHBvcnRzLmdldEN1cnJlbnRQYWdlVlRDZmcgPSBmdW5jdGlvbigpIHtcblx0ICB2YXIgdnRDZmcgPSBhcGx1cy5fYXBsdXNfdnRfY2ZnO1xuXHQgIGlmICghdnRDZmcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHBhdGggPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblx0XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCB2dENmZy5wYWdlcy5sZW5ndGg7IGkrKyApe1xuXHQgICAgdmFyIHBhZ2VDb25maWcgPSB2dENmZy5wYWdlc1tpXTtcblx0ICAgIGlmIChwYWdlQ29uZmlnLm1hdGNoVXJsID09PSBwYXRoKSB7XG5cdCAgICAgIHJldHVybiBwYWdlQ29uZmlnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgcmV0dXJuO1xuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBdXRvQ2ZncyAoY2ZnMSxjZmcyKXtcblx0ICBjZmcxID0gdXRpbEFycmF5LmlzQXJyYXkoY2ZnMSk/Y2ZnMSA6IFtdO1xuXHQgIGNmZzIgPSB1dGlsQXJyYXkuaXNBcnJheShjZmcyKT9jZmcyIDogW107XG5cdCAgdmFyIHRvdGFsQXV0b0NmZ3MgPSBbXS5jb25jYXQoY2ZnMixjZmcxKTtcblx0ICBmdW5jdGlvbiBnZXRJbmRleCAoaXRlbSxhcnIpe1xuXHQgICAgdmFyIGluZGV4ID0gLTE7XG5cdCAgICBmb3IodmFyIGkgPSAwOyBpPGFyci5sZW5ndGg7IGkrKyl7XG5cdCAgICAgIHZhciBjdXJyZW50ID0gYXJyW2ldO1xuXHQgICAgICBpZihjdXJyZW50LmNzc1NlbGVjdG9yPT09aXRlbS5jc3NTZWxlY3RvciYmY3VycmVudC5sb2drZXk9PT1pdGVtLmxvZ2tleSl7XG5cdCAgICAgICAgaW5kZXggPSBpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaW5kZXg7XG5cdCAgfVxuXHQgIHZhciBmaW5hbEF1dG9DZmdzID0gdG90YWxBdXRvQ2Zncy5maWx0ZXIoZnVuY3Rpb24oaXRlbSxpbmRleCxhcnJheSl7XG5cdCAgICByZXR1cm4gZ2V0SW5kZXgoaXRlbSxhcnJheSkgPT09IGluZGV4O1xuXHQgIH0pO1xuXHQgIHJldHVybiBmaW5hbEF1dG9DZmdzO1xuXHR9XG5cdGZ1bmN0aW9uIHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGNvbmZpZ3Mpe1xuXHQgIGlmKCB1dGlsQXJyYXkuaXNBcnJheShjb25maWdzKSl7XG5cdCAgICByZXR1cm4gY29uZmlncy5maWx0ZXIoZnVuY3Rpb24oY29uZmlnKXtcblx0ICAgICAgcmV0dXJuIGNvbmZpZy5fdnQgPT09IHZvaWQgMDtcblx0ICAgIH0pO1xuXHQgIH1cblx0ICByZXR1cm4gW107XG5cdH1cblx0ZnVuY3Rpb24gZm9ybWF0U2VsZWN0b3Ioc2VsZWN0b3Ipe1xuXHQgIGlmKC9eWy4jXS8udGVzdChzZWxlY3Rvcikpe1xuXHQgICAgcmV0dXJuIHNlbGVjdG9yO1xuXHQgIH1lbHNle1xuXHQgICAgcmV0dXJuIHNlbGVjdG9yID8gJy4nICsgc2VsZWN0b3IgOiAnJztcblx0ICB9XG5cdH1cblx0ZnVuY3Rpb24gZ2V0VHJhY2tDb25maWdCeVBhdGgocGF0aCl7XG5cdCAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcblx0ICB2YXIgZmluYWxQYXRoID0gcGF0aCB8fCBwYWdlSW5zdGFuY2Uucm91dGU7XG5cdCAgdmFyIGZ1bGxMb3dDb2RlQ29uZmlnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZyB8fCBhcGx1cy5fYXBsdXNfdHJhY2tpbmdfY2ZnO1xuXHQgIHZhciBhdXRvRXhwQXJyID0gW107XG5cdCAgdmFyIGF1dG9DbGtBcnIgPSBbXTtcblx0ICBpZiAoZnVsbExvd0NvZGVDb25maWcgJiYgZnVsbExvd0NvZGVDb25maWcucGFnZXMpe1xuXHQgICAgZWFjaChmdWxsTG93Q29kZUNvbmZpZy5wYWdlcywgZnVuY3Rpb24ocGMpIHtcblx0ICAgICAgYXBsdXMuc2V0UGFnZU5hbWUoeyBwYWdlTmFtZTogcGMuc3BtQiwgZXh0cmFQYXJhbXM6IHBjLmV4dHJhUGFyYW1zIH0sIHBjLm1hdGNoVXJsKTtcblx0ICAgICAgaWYgKHBjLm1hdGNoVXJsID09PSBmaW5hbFBhdGgpIHtcblx0ICAgICAgICBlYWNoKGZ1bGxMb3dDb2RlQ29uZmlnLnBvaW50cywgZnVuY3Rpb24ocCl7XG5cdCAgICAgICAgICBpZiAocGMuc3BtQiA9PT0gcC5zcG1CKSB7XG5cdCAgICAgICAgICAgIGlmIChwLnRyYWNrZXJUeXBlID09PSBcImV4cG9zdXJlXCIpIHsgXG5cdCAgICAgICAgICAgICAgYXV0b0V4cEFyci5wdXNoKHtcblx0ICAgICAgICAgICAgICAgICdjc3NTZWxlY3Rvcic6IGZvcm1hdFNlbGVjdG9yKHAuc2VsZWN0b3IpLFxuXHQgICAgICAgICAgICAgICAgJ3Bvc2l0aW9uU2VsZWN0b3InOiBwLnBvc2l0aW9uU2VsZWN0b3IsXG5cdCAgICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG5cdCAgICAgICAgICAgICAgICAncHJvcHMnOiBwLnByb3BzLFxuXHQgICAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG5cdCAgICAgICAgICAgICAgICAnc3BtQyc6IHAuc3BtQyxcblx0ICAgICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuXHQgICAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG5cdCAgICAgICAgICAgICAgICAnX3Z0JzogcGMudGVtcGxhdGUgfHwgcGMuc3RkSWQgPyAyIDogMVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGF1dG9DbGtBcnIucHVzaCh7XG5cdCAgICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBmb3JtYXRTZWxlY3RvcihwLnNlbGVjdG9yKSxcblx0ICAgICAgICAgICAgICAgICdsb2drZXknOiBwLmxvZ2tleSxcblx0ICAgICAgICAgICAgICAgICdwcm9wcyc6IHAucHJvcHMsIFxuXHQgICAgICAgICAgICAgICAgJ3NwbUInOiBwLnNwbUIsXG5cdCAgICAgICAgICAgICAgICAnc3BtQyc6IHAuc3BtQyxcblx0ICAgICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuXHQgICAgICAgICAgICAgICAgJ2N1c3RvbUFyZ3MnOiBwLmN1c3RvbUFyZ3MsXG5cdCAgICAgICAgICAgICAgICAnX3Z0JzogcGMudGVtcGxhdGUgfHwgcGMuc3RkSWQgPyAyIDogMVxuXHQgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgXG5cdCAgICAgICAgaWYgKGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEgJiYgdHlwZW9mIGZ1bGxMb3dDb2RlQ29uZmlnLmNvbW1vbl9leGRhdGEgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJywgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX2V4ZGF0YSk7XG5cdCAgICAgICAgfVxuXHQgIFxuXHQgICAgICAgIGlmIChmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fcHZkYXRhICYmIHR5cGVvZiBmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fcHZkYXRhID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgICAgYXBsdXMuc2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnLCBmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fcHZkYXRhKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gICAgICBcblx0ICAgIH0pO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgRVhQOiBhdXRvRXhwQXJyLFxuXHQgICAgQ0xLOiBhdXRvQ2xrQXJyXG5cdCAgfTtcblx0fTtcblx0ZXhwb3J0cy5nZXRUcmFja0NvbmZpZ0J5UGF0aCA9IGdldFRyYWNrQ29uZmlnQnlQYXRoO1xuXHRleHBvcnRzLmdldFRyYWNrQ29uZmlnQnlQb2ludENzc1NlbGVjdG9yID0gZnVuY3Rpb24oY3NzU2VsZWN0b3IsdHlwZSxwYXRoKXtcblx0ICB2YXIgdHJhY2tDb25maWcgPSBnZXRUcmFja0NvbmZpZ0J5UGF0aChwYXRoKVt0eXBlXSB8fCBbXTtcblx0ICB2YXIgbWF0Y2hlZENvbmZpZyA9IG51bGw7XG5cdCAgZWFjaCh0cmFja0NvbmZpZyxmdW5jdGlvbihjb25maWdJdGVtKXtcblx0ICAgIGlmKGNvbmZpZ0l0ZW0uY3NzU2VsZWN0b3IgPT09IGNzc1NlbGVjdG9yKXtcblx0ICAgICAgbWF0Y2hlZENvbmZpZyA9IGNvbmZpZ0l0ZW07XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIG1hdGNoZWRDb25maWc7XG5cdH07XG5cdGV4cG9ydHMudnQyYXV0b0V2ZW50ID0gZnVuY3Rpb24oKSB7XG5cdCAgdmFyIHZ0X2NmZyA9IGFwbHVzLl9hcGx1c192dF9jZmcgfHwgYXBsdXMuX2FwbHVzX3RyYWNraW5nX2NmZztcblx0ICBpZiAodnRfY2ZnICYmIHZ0X2NmZy5wYWdlcyl7XG5cdCAgICB2YXIgbWF0Y2hlZENvbmZpZyA9IGdldFRyYWNrQ29uZmlnQnlQYXRoKCk7XG5cdCAgICB2YXIgb2xkX2F1dG9fZXhwX2FyciA9IHJlbW92ZUF1dG9DZmdzRnJvbVZ0KGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcpKTtcblx0ICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcsIG1lcmdlQXV0b0NmZ3Mob2xkX2F1dG9fZXhwX2FycixtYXRjaGVkQ29uZmlnLkVYUCkpO1xuXHQgICAgdmFyIG9sZF9hdXRvX2Nsa19hcnIgPSByZW1vdmVBdXRvQ2Znc0Zyb21WdChhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnKSk7XG5cdCAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtYXV0by1jbGsnLCBtZXJnZUF1dG9DZmdzKG9sZF9hdXRvX2Nsa19hcnIsbWF0Y2hlZENvbmZpZy5DTEspKTtcblx0ICB9XG5cdH07XG5cdFxuXG5cbi8qKiovIH0pLFxuLyogMTAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cblx0LyoqXG5cdCAqIGFwbHVzX21pbmlfYmFzaWNcblx0ICog5bCP56iL5bqP5qih5Z2X5YyW55qEYXBsdXNKc+WFpeWPo1xuXHQgKlxuXHQgKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG5cdCAqXG5cdCAqIEF1dGhvcnM6XG5cdCAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFwcENvbmZpZyxhcGx1c19jb25maWcpIHtcblx0ICB2YXIgdXRpbEdvbGRsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHQgIC8vIHJlcXVpcmUoJ0B1dGlscy9kZWJ1ZycpLmlzRGVidWdBcGx1cyh0cnVlKTtcblx0XG5cdCAgdmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0ICAvLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG5cdCAgdmFyIHVsb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcblx0ICB2YXIgZWFjaCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdCAgdmFyIG1pbmkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXHQgIHZhciBhcGx1c2luaXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwMyk7XG5cdCAgbWluaS5pbml0SXNUQigpO1xuXHRcblx0ICBpZiAodHlwZW9mIGFwcENvbmZpZyA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGlmIChhcHBDb25maWcuc2l0ZUlkKSB7XG5cdCAgICAgIGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuc2l0ZUlkID0gYXBwQ29uZmlnLnNpdGVJZDtcblx0ICAgIH1cblx0ICAgIGFwbHVzX2NvbmZpZy5tZXRhSW5mbyA9IE9iamVjdC5hc3NpZ24oe30sIGFwbHVzX2NvbmZpZy5tZXRhSW5mbywgYXBwQ29uZmlnLm1ldGFJbmZvKTtcblx0ICB9XG5cdFxuXHQgIHZhciBSVU5OSU5HID0gJ3J1bm5pbmcnO1xuXHQgIHZhciBDT01QTEVURSA9ICdjb21wbGV0ZSc7XG5cdCAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG5cdFxuXHQgIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuXHRcblx0ICBhcGx1c2luaXQucnVuKHtcblx0ICAgIHBsdWdpbnM6IGFwbHVzX2NvbmZpZy5wbHVnaW5zLFxuXHQgICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgY29uZmlnX3B2X2NvbnRleHQgPSB7XG5cdCAgICAgICAgUEFHRV9MT0FEX1RJTUU6IG5ldyBEYXRlKClcblx0ICAgICAgfTtcblx0ICAgICAgdmFyIFBMVUdJTlNfUFYgPSBbXTtcblx0ICAgICAgZWFjaChhcGx1c19jb25maWcucGx1Z2lucywgZnVuY3Rpb24gKHYpIHtcblx0ICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG5cdCAgICAgICAgaWYgKHYubmFtZSA9PT0gJ2FwbHVzX2xvZ19pbmplY3QnICYmIHYuY29uZmlnICYmIHYuY29uZmlnLnBsdWdpbnMpIHtcblx0ICAgICAgICAgIFBMVUdJTlNfUFYgPSB2LmNvbmZpZy5wbHVnaW5zLnB2O1xuXHQgICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuXHQgICAgICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnX3B2X2NvbnRleHQsIHtcblx0ICAgICAgICBhcGx1c19jb25maWc6IGFwbHVzX2NvbmZpZ1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCBmdW5jdGlvbiAoKSB7XG5cdCAgICB1bG9nKCkudignQVBMVVMgSU5JVCBTVUNDRVNTJyk7XG5cdCAgICAvLyBhcGx1c+WHhuWkh+WlveS6hu+8jOWIhuWPkeS4gOS4qnJlYWR55LqL5Lu2XG5cdCAgICBhcGx1c1N0YXR1c1sxXSA9IENPTVBMRVRFO1xuXHQgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cdCAgfSk7XG5cdFxuXHQgIC8vIHJldHVybiB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c19jb25maWcuZ2xvYmFsQ29uZmlnLkFQTFVTX1FVRVVFKTtcblx0ICByZXR1cm4gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuXHR9O1xuXHRcblxuXG4vKioqLyB9KSxcbi8qIDEwMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qKlxuXHQgKiBwcm9qZWN0IC0gZmlsZXBhdGhcblx0ICogYXBsdXMgQVBJXG5cdCAqXG5cdCAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cblx0ICpcblx0ICogQXV0aG9yczpcblx0ICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFJlZHVjZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblx0dmFyIGlzRnVuY3Rpb24gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblx0dmFyIHV0aWxQdWJzdWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KTtcblx0XG5cdC8qKlxuXHQgKiDlsIblkI7nu63nmoRpbml05Yqo5L2c6YO95YGa5oiQ5o+S5Lu277yM55uu5YmN5Y+q5pyJd2hlcmVfdG9fc2VuZHB25LiA6aG5XG5cdCAqXG5cdCAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG5cdCAqICAgcGx1Z2luc1xuXHQgKiAgIGNvbnRleHRcblx0ICogfVxuXHQgKiBAcGFyYW1zIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICpcblx0ICovXG5cdGV4cG9ydHMucnVuID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG5cdCAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuXHQgIHJlZHVjZXIucnVuKHtcblx0ICAgIHBsdWdpbnM6IG9wdHMucGx1Z2lucyxcblx0ICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuXHQgIH0sIHtcblx0ICAgIGNvbmZpZzoge30sXG5cdCAgICB1c2VyZGF0YToge30sXG5cdCAgICBwdWJzdWJUeXBlOiAnYXBsdXNpbml0Jyxcblx0ICAgIG1lc3NhZ2VGblF1ZXVlOiBbXSxcblx0ICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcblx0ICB9LCBmdW5jdGlvbiAoY3R4KSB7XG5cdCAgICB2YXIgbXNncyA9IFsnYXBsdXNJbml0Q29udGV4dCcsIGN0eF07XG5cdCAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuXHQgICAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dzKTtcblx0ICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuXHQgICAgICBjYWxsYmFjayhjdHgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKVxufSk7XG47XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwbHVzX21pbmlfY2xvdWRfdW0uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBjZWQ4NWIyNDA2MzEwNmUyMWY0ZSIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIGFwbHVzX21pbmlfY2xvdWQuanNcbiAqIOS6keS4iuWwj+eoi+W6j+aooeWdl+WMlueahGFwbHVzSnPlhaXlj6NcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6b6Z6am5IDxjaGVuZ3BpbmcucmNwQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xucmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuaW5pdEdsb2JhbCgpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnKSB7XG4gIHZhciBhcGx1c19jb25maWcgPSByZXF1aXJlKCcuL2FwbHVzX21pbmlfY2xvdWRfdW1fY29uZmlnJyk7IFxuICByZXR1cm4gcmVxdWlyZSgnLi9hcGx1c19taW5pX2Jhc2ljJykoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bS5qc1xuLy8gbW9kdWxlIGlkID0gMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5pON5L2cYXBsdXPnmoTlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcblxudmFyIEFQTFVTID0gYXBsdXNTdGF0aWMuQVBMVVM7XG52YXIgQVBMVVNfUVVFVUUgPSBhcGx1c1N0YXRpYy5BUExVU19RVUVVRTtcblxudmFyIEdPTERMT0cgPSBhcGx1c1N0YXRpYy5HT0xETE9HO1xudmFyIEdPTERMT0dfUVVFVUUgPSBhcGx1c1N0YXRpYy5HT0xETE9HX1FVRVVFO1xuXG52YXIgX2FwbHVzX2NvbnRleHQ7XG52YXIgaXNXZWIgPSBmYWxzZTtcbnRyeSB7XG4gIGlmICh3aW5kb3cpIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHdpbmRvdztcbiAgICBpc1dlYiA9IHRydWU7XG4gIH1cbn0gY2F0Y2ggKGUpIHtcbiAgX2FwbHVzX2NvbnRleHQgPSB7fTtcbiAgaXNXZWIgPSBmYWxzZTtcbn1cblxuZXhwb3J0cy5nZXRDb250ZXh0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gX2FwbHVzX2NvbnRleHQ7XG59O1xuXG5leHBvcnRzLmlzV2ViID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB3aW5kb3c7XG59O1xuXG5leHBvcnRzLmluaXRHbG9iYWwgPSBmdW5jdGlvbiAoY29udGV4dCkge1xuICBpZiAoY29udGV4dCkge1xuICAgIF9hcGx1c19jb250ZXh0ID0gY29udGV4dDtcbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNfY29udGV4dCA9IHtcbiAgICAgIHY6IDEsXG4gICAgICBhcGx1czoge30sXG4gICAgICBhcGx1c19xdWV1ZTogW11cbiAgICB9O1xuICB9XG4gIHZhciBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIHZhciBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZTtcbiAgaWYgKGlzV2ViKSB7XG4gICAgdHJ5IHtcbiAgICAgIF9hcGx1c0RlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1cyB8fCBfYXBsdXNfY29udGV4dC5nb2xkbG9nIHx8IChfYXBsdXNfY29udGV4dC5hcGx1cyA9IHt9KSk7XG4gICAgICB2YXIgX2dvbGRsb2dfcXVldWUgPSAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IFtdKSk7XG4gICAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IChfYXBsdXNfY29udGV4dC5hcGx1c19xdWV1ZSB8fCAoX2FwbHVzX2NvbnRleHQuYXBsdXNfcXVldWUgPSBbXSkpO1xuICAgICAgX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUgPSBfZ29sZGxvZ19xdWV1ZS5jb25jYXQoX2FwbHVzUXVldWVEZWZhdWx0VmFsdWUpOyAgXG4gICAgfSBjYXRjaCAoZSkge31cbiAgfSBlbHNlIHtcbiAgICBfYXBsdXNEZWZhdWx0VmFsdWUgPSBfYXBsdXNfY29udGV4dC5hcGx1cztcbiAgICBfYXBsdXNRdWV1ZURlZmF1bHRWYWx1ZSA9IF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlO1xuICB9XG4gIFxuICBfYXBsdXNfY29udGV4dC5hcGx1cyA9IF9hcGx1c19jb250ZXh0LmdvbGRsb2cgPSBfYXBsdXNEZWZhdWx0VmFsdWU7XG4gIF9hcGx1c19jb250ZXh0LmFwbHVzX3F1ZXVlID0gX2FwbHVzX2NvbnRleHQuZ29sZGxvZ19xdWV1ZSA9IF9hcGx1c1F1ZXVlRGVmYXVsdFZhbHVlO1xuICBcbiAgcmV0dXJuIF9hcGx1c19jb250ZXh0O1xufTtcblxudmFyIGdldEdsb2JhbFZhbHVlID0gZnVuY3Rpb24gKGtleSkge1xuICBpZiAoa2V5ID09PSBBUExVUyB8fCBrZXkgPT09IEdPTERMT0cpIHtcbiAgICB2YXIgZyA9IF9hcGx1c19jb250ZXh0W0FQTFVTXSB8fCBfYXBsdXNfY29udGV4dFtHT0xETE9HXTtcbiAgICBpZiAoIWcpIHtcbiAgICAgIGcgPSBfYXBsdXNfY29udGV4dFtBUExVU10gPSBfYXBsdXNfY29udGV4dFtHT0xETE9HXSA9IHt9O1xuICAgIH1cbiAgICByZXR1cm4gZztcbiAgfVxuICB2YXIgZ29sZGxvZ19xdWV1ZSA9IEdPTERMT0dfUVVFVUU7XG4gIHZhciBhcGx1c19xdWV1ZSA9IEFQTFVTX1FVRVVFO1xuICBpZiAoa2V5ID09PSBhcGx1c19xdWV1ZSB8fCBrZXkgPT09IGdvbGRsb2dfcXVldWUpIHtcbiAgICB2YXIgcSA9IF9hcGx1c19jb250ZXh0W2FwbHVzX3F1ZXVlXSB8fCBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXTtcbiAgICBpZiAoIXEpIHtcbiAgICAgIHEgPSBfYXBsdXNfY29udGV4dFthcGx1c19xdWV1ZV0gPSBfYXBsdXNfY29udGV4dFtnb2xkbG9nX3F1ZXVlXSA9IFtdO1xuICAgIH1cbiAgICByZXR1cm4gcTtcbiAgfVxufTtcbmV4cG9ydHMuZ2V0R2xvYmFsVmFsdWUgPSBnZXRHbG9iYWxWYWx1ZTtcblxuZXhwb3J0cy5zZXRHbG9iYWxWYWx1ZSA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIF9hcGx1c19jb250ZXh0W2tleV0gPSB2YWx1ZTtcbn07XG5cbi8qKlxuICog6I635Y+WYXBsdXPlhoXpg6jlj5jph49cbiAqIEBwYXJhbXMgW1N0cmluZ10ga2V5XG4gKiBAcmV0dXJuIFtPYmplY3R8U3RyaW5nfE51bWJlcnxCb29sZWFuXVxuICovXG52YXIgZ2V0R29sZGxvZ1ZhbCA9IGZ1bmN0aW9uKGtleSkge1xuICB2YXIgdjtcbiAgdHJ5IHtcbiAgICB2YXIgYXBsdXMgPSBnZXRHbG9iYWxWYWx1ZShBUExVUyk7XG4gICAgdiA9IGFwbHVzW2tleV07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2ID0gJyc7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIHY7XG4gIH1cbn07XG5leHBvcnRzLmdldEdvbGRsb2dWYWwgPSBnZXRHb2xkbG9nVmFsO1xuLyoqXG4gKiDorr7nva5hcGx1c+WGhemDqOWPmOmHj1xuICogQHBhcmFtcyBbU3RyaW5nXSBrZXlcbiAqIEBwYXJhbXMgW09iamVjdHxTdHJpbmd8TnVtYmVyfEJvb2xlYW5dIHZhbFxuICogQHJldHVybiBbQm9vbGVhbl1cbiAqL1xudmFyIHNldEdvbGRsb2dWYWwgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICB2YXIgZiA9IGZhbHNlO1xuICB0cnkge1xuICAgIHZhciBhcGx1cyA9IGdldEdsb2JhbFZhbHVlKEFQTFVTKTtcbiAgICBpZiAoa2V5KSB7XG4gICAgICBhcGx1c1trZXldID0gdmFsO1xuICAgICAgZiA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgZiA9IGZhbHNlO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBmO1xuICB9XG59O1xuZXhwb3J0cy5zZXRHb2xkbG9nVmFsID0gc2V0R29sZGxvZ1ZhbDtcblxuLyoqXG4gKiDojrflj5ZjbGllbnRJbmZvKOa1j+iniOWZqOOAgeiuvuWkh+etieS/oeaBrylcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqICAgdmVyc2lvbjogMixcbiAqICAgdWFfaW5mbzoge1xuICogICAgIGI6IFwiY2hyb21lNThcIlxuICogICAgIGlzbTogXCJtYWNcIlxuICogICAgIG14OiBcIjM2MGVlXCJcbiAqICAgICBvOiBcIm1hY1wiXG4gKiAgICAgcDogMVxuICogICAgIHM6IFwiMTkyMHgxMDgwXCJcbiAqICAgICB3OiBcIndlYmtpdFwiXG4gKiAgIH1cbiAqIH1cbiAqL1xuZXhwb3J0cy5nZXRDbGllbnRJbmZvID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRHb2xkbG9nVmFsKCdfYXBsdXNfY2xpZW50JykgfHwge307XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEdvbGRsb2cuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEFQTFVTID0gJ2FwbHVzJztcbnZhciBHT0xETE9HID0gJ2dvbGRsb2cnO1xudmFyIEFQTFVTX1FVRVVFID0gQVBMVVMgKyAnX3F1ZXVlJztcbnZhciBHT0xETE9HX1FVRVVFID0gR09MRExPRyArICdfcXVldWUnO1xudmFyIE1XX0NIQU5HRSA9ICdtd19jaGFuZ2UnO1xudmFyIE1FVEFfSU5GTyA9ICdNZXRhSW5mbyc7XG52YXIgQVBQRU5EX01FVEFfSU5GTyA9ICdhcHBlbmQnICsgTUVUQV9JTkZPO1xudmFyIFNFVF9NRVRBX0lORk8gPSAnc2V0JyArIE1FVEFfSU5GTztcbnZhciBIVFRQID0gJ2h0dHAnO1xudmFyIF9wdWJzdWIgPSAnX3B1YnN1Yic7XG5cbnZhciBkZWZhdWx0Q29kZSA9ICdvdGhlcic7XG52YXIgQ0xLID0gJzIxMDEnO1xudmFyIEVYUCA9ICcyMjAxJztcbnZhciBJTVBFWFAgPSAnMjIwMic7XG52YXIgT1RIRVIgPSAnMTk5OTknO1xudmFyIEFQUF9TSE9XID0gJzEwMjMnO1xudmFyIEFQUF9ISURFX09SX1VOTE9BRCA9ICcxMDEwJzsgXG52YXIgU0VTU0lPTl9JTlRFUlZBTCA9IDMwMDAwOyAvLyBzZXNzaW9uSWTov4fmnJ/ml7bpl7QgMzDnp5JcbnZhciBTSEFSRV9DQUNIRV9JTlRFUlZBTCA9IDEwMDAgKiA2MCAqIDMwO1xudmFyIEVLVlMgPSAnZWt2cyc7XG52YXIgRVZFTlRfTUFYX0NPVU5UID0gMTAwMDA7IC8vIOacrOWcsOacgOWkmuWtmOWCqOi/meS5iOWkmmVrduaVsOaNrlxudmFyIE1FTU9SWV9NQVhfQ09VTlQgPSAxOyAvLyDlhoXlrZjkuK3lrZjlgqjnmoTmnIDlpKfmlbDmja7mlbDph4/vvIzotoXov4fliJnnvJPlrZjliLDmnKzlnLBcbnZhciBNQVhfUVVFVUVfQ09VTlQgPSAxOyAvLyDkuLrpmLLmraLlm6DnvZHnu5zlvILluLjlr7zoh7TnvJPlrZjov4flpKfvvIzorr7nva7nvJPlrZjkuKrmlbDkuIrpmZBcbnZhciBFVkVOVF9TRU5EX0RFRkFVTFRfSU5URVJWQUwgPSAzMDAwOyAvLyBla3bpu5jorqTlj5HpgIHpl7TpmpTml7bpl7Q6IDPnp5JcbnZhciBQQUdFX1NUQVJUID0gJyQkX3BhZ2Vfc3RhcnQnO1xudmFyIFBBR0VfRU5EID0gJyQkX3BhZ2VfZW5kJztcbnZhciBBUFBfU1RBUlQgPSAnJCRfYXBwX3N0YXJ0JztcbnZhciBBUFBfRU5EID0gJyQkX2FwcF9lbmQnO1xudmFyIFVTRVJfUFJPRklMRV9LRVkgPSAnYXBsdXNfdXNlcl9wcm9maWxlJztcbnZhciBJTVBSSU5UID0gJ2ltcHJpbnQnO1xudmFyIElEX1RZUEUgPSAnYXBsdXMtaWR0eXBlJztcbnZhciBKU0JSSURHRV9PTkxZID0gJ2FwbHVzLWpzYnJpZGdlLW9ubHknO1xudmFyIFBBR0VfQ09ORklHID0gJ2FwbHVzLXBhZ2UtY29uZmlnJzsgXG52YXIgQVBMVVNfU0tJUF9BUFZfUlVMRVMgPSAnYXBsdXMtc2tpcC1hcHYtcnVsZXMnO1xudmFyIEFQTFVTX1BWX0RPTUFJTiA9ICdhcGx1cy1yaG9zdC12JztcbnZhciBBUExVU19FS1ZfRE9NQUlOID0gJ2FwbHVzLXJob3N0LWcnO1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFBBR0VfRU5URVI6ICdQQUdFX0VOVEVSJyxcbiAgQ1VSUkVOVF9QQUdFX0NPTkZJRzogJ0NVUlJFTlRfUEFHRV9DT05GSUcnLFxuICBfQU5PTllfSUQ6ICdfYW5vbnlfaWQnLFxuICBfVVNFUl9JRDogJ191c2VyX2lkJyxcbiAgREVGQVVMVF9DT0RFOiBkZWZhdWx0Q29kZSxcbiAgT1RIRVI6IE9USEVSLFxuICBFVkVOVF9NQVA6IHtcbiAgICAnMjEwMSc6ICdjbGljaycsXG4gICAgJzIyMDEnOiAnZXhwb3N1cmUnLFxuICAgICcyMjAyJzogJ2V4cG9zdXJlJyxcbiAgICAnMTk5OTknOiBkZWZhdWx0Q29kZSxcbiAgICAnMTAyMyc6ICdhcHBfc2hvdycsXG4gICAgJzEwMTAnOiAnYXBwX2hpZGVfb3JfdW5sb2FkJ1xuICB9LFxuICBFVkVOVF9JRF9NQVA6IHtcbiAgICAnRVhQJzogRVhQLFxuICAgICdJTVBFWFAnOiBJTVBFWFAsXG4gICAgJ0NMSyc6IENMSyxcbiAgICAnT1RIRVInOiBPVEhFUixcbiAgICAnU0hPVyc6IEFQUF9TSE9XLFxuICAgICdIX09SX1UnOiBBUFBfSElERV9PUl9VTkxPQURcbiAgfSxcbiAgQVBMVVM6IEFQTFVTLFxuICBHT0xETE9HOiBHT0xETE9HLFxuICBVTlNVQlNDUklCRTogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnVuc3Vic2NyaWJlJyxcbiAgU1VCU0NSSUJFOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuc3Vic2NyaWJlJyxcbiAgUFVCTElTSDogQVBMVVMgKyAnLicgKyBBUExVUyArIF9wdWJzdWIgKyAnLnB1Ymxpc2gnLFxuICBDQUNIRV9QVUJTOiBBUExVUyArICcuJyArIEFQTFVTICsgX3B1YnN1YiArICcuY2FjaGVQdWJzJyxcbiAgQVBMVVNfVU5JVkVSU0FMOiBBUExVUyArICdfdW5pdmVyc2FsJyxcbiAgQVBMVVNfUVVFVUU6IEFQTFVTX1FVRVVFLFxuICBHT0xETE9HX1FVRVVFOiBHT0xETE9HX1FVRVVFLFxuICBDT01QTEVURTogJ2NvbXBsZXRlJyxcbiAgUFZfQ09ERTogJzIwMDEnLFxuICBFWFBfQ09ERTogRVhQLFxuICBDTEtfQ09ERTogQ0xLLFxuICBPVEhFUl9DT0RFOiBPVEhFUixcbiAgQ0xLOiAnQ0xLJyxcbiAgRVhQOiAnRVhQJyxcbiAgLy8gT1RIRVI6ICdPVEhFUicsXG4gIFNQTV9DTlQ6ICdzcG0tY250JyxcbiAgU1BNX1VSTDogJ3NwbS11cmwnLFxuICBTUE1fUFJFOiAnc3BtLXByZScsXG4gIE1XX0NIQU5HRV9QVjogTVdfQ0hBTkdFICsgJ19wdicsXG4gIE1XX0NIQU5HRV9ISkxKOiBNV19DSEFOR0UgKyAnX2hqbGonLFxuICBIVFRQOiBIVFRQICsgJzonLFxuICBIVFRQUzogJ2h0dHBzOicsXG4gIEFQUEVORF9NRVRBX0lORk86IEFQUEVORF9NRVRBX0lORk8sXG4gIFNFVF9NRVRBX0lORk86IFNFVF9NRVRBX0lORk8sXG4gIEFQTFVTX0FQUEVORF9NRVRBX0lORk86IEFQTFVTICsgJy4nICsgQVBQRU5EX01FVEFfSU5GTyxcbiAgQVBMVVNfU0VUX01FVEFfSU5GTzogQVBMVVMgKyAnLicgKyBTRVRfTUVUQV9JTkZPLFxuICBQVklEOidwdmlkJyxcbiAgQVBMVVNfTE9HX1BJUEU6J2FwbHVzLWxvZy1waXBlJyxcbiAgb3BlbkFQSXM6IFtcbiAgICAnc2VuZCcsICdlbnRlcicsICdzZW5kUFYnLCAncmVjb3JkJywgXG4gICAgJ2NvbWJpbmVSZWNvcmQnLCAncmVjb3JkVWRhdGEnLCAncmVxdWVzdFZUQ29uZmlnJywgJ3JlcXVlc3RSZW1vdGVDb25maWcnLFxuICAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbiAgICAndXBkYXRlUGFnZVByb3BlcnRpZXMnLCBcbiAgICAndXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzJyxcbiAgICAndXBkYXRlUGFnZVV0cGFyYW0nLFxuICAgICd1cGRhdGVOZXh0UGFnZVV0cGFyYW0nLFxuICAgICdwYWdlQXBwZWFyJywgJ3BhZ2VEaXNhcHBlYXInLCAnc2tpcFBhZ2UnLFxuICAgICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsICdnZXRQYWdlU3BtVXJsJywgJ2dldFBhZ2VTcG1QcmUnLFxuICAgICdzZXRQYWdlTmFtZScsICdnZXRFbGVtZW50U1BNJywgJ3JlY29yZEFwcExpbmsnXG4gIF0sXG4gIFNFU1NJT05fSU5URVJWQUw6IFNFU1NJT05fSU5URVJWQUwsXG4gIFNFU1NJT05fUEFVU0VfVElNRTogJ3Nlc3Npb25fcGF1c2VfdGltZScsXG4gIElNUFJJTlQ6ICdpbXByaW50JyxcbiAgQ1VSUkVOVF9TRVNTSU9OOiAnY3VycmVudF9zZXNzaW9uJyxcbiAgTUFYX0VWRU5USURfTEVOR1RIOiAxMjgsXG4gIE1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIOiAyNTYsXG4gIE1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UOiAxMDAsXG4gIEZBSUxFRF9SRVFVRVNUUzogJ2ZhaWxlZF9yZXF1ZXN0cycsXG4gIFJFUVVFU1RTOiAncmVxdWVzdHMnLFxuICBTSEFSRVM6ICdzaGFyZXMnLFxuICBBUExVU19TU1JDOiAnX2FwbHVzX3NzcmMnLFxuICBFS1ZTOiBFS1ZTLFxuICBFVkVOVF9NQVhfQ09VTlQ6IEVWRU5UX01BWF9DT1VOVCxcbiAgTUVNT1JZX01BWF9DT1VOVDogTUVNT1JZX01BWF9DT1VOVCxcbiAgTUFYX1FVRVVFX0NPVU5UOiBNQVhfUVVFVUVfQ09VTlQsXG4gIEVWRU5UX1NFTkRfREVGQVVMVF9JTlRFUlZBTDogRVZFTlRfU0VORF9ERUZBVUxUX0lOVEVSVkFMLFxuICBQQUdFX1NUQVJUOiBQQUdFX1NUQVJULFxuICBQQUdFX0VORDogUEFHRV9FTkQsXG4gIEFQUF9TVEFSVDogQVBQX1NUQVJULFxuICBBUFBfRU5EOiBBUFBfRU5ELFxuICBVU0VSX1BST0ZJTEVfS0VZOiBVU0VSX1BST0ZJTEVfS0VZLFxuICBTSEFSRV9DQUNIRV9JTlRFUlZBTDogU0hBUkVfQ0FDSEVfSU5URVJWQUwsXG4gIElNUFJJTlQ6IElNUFJJTlQsXG4gIElEX1RZUEU6IElEX1RZUEUsXG4gIEdMT0JBTF9QUk9QRVJUWTogJ2dsb2JhbHByb3BlcnR5JyxcbiAgLy8gVVRNX0tFWVM6IFsndXRtX3NvdXJjZScsICd1dG1fY29udGVudCcsICd1dG1fbWVkaXVtJywgJ3V0bV9jYW1wYWlnbicsICd1dG1fdGVybSddLFxuICBKU0JSSURHRV9PTkxZOiBKU0JSSURHRV9PTkxZLFxuICBQQUdFX0NPTkZJRzogUEFHRV9DT05GSUcsXG4gIEFQTFVTX1NLSVBfQVBWX1JVTEVTOiBBUExVU19TS0lQX0FQVl9SVUxFUyxcbiAgQVBMVVNfUFZfRE9NQUlOOiBBUExVU19QVl9ET01BSU4sXG4gIEFQTFVTX0VLVl9ET01BSU46IEFQTFVTX0VLVl9ET01BSU4sXG4gIEFQTFVTX0lNUFJJTlRfVkVSU0lPTjogJ0FQTFVTX0lNUFJJTlRfVkVSU0lPTicsXG4gIEFQTFVTX1JFTU9URV9DT05GSUc6ICdBUExVU19SRU1PVEVfQ09ORklHJyxcbiAgUkFOSzogJ2Vrdl9yYW5rJyxcbiAgV0VCX0VWRU5UX1NVRkZJWDogJy93ZWJfbG9ncycsXG4gIFdFQl9QQ19QVl9TVUZGSVg6ICd2LmdpZicsXG4gIFdFQl9XQVBfUFZfU1VGRklYOiAnbS5naWYnLFxuICBQQUdFX0xFQVZFOiAnJCRfcGFnZV9sZWF2ZScsXG4gIEFQTFVTX0FVVE9UUkFDS19FTkFCTEVEOiAnYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWQnLFxuICBBUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEU6ICdhcGx1cy1hdXRvdHJhY2stZW5hYmxlZC1yZW1vdGUnLFxuICBBUExVU19BVVRPVFJBQ0tfQ09ORklHOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZycsXG4gIEFQTFVTX0FVVE9UUkFDS19DT05GSUdfUkVNT1RFOiAnYXBsdXMtYXV0b3RyYWNrLWNvbmZpZy1yZW1vdGUnLFxuICBBUExVU19ESVNBQkxFX0FVVE9FVkVOVDogJ2FwbHVzLWRpc2FibGUtYXV0b2V2ZW50JyxcbiAgQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hdXRvZXZlbnQnLFxuICBBUExVU19ESVNBQkxFX0FVVE9QVjogJ2FwbHVzLWRpc2FibGUtYXB2JyxcbiAgQVBMVVNfRElTQUJMRV9BVVRPUFZfUkVNT1RFOiAnYXBsdXMtZGlzYWJsZS1hcHYtcmVtb3RlJyxcbiAgQVBMVVNfREVWSUNFX0VOQUJMRTogJ2FwbHVzLWRldmljZS1lbmFibGUnLFxuICBQRVJGT1JNQU5DRV9XQVJJTkc6ICckJF9wZXJmX3dhcm5pbmcnLFxuICBTVEFSVF9JRDogJ1NUQVJUX0lEJyxcbn07XG5cbi8vIHZhciBvcGVuQVBJcyA9IFtcbi8vICAgJ3NlbmQnLCAnZW50ZXInLCAnc2VuZFBWJywgJ3JlY29yZCcsXG4vLyAgICdzZXRQYWdlU1BNJywgJ3NldE1ldGFJbmZvJywgJ2FwcGVuZE1ldGFJbmZvJyxcbi8vICAgVVBEQVRFICsgJ1BhZ2VQcm9wZXJ0aWVzJyxcbi8vICAgVVBEQVRFICsgJ05leHRQYWdlUHJvcGVydGllcycsXG4vLyAgIFVQREFURSArICdQYWdlVXRwYXJhbScsXG4vLyAgIFVQREFURSArICdOZXh0UGFnZVV0cGFyYW0nLFxuLy8gICAncGFnZUFwcGVhcicsICdwYWdlRGlzYXBwZWFyJyxcbi8vICAgJ3NraXBQYWdlJ1xuLy8gXTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9hcGx1c1N0YXRpYy5qc1xuLy8gbW9kdWxlIGlkID0gM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgXCJtZXRhSW5mb1wiOiB7XG4gICAgXCJhcGx1cy1yaG9zdC12XCI6IFwiXCIsXG4gICAgXCJhcGx1cy1yaG9zdC1nXCI6IFwiXCIsXG4gICAgXCJhcGx1cy1tbXN0YXQtdGltZW91dFwiOiBcIjEwMDAwXCIsXG4gICAgXCJhcGx1cy1kaXNhYmxlLWF1dG9ldmVudFwiOiBmYWxzZSxcbiAgICBcImFwbHVzLWRpc2FibGUtYXB2XCI6IGZhbHNlLFxuICAgIFwiYXBsdXMtYXV0b3RyYWNrLWVuYWJsZWRcIjogZmFsc2UsXG4gICAgXCJhcGx1cy1kZXZpY2UtZW5hYmxlXCI6IHRydWUsXG4gICAgXCJhcGx1cy1kZXZpY2UtZW5hYmxlZFwiOiB0cnVlLFxuICAgIFwic2RrSWRcIjogXCJhcGx1c19taW5pX2Nsb3VkX3VtXCJcbiAgfSxcbiAgXCJnbG9iYWxDb25maWdcIjoge1xuICAgIFwiaXNBbGlcIjogZmFsc2UsXG4gICAgXCJpc0RlY29kZVVybFwiOiB0cnVlLFxuICAgIFwiQVBMVVNfUVVFVUVcIjogXCJhcGx1c19xdWV1ZVwiLFxuICAgIFwiRVRBR19TVE9SQUdFX0tFWVwiOiBcIl9fRVRBR19fQ05BX19JRF9fXCIsXG4gICAgXCJzY3JpcHRfbmFtZVwiOiBcImFwbHVzX21pbmkuanNcIixcbiAgICBcImFwbHVzLWdsb2JhbGRhdGFcIjoge30sXG4gICAgXCJsdmVyXCI6IFwiMS45LjIyXCJcbiAgfSxcbiAgXCJwbHVnaW5zXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJpbmplY3RfYXBwX3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvaW5qZWN0X2FwcF91bS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJpbmplY3RfcGFnZV91bVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL2luamVjdF9wYWdlX3VtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcInB1YnN1YlwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbWVzc2FnZXIvcHVic3ViX21pbmkuanMnKVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfbWV0YV9pbmplY3RcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvYXBsdXNfbWV0YV9pbmplY3RfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19sb2dfaW5qZWN0XCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX2xvZ19pbmplY3QuanMnKSxcbiAgICAgIFwiZGVwc1wiOiBbXG4gICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuICAgICAgXSxcbiAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgXCJwbHVnaW5zXCI6IHtcbiAgICAgICAgICBcInB2XCI6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vZXRhZ19taW5pLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZW5fdG9fc2VuZHB2XCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImFwbHVzV2FpdGluZ1wiOiBcIlwiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoZXJlX3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGF0X3RvX3NlbmRcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzJyksXG4gICAgICAgICAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgICAgICAgICBcImxvZ2RhdGFUb1V0XCI6IHt9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9fc2VuZHB2X3VzZXJkYXRhXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doYXRfdG9fc2VuZHB2X3VzZXJkYXRhX21pbmkuanMnKSxcbiAgICAgICAgICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgICAgICAgICBcIndoYXRfdG9fc2VuZFwiXG4gICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImNhbl90b19zZW5kcHZcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvY2FuX3RvX3NlbmRwdl9taW5pLmpzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiaGpsalwiOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcImV0YWdcIixcbiAgICAgICAgICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qcycpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBcIm5hbWVcIjogXCJ3aGVyZV90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGVyZV90b19zZW5kX21pbmlfdW0uanMnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgXCJuYW1lXCI6IFwid2hhdF90b19zZW5kXCIsXG4gICAgICAgICAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi93aGF0X3RvX3NlbmRfbWluaV9jbG91ZC5qcycpLFxuICAgICAgICAgICAgICBcImRlcHNcIjogW11cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIm1pbmlhcHBfZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9jb21tb24vbWluaWFwcF9kYXRhLmpzJylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBcIndoYXRfdG9faGpsal91c2VyZGF0YVwiLFxuICAgICAgICAgICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YV9taW5pLmpzJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FwaVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19hcGlfbWluaS5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJhcGx1c19sb2dfaW5qZWN0XCIsXG4gICAgICAgIFwiYXBsdXNfbWV0YV9pbmplY3RcIlxuICAgICAgXVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXBsdXNfYWNcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfY2xrLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2FlXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2V4cC5qcycpLFxuICAgICAgXCJkZXBzXCI6IFtcbiAgICAgICAgXCJpbmplY3RfcGFnZV91bVwiXG4gICAgICBdXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJvcGVuX2FwaVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL29wZW5fYXBpLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX2NsaWVudFwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9hcGx1c19jbGllbnRfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19taW5pX3NwbVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2luc19taW5pL21pbmlfc3BtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcImFwbHVzX21pbmlfcmVwb3J0X3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzJylcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIm1ldGFfcXVldWVcIixcbiAgICAgIFwicGF0aFwiOiByZXF1aXJlKCcuL3BsdWdpbnMvbGliX3F1ZXVlL21ldGFfcXVldWUuanMnKSxcbiAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgXCJpc09wZW5BcGlcIjogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiZXRhZ1wiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qcycpXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhcGx1c19xdWV1ZVwiLFxuICAgICAgXCJwYXRoXCI6IHJlcXVpcmUoJy4vcGx1Z2lucy9saWJfcXVldWUvYXBsdXNfcXVldWUuanMnKSxcbiAgICAgIFwiY29uZmlnXCI6IHtcbiAgICAgICAgXCJpc09wZW5BcGlcIjogdHJ1ZVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYXV0b190cmFja2VyX3VtXCIsXG4gICAgICBcInBhdGhcIjogcmVxdWlyZSgnLi9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX3VtLmpzJyksXG4gICAgICBcImRlcHNcIjogW1xuICAgICAgICBcImluamVjdF9wYWdlX3VtXCJcbiAgICAgIF1cbiAgICB9XG4gIF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvYXBsdXNfbWluaV9jbG91ZF91bV9jb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9wbHVnaW5zX21pbmkvaW5qZWN0X2FwcF91bV9uZXcuanNcbiAqIOaWsOeJiOiHquWKqOmHh+mbhuWwj+eoi+W6j+S/oeaBr+eahOaPkuS7tiAtIGFwcOazqOWFpVxuICpcbiAqIOmAmui/h+mHjeWGmXd455qEYXBp5p2l5qih5ouf55Sf5ZG95ZGo5pyf77yM5Lul5q2k57uV6L+H5LiJ5pa55qGG5p625a+555Sf5ZG95ZGo5pyf55qE6YeN5YaZ5py65Yi2XG4gKlxuICogQXV0aG9yczpcbiAqICAg6IKG5Y+BIDxzaXNhbi5xbEBhbGliYWJhLWluYy5jb20+XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscy91dGlscycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHNlc3Npb25NYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS91bV9zZXNzaW9uX21hbmFnZXInKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIHJlcXVlc3RRdWV1ZSA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2NhY2hlJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsTW9uaXRvciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTW9uaXRvcicpO1xudmFyIHV0aWxSZW1vdGVDZmcgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFJlbW90ZUNmZycpO1xudmFyIHVtVXRpbHMgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG5cbnZhciBBUFBfTEFVTkNIX1RZUEUgPSAwO1xuXG5mdW5jdGlvbiBnZXRHbG9iYWxBcmdzKHF1ZXJ5LCBzY2VuZSkge1xuICB2YXIgZ2xvYmFsX2FyZ3MgPSB7fTtcbiAgaWYgKHNjZW5lKSB7XG4gICAgZ2xvYmFsX2FyZ3Muc2NlbmUgPSBzY2VuZTtcbiAgfVxuICBpZiAocXVlcnkgJiYgcXVlcnkubWluaWFwcERlYnVnSWQpIHtcbiAgICBnbG9iYWxfYXJncy5kZWJ1Z0lkID0gcXVlcnkubWluaWFwcERlYnVnSWQ7XG4gIH1cbiAgZm9yICh2YXIgayBpbiBxdWVyeSkge1xuICAgIGlmIChrID09PSAnJCRfc2hhcmVfdWlkJyB8fCBrLmluZGV4T2YoJyQkX3V0bV8nKSA9PT0gMCkge1xuICAgICAgZ2xvYmFsX2FyZ3Nba10gPSBxdWVyeVtrXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGdsb2JhbF9hcmdzO1xufVxuXG5mdW5jdGlvbiBzZXNzaW9uU3RhcnQob3B0aW9ucykge1xuICBjYWNoZSgpLmxvYWQoZnVuY3Rpb24oKXtcbiAgICB1bG9nKCkudygnY2FjaGUgaW5pdCBzdWNjZXNzJyk7XG4gICAgaWYgKG9wdGlvbnMucXVlcnkgJiYgb3B0aW9ucy5xdWVyeS5taW5pYXBwRGVidWdJZCAmJiBvcHRpb25zLnF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkICE9IGNhY2hlKCkuZ2V0KCdtaW5pYXBwRGVidWdJZCcpKSB7XG4gICAgICBjYWNoZSgpLnNldCgnbWluaWFwcERlYnVnSWQnLCBvcHRpb25zLnF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciBuZXdPcHRpb25zID0ge307XG4gIHZhciBkZWVwQ2xvbmUgPSBjbG9uZURlZXAob3B0aW9ucyk7XG4gIGZvciAodmFyIGkgaW4gZGVlcENsb25lKSB7XG4gICAgaWYgKHR5cGVvZiBkZWVwQ2xvbmVbaV0gPT09ICdvYmplY3QnKSB7XG4gICAgICBuZXdPcHRpb25zID0gdXRpbERhc2guYXNzaWduKGRlZXBDbG9uZVtpXSwgbmV3T3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChkZWVwQ2xvbmVbaV0pIHtcbiAgICAgICAgbmV3T3B0aW9uc1tpXSA9IGRlZXBDbG9uZVtpXTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgcmVxdWVzdFF1ZXVlKGFwbHVzU3RhdGljLlJFUVVFU1RTKS5sb2FkKCk7XG4gIHZhciBjYiA9IGZ1bmN0aW9uKCkge1xuICAgIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLmxvYWQoKTtcbiAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTKS5zZW5kKCcnLCB7fSwgZnVuY3Rpb24oKSB7XG4gICAgICB1bG9nKCkudygnc2VuZCBmYWlsZWQgcmVxdWVzdCBxdWV1ZScpO1xuICAgIH0pO1xuICB9O1xuICB2YXIgaXNOZXdTZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5yZXN1bWUobmV3T3B0aW9ucyk7XG4gIHZhciBzZXNzaW9uSWQgPSBzZXNzaW9uTWFuYWdlcigpLmdldEN1cnJlbnRTZXNzaW9uSWQoKTtcbiAgZXZlbnRNYW5hZ2VyKCkuc2V0U2Vzc2lvbklkKHNlc3Npb25JZCk7XG4gIGlmIChpc05ld1Nlc3Npb24pIHtcbiAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBjYik7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNlc3Npb25FbmQoKSB7XG4gIHNlc3Npb25NYW5hZ2VyKCkucGF1c2UoKTtcbiAgLy8gYXBwIGhpZGXml7blj5HpgIHlvZPliY3or7fmsYLpmJ/liJcm5aSx6LSl6Zif5YiXXG4gIHJlcXVlc3RRdWV1ZShhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpLnNlbmQoJycsIHt9LCBmdW5jdGlvbigpIHtcbiAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTKS5zYXZlKCk7XG4gICAgY2FjaGUoKS5zYXZlKCk7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gYWRhcHRNeUFwcEhpZGUoY2IpIHtcbiAgdHJ5IHtcbiAgICBpZiAobXkgJiYgbXkub25UaXRsZUNsb3NlQ2xpY2spIHtcbiAgICAgIGNiICYmIG15Lm9uVGl0bGVDbG9zZUNsaWNrKGNiKTtcbiAgICB9XG4gIH0gY2F0Y2goZSl7fVxufVxuXG5mdW5jdGlvbiBpbmplY3RBcHAoKSB7XG4gIHZhciBhcHBCYWsgPSBBcHA7XG4gIHZhciBhbHJlYWR5U3RhcnRlZCA9IGZhbHNlO1xuICB2YXIgbGFudWNoZWQgPSBmYWxzZTtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGNvbnRleHQgPSBtaW5pLmdldENvbnRleHQoKTsgICAvLyDlubPlj7DkuIrkuIvmlofvvJogd3jjgIFkZOOAgW1544CBdHTjgIFzd2FuXG4gIHZhciBmbiA9IHtcbiAgICBvbkxhdW5jaDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgIG1pbmkuaW5pdElzVEIoKTtcbiAgICAgIHZhciBxdWVyeSA9IG9wdGlvbnMgPyBvcHRpb25zLnF1ZXJ5IDoge307XG4gICAgICB2YXIgcmVmZXJyZXJJbmZvID0gb3B0aW9ucyA/IG9wdGlvbnMucmVmZXJyZXJJbmZvIDoge307XG4gICAgICAvLyBodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pcHJvZ3JhbS9kZXYvYXBpL2Jhc2UvYXBwL2xpZmUtY3ljbGUvd3guZ2V0TGF1bmNoT3B0aW9uc1N5bmMuaHRtbCMlRTglQkYlOTQlRTUlOUIlOUUlRTYlOUMlODklRTYlOTUlODglMjByZWZlcnJlckluZm8lMjAlRTclOUElODQlRTUlOUMlQkElRTYlOTklQUZcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtcyB7T2JqZWN0fSByZWZlcnJlckluZm8ge1xuICAgICAgICogICBhcHBJZCAgc3RyaW5nICDmnaXmupDlsI/nqIvluo/jgIHlhazkvJflj7fmiJYgQXBwIOeahCBhcHBJZFxuICAgICAgICogICBleHRyYURhdGEgIE9iamVjdCAg5p2l5rqQ5bCP56iL5bqP5Lyg6L+H5p2l55qE5pWw5o2u77yMc2NlbmU9MTAzN+aIljEwMzjml7bmlK/mjIFcbiAgICAgICAqIH1cbiAgICAgICAqL1xuICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcoY2FjaGUoKS5nZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcpKTtcblxuICAgICAgQVBQX0xBVU5DSF9UWVBFICs9IDE7XG5cbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuYXBwZW5kTWV0YUluZm8nLFxuICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywgdXRpbERhc2guYXNzaWduKHJlZmVycmVySW5mbywge1xuICAgICAgICAgIHNjZW5lOiBvcHRpb25zLnNjZW5lIHx8ICcnXG4gICAgICAgIH0pXVxuICAgICAgfSk7XG4gICAgICBpZiAocXVlcnkpIHtcbiAgICAgICAgdmFyIHF1ZXJ5RGF0YSA9IHt9OyAvLyBjbG9uZURlZXAocXVlcnkpO1xuICAgICAgICBpZiAocXVlcnkuc3BtKSB7XG4gICAgICAgICAgY3R4LmFwbHVzLnNwbV9vcmlnbiA9IHF1ZXJ5LnNwbTtcbiAgICAgICAgICAvLyBkZWxldGUgcXVlcnlEYXRhLnNwbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zY2VuZSkge1xuICAgICAgICAgIHF1ZXJ5RGF0YS5zY2VuZSA9IG9wdGlvbnMuc2NlbmU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHF1ZXJ5Lm1pbmlhcHBEZWJ1Z0lkKSB7XG4gICAgICAgICAgdmFyIGRlYnVnSWQgPSBxdWVyeS5taW5pYXBwRGVidWdJZC50cmltKCk7XG4gICAgICAgICAgdmFyIGRlYnVnSW5mb3MgPSBkZWJ1Z0lkLnNwbGl0KCdfJyk7XG4gICAgICAgICAgcXVlcnlEYXRhID0gdXRpbERhc2guYXNzaWduKHF1ZXJ5RGF0YSwge1xuICAgICAgICAgICAgYXBsdXNfd29ya19ubzogZGVidWdJbmZvcy5sZW5ndGggPiAyID8gZGVidWdJbmZvc1sxXSA6IGRlYnVnSWQsXG4gICAgICAgICAgICBhcGx1c190cmFja19kZWJ1Z19pZDogZGVidWdJZCxcbiAgICAgICAgICAgIGFwbHVzX2ZsYWc6ICdhcGx1c190ZXN0J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8vIGRlbGV0ZSBxdWVyeURhdGEubWluaWFwcERlYnVnSWQ7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywgcXVlcnlEYXRhXVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtY3B2ZGF0YScsIHF1ZXJ5RGF0YV1cbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWdsb2JhbC1hcmdzJywgZ2V0R2xvYmFsQXJncyhxdWVyeSwgb3B0aW9ucy5zY2VuZSldXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgb25TaG93OiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgQVBQX0xBVU5DSF9UWVBFICs9IDE7XG4gICAgICB2YXIgcXVlcnkgPSBvcHRzID8gb3B0cy5xdWVyeSA6IHt9O1xuICAgICAgdmFyIHNjZW5lID0gb3B0cyA/IG9wdHMuc2NlbmUgOiAnJztcbiAgICAgIHZhciBzdGFydF90eXBlOyAvL+Wwj+eoi+W6j+WQr+WKqOexu+WeiyBcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLCAgLy8g5q2k5aSE6ZyA6KaB55Soc2V0TWV0YUluZm/lgZropobnm5blvI/mm7TmlrDvvIzlm6DkuLrlvq7kv6HlsI/nqIvluo/kvJrmnInnvJPlrZhcbiAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWdsb2JhbC1hcmdzJywgZ2V0R2xvYmFsQXJncyhxdWVyeSwgc2NlbmUpXVxuICAgICAgfSk7XG4gICAgICBpZiAoc2NlbmUpIHtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtZXhkYXRhJywge1xuICAgICAgICAgICAgc2NlbmU6IHNjZW5lXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246ICdhcGx1cy5hcHBlbmRNZXRhSW5mbycsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ2FwbHVzLWNwdmRhdGEnLCB7XG4gICAgICAgICAgICBzY2VuZTogc2NlbmVcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLmFwcGVuZE1ldGFJbmZvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IFsnYXBsdXMtc2Vzc2lvbi1hcmdzJywge1xuICAgICAgICAgICAgc2NlbmU6IHNjZW5lXG4gICAgICAgICAgfV1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBpZiAoQVBQX0xBVU5DSF9UWVBFID09PSAyKSB7XG4gICAgICAgIHN0YXJ0X3R5cGUgPSAxO1xuICAgICAgfSBlbHNlIGlmIChBUFBfTEFVTkNIX1RZUEUgPT09IDEpIHtcbiAgICAgICAgc3RhcnRfdHlwZSA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1bG9nKCkudygnQVBQX0xBVU5DSF9UWVBFIHNob3VsZCBub3QgcmVhY2ggdGhpcywgdmFsdWUgPSAnICsgIEFQUF9MQVVOQ0hfVFlQRSk7XG4gICAgICB9XG4gICAgICB1dGlscy5vbkFwbHVzUmVhZHkoY3R4LmFwbHVzX3F1ZXVlLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCFhbHJlYWR5U3RhcnRlZCkge1xuICAgICAgICAgIGFscmVhZHlTdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgICBzZXNzaW9uU3RhcnQob3B0cyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQOaWh+W/gyAxLuWIsOi+vueOh+a1i+ivlemcgOimgSAyLuWNleadoeS6i+S7tueahGxvZ2lk6ZyA6KaBXG4gICAgICAgIHV0aWxNb25pdG9yLmNsZWFyKCk7XG4gICAgICAgIHZhciBzdGFydGlkID0gdW1VdGlscy5nZXRTdGFydElkKCk7XG4gICAgICAgIGV2ZW50TWFuYWdlcigpLnNldFN0YXJ0SWQoc3RhcnRpZCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcbiAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICB2YXIgcGFnZUNvZGUgPSBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpO1xuICAgICAgICAgIGN0eC5vbkFwcFNob3dUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBQX1NUQVJULCAnU0hPVycsIHtcbiAgICAgICAgICAgICAgLy8gc2NlbmU6IHNjZW5lLFxuICAgICAgICAgICAgICBzdGFydF90eXBlOiBzdGFydF90eXBlLFxuICAgICAgICAgICAgICBwYWdlX25hbWU6IHBhZ2VDb2RlIHx8IG9wdHMucGF0aCB8fCAnLScsXG4gICAgICAgICAgICAgIHVybDogb3B0cy5wYXRoIHx8ICctJ1xuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvbkhpZGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHV0aWxzLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2xvYmFsQ29uZmlnID0gY3R4LmFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcbiAgICAgICAgdmFyIHBhZ2VDb2RlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcbiAgICAgICAgaWYgKCFnbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICB2YXIgdXJsID0gUGFnZU1hbmFnZXIuZ2V0Q3VycmVudFBhZ2VQYXRoKCk7XG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIGN0eC5vbkFwcFNob3dUaW1lO1xuICAgICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUFBfRU5ELCAnSF9PUl9VJywge1xuICAgICAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgICAgIGVuZF90eXBlOiAwLFxuICAgICAgICAgICAgICBwYWdlX25hbWU6IHBhZ2VDb2RlIHx8IHVybCB8fCAnLScsXG4gICAgICAgICAgICAgIHVybDogdXJsIHx8ICctJyxcbiAgICAgICAgICAgICAgc3RhcnRfdGltZTogY3R4Lm9uQXBwU2hvd1RpbWVcbiAgICAgICAgICAgIH1dXG4gICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgYWxyZWFkeVN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgc2Vzc2lvbkVuZCgpO1xuICAgICAgfSk7XG4gICAgICBBUFBfTEFVTkNIX1RZUEUgPSAwO1xuICAgIH1cbiAgfTtcblxuICBpZiAoYXBwQmFrLmFmdGVyKSB7XG4gICAgYXBwQmFrLmFmdGVyKHtcbiAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgb25MYXVuY2g6IGZ1bmN0aW9uKHQpIHsgICAgIFxuICAgICAgICAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7ICAgICBcbiAgICAgICAgICBpZiAodC50aGlzT2JqZWN0KSB7XG4gICAgICAgICAgICB0LnRoaXNPYmplY3QuYXBsdXMgPSBjdHguYXBsdXM7XG4gICAgICAgICAgICB0LnRoaXNPYmplY3QuYXBsdXNfcXVldWUgPSBjdHguYXBsdXNfcXVldWU7XG4gICAgICAgICAgfSBcbiAgICAgICAgICBmbi5vbkxhdW5jaCh0LmFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBvblNob3c6IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmbi5vblNob3codC5hcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25IaWRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICBmbi5vbkhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIEFwcCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICAgICAgZS5hcGx1cyA9IGN0eDsgLy8g5rOo5YaM5YWo5bGA5Y+Y6YePXG4gICAgICBhcHBCYWsoZSk7XG4gICAgfTtcblxuICAgIGNvbnRleHQub25BcHBTaG93KGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyDpgJrov4d3eC5nZXRMYXVuY2hPcHRpb25zU3luY+aWueazle+8jOWunueOsOWvuW9uTGFudWNo55qE55uR5ZCsXG4gICAgICBpZighbGFudWNoZWQpIHtcbiAgICAgICAgLy8g55m+5bqm5LiN5pSv5oyBZ2V0TGF1bmNoT3B0aW9uc1N5bmPvvIznlKhvblNob3fnmoRvcHRpb25z5Luj5pu/XG4gICAgICAgIHZhciBvcHRzID0ge307XG4gICAgICAgIGlmKGlzRnVuY3Rpb24oY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYykpIHtcbiAgICAgICAgICBvcHRzID0gY29udGV4dC5nZXRMYXVuY2hPcHRpb25zU3luYygpIHx8IHt9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9wdHMgPSBlO1xuICAgICAgICB9XG4gICAgICAgIGZuLm9uTGF1bmNoKG9wdHMpO1xuICAgICAgICBsYW51Y2hlZCA9IHRydWU7XG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBvblNob3dcbiAgICAgIGZuLm9uU2hvdyhlKTtcbiAgICB9KSxcblxuICAgIGNvbnRleHQub25BcHBIaWRlKGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIG9uSGlkZVxuICAgICAgZm4ub25IaWRlKCk7XG4gICAgfSk7XG5cbiAgICBhZGFwdE15QXBwSGlkZShmbi5vbkhpZGUpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChbJ29iamVjdCcsICdmdW5jdGlvbiddLmluZGV4T2YodHlwZW9mIEFwcCkgPiAtMSkge1xuICAgICAgICBpbmplY3RBcHAoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfYXBwX3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZXNldEZuOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdID8gYXJndW1lbnRzWzBdIDoge30sXG4gICAgICB0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiAnJyxcbiAgICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICAgIGkgPSBlW3RdO1xuICAgIGVbdF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cbiAgICAgIGlmIChycykge1xuICAgICAgICByZXR1cm4gbi5jYWxsKHRoaXMsIHJzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHRhcm8xeOOAgXRhcm8yeCDlv4XpobvliqDkuKrpop3lpJbnmoTor63lj6VuLmFwcGx55omN6IO95omn6KGM77yM5q+U5aaCdHJ5Y2F0Y2jvvIzlj5jph4/lo7DmmI7nrYnvvIzmraTlpITliqDkuoZyZXR1cm5cbiAgICAgICAgcmV0dXJuIG4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LFxuXG4gIHJld3JpdGVGbjogZnVuY3Rpb24ob2JqLCBuYW1lLCBuZXdGbikge1xuICAgIHZhciBvbGRGbiA9IG9ialtuYW1lXTtcbiAgICBvYmpbbmFtZV0gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgbmV3Rm4uY2FsbCh0aGlzLCBlKTtcbiAgICAgIG9sZEZuICYmIG9sZEZuLmNhbGwodGhpcywgZSk7XG4gICAgfTtcbiAgfSxcblxuICBvbkFwbHVzUmVhZHk6IGZ1bmN0aW9uIChhcGx1c19xdWV1ZSwgU1VCU0NSSUJFLCBjYWxsYmFjaykge1xuICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBTVUJTQ1JJQkUsXG4gICAgICBhcmd1bWVudHM6IFsnYXBsdXNSZWFkeScsIGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJyAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICB9XVxuICAgIH0pO1xuICB9LFxuXG4gIGNsaWNrX3Byb3h5OiBmdW5jdGlvbihvcHRpb25zLCBtZXRob2QpIHsgICAgXG4gICAgdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIHV0aWxPYmplY3QgPSByZXF1aXJlKCdAdXRpbHMvdXRpbE9iamVjdCcpO1xuICAgIHZhciBvcmlGdW5jID0gb3B0aW9uc1ttZXRob2RdO1xuICAgIG9wdGlvbnNbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IG9yaUZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50c1swXTtcbiAgICAgIGlmICh1dGlsT2JqZWN0LmlzT2JqZWN0KGV2ZW50KSAmJiBhcGx1cyAmJiBhcGx1cy5yZWNvcmQpIHtcbiAgICAgICAgYXBsdXMucmVjb3JkKFwiJCRfYXV0b19jbGtcIiwgXCJDTEtcIiwge30pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9LFxuICBcbiAgZ2V0SW5kZXhCeVJlY3Q6IGZ1bmN0aW9uKHNlbGVjdG9yLCB0YXJnZXRSZWN0LCBjYWxsYmFjayl7XG4gICAgdmFyIHRhcmdldEluZGV4ID0gLTE7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIG1pbmkuZ2V0Q29udGV4dCgpLmNyZWF0ZVNlbGVjdG9yUXVlcnkoKS5zZWxlY3RBbGwoc2VsZWN0b3IpLmJvdW5kaW5nQ2xpZW50UmVjdCgpLmV4ZWMoZnVuY3Rpb24ocmVjdCl7XG4gICAgICBlYWNoKHJlY3RbMF0sZnVuY3Rpb24oaXRlbSxpbmRleCl7XG4gICAgICAgIGlmIChhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgICAgICBpZihpdGVtLndpZHRoID09PSB0YXJnZXRSZWN0LndpZHRoICYmIGl0ZW0uaGVpZ2h0ID09PSB0YXJnZXRSZWN0LmhlaWdodCAmJiBpdGVtLmxlZnQgPT09IHRhcmdldFJlY3QubGVmdCAmJiBpdGVtLnRvcCA9PT0gdGFyZ2V0UmVjdC50b3AgJiYgaXRlbS5yaWdodCA9PT0gdGFyZ2V0UmVjdC5yaWdodCAmJiBpdGVtLmJvdHRvbSA9PT0gdGFyZ2V0UmVjdC5ib3R0b20pe1xuICAgICAgICAgICAgdGFyZ2V0SW5kZXggPSBpbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0SW5kZXggPSBpbmRleDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjYWxsYmFjayh0YXJnZXRJbmRleCk7XG4gICAgfSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvdXRpbHMuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgaXNQbGFpbk9iamVjdCA9IHJlcXVpcmUoJy4vaXNQbGFpbk9iamVjdCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnIsIGZuKSB7XG4gIGlmKGlzUGxhaW5PYmplY3QoYXJyKSAmJiBhcnIubGVuZ3RoID09PSB2b2lkIDApe1xuICAgIGZvcih2YXIgYXR0ciBpbiBhcnIpe1xuICAgICAgaWYoYXJyLmhhc093blByb3BlcnR5KGF0dHIpKXtcbiAgICAgICAgZm4oYXR0cixhcnJbYXR0cl0sYXJyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1lbHNlIHtcbiAgICB2YXIgaTtcbiAgICB2YXIgbCA9IGFyci5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHJzID0gZm4oYXJyW2ldLCBpKTtcbiAgICAgIGlmIChycyA9PT0gJ2JyZWFrJykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZWFjaC5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9iail7XG4gIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgcHJvdG8gPSBvYmo7XG4gIHdoaWxlIChPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pICE9PSBudWxsKSB7XG4gICAgcHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocHJvdG8pO1xuICB9XG5cbiAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmopID09PSBwcm90bztcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNQbGFpbk9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5bCP56iL5bqP5bel5YW3XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JzsgXG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuLy8gdmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5leHBvcnRzLmdldEN1cnJlbnRQYWdlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKTtcbiAgcmV0dXJuIHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xufTtcblxuZXhwb3J0cy5nZXRSZWZlcnJlclBhZ2UgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhZ2VzID0gZ2V0Q3VycmVudFBhZ2VzKCk7XG4gIHJldHVybiBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcbn07XG5cbnZhciBfaXNUYjtcbi8vIOWNlemhtea1i+ivlemcgOimgVxuZXhwb3J0cy5yZXNldElzVEIgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgX2lzVGIgPSB2YWx1ZTtcbn07XG5cblxuZnVuY3Rpb24gaW5pdElzVEIgKCkge1xuICBpZiAodHlwZW9mIF9pc1RiID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gX2lzVGI7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICB2YXIgVUEgPSBuYXZpZ2F0b3IgPyAobmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3Iuc3d1c2VyQWdlbnQpIDogJyc7XG4gICAgICByZXN1bHQgPSAhIS9BbGlBcHAvaS50ZXN0KFVBKTtcbiAgICAgIGlmICgvQWxpQXBwXFwoKEFQfERpbmdUYWxrfEFNQVB8VUN8UVVBUkspL2kudGVzdChVQSkpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoL0FsaUFwcFxcKEtCL2kudGVzdChVQSkpIHtcbiAgICAgICAgcmVzdWx0ID0gISEvTWlzdC8udGVzdChVQSk7XG4gICAgICB9XG4gICAgICAvL0lERS3mt5jlrp0t5ZWG5a625bqU55So5LiL5pyf5pyb6L+U5ZuedHJ1ZVxuICAgICAgaWYoL0FsaXBheUlERSBUYW9iYW8vLnRlc3QoVUEpKXtcbiAgICAgICAgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdmFyIGN0eCA9IGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY3R4LmNhbklVc2UpKSB7XG4gICAgICAgICAgcmVzdWx0ID0gISFjdHguY2FuSVVzZSgnY2FsbFVzZXJUcmFjaycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICBfaXNUYiA9IHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0OyAgXG4gIH1cbn1cbmV4cG9ydHMuaW5pdElzVEIgPSBpbml0SXNUQjtcblxuZnVuY3Rpb24gaXNUQigpIHtcbiAgaWYgKHR5cGVvZiBfaXNUYiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuICEhX2lzVGI7ICBcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gaW5pdElzVEIoKTtcbiAgfVxufVxuXG52YXIgZ2V0UGxhdGZvcm1UeXBlID0gZnVuY3Rpb24gKCkge1xuICB0cnkge1xuICAgIHJldHVybiB7XG4gICAgICBjdHg6IGRkLFxuICAgICAgcGxhdFR5cGU6ICdkZCcsXG4gICAgICBzZGtUeXBlOiAnZGRtcCcsXG4gICAgICBsb2dEb21haW46ICcvZGRtX2xvZ3MnXG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjdHg6IG15LFxuICAgICAgICBwbGF0VHlwZTogbXkgJiYgbXkudGIgPyAndGFvYmFvJyA6ICdteScsXG4gICAgICAgIHNka1R5cGU6IG15ICYmIG15LnRiID8gJ3Rhb2Jhb21wJyA6ICdteW1wJyxcbiAgICAgICAgbG9nRG9tYWluOiAnL2FsaXBheW1fbG9ncydcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBjdHg6IHR0LFxuICAgICAgICAgIHBsYXRUeXBlOiAndHQnLFxuICAgICAgICAgIHNka1R5cGU6ICd0dG1wJyxcbiAgICAgICAgICBsb2dEb21haW46ICcvYnl0ZWRhbmNlbV9sb2dzJ1xuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjdHg6IHN3YW4sXG4gICAgICAgICAgICBwbGF0VHlwZTogJ2JkJyxcbiAgICAgICAgICAgIHNka1R5cGU6ICdiZG1wJyxcbiAgICAgICAgICAgIGxvZ0RvbWFpbjogJy9iYWlkdW1fbG9ncydcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGN0eDogd3gsXG4gICAgICAgICAgICAgIHBsYXRUeXBlOiAnd3gnLFxuICAgICAgICAgICAgICBzZGtUeXBlOiAnd3htcCcsXG4gICAgICAgICAgICAgIGxvZ0RvbWFpbjogJy93eG1fbG9ncydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgY3R4OiB7fSxcbiAgICAgICAgICAgICAgcGxhdFR5cGU6ICdVTktOT1cnLFxuICAgICAgICAgICAgICBzZGtUeXBlOiAnVU5LTk9XJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLmlzVEIgPSBpc1RCO1xuZXhwb3J0cy5nZXRQbGF0Zm9ybVR5cGUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5wbGF0VHlwZTtcbn07XG5leHBvcnRzLmdldFNka1R5cGUgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBnZXRQbGF0Zm9ybVR5cGUoKS5zZGtUeXBlO1xufTtcbmV4cG9ydHMuZ2V0Q29udGV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGdldFBsYXRmb3JtVHlwZSgpLmN0eDtcbn07XG5leHBvcnRzLmdldExvZ0RvbWFpbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZ2V0UGxhdGZvcm1UeXBlKCkubG9nRG9tYWluO1xufTtcblxuXG52YXIgSFRUUF9SRVFVRVNUID0gJ2h0dHBSZXF1ZXN0JztcbnZhciBSRVFVRVNUID0gJ3JlcXVlc3QnO1xudmFyIEZOID0gZnVuY3Rpb24gKCkge307XG5cbi8qKlxuICog5Y+R6YCBR0VU6K+35rGCXG4gKiBAcGFyYW1zIHtTdHJpbmd9IHVybFxuICogQHBhcmFtcyB7U3RyaW5nfSBvcHRzIHtcbiAqICAgdGltZW91dDogNTAwMFxuICogfVxuICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrIHtcbiAqICAgdGltZW91dDogNTAwMFxuICogfVxuICovXG5leHBvcnRzLnJlcXVlc3QgPSBmdW5jdGlvbiAodXJsLCBvcHRzLCBzdWNjZXNzQ2FsbGJhY2ssIGZhaWx1cmVDYWxsYmFjaykge1xuICAvLyB2YXIgY3R4ID0gdXRpbHMuZ2V0Q29udGV4dCgpIHx8IHt9O1xuICB2YXIgY3R4ID0gZ2V0UGxhdGZvcm1UeXBlKCkuY3R4O1xuICBpZiAoIWlzRnVuY3Rpb24oZmFpbHVyZUNhbGxiYWNrKSkge1xuICAgIGZhaWx1cmVDYWxsYmFjayA9IEZOO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihzdWNjZXNzQ2FsbGJhY2spKSB7XG4gICAgc3VjY2Vzc0NhbGxiYWNrID0gRk47XG4gIH1cblxuICB2YXIgbWV0aG9kTmFtZSA9IG9wdHMucmVxdWVzdE1ldGhvZE5hbWUgfHwgUkVRVUVTVDtcbiAgdmFyIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcbiAgaWYgKCFpc0Z1bmN0aW9uKHJlcSkgJiYgbWV0aG9kTmFtZSAhPT0gUkVRVUVTVCkge1xuICAgIG1ldGhvZE5hbWUgPSBSRVFVRVNUO1xuICAgIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcbiAgfVxuICBpZiAoIWlzRnVuY3Rpb24ocmVxKSAmJiBtZXRob2ROYW1lICE9PSBIVFRQX1JFUVVFU1QpIHtcbiAgICAvLyBjb25zb2xlICYmIGNvbnNvbGUud2Fybign5pa55rOVXCInICsgbWV0aG9kTmFtZSArICdcIuS4jeWtmOWcqCEnKTtcbiAgICBtZXRob2ROYW1lID0gSFRUUF9SRVFVRVNUO1xuICAgIHJlcSA9IGN0eFttZXRob2ROYW1lXTtcbiAgfVxuXG4gIHZhciBkYXRhVHlwZSA9IG9wdHMgJiYgb3B0cy5kYXRhVHlwZSA/IG9wdHMuZGF0YVR5cGUgOiAnYmFzZTY0JztcbiAgdmFyIHRpbWVvdXQgPSBvcHRzICYmIG9wdHMudGltZW91dCA/IG9wdHMudGltZW91dCA6IDMwMDA7XG4gIHZhciBtZXRob2QgPSBvcHRzLm1ldGhvZCB8fCAnR0VUJztcblxuICB2YXIgY2FsbGJhY2tlZDtcbiAgLy8g5aaC5p6cdXJs5rKh5pyJ5bim5Y2P6K6u77yM6L+Z6YeM6KGl5YWF5a6M5pW0XG4gIHVybCA9IHV0aWwuZml4RG9tYWluKHVybCk7XG4gIHZhciBtc2c7XG4gIGlmIChpc0Z1bmN0aW9uKHJlcSkpIHtcbiAgICB2YXIgcmVxT3B0aW9ucyA9IHtcbiAgICAgIHVybDogdXJsLFxuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBkYXRhVHlwZTogZGF0YVR5cGUsXG4gICAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICBpZiAoIWNhbGxiYWNrZWQpIHtcbiAgICAgICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcbiAgICAgICAgICBzdWNjZXNzQ2FsbGJhY2socmVzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgLy8gY29uc29sZSAmJiBjb25zb2xlLndhcm4oJ2FwbHVz5pel5b+X6K+35rGCXCInICsgdXJsICsgJ1wi5aSx6LSl77yM5Y6f5Zug77yaJyArIEpTT04uc3RyaW5naWZ5KHJlcykpO1xuICAgICAgICBpZiAoIWNhbGxiYWNrZWQpIHtcbiAgICAgICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcbiAgICAgICAgICBmYWlsdXJlQ2FsbGJhY2soe1xuICAgICAgICAgICAgZmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGE6IHJlc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBpZiAobWV0aG9kID09PSAnUE9TVCcgJiYgdHlwZW9mIG9wdHMuZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJlcU9wdGlvbnMudXJsID0gcmVxT3B0aW9ucy51cmwuc3BsaXQoJz8nKVswXTtcbiAgICAgIGlmIChIVFRQX1JFUVVFU1QgPT09IG1ldGhvZE5hbWUpIHtcbiAgICAgICAgLy8g5LiT6Zeo5a+56ZKJ6ZKJ55qE5pSv5oyBXG4gICAgICAgIHJlcU9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgIH07XG4gICAgICAgIHJlcU9wdGlvbnMuZGF0YVR5cGUgPSAnanNvbic7XG4gICAgICAgIHJlcU9wdGlvbnMuZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9wdHMuZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXFPcHRpb25zLmRhdGEgPSBvcHRzLmRhdGE7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIF9leHRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXJlcXVlc3QtZXh0aW5mbycpO1xuICAgIGlmICh0eXBlb2YgX2V4dEluZm8gPT09ICdvYmplY3QnKSB7XG4gICAgICByZXFPcHRpb25zLl9leHRJbmZvID0gX2V4dEluZm87XG4gICAgfVxuICAgIHJlcShyZXFPcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWNhbGxiYWNrZWQpIHtcbiAgICAgIGNhbGxiYWNrZWQgPSB0cnVlO1xuICAgICAgZmFpbHVyZUNhbGxiYWNrKHtcbiAgICAgICAgZmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgZGF0YTogbXNnXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFjYWxsYmFja2VkKSB7XG4gICAgICBjYWxsYmFja2VkID0gdHJ1ZTtcbiAgICAgIG1zZyA9ICdhcGx1cyBsb2cgcmVxdWVzdFwiJyArIHVybCArICcgdGltZW91dFwiLCB0aW1lIHNwZW5kJyArIHRpbWVvdXQgKyAnbXMnO1xuICAgICAgY29uc29sZSAmJiBjb25zb2xlLndhcm4obXNnKTtcbiAgICAgIGZhaWx1cmVDYWxsYmFjayh7XG4gICAgICAgIGZhaWx1cmU6IHRydWUsXG4gICAgICAgIGRhdGE6IG1zZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB0aW1lb3V0KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobykge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbic7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzRnVuY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmoIflh4blt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnLi91dGlsQXJyYXknKTtcbi8vIHZhciBmb3JtYXQgPSByZXF1aXJlKCcuL2Zvcm1hdCcpO1xuXG52YXIgc19wbGFpbl9vYmogPSAnOjotcGxhaW4tOjonO1xuZXhwb3J0cy5ta1BsYWluS2V5ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gc19wbGFpbl9vYmogKyBNYXRoLnJhbmRvbSgpO1xufTtcbmV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblxuLy8gMjAxNi0wOC0yNCDnkKzlrZDpnIDmsYLvvIxleHBhcmFtc+WNleeLrOWkhOeQhu+8jHdpbmR2YW5l6YeM6ZyA6KaBIEDosIvlo6tcbmV4cG9ydHMubWtQbGFpbktleUZvckV4cGFyYW1zID0gZnVuY3Rpb24oa2V5X3ByZWZpeCkge1xuICB2YXIgX2tleSA9IGtleV9wcmVmaXggfHwgc19wbGFpbl9vYmo7XG4gIHJldHVybiBfa2V5ICsgJ2V4cGFyYW1zJztcbn07XG5cbi8qKlxuICogYXJyYXkgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleeahOaVsOe7hOi9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byP77yMXG4gKiDlhbbkuK3mlbDnu4TkuLpcbiAqICAgICAgW1trMSwgdjFdLCBbazIsIHYyXSwgW2szLCB2M10sIC4uLl1cbiAqIOeahOW9ouW8j+OAglxuICog5LiOIG9iajJwYXJhbSDnm7jmr5TvvIzov5nkuKrmlrnms5XnmoTlpb3lpITmmK/lj6/ku6Xkv53or4HmnIDlkI7lj4LmlbDnmoTpobrluo9cbiAqIEBwYXJhbSBhcnIge0FycmF5fVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5mdW5jdGlvbiBhcnIycGFyYW0oYXJyKSB7XG4gIHZhciBhID0gW10sXG4gICAgayxcbiAgICB2LFxuICAgIGksXG4gICAgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogKGsgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodikpKTtcbiAgfVxuICByZXR1cm4gYS5qb2luKCcmJyk7XG59O1xuZXhwb3J0cy5hcnIycGFyYW0gPSBhcnIycGFyYW07XG5cblxuLyoqXG4gKiBwYXJhbSB0byBhcnJheVxuICogMjAxNi0wOC0yNCDmlL7lvIDvvIznlKjmnaXlpITnkIZleHBhcmFtcyBA6LCL5aOrXG4gKiDlsIbkuIDkuKrnroDljZXnmoTlvaLlpoIgYT0xJmI9MiZjPTMg6L+Z5qC355qE5Y+C5pWw6L2s5YyW5Li6566A5Y2V55qEIGFycmF5IOagvOW8j++8jOWmgu+8mlxuICogW1tcImFcIiwgXCIxXCJdLCBbXCJiXCIsIFwiMlwiXSwgW1wiY1wiLCBcIjNcIl1dXG4gKlxuICogQHBhcmFtIHBhcmFtcyB7U3RyaW5nfVxuICovXG5leHBvcnRzLnBhcmFtMmFyciA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgdmFyIGEgPSBwYXJhbXMuc3BsaXQoXCImXCIpLFxuICAgIGkgPSAwLCBsID0gYS5sZW5ndGgsXG4gICAgaXRlbSxcbiAgICBhcnIgPSBbXTtcbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBpdGVtID0gYVtpXS5zcGxpdChcIj1cIik7XG4gICAgYXJyLnB1c2goW2l0ZW0uc2hpZnQoKSwgaXRlbS5qb2luKFwiPVwiKV0pO1xuICB9XG5cbiAgcmV0dXJuIGFycjtcbn07XG5cbmV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgcmV0W2tdID0gdjtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcbi8vIOS7heaUr+aMgeS4gOe6p2pzb27nu5PmnoRcbmV4cG9ydHMuanNvbkxpa2VTdHIySlNPTiA9IGZ1bmN0aW9uKGpzb25TdHIpIHtcbiAgaWYgKCFqc29uU3RyIHx8IHR5cGVvZiBqc29uU3RyICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICB2YXIgc3RyID0ganNvblN0ci5yZXBsYWNlKC9bJ1wie31dKy9nLCAnJyk7XG4gIHZhciBhcnIxID0gc3RyLnNwbGl0KCcsJyk7IFxuICB2YXIgYXJyMiA9IFtdOyBcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIxLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyMi5wdXNoKGFycjFbaV0uc3BsaXQoJzonKSk7XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHRoaXMuYXJyMm9iaihhcnIyKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZml4RG9tYWluID0gZnVuY3Rpb24odXJsKSB7ICBcbiAgaWYgKHVybC5pbmRleE9mKCdodHRwczovLycpICE9PSAtMSB8fCB1cmwuaW5kZXhPZignaHR0cDovLycpICE9PSAtMSkge1xuICAgIHJldHVybiB1cmw7XG4gIH0gZWxzZSB7XG4gICAgdXJsID0gKC9eXFwvXFwvLy50ZXN0KHVybCkgPyAnJyA6ICcvLycpICsgdXJsOyAgICBcbiAgICBpZiAoL15cXC9cXC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgICByZXR1cm4gJ2h0dHA6JyArIHVybDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdodHRwczonICsgdXJsO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy5nZXRBcHBLZXkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJykuZ2V0R2xvYmFsVmFsdWUoXCJhcGx1c1wiKTtcbiAgcmV0dXJuIGFwbHVzLmdldE1ldGFJbmZvKCdhcHBrZXknKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwSWQnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbygnYXBwS2V5Jyk7XG59O1xuXG5leHBvcnRzLmNoZWNrRW1wdHlPYmogPSBmdW5jdGlvbihkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcgfHwgKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aCA9PT0gMCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5leHBvcnRzLmNoZWNrRG9tYWluID0gZnVuY3Rpb24odXJsKSB7XG4gIHZhciByZWcgPSBuZXcgUmVnRXhwKC9eKChodHRwfGh0dHBzfCcnKTpcXC9cXC8pPyhbYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfShcXC5bYS16QS1aMC05XVstYS16QS1aMC05XXswLDYyfSkrKDpbMC05XXsxLDV9KSopJC8pO1xuICB2YXIgbWF0Y2hlZCA9ICh1cmwubWF0Y2gocmVnKSB8fCBbXSlbMF07ICBcbiAgaWYgKCF1cmwgfHwgIW1hdGNoZWQpIHtcbiAgICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcbiAgICB1bG9nKCkudGlwX3coXCJ0cmFja0RvbWFpbiBlcnJvciwgcGxlYXNlIGNoZWNrIGFwbHVzLXJob3N0LXYgc2V0dGluZywgY3VycmVudCB2YWx1ZSBpczogXCIgKyB1cmwgfHwgJ3VuZGVmaW5lZCcpO1xuICAgIHVsb2coKS50aXBfdyhcIndlIGFjY2VwdCB0aGVzZSB0aHJlZSBwYXR0ZXJuczpcIik7XG4gICAgdWxvZygpLnRpcF93KFwiZWcxOiBodHRwczovL3Rlc3QtcXRyYWNraW5nLXh4eC5jb206cG9ydCwgcG9ydCBpcyBvcHRpb25hbFwiKTtcbiAgICB1bG9nKCkudGlwX3coXCJlZzI6IGh0dHA6Ly90ZXN0LXF0cmFja2luZy14eHguY29tOnBvcnQsIHBvcnQgaXMgb3B0aW9uYWxcIik7XG4gICAgdWxvZygpLnRpcF93KFwiZWczOiB0ZXN0LXF0cmFja2luZy14eHguY29tOnBvcnQsIHBvcnQgaXMgb3B0aW9uYWxcIik7XG4gICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoXCIhXCIpKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH0gXG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0cy5jaGVja09wZW5pZCA9IGZ1bmN0aW9uKG9kKSB7XG4gIGlmICghb2QpIHtcbiAgICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoJyEnKSk7XG4gICAgdWxvZygpLnRpcF93KFwiUVQgbmVlZCBhbiB1bmlxdWUgaWQgYXMgUVQncyBkZXZpY2VpZCEhXCIpO1xuICAgIHVsb2coKS50aXBfdyhcInNldHRpbmcgZXhhbXBsZXM6IGFwbHVzX3F1ZXVlLnB1c2goe2FjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJywgYXJndW1lbnRzOiBbJ19hbm9ueV9pZCcsIHh4eHh4eF19KTtcIik7XG4gICAgdWxvZygpLnRpcF93KFwicmVmZXJyZW5jZSBkb2N1bWVudDogaHR0cHM6Ly90LnRiLmNuLzFkVEhqVFRRRjBVak9UTkhpQ2thQ1NcIik7XG4gICAgdWxvZygpLnRpcF93KHVsb2coKS5yZXBlYXQoJyEnKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuZXhwb3J0cy5tYXBFdmVudFNhbXBsZVJhdGVzID0gZnVuY3Rpb24oYXJyKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZWFjaChhcnIsIGZ1bmN0aW9uKGl0ZW0pe1xuICAgIGlmIChpdGVtLmV2ZW50SWRzICYmIGl0ZW0uZXZlbnRJZHMubGVuZ3RoID4gMCkge1xuICAgICAgZWFjaChpdGVtLmV2ZW50SWRzLCBmdW5jdGlvbihla3Ype1xuICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgZXZlbnRJZDogZWt2LFxuICAgICAgICAgIHNhbXBsaW5nUmF0ZTogaXRlbS5zYW1wbGluZ1JhdGVcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG52YXIgTE9HX1BSRUZJWCA9ICdbQVBMVVNdIC0tICc7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG4gIHZhciBfZGVidWcgPSBmYWxzZTtcblxuICBmdW5jdGlvbiBVTG9nKCkge1xuICAgIHRoaXMuc2V0RGVidWcgPSBmdW5jdGlvbiAoZGVidWcpIHtcbiAgICAgIF9kZWJ1ZyA9IGRlYnVnO1xuICAgIH07XG5cbiAgICB0aGlzLmkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmluZm8uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIC8vIGVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoX2RlYnVnKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBhcmd1bWVudHNbMF0gPSBMT0dfUFJFRklYICsgYXJndW1lbnRzWzBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy53ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kZWJ1Zykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0eXBlb2YgYXJndW1lbnRzWzBdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS53YXJuLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy52ID0gZnVuY3Rpb24gKCkgeyAgICAgIFxuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgYXJndW1lbnRzWzBdID0gTE9HX1BSRUZJWCArIGFyZ3VtZW50c1swXTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSwgYXJndW1lbnRzKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gZVxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnRpcF93ID0gZnVuY3Rpb24gKG1zZykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgJyVjICcgKyBMT0dfUFJFRklYICsgbXNnLFxuICAgICAgICAgICdiYWNrZ3JvdW5kOnJlZDsgcGFkZGluZzogNHB4OyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGJvcmRlci1yYWRpdXM6IDRweDsgY29sb3I6ICNmZmY7J1xuICAgICAgICApO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBlXG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVwZWF0ID0gZnVuY3Rpb24oY2hhcikge1xuICAgICAgdmFyIHJlcyA9IGNoYXI7XG4gICAgICB3aGlsZSAocmVzLmxlbmd0aCA8IDg2KSB7XG4gICAgICAgIHJlcyA9IHJlcyArIGNoYXI7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmIChfaW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgIF9pbnN0YW5jZSA9IG5ldyBVTG9nKCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3Vsb2cuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiB1dGlsT2JqZWN0LmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5leHBvcnRzLmlzT2JqZWN0ID0gZnVuY3Rpb24oZSkge1xuICByZXR1cm4gbnVsbCAhPT0gZSAmJiBcIltvYmplY3QgT2JqZWN0XVwiID09PSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk7XG59O1xuXG5leHBvcnRzLmlzRW1wdHlPYmplY3QgPSBmdW5jdGlvbihlKSB7XG4gIGlmICh0aGlzLmlzT2JqZWN0KGUpKSB7XG4gICAgZm9yICh2YXIgciBpbiBlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsIHIpKSBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbE9iamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDlhYvpmobkuIDkuKpvYmplY3RcbiAqL1xuZnVuY3Rpb24gY2xvbmVEZWVwIChvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IEFycmF5LmlzQXJyYXkob2JqKSA/IFtdIDoge307IC8vRml4IG9iai5jb250cnVjdG9yIHR5cGVFcnJvciBjb25zdHJ1Y3RvciB1bmRlZmluZWRcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9IGVsc2UgaWYgKEpTT04gJiYgSlNPTi5wYXJzZSkge1xuICAgIHN0ciA9IEpTT04uc3RyaW5naWZ5KG9iaik7IC8v57O75YiX5YyW5a+56LGhXG4gICAgbmV3b2JqID0gSlNPTi5wYXJzZShzdHIpOyAvL+i/mOWOn1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgaW4gb2JqKSB7XG4gICAgICBuZXdvYmpbaV0gPSB0eXBlb2Ygb2JqW2ldID09PSAnb2JqZWN0JyA/IGNsb25lRGVlcChvYmpbaV0pIDogb2JqW2ldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbmV3b2JqO1xufVxubW9kdWxlLmV4cG9ydHMgPSBjbG9uZURlZXA7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvY2xvbmVEZWVwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBjbG9uZURlZXAgPSByZXF1aXJlKCdAdXRpbHMvY2xvbmVEZWVwJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG4gIHZhciBfcmVzdW1lVGltZSA9IG51bGw7XG4gIHZhciBfY3VycmVudFNlc3Npb24gPSBudWxsOyAvLyDlvZPliY1zZXNzaW9u5a+56LGhXG5cbiAgZnVuY3Rpb24gaW5pdCgpe1xuICAgIHJldHVybiB7XG4gICAgICByZXN1bWU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHZhciBuZXdTZXNzaW9uID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFfY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgICBfY3VycmVudFNlc3Npb24gPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5DVVJSRU5UX1NFU1NJT04pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBfcmVzdW1lVGltZSA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICBpZiAoIV9jdXJyZW50U2Vzc2lvblxuICAgICAgICAgIHx8ICFfY3VycmVudFNlc3Npb24uZW5kX3RpbWVcbiAgICAgICAgICB8fCBfcmVzdW1lVGltZSAtIF9jdXJyZW50U2Vzc2lvbi5lbmRfdGltZSA+IGFwbHVzU3RhdGljLlNFU1NJT05fSU5URVJWQUwpIHtcbiAgICAgICAgICBuZXdTZXNzaW9uID0gdHJ1ZTtcbiAgICAgICAgICBfY3JlYXRlTmV3U2Vzc2lvbihvcHRpb25zKTtcbiAgICAgICAgICB1bG9nKCkuaSgnc3RhcnQgbmV3IHNlc3Npb24oJXMpOiAnLCBfY3VycmVudFNlc3Npb24uaWQsIF9jdXJyZW50U2Vzc2lvbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLmkoJ2NvbnRpbnVlIGxhc3Qgc2Vzc2lvbiglcyk6ICVzICcsIF9jdXJyZW50U2Vzc2lvbi5pZCwgZGF0ZS50b0xvY2FsZVRpbWVTdHJpbmcoKSwgX2N1cnJlbnRTZXNzaW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3U2Vzc2lvbjtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOWcqG9uSGlkZeaWueazleaXtumXreWQiHNlc3Npb25cbiAgICAgIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9lbmRTZXNzaW9uKCk7XG4gICAgICB9LFxuXG4gICAgICAvLyDojrflj5blvZPliY3nmoRzZXNzaW9uSWTvvIzmsqHmnInliJnov5Tlm57nqbpcbiAgICAgIGdldEN1cnJlbnRTZXNzaW9uSWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIChfY3VycmVudFNlc3Npb24gfHwge30pLmlkO1xuICAgICAgfSxcblxuICAgICAgZ2V0Q3VycmVudFNlc3Npb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9jdXJyZW50U2Vzc2lvbjtcbiAgICAgIH0sXG5cbiAgICAgIGNsb25lQ3VycmVudFNlc3Npb246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNsb25lRGVlcChfY3VycmVudFNlc3Npb24pO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0VW1QYXJhbXMocXVlcnkpIHtcbiAgICB2YXIgYXBsdXNfcXVlcnkgPSB7fTtcbiAgICBmb3IgKHZhciBpIGluIHF1ZXJ5KSB7XG4gICAgICBhcGx1c19xdWVyeVtpXSA9IHF1ZXJ5W2ldO1xuICAgIH1cblxuICAgIHVsb2coKS5pKCdxdWVyeTogJywgcXVlcnkpO1xuICAgIHJldHVybiBhcGx1c19xdWVyeTtcbiAgfVxuXG4gIC8vIOW8gOWni+S4gOS4quaWsHNlc3Npb25cbiAgZnVuY3Rpb24gX2NyZWF0ZU5ld1Nlc3Npb24obmV3T3B0aW9ucykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgcHJldk9wdGlvbnMgPSAoX2N1cnJlbnRTZXNzaW9uIHx8IHt9KS5vcHRpb25zIHx8IHt9O1xuICAgICAgXG4gICAgICB2YXIgbGF1bmNoT3B0aW9ucyA9IHV0aWxzLmFzc2lnbih7fSwgX2dldFVtUGFyYW1zKG5ld09wdGlvbnMucXVlcnkpKTtcbiAgICAgIGxhdW5jaE9wdGlvbnMucGF0aCA9IG5ld09wdGlvbnMucGF0aCB8fCBwcmV2T3B0aW9ucy5wYXRoO1xuICAgICAgbGF1bmNoT3B0aW9ucy5zY2VuZSA9IG5ld09wdGlvbnMuc2NlbmVcbiAgICAgICAgPyBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgbmV3T3B0aW9ucy5zY2VuZVxuICAgICAgICA6IHByZXZPcHRpb25zLnNjZW5lO1xuXG4gICAgICB2YXIgcmVmZXJyZXJJbmZvID0gbmV3T3B0aW9ucy5yZWZlcnJlckluZm87XG4gICAgICBpZiAocmVmZXJyZXJJbmZvKSB7XG4gICAgICAgIGxhdW5jaE9wdGlvbnMucmVmZXJyZXJBcHBJZCA9IHJlZmVycmVySW5mby5hcHBJZDtcbiAgICAgIH1cblxuICAgICAgdWxvZygpLmkoJ3Nlc3Npb24gb3B0aW9uczogJywgbGF1bmNoT3B0aW9ucyk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAgIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICAgICAgdmFyIHRzID0gRGF0ZS5ub3coKTtcbiAgICAgIF9jdXJyZW50U2Vzc2lvbiA9IHtcbiAgICAgICAgaWQ6IHV0aWxzLmdldFJhbmRvbVN0cigxMCkgKyB0cyxcbiAgICAgICAgc3RhcnRfdGltZTogdHMsXG4gICAgICAgIG9wdGlvbnM6IGxhdW5jaE9wdGlvbnMsXG4gICAgICAgIHN0YXRlX3M6IDFcbiAgICAgIH07IFxuICAgICAgaWYgKGdwKSB7XG4gICAgICAgIF9jdXJyZW50U2Vzc2lvblsnZ3AnXSA9IGdwO1xuICAgICAgfSBcblxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVsb2coKS5lKCdnZW5lcmF0ZSBuZXcgc2Vzc2lvbiBmYWlsZWQsIGVycm1zZzogJywgZSk7XG4gICAgfVxuICB9XG5cbiAgLy8g57uT5p2f5b2T5YmNc2Vzc2lvbu+8jOeUseS6jjMw56eS5py65Yi277yM5LiA5Liqc2Vzc2lvbuS8muiiq+e7k+adn+WkmuasoVxuICBmdW5jdGlvbiBfZW5kU2Vzc2lvbigpIHtcbiAgICBpZiAoX2N1cnJlbnRTZXNzaW9uKSB7XG4gICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBfY3VycmVudFNlc3Npb24uZW5kX3RpbWUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgIGlmICh0eXBlb2YgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uICE9PSAnbnVtYmVyJykge1xuICAgICAgICBfY3VycmVudFNlc3Npb24uZHVyYXRpb24gPSAwO1xuICAgICAgfVxuICAgICAgX2N1cnJlbnRTZXNzaW9uLmR1cmF0aW9uID0gX2N1cnJlbnRTZXNzaW9uLmVuZF90aW1lIC0gX3Jlc3VtZVRpbWU7XG4gICAgICBfY3VycmVudFNlc3Npb24uc3RhdGVfcyA9IDA7XG4gICAgICBjYWNoZSgpLnNldChhcGx1c1N0YXRpYy5DVVJSRU5UX1NFU1NJT04sIF9jdXJyZW50U2Vzc2lvbik7XG5cbiAgICAgIHVsb2coKS5pKCdzZXNzaW9uIGVuZCAoJXMpOiAlcyAnLCBfY3VycmVudFNlc3Npb24uaWQsIGRhdGUudG9Mb2NhbGVUaW1lU3RyaW5nKCksIF9jdXJyZW50U2Vzc2lvbik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIV9pbnN0YW5jZSkge1xuICAgICAgX2luc3RhbmNlID0gaW5pdCgpO1xuICAgIH1cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xuXG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX3Nlc3Npb25fbWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIF9pbnN0YW5jZSA9IG51bGw7XG4gIHZhciBfbmFtZSA9ICcnO1xuICB2YXIgX2RhdGEgPSBudWxsO1xuICB2YXIgX2xvYWRlZCA9IGZhbHNlO1xuXG4gIGZ1bmN0aW9uIENhY2hlKCkge1xuICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICB0aGlzLmxvYWQgPSBmdW5jdGlvbiAoY2IpIHtcbiAgICAgIGlmICghX2RhdGEpIHtcbiAgICAgICAgX25hbWUgPSAnYXBsdXNfY2FjaGVfJyArIHV0aWwuZ2V0QXBwS2V5KCkgfHwgJyc7XG4gICAgICAgIGN0eC5nZXRTdG9yYWdlKHtcbiAgICAgICAgICBrZXk6IF9uYW1lLFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLmRhdGEpIHtcbiAgICAgICAgICAgICAgX2RhdGEgPSBqc29uVXRpbC5wYXJzZShyZXMuZGF0YSkgfHwge307XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBfZGF0YSA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2xvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG4gICAgICAgICAgICAgIGtleTogX25hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGZhaWw6IGZ1bmN0aW9uIChlKSB7XG5cbiAgICAgICAgICAgIHVsb2coKS53KF9uYW1lICsgJzogJyArIGUuZXJyTXNnKTtcbiAgICAgICAgICAgIF9kYXRhID0ge307XG4gICAgICAgICAgICBfbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGN0eC5yZW1vdmVTdG9yYWdlKHtcbiAgICAgICAgICAgICAga2V5OiBfbmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHgucmVtb3ZlU3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBfbmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgaXNGdW5jdGlvbihjYikgJiYgY2IoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zYXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKF9kYXRhKSB7XG4gICAgICAgIGN0eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICBrZXk6IF9uYW1lLFxuICAgICAgICAgIGRhdGE6IGpzb25VdGlsLnN0cmluZ2Z5KF9kYXRhKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKF9kYXRhKSB7XG4gICAgICAgIF9kYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7ICAgICAgXG4gICAgICByZXR1cm4gKF9kYXRhIHx8IHt9KVtrZXldO1xuICAgIH07XG5cbiAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmIChfZGF0YSAmJiBfZGF0YVtrZXldKSB7XG4gICAgICAgIGRlbGV0ZSBfZGF0YVtrZXldO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmdldEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBfZGF0YTtcbiAgICB9O1xuXG4gICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIF9kYXRhID0gbnVsbDtcbiAgICB9O1xuXG4gICAgdGhpcy5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gISF0aGlzLmdldChrZXkpO1xuICAgIH07XG5cbiAgICB0aGlzLmlzTG9hZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9sb2FkZWQ7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0U3luYyA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgICB2YXIgcmVzdWx0ID0gY3R4LmdldFN0b3JhZ2VTeW5jKGtleSk7XG4gICAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTikge1xuICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0gICBcbiAgICAgICAgcmV0dXJuIHR5cGVvZiByZXN1bHQgPT09ICdzdHJpbmcnID8gIGpzb25VdGlsLnBhcnNlKHJlc3VsdCkgOiByZXN1bHQ7XG4gICAgICB9IGNhdGNoKGUpIHt9XG4gICAgfTtcblxuICAgIHRoaXMuc2V0U3luYyA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBjdHguc2V0U3RvcmFnZVN5bmMoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN0eC5zZXRTdG9yYWdlU3luYyhrZXksIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaChlKSB7fVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBuZXcgQ2FjaGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gX2luc3RhbmNlO1xuICB9O1xufSkoKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9jYWNoZS5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG5leHBvcnRzLnN0cmluZ2Z5ID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAoZGF0YSkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufTtcblxuZXhwb3J0cy5wYXJzZSA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgaWYgKGpzb24pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5leHBvcnRzLnBhcnNlVG9BcnJheSA9IGZ1bmN0aW9uKGpzb24pIHtcbiAgaWYgKGpzb24pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gZW1wdHlcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9qc29uVXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZnVuY3Rpb24gZ2V0UmFuZG9tU3RyKGxlbikge1xuICB2YXIgc3RyID0gJyc7XG4gIHZhciBhcnIgPSBbJzAnLCAnMScsICcyJywgJzMnLCAnNCcsICc1JywgJzYnLCAnNycsICc4JywgJzknLCAnYScsICdiJywgJ2MnLCAnZCcsICdlJywgJ2YnLCAnZycsICdoJywgJ2knLCAnaicsICdrJywgJ2wnLCAnbScsICduJywgJ28nLCAncCcsICdxJywgJ3InLCAncycsICd0JywgJ3UnLCAndicsICd3JywgJ3gnLCAneScsICd6JywgJ0EnLCAnQicsICdDJywgJ0QnLCAnRScsICdGJywgJ0cnLCAnSCcsICdJJywgJ0onLCAnSycsICdMJywgJ00nLCAnTicsICdPJywgJ1AnLCAnUScsICdSJywgJ1MnLCAnVCcsICdVJywgJ1YnLCAnVycsICdYJywgJ1knLCAnWiddO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IE51bWJlcihsZW4pOyBpKyspIHtcbiAgICB2YXIgcG9zID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGFyci5sZW5ndGggLSAxKSk7XG4gICAgc3RyICs9IGFycltwb3NdO1xuICB9XG4gIHJldHVybiBzdHI7XG59O1xuZXhwb3J0cy5nZXRSYW5kb21TdHIgPSBnZXRSYW5kb21TdHI7XG5cbmV4cG9ydHMuc3RhcnRzV2l0aCA9IGZ1bmN0aW9uKHN0ciwgc2VhcmNoVmFsKSB7XG4gIGlmICghc3RyIHx8ICFzZWFyY2hWYWwgfHwgc2VhcmNoVmFsLmxlbmd0aCA9PT0gMCB8fCBzZWFyY2hWYWwubGVuZ3RoID4gc3RyLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gc3RyLnN1YnN0cigwLCBzZWFyY2hWYWwubGVuZ3RoKSA9PT0gc2VhcmNoVmFsO1xufTtcblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkIHx8IHRhcmdldCA9PT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IHVuZGVmaW5lZCBvciBudWxsIHRvIG9iamVjdCcpO1xuICB9XG5cbiAgdmFyIG91dHB1dCA9IE9iamVjdCh0YXJnZXQpO1xuICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgIG91dHB1dFtuZXh0S2V5XSA9IHNvdXJjZVtuZXh0S2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufTtcblxuLy8gMS5la3bkuK3lrZjlnKjop4TliJnkuI3lkIjms5Xmg4XlhrXvvIzkuKLlvIPmlbTmnaHkuovku7Zcbi8vIDIuZXZlbnRpZOmVv+W6puS4jeiDvei2hei/hzEyOOS4quWtl+esplxuLy8gMy5rZXnplb/luqbkuI3og73otoXov4cyNTbkuKrlrZfnrKZcbi8vIDQu5q+P5LiqZXZlbnTmkLrluKZrZXnkuKrmlbDkuI3og73otoXov4cxMDDkuKpcbmV4cG9ydHMuY2hlY2tFdmVudCA9IGZ1bmN0aW9uKGV2ZW50SWQsIHByb3BlcnRpZXMpIHtcbiAgdmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4gIHZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbiAgdmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xuICBpZiAoIShldmVudElkICYmIHR5cGVvZiBldmVudElkID09PSAnc3RyaW5nJykpIHtcbiAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBldmVudElkIHx8IFwiJycgZXZlbnQgcHJvcGVydGllcyA9IFwiLCBqc29uVXRpbC5zdHJpbmdmeShwcm9wZXJ0aWVzLmN1c3ApKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyDkv53nlZnlhbPplK7lrZdcbiAgdmFyIHJlc2VydmVXb3JkcyA9IFsnaWQnLCAnZHUnXTtcbiAgdmFyIHJlc2VydmVXb3JkTWFwID0ge307XG5cbiAgcmVzZXJ2ZVdvcmRzLmZvckVhY2goZnVuY3Rpb24gKHdvcmQpIHtcbiAgICByZXNlcnZlV29yZE1hcFt3b3JkXSA9IDE7XG4gIH0pO1xuXG4gIC8vIOajgOafpWV2ZW50SWTmmK/lkKbkuI7kv53nlZnlhbPplK7lrZflhrLnqoFcbiAgaWYgKHJlc2VydmVXb3JkTWFwW2V2ZW50SWRdKSB7XG4gICAgdWxvZygpLmUoJ2V2ZW50SWQgaGFzIGNvbmZsaWN0IHdpdGggcmVzZXJ2ZXdvcmRzOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKGV2ZW50SWQubGVuZ3RoID4gYXBsdXNTdGF0aWMuTUFYX0VWRU5USURfTEVOR1RIKSB7XG4gICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBldmVudCBpZCBzaGFsbCBub3QgZXhjZWVkICcgKyBhcGx1c1N0YXRpYy5NQVhfRVZFTlRJRF9MRU5HVEgpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIHByb3BlcnRpZXPnmoTlkIjms5XnsbvlnovkuLogc3RyaW5nIHwgb2JqZWN0KG5vdCBpbmNsdWRlIEFycmF5KVxuICBpZiAocHJvcGVydGllc1xuICAgICYmICh0eXBlb2YgcHJvcGVydGllcyAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheShwcm9wZXJ0aWVzKSlcbiAgICAmJiB0eXBlb2YgcHJvcGVydGllcyAhPT0gJ3N0cmluZycpIHtcbiAgICB1bG9nKCkuZSgncGxlYXNlIGNoZWNrIHRyYWNrRXZlbnQgcHJvcGVydGllcy4gcHJvcGVydGllcyBzaG91bGQgYmUgc3RyaW5nIG9yIG9iamVjdChub3QgaW5jbHVkZSBBcnJheSknKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAodHlwZW9mIHByb3BlcnRpZXMgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgICAgaWYgKHt9Lmhhc093blByb3BlcnR5LmNhbGwocHJvcGVydGllcywga2V5KSkge1xuICAgICAgICBpZiAoa2V5Lmxlbmd0aCA+IGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlfTEVOR1RIKSB7XG4gICAgICAgICAgdWxvZygpLmUoJ1RoZSBtYXhpbXVtIGxlbmd0aCBvZiBwcm9wZXJ0eSBrZXkgc2hhbGwgbm90IGV4Y2VlZCAnICsgYXBsdXNTdGF0aWMuTUFYX1BST1BFUlRZX0tFWV9MRU5HVEgpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb3VudCA+PSBhcGx1c1N0YXRpYy5NQVhfUFJPUEVSVFlfS0VZU19DT1VOVCkge1xuICAgICAgICAgIHVsb2coKS5lKCdUaGUgbWF4aW11bSBjb3VudCBvZiBwcm9wZXJ0aWVzIHNoYWxsIG5vdCBleGNlZWQgJyArIGFwbHVzU3RhdGljLk1BWF9QUk9QRVJUWV9LRVlTX0NPVU5UKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmVzZXJ2ZVdvcmRNYXBba2V5XSkge1xuICAgICAgICAgIHVsb2coKS5lKCdwcm9wZXJ0eSBrZXkgaGFzIGNvbmZsaWN0IHdpdGggcmVzZXJ2ZVdvcmRzOiAnICsgcmVzZXJ2ZVdvcmRzLmpvaW4oJywnKSk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnQgKz0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xuXG5leHBvcnRzLmRlbGV0ZUluZm8gPSBmdW5jdGlvbihnb2tleSwgYXJyKSB7XG4gIGVhY2goYXJyLCBmdW5jdGlvbih2KSB7XG4gICAgZGVsZXRlIGdva2V5W3ZdO1xuICB9KTtcbiAgcmV0dXJuIGdva2V5O1xufTtcblxuZXhwb3J0cy5jaGVja0VtcHR5T2JqID0gZnVuY3Rpb24oZGF0YSkge1xuICBpZiAodHlwZW9mIGRhdGEgIT09ICdvYmplY3QnIHx8IChPYmplY3Qua2V5cyhkYXRhKS5sZW5ndGggPT09IDApKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5nZXRTdGFydElkID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBnZXRSYW5kb21TdHIoMTApICsgRGF0ZS5ub3coKTtcbn07XG5cbmV4cG9ydHMuRGF0YVR5cGUgPSB7XG4gIEhBTEZfU0VTU0lPTjogJ2hhbGZfc2Vzc2lvbicsXG4gIENMT1NFX1NFU1NJT046ICdjbG9zZV9zZXNzaW9uJyxcbiAgRUtWOiAnZWt2JyxcbiAgRU5URVJfUEFHRTogJ2VudGVyX3BhZ2UnLFxuICBMRUFWRV9QQUdFOiAnbGVhdmVfcGFnZSdcbn07XG5cbmV4cG9ydHMuQWNjZXNzVHlwZSA9IHtcbiAgTU9CSUxFX05FVFdPUktfMkc6ICcyZycsXG4gIE1PQklMRV9ORVRXT1JLXzNHOiAnM2cnLFxuICBNT0JJTEVfTkVUV09SS180RzogJzRnJyxcbiAgTU9CSUxFX05FVFdPUktfTk9ORTogJ25vbmUnXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBpc0FycmF5ID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtcbiAgdmFyIF9pbnN0YW5jZTtcbiAgdmFyIF9zZXNzaW9uSWQ7XG4gIHZhciBfc3RhcnRJZDtcbiAgdmFyIF9tZW1vcnlFdmVudHMgPSBbXTtcblxuICAvLyDlnKjliJvlu7pzZXNzaW9uSWTliY3mt7vliqDnmoTkuovku7ZcbiAgdmFyIF9ub1Nlc3Npb25FdmVudHMgPSBbXTtcblxuICBmdW5jdGlvbiBfY2FjaGVFdmVudHMoKSB7XG4gICAgaWYgKF9tZW1vcnlFdmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpO1xuICAgICAgXG4gICAgICAvLyDmnKzlnLDmnIDlpJrlrZjlgqggRVZFTlRfTUFYX0NPVU5UIOadoeaVsOaNru+8jOOAjOWkmuS9meaVsOaNruOAjeaaguaXtuWFiOaKm+W8g1xuICAgICAgaWYgKF9nZXRDYWNoZUV2ZW50c0xlbmd0aChla3ZzKSArIF9tZW1vcnlFdmVudHMubGVuZ3RoIDw9IGFwbHVzU3RhdGljLkVWRU5UX01BWF9DT1VOVCkge1xuICAgICAgICBla3ZzID0gX2J1aWxkRWt2cyhla3ZzLCBfbWVtb3J5RXZlbnRzKTtcbiAgICAgICAgXG4gICAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLkVLVlMsIGVrdnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9idWlsZEVrdnMoZWt2cywgbWVtb3J5RXZlbnRzKSB7XG4gICAgZWt2cyA9IGVrdnMgfHwge307XG4gICAgdmFyIGV2ZW50cyA9IGVrdnNbX3Nlc3Npb25JZF07XG4gICAgaWYgKGlzQXJyYXkoZXZlbnRzKSAmJiBldmVudHMubGVuZ3RoKSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gZXZlbnRzLmNvbmNhdChtZW1vcnlFdmVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBla3ZzW19zZXNzaW9uSWRdID0gW10uY29uY2F0KG1lbW9yeUV2ZW50cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVrdnM7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0Q2FjaGVFdmVudHNMZW5ndGgoZXZlbnRzTWFwKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIga2V5IGluIGV2ZW50c01hcCkge1xuICAgICAgaWYgKGlzQXJyYXkoZXZlbnRzTWFwW2tleV0pKSB7XG4gICAgICAgIGxlbiArPSBldmVudHNNYXBba2V5XS5sZW5ndGg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsZW47XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBhZGRFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICghZXZlbnQpIHJldHVybjtcbiAgICAgICAgaWYgKF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBfbWVtb3J5RXZlbnRzLnVuc2hpZnQoZXZlbnQpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChfbWVtb3J5RXZlbnRzLmxlbmd0aCA+IGFwbHVzU3RhdGljLk1FTU9SWV9NQVhfQ09VTlQpIHtcbiAgICAgICAgICAgIF9jYWNoZUV2ZW50cyhfc2Vzc2lvbklkKTtcbiAgICAgICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ3Nlc3Npb24gaWQgaXMgbnVsbDogJywgX3Nlc3Npb25JZCk7XG4gICAgICAgICAgXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy51bnNoaWZ0KGV2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgc2V0U2Vzc2lvbklkOiBmdW5jdGlvbiAoc2Vzc2lvbklkKSB7XG4gICAgICAgIF9zZXNzaW9uSWQgPSBzZXNzaW9uSWQ7XG4gICAgICAgIGlmIChpc0FycmF5KF9ub1Nlc3Npb25FdmVudHMpICYmIF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoICYmIF9zZXNzaW9uSWQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9ub1Nlc3Npb25FdmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnQoX25vU2Vzc2lvbkV2ZW50c1tpXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBzZXRTdGFydElkOiBmdW5jdGlvbihzdGFydElkKSB7XG4gICAgICAgIF9zdGFydElkID0gc3RhcnRJZDtcbiAgICAgIH0sXG5cbiAgICAgIGdldFN0YXJ0SWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gX3N0YXJ0SWQ7XG4gICAgICB9LFxuXG4gICAgICBnZXRFa3ZzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBla3ZzID0gY2FjaGUoKS5nZXQoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoX21lbW9yeUV2ZW50cyAmJiBfbWVtb3J5RXZlbnRzLmxlbmd0aCkge1xuICAgICAgICAgIGVrdnMgPSBfYnVpbGRFa3ZzKGVrdnMsIF9tZW1vcnlFdmVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBla3ZzO1xuICAgICAgfSxcblxuICAgICAgLy8g6L+U5Zue5b2T5YmNZWt2c+WGheeahOaXpeW/l+adoeaVsFxuICAgICAgZ2V0RWt2c0xlbjogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWt2cyA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLkVLVlMpIHx8IHt9O1xuICAgICAgICB2YXIgZXZlbnRzID0gZWt2c1tfc2Vzc2lvbklkXSB8fCBbXTtcbiAgICAgICAgdmFyIG1lbW9yeUV2ZW50c0xlbiA9IF9tZW1vcnlFdmVudHMgPyBfbWVtb3J5RXZlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIHJldHVybiBldmVudHMubGVuZ3RoICsgbWVtb3J5RXZlbnRzTGVuO1xuICAgICAgfSxcblxuICAgICAgY2xlYXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2FjaGUoKS5yZW1vdmUoYXBsdXNTdGF0aWMuRUtWUyk7XG4gICAgICAgIF9tZW1vcnlFdmVudHMubGVuZ3RoID0gMDtcbiAgICAgICAgX25vU2Vzc2lvbkV2ZW50cy5sZW5ndGggPSAwO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICghX2luc3RhbmNlKSB7XG4gICAgICBfaW5zdGFuY2UgPSBpbml0KCk7XG4gICAgfVxuICAgIHJldHVybiBfaW5zdGFuY2U7XG4gIH07XG59KSgpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG8pIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShvKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gL0FycmF5Ly50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKSk7XG4gIH1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvaXNBcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gMjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBidWlsZEJvZHkgPSByZXF1aXJlKCcuL2JvZHlCdWlsZGVyJyk7XG52YXIgcmVxdWVzdCA9IHJlcXVpcmUoJy4vcmVxdWVzdCcpO1xudmFyIFF1ZXVlID0gcmVxdWlyZSgnLi9xdWV1ZScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG4vLyB2YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7IFxuICB2YXIgX3JlcUtleSA9IG51bGw7XG4gIHZhciBfaW5zdGFuY2UgPSBudWxsO1xuICB2YXIgX2ZhaWxSZXF1ZXN0cyA9IFtdO1xuICAvLyDljp/mnaXnmoRhcGx1c1N0YXRpYy5NQVhfUVVFVUVfQ09VTlTpmZDliLbkuoZfcXVldWXnmoTplb/luqbvvIzlnKjlrp7pmYXlnLrmma/kuK3ml6DnlKhcbiAgdmFyIF9xdWV1ZSA9IG5ldyBRdWV1ZSgpO1xuICB2YXIgX2ZhaWxlZFF1ZXVlPSBuZXcgUXVldWUoKTtcbiAgZnVuY3Rpb24gX2VucXVldWVSZXF1ZXN0KGRhdGFUeXBlLCBvcHRpb25zLCBjYikge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBkYXRhID0gYnVpbGRCb2R5KGRhdGFUeXBlKTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgdmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcbiAgICAgIGRhdGEuaGVhZGVyID0gdXRpbERhc2guYXNzaWduKGRhdGEuaGVhZGVyLCBIZWFkZXIuZ2V0TmV0SW5mbyhjbGllbnQpKTtcbiAgICAgIGRhdGEubm9DYWNoZSA9IG9wdGlvbnMubm9DYWNoZTtcbiAgICAgIF9xdWV1ZS5lbnF1ZXVlKGRhdGEpO1xuICAgIH1cbiAgICBpc0Z1bmN0aW9uKGNiKSAmJiBjYigpO1xuICB9XG4gIGZ1bmN0aW9uIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIHZhciBpc05SID0ga2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcbiAgICB2YXIgc2VuZFF1ZXVlID0gaXNOUiA/IF9xdWV1ZSA6IF9mYWlsZWRRdWV1ZTtcbiAgICAvLyDkvb/nlKhkZXF1ZXVl5Luj5pu/ZnJvbnTmlrnms5XvvIxkZXF1ZXVl5bGe5LqO5Ye66Zif77yM6YG/5YWN5LqG6Zif5YiX5pyq5pu05paw5bim5p2l55qE6YeN5aSN5LiK5oqlXG4gICAgdmFyIGRhdGEgPSBzZW5kUXVldWUuZGVxdWV1ZSgpO1xuICAgIHZhciBzdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gX3F1ZXVlLmRlcXVldWUoKTtcbiAgICAgIF9zZW5kUXVldWUoa2V5LCBjb21wbGV0ZWRDYWxsYmFjayk7XG4gICAgfTtcblxuICAgIHZhciBmYWlsID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8g5Y+R6YCB5aSx6LSl5pS+5YWl5aSx6LSl6Zif5YiX77yM562J5b6F5LiL5LiA5qyh5Y+R6YCB5pe25py6XG4gICAgICAvLyDlm6DkuLpkYXRh5L2/55So5Ye66Zif5YiX5pa55rOV77yM5omA5LulX3F1ZXVl5bey5pu05paw77yM6YCa6L+HaXRlbeWPluWIsOeahGRhdGHkuI3mmK/lvZPliY3lj5HpgIHnmoRkYXRhO1xuICAgICAgZGF0YSAmJiAoIWRhdGEubm9DYWNoZSkgJiYgX2ZhaWxSZXF1ZXN0cy5wdXNoKGRhdGEpO1xuICAgICAgX3NlbmRRdWV1ZShrZXksIGNvbXBsZXRlZENhbGxiYWNrKTtcbiAgICB9O1xuICAgIGlmIChkYXRhKSB7XG4gICAgICByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3MsIGZhaWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpO1xuICAgICAgY29tcGxldGVkQ2FsbGJhY2soKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBfcHJvY2Vzc0ZhaWxSZXF1ZXN0cygpIHtcbiAgICAvLyDlj5HpgIHlrozmiJDlkI7lsIblpLHotKXnmoTor7fmsYLmt7vliqDliLDlpLHotKXpmJ/liJfkuK1cbiAgICBfZmFpbFJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIF9mYWlsZWRRdWV1ZS5lbnF1ZXVlKGl0ZW0pO1xuICAgIH0pO1xuICAgIF9mYWlsUmVxdWVzdHMubGVuZ3RoID0gMDtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdGFydFNlbmQoa2V5LCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICAgIC8vIOWcqHRhcm8xeOOAgXRhcm8yeOahhuaetuS4re+8jOW/hemhu+mAmui/h+WPmOmHj+WjsOaYjueahOaWueW8j+S8oOWFpe+8jOWQpuWImV9zZW5kUXVldWXpmLvloZ7vvIzlm57osIPml6Dms5Xph43nva5fcnVubmluZ++8jOWvvOiHtOaXpeW/l+WPkemAgeS4jeWHuu+8m+WOn+WboOS4jeaYjlxuICAgIHZhciBjYiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBfc2VuZFF1ZXVlKGtleSwgY2IpO1xuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdFF1ZXVlKCkge1xuICAgIHRoaXMuc2VuZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY29tcGxldGVkQ2FsbGJhY2spIHtcbiAgICAgIGlmIChkYXRhVHlwZSkge1xuICAgICAgICB0aGlzLmFkZChkYXRhVHlwZSwgb3B0aW9ucywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zdGFydFNlbmQoX3JlcUtleSwgY29tcGxldGVkQ2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9zdGFydFNlbmQoX3JlcUtleSwgY29tcGxldGVkQ2FsbGJhY2spO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmFkZCA9IGZ1bmN0aW9uIChkYXRhVHlwZSwgb3B0aW9ucywgY2IpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIGlmICghdXRpbC5jaGVja09wZW5pZChhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBfZW5xdWV1ZVJlcXVlc3QoZGF0YVR5cGUsIG9wdGlvbnMsIGNiKTtcbiAgICB9O1xuXG4gICAgdGhpcy5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzTlIgPSBfcmVxS2V5ID09PSBhcGx1c1N0YXRpYy5SRVFVRVNUUztcbiAgICAgIHZhciBsb2FkUXVldWUgPSBpc05SID8gX3F1ZXVlIDogX2ZhaWxlZFF1ZXVlO1xuICAgICAgdmFyIGl0ZW1zID0gY2FjaGUoKS5nZXQoX3JlcUtleSk7XG4gICAgICBpZiAoaXRlbXMgJiYgaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICBsb2FkUXVldWUuZW5xdWV1ZShpdGVtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBjYWNoZSgpLnJlbW92ZShfcmVxS2V5KTtcbiAgICB9O1xuXG4gICAgLy8g5b2T5YmN5Y+q5pyJ5aSx6LSl6Zif5YiX6LCD55Soc2F2ZeaWueazlVxuICAgIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjYWNoZWQgPSBjYWNoZSgpLmdldChhcGx1c1N0YXRpYy5GQUlMRURfUkVRVUVTVFMpIHx8IFtdO1xuICAgICAgdmFyIG5ld0NhY2hlID0gY2FjaGVkLmNvbmNhdChfZmFpbGVkUXVldWUuaXRlbXMoKSk7XG4gICAgICBpZihuZXdDYWNoZSAmJiBuZXdDYWNoZS5sZW5ndGgpIHtcbiAgICAgICAgY2FjaGUoKS5zZXQoYXBsdXNTdGF0aWMuRkFJTEVEX1JFUVVFU1RTLCBuZXdDYWNoZSk7XG4gICAgICB9IFxuICAgICAgX2ZhaWxlZFF1ZXVlLmNsZWFyKCk7IC8vIOS4gOWumuimgeWFiOS/neWtmOWGjea4heepuu+8jOWQpuWImeS/neWtmOeahOawuOi/nOaYr+epuuaVsOaNrlxuICAgIH07XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKHJlcUtleSkge1xuICAgIF9yZXFLZXkgPSByZXFLZXk7XG4gICAgaWYgKCFfaW5zdGFuY2UpIHtcbiAgICAgIF9pbnN0YW5jZSA9IG5ldyBSZXF1ZXN0UXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIF9pbnN0YW5jZTtcbiAgfTtcbn0pKCk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vcmVxdWVzdFF1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJy4vY2FjaGUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5leHBvcnRzLmdldE5ldEluZm8gPSBmdW5jdGlvbihjbGllbnQpe1xuICB2YXIgcmVzdWx0ID0ge307XG4gIHZhciBhY2Nlc3MgPSBjbGllbnQubmV0d29ya1R5cGU7XG4gIGlmIChhY2Nlc3MgPT09ICdub25lJykge1xuICAgIGFjY2VzcyA9ICd1bmtub3duJztcbiAgfVxuXG4gIGFjY2VzcyA9IGFjY2VzcyA/IGFjY2Vzcy50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIHN3aXRjaCAoYWNjZXNzKSB7XG4gIGNhc2UgdXRpbHMuQWNjZXNzVHlwZS5NT0JJTEVfTkVUV09SS180RzpcbiAgICByZXN1bHQuYWNjZXNzX3N1YnR5cGUgPSAnTFRFJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzRHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzNHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdDRE1BJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzNHJztcbiAgICBicmVhaztcbiAgY2FzZSB1dGlscy5BY2Nlc3NUeXBlLk1PQklMRV9ORVRXT1JLXzJHOlxuICAgIHJlc3VsdC5hY2Nlc3Nfc3VidHlwZSA9ICdHUlBTJztcbiAgICByZXN1bHQuYWNjZXNzID0gJzJHJztcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICByZXN1bHQuYWNjZXNzID0gYWNjZXNzO1xuICAgIGRlbGV0ZSByZXN1bHQuYWNjZXNzX3N1YnR5cGU7XG4gICAgYnJlYWs7XG4gIH07XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZ2V0SGVhZGVySW5mbyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgaGVhZGVyID0ge307XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcblxuICB2YXIgZ2xvYmFsQ29uZmlnID0gYXBsdXMuZ2xvYmFsQ29uZmlnIHx8IHt9O1xuICB2YXIgY2xpZW50ID0gYXBsdXMuX2FwbHVzX2NsaWVudCB8fCB7fTtcblxuICB2YXIgZGF0YSA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICBpZiAoZGF0YSkge1xuICAgIGhlYWRlci5pbXByaW50ID0gZGF0YTtcbiAgfVxuXG4gIGhlYWRlci5kZXZpY2VfdHlwZSA9ICdQaG9uZSc7XG4gIGhlYWRlci5zZGtfdmVyc2lvbiA9IGdsb2JhbENvbmZpZy5sdmVyO1xuICBoZWFkZXIuYXBwa2V5ID0gdXRpbC5nZXRBcHBLZXkoKTtcbiAgaGVhZGVyLmRldmljZV9pbmZvID0gJyc7XG4gIGhlYWRlci5hcHBpZCA9IGNsaWVudC5hcHBJZDtcbiAgaGVhZGVyLmFwcF9lbnYgPSBjbGllbnQuYXBwRW52O1xuICBoZWFkZXIuYXBwX3ZlcnNpb24gPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBwVmVyc2lvbicpIHx8ICdkZXZ0b29scyc7XG5cbiAgdmFyIGdsb2JhbF9hcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWdsb2JhbC1hcmdzJyk7XG4gIGlmIChnbG9iYWxfYXJncyAmJiBnbG9iYWxfYXJncy5kZWJ1Z0lkKSB7XG4gICAgaGVhZGVyLm1pbmlhcHBEZWJ1Z0lkID0gZ2xvYmFsX2FyZ3MuZGVidWdJZDtcbiAgfSBlbHNlIGlmIChjYWNoZSgpLmdldCgnbWluaWFwcERlYnVnSWQnKSkge1xuICAgIGhlYWRlci5taW5pYXBwRGVidWdJZCA9IGNhY2hlKCkuZ2V0KCdtaW5pYXBwRGVidWdJZCcpO1xuICB9XG5cbiAgdmFyIHN5c3RlbUluZm8gPSBjbGllbnQgfHwge307XG4gIHN5c3RlbUluZm8uc2FmZUFyZWEgPSBzeXN0ZW1JbmZvLnNhZmVBcmVhIHx8IHt9O1xuXG4gIHZhciBtb2RlbCA9IHN5c3RlbUluZm8ubW9kZWwgfHwgJyc7XG4gIHZhciBwbGF0Zm9ybSA9IHN5c3RlbUluZm8ucGxhdGZvcm0gfHwgJyc7XG4gIHZhciBicmFuZCA9IHN5c3RlbUluZm8uYnJhbmQgfHwgJyc7XG4gIHZhciBicmFuZEwgPSBicmFuZC50b0xvd2VyQ2FzZSgpO1xuXG4gIGhlYWRlci5zZGtfdHlwZSA9IG1pbmkuZ2V0U2RrVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm0gPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpO1xuICBoZWFkZXIucGxhdGZvcm1fc2RrX3ZlcnNpb24gPSBzeXN0ZW1JbmZvLlNES1ZlcnNpb247XG4gIGhlYWRlci5wbGF0Zm9ybV92ZXJzaW9uID0gc3lzdGVtSW5mby5wbGF0Zm9ybVZlcnNpb247XG4gICAgXG4gIHZhciB3ID0gTWF0aC5yb3VuZChzeXN0ZW1JbmZvLnNjcmVlbldpZHRoICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgdmFyIGggPSBNYXRoLnJvdW5kKHN5c3RlbUluZm8uc2NyZWVuSGVpZ2h0ICogc3lzdGVtSW5mby5waXhlbFJhdGlvKTtcbiAgaGVhZGVyLnJlc29sdXRpb24gPSB3ID4gaCA/IHcgKyAnKicgKyBoIDogaCArICcqJyArIHc7XG5cbiAgaGVhZGVyLnBpeGVsX3JhdGlvID0gc3lzdGVtSW5mby5waXhlbFJhdGlvO1xuICBoZWFkZXIub3MgPSBwbGF0Zm9ybTtcbiAgaGVhZGVyLmZvbnRfc2l6ZV9zZXR0aW5nID0gc3lzdGVtSW5mby5mb250U2l6ZVNldHRpbmc7XG4gIGhlYWRlci5kZXZpY2VfbW9kZWwgPSBtb2RlbDsgLy8g6K6+5aSH5Z6L5Y+3XG4gIGhlYWRlci5kZXZpY2VfYnJhbmQgPSBicmFuZDsgLy8g6K6+5aSH55Sf5Lqn5ZWGXG4gIC8vIF9oZWFkZXIuY2hhbm5lbCA9IGJyYW5kTDsgLy8g6L+Z6YeM5rig6YGT5pqC5pe25YWI55SoIOeUn+S6p+WVhueahOWQjeWtl1xuICBoZWFkZXIuZGV2aWNlX21hbnVmYWN0dXJlciA9IGJyYW5kTDtcbiAgaGVhZGVyLmRldmljZV9tYW51aWQgPSBtb2RlbDsgLy8g6K6+5aSH5ZOB54mML+Wei+WPt1xuICBoZWFkZXIuZGV2aWNlX25hbWUgPSBtb2RlbDsgLy8g5YaF6YOo5Lqn5ZOB5Luj5Y+3XG4gIGhlYWRlci5vc192ZXJzaW9uID0gc3lzdGVtSW5mby5vc192ZXJzaW9uOyAvLyBvc+eJiOacrOWPt1xuICBoZWFkZXIubGFuZ3VhZ2UgPSBzeXN0ZW1JbmZvLmxhbmd1YWdlOyAvLyDor63oqIDvvIx6aFxuXG4gIHZhciBuZXRJbmZvID0gdGhpcy5nZXROZXRJbmZvKGNsaWVudCk7XG4gIGhlYWRlci5hY2Nlc3MgPSBuZXRJbmZvLmFjY2VzcztcbiAgaWYgKG5ldEluZm8uYWNjZXNzX3N1YnR5cGUpIHtcbiAgICBoZWFkZXIuYWNjZXNzX3N1YnR5cGUgPSBuZXRJbmZvLmFjY2Vzc19zdWJ0eXBlO1xuICB9XG5cbiAgcmV0dXJuIGhlYWRlcjtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3VtX2hlYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHNlc3Npb25NYW5hZ2VyID0gcmVxdWlyZSgnLi91bV9zZXNzaW9uX21hbmFnZXInKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCcuL2V2ZW50TWFuYWdlcicpO1xudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZGF0YVR5cGUpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICBzd2l0Y2ggKGRhdGFUeXBlKSB7XG4gIGNhc2UgdXRpbHMuRGF0YVR5cGUuSEFMRl9TRVNTSU9OOlxuICAgIGRhdGEgPSBfYnVpbGRIYWxmU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkNMT1NFX1NFU1NJT046XG4gICAgZGF0YSA9IF9idWlsZENsb3NlU2Vzc2lvbigpO1xuICAgIGJyZWFrO1xuICBjYXNlIHV0aWxzLkRhdGFUeXBlLkVLVjpcbiAgICBkYXRhID0gX2J1aWxkRWt2KCk7XG4gICAgYnJlYWs7XG4gIGRlZmF1bHQ6XG4gICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRIYWxmU2Vzc2lvbigpIHtcbiAgdmFyIGRhdGEgPSBudWxsO1xuICB2YXIgc2Vzc2lvbiA9IHNlc3Npb25NYW5hZ2VyKCkuY2xvbmVDdXJyZW50U2Vzc2lvbigpO1xuICBpZiAoc2Vzc2lvbikge1xuICAgIGRhdGEgPSB7XG4gICAgICBoZWFkZXI6IHtcbiAgICAgICAgc3Q6ICcxJ1xuICAgICAgfSxcbiAgICAgIGFuYWx5dGljczoge1xuICAgICAgICBzZXNzaW9uczogW3Nlc3Npb25dXG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufTtcblxuZnVuY3Rpb24gX2J1aWxkQ2xvc2VTZXNzaW9uKCkge1xuICB2YXIgZGF0YSA9IG51bGw7XG5cbiAgdmFyIGFuYWx5dGljcyA9IHt9O1xuXG4gIHZhciBzZXNzaW9uID0gc2Vzc2lvbk1hbmFnZXIoKS5jbG9uZUN1cnJlbnRTZXNzaW9uKCk7XG4gIGlmIChzZXNzaW9uKSB7XG4gICAgYW5hbHl0aWNzLnNlc3Npb25zID0gW3Nlc3Npb25dO1xuICB9XG5cbiAgdmFyIGVrdnMgPSBldmVudE1hbmFnZXIoKS5nZXRFa3ZzKCk7XG4gIGlmIChla3ZzKSB7XG4gICAgYW5hbHl0aWNzLmVrdnMgPSBjbG9uZURlZXAoZWt2cyk7XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuXG4gIGlmIChhbmFseXRpY3Muc2Vzc2lvbnMgfHwgYW5hbHl0aWNzLmVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiBhbmFseXRpY3NcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59O1xuXG5mdW5jdGlvbiBfYnVpbGRFa3YoKSB7XG4gIHZhciBkYXRhID0gbnVsbDtcblxuICB2YXIgZWt2cyA9IGV2ZW50TWFuYWdlcigpLmdldEVrdnMoKTtcbiAgaWYgKGVrdnMpIHtcbiAgICBkYXRhID0ge1xuICAgICAgYW5hbHl0aWNzOiB7XG4gICAgICAgIGVrdnM6IGNsb25lRGVlcChla3ZzKVxuICAgICAgfVxuICAgIH07XG4gICAgZXZlbnRNYW5hZ2VyKCkuY2xlYXIoKTtcbiAgfVxuICByZXR1cm4gZGF0YTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9ib2R5QnVpbGRlci5qc1xuLy8gbW9kdWxlIGlkID0gMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIEhlYWRlciA9IHJlcXVpcmUoJy4vdW1faGVhZGVyJyk7XG52YXIgbWFuZ2xlID0gcmVxdWlyZSgnLi9tYW5nbGVfbWluaScpO1xudmFyIGltcHJpbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi9pbXByaW50TWFuYWdlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGpzb25VdGlsID0gcmVxdWlyZSgnLi9qc29uVXRpbCcpO1xudmFyIGJhc2U2NCA9IHJlcXVpcmUoJy4vYmFzZTY0Jyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQZXJmb3JtYW5jZSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUGVyZm9ybWFuY2UnKTtcbnZhciBjYWNoZSA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vY2FjaGUnKTtcbnZhciB1dGlsUmVtb3RlQ2ZnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxSZW1vdGVDZmcnKTtcbnZhciBldmVudE1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIGFwbHVzVXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbmZ1bmN0aW9uIGdldFVybCgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgcmhvc3QgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuXG4gIGlmICghYXBsdXNVdGlsLmNoZWNrRG9tYWluKHJob3N0KSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBtaW5pTG9nID0gbWluaS5nZXRMb2dEb21haW4oKTtcbiAgaWYgKCFtaW5pTG9nKSB7XG4gICAgdWxvZygpLnRpcF93KCdjdXJyZW50IG1pbmlhcHAgZnJhbWV3b3JrIGlzIG5vdCBzdXBwb3J0ZWQhIScpO1xuICAgIHJldHVybiAnJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICB9ICBcbiAgcmV0dXJuIGFwbHVzVXRpbC5maXhEb21haW4ocmhvc3QpICsgbWluaUxvZztcbn07XG5cbnZhciBNQVhfUkVRVUVTVF9USU1FT1VUID0gNTAwMDtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZXF1ZXN0KGRhdGEsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbENhbGxiYWNrLCBjb21wbGV0ZWRDYWxsYmFjaykge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBwX2hlYWRlciA9IEhlYWRlci5nZXRIZWFkZXJJbmZvKCk7XG4gIHRyeSB7ICBcbiAgICBpZiAobWluaS5nZXRQbGF0Zm9ybVR5cGUoKSA9PT0gJ215JyB8fCBtaW5pLmdldFBsYXRmb3JtVHlwZSgpID09PSAndGFvYmFvJykge1xuICAgICAgcF9oZWFkZXJbJ2lkX3R5cGUnXSA9ICdhbGlwYXlfaWQnO1xuICAgICAgcF9oZWFkZXJbJ2lkX3RyYWNraW5nJ10gPSB7XG4gICAgICAgIGFsaXBheV9pZDogYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuX0FOT05ZX0lEKSB8fCAnJyxcbiAgICAgICAgdW5pb25pZDogYXBsdXMuZ2V0TWV0YUluZm8oJ19kZXZfaWQnKSB8fCAnJyxcbiAgICAgICAgdXNlcklkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCkgfHwgJycsXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBwX2hlYWRlclsnaWRfdHlwZSddID0gJ29wZW5pZCc7XG4gICAgICBwX2hlYWRlclsnaWRfdHJhY2tpbmcnXSA9IHtcbiAgICAgICAgb3BlbmlkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fQU5PTllfSUQpIHx8ICcnLFxuICAgICAgICB1bmlvbmlkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpIHx8ICcnLFxuICAgICAgICB1c2VySWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9VU0VSX0lEKSB8fCAnJyxcbiAgICAgIH07XG4gICAgfVxuICBcbiAgICBpZiAoaW1wcmludE1hbmFnZXIuZ2V0KCkpIHtcbiAgICAgIHBfaGVhZGVyW2FwbHVzU3RhdGljLklNUFJJTlRdID0gaW1wcmludE1hbmFnZXIuZ2V0KCk7XG4gICAgfVxuICBcbiAgICBpZiAoZGF0YS5hbmFseXRpY3MpIHtcbiAgICAgIHZhciB1c2VySWQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCk7XG4gICAgICB2YXIgdXNlcl9uaWNrID0gYXBsdXMuZ2V0TWV0YUluZm8oJ191c2VyX25pY2snKTtcbiAgICAgIGRhdGEuYW5hbHl0aWNzLmFjdGl2ZV91c2VyID0ge1xuICAgICAgICBwdWlkOiB1c2VySWQsXG4gICAgICAgIHByb3ZpZGVyOiB1c2VyX25pY2tcbiAgICAgIH07XG4gICAgfVxuICBcbiAgICBkYXRhLmhlYWRlciA9IHV0aWxzLmFzc2lnbihwX2hlYWRlciwgZGF0YS5oZWFkZXIsIHtcbiAgICAgIHRzOiBEYXRlLm5vdygpLFxuICAgICAgdHJhY2VJZDogdXRpbHMuZ2V0UmFuZG9tU3RyKDEwKSArIERhdGUubm93KCkgKyB1dGlscy5nZXRSYW5kb21TdHIoOSksXG4gICAgICBzdGFydF9pZDogZXZlbnRNYW5hZ2VyKCkuZ2V0U3RhcnRJZCgpXG4gICAgfSk7XG4gICAgdmFyIG1hbmdsZURhdGEgPSBtYW5nbGUoZGF0YSk7XG4gICAgdmFyIHJlcXVlc3REYXRhID0ganNvblV0aWwuc3RyaW5nZnkobWFuZ2xlRGF0YSk7XG4gICAgdmFyIHVybCA9IGdldFVybCgpO1xuICAgIHZhciBjb25maWcgPSB7XG4gICAgICB1cmw6IHVybCxcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgZGF0YTogYmFzZTY0LmVuY29kZShyZXF1ZXN0RGF0YSksXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICB2YXIgc3RhdHVzQ29kZSA9IHJlc3AuY29kZSB8fCByZXNwLnN0YXR1cyB8fCByZXNwLnN0YXR1c0NvZGU7XG4gICAgICAgIGlmIChzdGF0dXNDb2RlID09PSAyMDAgfHwgc3RhdHVzQ29kZSA9PT0gNDEzKSB7XG4gICAgICAgICAgdWxvZygpLmkoJ2RhdGEgc2VuZCBzdWNjZXNzOicsIGRhdGEsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHJlc3AucHJvZmlsZSkge1xuICAgICAgICAgICAgICB1dGlsUGVyZm9ybWFuY2UucHVzaCh7ZW5kOiByZXNwLnByb2ZpbGUucmVzcG9uc2VFbmQsIHN0YXJ0OiByZXNwLnByb2ZpbGUucmVxdWVzdFN0YXJ0fSk7XG4gICAgICAgICAgICAgIHV0aWxQZXJmb3JtYW5jZS5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIHVsb2coKS53KCdjdXJyZW50IG1pbmlhcHAgbm90IHN1cHBvcnQgcHJvZmlsZSBBUEknKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy/lnKjmraTlpITlsIZpbXByaW505YaF5a655Yqg5YWl5Yiw5pys5Zyw57yT5a2Y5LitXG4gICAgICAgICAgc2F2ZUltcHJpbnQoKHJlc3AuZGF0YSB8fCB7fSkpO1xuICAgICAgICAgIGlzRnVuY3Rpb24oc3VjY2Vzc0NhbGxiYWNrKSAmJiBzdWNjZXNzQ2FsbGJhY2socmVzcCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWxvZygpLncoJ2RhdGEgc2VuZCBmYWlsZWQ6JywgcmVxdWVzdERhdGEpO1xuICAgICAgICAgIGlzRnVuY3Rpb24oZmFpbENhbGxiYWNrKSAmJiBmYWlsQ2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGZhaWw6IGZ1bmN0aW9uIChpc1RpbWVvdXQpIHtcbiAgICAgICAgdWxvZygpLncoJ2RhdGEgc2VuZCcgKyBpc1RpbWVvdXQgPyAndGltZW91dDogJyA6ICdmYWlsZWQ6ICcsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgaXNGdW5jdGlvbihmYWlsQ2FsbGJhY2spICYmIGZhaWxDYWxsYmFjaygpO1xuICAgICAgfSxcbiAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlzRnVuY3Rpb24oY29tcGxldGVkQ2FsbGJhY2spICYmIGNvbXBsZXRlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBzZGtSZXF1ZXN0KHV0aWxzLmFzc2lnbihjb25maWcsIGJ1aWxkSHR0cEhlYWRlcigpKSk7XG4gIH0gY2F0Y2ggKGUpIHtcblxuICB9XG59O1xuXG5mdW5jdGlvbiBzZGtSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICB2YXIgc3JjU3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgdmFyIHNyY0ZhaWwgPSBvcHRpb25zLmZhaWw7XG4gIHZhciBpc1RpbWVvdXQgPSBmYWxzZTtcbiAgdmFyIHN0ID0gbnVsbDtcblxuICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbiAocmVzcCkge1xuICAgIGlmICghaXNUaW1lb3V0KSB7XG4gICAgICBzdCAmJiBjbGVhclRpbWVvdXQoc3QpO1xuICAgICAgaXNGdW5jdGlvbihzcmNTdWNjZXNzKSAmJiBzcmNTdWNjZXNzKHJlc3ApO1xuICAgIH1cbiAgfTtcblxuICBvcHRpb25zLmZhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc1RpbWVvdXQpIHtcbiAgICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgICBpc0Z1bmN0aW9uKHNyY0ZhaWwpICYmIHNyY0ZhaWwoZmFsc2UpO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBjdHgucmVxdWVzdChvcHRpb25zKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGRkICYmIGRkLmh0dHBSZXF1ZXN0KG9wdGlvbnMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHVsb2coKS53KCdyZXF1ZXN0IHNlbmQgZmFpbGVkLCBlcnIgbXNnOiAnLCBlKTtcbiAgICB9XG4gIH1cblxuICBzdCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgIHN0ICYmIGNsZWFyVGltZW91dChzdCk7XG4gICAgaXNUaW1lb3V0ID0gdHJ1ZTtcblxuICAgIGlzRnVuY3Rpb24oc3JjRmFpbCkgJiYgc3JjRmFpbChpc1RpbWVvdXQpO1xuICB9LCBvcHRpb25zLnRpbWVvdXQgfHwgTUFYX1JFUVVFU1RfVElNRU9VVCk7XG59XG5cbi8vIOacjeWKoeerr+S4i+WPkeWPkemAgeetlueVpVxuZnVuY3Rpb24gc2F2ZUltcHJpbnQoaW1wcmludCkge1xuICB2YXIgbG9jYWxJbXB2ID0gY2FjaGUoKS5nZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX0lNUFJJTlRfVkVSU0lPTik7XG4gIGlmIChpbXByaW50KSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgaWYgKGltcHJpbnQuaW1wcmludFZlcnNpb24gJiYgaW1wcmludC5pbXByaW50VmVyc2lvbiAhPT0gbG9jYWxJbXB2KSB7XG4gICAgICB2YXIgcmVtb3RlSW1wdiA9IGltcHJpbnQuaW1wcmludFZlcnNpb247XG4gICAgICBjYWNoZSgpLnNldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfSU1QUklOVF9WRVJTSU9OLCByZW1vdGVJbXB2KTtcbiAgICAgIHZhciB0cmFja0RvbWFpbiA9IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7XG5cbiAgICAgIHZhciB1cmwgPSBhcGx1c1V0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSAgKyByZW1vdGVJbXB2O1xuICAgICAgYXBsdXMucmVxdWVzdFJlbW90ZUNvbmZpZyhcbiAgICAgICAgdXJsLCBcbiAgICAgICAgZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgaWYgKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSkge1xuICAgICAgICAgICAgdXRpbFJlbW90ZUNmZy5lbmFibGVDZmcocmVzcC5kYXRhLmRhdGEpO1xuICAgICAgICAgICAgY2FjaGUoKS5zZXRTeW5jKGFwbHVzU3RhdGljLkFQTFVTX1JFTU9URV9DT05GSUcsIHJlc3AuZGF0YS5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIFxuICAgICAgICBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIHVsb2coKS53KCdyZW1vdGUgY29uZmlndXJhdGlvbiByZXF1ZXN0IGZhaWxlZCwgZXJybXNnOicsIGVycik7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsc1JlbW90ZUNmZyA9IGNhY2hlKCkuZ2V0U3luYyhhcGx1c1N0YXRpYy5BUExVU19SRU1PVEVfQ09ORklHKTtcbiAgICAgIHV0aWxSZW1vdGVDZmcuZW5hYmxlQ2ZnKGxzUmVtb3RlQ2ZnKTtcbiAgICB9XG4gIH0gXG59XG5cbmZ1bmN0aW9uIGJ1aWxkSHR0cEhlYWRlcigpIHtcbiAgdmFyIGhlYWRlclR5cGUgPSBtaW5pLmdldFNka1R5cGUoKSArICcvanNvbic7XG4gIHZhciBpc015ID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaWYgKG15KSB7XG4gICAgICBpc015ID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2goZSl7fTtcblxuICBpZiAoaXNNeSkge1xuICAgIHJldHVybiB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaGVhZGVyOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiBoZWFkZXJUeXBlLFxuICAgICAgICAnTXNnLVR5cGUnOiBoZWFkZXJUeXBlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3JlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhbmFseXRpY3NNYXAgPSB7XG4gIHNlc3Npb25zOiAnc24nLFxuICAvLyBwYWdlczogJ3AnLFxuICAvLyBzaGFyZXM6ICdzcicsXG4gIGVrdnM6ICdlJyxcbiAgYWN0aXZlX3VzZXI6ICdhY3RpdmVfdXNlcidcbn07XG5cbnZhciBoZWFkZXJNYXAgPSB7XG4gIHNka190eXBlOiAnc2R0JyxcbiAgYWNjZXNzOiAnYWMnLFxuICBhY2Nlc3Nfc3VidHlwZTogJ2FjcycsXG4gIGRldmljZV9tb2RlbDogJ2RtJyxcbiAgbGFuZ3VhZ2U6ICdsYW5nJyxcbiAgZGV2aWNlX3R5cGU6ICdkdCcsXG4gIGRldmljZV9tYW51ZmFjdHVyZXI6ICdkbWYnLFxuICBkZXZpY2VfbmFtZTogJ2RuJyxcbiAgcGxhdGZvcm1fdmVyc2lvbjogJ3B2JyxcbiAgaWRfdHlwZTogJ2l0JyxcbiAgZm9udF9zaXplX3NldHRpbmc6ICdmc3MnLFxuICBvc192ZXJzaW9uOiAnb3YnLFxuICBkZXZpY2VfbWFudWlkOiAnZGlkJyxcbiAgcGxhdGZvcm1fc2RrX3ZlcnNpb246ICdwc3YnLFxuICBkZXZpY2VfYnJhbmQ6ICdkYicsXG4gIGFwcGtleTogJ2FrJyxcbiAgX2lkOiAnaWQnLFxuICBpZF90cmFja2luZzogJ2l0cicsXG4gIGltcHJpbnQ6ICdpbXAnLFxuICBzZGtfdmVyc2lvbjogJ3N2JyxcbiAgcmVzb2x1dGlvbjogJ3JsJyxcbiAgdGVzdFRva2VuOiAndHRuJyxcbiAgbWluaWFwcERlYnVnSWQ6ICdkaycsXG4gIHBpeGVsX3JhdGlvOiAncHInLFxufTtcblxudmFyIGlkTWFwID0ge1xuICB1dWlkOiAndWQnLFxuICB1bmlvbmlkOiAndW5kJyxcbiAgb3BlbmlkOiAnb2QnLFxuICBhbm9ueW1vdXNpZDogJ25kJyxcbiAgYWxpcGF5X2lkOiAnYWQnLFxuICBkZXZpY2VfaWQ6ICdkZCcsXG4gIHVzZXJpZDogJ3B1aWQnXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgcmV0dXJuIHtcbiAgICBoOiBfbWFuZ2xlSGVhZGVyKGRhdGEuaGVhZGVyLCBoZWFkZXJNYXApLFxuICAgIGE6IF9tYW5nbGVBbmFseXRpY3MoZGF0YS5hbmFseXRpY3MsIGFuYWx5dGljc01hcClcbiAgfTtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVIZWFkZXIoaGVhZGVyLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IF9tYW5nbGVPYmooaGVhZGVyLCBtYXApO1xuXG4gIGlmIChoZWFkZXIgJiYgaGVhZGVyLmlkX3RyYWNraW5nKSB7XG4gICAgcmVzdWx0W21hcC5pZF90cmFja2luZyB8fCAnaWRfdHJhY2tpbmcnXSA9IF9tYW5nbGVPYmooaGVhZGVyLmlkX3RyYWNraW5nLCBpZE1hcCk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZnVuY3Rpb24gX21hbmdsZU9iaihvYmosIG1hcCkge1xuICB2YXIgcmVzdWx0ID0ge307XG4gIFxuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKG1hcFtrZXldKSB7XG4gICAgICByZXN1bHRbbWFwW2tleV1dID0gb2JqW2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIF9tYW5nbGVBbmFseXRpY3MoYW5hbHl0aWNzLCBtYXApIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGlmIChhbmFseXRpY3MpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIGFuYWx5dGljcykge1xuICAgICAgaWYgKGFuYWx5dGljc1twcm9wXSkge1xuICAgICAgICByZXN1bHRbbWFwW3Byb3BdXSA9IGFuYWx5dGljc1twcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL21hbmdsZV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSAyNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgY2FjaGUgPSByZXF1aXJlKCcuL2NhY2hlJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCcuL2pzb25VdGlsJyk7XG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnLi9iYXNlNjQnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG5mdW5jdGlvbiBJbXByaW50TWFuYWdlcigpIHtcbiAgdmFyIF9pbXByaW50ID0gJyc7XG4gIHZhciB0ID0gdGhpcztcbiAgLy8gdmFyIGltcHJpbnRWZXJzaW9uID0gXCJpbXByaW50VmVyc2lvblwiO1xuICB0aGlzLnNldCA9IGZ1bmN0aW9uIChpbXByaW50KSB7XG4gICAgaWYgKHR5cGVvZiBpbXByaW50ID09PSAnc3RyaW5nJykge1xuICAgICAgX2ltcHJpbnQgPSBpbXByaW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBfaW1wcmludCA9IGJhc2U2NC5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoaW1wcmludCkpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2ltcHJpbnQ7XG4gIH07XG4gIHRoaXMuZ2V0SW1wT2JqID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShiYXNlNjQuZGVjb2RlKF9pbXByaW50KSk7XG4gIH07XG4gIHRoaXMuZ2V0SXRlbSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgaW1wb2JqID0gdC5nZXRJbXBPYmooKTtcbiAgICByZXR1cm4gaW1wb2JqID8gaW1wb2JqW25hbWVdIHx8IFwiXCIgOiBcIlwiO1xuICB9O1xuXG4gIHRoaXMubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBfaW1wcmludCA9IGNhY2hlKCkuZ2V0KGFwbHVzU3RhdGljLklNUFJJTlQpO1xuICB9O1xuXG4gIHRoaXMuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoX2ltcHJpbnQpIHtcbiAgICAgIGNhY2hlKCkuc2V0KGFwbHVzU3RhdGljLklNUFJJTlQsIF9pbXByaW50KTtcbiAgICB9XG4gIH07XG59XG52YXIgaW1wcmludE1hbmFnZXIgPSBuZXcgSW1wcmludE1hbmFnZXIoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBpbXByaW50TWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9pbXByaW50TWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyogaXN0YW5idWwgaWdub3JlIGZpbGUgKi9cbnZhciBiNjRjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbnZhciBiNjR0YWIgPSAoZnVuY3Rpb24gKGJpbikge1xuICB2YXIgdCA9IHt9O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGJpbi5sZW5ndGg7IGkgPCBsOyBpKyspIHRbYmluLmNoYXJBdChpKV0gPSBpO1xuICByZXR1cm4gdDtcbn0pKGI2NGNoYXJzKTtcbnZhciBmcm9tQ2hhckNvZGUgPSBTdHJpbmcuZnJvbUNoYXJDb2RlO1xudmFyIGNiX3V0b2IgPSBmdW5jdGlvbiAoYykge1xuICB2YXIgY2M7XG4gIGlmIChjLmxlbmd0aCA8IDIpIHtcbiAgICBjYyA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICByZXR1cm4gY2MgPCAxMjggPyBjIDogY2MgPCAyMDQ4ID8gZnJvbUNoYXJDb2RlKDE5MiB8IGNjID4+PiA2KSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKSA6IGZyb21DaGFyQ29kZSgyMjQgfCBjYyA+Pj4gMTIgJiAxNSkgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgPj4+IDYgJiA2MykgKyBmcm9tQ2hhckNvZGUoMTI4IHwgY2MgJiA2Myk7XG4gIH0gZWxzZSB7XG4gICAgY2MgPSA2NTUzNiArIChjLmNoYXJDb2RlQXQoMCkgLSA1NTI5NikgKiAxMDI0ICsgKGMuY2hhckNvZGVBdCgxKSAtIDU2MzIwKTtcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKDI0MCB8IGNjID4+PiAxOCAmIDcpICsgZnJvbUNoYXJDb2RlKDEyOCB8IGNjID4+PiAxMiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyA+Pj4gNiAmIDYzKSArIGZyb21DaGFyQ29kZSgxMjggfCBjYyAmIDYzKTtcbiAgfVxufTtcbnZhciByZV91dG9iID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRkZdfFteXFx4MDAtXFx4N0ZdL2c7XG52YXIgdXRvYiA9IGZ1bmN0aW9uICh1KSB7XG4gIHJldHVybiB1LnJlcGxhY2UocmVfdXRvYiwgY2JfdXRvYik7XG59O1xudmFyIGNiX2VuY29kZSA9IGZ1bmN0aW9uIChjY2MpIHtcbiAgdmFyIHBhZGxlbiA9IFswLCAyLCAxXVtjY2MubGVuZ3RoICUgM10sXG4gICAgb3JkID0gY2NjLmNoYXJDb2RlQXQoMCkgPDwgMTYgfCAoY2NjLmxlbmd0aCA+IDEgPyBjY2MuY2hhckNvZGVBdCgxKSA6IDApIDw8IDggfCAoY2NjLmxlbmd0aCA+IDIgPyBjY2MuY2hhckNvZGVBdCgyKSA6IDApLFxuICAgIGNoYXJzID0gW2I2NGNoYXJzLmNoYXJBdChvcmQgPj4+IDE4KSwgYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gMTIgJiA2MyksIHBhZGxlbiA+PSAyID8gJz0nIDogYjY0Y2hhcnMuY2hhckF0KG9yZCA+Pj4gNiAmIDYzKSwgcGFkbGVuID49IDEgPyAnPScgOiBiNjRjaGFycy5jaGFyQXQob3JkICYgNjMpXTtcbiAgcmV0dXJuIGNoYXJzLmpvaW4oJycpO1xufTtcbnZhciBidG9hID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZSgvW1xcc1xcU117MSwzfS9nLCBjYl9lbmNvZGUpO1xufTtcbnZhciBfZW5jb2RlID0gZnVuY3Rpb24gKHUpIHtcbiAgcmV0dXJuIGJ0b2EodXRvYih1KSk7XG59O1xudmFyIGVuY29kZSA9IGZ1bmN0aW9uICh1LCB1cmlzYWZlKSB7XG4gIHJldHVybiAhdXJpc2FmZSA/IF9lbmNvZGUoU3RyaW5nKHUpKSA6IF9lbmNvZGUoU3RyaW5nKHUpKS5yZXBsYWNlKC9bK1xcL10vZywgZnVuY3Rpb24gKG0wKSB7XG4gICAgcmV0dXJuIG0wID09ICcrJyA/ICctJyA6ICdfJztcbiAgfSkucmVwbGFjZSgvXFw9L2csICcnKTtcbn07XG4vLyB2YXIgZW5jb2RlVVJJID0gZnVuY3Rpb24gKHUpIHtcbi8vICAgcmV0dXJuIGVuY29kZSh1LCB0cnVlKTtcbi8vIH07XG52YXIgcmVfYnRvdSA9IG5ldyBSZWdFeHAoWydbw4Atw59dW8KALcK/XScsICdbw6Atw69dW8KALcK/XXsyfScsICdbw7Atw7ddW8KALcK/XXszfSddLmpvaW4oJ3wnKSwgJ2cnKTtcbnZhciBjYl9idG91ID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgc3dpdGNoIChjY2NjLmxlbmd0aCkge1xuICBjYXNlIDQ6XG4gICAgdmFyIGNwID0gKDcgJiBjY2NjLmNoYXJDb2RlQXQoMCkpIDw8IDE4IHwgKDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgyKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDMpLCBvZmZzZXQgPSBjcCAtIDY1NTM2O1xuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKG9mZnNldCA+Pj4gMTApICsgNTUyOTYpICsgZnJvbUNoYXJDb2RlKChvZmZzZXQgJiAxMDIzKSArIDU2MzIwKTtcbiAgY2FzZSAzOlxuICAgIHJldHVybiBmcm9tQ2hhckNvZGUoKDE1ICYgY2NjYy5jaGFyQ29kZUF0KDApKSA8PCAxMiB8ICg2MyAmIGNjY2MuY2hhckNvZGVBdCgxKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDIpKTtcbiAgZGVmYXVsdDpcbiAgICByZXR1cm4gZnJvbUNoYXJDb2RlKCgzMSAmIGNjY2MuY2hhckNvZGVBdCgwKSkgPDwgNiB8IDYzICYgY2NjYy5jaGFyQ29kZUF0KDEpKTtcbiAgfVxufTtcbnZhciBidG91ID0gZnVuY3Rpb24gKGIpIHtcbiAgcmV0dXJuIGIucmVwbGFjZShyZV9idG91LCBjYl9idG91KTtcbn07XG52YXIgY2JfZGVjb2RlID0gZnVuY3Rpb24gKGNjY2MpIHtcbiAgdmFyIGxlbiA9IGNjY2MubGVuZ3RoLFxuICAgIHBhZGxlbiA9IGxlbiAlIDQsXG4gICAgbiA9IChsZW4gPiAwID8gYjY0dGFiW2NjY2MuY2hhckF0KDApXSA8PCAxOCA6IDApIHwgKGxlbiA+IDEgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMSldIDw8IDEyIDogMCkgfCAobGVuID4gMiA/IGI2NHRhYltjY2NjLmNoYXJBdCgyKV0gPDwgNiA6IDApIHwgKGxlbiA+IDMgPyBiNjR0YWJbY2NjYy5jaGFyQXQoMyldIDogMCksXG4gICAgY2hhcnMgPSBbZnJvbUNoYXJDb2RlKG4gPj4+IDE2KSwgZnJvbUNoYXJDb2RlKG4gPj4+IDggJiAyNTUpLCBmcm9tQ2hhckNvZGUobiAmIDI1NSldO1xuICBjaGFycy5sZW5ndGggLT0gWzAsIDAsIDIsIDFdW3BhZGxlbl07XG4gIHJldHVybiBjaGFycy5qb2luKCcnKTtcbn07XG52YXIgYXRvYiA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBhLnJlcGxhY2UoL1tcXHNcXFNdezEsNH0vZywgY2JfZGVjb2RlKTtcbn07XG52YXIgX2RlY29kZSA9IGZ1bmN0aW9uIChhKSB7XG4gIHJldHVybiBidG91KGF0b2IoYSkpO1xufTtcbnZhciBkZWNvZGUgPSBmdW5jdGlvbiAoYSkge1xuICByZXR1cm4gX2RlY29kZShTdHJpbmcoYSkucmVwbGFjZSgvWy1fXS9nLCBmdW5jdGlvbiAobTApIHtcbiAgICByZXR1cm4gbTAgPT0gJy0nID8gJysnIDogJy8nO1xuICB9KS5yZXBsYWNlKC9bXkEtWmEtejAtOVxcK1xcL10vZywgJycpKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlID0gZW5jb2RlO1xuZXhwb3J0cy5kZWNvZGUgPSBkZWNvZGU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfdW0vYmFzZTY0LmpzXG4vLyBtb2R1bGUgaWQgPSAyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbFBlcmZvcm1hbmNlLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG4ndXNlIHN0cmljdCc7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGR1cmF0aW9uQXJyYXkgPSBbXTtcbmZ1bmN0aW9uIGdldE1ldHJpYygpIHtcbiAgdHJ5IHtcbiAgICB2YXIgZW50cmllcyA9IGR1cmF0aW9uQXJyYXk7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBtYXggPSAtSW5maW5pdHksIG1pbiA9IEluZmluaXR5LCBzdW0gPSAwLCBhdmVyYWdlID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gZW50cmllc1tpXTtcbiAgICAgIGlmIChtYXggPCBpdGVtKSB7XG4gICAgICAgIG1heCA9IGl0ZW07XG4gICAgICB9IFxuICAgICAgaWYgKG1pbiA+PSBpdGVtKSB7XG4gICAgICAgIG1pbiA9IGl0ZW07XG4gICAgICB9XG4gICAgICBzdW0gKz0gaXRlbTtcbiAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGF2ZXJhZ2UgPSBzdW0gLyByZXN1bHQubGVuZ3RoO1xuICAgICAgYXZlcmFnZSA9IE1hdGguZmxvb3IoYXZlcmFnZSAqIDEwMCkgLyAxMDA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBtYXg6IG1heCxcbiAgICAgIG1pbjogbWluLFxuICAgICAgYXZlcmFnZTogYXZlcmFnZVxuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICB9XG59XG5leHBvcnRzLmdldE1ldHJpYyA9IGdldE1ldHJpYztcblxuZnVuY3Rpb24gZ2V0TWV0cmljV2ViKCkge1xuICB0cnkge1xuICAgIHZhciBlbnRyaWVzID0gcGVyZm9ybWFuY2UuZ2V0RW50cmllcygpOyAgXG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciB3ZWJEb21haW5zID0gW2FwbHVzU3RhdGljLldFQl9FVkVOVF9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9QQ19QVl9TVUZGSVgsIGFwbHVzU3RhdGljLldFQl9XQVBfUFZfU1VGRklYXTtcbiAgICB2YXIgbWF4ID0gLUluZmluaXR5LCBtaW4gPSBJbmZpbml0eSwgc3VtID0gMCwgYXZlcmFnZSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGVudHJpZXNbaV07XG4gICAgICB2YXIgdHlwZU1hdGNoID0gWydiZWFjb24nLCAnb3RoZXInLCAnaW1nJ10uc29tZShmdW5jdGlvbih2KSB7XG4gICAgICAgIHJldHVybiB2ID09PSBpdGVtLmluaXRpYXRvclR5cGU7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgdmFyIGRvbWFpbk1hdGNoID0gd2ViRG9tYWlucy5zb21lKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZS5pbmRleE9mKHYpID4gLTE7XG4gICAgICB9KTtcbiAgXG4gICAgICBpZiAodHlwZU1hdGNoICYmIGRvbWFpbk1hdGNoKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IGl0ZW0uZHVyYXRpb247XG4gICAgICAgIGlmIChtYXggPCBkdXJhdGlvbikge1xuICAgICAgICAgIG1heCA9IGR1cmF0aW9uO1xuICAgICAgICB9IFxuICAgICAgICBpZiAobWluID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgbWluID0gZHVyYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgc3VtICs9IGR1cmF0aW9uO1xuICAgICAgICByZXN1bHQucHVzaChkdXJhdGlvbik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgYXZlcmFnZSA9IHN1bSAvIHJlc3VsdC5sZW5ndGg7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBtYXg6IG1heCxcbiAgICAgIG1pbjogbWluLFxuICAgICAgYXZlcmFnZTogYXZlcmFnZVxuICAgIH07XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICB9XG59O1xuXG5leHBvcnRzLmdldE1ldHJpY1dlYiA9IGdldE1ldHJpY1dlYjtcblxuZXhwb3J0cy5wdXNoID0gZnVuY3Rpb24oaXRlbSkge1xuICB2YXIgZCA9IGl0ZW0uZW5kIC0gaXRlbS5zdGFydDtcbiAgLy/pgJrov4d3eC5yZXF1ZXN05Y+R6LW355qE6ICX5pe26LaF6L+HIDMwMG1zIFxuICBpZiAodHlwZW9mIGQgPT09ICdudW1iZXInICYmIGQgPj0gMzAwKSB7XG4gICAgZHVyYXRpb25BcnJheS5wdXNoKGQpO1xuICB9IGVsc2Uge1xuICAgIGR1cmF0aW9uQXJyYXkgPSBbXTtcbiAgfVxufTtcblxuZXhwb3J0cy5uZWVkU2VuZFBlcmZvcm1hbmNlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XG4gIC8v6K+35rGC5bm25Y+R5pWw5LiN6LaF6L+HIDEwIOS4qiAgXG4gIGlmIChkdXJhdGlvbkFycmF5Lmxlbmd0aCA+PSAxMCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBhcGx1cy5fcmVjb3JkKGFwbHVzU3RhdGljLlBFUkZPUk1BTkNFX1dBUklORywgJ09USEVSJywge30pO1xuICAgIGR1cmF0aW9uQXJyYXkgPSBbXTtcbiAgfVxufTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICBkdXJhdGlvbkFycmF5ID0gW107XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxQZXJmb3JtYW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxSZW1vdGVDZmcuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbid1c2Ugc3RyaWN0JztcbnZhciBhcGx1c1V0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGF0YScpO1xudmFyIGNhY2hlID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9jYWNoZScpO1xudmFyIEFQTFVTX1JFTU9URV9DT05GSUcgPSAnQVBMVVNfUkVNT1RFX0NPTkZJRyc7XG5cblxuLyoqXG4gKiDlhajln4vngrnov5znqIvphY3nva4g6K+75Y+WXG4qL1xuXG5mdW5jdGlvbiBnZXRMb2NhbFN0YXR1cyhrZXkpIHtcbiAgdmFyIGxzY2ZnO1xuICBpZiAodXRpbEdvbGRsb2cuaXNXZWIoKSkge1xuICAgIGxzY2ZnID0gdXRpbERhdGEuZ2V0THNSZW1vdGVDZmcoQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG4gIH0gZWxzZSB7XG4gICAgbHNjZmcgPSBjYWNoZSgpLmdldFN5bmMoYXBsdXNTdGF0aWMuQVBMVVNfUkVNT1RFX0NPTkZJRyk7XG4gIH1cbiAgcmV0dXJuIGxzY2ZnICYmIGxzY2ZnW2tleV07XG59O1xuXG5mdW5jdGlvbiBzZXRBdXRvRXZlbnRTdGF0dXMoc3RhdHVzKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlRfUkVNT1RFLCBzdGF0dXNdXG4gIH0pO1xufTtcblxuZXhwb3J0cy5nZXRBdXRvRXZlbnRTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9FVkVOVF9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NsaWNrRXZlbnRTdGF0dXMnKTtcbiAgXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5mdW5jdGlvbiBzZXREZXZpY2VTdGF0dXMoZW5hYmxlKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246ICdhcGx1cy5zZXRNZXRhSW5mbycsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfREVWSUNFX0VOQUJMRSwgZW5hYmxlXVxuICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0RGV2aWNlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICBjb25zb2xlLmxvZygneXotLS0tLWN1cnJlbnREZXZpY2VFbmFibGUnLCAhIWdldExvY2FsU3RhdHVzKCdjdXJyZW50RGV2aWNlRW5hYmxlJykgKTtcbiAgY29uc29sZS5sb2coJ3l6LS0tLS1BUExVU19ERVZJQ0VfRU5BQkxFJywgISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFKSk7XG4gIFxuICByZXR1cm4gZ2V0TG9jYWxTdGF0dXMoJ2N1cnJlbnREZXZpY2VFbmFibGUnKSB8fCBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ERVZJQ0VfRU5BQkxFKTtcbn07XG5cbmZ1bmN0aW9uIHNldEF1dG9QYWdlU3RhdHVzKHN0YXR1cykge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgIGFyZ3VtZW50czogW2FwbHVzU3RhdGljLkFQTFVTX0RJU0FCTEVfQVVUT1BWX1JFTU9URSwgc3RhdHVzXVxuICB9KTtcbn07XG5cbmV4cG9ydHMuZ2V0QXV0b1BhZ2VTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciByZXN1bHQgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVl9SRU1PVEUpIHx8IGdldExvY2FsU3RhdHVzKCdjb2RlbGVzc0NvbGxlY3RvclBhZ2VTdGF0dXMnKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmZ1bmN0aW9uIHNldEF1dG9UcmFja1N0YXR1cyhzdGF0dXMpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfRU5BQkxFRF9SRU1PVEUsIHN0YXR1c11cbiAgfSk7XG59O1xuXG5cbmV4cG9ydHMuZ2V0QXV0b1RyYWNrU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgcmVzdWx0ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfQVVUT1RSQUNLX0VOQUJMRURfUkVNT1RFKSB8fCBnZXRMb2NhbFN0YXR1cygnY29kZWxlc3NTdGF0dXMnKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuZW5hYmxlQ2ZnID0gZnVuY3Rpb24oY2ZnKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGlmIChjZmcpIHtcbiAgICAvLyBA5paH5b+DIGNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyA9IDEg5YWz6Zet6Ieq5YqocHZcbiAgICBzZXRBdXRvRXZlbnRTdGF0dXMoY2ZnLmNvZGVsZXNzQ2xpY2tFdmVudFN0YXR1cyk7XG4gICAgc2V0QXV0b1BhZ2VTdGF0dXMoY2ZnLmNvZGVsZXNzQ29sbGVjdG9yUGFnZVN0YXR1cyk7XG4gICAgc2V0QXV0b1RyYWNrU3RhdHVzKGNmZy5jb2RlbGVzc1N0YXR1cyk7XG4gICAgc2V0RGV2aWNlU3RhdHVzKGNmZy5jdXJyZW50RGV2aWNlRW5hYmxlKTtcbiAgICBcbiAgICBpZiAoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlICYmIGNmZy5ldmVudFNhbXBsaW5nUmF0ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnNldE1ldGFJbmZvJyxcbiAgICAgICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuQVBMVVNfRVZFTlRfTElNSVRSQVRFUywgYXBsdXNVdGlsLm1hcEV2ZW50U2FtcGxlUmF0ZXMoY2ZnLmV2ZW50U2FtcGxpbmdSYXRlKV1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjZmcuY29kZWxlc3NJZ25vcmVDb21wb25lbnQgJiYgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuc2V0TWV0YUluZm8nLFxuICAgICAgICBhcmd1bWVudHM6IFthcGx1c1N0YXRpYy5BUExVU19BVVRPVFJBQ0tfQ09ORklHX1JFTU9URSwgY2ZnLmNvZGVsZXNzSWdub3JlQ29tcG9uZW50XVxuICAgICAgfSk7XG4gICAgfVxuICB9XG59O1xuXG5cblxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUmVtb3RlQ2ZnLmpzXG4vLyBtb2R1bGUgaWQgPSAyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFRyaW0gPSByZXF1aXJlKCcuL3V0aWxUcmltJyk7XG52YXIgdXRpbFN0b3JlID0gcmVxdWlyZSgnLi91dGlsU3RvcmUnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIganNvblV0aWwgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL2pzb25VdGlsJyk7XG52YXIgYXBsdXNVdGlsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHRyeVRvRGVjb2RlVVJJQ29tcG9uZW50OiBmdW5jdGlvbiAodmFsLCBkZWZhdWx0X3ZhbCkge1xuICAgIHZhciB2ID0gZGVmYXVsdF92YWwgfHwgJyc7XG4gICAgaWYgKHZhbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdiA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWwpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdjtcbiAgfSxcbiAgXG4gIC8qKlxuICAgKiDlsIblvaLlpoIgXCJwYWdlSWQ9MTIzOyBzaXRlSWQ9NDU2XCIg55qE5YaF5a656Kej5p6Q5Li6IE9iamVjdFxuICAgKiBAcGFyYW0gcyB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2RpY3RdIHtPYmplY3R9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIHBhcnNlU2VtaWNvbG9uQ29udGVudDogZnVuY3Rpb24gKHMsIGRpY3QsIHVuZGVjb2RlKSB7XG4gICAgZGljdCA9IGRpY3QgfHwge307XG4gICAgdmFyIGEgPSBzLnNwbGl0KCc7Jyk7XG4gICAgdmFyIGo7XG4gICAgdmFyIGFfbGVuID0gYS5sZW5ndGg7XG4gICAgdmFyIGEyO1xuXG4gICAgZm9yIChqID0gMDsgaiA8IGFfbGVuOyBqKyspIHtcbiAgICAgIGEyID0gYVtqXS5zcGxpdCgnPScpO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxUcmltLnRyaW0oYTIuc2xpY2UoMSkuam9pbignPScpKTtcbiAgICAgIGRpY3RbdXRpbFRyaW0udHJpbShhMlswXSkgfHwgJyddID0gdW5kZWNvZGUgPyBfdmFsdWUgOiB0aGlzLnRyeVRvRGVjb2RlVVJJQ29tcG9uZW50KF92YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpY3Q7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWwhuS4gOS4qiBub2RlIGxpc3Qg6L2s5Li65pWw57uEXG4gICAqIEBwYXJhbSBub2RlcyB7Tm9kZUxpc3R9XG4gICAqIOWPguinge+8mmh0dHA6Ly93d3cucGxhbmFiYy5uZXQvMjAxMC8wMS8wNi9hcmd1bWVudHNfdG9fYXJyYXkvXG4gICAqL1xuICBub2RlTGlzdFRvQXJyYXk6IGZ1bmN0aW9uIChub2Rlcykge1xuICAgIHZhciBhcnI7XG4gICAgdmFyIGxlbmd0aDtcblxuICAgIHRyeSB7XG4gICAgICAvLyB3b3JrcyBpbiBldmVyeSBicm93c2VyIGV4Y2VwdCBJRVxuICAgICAgYXJyID0gW10uc2xpY2UuY2FsbChub2Rlcyk7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gc2xvd2VyLCBidXQgd29ya3MgaW4gSUVcbiAgICAgIGFyciA9IFtdO1xuICAgICAgbGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFyci5wdXNoKG5vZGVzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGFycjtcbiAgICB9XG4gIH0sXG5cbiAgZ2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCBkYXRlKSB7XG4gICAgaWYgKHV0aWxTdG9yZS5nZXQgJiYgdXRpbFN0b3JlLnRlc3QoKSkge1xuICAgICAgdmFyIF9sc19jbmEgPSAnJztcbiAgICAgIHZhciBfdmFsdWUgPSB1dGlsU3RvcmUuZ2V0KEVUQUdfU1RPUkFHRV9LRVkpO1xuICAgICAgaWYgKF92YWx1ZSkge1xuICAgICAgICB2YXIgX2FyciA9IF92YWx1ZS5zcGxpdCgnXycpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19jbmEgPSBfYXJyLmxlbmd0aCA+IDEgJiYgZGF0ZSA9PT0gX2FyclswXSA/IF9hcnJbMV0gOiAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfbHNfY25hID0gX2Fyci5sZW5ndGggPiAxID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KF9sc19jbmEpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5FVEFHX1NUT1JBR0VfS0VZLCAgdGhpcy50b2RheSArICdfJyArIGVuY29kZVVSSUNvbXBvbmVudChjbmEpKTtcbiAgc2V0THNDbmE6IGZ1bmN0aW9uIChFVEFHX1NUT1JBR0VfS0VZLCB0b2RheSwgY25hKSB7XG4gICAgaWYgKGNuYSAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHV0aWxTdG9yZS5zZXQoRVRBR19TVE9SQUdFX0tFWSwgIHRvZGF5ICsgJ18nICsgZW5jb2RlVVJJQ29tcG9uZW50KGNuYSkpO1xuICAgIH1cbiAgfSxcbiAgXG4gIGdldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgZGF0ZSkge1xuICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHZhciBfbHNfaW1wdiA9ICcnO1xuICAgICAgdmFyIF92YWx1ZSA9IHV0aWxTdG9yZS5nZXQoSU1QUklOVF9TVE9SQUdFX0tFWSk7XG4gICAgICBpZiAoX3ZhbHVlKSB7XG4gICAgICAgIHZhciBfYXJyID0gX3ZhbHVlLnNwbGl0KCd8fCcpIHx8IFtdO1xuICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgIF9sc19pbXB2ID0gX2Fyci5sZW5ndGggPiAxICYmIGRhdGUgPT09IF9hcnJbMF0gPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX2xzX2ltcHYgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoX2xzX2ltcHYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIHNldExzSW1wdjogZnVuY3Rpb24oSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXksIGltcHYpIHtcbiAgICBpZiAoaW1wdiAmJiB1dGlsU3RvcmUuc2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHV0aWxTdG9yZS5zZXQoSU1QUklOVF9TVE9SQUdFX0tFWSwgdG9kYXkgKyAnfHwnICsgZW5jb2RlVVJJQ29tcG9uZW50KGltcHYpKTtcbiAgICB9XG4gIH0sXG5cblxuICBzZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgdG9kYXksIGNmZykge1xuICAgIGlmIChjZmcgJiYgdXRpbFN0b3JlLnNldCAmJiB1dGlsU3RvcmUudGVzdCgpKSB7XG4gICAgICB2YXIgY2xvbmVDZmcgPSB1dGlsRGFzaC5jbG9uZURlZXAoY2ZnKTtcbiAgICAgIGlmICh0eXBlb2YgY2xvbmVDZmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNsb25lQ2ZnID0gSlNPTi5zdHJpbmdpZnkoY2xvbmVDZmcpO1xuICAgICAgfVxuICAgICAgdXRpbFN0b3JlLnNldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZLCB0b2RheSArICd8fCcgKyBlbmNvZGVVUklDb21wb25lbnQoY2xvbmVDZmcpKTtcbiAgICB9XG4gIH0sXG5cblxuICBnZXRMc1JlbW90ZUNmZzogZnVuY3Rpb24oUkVNT1RFX0NPTkZJR19TVE9SQUdFX0tFWSwgZGF0ZSkge1xuICAgIGlmICh1dGlsU3RvcmUuZ2V0ICYmIHV0aWxTdG9yZS50ZXN0KCkpIHtcbiAgICAgIHZhciBfbHNfcmVtb3RlQ2ZnID0gJyc7XG4gICAgICB2YXIgX3ZhbHVlID0gdXRpbFN0b3JlLmdldChSRU1PVEVfQ09ORklHX1NUT1JBR0VfS0VZKTtcbiAgICAgIGlmIChfdmFsdWUpIHtcbiAgICAgICAgdmFyIF9hcnIgPSBfdmFsdWUuc3BsaXQoJ3x8JykgfHwgW107XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgX2xzX3JlbW90ZUNmZyA9IF9hcnIubGVuZ3RoID4gMSAmJiBkYXRlID09PSBfYXJyWzBdID8gX2FyclsxXSA6ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF9sc19yZW1vdGVDZmcgPSBfYXJyLmxlbmd0aCA+IDEgPyBfYXJyWzFdIDogJyc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBqc29uVXRpbC5wYXJzZShkZWNvZGVVUklDb21wb25lbnQoX2xzX3JlbW90ZUNmZykpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9LFxuXG4gIGdldFVybDogZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuICAgIHZhciBlZ1VybCA9IHVybCB8fCAnLy9sb2cubW1zdGF0LmNvbS9lZy5qcyc7XG4gICAgdHJ5IHtcbiAgICAgIHZhciByaG9zdF92ID0gYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfUFZfRE9NQUlOKTtcbiAgICAgIHJob3N0X3YgPSBhcGx1c1V0aWwuZml4RG9tYWluKHJob3N0X3YpLnJlcGxhY2UoL1xcL1xcdysuZ2lmJC8sJycpO1xuICAgICAgLy8gdmFyIHJlZyA9IC9bW2EtenxcXC18XFxffDAtOVxcLl0rW2EtenxcXC18XFxffDAtOV0oOlxcZCopPy87XG4gICAgICAvLyB2YXIgY3VzdG9tX2hvc3QgPSByaG9zdF92Lm1hdGNoKHJlZyk7XG4gICAgICAvLyBpZiAoY3VzdG9tX2hvc3QgJiYgY3VzdG9tX2hvc3RbMF0pIHtcbiAgICAgIC8vICAgLy8gZWdVcmwgPSBlZ1VybC5yZXBsYWNlKHJlZywgY3VzdG9tX2hvc3RbMF0pO1xuICAgICAgLy8gfVxuICAgICAgZWdVcmwgPSByaG9zdF92ICsgJy9lZy5qcyc7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgIH1cbiAgICByZXR1cm4gZWdVcmw7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOWvueWtl+espuS4sui/m+ihjHRyaW3lpITnkIZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIOWOu+aOieWtl+espuS4siBzIOWJjeWQjueahOepuuagvFxuICogQHBhcmFtIHMge1N0cmluZ31cbiAqL1xuZnVuY3Rpb24gdHJpbShzKSB7XG4gIHJldHVybiAodHlwZW9mIHMgPT09ICdzdHJpbmcnKSA/IHMucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpIDogJyc7XG59O1xuZXhwb3J0cy50cmltID0gdHJpbTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxUcmltLmpzXG4vLyBtb2R1bGUgaWQgPSAzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrLCB2KTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0sXG4gIC8vIOe7j+i/h3Rlc3TkuYvlkI5nZXTlupTor6XkuI3kvJrmnInpl67pophcbiAgZ2V0OiBmdW5jdGlvbiAoaykge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oayk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfSxcbiAgdGVzdDogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0ZXN0S2V5ID0gJ2dyZXlfdGVzdF9rZXknO1xuICAgIHRyeSB7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0ZXN0S2V5LCAxKTtcbiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHRlc3RLZXkpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSxcbiAgcmVtb3ZlOiBmdW5jdGlvbiAoaykge1xuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGspO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSAzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmFzc2lnbiA9IHJlcXVpcmUoJy4vYXNzaWduJyk7XG5cbi8qKlxuICog55Sf5oiQ5LiA5Liq55So5LqO6YG/5YWN57yT5a2Y55qE6ZqP5py65pWwXG4gKiDkuLrkuoblh4/lsJEgdXJsIOmVv+W6pu+8jOi/meS4qumaj+acuuaVsOaNrueahOmVv+W6puWumuS4uiA3IOS9je+8jFxuICog5Li65LqG5YeP5bCR56Kw5pKe77yM5L2/55SoIDE2IOi/m+WItuaVsOWtl1xuICpcbiAqIDI2ODQzNTQ1NiA9IDIgXiAyOCA9IDB4ZmZmZmZmZiArIDFcbiAqL1xuZXhwb3J0cy5tYWtlQ2FjaGVOdW0gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyNjg0MzU0NTYpLnRvU3RyaW5nKDE2KTtcbn07XG5cbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+WQpuS7peWtl+espuS4siBzMiDlvIDlpLRcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNTdGFydFdpdGggPSBmdW5jdGlvbihzMSwgczIpIHtcbiAgcmV0dXJuIHMxLmluZGV4T2YoczIpID09PSAwO1xufTtcbi8qKlxuICog5Yik5pat5a2X56ym5LiyIHMxIOaYr+a7nuS7peWtl+espuS4siBzMiDnu5PlsL5cbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNFbmRXaXRoID0gZnVuY3Rpb24oczEsIHMyKSB7XG4gIHZhciBsMSA9IHMxLmxlbmd0aCwgbDIgPSBzMi5sZW5ndGg7XG4gIHJldHVybiBsMSA+PSBsMiAmJiBzMS5pbmRleE9mKHMyKSA9PSAobDEgLSBsMik7XG59O1xuXG5leHBvcnRzLmFueSA9IGZ1bmN0aW9uKGFyciwgZm4pIHtcbiAgdmFyIGk7XG4gIHZhciBsID0gYXJyLmxlbmd0aDtcbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChmbihhcnJbaV0pKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0cy5pc051bWJlciA9IGZ1bmN0aW9uKHYpIHtcbiAgcmV0dXJuIHR5cGVvZiB2ID09PSAnbnVtYmVyJztcbn07XG5cbmV4cG9ydHMuaXNOYU4gPSBmdW5jdGlvbih2KSB7XG4gIGlmKGlzTmFOKSB7XG4gICAgcmV0dXJuIGlzTmFOKHYpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2ICE9PSB2O1xuICB9XG59O1xuXG4vKipcbiAqIOWIpOaWreWtl+espuS4siBzMSDmmK/lkKbljIXlkKvlrZfnrKbkuLIgczJcbiAqIEBwYXJhbSBzMSB7U3RyaW5nfVxuICogQHBhcmFtIHMyIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMuaXNDb250YWluID0gZnVuY3Rpb24gKHMxLCBzMikge1xuICByZXR1cm4gczEuaW5kZXhPZihzMikgPiAtMTtcbn07XG5cbi8qKlxuICog5YWL6ZqG5LiA5Liqb2JqZWN0XG4gKi9cbnZhciBjbG9uZURlZXAgPSBmdW5jdGlvbihvYmopIHtcbiAgdmFyIHN0cjtcbiAgdmFyIG5ld29iaiA9IG9iai5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgPyBbXSA6IHt9O1xuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSBpZiAoSlNPTiAmJiBKU09OLnBhcnNlKSB7XG4gICAgc3RyID0gSlNPTi5zdHJpbmdpZnkob2JqKTsgLy/ns7vliJfljJblr7nosaFcbiAgICBuZXdvYmogPSBKU09OLnBhcnNlKHN0cik7IC8v6L+Y5Y6fXG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSBpbiBvYmopIHtcbiAgICAgIG5ld29ialtpXSA9IHR5cGVvZiBvYmpbaV0gPT09ICdvYmplY3QnID8gY2xvbmVEZWVwKG9ialtpXSkgOiBvYmpbaV07XG4gICAgfVxuICB9XG4gIHJldHVybiBuZXdvYmo7XG59O1xuXG5leHBvcnRzLmNsb25lRGVlcCA9IGNsb25lRGVlcDtcblxuLyoqXG4gKiDojrflj5Z1cmzlj4LmlbAs5LuF6ZmQd2Vi44CBaDVcbiAqL1xudmFyIGdldFVybFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHJlZ2V4ID0gL1s/Jl0oW149I10rKT0oW14mI10qKS9nO1xuICB2YXIgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIHZhciBwYXJhbXMgPSB7fTtcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAobWF0Y2ggPSByZWdleC5leGVjKHVybCkpIHtcbiAgICBwYXJhbXNbbWF0Y2hbMV1dID0gbWF0Y2hbMl07XG4gIH1cbiAgcmV0dXJuIHBhcmFtcztcbn07XG5cbmV4cG9ydHMuZ2V0VXJsUGFyYW1zID0gZ2V0VXJsUGFyYW1zO1xuXG4vKipcbiAqIOWIpOaWreepuuWvueixoVxuICovXG52YXIgaXNFbXB0eU9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgaWYoIW8pIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgZm9yICh2YXIgayBpbiBvKSB7XG4gICAgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGspKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuaXNFbXB0eU9iamVjdCA9IGlzRW1wdHlPYmplY3Q7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbERhc2guanNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuLyoqXG4gKiDlr7nosaFtZXJnZVxuICogIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ25cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAodGFyZ2V0T2JqLCBhcmdzT2JqKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE9iamVjdC5hc3NpZ24gIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgdmFyIHRvID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJndW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB2YXIgbmV4dFNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF07XG4gICAgICAgIGlmIChuZXh0U291cmNlICE9PSBudWxsKSB7IC8vIFNraXAgb3ZlciBpZiB1bmRlZmluZWQgb3IgbnVsbFxuICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuZXh0U291cmNlLCBuZXh0S2V5KSkge1xuICAgICAgICAgICAgICB0b1tuZXh0S2V5XSA9IG5leHRTb3VyY2VbbmV4dEtleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdG87XG4gICAgfSh0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0YXJnZXRPYmosIGFyZ3NPYmopO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2Fzc2lnbi5qc1xuLy8gbW9kdWxlIGlkID0gMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1heENvdW50KSB7XG4gIHZhciBfbWF4Q291bnQgPSBtYXhDb3VudDtcbiAgdmFyIF9pdGVtcyA9IFtdO1xuXG4gIHRoaXMuZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgaWYgKHR5cGVvZiBfbWF4Q291bnQgPT09ICdudW1iZXInICYmIHRoaXMuc2l6ZSgpID49IF9tYXhDb3VudCkge1xuICAgICAgdGhpcy5kZXF1ZXVlKCk7XG4gICAgfVxuXG4gICAgX2l0ZW1zLnB1c2goaXRlbSk7XG4gIH07XG5cbiAgdGhpcy5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMuc2hpZnQoKTtcbiAgfTtcblxuICB0aGlzLmZyb250ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXNbMF07XG4gIH07XG5cbiAgdGhpcy5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoID09PSAwO1xuICB9O1xuXG4gIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgX2l0ZW1zLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgdGhpcy5zaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfaXRlbXMubGVuZ3RoO1xuICB9O1xuXG4gIHRoaXMuaXRlbXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIF9pdGVtcztcbiAgfTtcblxuICB0aGlzLnByaW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHVsb2coKS5pKCctLS1xdWV1ZTogJywgX2l0ZW1zLnRvU3RyaW5nKCkpO1xuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9xdWV1ZS5qc1xuLy8gbW9kdWxlIGlkID0gMzVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwidmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgY3VycmVudFBhdGggPSBcIlwiO1xudmFyIHBhZ2VPcHRpb25NYXAgPSB7fTtcblxuZnVuY3Rpb24gYnVpbGRQYXRoKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmICghcGF0aCB8fCBwYXRoID09PSAnLScpIHtcbiAgICByZXR1cm4gXCItXCI7XG4gIH1cbiAgdmFyIHFzID0gW107XG4gIGZvciAodmFyIHEgaW4gcXVlcnkpIHtcbiAgICBxcy5wdXNoKHEgKyAnPScgKyBxdWVyeVtxXSk7XG4gIH1cbiAgdmFyIHFzcyA9IHFzLmpvaW4oJyYnKTtcbiAgcmV0dXJuIHFzcyA/IHBhdGggKyAnPycgKyBxc3MgOiBwYXRoO1xufTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVBhdGggPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGN1cnJlbnRQYXRoO1xufTtcblxuZXhwb3J0cy5zZXRDdXJyZW50UGF0aCA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKHBhdGgpIHtcbiAgICBjdXJyZW50UGF0aCA9IHBhdGg7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZVF1ZXJ5ID0gZnVuY3Rpb24ocGF0aCkge1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBwYWdlT3B0aW9uTWFwW3BhdGhdO1xuICB9XG59O1xuXG5leHBvcnRzLnNldFBhZ2VRdWVyeSA9IGZ1bmN0aW9uKHBhdGgsIHF1ZXJ5KSB7XG4gIGlmIChwYXRoKSB7XG4gICAgcGFnZU9wdGlvbk1hcFtwYXRoXSA9IHF1ZXJ5O1xuICB9XG59O1xuXG5leHBvcnRzLmdldEZ1bGxQYXRoID0gZnVuY3Rpb24ocGF0aCkge1xuICByZXR1cm4gYnVpbGRQYXRoKHBhdGgsIHBhZ2VPcHRpb25NYXBbcGF0aF0pO1xufTtcblxuZXhwb3J0cy5nZXRQYWdlTmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBtZXRhID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fTtcbiAgdmFyIHJlYWxQYXRoID0gcGF0aCB8fCBjdXJyZW50UGF0aDtcbiAgaWYgKG1ldGEuaGFzaE1vZGUpIHtcbiAgICByZWFsUGF0aCA9IGxvY2F0aW9uLmhhc2g7XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyDlr7nkuo7liqjmgIHot6/nlLHvvIzmlK/mjIHnlKjmiLfkvKDlhaXmraPliJnov5vooYzljLnphY1cbiAgICBpZiAobWV0YSAmJiB0eXBlb2YgbWV0YSA9PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGEpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gcmVhbFBhdGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIGlmIChtZXRhW2tleV0gJiYgbWV0YVtrZXldLnJlZ1J1bGUpIHtcbiAgICAgICAgICByZWFsUGF0aCA9IG1ldGFba2V5XS5yZWdSdWxlLnRlc3QocmVhbFBhdGgpID8ga2V5IDogcmVhbFBhdGg7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgLy9cbiAgfVxuICByZXR1cm4gbWV0YVtyZWFsUGF0aF07XG59O1xuXG52YXIgdWxvZyA9IHJlcXVpcmUoXCJAdXRpbHMvdWxvZ1wiKTtcbnZhciBlYWNoTWFwID0gcmVxdWlyZShcIkB1dGlscy9lYWNoTWFwXCIpO1xuLyogZXNsaW50LWRpc2FibGUgKi9cbmV4cG9ydHMuZ2V0V3hUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgaWYgKCFwYXRoKSByZXR1cm4gXCJcIjtcbiAgdmFyIG1pbmkgPSByZXF1aXJlKFwiQHV0aWxzL21pbmlcIik7XG4gIHZhciBwbGF0VHlwZSA9IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk7XG4gIHZhciB0ID0gXCJcIjtcbiAgdHJ5IHtcbiAgICBpZiAocGxhdFR5cGUgPT09ICd3eCcgJiYgX193eENvbmZpZykge1xuICAgICAgdmFyIHd4Q29uZmlnID0gX193eENvbmZpZzsgICAgICBcbiAgICAgIHZhciBwYWdlID0gX193eENvbmZpZy5wYWdlIHx8IHt9O1xuICAgICAgdmFyIHJvdXRlID0gcGFnZVtwYXRoXSB8fCBwYWdlW3BhdGggKyBcIi5odG1sXCJdO1xuICAgICAgdmFyIG4gPSB7fSwgaSA9IHt9O1xuICAgICAgaWYgKHd4Q29uZmlnLmdsb2JhbCAmJiB3eENvbmZpZy5nbG9iYWwud2luZG93ICYmIHd4Q29uZmlnLmdsb2JhbC53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuICAgICAgICBuLnRpdGxlID0gd3hDb25maWcuZ2xvYmFsLndpbmRvdy5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0O1xuICAgICAgfVxuICAgICAgaWYgKHJvdXRlICYmIHJvdXRlLndpbmRvdyAmJiByb3V0ZS53aW5kb3cubmF2aWdhdGlvbkJhclRpdGxlVGV4dCkge1xuICAgICAgICBpLnRpdGxlID0gcm91dGUud2luZG93Lm5hdmlnYXRpb25CYXJUaXRsZVRleHQ7XG4gICAgICB9XG5cbiAgICAgIGlmICghaS50aXRsZSAmJiBfX3d4QXBwQ29kZV9fKSB7XG4gICAgICAgIHZhciBhcHBKU09OID0gX193eEFwcENvZGVfX1twYXRoICsgXCIuanNvblwiXTtcbiAgICAgICAgaWYgKGFwcEpTT04gJiYgYXBwSlNPTi5uYXZpZ2F0aW9uQmFyVGl0bGVUZXh0KSB7XG4gICAgICAgICAgaS50aXRsZSA9IGFwcEpTT04ubmF2aWdhdGlvbkJhclRpdGxlVGV4dDtcbiAgICAgICAgfSBcbiAgICAgIH1cbiAgICAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICBpZiAoY3R4Lmdsb2JhbFRpdGxlTWFwKSB7XG4gICAgICAgIGVhY2hNYXAoY3R4Lmdsb2JhbFRpdGxlTWFwLCBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgICAgICAgICBpZiAoa2V5ID09PSBwYXRoKSB7XG4gICAgICAgICAgICB0ID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkge1xuICAgICAgICB0ID0gaS50aXRsZSB8fCBuLnRpdGxlIHx8ICcnO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ2N1cnJlbnQgcGxhdGZvcm0gY2FuIG5vdCB0cmFjayBwYWdlIHRpdGxlJyk7XG4gICAgcmV0dXJuIHQ7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0UGFnZUNvZGUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiAodGhpcy5nZXRQYWdlTmFtZShwYXRoKSB8fCB7fSkucGFnZU5hbWU7XG59O1xuXG5leHBvcnRzLmdldFBhZ2VUaXRsZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuICh0aGlzLmdldFBhZ2VOYW1lKHBhdGgpIHx8IHt9KS5wYWdlVGl0bGUgfHwgdGhpcy5nZXRXeFRpdGxlKHBhdGgpO1xufTtcblxuZXhwb3J0cy5nZXRWVFJlYWx0aW1lQ29kZSA9IGZ1bmN0aW9uKCkge1xuICBpZiAoY3VycmVudFBhdGgpIHtcbiAgICB2YXIgcXVlcnkgPSBwYWdlT3B0aW9uTWFwW2N1cnJlbnRQYXRoXSB8fCB7fTtcbiAgICB2YXIgcmVnRXhwID0gL15cXCR2dF8vO1xuICAgIHZhciBzY2VuZSA9IGRlY29kZVVSSUNvbXBvbmVudChxdWVyeS5zY2VuZSk7XG4gICAgcmV0dXJuIHNjZW5lICYmIHJlZ0V4cC50ZXN0KHNjZW5lKSAmJiBzY2VuZS5yZXBsYWNlKHJlZ0V4cCwgJycpO1xuICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5a+5bWFw6L+b6KGM6auY5oCn6IO955qE6YGN5Y6GXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobWFwLCBjYWxsYmFjaykge1xuICBpZiAoT2JqZWN0ICYmIE9iamVjdC5rZXlzKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuICAgIHZhciBsZW4gPSBrZXlzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB2YXIgazEgPSBrZXlzW2ldO1xuICAgICAgY2FsbGJhY2soazEsIG1hcFtrMV0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrIGluIG1hcCkge1xuICAgICAgY2FsbGJhY2soaywgbWFwW2tdKTtcbiAgICB9XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9lYWNoTWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAzN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbE1vbml0b3IuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjIgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuZnVuY3Rpb24gcmFuaygpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgaWYgKGN0eC5la3ZSYW5rKSB7XG4gICAgY3R4LmVrdlJhbmsrKztcbiAgfSBlbHNlIHtcbiAgICBjdHguZWt2UmFuayA9IDE7XG4gIH1cbiAgcmV0dXJuIGN0eC5la3ZSYW5rO1xufTtcbmV4cG9ydHMucmFuayA9IHJhbms7XG5cbmZ1bmN0aW9uIGNsZWFyKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICBjdHguZWt2UmFuayA9IDA7XG59XG5leHBvcnRzLmNsZWFyID0gY2xlYXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbE1vbml0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvYXBsdXNfcGx1Z2luX21pbmkvbGliX2F1dG9fY29sbGVjdC9pbmplY3RfcGFnZS5qc1xuICog6Ieq5Yqo6YeH6ZuG5bCP56iL5bqP5L+h5oGv55qE5o+S5Lu2IC0g6aG16Z2i5rOo5YWlXG4gKlxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBSaWNoYXJkfOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvdXRpbEZ1bmN0aW9uJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHVtVXRpbHMgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3V0aWxzJyk7XG52YXIgdXRpbE9iamVjdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsT2JqZWN0Jyk7XG5cbmZ1bmN0aW9uIGdldFV0bVBhcmFtc09iaiAocSkge1xuICB2YXIgb2JqID0ge307XG4gIHRyeSB7XG4gICAgZWFjaE1hcChxLCBmdW5jdGlvbiAoaywgdikge1xuICAgICAgLy8g6YG/5YWN5Li656m65pe26YeN5YaZZ2xvYmFscHJvcGVydHnlhoXnmoTlsZ7mgKdcbiAgICAgIGlmKGsuaW5kZXhPZigndXRtXycpID09PSAwKSB7XG4gICAgICAgIG9ialtrXSA9IHY7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHt9XG4gIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZXJTaGFyZUFwcE1zZyAob3B0LCBuYW1lKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG4gIHZhciBvcHRpb25zID0gcGFnZS5vcHRpb25zIHx8IHt9O1xuICB2YXIgbGlua1Bhcm1hcyA9IGZvcm1hdC5vYmoycGFyYW0ob3B0aW9ucywgdHJ1ZSk7XG4gIC8vIOaLvOaOpWN1cnJlbnRQYWdl55qEdXJs5LiOcXVlcnlcbiAgaWYobGlua1Bhcm1hcykge1xuICAgIHJvdXRlID0gcm91dGUgKyAnPycgKyBsaW5rUGFybWFzO1xuICB9IFxuICBpZiAoIW9wdC5xdWVyeSkge1xuICAgIG9wdC5xdWVyeSA9IHt9O1xuICB9XG4gIG9wdC5xdWVyeS4kJF9zaGFyZV91aWQgPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ19hbm9ueV9pZCcpIHx8IGN0eC5hcGx1cy5fX0VUQUdfX0NOQV9fSURfXztcbiAgb3B0LnF1ZXJ5LiQkX3V0bV9tZWRpdW0gPSAzO1xuXG4gIC8vIG9uU2hhcmVBcHBNZXNzYWdl5rKh5pyJcmV0dXJuIOaIliBvblNoYXJlVGltZWxpbmXml7bvvIzlhaXlj4JvcHTnmoRwYXRo5LiOcXVlcnnkuLrnqbrvvIzmraTml7bnlKhjdXJyZW50UGFnZeeahHBhdGjlkoxvcHRpb25z5YWc5bqVXG4gIG9wdC5xdWVyeSA9IHVtVXRpbHMuYXNzaWduKHt9LCBvcHRpb25zLCBvcHQucXVlcnkpO1xuICB2YXIgcGF0aCA9IG9wdC5wYXRoIHx8IHJvdXRlO1xuXG4gIHZhciBhcHBlbmRQYXJhbXMgPSAnJCRfc2hhcmVfdWlkPScgKyBvcHQucXVlcnkuJCRfc2hhcmVfdWlkICsgJyYkJF91dG1fbWVkaXVtPTMnO1xuIFxuICBpZiAocGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgIG9wdC5wYXRoID0gcGF0aCArICcmJyArIGFwcGVuZFBhcmFtcztcbiAgfSBlbHNlIHtcbiAgICBvcHQucGF0aCA9IHBhdGggKyAnPycgKyBhcHBlbmRQYXJhbXM7XG4gIH1cbiAgb3B0LnN0YXR1cyA9ICdyZWFkeSc7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbbmFtZSwgb3B0XVxuICB9KTtcbiAgcmV0dXJuIG9wdDtcbn07XG5cbmZ1bmN0aW9uIG9uUHVsbERvd25SZWZyZXNoKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgb3B0ID0ge1xuICAgIHN0YXR1czogJ3JlYWR5J1xuICB9O1xuICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgIGFyZ3VtZW50czogWydvblB1bGxEb3duUmVmcmVzaCcsIG9wdF1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBvblJlYWNoQm90dG9tKCkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBvcHQgPSB7XG4gICAgc3RhdHVzOiAncmVhZHknLFxuICAgIGNvbnRleHQ6IHRoYXRcbiAgfTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuUFVCTElTSCxcbiAgICBhcmd1bWVudHM6IFsnb25SZWFjaEJvdHRvbScsIG9wdF1cbiAgfSk7XG59O1xuXG4vLyDpobXpnaLliqDovb1cbmZ1bmN0aW9uIG9uUGFnZUxvYWQocXVlcnkpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICBQYWdlTWFuYWdlci5zZXRDdXJyZW50UGF0aCh0aGlzLnJvdXRlKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIFBhZ2VNYW5hZ2VyLnNldFBhZ2VRdWVyeSh0aGlzLnJvdXRlLCBxdWVyeSk7XG4gICAgfVxuICAgIHVsb2coKS5pKCdQYWdlIG9uTG9hZDogJywgdGhpcy5yb3V0ZSwgcXVlcnkpO1xuICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICB1dGlsRnVuY3Rpb24ub25BcGx1c1JlYWR5KGN0eC5hcGx1c19xdWV1ZSwgYXBsdXNTdGF0aWMuU1VCU0NSSUJFLCBmdW5jdGlvbigpe1xuICAgICAgLy8g5YWo5bGA5bGe5oCn6L+95YqgdXRt5Y+C5pWwXG4gICAgICBjdHguYXBsdXMuYXBwZW5kTWV0YUluZm8oYXBsdXNTdGF0aWMuR0xPQkFMX1BST1BFUlRZLCBnZXRVdG1QYXJhbXNPYmoocXVlcnkpKTtcbiAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgICBhcmd1bWVudHM6IFsnb25Mb2FkJywge1xuICAgICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgICBjb250ZXh0OiB0aGF0LFxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgICAvLyDpobXpnaLliqDovb3lrozlkI7mt7flhaVzZXREYXRh77yM5pa55L6/6Ieq5Yqo5pud5YWJ44CB6Ieq5Yqo54K55Ye7562J5o+S5Lu25L2/55SoXG4gICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJlc2V0Rm4oX2N1cnJlbnRQYWdlLCAnc2V0RGF0YScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICAgICAgYXJndW1lbnRzOiBbJ29uUGFnZURhdGFDaGFuZ2VkJywge1xuICAgICAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgICAgIGNvbnRleHQ6IHRoYXRcbiAgICAgICAgICB9XVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudygnb25QYWdlTG9hZDogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZVNob3coKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgUGFnZU1hbmFnZXIuc2V0Q3VycmVudFBhdGgodGhpcy5yb3V0ZSk7XG4gICAgdXRpbEZ1bmN0aW9uLm9uQXBsdXNSZWFkeShjdHguYXBsdXNfcXVldWUsIGFwbHVzU3RhdGljLlNVQlNDUklCRSwgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgICAgIGFyZ3VtZW50czogWydvblNob3cnLCB7XG4gICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgICAgIGNvbnRleHQ6IHRoYXQsXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZVNob3c6ICcsIGUpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBvblBhZ2VSZWFkeSgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdHJ5IHtcbiAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uUmVhZHknLCB7XG4gICAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgICAgY29udGV4dDogdGhhdFxuICAgICAgfV1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHVsb2coKS53KCdvblBhZ2VSZWFkeTogJywgZSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uUGFnZUhpZGUoKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcbiAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuICAgICAgfV1cbiAgICB9KTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ29uUGFnZUhpZGU6ICcsIGUpO1xuICB9XG59O1xuXG4vLyBmdW5jdGlvbiBvblBhZ2VVbmxvYWQoKSB7XG4vLyAgIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4vLyAgIHRyeSB7XG4vLyAgICAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuLy8gICAgICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5QVUJMSVNILFxuLy8gICAgICAgYXJndW1lbnRzOiBbJ29uSGlkZScsIHtcbi8vICAgICAgICAgc3RhdHVzOiAncmVhZHknLFxuLy8gICAgICAgfV1cbi8vICAgICB9KTtcbi8vICAgfSBjYXRjaChlKXtcbi8vICAgICB1bG9nKCkudygnb25QYWdlVW5sb2FkOiAnLCBlKTtcbi8vICAgfVxuLy8gfTtcblxuZnVuY3Rpb24gb25BcGx1c0NsayhlKSB7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCB7XG4gICAgICBzdGF0dXM6ICdyZWFkeScsXG4gICAgICBldmVudDogZSxcbiAgICAgIGNvbnRleHQ6IHRoaXNcbiAgICB9XVxuICB9KTtcbn07XG5cbi8v6Kem5pG45LqL5Lu2XG5mdW5jdGlvbiBvbkFwbHVzVG91Y2goZSkge1xuICB2YXIgY3R4ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlBVQkxJU0gsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNUb3VjaCcsIHtcbiAgICAgIHN0YXR1czogJ3JlYWR5JyxcbiAgICAgIGNvbnRleHQ6IHRoYXQsXG4gICAgICBldmVudDogZSxcbiAgICB9XVxuICB9KTtcbn07XG5cbmZ1bmN0aW9uIHJld3JpdGVTaGFyZShvcHQpIHtcbiAgaWYgKG9wdC5vblNoYXJlQXBwTWVzc2FnZSkge1xuICAgIHZhciBvbGRPblNoYXJlQXBwTWVzc2FnZSA9IG9wdC5vblNoYXJlQXBwTWVzc2FnZTtcbiAgICBvcHQub25TaGFyZUFwcE1lc3NhZ2UgPSBmdW5jdGlvbihyZXMpIHtcbiAgICAgIHZhciBzaGFyZVJlc3VsdCA9IG9sZE9uU2hhcmVBcHBNZXNzYWdlLmNhbGwodGhpcywgcmVzKSB8fCB7fTtcbiAgICAgIHJldHVybiBoYW5kbGVyU2hhcmVBcHBNc2coc2hhcmVSZXN1bHQsICdvblNoYXJlQXBwTWVzc2FnZScpO1xuICAgIH07XG4gIH1cbn07XG5cbi8vIGZ1bmN0aW9uIGF1dG9Ib29rTWFwKGtleSkge1xuLy8gICB2YXIgYWhNYXAgPSB7XG4vLyAgICAgZGF0YTogMSxcbi8vICAgICBvbkxvYWQ6IDEsXG4vLyAgICAgb25TaG93OiAxLFxuLy8gICAgIG9uUmVhZHk6IDEsXG4vLyAgICAgb25QdWxsRG93blJlZnJlc2g6IDEsXG4vLyAgICAgb25TaGFyZUFwcE1lc3NhZ2U6IDEsXG4vLyAgICAgb25TaGFyZUFwcE1lc3NhZ2U6IDEsXG4vLyAgICAgb25TaGFyZVRpbWVsaW5lOiAxLFxuLy8gICAgIG9uUmVhY2hCb3R0b206IDEsXG4vLyAgICAgb25QYWdlU2Nyb2xsOiAxLFxuLy8gICAgIG9uUmVzaXplOiAxLFxuLy8gICAgIG9uVGFiSXRlbVRhcDogMSxcbi8vICAgICBvbkhpZGU6IDEsXG4vLyAgICAgb25VbmxvYWQ6IDEsXG4vLyAgICAgb25BcGx1c1RvdWNoOiAxLFxuLy8gICAgIG9uQXBsdXNDbGs6IDFcbi8vICAgfTtcbi8vICAgcmV0dXJuICEhYWhNYXBba2V5XTtcbi8vIH1cblxuLy8gZnVuY3Rpb24gZ2V0TWV0aG9kcyhvcHRpb25zKSB7XG4vLyAgIHZhciByZXN1bHQgPSBbXTtcbi8vICAgZm9yICh2YXIgYSBpbiBvcHRpb25zKSB7XG4vLyAgICAgaWYgKHR5cGVvZiBvcHRpb25zW2FdID09PSAnZnVuY3Rpb24nICYmICFhdXRvSG9va01hcChhKSkge1xuLy8gICAgICAgcmVzdWx0LnB1c2goYSk7XG4vLyAgICAgfVxuLy8gICB9XG4vLyAgIHJldHVybiByZXN1bHQ7XG4vLyB9O1xuXG4vLyBmdW5jdGlvbiBob29rQXV0b1RyYWNrTWV0aG9kcyhvcHRpb25zKSB7XG4vLyAgIHZhciBtZXRob2RzID0gZ2V0TWV0aG9kcyhvcHRpb25zKTtcbi8vICAgaWYgKG1ldGhvZHMgJiYgbWV0aG9kcy5sZW5ndGgpIHtcbi8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbi8vICAgICAgIHV0aWxGdW5jdGlvbi5jbGlja19wcm94eShvcHRpb25zLCBtZXRob2RzW2ldKTtcbi8vICAgICB9XG4vLyAgIH1cbi8vIH1cblxuLy8g5YiG5Lqr5pyL5Y+L5ZyIXG5mdW5jdGlvbiByZXdyaXRlU2hhcmVUaW1lbGluZShvcHQpIHtcbiAgaWYgKG9wdC5vblNoYXJlVGltZWxpbmUpIHtcbiAgICB2YXIgb2xkT25TaGFyZVRpbWVsaW5lID0gb3B0Lm9uU2hhcmVUaW1lbGluZTtcbiAgICBvcHQub25TaGFyZVRpbWVsaW5lID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICB2YXIgc2hhcmVSZXN1bHQgPSBvbGRPblNoYXJlVGltZWxpbmUuY2FsbCh0aGlzLCByZXMpIHx8IHt9O1xuICAgICAgcmV0dXJuIGhhbmRsZXJTaGFyZUFwcE1zZyhzaGFyZVJlc3VsdCwgJ29uU2hhcmVUaW1lbGluZScpO1xuICAgIH07XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluamVjdFBhZ2UoKSB7XG4gIHRyeSB7XG4gICAgdmFyIG9sZFBhZ2UgPSBQYWdlO1xuICAgIHZhciBvbGRQYWdlQWZ0ZXI7XG4gICAgaWYgKG9sZFBhZ2UuYWZ0ZXIpIHtcbiAgICAgIG9sZFBhZ2VBZnRlciA9IG9sZFBhZ2UuYWZ0ZXI7XG4gICAgfVxuICAgIFxuICAgIFBhZ2UgPSBmdW5jdGlvbihwYWdlT3B0aW9ucykgeyAgICAgIFxuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uU2hvdycsIG9uUGFnZVNob3cpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uVW5sb2FkJywgb25QYWdlSGlkZSk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25Mb2FkJywgb25QYWdlTG9hZCk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25SZWFkeScsIG9uUGFnZVJlYWR5KTtcbiAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblB1bGxEb3duUmVmcmVzaCcsIG9uUHVsbERvd25SZWZyZXNoKTtcbiAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4ocGFnZU9wdGlvbnMsICdvblJlYWNoQm90dG9tJywgb25SZWFjaEJvdHRvbSk7XG4gICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKHBhZ2VPcHRpb25zLCAnb25BcGx1c0NsaycsIG9uQXBsdXNDbGspO1xuICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihwYWdlT3B0aW9ucywgJ29uQXBsdXNUb3VjaCcsIG9uQXBsdXNUb3VjaCk7XG5cbiAgICAgIHJld3JpdGVTaGFyZShwYWdlT3B0aW9ucyk7XG4gICAgICByZXdyaXRlU2hhcmVUaW1lbGluZShwYWdlT3B0aW9ucyk7XG4gICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhwYWdlT3B0aW9ucyk7XG4gICAgICBvbGRQYWdlKHBhZ2VPcHRpb25zKTtcbiAgICB9O1xuICAgIC8vIOmAgumFjeeZvuW6pnN0YXJ0bWluaXByb2dyYW1cbiAgICBpZiAob2xkUGFnZUFmdGVyKSB7XG4gICAgICBQYWdlLmFmdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG9sZFBhZ2VBZnRlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KCdQYWdlIGhvb2sgZXJyb3InKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gaW5qZWN0Q29tcG9uZW50KCkge1xuICB0cnkge1xuICAgIHZhciBvbGRDb21wb25lbnQgPSBDb21wb25lbnQ7XG4gICAgQ29tcG9uZW50ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgb3B0aW9ucy5tZXRob2RzID0gb3B0aW9ucy5tZXRob2RzIHx8IHt9O1xuICAgICAgICB2YXIgbWV0aG9kcyA9IG9wdGlvbnMubWV0aG9kcztcbiAgICAgICAgdXRpbEZ1bmN0aW9uLnJld3JpdGVGbihtZXRob2RzLCAnb25TaG93Jywgb25QYWdlU2hvdyk7XG4gICAgICAgIHV0aWxGdW5jdGlvbi5yZXdyaXRlRm4obWV0aG9kcywgJ29uSGlkZScsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvblVubG9hZCcsIG9uUGFnZUhpZGUpO1xuICAgICAgICB1dGlsRnVuY3Rpb24ucmV3cml0ZUZuKG1ldGhvZHMsICdvbkxvYWQnLCBvblBhZ2VMb2FkKTtcbiAgICAgICAgcmV3cml0ZVNoYXJlKG1ldGhvZHMpO1xuICAgICAgICAvLyBob29rQXV0b1RyYWNrTWV0aG9kcyhtZXRob2RzKTtcbiAgICAgICAgb2xkQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgfSBjYXRjaCh0KSB7XG4gICAgICAgIG9sZENvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIH07XG4gICAgfTtcbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoJ0NvbXBvbmVudCBob29rIGVycm9yJyk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBpbmplY3RNaWR3YXkgKG1wQ3R4LCBuYW1lLCBjYWxsYmFjaykge1xuICBpZiAoWydvYmplY3QnLCAnZnVuY3Rpb24nXS5pbmRleE9mKHR5cGVvZiBtcEN0eCkgPiAtMSkge1xuICAgIGNhbGxiYWNrKCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3R5cGVvZiAnICsgbmFtZSArICcgaXMgbm90IG9iamVjdCBjYW50IHdhdGNoRXhwLicpO1xuICAgIHVsb2coKS53KCd0eXBlb2YgJyArIG5hbWUgKyAnIGlzIG5vdCBvYmplY3QgY2FudCB3YXRjaEV4cC4nKTtcbiAgfVxufVxudmFyIGdsb2JhbFRpdGxlTWFwID0ge307XG5mdW5jdGlvbiBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCkge1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIHZhciBjdHggPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbiAgdmFyIHBsYXRmb3JtQ3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHRyeSB7XG4gICAgaWYgKHBsYXRmb3JtQ3R4ICYmIHBsYXRmb3JtQ3R4LnNldE5hdmlnYXRpb25CYXJUaXRsZSkge1xuICAgICAgdmFyIG9sZEZ1bmMgPSBwbGF0Zm9ybUN0eC5zZXROYXZpZ2F0aW9uQmFyVGl0bGU7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocGxhdGZvcm1DdHgsIFwic2V0TmF2aWdhdGlvbkJhclRpdGxlXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIHQgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICAgICAgICB2YXIgcm91dGUgPSB0LnJvdXRlIHx8IHQuaXM7XG4gICAgICAgICAgICBlID0gdXRpbE9iamVjdC5pc09iamVjdChlKSA/IGUgOiB7fTtcbiAgICAgICAgICAgIGdsb2JhbFRpdGxlTWFwW3JvdXRlXSA9IGUudGl0bGU7XG4gICAgICAgICAgICBjdHguZ2xvYmFsVGl0bGUgPSBnbG9iYWxUaXRsZU1hcDtcbiAgICAgICAgICAgIG9sZEZ1bmMuY2FsbCh0aGF0LCBlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICB1bG9nKCkudyhlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIGluamVjdE1pZHdheShQYWdlLCAnUGFnZScsIGluamVjdFBhZ2UpO1xuICAgICAgaW5qZWN0TWlkd2F5KENvbXBvbmVudCwgJ0NvbXBvbmVudCcsIGluamVjdENvbXBvbmVudCk7XG4gICAgICBob29rU2V0TmF2aWdhdGlvbkJhclRpdGxlKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9pbmplY3RfcGFnZV91bS5qc1xuLy8gbW9kdWxlIGlkID0gMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxGdW5jLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5leHBvcnRzLnJlc2V0Rm4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXSA/IGFyZ3VtZW50c1swXSA6IHt9LFxuICAgIHQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSA/IGFyZ3VtZW50c1sxXSA6ICcnLFxuICAgIG4gPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSA/IGFyZ3VtZW50c1syXSA6IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBpID0gZVt0XTtcbiAgZVt0XSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcnMgPSBpICYmIGkuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgLy8gYXBw5pys6Lqr55qEZnVuY3Rpb25cbiAgICBpZiAocnMpIHtcbiAgICAgIHJldHVybiBuLmNhbGwodGhpcywgcnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0YXJvMXjjgIF0YXJvMngg5b+F6aG75Yqg5Liq6aKd5aSW55qE6K+t5Y+lbi5hcHBseeaJjeiDveaJp+ihjO+8jOavlOWmgnRyeWNhdGNo77yM5Y+Y6YeP5aOw5piO562J77yM5q2k5aSE5Yqg5LqGcmV0dXJuXG4gICAgICByZXR1cm4gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbn07XG5cbmV4cG9ydHMucmV3cml0ZUZuID0gZnVuY3Rpb24ob2JqLCBuYW1lLCBuZXdGbikge1xuICB2YXIgb2xkRm4gPSBvYmpbbmFtZV07XG4gIG9ialtuYW1lXSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgbmV3Rm4uY2FsbCh0aGlzLCBlKTtcbiAgICBvbGRGbiAmJiBvbGRGbi5jYWxsKHRoaXMsIGUpO1xuICB9O1xufTtcblxuZXhwb3J0cy5vbkFwbHVzUmVhZHkgPSBmdW5jdGlvbiAoYXBsdXNfcXVldWUsIFNVQlNDUklCRSwgY2FsbGJhY2spIHtcbiAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBTVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xufTtcblxudmFyIHV0aWxIYXNoID0gcmVxdWlyZShcIkB1dGlscy91dGlsSGFzaFwiKTtcbnZhciBtaW5pID0gcmVxdWlyZShcIkB1dGlscy9taW5pXCIpO1xudmFyIHVsb2cgPSByZXF1aXJlKFwiQHV0aWxzL3Vsb2dcIik7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgZWFjaE1hcCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoTWFwJyk7XG52YXIgdXRpbE9iamVjdCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsT2JqZWN0Jyk7XG52YXIgYXNzaWduID0gcmVxdWlyZSgnQHV0aWxzL2Fzc2lnbicpO1xuZXhwb3J0cy5jbGlja19wcm94eSA9ICBmdW5jdGlvbihvcHRpb25zLCBtZXRob2QpIHsgICAgXG4gIHZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIG9yaUZ1bmMgPSBvcHRpb25zW21ldGhvZF07XG4gIG9wdGlvbnNbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXN1bHQgPSBvcmlGdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChldmVudCAmJiB1dGlsT2JqZWN0LmlzT2JqZWN0KGV2ZW50KSAmJiBhcGx1cyAmJiBhcGx1cy5fcmVjb3JkKSB7XG4gICAgICB2YXIgY3VycmVudHBhZ2UgPSBtaW5pLmdldEN1cnJlbnRQYWdlKCk7XG4gICAgICB2YXIgY3VzcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCkge1xuICAgICAgICBpZihldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQpIHtcbiAgICAgICAgICBlYWNoTWFwKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldCwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKCF1dGlsT2JqZWN0LmlzT2JqZWN0KHZhbHVlKSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICBjdXNwW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5pZCkge1xuICAgICAgICAgIGN1c3BbXCJlbGVtZW50X2lkXCJdID0gZXZlbnQuY3VycmVudFRhcmdldC5pZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgcm91dGUgPSBjdXJyZW50cGFnZS5yb3V0ZSB8fCBjdXJyZW50cGFnZS5pcyB8fCAndW5rbm93bl9wYWdlJztcbiAgICAgIGlmIChyb3V0ZSA9PT0gJ3Vua25vd25fcGFnZScpIHtcbiAgICAgICAgdWxvZygpLncoXCJnZXQgcGFnZXBhdGggZmFpbGVkIGluIGNsaWNrX3Byb3h5XCIsIGN1cnJlbnRwYWdlKTtcbiAgICAgIH1cbiAgICAgIGN1c3AgPSBhc3NpZ24oY3VzcCwgeyBpc19hdXRvOiAxIH0pO1xuICAgICAgdmFyIGV2ZW50Y29kZSA9IHV0aWxIYXNoLmhhc2gocm91dGUsIHV0aWwuZ2V0QXBwS2V5KCkpICsgdXRpbEhhc2guaGFzaChtZXRob2QsIHV0aWwuZ2V0QXBwS2V5KCkpO1xuICAgICAgYXBsdXMuX3JlY29yZChldmVudGNvZGUsIFwiQ0xLXCIsIGN1c3ApO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxGdW5jdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8g5qC55o2u5a+G6ZKlc+WvueWtl+espuS4snN0cui/m+ihjOi9rOS5iVxuZXhwb3J0cy5oYXNoID0gZnVuY3Rpb24oc3RyLCBzKSB7XG4gIHZhciBkZWZfdiA9IDEzMTU0MjM5MTE7XG4gIHZhciBoYXNoID0gcyB8fCBkZWZfdiwgaSwgY2g7XG4gIGZvciAoaSA9IHN0ci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNoID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaGFzaCBePSAoKGhhc2ggPDwgNSkgKyBjaCArIChoYXNoID4+IDIpKTtcbiAgfVxuICB2YXIgcnMgPSAoaGFzaCAmIDB4N0ZGRkZGRkYpLnRvU3RyaW5nKDE2KTtcbiAgcmV0dXJuIHJzO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxIYXNoLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3V0aWwvZm9ybWF0LmpzXG4gKiDlt6XlhbfnsbtcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vLyB2YXIgdHJ5VG9EZWNvZGUgPSByZXF1aXJlKCcuL3RyeVRvRGVjb2RlJyk7XG5cbmV4cG9ydHMuYXJyMm9iaiA9IGZ1bmN0aW9uIChhcnIpIHtcbiAgdmFyIHJldCA9IHt9O1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBpO1xuICB2YXIgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICBrID0gYXJyW2ldWzBdO1xuICAgIHYgPSBhcnJbaV1bMV07XG4gICAgcmV0W2tdID0gdjtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBwYXJhbSB0byBvYmplY3RcbiAqIOWwhuS4gOS4queugOWNleeahOW9ouWmgiBhPTEmYj0yJmM9MyDov5nmoLfnmoTlj4LmlbDovazljJbkuLrnroDljZXnmoQgb2JqZWN0IOagvOW8j++8jOWmgu+8mlxuICoge1xuICogICBhOiBcIjFcIixcbiAqICAgYjogXCIyXCIsXG4gKiAgIGM6IFwiM1wiXG4gKiB9XG4gKiBAcGFyYW0gcGFyYW1zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydHMucGFyYW0yb2JqID0gZnVuY3Rpb24gKHBhcmFtcykge1xuICBpZiAodHlwZW9mIHBhcmFtcyA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG4gIHZhciBvYmogPSB7fTtcbiAgaWYgKCFwYXJhbXMgfHwgdHlwZW9mIHBhcmFtcyAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gb2JqO1xuICB9XG4gIHZhciBhID0gcGFyYW1zLnNwbGl0KCcmJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYS5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gYVtpXTtcbiAgICB2YXIgaW5kZXggPSBpdGVtLmluZGV4T2YoJz0nKTtcbiAgICB2YXIgZnJhZ21lbnQgPSBpdGVtLnNwbGl0KCc9Jyk7XG4gICAgdmFyIGxlbiA9IGl0ZW0ubGVuZ3RoO1xuICAgIGlmIChmcmFnbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSBmcmFnbWVudFsxXSB8fCAnJzsgIFxuICAgIH0gZWxzZSBpZiAoaW5kZXggPiAwKSB7XG4gICAgICB2YXIga2V5ID0gaXRlbS5zbGljZSgwLCBpbmRleCk7XG4gICAgICB2YXIgdmFsdWUgPSBpdGVtLnNsaWNlKGluZGV4ICsgMSwgbGVuKSB8fCAnJztcbiAgICAgIG9ialtrZXldID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9ialtmcmFnbWVudFswXV0gPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajtcbn07XG5cbi8vIGNvbnNvbGUubG9nKCdUT0RPIGRlbGV0ZSBzX3BsYWluX29iaicpO1xudmFyIHNfcGxhaW5fb2JqID0gJzo6LXBsYWluLTo6JztcbmV4cG9ydHMuc19wbGFpbl9vYmogPSBzX3BsYWluX29iajtcblxuLyoqXG4gKiBhcnJheSB0byBwYXJhbVxuICog5bCG5LiA5Liq566A5Y2V55qE5pWw57uE6L2s5YyW5Li6IHVybCDlj4LmlbDnmoTlvaLlvI/vvIxcbiAqIOWFtuS4reaVsOe7hOS4ulxuICogICAgICBbW2sxLCB2MV0sIFtrMiwgdjJdLCBbazMsIHYzXSwgLi4uXVxuICog55qE5b2i5byP44CCXG4gKiDkuI4gb2JqMnBhcmFtIOebuOavlO+8jOi/meS4quaWueazleeahOWlveWkhOaYr+WPr+S7peS/neivgeacgOWQjuWPguaVsOeahOmhuuW6j1xuICogQHBhcmFtIGFyciB7QXJyYXl9XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGFycjJwYXJhbShhcnIsIHNraXBFbmNvZGUpIHtcbiAgdmFyIGEgPSBbXSxcbiAgICBrLFxuICAgIHYsXG4gICAgaSxcbiAgICBsZW4gPSBhcnIubGVuZ3RoO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIGsgPSBhcnJbaV1bMF07XG4gICAgdiA9IGFycltpXVsxXTtcbiAgICB2YXIgaXNJblBsYW5PYmogPSBrLmluZGV4T2Yoc19wbGFpbl9vYmopID09PSAwO1xuICAgIHZhciBfdmFsdWUgPSBpc0luUGxhbk9iaiB8fCBza2lwRW5jb2RlID8gdiA6IGVuY29kZVVSSUNvbXBvbmVudCh2KTtcbiAgICBhLnB1c2goaXNJblBsYW5PYmogPyBfdmFsdWUgOiAoayArICc9JyArIF92YWx1ZSkpO1xuICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5leHBvcnRzLmFycjJwYXJhbSA9IGFycjJwYXJhbTtcblxuLyoqXG4gKiBvYmplY3QgdG8gcGFyYW1cbiAqIOWwhuS4gOS4queugOWNleWvueixoei9rOWMluS4uiB1cmwg5Y+C5pWw55qE5b2i5byPXG4gKiDlj4Lop4EgYXJyMnBhcmFtKCkg5pa55rOVXG4gKiBAcGFyYW0gb2JqIHtPYmplY3R9XG4gKiBAcGFyYW0gY29tbVRyYW5zbGF0ZSB7Qm9vbGVhbn0g5pmu6YCa6L2s5o2i5LiN5YGaaXNTdGFydFdpdGjmoKHpqoxcbiAqXG4gKi9cbmV4cG9ydHMub2JqMnBhcmFtID0gZnVuY3Rpb24gKG9iaiwgY29tbVRyYW5zbGF0ZSkge1xuICB2YXIgYSA9IFtdO1xuICB2YXIgaztcbiAgdmFyIHY7XG4gIHZhciBfdjtcbiAgZm9yIChrIGluIG9iailcbiAgLy8gVE9ETzog5a+55LqOZXhhcmdzIGtleSwgdmFsdWUg5Lmf5pivb2Jq57G75Z6L77yM6ZyA6KaB6YCS5b2S6Kej5p6QIEDpkrDmmK1cbiAgICBpZiAoayAmJiBvYmouaGFzT3duUHJvcGVydHkoaykpIHtcbiAgICAgIGlmICh0eXBlb2Ygb2JqW2tdID09PSAnb2JqZWN0Jykge1xuICAgICAgICB2ID0gJycgKyB0aGlzLm9iajJwYXJhbShvYmpba10pO1xuICAgICAgICBfdiA9IHY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gJycgKyBvYmpba107XG4gICAgICAgIF92ID0gayArICc9JyArIHY7XG4gICAgICB9XG4gICAgICBpZiAoIWNvbW1UcmFuc2xhdGUpIHtcbiAgICAgICAgYS5wdXNoKGsuaW5kZXhPZihzX3BsYWluX29iaikgPT09IDAgPyB2IDogX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYS5wdXNoKF92KTtcbiAgICAgIH1cbiAgICB9XG4gIHJldHVybiBhLmpvaW4oJyYnKTtcbn07XG5cbmV4cG9ydHMuZW5jb2RlR29rZXlWYWx1ZSA9IGZ1bmN0aW9uIChnb2tleSkge1xuICAvLyB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgLy8gLy8g5a+5Z29rZXnlhoXnmoR2YWx1Zee7n+S4gOWKoOS4gOWxgue8lueggVxuICAvLyBpZiAodHlwZW9mIGdva2V5ID09PSAnb2JqZWN0JyAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgLy8gICBmb3IgKHZhciBrIGluIGdva2V5KSB7XG4gIC8vICAgICBpZiAodHlwZW9mIGdva2V5W2tdID09PSAnc3RyaW5nJykge1xuICAvLyAgICAgICB0cnkge1xuICAvLyAgICAgICAgIGdva2V5W2tdID0gZW5jb2RlVVJJQ29tcG9uZW50KGRlY29kZVVSSUNvbXBvbmVudChnb2tleVtrXSkpO1xuICAvLyAgICAgICB9IGNhdGNoIChlKSB7fVxuICAvLyAgICAgfVxuICAvLyAgIH1cbiAgLy8gfVxuICByZXR1cm4gZ29rZXk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvZm9ybWF0LmpzXG4vLyBtb2R1bGUgaWQgPSA0MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciBQdWJTdWIgPSByZXF1aXJlKCdAY29yZS9QdWJTdWInKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICAvLyDkv53or4Hlj6rkvJrmnInkuIDkuKpwdWJzdWLov5DooYxcbiAgICAgIGlmIChhcGx1cy5hcGx1c19wdWJzdWIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gYXBsdXMuYXBsdXNfcHVic3Vi5piv5LiA5Liq55uR5ZCs6ICF77yM5Zyo5o+S5Lu25YyW5YaF6YOo5Lya55So5Yiw5LuW77yM5pyJ5pWw5o2u5Y+Y5YyW5bCG5Lya5Y+R5bCE55u45bqU55qEZGF0YWNoYW5nZeS6i+S7tlxuICAgICAgYXBsdXMuYXBsdXNfcHVic3ViID0gUHViU3ViLmNyZWF0ZSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXNzYWdlci9wdWJzdWJfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvY29yZS9QdWJTdWIuanNcbiAqIOa2iOaBr+iuoumYheaooeWei1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuXG52YXIgZ2V0QXJncyA9IGZ1bmN0aW9uKGFyZ3MpIHtcbiAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICB2YXIgX2FyZ3MgPSBuZXcgQXJyYXkobGVuIC0gMSk7XG4gIGZvciAodmFyIGogPSAxOyBqIDwgbGVuOyBqKyspIHtcbiAgICBfYXJnc1tqIC0gMV0gPSBhcmdzW2pdO1xuICB9XG4gIHJldHVybiBfYXJncztcbn07XG5cbnZhciBQdWJTdWIgPSBCYXNlLmV4dGVuZCh7XG4gIC8qKlxuICAgKiDlr7lmbui/m+ihjOaWreiogO+8jOS4jeaYr+KAmGZ1bmN0aW9u4oCZ57G75Z6L5oql6ZSZ77yM5ZCm5YiZ6L+U5ZueZm5cbiAgICovXG4gIGNhbGxhYmxlOiBmdW5jdGlvbiAoZm4pIHtcbiAgICBpZiAoIWlzRnVuY3Rpb24oZm4pKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgIHJldHVybiBmbjtcbiAgfSxcblxuICBjcmVhdGU6IGZ1bmN0aW9uIChwcm9wcykge1xuICAgIHZhciBpbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG4gICAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgaW5zdGFuY2VbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5oYW5kbGVycyA9IFtdO1xuICAgIGluc3RhbmNlLnB1YnMgPSB7fTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0sXG5cbiAgc2V0SGFuZGxlcnM6IGZ1bmN0aW9uKGhhbmRsZXJzKSB7XG4gICAgdGhpcy5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICB9LFxuXG4gIC8qKlxuICAgKiDorqLpmIXlj6Xmn4TkuLrigJxlVHlwZeKAneeahOa2iOaBr++8jOW9k+aciea2iOaBr+i/h+adpeaJp+ihjOWbnuiwg+WHveaVsO+8muKAnGjigJ1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOiuoumYheeahOa2iOaBr+WPpeafhFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoIOiuoumYheeahOa2iOaBr+Wbnuiwg+WHveaVsFxuICAgKiBAcmV0dXJuIGNvbnRleHRcbiAgICovXG4gIHN1YnNjcmliZTogZnVuY3Rpb24oZVR5cGUsIGgpe1xuICAgIC8vIOWvueWbnuiwg+WHveaVsOi/m+ihjOaWreiogFxuICAgIHRoaXMuY2FsbGFibGUoaCk7XG5cbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHZhciBwdWJzID0gX3NlbGYucHVicyB8fCB7fTtcblxuICAgIHZhciBhcnIgPSBwdWJzW2VUeXBlXSB8fCBbXTtcbiAgICBpZiAoYXJyKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgX2FyZ3MgPSBhcnJbaV0oKTtcbiAgICAgICAgaC5hcHBseShfc2VsZiwgX2FyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgaGFuZGxlcnMgPSBfc2VsZi5oYW5kbGVycyB8fCBbXTtcbiAgICBpZighKGVUeXBlIGluIGhhbmRsZXJzKSkge1xuICAgICAgaGFuZGxlcnNbZVR5cGVdID0gW107XG4gICAgfVxuICAgIGhhbmRsZXJzW2VUeXBlXS5wdXNoKGgpO1xuICAgIF9zZWxmLnNldEhhbmRsZXJzKGhhbmRsZXJzKTtcbiAgICByZXR1cm4gX3NlbGY7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOWPlua2iOiuoumYhe+8jOWwhuS8muWPlua2iOKAnGVUeXBl4oCd5Y+l5p+E5a+55bqU55qE4oCcaOKAneWbnuiwg+WHveaVsOS4i+eahOaJgOacieiuoumYhVxuICAgKiBAcGFyYW0ge1N0cmluZ30gZVR5cGUg6K6i6ZiF55qE5raI5oGv5Y+l5p+EXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGgg6K6i6ZiF55qE5raI5oGv5Zue6LCD5Ye95pWwXG4gICAqIEByZXR1cm4gY29udGV4dFxuICAgKi9cbiAgdW5zdWJzY3JpYmU6IGZ1bmN0aW9uKGVUeXBlLCBoKSB7XG4gICAgLy8g5a+55Zue6LCD5Ye95pWw6L+b6KGM5pat6KiAXG4gICAgdGhpcy5jYWxsYWJsZShoKTtcblxuICAgIHRyeSB7XG4gICAgICB2YXIgcyA9IHRoaXMuaGFuZGxlcnNbZVR5cGVdO1xuICAgICAgaWYgKCFzKSByZXR1cm4gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBzID09PSAnb2JqZWN0JyAmJiBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgaF9zdHIgPSBoLnRvU3RyaW5nKCk7XG4gICAgICAgICAgdmFyIHNfc3RyID0gc1tpXS50b1N0cmluZygpO1xuICAgICAgICAgIGlmIChoX3N0ciA9PT0gc19zdHIpIHtcbiAgICAgICAgICAgIHMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhbmRsZXJzW2VUeXBlXSA9IHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc1tlVHlwZV07XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICAvKipcbiAgICog5raI5oGv5YiG5Y+R77yM5bCG5Lya5YiG5Y+R5Yiw5omA5pyJ6K6i6ZiFZVR5cGXlj6Xmn4TnmoTorqLpmIXogIVcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVUeXBlIOWIhuWPkea2iOaBr+WPpeafhFxuICAgKi9cbiAgcHVibGlzaDogZnVuY3Rpb24gKGVUeXBlKSB7XG5cbiAgICB2YXIgYXJncyA9IGdldEFyZ3MoYXJndW1lbnRzKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzIHx8IFtdO1xuXG4gICAgdmFyIHNpemUgPSBoYW5kbGVyc1tlVHlwZV0gPyBoYW5kbGVyc1tlVHlwZV0ubGVuZ3RoIDogMDtcbiAgICBpZiAoc2l6ZSA+IDApIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgIHZhciBmbiA9IGhhbmRsZXJzW2VUeXBlXVtpXTtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfSxcblxuICBjYWNoZVB1YnM6IGZ1bmN0aW9uIChlVHlwZSkge1xuICAgIHZhciBwdWJzID0gdGhpcy5wdWJzIHx8IHt9O1xuICAgIHZhciBhcmdzID0gZ2V0QXJncyhhcmd1bWVudHMpO1xuICAgIGlmICghcHVic1tlVHlwZV0pIHtcbiAgICAgIHB1YnNbZVR5cGVdID0gW107XG4gICAgfVxuICAgIHB1YnNbZVR5cGVdLnB1c2goZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGFyZ3M7XG4gICAgfSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvUHViU3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS9jb3JlL0Jhc2UuanNcbiAqIOWfuuexu++8jOaPkOS+m+exu+aJgOmcgOimgeeahOWfuuehgOWxnuaAp1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcblxuLy8g5Z+657G7XG5mdW5jdGlvbiBCYXNlKCkge31cblxuLy8g5bCGZXh0ZW5k5ZKMY3JlYXRl572u5LqOcHJvdG90eXBl5a+56LGh5Lit77yM5Lul5L6/5a2Q57G757un5om/XG5CYXNlLnByb3RvdHlwZS5leHRlbmQgPSBmdW5jdGlvbigpIHt9O1xuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKSB7fTtcblxuLy8g5Li65LqG6IO95Zyo5Z+657G75LiK55u05o6l5LulLmV4dGVuZOeahOaWueW8j+i/m+ihjOiwg+eUqFxuQmFzZS5leHRlbmQgPSBmdW5jdGlvbihwcm9wcykge1xuICByZXR1cm4gdGhpcy5wcm90b3R5cGUuZXh0ZW5kLmNhbGwodGhpcywgcHJvcHMpO1xufTtcblxuQmFzZS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24ocHJvcHMpIHtcbiAgLyoqXG4gICAqIGNyZWF0ZeWunumZheS4iuaYr+WvuW5ld+eahOWwgeijhe+8m1xuICAgKiBjcmVhdGXov5Tlm57nmoTlrp7kvovlrp7pmYXkuIrlsLHmmK9uZXfmnoTpgKDlh7rnmoTlrp7kvovvvJtcbiAgICogdGhpc+WNs+aMh+WQkeiwg+eUqOW9k+WJjWNyZWF0ZeeahOaehOmAoOWHveaVsO+8m1xuICAgKi9cbiAgdmFyIGluc3RhbmNlID0gbmV3IHRoaXMoKTtcbiAgLy8g57uR5a6a6K+l5a6e5L6L55qE5bGe5oCnXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpbnN0YW5jZVtuYW1lXSA9IHByb3BzW25hbWVdO1xuICB9XG4gIHJldHVybiBpbnN0YW5jZTtcbn07XG5cbkJhc2UucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8vIOa0vueUn+WHuuadpeeahOaWsOeahOWtkOexu1xuICB2YXIgU3ViQmFzZSA9IGZ1bmN0aW9uKCkge307XG4gIHRyeSB7XG4gICAgLyoqXG4gICAgICog57un5om/54i257G755qE5bGe5oCn5ZKM5pa55rOV77yMXG4gICAgICog5b2T54S25YmN5o+Q5piv54i257G755qE5bGe5oCn6YO95pS+5ZyocHJvdG90eXBl5LitXG4gICAgICog6ICM6Z2e5LiK6Z2iY3JlYXRl5pa55rOV55qE4oCc5a6e5L6L5bGe5oCn4oCd5LitXG4gICAgICovXG4gICAgaWYgKCFpc0Z1bmN0aW9uKE9iamVjdC5jcmVhdGUpKSB7XG4gICAgICBPYmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgZnVuY3Rpb24gRigpIHt9XG4gICAgICAgIEYucHJvdG90eXBlID0gbztcbiAgICAgICAgcmV0dXJuIG5ldyBGKCk7XG4gICAgICB9O1xuICAgIH1cbiAgICBTdWJCYXNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gICAgLy8g5bm25LiU5re75Yqg6Ieq5bex55qE5pa55rOV5ZKM5bGe5oCnXG4gICAgZm9yICh2YXIgbmFtZSBpbiBwcm9wcykge1xuICAgICAgU3ViQmFzZS5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gICAgU3ViQmFzZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWJCYXNlO1xuXG4gICAgLy8g6ZyA6KaB5LulLmV4dGVuZOeahOaWueW8j+WSjC5jcmVhdGXnmoTmlrnlvI/osIPnlKjvvJpcbiAgICBTdWJCYXNlLmV4dGVuZCA9IFN1YkJhc2UucHJvdG90eXBlLmV4dGVuZDtcbiAgICBTdWJCYXNlLmNyZWF0ZSA9IFN1YkJhc2UucHJvdG90eXBlLmNyZWF0ZTtcbiAgfSBjYXRjaChlcnIpIHtcbiAgICBjb25zb2xlICYmIGNvbnNvbGUubG9nKGVycik7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIFN1YkJhc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmFzZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvQmFzZS5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfbWV0YS9tYWluX21pbmknKSh0aGlzLm9wdGlvbnMuY29udGV4dC5hcGx1c19jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX21ldGFfaW5qZWN0X21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfYXBpL21haW4uanNcbiAqIG1ldGHphY3nva7mj5Lku7bvvIzooqthcGnmj5Lku7bkvp3otZZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1ldGFJbmZvID0gcmVxdWlyZSgnLi9tZXRhSW5mb01pbmknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBsdXNfY29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgdmFyIF8kID0gKGFwbHVzLl8kID0gYXBsdXMuXyQgfHwge30pOyAvLyDlhoXpg6jkvb/nlKjnmoTlj5jph49cbiAgXyQuaXNfdGVybWluYWwgPSB0cnVlO1xuICBfJC5zZW5kX3B2X2NvdW50ID0gMDtcbiAgLy8gXyQuc3RhdHVzID0gU1RBVFVTO1xuICAvLyBfJC5zY3JpcHRfbmFtZSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuc2NyaXB0X25hbWU7XG4gIF8kLnNwbSA9IHtcbiAgICBkYXRhOiB7fVxuICB9O1xuICBfJC5tZXRhX2luZm8gPSBtZXRhSW5mby5xR2V0KCkgfHwge307XG4gIGFwbHVzLmdsb2JhbENvbmZpZyA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWc7XG5cbiAgZm9yICh2YXIgayBpbiBhcGx1c19jb25maWcubWV0YUluZm8pIHtcbiAgICBtZXRhSW5mby5zZXRNZXRhSW5mbyhrLCBhcGx1c19jb25maWcubWV0YUluZm9ba10pO1xuICB9XG4gIGFwbHVzLl8kID0gXyQ7XG5cbiAgYXBsdXMuaXNJbnRlcm5hdGlvbmFsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9tZXRhL21haW5fbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOiOt+WPlumhtemdouS4iueahCA8bWV0YT4g5Lit5LiOIGFwbHVzIOaJk+eCueebuOWFs+eahOWAvFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIHZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xudmFyIGZvcm1hdCA9IHJlcXVpcmUoJ0B1dGlscy9mb3JtYXQnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG5cbnZhciBpbmZvID0ge307XG5cbnZhciBPQkpFQ1QgPSAnb2JqZWN0JztcbnZhciBTVFJJTkcgPSAnc3RyaW5nJztcblxuLyoqXG4gKiBAcmV0dXJucyB7e319XG4gKi9cbnZhciBsYXN0X2luZm87XG5mdW5jdGlvbiBnZXRJbmZvKCkge1xuICBsYXN0X2luZm8gPSBpbmZvIHx8IHt9O1xuICByZXR1cm4gaW5mbztcbn07XG5leHBvcnRzLmdldEluZm8gPSBnZXRJbmZvO1xuXG4vLyDlpoLmnpzmnInnvJPlrZjvvIzkvb/nlKjnvJPlrZjnmoTlgLzvvIzmsqHmnInnvJPlrZjliJnku44gRE9NIOS4reivu+WPllxuZnVuY3Rpb24gcUdldCAoKSB7XG4gIHJldHVybiBsYXN0X2luZm8gfHwgZ2V0SW5mbygpO1xufTtcbmV4cG9ydHMucUdldCA9IHFHZXQ7XG5cbi8qKlxuICog5Yqo5oCB6YWN572ubWV0YVxuICog5a656ZSZ5qCh6aqM56e75qSN5YiwYXBsdXPlj6/op4bljJbln4vngrnpqozor4Hlt6XlhbflhoUgMjAxOC0wMS0xMCBA6LCL5aOrXG4gKiDor6bop4HvvJpodHRwczovL2xhcmsuYWxpcGF5LmNvbS9hcGx1c2pzL3Byb2plY3QvcGVyZm9ybWFuY2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga1xuICogQHBhcmFtIHtPYmplY3R9IHZcbiAqL1xuZnVuY3Rpb24gc2V0TWV0YUluZm8gKGssIHYpIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICBpZihrID09PSAnYXBsdXMtaW5qZWN0LXJlY29yZC1nb2tleScpe1xuICAgIGNhdGNoRXhjZXB0aW9uKCd0aGUgQVBJIGFwbHVzLWluamVjdC1yZWNvcmQtZ29rZXkgaXMgZGVwcmVjYXRlZCwgaWYgbmVlZGVkIHBsZWFzZSBjb25jYXQgQVBMVVMgU0RLIHN1cHBvcnRlcicpO1xuICAgIGFwbHVzLnJlY29yZCgnL2luamVjdC5yZWNvcmQuZ29rZXknLCdPVEhFUicsJycpO1xuICB9XG4gIGxhc3RfaW5mb1trXSA9IHY7XG4gIHJldHVybiB0cnVlO1xufTtcbmV4cG9ydHMuc2V0TWV0YUluZm8gPSBzZXRNZXRhSW5mbztcblxuXG52YXIgY2F0Y2hFeGNlcHRpb24gPSBmdW5jdGlvbiAobXNnKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKG1zZyk7XG4gIH0gY2F0Y2ggKGUpIHt9XG59O1xuZXhwb3J0cy5jYXRjaEV4Y2VwdGlvbiA9IGNhdGNoRXhjZXB0aW9uO1xuXG4vKipcbiAqIGdldCBtZXRhSW5mbyBieSBrZXlcbiAqIOWuuemUmeagoemqjOenu+akjeWIsGFwbHVz5Y+v6KeG5YyW5Z+L54K56aqM6K+B5bel5YW35YaFIDIwMTgtMDEtMTAgQOiwi+Wjq1xuICog6K+m6KeB77yaaHR0cHM6Ly9sYXJrLmFsaXBheS5jb20vYXBsdXNqcy9wcm9qZWN0L3BlcmZvcm1hbmNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbnZhciBnZXRNZXRhSW5mbyA9IGZ1bmN0aW9uKGspIHtcbiAgaWYgKCFsYXN0X2luZm8pIHtcbiAgICBsYXN0X2luZm8gPSB7fTtcbiAgfVxuICByZXR1cm4gbGFzdF9pbmZvW2tdIHx8ICcnO1xufTtcbmV4cG9ydHMuZ2V0TWV0YUluZm8gPSBnZXRNZXRhSW5mbztcblxuXG4vKipcbiAqIOivhuWIq+S4muWKoeWKqOaAgeaLk+WxleWPguaVsFxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgIGxvZ2tleTogbG9na2V5LFxuICogICAgZ21rZXk6IGdta2V5LFxuICogICAgZ29rZXk6IGdva2V5XG4gKiB9XG4gKi9cbnZhciBnZXRVc2VySW5qZWN0R29rZXkgPSBmdW5jdGlvbiAob3B0cykge1xuICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8oJ2FwbHVzLWluamVjdC1yZWNvcmQtZ29rZXknKTtcbiAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gdXNlckZuKG9wdHMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBvcHRzLmdva2V5O1xuICB9XG59O1xuZXhwb3J0cy5nZXRVc2VySW5qZWN0R29rZXkgPSBnZXRVc2VySW5qZWN0R29rZXk7XG5cbi8qKlxuICogVG8gYXBwZW5kIGBtZXRhYCB0YWcgaWYgdGhlcmUncyBub25lIGFwbHVzIG1ldGEuXG4gKiBPdGhlcndpc2UsIG1lcmdlIGNvbnRlbnQgYXR0cmlidXRlczpcbiAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICogIC0gYE9iamVjdC5hc3NpZ25gIGNhbGxlZCBvbiBPYmplY3QgdmFsdWVzLlxuICogIEBwYXJhbSBrXG4gKiAgQHBhcmFtIHZcbiAqL1xudmFyIGFwcGVuZE1ldGFJbmZvID0gZnVuY3Rpb24gKGssIHYpIHtcbiAgLy8gY29uc29sZS5sb2coaywgdik7XG4gIGlmIChrICYmIHYpIHtcbiAgICAvLyBhcGx1cy11dHBhcmFtIHx8IGFwbHVzLW5leHRwYWdlLXV0cGFyYW0gfHwgYXBsdXMtZXhkYXRhXG4gICAgdmFyIHByb2Nlc3NPYmplY3QgPSBmdW5jdGlvbiAob2xkX3ZhbHVlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgbmV3X3ZhbHVlID0gdHlwZW9mIHYgPT09IFNUUklORyA/IEpTT04ucGFyc2UodikgOiB2O1xuICAgICAgICB0b1NldE1ldGFJbmZvKGssIE9iamVjdC5hc3NpZ24oe30sIG9sZF92YWx1ZSwgbmV3X3ZhbHVlKSk7XG4gICAgICB9IGNhdGNoIChlKSB7fVxuICAgIH07XG4gICAgLy8gYXBsdXMtYXV0by1leHAgfHwgYXBsdXMtYXV0by1jbGtcbiAgICB2YXIgcHJvY2Vzc0FycmF5ID0gZnVuY3Rpb24gKG9sZF92YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIG5ld192YWx1ZSA9IHR5cGVvZiB2ID09PSBTVFJJTkcgPyBKU09OLnBhcnNlKHYpIDogdjtcbiAgICAgICAgdG9TZXRNZXRhSW5mbyhrLCBvbGRfdmFsdWUuY29uY2F0KG5ld192YWx1ZSkpO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICB9O1xuXG4gICAgdmFyIHByb2Nlc3NPYmogPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgICAgcHJvY2Vzc0FycmF5KHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb2Nlc3NPYmplY3QodmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHRvU2V0TWV0YUluZm8gPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgX3NldE1ldGFJbmZvKGtleSwgdmFsdWUsIHtcbiAgICAgICAgZnJvbTogJ2FwcGVuZE1ldGFJbmZvJ1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBmbGFnO1xuICAgIHZhciBfb2xkVmFsdWUgPSBnZXRNZXRhSW5mbyhrKTtcbiAgICBpZiAoayA9PT0gJ2FwbHVzLWV4aW5mbycpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgT2JqZWN0LmFzc2lnbih7fSwgX29sZFZhbHVlLCBmb3JtYXQucGFyYW0yb2JqKHYpKSk7XG4gICAgICBmbGFnID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGsgPT09ICdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB7XG4gICAgICB2YXIgcGFnZVByb3BlcnRpZXMgPSB2O1xuICAgICAgaWYgKF9vbGRWYWx1ZSkge1xuICAgICAgICBmb3IgKHZhciBfayBpbiBfb2xkVmFsdWUpIHtcbiAgICAgICAgICBpZiAodltfa10pIHtcbiAgICAgICAgICAgIHBhZ2VQcm9wZXJ0aWVzW19rXSA9IE9iamVjdC5hc3NpZ24oe30sIF9vbGRWYWx1ZVtfa10sIHZbX2tdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFnZVByb3BlcnRpZXNbX2tdID0gX29sZFZhbHVlW19rXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRvU2V0TWV0YUluZm8oaywgcGFnZVByb3BlcnRpZXMpO1xuICAgICAgZmxhZyA9IHRydWU7XG4gICAgfVxuICAgIGlmIChfb2xkVmFsdWUpIHtcbiAgICAgIGlmICh0eXBlb2YgX29sZFZhbHVlID09PSBPQkpFQ1QpIHtcbiAgICAgICAgcHJvY2Vzc09iaihfb2xkVmFsdWUpO1xuICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIHRtcF9wYXJzZSA9IEpTT04ucGFyc2UoX29sZFZhbHVlKTtcbiAgICAgICAgICBpZiAodHlwZW9mIHRtcF9wYXJzZSA9PT0gT0JKRUNUKSB7XG4gICAgICAgICAgICBwcm9jZXNzT2JqKHRtcF9wYXJzZSk7XG4gICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWZsYWcpIHtcbiAgICAgIHRvU2V0TWV0YUluZm8oaywgdik7XG4gICAgfVxuICB9XG59O1xuZXhwb3J0cy5hcHBlbmRNZXRhSW5mbyA9IGFwcGVuZE1ldGFJbmZvO1xuXG52YXIgX3NldE1ldGFJbmZvID0gZnVuY3Rpb24gKGFyZzEsIHZhbHVlKSB7XG4gIHZhciBrO1xuICB2YXIgdjtcbiAgdmFyIGRlZmF1bHRNb2RlID0gJ09WRVJXUklURSc7XG4gIHZhciBtb2RlID0gZGVmYXVsdE1vZGU7XG4gIGlmICh0eXBlb2YgYXJnMSA9PT0gJ29iamVjdCcpIHtcbiAgICBrID0gYXJnMS5tZXRhTmFtZTtcbiAgICB2ID0gYXJnMS5tZXRhVmFsdWU7XG4gICAgbW9kZSA9IGFyZzEubW9kZSB8fCBkZWZhdWx0TW9kZTtcbiAgfSBlbHNlIHtcbiAgICBrID0gYXJnMTtcbiAgICB2ID0gdmFsdWU7XG4gIH1cbiAgaWYgKG1vZGUgPT09IGRlZmF1bHRNb2RlKSB7XG4gICAgaWYgKHNldE1ldGFJbmZvKGssIHYpKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgXyQubWV0YV9pbmZvID0gcUdldCgpO1xuICAgICAgdmFyIHJzID0gdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG5cbiAgICAgIHZhciBtc2dzID0gWydzZXRNZXRhSW5mbycsIGssIHYsIHt9XTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgICAgcmV0dXJuIHJzO1xuICAgIH0gXG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGFwcGVuZE1ldGFJbmZvKGssIHYpO1xuICB9XG59O1xuZXhwb3J0cy5fc2V0TWV0YUluZm8gPSBfc2V0TWV0YUluZm87XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbWV0YS9tZXRhSW5mb01pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxudmFyIEZOID0gJ2Z1bmN0aW9uJztcblxudmFyIGdldFB1YnN1YiA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHB1YnN1YiA9IGFwbHVzLmFwbHVzX3B1YnN1YiB8fCB7fTtcbiAgdmFyIGZsYWcgPSB0eXBlb2YgcHVic3ViLnB1Ymxpc2ggPT09IEZOO1xuICByZXR1cm4gZmxhZyA/IHB1YnN1YiA6ICcnO1xufTtcblxuLyoqXG4gKiDliIblj5Hmtojmga/lt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvUHViTXNnID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5wdWJsaXNoID09PSBGTikge1xuICAgIHB1YnN1Yi5wdWJsaXNoLmFwcGx5KHB1YnN1YiwgYXJncyk7XG4gIH1cbn07XG5cbi8qKlxuICogY2FjaGXlvZPliY3nmoTliIblj5Hlh73mlbDnmoTlt6Xlhbflh73mlbBcbiAqIEBwYXJhbXMge0FycmF5fSBhcmdzIFtrZXksIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXVxuICovXG5leHBvcnRzLmRvQ2FjaGVQdWJzID0gZnVuY3Rpb24oYXJncykge1xuICB2YXIgcHVic3ViID0gZ2V0UHVic3ViKCk7XG4gIGlmIChwdWJzdWIgJiYgdHlwZW9mIHB1YnN1Yi5jYWNoZVB1YnMgPT09IEZOKSB7XG4gICAgcHVic3ViLmNhY2hlUHVicy5hcHBseShwdWJzdWIsIGFyZ3MpO1xuICB9XG59O1xuXG4vKipcbiAqIOiuoumYhea2iOaBr+W3peWFt+WHveaVsFxuICogQHBhcmFtcyB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYihbIG1zZ1ZhbHVlMSwgbXNnVmFsdWUyLCBtc2dWYWx1ZTMsIG1zZ1ZhbHVlTiwgLi4uXSlcbiAqL1xuZXhwb3J0cy5kb1N1Yk1zZyA9IGZ1bmN0aW9uKGtleSwgY2IpIHtcbiAgdmFyIHB1YnN1YiA9IGdldFB1YnN1YigpO1xuICBpZiAocHVic3ViICYmIHR5cGVvZiBwdWJzdWIuc3Vic2NyaWJlID09PSBGTikge1xuICAgIHB1YnN1Yi5zdWJzY3JpYmUoa2V5LCBjYik7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsUHVic3ViLmpzXG4vLyBtb2R1bGUgaWQgPSA0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICog5rOo5YWlbG9nQ29uZmlnLOS+m+WQjue7reaPkuS7tuS9v+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlYWNoID0gcmVxdWlyZSgnLi4vbGliX3UvdXRpbHMvZWFjaCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBnZXRMb2dDb25maWc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsb2dDb25maWcgPSB7fTtcbiAgICAgIHZhciBwbHVnaW5zID0gdGhpcy5vcHRpb25zLmNvbmZpZy5wbHVnaW5zO1xuXG4gICAgICBmb3IgKHZhciBrIGluIHBsdWdpbnMpIHtcbiAgICAgICAgbG9nQ29uZmlnW2tdID0ge1xuICAgICAgICAgIHBsdWdpbnM6IHBsdWdpbnNba10sXG4gICAgICAgICAgY29udGV4dDoge31cbiAgICAgICAgfTtcbiAgICAgICAgZWFjaChwbHVnaW5zW2tdLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgIGxvZ0NvbmZpZ1trXS5jb250ZXh0W3YubmFtZV0gPSB2LmNvbmZpZyB8fCB7fTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbG9nQ29uZmlnO1xuICAgIH0sXG5cbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmxvZ0NvbmZpZyA9IHRoaXMuZ2V0TG9nQ29uZmlnKCk7XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcucGFnZUxvYWRUaW1lID0gdGhpcy5vcHRpb25zLmNvbnRleHQuUEFHRV9MT0FEX1RJTUU7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfbG9nX2luamVjdC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9ldGFnLmpzXG4gKlxuICog5L2c55So77ya5ZCM5q2lYXBsdXNfaW5pdOW3peS9nOa1geeahOS/oeaBr1xuICogZGVwczog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsRXRhZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRXRhZycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIEVNUFRZX0NOQSA9ICdFTVBUWV9DTkEnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIF9zeW5jRXRhZzogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgdmFyIGNoZWNrID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIGNuYSA9IG8gJiYgby5kYXRhID8gby5kYXRhLmNuYSA6ICcnO1xuICAgICAgICBpZiAoIWNuYSkge1xuICAgICAgICAgIGlmIChhcGx1cy5mZXRjaEV0YWdTdGF0dXMgPT09ICdZJykge1xuICAgICAgICAgICAgLy8g5Li65LqG6Kej5Yaz5bm25Y+R6Zeu6aKY77yM5LuOYXBsdXNfcXVldWXmlLnmiJDnm7TmjqXnlKhhcGx1cy5hcGx1c19wdWJzdWIgQOiwi+WjqyAyMDAyMS0wMS0xOVxuICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnZXRhZycsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9TeW5jRXRhZygpOyAgXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGNuYSk7XG4gICAgICAgICAgY2FsbGJhY2soY25hKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgdmFyIGFwbHVzX3Job3N0X3YgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19QVl9ET01BSU4pO1xuICAgICAgdmFyIHVybDtcblxuICAgICAgaWYgKGFwbHVzX3Job3N0X3YpIHtcbiAgICAgICAgdXJsID0gdXRpbEV0YWcuZ2V0VXJsKHtcbiAgICAgICAgICBlZ1VybDogKGFwbHVzX3Job3N0X3YuaW5kZXhPZignLy8nKSA9PT0gLTEgPyAnLy8nICsgYXBsdXNfcmhvc3RfdiA6IGFwbHVzX3Job3N0X3YpICsgJy9lZy5qcydcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmVnVXJsID0gdXJsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgZXRhZ1N0b3JhZ2VLZXkgPSBhcGx1cy5nbG9iYWxDb25maWcuRVRBR19TVE9SQUdFX0tFWTtcbiAgICAgIHZhciB0b1N5bmNFdGFnID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodXJsKSB7XG4gICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ1knO1xuICAgICAgICAgIG1pbmkucmVxdWVzdCh1cmwsIHtcbiAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG4gICAgICAgICAgICByZXF1ZXN0TWV0aG9kTmFtZTogJ3JlcXVlc3QnXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgYXBsdXMuZmV0Y2hFdGFnU3RhdHVzID0gJ04nO1xuICAgICAgICAgICAgdmFyIGV0YWcgPSAnJztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGEgfHwgJyc7XG4gICAgICAgICAgICAgIHZhciBhcnIgPSBkYXRhLnNwbGl0KCc7Jyk7XG4gICAgICAgICAgICAgIGlmIChhcnIubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIHZhciBldGFnS2V5VmFsdWUgPSBhcnJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGV0YWdzID0gZXRhZ0tleVZhbHVlLnNwbGl0KCc9Jyk7XG4gICAgICAgICAgICAgICAgZXRhZyA9IGV0YWdzWzFdIHx8ICcnO1xuICAgICAgICAgICAgICAgIGV0YWcgPSBldGFnLnJlcGxhY2UoL1xcXCIvZywgJycpO1xuICAgICAgICAgICAgICAgIHV0aWxHb2xkbG9nLnNldEdvbGRsb2dWYWwoZXRhZ1N0b3JhZ2VLZXksIGV0YWcpO1xuICAgICAgICAgICAgICAgIGN0eC5zZXRTdG9yYWdlKHtcbiAgICAgICAgICAgICAgICAgIGtleTogZXRhZ1N0b3JhZ2VLZXksXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNuYTogZXRhZ1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIOS4uuS6huino+WGs+W5tuWPkemXrumimO+8jOS7jmFwbHVzX3F1ZXVl5pS55oiQ55u05o6l55SoYXBsdXMuYXBsdXNfcHVic3ViXG4gICAgICAgICAgICAgICAgLy8g5bm2Y2FjaGXkvY/kuIrkuIDmrKHnmoTnu5PmnpwgQOiwi+WjqyAyMDAyMS0wMS0xOVxuICAgICAgICAgICAgICAgIGFwbHVzLmFwbHVzX3B1YnN1Yi5wdWJsaXNoKCdldGFnJywgZXRhZyk7XG4gICAgICAgICAgICAgICAgYXBsdXMuYXBsdXNfcHVic3ViLmNhY2hlUHVicygnZXRhZycsIGV0YWcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHVsb2coKS53KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFldGFnKSB7XG4gICAgICAgICAgICAgIGV0YWcgPSBFTVBUWV9DTkE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFjayhldGFnKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzMikge1xuICAgICAgICAgICAgdWxvZygpLncocmVzMik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgQ05BID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbChldGFnU3RvcmFnZUtleSk7XG4gICAgICBpZiAoQ05BKSB7XG4gICAgICAgIGNhbGxiYWNrKENOQSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZ2V0U3RvcmFnZSh7XG4gICAgICAgICAga2V5OiBldGFnU3RvcmFnZUtleSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjaGVjayhyZXMpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZmFpbDogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY2hlY2socmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBwduWPkemAgeWIsOWTqumHjOWOu1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGM77yM6L+U5Zue4oCccGF1c2XigJ3mmoLlgZzkuK3pl7Tku7bmiafooYzvvIzov5Tlm57kuIDkuKrmlbTmlbDigJxu4oCd5ZGK6K+J5Lit6Ze05Lu24oCcbuKAneavq+enkuWQjue7p+e7reaJp+ihjOS4remXtOS7tlxuICAgICAqIOKAnOaaguWBnOKAneacgOWkmjEwc++8jOiLpei2heaXtuS4remXtOS7tuS8muW8uuWItue7p+e7reaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24gKHN0YXRlLCBjYikge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIC8vIHZhciBzdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGV0YWdUaW1lb3V0ID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWV0YWctdGltZW91dCcpO1xuICAgICAgdmFyIGRlZmF1bHRUaW1lID0gMjAwO1xuICAgICAgdmFyIHRpbWUgPSBkZWZhdWx0VGltZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRpbWUgPSBwYXJzZUludChldGFnVGltZW91dCk7XG4gICAgICAgIGlmIChpc05hTih0aW1lKSkge1xuICAgICAgICAgIHRpbWUgPSBkZWZhdWx0VGltZTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zeW5jRXRhZyhmdW5jdGlvbiAoY25hKSB7XG4gICAgICAgIGlmIChfc2VsZi5vcHRpb25zLmNvbnRleHQuZXRhZykge1xuICAgICAgICAgIF9zZWxmLm9wdGlvbnMuY29udGV4dC5ldGFnLmNuYSA9IGNuYTsgIFxuICAgICAgICB9XG4gICAgICAgIGlmICh0aW1lID49IDIwMCkge1xuICAgICAgICAgIGNiKGNuYSk7ICBcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyDlkYror4ljb21wb3Nl5pqC5YGc5omn6KGM5Lit6Ze05Lu277yM55u05YiwY2Llm57liLDlkI7lho3nu6fnu61cbiAgICAgIGlmICh0aW1lIDwgMjAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aW1lO1xuICAgIH0sXG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL2V0YWdfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRvbeaTjeS9nOW3peWFt+exu++8jOi/meS4quWfuuehgOW3peWFt+exu+S8muiiq+WFtuS7luW3peWFt+exu+W8leeUqO+8jOaVheS4peemgeWcqOi/memHjOWGjeW8leeUqOWFtuS7luaooeWdl+S7peWFjeWHuueOsOmXrumimFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsRGF0YSA9IHJlcXVpcmUoJy4vdXRpbERhdGEnKTtcblxuLy8g5LuF6ZmQ5by55YaF77yb5bCP57Gz56aB55SoZWcuanPlupTlr7nnrZbnlaXvvJrkvb/nlKjliqjmgIHlkI7nvIDlkI1cbi8vIOWQjue8gOWQjeeUn+aIkOaWueazlTog5b2T5YmN5pe26Ze05oiz6L2sMTbov5vliLbvvIzlj5blkI445L2N77yMXG4vLyBmdW5jdGlvbiBldGFnVXJsU3VmZml4KGV0YWdVcmwpIHtcbi8vICAgdmFyIGR5bmFtaWNVcmwgPSBldGFnVXJsO1xuLy8gICB0cnkge1xuLy8gICAgIGlmKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuLy8gICAgICAgdHJ5IHtcbi8vICAgICAgICAgdmFyIHRpbWVTdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuLy8gICAgICAgICB2YXIgZHluYW1pY1N1ZmZpeCA9IHRpbWVTdGFtcC50b1N0cmluZygxNikuc2xpY2UoLTgpO1xuLy8gICAgICAgICB3aGlsZShkeW5hbWljU3VmZml4Lmxlbmd0aCA8IDgpIHtcbi8vICAgICAgICAgICBkeW5hbWljU3VmZml4ID0gZHluYW1pY1N1ZmZpeCArICdmJztcbi8vICAgICAgICAgfVxuLy8gICAgICAgICBkeW5hbWljVXJsID0gZXRhZ1VybC5yZXBsYWNlKC9lZy5qcy8sIGR5bmFtaWNTdWZmaXggKyAnLmpzJyk7XG4vLyAgICAgICB9IGNhdGNoKGUpIHtcbi8vICAgICAgIH1cbi8vICAgICAgIHJldHVybiBkeW5hbWljVXJsO1xuLy8gICAgIH1cbi8vICAgfSBjYXRjaChlKSB7XG5cbi8vICAgfVxuLy8gICByZXR1cm4gZHluYW1pY1VybDtcbi8vIH1cblxuZXhwb3J0cy5nZXRVcmwgPSBmdW5jdGlvbiAoZXRhZykge1xuICB2YXIgdXJsID0gdXRpbERhdGEuZ2V0VXJsKGV0YWcgJiYgZXRhZy5lZ1VybCk7ICBcbiAgLy8gdXJsID0gZXRhZ1VybFN1ZmZpeCh1cmwpO1xuICAvLyDlpoLmnpxlZ1VybOayoeacieW4puWNj+iuru+8jOi/memHjOihpeWFheWujOaVtFxuICAvLyBpZiAodXJsLmluZGV4T2YoJ2h0dHAnKSAhPT0gMCkge1xuICAvLyAgIHZhciBwcm90b2NhbCA9ICdodHRwczonO1xuICAvLyAgIGlmICgvKFxcZCtcXC4pezMsfVxcZCsvLnRlc3QodXJsKSkge1xuICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAvLyAgIH1cbiAgLy8gICB1cmwgPSBwcm90b2NhbCArIHVybDtcbiAgLy8gfVxuICByZXR1cm4gdXJsO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsRXRhZy5qc1xuLy8gbW9kdWxlIGlkID0gNTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGVuX3RvX3NlbmQuanNcbiAqXG4gKiAgIOS9nOeUqO+8miDkvZXml7bmiafooYxzZW5kcHbmj5Lku7ZcbiAqICAgZm46IGdldE1ldGFJbmZvIOe7p+aJv+iHs0Jhc2VcbiAqICAgZm46IHJ1biAo5o+S5Lu25qCH5YeG55qE5omn6KGM5YWl5Y+jKVxuICogICBhcGx1cy13YWl0aW5nPVwiMVwiOiDnrYnlvoU256eS5ZCO5bCd6K+V5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJNQU5cIjog5LiN6Ieq5Yqo5Y+R6YCBUFbml6Xlv5c7XG4gKiAgIGFwbHVzLXdhaXRpbmc9XCJuXCI6IOWFtuS4rW7kuLrlpKfkuo4x55qE5q2j5pW05pWwLCBhcGx1c+WcqOetieW+hW7mr6vnp5LkuYvlkI7lsJ3or5Xlj5HpgIFQVuaXpeW/lztcbiAqXG4gKiAgIGRlcHPvvJog5pegXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZtZXRhX2luZm9cbiAgICAgKiBUT0RPIOiLpeS7iuWQjuacieWKqOaAgeS/ruaUuW1ldGFfaW5mb+eahOmcgOaxgu+8jFxuICAgICAqIOatpOWkhOmcgOimgeWKqOaAgeS7jiBtZXRhSW5mb+aooeWdl+S4reWOu+iwg+eUqGdldEluZm/mlrnms5XmnaXojrflj5bnm7jlhbPkv6Hmga/vvIzov5nmoLflgZrnmoTlnY/lpITmmK/mtojogJfmgKfog71cbiAgICAgKi9cbiAgICBnZXRNZXRhSW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIG1ldGFfaW5mbyA9IF8kLm1ldGFfaW5mbzsgLy8gfHwgbWV0YUluZm8uZ2V0SW5mbygpO1xuICAgICAgcmV0dXJuIG1ldGFfaW5mbztcbiAgICB9LFxuXG4gICAgZ2V0QXBsdXNXYWl0aW5nOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBtZXRhX2luZm8gPSB0aGlzLmdldE1ldGFJbmZvKCkgfHwge307XG4gICAgICByZXR1cm4gbWV0YV9pbmZvWydhcGx1cy13YWl0aW5nJ107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo++8jOmFjee9ruS6hmFwbHVzV2FpdGluZyDlubbkuJQg5pivYXBsdXPoh6rliqjmiZPngrnmiY3otbDov5nmrrXpgLvovpFcbiAgICAgKiA8bWV0YSBuYW1lPVwiYXBsdXMtd2FpdGluZ1wiIGNvbnRlbnQ9XCJ4eHhcIiAvPlxuICAgICAqICAgeHh4OiAnTUFOJyAtIOS4jeWPkemAgXB255qE5qCH6K+GXG4gICAgICogICB4eHg6ICcxJyAtIOWwneivleetieW+hTbnp5LlkI7lj5FwdlxuICAgICAqXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIo57uI5q2i5Lit6Ze05Lu25omn6KGMKSB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpO1xuICAgICAgaWYgKGFwbHVzV2FpdGluZyAmJiBjb25maWcuaXNfYXV0bykge1xuICAgICAgICBhcGx1c1dhaXRpbmcgPSB0aGlzLmdldEFwbHVzV2FpdGluZygpICsgJyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZW5fdG9fc2VuZHB2ID0ge1xuICAgICAgICAgIGFwbHVzV2FpdGluZzogYXBsdXNXYWl0aW5nXG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaChhcGx1c1dhaXRpbmcpIHtcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fVVNFUl9JRDpcbiAgICAgICAgY2FzZSBhcGx1c1N0YXRpYy5fQU5PTllfSUQ6XG4gICAgICAgIGNhc2UgJ01BTic6XG4gICAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgICAgY2FzZSAnMSc6XG4gICAgICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hlbl90b19zZW5kcHYuaXNXYWl0ID0gdHJ1ZTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjYigpO1xuICAgICAgICAgIH0sIDYwMDApO1xuICAgICAgICAgIHJldHVybiA2MDAwO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHZhciBuID0gYXBsdXNXYWl0aW5nICogMTtcbiAgICAgICAgICBpZiAoKG4gKyAnJykgIT09ICdOYU4nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVuX3RvX3NlbmRwdi5pc1dhaXQgPSB0cnVlO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICBjYigpO1xuICAgICAgICAgICAgfSwgbik7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L3doZW5fdG9fc2VuZHB2LmpzXG4vLyBtb2R1bGUgaWQgPSA1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogd2hlcmVfdG9fc2VuZF9taW5pX3VtLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG4gICAgLyoqXG4gICAgICog6I635Y+WIG1ldGFfaW5mbyBcbiAgICAqL1xuICAgIGdldE1ldGFJbmZvOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gICAgICByZXR1cm4gKF8kLm1ldGFfaW5mbyB8fCB7fSlba2V5XTtcbiAgICB9LFxuXG4gICAgZ2V0SG9zdFVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgdHJhY2tEb21haW4gPSB0aGlzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX1BWX0RPTUFJTik7ICAgICAgXG4gICAgICBpZiAoIXV0aWwuY2hlY2tEb21haW4odHJhY2tEb21haW4pKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIG1pbmlMb2cgPSBtaW5pLmdldExvZ0RvbWFpbigpO1xuICAgICAgaWYgKCFtaW5pTG9nKSB7XG4gICAgICAgIHVsb2coKS50aXBfdygnY3VycmVudCBtaW5pYXBwIGZyYW1ld29yayBpcyBub3Qgc3VwcG9ydGVkISEnKTtcbiAgICAgICAgcmV0dXJuICcnOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICB9XG4gICAgICAvLyB2YXIgdXJsID0gWycvLycsIHJob3N0LCBsb2dEb21haW5dO1xuICAgICAgcmV0dXJuIHV0aWwuZml4RG9tYWluKHRyYWNrRG9tYWluKSArIG1pbmlMb2c7XG4gICAgfSxcblxuXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQubWV0aG9kID0gJ1BPU1QnO1xuICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0SG9zdFVybCgpO1xuICAgICAgaWYgKCF1cmwgfHwgKHVybC5pbmRleE9mKCdodHRwczovLycpIDwgMCAmJiB1cmwuaW5kZXhPZignaHR0cDovLycpKSkge1xuICAgICAgICB1bG9nKCkudygnY3VycmVudCB0cmFja0RvbWFpbiBpbnZhbGlkOiAnICsgdXJsKTtcbiAgICAgICAgcmV0dXJuICdkb25lJztcbiAgICAgIH1cbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoZXJlX3RvX3NlbmQudXJsID0gdXJsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doZXJlX3RvX3NlbmRfbWluaV91bS5qc1xuLy8gbW9kdWxlIGlkID0gNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy93aGF0X3RvX3NlbmQuanNcbiAqXG4gKiDkvZznlKjvvJrml6Xlv5flj5HpgIHln7rnoYDlj4LmlbDmlLbpm4bvvJpcbiAqICAgICAg5oyJ6aG65bqP5bCGYXBsdXMucHZfZGF0YS5iYXNpY+OAgWV4cGFyYW1z44CBb2xkUGFyYW1z44CBYXBsdXMucHZfZGF0YS5leHRyYeWbm+S4reexu+Wei+eahOWPguaVsG1lcmdl5Zyo5LiA5Liq5pWw57uE5LitXG4gKiBkZXBzOiDml6BcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpOyAgXG52YXIgbG9nSWQgPSByZXF1aXJlKCdAdXRpbHMvbG9nSWQnKTtcbnZhciB1dGlsUGFyYW1zID0gcmVxdWlyZSgnLi91dGlsUGFyYW1zJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoXCJAdXRpbHMvdXRpbFwiKTtcbnZhciBDTlQgPSBhcGx1c1N0YXRpYy5TUE1fQ05UO1xudmFyIFVSTCA9IGFwbHVzU3RhdGljLlNQTV9VUkw7XG52YXIgUFJFID0gYXBsdXNTdGF0aWMuU1BNX1BSRTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0Q29tbW9uUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIGV0YWcgPSBjb250ZXh0LmV0YWcgfHwge307XG4gICAgICB2YXIgdXNlcmRhdGEgPSBjb250ZXh0LnVzZXJkYXRhIHx8IHt9O1xuICAgICAgdmFyIF8kID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnXyQnKSB8fCB7fTtcbiAgICAgIHZhciBzcG0gPSBfJC5zcG0gfHwge307XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBwbGF0Zm9ybVR5cGUgPSBhcGx1cy5nZXRNZXRhSW5mbygncGxhdGZvcm1UeXBlJykgfHwgbWluaS5nZXRQbGF0Zm9ybVR5cGUoKTtcblxuICAgICAgdmFyIHVzZXJJbmZvID0ge1xuICAgICAgICBfZGV2X2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX2Rldl9pZCcpLFxuICAgICAgICBfYW5vbnlfaWQ6IGFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLl9BTk9OWV9JRCksXG4gICAgICAgIF91c2VyX2lkOiBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5fVVNFUl9JRCksXG4gICAgICAgIF91c2VyX25pY2s6IGFwbHVzLmdldE1ldGFJbmZvKCdfdXNlcl9uaWNrJyksXG4gICAgICAgIF9zZXNzaW9uX2lkOiBhcGx1cy5nZXRNZXRhSW5mbygnX3Nlc3Npb25faWQnKSxcbiAgICAgICAgdWFpZDogKGFwbHVzLmdldE1ldGFJbmZvKCd1YWlkJykgKyAnJykgPT09ICcxJyA/IDEgOiAwLFxuICAgICAgfTtcblxuICAgICAgaWYgKCFhcGx1cy5nbG9iYWxDb25maWcuaXNVTSkge1xuICAgICAgICB2YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG4gICAgICAgIHZhciBwYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgICB2YXIgcm91dGUgPSBwYWdlLnJvdXRlIHx8IHBhZ2UuaXMgfHwgJyc7XG4gICAgICAgIHVzZXJJbmZvLl9wYWdlX3RpdGxlID0gUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKHJvdXRlKSB8fCAnJztcbiAgICAgIH1cbiAgICAgIHZhciBjbGllbnQgPSBhcGx1cy5fYXBsdXNfY2xpZW50IHx8IHt9O1xuICAgICAgdmFyIGdsb2JhbENvbmZpZyA9IGFwbHVzLmdsb2JhbENvbmZpZyB8fCB7fTtcblxuICAgICAgdmFyIHVybCA9ICctJztcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgICAgICB2YXIgcGFnZUluc3RhbmNlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0xXSB8fCB7fTtcbiAgICAgICAgdmFyIGN1clBhdGggPSB1c2VyZGF0YS5nb2tleSAmJiB1c2VyZGF0YS5nb2tleS5jdXJyZW50UGF0aDtcbiAgICAgICAgdXJsID0gY3VyUGF0aCB8fCBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIFxuICAgICAgdmFyIGxvZ0lkS2V5ID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgKyB1cmw7XG4gICAgICB2YXIgbG9nSWRLZXkyID0gY2xpZW50Lm1vZGVsICsgY2xpZW50Lm5ldHdvcmtUeXBlICsgY29uZmlnLnRpdGxlICsgZXRhZy5jbmE7XG4gICAgICB2YXIgY2FjaGUgPSAoZ2xvYmFsQ29uZmlnLmlzRGVjb2RlVXJsID8gJ0RDXycgOiAnJykgKyBsb2dJZC5nZXRMb2dJZChsb2dJZEtleSwgbG9nSWRLZXkyKTtcblxuICAgICAgdmFyIGFwcEtleSA9IHV0aWwuZ2V0QXBwS2V5KCk7XG4gICAgICBpZiAoIWFwcEtleSkge1xuICAgICAgICB1bG9nKCkudygncGxlYXNlIHNldCBhcHBLZXkgaW4gYXBsdXMgbWV0YUluZm8gYmVmb3JlIHNlbmRQViEnKTtcbiAgICAgIH1cbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSAgT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgICBhcHBLZXk6IGFwcEtleSxcbiAgICAgICAgY2FjaGU6IGNhY2hlLFxuICAgICAgICBjbmE6IGV0YWcuY25hLFxuICAgICAgICBldGFnOiBldGFnLFxuICAgICAgICBwcmU6IF8kLnBhZ2VfcmVmZXJyZXIgfHwgJy0nLFxuICAgICAgICBzZGtfaW5mbzoge1xuICAgICAgICAgIGpzdmVyOiBnbG9iYWxDb25maWcuc2NyaXB0X25hbWUsXG4gICAgICAgICAgbHZlcjogZ2xvYmFsQ29uZmlnLmx2ZXIsXG4gICAgICAgICAgY3VzdG9tU2RrSWQ6IGFwbHVzLmdldE1ldGFJbmZvKCdjdXN0b21TZGtJZCcpIHx8ICcnLFxuICAgICAgICAgIHBsYXRmb3JtVHlwZTogcGxhdGZvcm1UeXBlLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBjb25maWcudGl0bGUgfHwgJycsXG4gICAgICAgIHVybDogdXJsIHx8ICctJyxcbiAgICAgICAgY2xpZW50OiBjbGllbnQsXG4gICAgICAgIHRpbWVab25lOiB1dGlsUGFyYW1zLmdldFRpbWVab25lKCksXG4gICAgICAgIGdta2V5OiB1c2VyZGF0YS5nbWtleSB8fCAnJyxcbiAgICAgICAgbWV0aG9kOiB0aGlzLm9wdGlvbnMuY29udGV4dC53aGVyZV90b19zZW5kLm1ldGhvZFxuICAgICAgfSwgdXNlckluZm8pO1xuICAgICAgXG4gICAgICB2YXIgZ29rZXkgPSB1c2VySW5mbztcblxuICAgICAgaWYgKHNwbS5zcG1fdXJsKSB7XG4gICAgICAgIGdva2V5W1VSTF0gPSBzcG0uc3BtX3VybCB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgaWYgKHNwbS5zcG1fcHJlKSB7XG4gICAgICAgIGdva2V5W1BSRV0gPSBzcG0uc3BtX3ByZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc3BtLnNwbV9jbnQpIHtcbiAgICAgICAgZ29rZXlbQ05UXSA9IHNwbS5zcG1fY250IHx8ICcnO1xuICAgICAgfVxuICAgICAgZ29rZXlbYXBsdXNTdGF0aWMuUFZJRF0gPSBhcGx1cy5wdmlkIHx8ICcnO1xuICAgICAgY29tbW9uUGFyYW1zLnNlc3Npb25BcmdzID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXNlc3Npb24tYXJncycpO1xuICAgICAgY29tbW9uUGFyYW1zLmdsb2JhbEFyZ3MgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZ2xvYmFsLWFyZ3MnKTsgIC8vIDIwMjEtMDEtMTRA5Lmd6ZSh6ZyA5rGCXG4gICAgICAvLyDpnIDopoHliKDpmaTnmoTku6PnoIEtLS0tZW5kXG4gICAgICBjb21tb25QYXJhbXMuZ29rZXkgPSBnb2tleTtcbiAgICAgIHJldHVybiBjb21tb25QYXJhbXM7XG4gICAgfSxcblxuXG4gICAgZ2V0UHZQYXJhbXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICAgIHZhciBjb21tb25QYXJhbXMgPSB0aGlzLmdldENvbW1vblBhcmFtcygpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuY29uZmlnLmlzX2F1dG8pIHtcbiAgICAgICAgY29tbW9uUGFyYW1zLnNka19pbmZvLm1hbnNuZGxvZyA9IDE7XG4gICAgICB9XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgY29tbW9uUGFyYW1zLCB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLlBWX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcxJyxcbiAgICAgICAgbG9na2V5OiAnL3Z4LmdpZicsXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogYXBsdXMuXyQuc2VuZF9wdl9jb3VudCA+IDAgPyBuZXcgRGF0ZSgpIDogYXBsdXMubG9nQ29uZmlnLnBhZ2VMb2FkVGltZSxcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBnZXRIamxqUGFyYW1zOiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcblxuICAgICAgdmFyIGhqbGpQYXJhbXMgPSB7XG4gICAgICAgIGV2ZW50X2NvZGU6IGFwbHVzU3RhdGljLkVWRU5UX0lEX01BUFt1c2VyZGF0YS5nbWtleV0gfHwgdXNlcmRhdGEuZ21rZXksIC8vIGFwbHVzU3RhdGljLk9USEVSX0NPREUsXG4gICAgICAgIGxvZ3R5cGU6ICcyJyxcbiAgICAgICAgbG9na2V5OiB1c2VyZGF0YS5sb2drZXksXG4gICAgICAgIGV2ZW50X3RpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgICAgLy8gbWFuc25kbG9nOiAnMScsXG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nZXRDb21tb25QYXJhbXMoKSwgaGpsalBhcmFtcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcGFyYW1zID0ge307XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmNvbmZpZy5yZWNvcmRUeXBlID09PSBcIlBWXCIpIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRQdlBhcmFtcygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyYW1zID0gdGhpcy5nZXRIamxqUGFyYW1zKCk7XG4gICAgICB9XG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IHBhcmFtcztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3doYXRfdG9fc2VuZF9taW5pX2Nsb3VkLmpzXG4vLyBtb2R1bGUgaWQgPSA1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogcHZpZFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsSGFzaCA9IHJlcXVpcmUoJy4vdXRpbEhhc2gnKTtcblxudmFyIGdldFJhbmRvbUlkID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgLyoqXG4gICAqIOeUn+aIkOacrOmhteeahCBwdiBpZFxuICAgKiBwdiBpZCDlj6rpnIDopoHlvZPliY3nlKjmiLfkvJror53llK/kuIDljbPlj6/vvIzov5nlhL/kvb/nlKjkuIDkuKogNiDkvY3nmoQgMTYg6L+b5Yi25pWw5a2XXG4gICAqL1xuICB2YXIgcm5kX3N0cnMgPSAnJztcbiAgdmFyIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcbiAgdmFyIGhhbmRsZWQgPSBmYWxzZTtcbiAgdmFyIGNoYXI7XG5cbiAgLyoqXG4gICAqIOino+WGs+mDqOWIhiBzcG0g6KKrIEdGVyDlopnkuobnmoTmg4XlhrXvvIzlpoIgMjIuZ2xcbiAgICog5o6S6ZmkIHB2aWQg5LulIGdsIOW8gOWktOeahOaDheWGtVxuICAgKi9cbiAgZnVuY3Rpb24gaGFuZGxlUFZJZCAoY2hhclBvcykge1xuICAgIHZhciBjaGFyc1dpdGhvdXRHID0gJzAxMjM0NTY3ODlhYmNkZWZoaWprbG1ub3BxcnN0dXZ3eHl6QUJDREVGSElKS0xNTk9QUVJTVFVWV1hZWic7XG4gICAgdmFyIGNoYXJzV2l0aG91dEwgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS01OT1BRUlNUVVZXWFlaJztcblxuICAgIGlmIChjaGFyUG9zID09IDEpIHtcbiAgICAgIHJldHVybiBjaGFyc1dpdGhvdXRHLnN1YnN0cihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA2MCksIDEpO1xuICAgIH0gZWxzZSBpZiAoY2hhclBvcyA9PSAyKSB7XG4gICAgICByZXR1cm4gY2hhcnNXaXRob3V0TC5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjApLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuICcwJztcbiAgfTtcblxuICB3aGlsZSAocm5kX3N0cnMubGVuZ3RoIDwgc2l6ZSkge1xuICAgIGNoYXIgPSBjaGFycy5zdWJzdHIoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNjIpLCAxKTtcbiAgICAvLyDlpITnkIbooqvlopnnmoTmg4XlhrXvvIznm67liY3lj6rpkojlr7lnbOW8gOWktOeahFxuICAgIGlmICghaGFuZGxlZCAmJiBybmRfc3Rycy5sZW5ndGggPD0gMiAmJiAoY2hhci50b0xvd2VyQ2FzZSgpID09ICdnJyB8fCBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2wnKSkge1xuICAgICAgaWYgKHJuZF9zdHJzLmxlbmd0aCA9PT0gMCAmJiBjaGFyLnRvTG93ZXJDYXNlKCkgPT0gJ2cnKSB7XG4gICAgICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC41KSB7XG4gICAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMSk7XG4gICAgICAgICAgaGFuZGxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocm5kX3N0cnMubGVuZ3RoID09IDEgJiYgY2hhci50b0xvd2VyQ2FzZSgpID09ICdsJyAmJiBybmRfc3Rycy5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSA9PSAnZycpIHtcbiAgICAgICAgY2hhciA9IGhhbmRsZVBWSWQoMik7XG4gICAgICAgIGhhbmRsZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBybmRfc3RycyArPSBjaGFyO1xuICB9XG4gIHJldHVybiBybmRfc3Rycztcbn07XG5cbmZ1bmN0aW9uIGdldENoYXJzIChhcmdzLCBzaXplLCBkZWZhdWx0VmFsKSB7XG4gIGlmIChhcmdzKSB7XG4gICAgcmV0dXJuIHV0aWxIYXNoLmhhc2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3MpKS5zdWJzdHIoMCwgc2l6ZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRlZmF1bHRWYWw7XG4gIH1cbn1cblxuZXhwb3J0cy5nZXRMb2dJZCA9IGZ1bmN0aW9uIChwYWdlVXJsLCBsb2dOYW1lKSB7XG4gIHZhciByYW5kb204Q2hhcnMgPSBnZXRSYW5kb21JZCg4KTtcbiAgdmFyIHJhbmRvbTRDaGFycyA9IHJhbmRvbThDaGFycy5zdWJzdHIoMCwgNCk7XG4gIHZhciByYW5kb202Q2hhcnMgPSByYW5kb204Q2hhcnMuc3Vic3RyKDAsIDYpO1xuICByZXR1cm4gW1xuICAgIGdldENoYXJzKHBhZ2VVcmwsIDQsIHJhbmRvbTRDaGFycyksXG4gICAgZ2V0Q2hhcnMobG9nTmFtZSwgNCwgcmFuZG9tNENoYXJzKSxcbiAgICByYW5kb202Q2hhcnNcbiAgXS5qb2luKCcnKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9sb2dJZC5qc1xuLy8gbW9kdWxlIGlkID0gNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiDov5Tlm55HTVTmoLzlvI/nmoTml7bljLrvvIzlpoLvvJpHTVQrMDU6NDUsIEdNVC0wNzowMCwgR01UKzA4OjAwXG4gKi9cbmV4cG9ydHMuZ2V0VGltZVpvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGltZVpvbmUgPSAtbmV3IERhdGUoKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gNjA7XG4gIHZhciBfYW5kID0gJysnO1xuICBpZiAoX3RpbWVab25lIDwgMCkge1xuICAgIF9hbmQgPSAnLSc7XG4gIH1cbiAgdmFyIHpvbmUgPSBNYXRoLmFicyhwYXJzZUludChfdGltZVpvbmUpKTtcbiAgdmFyIHJlbWFpbmRlciA9IE1hdGguYWJzKHBhcnNlSW50KF90aW1lWm9uZSkgLSBfdGltZVpvbmUpO1xuICB2YXIgcmVtYWluZGVyWm9uZSA9ICcwMCc7XG4gIGlmIChyZW1haW5kZXIgPiAwKSB7XG4gICAgcmVtYWluZGVyWm9uZSA9IDYwICogcmVtYWluZGVyO1xuICB9XG4gIHJldHVybiAnR01UJyArIF9hbmQgKyAoem9uZSA+IDkgPyB6b25lIDogKCcwJyArIHpvbmUpKSArICc6JyArIHJlbWFpbmRlclpvbmU7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL3V0aWxQYXJhbXMuanNcbi8vIG1vZHVsZSBpZCA9IDU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvY29tbW9uL21pbmlhcHBfZGF0YS5qc1xuICpcbiAqIOS9nOeUqO+8muaXpeW/l+WPkemAgeWfuuehgOWPguaVsOaUtumbhu+8mlxuICogICAgICDmjInpobrluo/lsIZhcGx1cy5wdl9kYXRhLmJhc2lj44CBZXhwYXJhbXPjgIFvbGRQYXJhbXPjgIFhcGx1cy5wdl9kYXRhLmV4dHJh5Zub5Lit57G75Z6L55qE5Y+C5pWwbWVyZ2XlnKjkuIDkuKrmlbDnu4TkuK1cbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogMS4gYXBsdXPpu5jorqTpnIDopoHph4fpm4bnmoTlj4LmlbA6IGJhc2ljTGlzdFxuICAgICAqIDIuIGJlYWNvbuaJqeWxleWPguaVsDogZXhwYXJhbXNcbiAgICAgKiAzLiBhcGx1c+m7mOiupOmcgOimgemHh+mbhueahOWuouaIt+err+WPguaVsDogZXh0cmFMaXN0XG4gICAgICog5Lit6YCU5aSE55CGXyTlhajlsYDlj5jph486IHByb2Nlc3NMb2Rhc2hEb2xsYXJcbiAgICAgKiA0LiBsb2NhbFN0b3JhZ2XkuK3lrZjlgqjnmoTkuIrkuIDpobVzcG3kv6Hmga86IHNwbWFidGVzdFxuICAgICAqIOS7peS4ijTpg6jliIbmi7zoo4XmiJBwdmRhdGFcbiAgICAgKlxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaXNUQkVudiA9IG1pbmkuaXNUQigpO1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSB8fCB7fTtcbiAgICAgIHZhciBwYWdlcyA9IGdldEN1cnJlbnRQYWdlcygpO1xuICAgICAgdmFyIGN1cnJlbnRQYWdlICA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDFdIHx8IHt9O1xuICAgICAgaWYgKGN1cnJlbnRQYWdlICYmICFsb2dkYXRhLnRpdGxlKSB7XG4gICAgICAgIGxvZ2RhdGEudGl0bGUgPSBjdXJyZW50UGFnZS5yb3V0ZSB8fCAnJzsgIFxuICAgICAgfVxuICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICBsb2dkYXRhLnVybCA9ICghaXNUQkVudiA/ICdodHRwczovLycrIGxvZ2RhdGEuY2xpZW50LmFwcElkICsgJ18nIDogJycpICsgKGN1cnJlbnRQYWdlLnJvdXRlICB8fCBjdXJyZW50UGFnZS5pcyB8fCAnLScpO1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJlID0gJy0nO1xuICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdmFyIHByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAyXSB8fCB7fTtcbiAgICAgICAgcHJlID0gKCFpc1RCRW52ICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA/ICdodHRwczovLycrIGxvZ2RhdGEuY2xpZW50LmFwcElkICsgJ18nIDogJycpICsgKHByZVBhZ2Uucm91dGUgfHwgcHJlUGFnZS5pcyB8fCAnLScpO1xuICAgICAgfVxuICAgICAgbG9nZGF0YS5wcmUgPSBwcmU7XG4gICAgICBpZiAobG9nZGF0YS5zZGtfaW5mbykge1xuICAgICAgICBsb2dkYXRhLnNka19pbmZvLndpbmRtaWxsID0gJzEnO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YSA9IGxvZ2RhdGE7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL2NvbW1vbi9taW5pYXBwX2RhdGEuanNcbi8vIG1vZHVsZSBpZCA9IDU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvcGx1Z2lucy9wdi93aGF0X3RvX3NlbmRwdl91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsHB2ZGF0YeWQjumdou+8mnB2ZGF0YS5jb25jYXQodXNlcmRhdGEpXG4gKiAgZGVwczogd2hhdF90b19zZW5kcHZcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBpc1VuZGVmaW5lZCA9IHJlcXVpcmUoJ0B1dGlscy9pc1VuZGVmaW5lZCcpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcbiAgICAgKlxuICAgICAqIGdva2V5OlxuICAgICAqICAg6L+Z5Z2X5Li65a+55Y6G5Y+ydXNlcmRhdGHkvKDpgJLnmoTlhbzlrrnlgZrms5XvvIxUT0RP77ya5o6o5Yqo5bqU55So5pa55Y+Y5pu0XG4gICAgICogICDlupTnlKjmlrnkvKDpgJLnmoRnb2tleeagvOW8j+W6lOeUqOaWueiHquihjOWGs+Wumu+8jFxuICAgICAqICAgICDlpoIgZ29rZXk9XCJhPTEmYj0yXCIg5oiWIHtcImFcIjpbe1wia2V5XCI6MjAxNjEyMjYxNTUwLFwidmFsdWVcIjowLjF9LHtcImtleVwiOjIwMTYxMjI2MTYwMCxcInZhbHVlXCI6MC41fSx7XCJrZXlcIjoyMDE2MTIyNjE2MTAsXCJ2YWx1ZVwiOjF9XX1cbiAgICAgKiAgIOi/meWdl+mAu+i+keaYr+mAoOaIkGV4dGVuZGFyZ3PlhoXpg6jlh7rnjrDlpJrkuKrmlpzmnaDnmoTlhYPlh7bvvIHvvIHvvIFcbiAgICAgKiBwYWdlX2lkOlxuICAgICAqICAg5pyJcGFnZV9pZOWwseWcqHNwbWLkuK3mt7vliqDlrZDlj4LmlbBcbiAgICAgKiAgIOaXoHBhZ2VfaWTlsLHmuIXpmaRzcG1i5Lit55qE5a2Q5Y+C5pWwXG4gICAgICogc3BtX2NudFxuICAgICAqICAg5pu05pS55a6Mc3BtYuS9jei/mOmcgOimgeabtOaWsHNwbV9jbnQgQOiwi+WjqyBpbiAyMDE4LTAzLTIwICDku6XlhY10b1VU55qEc3BtLWNudOS4ouWkseWIhuahtuWPt1xuICAgICAqIOS4quaAp+WMluWPguaVsO+8mlxuICAgICAqICAgMS4gKGFwbHVz5qSN5YWlKTogPG1ldGEgbmFtZT1cImFwbHVzLWNwdmRhdGFcIiBjb250ZW50PVwiSlNPTnN0cmluZ1wiPlxuICAgICAqICAgMi4g5pa55rOV5Lyg5YWlOiBhcGx1cy5zZW5kUFYoe0NPTkZJR30sIHtVU0VSREFURX0pO1xuICAgICAqIOWPjeS9nOW8iueahOaWh+aho+WuvemrmDogX3B3LF9waFxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fSB7Li4ufVxuICAgICAqL1xuICAgIGdldFVzZXJkYXRhOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgZCA9IHt9O1xuXG4gICAgICBpZiAoY29uZmlnICYmICFjb25maWcuaXNfYXV0bykge1xuICAgICAgICBpZiAoY29uZmlnLmdva2V5KSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBjb25maWcuZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkID0gZm9ybWF0LnBhcmFtMm9iaihjb25maWcuZ29rZXkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZy5nb2tleSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGQgPSBjb25maWcuZ29rZXk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21ib1VzZXJkYXRhID0gZnVuY3Rpb24oX2RhdGEpIHtcbiAgICAgICAgaWYoaXNBcnJheShfZGF0YSkpe1xuICAgICAgICAgIF9kYXRhLmZvckVhY2goZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbih7fSwgZCwgaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZCA9IE9iamVjdC5hc3NpZ24oe30sIGQsIF9kYXRhKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGNvbWJvVXNlcmRhdGEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWNwdmRhdGEnKSk7XG5cbiAgICAgIHZhciBjdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgIHZhciBwYWdlTmFtZSA9IGN1cnJlbnRQYWdlLnJvdXRlIHx8IGN1cnJlbnRQYWdlLmlzIHx8ICdwYWdlJztcbiAgICAgIHZhciBwYWdlUHJvcGVydGllcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1wYWdlLXByb3BlcnRpZXMnKSB8fCB7fTtcbiAgICAgIHZhciBwYWdlUHJvcGVydHkgPSBwYWdlUHJvcGVydGllc1twYWdlTmFtZV07XG4gICAgICBpZiAodHlwZW9mIHBhZ2VQcm9wZXJ0eSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY29tYm9Vc2VyZGF0YShwYWdlUHJvcGVydHkpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gY29udGV4dC51c2VyZGF0YSB8fCB7fTtcbiAgICAgIGNvbWJvVXNlcmRhdGEodXNlcmRhdGEpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5pu05pawcHJl77yI5Zyo6L+Z6YeM5YGa55qE5Y6f5Zug5piv77yMcHJl5Y+C5pWw5bGe5LqOYmFzaWPlj4LmlbDvvIzkvYbmmK91c2VyZGF0YeS4reWmguS8oOmAkuS6hnJlZmVycmVy77yM5Y+v5Lul6KaG55uWcHJl77yJXG4gICAgICovXG4gICAgdXBkYXRlUHJlOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcucmVmZXJyZXIpIHtcbiAgICAgICAgXyQucGFnZV9yZWZlcnJlciA9IGNvbmZpZy5yZWZlcnJlcjtcbiAgICAgICAgZGF0YS5wcmUgPSBjb25maWcucmVmZXJyZXI7XG4gICAgICB9XG4gICAgICB1dGlsR29sZGxvZy5zZXRHb2xkbG9nVmFsKCdfJCcsIF8kKTtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw6aG16Z2i55qEVXJsXG4gICAgICovXG4gICAgdXBkYXRlVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICBpZihjb25maWcmJmNvbmZpZy5wYWdlVXJsKXtcbiAgICAgICAgZGF0YS51cmwgPSBjb25maWcucGFnZVVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICog5pu05paw5p2l5rqQc3BtXG4gICAgICovXG4gICAgdXBkYXRlU3BtVXJsOmZ1bmN0aW9uKGRhdGEpe1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG4gICAgICB2YXIgc3BtVXJsID0gY29uZmlnW2FwbHVzU3RhdGljLlNQTV9VUkxdfHxjb25maWcuc3BtVXJsO1xuICAgICAgaWYoIWlzVW5kZWZpbmVkKHNwbVVybCkpe1xuICAgICAgICBkYXRhLmdva2V5W2FwbHVzU3RhdGljLlNQTV9VUkxdID0gc3BtVXJsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmnaXmupDnmoTmnaXmupBzcG1cbiAgICAgKi9cbiAgICB1cGRhdGVTcG1QcmU6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICB2YXIgY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBzcG1QcmUgPSBjb25maWdbYXBsdXNTdGF0aWMuU1BNX1BSRV18fGNvbmZpZy5zcG1QcmU7XG4gICAgICBpZighaXNVbmRlZmluZWQoc3BtUHJlKSl7XG4gICAgICAgIGRhdGEuZ29rZXlbYXBsdXNTdGF0aWMuU1BNX1BSRV0gPSBzcG1QcmU7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnlwiZG9uZVwi57uI5q2i5Lit6Ze05Lu25omn6KGMXG4gICAgICogQHBhcmFtIFtTdHJpbmddIHN0YXRlIOeKtuaAgVxuICAgICAqIEBwYXJhbSBbRnVuY3Rpb25dIGNiICDlm57osINcbiAgICAgKiBAcmV0dXJuIFwiZG9uZVwiIHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBkID0gdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGE7XG4gICAgICB2YXIgdXNlcmRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdldFVzZXJkYXRhKCksIGQudXNlcmRhdGEgfHwge30pO1xuICAgICAgZC5nb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGQuZ29rZXksIHVzZXJkYXRhKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVByZShkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVVybChkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVVybChkKTtcbiAgICAgIGQgPSB0aGlzLnVwZGF0ZVNwbVByZShkKTtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LndoYXRfdG9fc2VuZC5sb2dkYXRhID0gZDtcbiAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LnVzZXJkYXRhID0gZC5nb2tleTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfbG9nL21pZGRsZXdhcmUvcHYvd2hhdF90b19zZW5kcHZfdXNlcmRhdGFfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih2YWx1ZSl7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy9pc1VuZGVmaW5lZC5qc1xuLy8gbW9kdWxlIGlkID0gNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvcGx1Z2lucy9jYW5fdG9fc2VuZHB2LmpzXG4gKlxuICog5L2c55So77ya5Yik5patcHbog73lkKblj5HpgIHvvIzkuI3lj6/ku6Xlj5HpgIHliJnkvJrkuK3mlq3lkI7nu63miYDmnInkuK3pl7Tku7bmiafooYxcbiAqIGRlcHM6IOaXoFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxFdmVudExpbWl0ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxFdmVudExpbWl0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDmmK/lkKbopoHmiafooYxzZW5kcHbnmoTlhaXlj6NcbiAgICAgKiDov5Tlm55cImRvbmVcIue7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiBcImRvbmVcIiB8IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgXyQgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfJCcpIHx8IHt9O1xuICAgICAgdmFyIGNhbl90b19zZW5kcHYgPSB0aGlzLm9wdGlvbnMuY29udGV4dC5jYW5fdG9fc2VuZHB2IHx8IHt9O1xuICAgICAgdmFyIGNvdW50ID0gXyQuc2VuZF9wdl9jb3VudCB8fCAwO1xuICAgICAgdmFyIGNvbmZpZyA9IHRoaXMub3B0aW9ucy5jb25maWcgfHwge307XG5cbiAgICAgIGlmICghdXRpbEV2ZW50TGltaXQuY2FuU2VuZFBWKGNvbmZpZy50cmFja190eXBlKSkge1xuICAgICAgICByZXR1cm4gJ2RvbmUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FuX3RvX3NlbmRwdi5mbGFnID0gJ1lFUyc7XG4gICAgICAgIHRoaXMub3B0aW9ucy5jb250ZXh0LmNhbl90b19zZW5kcHYgPSBjYW5fdG9fc2VuZHB2O1xuICAgICAgICBfJC5zZW5kX3B2X2NvdW50ID0gKytjb3VudDtcbiAgICAgICAgdXRpbEdvbGRsb2cuc2V0R29sZGxvZ1ZhbCgnXyQnLCBfJCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2xvZy9taWRkbGV3YXJlL3B2L2Nhbl90b19zZW5kcHZfbWluaS5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxFdmVudExpbWl0LmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbFJlbW90ZUNmZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUmVtb3RlQ2ZnJyk7XG52YXIgdXRpbExvY2FsQ2ZnID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2NhbENvbmZpZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIGFwbHVzVXRpbHMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xuXG5mdW5jdGlvbiBuZWVkTGltaXRTZW5kKGxvZ2tleSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gIHZhciBldmVudExpbWl0UmF0ZXMgPSBhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19FVkVOVF9MSU1JVFJBVEVTKTtcbiAgaWYgKGV2ZW50TGltaXRSYXRlcyAmJiBldmVudExpbWl0UmF0ZXMubGVuZ3RoID4gMCkge1xuICAgIHZhciBldmVudCA9IHV0aWxBcnJheS5maW5kKGV2ZW50TGltaXRSYXRlcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0uZXZlbnRJZCA9PT0gbG9na2V5O1xuICAgIH0pO1xuICAgIFxuICAgIGlmIChldmVudCkge1xuICAgICAgdmFyIHJhbmRvbSA9IE1hdGguY2VpbChNYXRoLnJhbmRvbSgpKjEwMDApO1xuICAgICAgaWYgKHJhbmRvbSA8IChldmVudC5zYW1wbGluZ1JhdGUgKiAxMDAwKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpc1VNKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGlzVU0gPSBhcGx1cy5nbG9iYWxDb25maWcuaXNVTTtcbiAgcmV0dXJuICEhaXNVTTtcbn07XG5cbmV4cG9ydHMuY2FuVG9TZW5kSEpMSiA9IGZ1bmN0aW9uKGdva2V5LCBsb2drZXkpIHtcbiAgdmFyIGRldmljZVN0YXR1cyA9IHV0aWxSZW1vdGVDZmcuZ2V0RGV2aWNlU3RhdHVzKCk7XG4gIGNvbnNvbGUubG9nKCd5ei0tLS0tZGV2aWNlU3RhdHVzJywgISFkZXZpY2VTdGF0dXMpO1xuICBcbiAgaWYgKCFkZXZpY2VTdGF0dXMpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgaWYgKHV0aWxEYXNoLmlzRW1wdHlPYmplY3QoY3R4KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZSkge31cbiAgfVxuXG4gIC8vIOWmguaenOWFqOWfi+eCueWFs+mXrSDmiJbogIUg5YWo5Z+L54K55LqL5Lu25YWz6Zet6YeH6ZuG77yM5LiN5Y+R6YCB5LqL5Lu2XG4gIHZhciByZW1vdGVBdXRvdHJhY2tTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldEF1dG9UcmFja1N0YXR1cygpO1xuICB2YXIgYXV0b2V2ZW50U3RhdHVzID0gdXRpbFJlbW90ZUNmZy5nZXRBdXRvRXZlbnRTdGF0dXMoKTtcbiAgLy8gQOaWh+W/gyBcbiAgdmFyIGxvY2FsQXV0b3RyYWNrRW5hYmxlZCA9IHV0aWxMb2NhbENmZy5nZXRBdXRvVHJhY2tTdGF0dXMoKTtcblxuICB2YXIgcGFyYW1zID0ge307XG4gIGlmICh0eXBlb2YgZ29rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgcGFyYW1zID0gYXBsdXNVdGlscy5hcnIyb2JqKGFwbHVzVXRpbHMucGFyYW0yYXJyKGdva2V5KSk7XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zID0gZ29rZXk7XG4gIH1cblxuICBpZiAocGFyYW1zLmF1dG9fZWxlbWVudCkge1xuICAgIGlmIChhdXRvZXZlbnRTdGF0dXMgPT09IDIgfHwgcmVtb3RlQXV0b3RyYWNrU3RhdHVzID09PSAyKSB7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIGlmICghcmVtb3RlQXV0b3RyYWNrU3RhdHVzICYmICFsb2NhbEF1dG90cmFja0VuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBpZiAoIW5lZWRMaW1pdFNlbmQobG9na2V5KSkge1xuICAgIHJldHVybjtcbiAgfSAgXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG5leHBvcnRzLmNhblNlbmRQViA9IGZ1bmN0aW9uKHRyYWNrX3R5cGUpIHtcbiAgaWYgKCFpc1VNKCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBcbiAgLy/orr7lpIflvIDlhbMgXG4gIHZhciBkZXZpY2VTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldERldmljZVN0YXR1cygpO1xuICAvLyDov5znqIvlhajln4vngrkg6Ieq5YqocHYg5byA5YWzXG4gIHZhciBhdXRvcHZTdGF0dXMgPSB1dGlsUmVtb3RlQ2ZnLmdldEF1dG9QYWdlU3RhdHVzKCk7XG4gIC8vIOacrOWcsOWFqOWfi+eCuemFjee9riDoh6rliqhwdiDlvIDlhbNcbiAgdmFyIGxvY2FsQXV0b1B2RGlzYWJsZWQgPSB1dGlsTG9jYWxDZmcubG9jYWxBdXRvUFZEaXNhYmxlZCgpO1xuICBcbiAgdmFyIHJlc3VsdCA9IHRydWU7XG4gIGlmICghZGV2aWNlU3RhdHVzKSB7XG4gICAgcmVzdWx0ID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAodHJhY2tfdHlwZSA9PT0gJzEnKXtcbiAgICByZXR1cm4gIShhdXRvcHZTdGF0dXMgPT09IDIgfHwgKCFhdXRvcHZTdGF0dXMgJiYgbG9jYWxBdXRvUHZEaXNhYmxlZCkpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxFdmVudExpbWl0LmpzXG4vLyBtb2R1bGUgaWQgPSA2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogdXRpbExvY2FsQ29uZmlnLmpzXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIyIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLyoqXG4gKiDlhajln4vngrnmnKzlnLDphY3nva4g6K+75Y+WXG4gKiDlj5blgLwg5Y+q5pyJIHRydWUgb3IgZmFsc2VcbiovXG5cbmV4cG9ydHMubG9jYWxBdXRvRXZlbnREaXNhYmxlZCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgcmV0dXJuICEhYXBsdXMuZ2V0TWV0YUluZm8oYXBsdXNTdGF0aWMuQVBMVVNfRElTQUJMRV9BVVRPRVZFTlQpOyBcbn07XG5cblxuZXhwb3J0cy5sb2NhbEF1dG9QVkRpc2FibGVkID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICByZXR1cm4gISFhcGx1cy5nZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVU19ESVNBQkxFX0FVVE9QVikgfHwgISEoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSA9PT0gJ01BTicpO1xufTtcblxuZXhwb3J0cy5nZXRBdXRvVHJhY2tTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHJldHVybiAhIWFwbHVzLmdldE1ldGFJbmZvKGFwbHVzU3RhdGljLkFQTFVTX0FVVE9UUkFDS19FTkFCTEVEKTtcbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2NhbENvbmZpZy5qc1xuLy8gbW9kdWxlIGlkID0gNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIOaVsOe7hOW3peWFt1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogSUU45LiN5pSv5oyB5pWw57uE5Y6f55Sf55qEaW5kZXhPZu+8jOaVheiHquihjOWunueOsOS4gOS4qmluZGV4b2ZcbiAqIEBwYXJhbSBbQXJyYXldIGFyclxuICogQHBhcmFtIFtPYmplY3RdIGl0ZW1cbiAqIEByZXR1cm4gW051bWJlcl0gaW5kZXhcbiAqL1xuZXhwb3J0cy5pbmRleG9mID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG4gIHZhciBpbmRleCA9IC0xO1xuICB0cnkge1xuICAgIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGFycltqXSA9PT0gaXRlbSkge1xuICAgICAgICBpbmRleCA9IGo7XG4gICAgICB9XG4gICAgfVxuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxufTtcbmV4cG9ydHMuaXRlbU1hdGNoID0gZnVuY3Rpb24oYXJyLCBpdGVtKSB7XG4gIHZhciBtYXRjaGVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgaWYgKCF0aGlzLmlzQXJyYXkoYXJyKSkge1xuICAgICAgcmV0dXJuIG1hdGNoZWQ7XG4gICAgfVxuICAgIG1hdGNoZWQgPSBhcnIuc29tZShmdW5jdGlvbihzKSB7XG4gICAgICByZXR1cm4gKHMgJiYgcy5sZW5ndGggPiAwKSAmJiBpdGVtLmluZGV4T2YocykgIT09IC0xO1xuICAgIH0pO1xuICB9IGNhdGNoKGUpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFyci5sZW5ndGg7IGorKykge1xuICAgICAgaWYgKGl0ZW0uaW5kZXhPZihhcnJbal0pICE9PSAtMSkge1xuICAgICAgICBtYXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBtYXRjaGVkO1xufTtcblxuZnVuY3Rpb24gaXNBcnJheShvKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkobyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIC9BcnJheS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykpO1xuICB9XG59O1xuXG5leHBvcnRzLmlzQXJyYXkgPSBpc0FycmF5O1xuXG5mdW5jdGlvbiBmbGF0KGFycikge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIGlmIChpc0FycmF5KGFycikpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHYgPSBhcnJbaV07XG4gICAgICBpZiAoaXNBcnJheSh2KSkge1xuICAgICAgICAvL+mAkuW9kuaJgeW5s+WMluaVsOe7hFxuICAgICAgICBhcnJbaV0gPSBmbGF0KHYpO1xuICAgICAgICAvLyDpgJLlvZLlkI4g6L+e5o6l5pWw57uEXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5jb25jYXQoYXJyW2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnRzLmZsYXQgPSBmbGF0O1xuXG5mdW5jdGlvbiBmaW5kKGFyciwgY2FsbGJhY2spIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXJyLmZpbmQoY2FsbGJhY2spO1xuICB9IGNhdGNoKGUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG1hdGNoID0gY2FsbGJhY2soYXJyW2ldKTtcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gYXJyW2ldO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLmZpbmQgPSBmaW5kO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxBcnJheS5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9wbHVnaW5zL3B2L3doYXRfdG9faGpsal91c2VyZGF0YS5qc1xuICpcbiAqICDmj5Lku7bkvZznlKjvvJrmlLbpm4blupTnlKjmlrnoh6rlrprkuYlwduWPguaVsFxuICogICAgICAgICAgIOW5tuWwhuaUtumbhuWIsOeahOiHquWumuS5ieWPguaVsOS7peaVsOe7hOagvOW8j+i/veWKoOWIsGxvZ2RhdGHlkI7pnaLvvJpsb2dkYXRhLmNvbmNhdCh1c2VyZGF0YSlcbiAqICBkZXBzOiB3aGF0X3RvX2hqbGpcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZm9ybWF0ID0gcmVxdWlyZSgnQHV0aWxzL2Zvcm1hdCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xuLy8gdmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcblxuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB7XG5cbiAgICAvKipcbiAgICAgKiDph4fpm4bkuKrmgKfljJblj4LmlbBcbiAgICAgKlxuICAgICAqIHJlY29yZChsb2drZXksIGdta2V5LCBnb2tleSkgQVBJ5Lit55qEZ29rZXlcbiAgICAgKiBtZXRhOmFwbHVzLWV4aW5mb+S/oeaBrywgbWV0YTphcGx1cy1leGRhdGHkv6Hmga9cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gey4uLn1cbiAgICAgKi9cbiAgICBnZXRVc2VyRGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICB2YXIgYyA9IHRoaXMub3B0aW9ucy5jb250ZXh0IHx8IHt9O1xuICAgICAgdmFyIHVzZXJkYXRhID0gYy51c2VyZGF0YSB8fCB7fTtcbiAgICAgIHZhciBnb2tleSA9IGMud2hhdF90b19zZW5kLmxvZ2RhdGEuZ29rZXk7XG4gICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKHVzZXJkYXRhLmdva2V5KSk7XG4gICAgICBnb2tleSA9IE9iamVjdC5hc3NpZ24oe30sIGdva2V5LCBmb3JtYXQucGFyYW0yb2JqKGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1leGluZm8nKXx8e30pKTtcbiAgICAgIHZhciBleGRhdGEgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJyk7XG4gICAgICBpZiAoaXNBcnJheShleGRhdGEpKSB7XG4gICAgICAgIGV4ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xuICAgICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIGV4ZGF0YSB8fCB7fSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZ29rZXk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOS9leaXtuaJp+ihjHNlbmRwduaJp+ihjOWFpeWPo1xuICAgICAqIOi/lOWbnidkb25lJ+e7iOatouS4remXtOS7tuaJp+ihjFxuICAgICAqIEBwYXJhbSBbU3RyaW5nXSBzdGF0ZSDnirbmgIFcbiAgICAgKiBAcGFyYW0gW0Z1bmN0aW9uXSBjYiAg5Zue6LCDXG4gICAgICogQHJldHVybiAnZG9uZScgfCB1bmRlZmluZWRcbiAgICAgKi9cbiAgICBydW46IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxvZ2RhdGEgPSB0aGlzLm9wdGlvbnMuY29udGV4dC53aGF0X3RvX3NlbmQubG9nZGF0YTtcbiAgICAgIHZhciBnb2tleSA9IHRoaXMuZ2V0VXNlckRhdGEoKTtcbiAgICAgIC8vIOW6lOeUqOmAgOWHuuS6i+S7tuavlOi+g+eJueauiu+8jGR1cmF0aW9u5Y2zYXJnMSBA5paH6Z2SXG4gICAgICBpZiAobG9nZGF0YS5nbWtleSA9PT0gJzEwMTAnKSB7XG4gICAgICAgIGxvZ2RhdGEuYXJnMSA9IGdva2V5LmR1cmF0aW9uIHx8IGxvZ2RhdGEubG9na2V5O1xuICAgICAgfVxuICAgICAgbG9nZGF0YS5nb2tleSA9IGdva2V5O1xuICAgICAgdGhpcy5vcHRpb25zLmNvbnRleHQud2hhdF90b19zZW5kLmxvZ2RhdGEgPSBsb2dkYXRhO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9sb2cvbWlkZGxld2FyZS9oamxqL3doYXRfdG9faGpsal91c2VyZGF0YV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG4gKiBBUEnmj5Lku7ZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX2FwaS9tYWluX21pbmknKSh0aGlzLm9wdGlvbnMuY29udGV4dC5sb2dDb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX2FwaV9taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluLmpzXG4gKiBBUEnmj5Lku7ZcbiAqXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIFJpY2hhcmR86LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gbG9nQ29uZmlnIHtcbiAqICAgIHB2OiB7XG4gKiAgICAgIHBsdWdpbnM6IHJlcXVpcmUoJy4vbGliX2xvZy9wbHVnaW5zX3B2JyksXG4gKiAgICAgIGNvbnRleHQ6IHJlcXVpcmUoJy4vbGliX2xvZy9jb25maWcvY29uZmlnX3UnKVxuICogICAgfSxcbiAqICAgIGhqbGo6IHtcbiAqICAgICAgcGx1Z2luczogcmVxdWlyZSgnLi9saWJfbG9nL3BsdWdpbnNfaGpsaicpLFxuICogICAgICBjb250ZXh0OiByZXF1aXJlKCcuL2xpYl9sb2cvY29uZmlnL2NvbmZpZ19oamxqX3UnKVxuICogICAgfVxuICogIH1cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobG9nQ29uZmlnKSB7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgaWYgKGFwbHVzLl9hcGx1c19hcGkpIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgYXBsdXMuX2FwbHVzX2FwaSA9IHtcbiAgICAgIHN0YXR1czogYXBsdXNTdGF0aWMuQ09NUExFVEVcbiAgICB9O1xuICB9XG5cbiAgdmFyIGFwbHVzT2JqID0gcmVxdWlyZSgnLi9hcGx1c19taW5pJykucnVuLmNyZWF0ZSh7XG4gICAgbG9nQ29uZmlnOiBsb2dDb25maWdcbiAgfSk7XG4gIGZvciAodmFyIGsgaW4gYXBsdXNPYmopIHtcbiAgICBhcGx1c1trXSA9IGFwbHVzT2JqW2tdO1xuICB9XG4gIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTLCBhcGx1cyk7XG4gIHZhciBtc2dBcnIgPSBbYXBsdXNTdGF0aWMuQVBMVVMgKyAnUmVhZHknLCBhcGx1c1N0YXRpYy5DT01QTEVURV07XG4gIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNnQXJyKTtcbiAgdXRpbFB1YnN1Yi5kb0NhY2hlUHVicyhtc2dBcnIpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2FwaS9tYWluX21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiBkZXNjcmlwdGlvblxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbFB1YnN1YiA9IHJlcXVpcmUoJ0B1dGlscy91dGlsUHVic3ViJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgUmVkdWNlciA9IHJlcXVpcmUoJ0Bjb3JlL1JlZHVjZXInKTtcbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJy4uL2xpYl9tZXRhL21ldGFJbmZvTWluaScpO1xudmFyIGlzVHJpdmVyID0gcmVxdWlyZSgnQHV0aWxzL2lzVHJpdmVyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgdXRpbEV2ZW50TGltaXQgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEV2ZW50TGltaXQnKTtcblxuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xudmFyIF9nZXRQYWdlU3BtID0gLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG4gIGlmIChteSAmJiBteS5jYWxsICYmIHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG15LmNhbGwoJ2hhbmRsZUxvZ2dpbmdBY3Rpb24nLCB7XG4gICAgICAndHlwZSc6ICdiZWhhdmlvcicsXG4gICAgICAnc3ViVHlwZSc6IG9wdHMuc3ViVHlwZVxuICAgIH0sIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgIHZhciBycyA9IHt9O1xuICAgICAgcnNbb3B0cy5zcG1UeXBlXSA9IHJlc1tvcHRzLnNwbVR5cGVdO1xuICAgICAgY2FsbGJhY2socnMpO1xuICAgIH0pO1xuICB9XG59O1xuXG52YXIgaXNQYWdlRGlzQXBwZWFyID0gdHJ1ZTtcbnZhciBpc1BhZ2VBcHBlYXIgPSBmYWxzZTtcblxudmFyIHJ1biA9IEJhc2UuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIEdFVCDor7fmsYLkuIDkuKrlm77niYflnLDlnYDvvIzlkJHmnI3liqHlmajlj5HpgIHmiZPngrlcbiAgICpcbiAgICogQHBhcmFtIHVybCB7U3RyaW5nfVxuICAgKiBAcGFyYW0gW2RhdGFTdHJdIHtTdHJpbmcgfHwgT2JqZWN0fVxuICAgKiBAcGFyYW0gW21ldGhvZF0ge1N0cmluZ30gIC8vIFBPU1QgT1IgR0VUXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG4gIF9zZW5kOiBmdW5jdGlvbiAodXJsLCBkYXRhLCBtZXRob2QsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgLy8gdXJsID0gdXRpbC5jYW4yaHR0cHModXJsKTtcbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdvYmplY3QnICYmIG1ldGhvZCA9PT0gJ1BPU1QnKSB7XG4gICAgICBtaW5pLnJlcXVlc3QodXJsLCB7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBkYXRhVHlwZTogJ2Jhc2U2NCdcbiAgICAgIH0sIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbWluaS5yZXF1ZXN0KHVybCArICc/JyArIGRhdGEsIHtcbiAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgIGRhdGFUeXBlOiAnYmFzZTY0J1xuICAgICAgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdXJsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC5LiA5Liq5Y+v6KeG5YyW6YWN572u5L+h5oGv77yM5ZCR5pyN5Yqh5Zmo5Y+RXG4gICAqXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICovXG4gIF9yZXF1ZXN0VlRDb25maWc6IGZ1bmN0aW9uKHVybCwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spIHtcbiAgICAvLyBpZiAodXJsLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAvLyAgIC8vIHVybCA9IGFwbHVzU3RhdGljLkhUVFBTICsgdXJsO1xuICAgIC8vICAgdmFyIHByb3RvY2FsID0gYXBsdXNTdGF0aWMuSFRUUFM7XG4gICAgLy8gICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHVybCkpIHtcbiAgICAvLyAgICAgcHJvdG9jYWwgPSAnaHR0cDonO1xuICAgIC8vICAgfVxuICAgIC8vICAgdXJsID0gcHJvdG9jYWwgKyB1cmw7XG4gICAgLy8gfVxuICAgIG1pbmkucmVxdWVzdCh1cmwsIHsgbWV0aG9kOiAnR0VUJyxkYXRhVHlwZTonanNvbicgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHRVQg6K+35rGC6L+c56iL6YWN572u77yM5ZCR5pyN5Yqh5Zmo5Y+RXG4gICAqIEBwYXJhbSB1cmwge1N0cmluZ31cbiAgICogKi8gXG4gIF9yZXF1ZXN0UmVtb3RlQ29uZmlnOiBmdW5jdGlvbih1cmwsIHN1Y2Nlc3NDYWxsYmFjaywgZmFpbHVyZUNhbGxiYWNrKSB7XG4gICAgLy8gaWYgKHVybC5pbmRleE9mKCcvLycpID09PSAwKSB7XG4gICAgLy8gICAvLyB1cmwgPSBhcGx1c1N0YXRpYy5IVFRQUyArIHVybDtcbiAgICAvLyAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgIC8vICAgaWYgKC8oXFxkK1xcLil7Myx9XFxkKy8udGVzdCh1cmwpKSB7XG4gICAgLy8gICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICAvLyAgIH1cbiAgICAvLyAgIHVybCA9IHByb3RvY2FsICsgdXJsO1xuICAgIC8vIH1cbiAgICBtaW5pLnJlcXVlc3QodXJsLCB7IG1ldGhvZDogJ0dFVCcgfSwgc3VjY2Vzc0NhbGxiYWNrLCBmYWlsdXJlQ2FsbGJhY2spO1xuICB9LFxuICAvKipcbiAgICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuICAgKiAgIGNoZWNrc3VtOiAxMTExMTExMSwgICAvLyDmoLnmja5zcG1hLHNwbWLoh6rliqjnlJ/miJDnmoTkuIDkuKrlrZfnrKbkuLJcbiAgICogICBpc19hdXRvOiB0cnVlL2ZhbHNl77yMIC8vIOagh+ivhuaYr+WQpuiHquWKqOaJk+eCue+8jOm7mOiupOS4unRydWXvvIzljZXpobXlupTnlKjpnIDopoHkvKBmYWxzZVxuICAgKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgICAvLyDlsIbkvJrkvZPnjrDlnKhzcG1i5L2N5LiKXG4gICAqICAgZ29rZXk6ICcnLCAgICAgICAgICAgIC8vIOeUqOaIt+iHquWumuS5ieWPguaVsO+8iOWQkeS4i+WFvOWuue+8jFRPRE/lkI7nu63kuIvmjonvvIlcbiAgICogfVxuICAgKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGE6IHtcbiAgICogICByZWZlcnJlcjogJ2h0dHA6Ly93d3cudGFvYmFvLmNvbScgICAvLyDlsIbkvJrmm7/mjaJwduivt+axgueahHByZeWPguaVsFxuICAgKiAgIHh4eDE6ICd2dnYxJyxcbiAgICogICB4eHgyOiAndnZ2MicsXG4gICAqICAgeHh4TjogJ3Z2dk4nLFxuICAgKiB9ICAgLy8g5ZCE56eN6Ieq5a6a5LmJcHblj4LmlbBcbiAgICovXG4gIF9zZW5kUFY6IGZ1bmN0aW9uIChjb25maWcsIHVzZXJkYXRhKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblxuICAgIGlmIChjb25maWcucGFnZU5hbWUpIHtcbiAgICAgIGFwbHVzLl9zZXRNZXRhSW5mbyhhcGx1c1N0YXRpYy5BUExVUyArICctcGFnZW5hbWUnLCBjb25maWcucGFnZU5hbWUpO1xuICAgIH1cbiAgICB2YXIgcmVkdWNlciA9IG5ldyBSZWR1Y2VyKCk7XG4gICAgY29uZmlnLnJlY29yZFR5cGUgPSAnUFYnOyAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICBpZiAoIWNvbmZpZy5tZXRob2QpIHtcbiAgICAgIGNvbmZpZy5tZXRob2QgPSAnR0VUJztcbiAgICB9XG4gICAgdmFyIHB2ID0gYXBsdXMubG9nQ29uZmlnLnB2O1xuICAgIHJlZHVjZXIucnVuKHtcbiAgICAgIHBsdWdpbnM6IHB2LnBsdWdpbnMsXG4gICAgICBjb250ZXh0OiBjbG9uZURlZXAocHYuY29udGV4dCkgLy8g6Ziy5q2i5rqQ6YWN572u6KKr5rGh5p+TXG4gICAgfSwge1xuICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICB1c2VyZGF0YTogdXNlcmRhdGEgfHwge30sXG4gICAgICBwdWJzdWJUeXBlOiAncHYnLFxuICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3B2LFxuICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnXG4gICAgfSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiBmuWQiOS4iuaKpeS7pOeureaXpeW/l1xuICAgKlxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IGxvZ2tlee+8iOW/heWhq++8iVxuICAgKiBAcGFyYW1zIHtTdHJpbmd9IGdta2V577yI5b+F5aGr77yJIOaemuS4vuWAvO+8miBDTEsg5ZKMIEVYUFxuICAgKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gZ29rZXlz77yI5b+F5aGr77yJ5YaF572u55qE5a+56LGh5Y+C5pWw5qC85byP5aaC77yaXG4gICAqICBbe1xuICAgKiAgICBcImV4YXJnc1wiOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDkuIrmiqXnmoToh6rlrprkuYnlj4LmlbDvvIzlhoXlrrnlnYfkuLrlj6/pgInvvIzlpoLml6Doh6rlrprkuYnlj4LmlbDliJnkvKDnqbrlr7nosaFcbiAgICogICAgICBcIl93XCI6IDM3NSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X5a695bqmXG4gICAqICAgICAgXCJfaFwiOiAxODgsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOabneWFieaooeWdl+mrmOW6plxuICAgKiAgICAgIFwiX3hcIjogMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDmm53lhYnmqKHlnZfmqKrlnZDmoIdcbiAgICogICAgICBcIl95XCI6IDg3LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ5qih5Z2X57q15Z2Q5qCHXG4gICAqICAgICAgXCJfcmF0ZVwiOiBcIjEuMDBcIiwgICAgICAgICAgICAgICAgICAgICAgLy8g5pud5YWJ6Z2i56ev5q+U5L6LXG4gICAqICAgICAgXCJfdmlld2FiaWxpdHlcIjogXCJpbnRlcnNlY3Rpb25cIiwgICAgICAgLy8g5pud5YWJ5pa55byPIGludGVyc2VjdGlvbiDmiJYgZmlsbHdpbmRvd1xuICAgKiAgICAgIC8vIOmZpOS6huS4iui/sOS/neeVmeWPguaVsOWklueahOWFtuS7luWPguaVsGtleS12YWx1ZeiHquihjOWumuS5ie+8mlxuICAgKiAgICAgIFwieW91cktleTFcIjogXCJ5b3VyVmFsdWUxXCIsICAgICAgICBcbiAgICogICAgICBcInlvdXJLZXkyXCI6IFwiJUU0JUI4JUFEJUU1JTlCJUJEXCIgICAgICAvLyDlpoLkuLrkuK3mlofvvIzliJnpnIDoh6rooYznvJbnoIFcbiAgICogICAgICAuLi4uLi5cbiAgICogICAgfSxcbiAgICogICAgXCJzY21cIjogXCJhLmIuYy5kXCIsICAgICAgICAgICAgICAgICAgICAgICAvLyBzY23kuLrlj6/pgInlj4LmlbDvvIzlpoLml6DliJnkvKDnqbrlgLxcbiAgICogICAgXCJzcG1cIjogXCJzcG1hLnNwbWIuc3BtYy5zcG1kXCIsICAgICAgICAgICAvLyBzcG3kuLrlv4XpgInlj4LmlbDvvIzkvb/nlKjmoIflh4bnmoTlm5vmrrXlvI9cbiAgICogICAgXCJhcGx1c0NvbnRlbnRJZFwiOiBcIlwiICAgICAgICAgICAgICAgICAgICAvLyDkv53nlZnlrZfmrrXvvIzmmoLml7bkuI3pnIDopoHkvKBcbiAgICogIH1dXG4gICAqIEBwYXJhbXMge1N0cmluZ30gbWV0aG9k77yI5Y+v6YCJ77yJICAgICAgICAgICAgICAvLyDmnprkuL7lgLzvvJogR0VU5ZKMUE9TVO+8jOm7mOiupOS9v+eUqFBPU1TmlrnlvI/kuIrmiqVcbiAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNiICAgICAgICAgICAgICAgICAgICAgIC8vIOS/neeVmeWxnuaAp++8jOaaguaXtuS4jemcgOimgeS8oFxuICAgKi9cbiAgX2NvbWJpbmVSZWNvcmQ6IGZ1bmN0aW9uKGxvZ2tleSwgZ21rZXksIGdva2V5cywgbWV0aG9kKSB7XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIHZhciBFWFAgPSAnRVhQJztcbiAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpICYmIChnbWtleSA9PT0gRVhQIHx8IGdta2V5ID09PSAnQ0xLJykpIHtcbiAgICAgIGlmIChpc0FycmF5KGdva2V5cykpIHtcbiAgICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgICBtZXRob2QgPSAnUE9TVCc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVzZXJkYXRhID0gW107XG4gICAgICAgIHZhciBzZW5kdG9teSA9ICd0cnVlJztcbiAgICAgICAgZ29rZXlzLmZvckVhY2goZnVuY3Rpb24odil7XG4gICAgICAgICAgdXNlcmRhdGEucHVzaCh7XG4gICAgICAgICAgICBleGFyZ3M6IHR5cGVvZiB2LmV4YXJncyA9PT0gJ29iamVjdCcgPyB2LmV4YXJncyA6IHt9LFxuICAgICAgICAgICAgc2NtOiB2LnNjbSxcbiAgICAgICAgICAgIHNwbTogdi5zcG0sXG4gICAgICAgICAgICBhcGx1c0NvbnRlbnRJZDogdi5hcGx1c0NvbnRlbnRJZCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAodi5fYXBsdXNfc2VuZHRvbXkgPT09ICdmYWxzZScgJiYgc2VuZHRvbXkgPT09ICd0cnVlJykge1xuICAgICAgICAgICAgc2VuZHRvbXkgPSAnZmFsc2UnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBfZ29rZXlzID0gW107XG4gICAgICAgIF9nb2tleXMucHVzaCgoZ21rZXkgPT09IEVYUCA/ICdleHBkYXRhPScgOiAnY2xrZGF0YT0nKSArIEpTT04uc3RyaW5naWZ5KHVzZXJkYXRhKSk7XG4gICAgICAgIF9nb2tleXMucHVzaChnbWtleSA9PT0gRVhQID8gJ19pc19hdXRvX2V4cD0xJyA6ICdfaXNfYXV0b19jbGs9MScpO1xuICAgICAgICBfZ29rZXlzLnB1c2goJ19ldmVudFR5cGU9Y3VzdG9tJyk7XG4gICAgICAgIF9nb2tleXMucHVzaCgnX21ldGhvZD0nICsgbWV0aG9kKTtcbiAgICAgICAgX2dva2V5cy5wdXNoKCdfcGtnU2l6ZT0nICsgZ29rZXlzLmxlbmd0aCk7XG4gICAgICAgIGlmIChzZW5kdG9teSA9PT0gJ2ZhbHNlJykge1xuICAgICAgICAgIF9nb2tleXMucHVzaCgnX2FwbHVzX3NlbmR0b215PWZhbHNlJyk7XG4gICAgICAgIH1cbiAgICAgICAgYXBsdXMucmVjb3JkKGxvZ2tleSwgZ21rZXksIF9nb2tleXMuam9pbignJicpLCBtZXRob2QpOyAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3R5cGUgb2YgZ29rZXlzIG11c3QgYmUgQXJyYXlPYmplY3QhJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2Fybignb25seSBzdXBwb3J0IEVYUCBvciBDTEsgbG9nIHRvIGNvbWJpbGUgcmVjb3JkIScpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICog5Y+R6YCB6buE6YeR5Luk566t5omT54K5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsb2drZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9IGdta2V5XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBnb2tleVxuICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIOivt+axguaWueazleS4uiBQT1NUIG9yIEdFVFxuICAgKiBAcGFyYW0ge1N0cmluZ30gY2JcbiAgICovXG4gIF9yZWNvcmQ6IGZ1bmN0aW9uIChsb2drZXksIGdta2V5LCBnb2tleSwgbWV0aG9kLCBjYikge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICBnb2tleSA9IG1ldGFJbmZvLmdldFVzZXJJbmplY3RHb2tleSh7XG4gICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgIGdta2V5OiBnbWtleSxcbiAgICAgIGdva2V5OiBnb2tleVxuICAgIH0pO1xuICAgIGxvZ2tleSA9IGxvZ2tleSArICcnO1xuICAgIGlmIChsb2drZXkgJiYgbG9na2V5LmluZGV4T2YoJy8nKSAhPT0gMCAmJiBhcGx1cy5nbG9iYWxDb25maWcuaXNBbGkpIHtcbiAgICAgIGxvZ2tleSA9ICcvJyArIGxvZ2tleTtcbiAgICB9XG4gICAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpO1xuICAgIHZhciByZWR1Y2VyID0gbmV3IFJlZHVjZXIoKTtcbiAgICB2YXIgaGpsaiA9IGFwbHVzLmxvZ0NvbmZpZy5oamxqO1xuICAgIGlmICghaXNBbGkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCd5ei0tLS0tYWJjJywgdXRpbEV2ZW50TGltaXQuY2FuVG9TZW5kSEpMSihnb2tleSwgbG9na2V5KSk7XG4gICAgICBcbiAgICAgIHV0aWxFdmVudExpbWl0LmNhblRvU2VuZEhKTEooZ29rZXksIGxvZ2tleSkgJiYgcmVkdWNlci5ydW4oe1xuICAgICAgICBwbHVnaW5zOiBoamxqLnBsdWdpbnMsXG4gICAgICAgIGNvbnRleHQ6IGNsb25lRGVlcChoamxqLmNvbnRleHQpIC8vIOmYsuatoua6kOmFjee9ruiiq+axoeafk1xuICAgICAgfSwge1xuICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICByZWNvcmRUeXBlOiAnQ09NTU9OX0hKTEonLCAvLyDliKTmlq3ljZXlj4zlj5HnlKjnmoTvvIzogIPomZHnp7vpmaRcbiAgICAgICAgICBtZXRob2Q6IG1ldGhvZCB8fCAnR0VUJ1xuICAgICAgICB9LFxuICAgICAgICB1c2VyZGF0YToge1xuICAgICAgICAgIGxvZ2tleTogbG9na2V5LFxuICAgICAgICAgIGdta2V5OiBnbWtleSxcbiAgICAgICAgICBnb2tleTogZ29rZXlcbiAgICAgICAgfSxcbiAgICAgICAgcHVic3ViVHlwZTogJ2hqbGonLFxuICAgICAgICAvLyBtZXNzYWdlRm5RdWV1ZTogZm5fYWZ0ZXJfcmVjb3JkLFxuICAgICAgICBtaWRkbGV3YXJlTWVzc2FnZUtleTogJ213X2NoYW5nZV9oamxqJ1xuICAgICAgfSwgZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2IpKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZHVjZXIucnVuKHtcbiAgICAgICAgcGx1Z2luczogaGpsai5wbHVnaW5zLFxuICAgICAgICBjb250ZXh0OiBjbG9uZURlZXAoaGpsai5jb250ZXh0KSAvLyDpmLLmraLmupDphY3nva7ooqvmsaHmn5NcbiAgICAgIH0sIHtcbiAgICAgICAgY29uZmlnOiB7XG4gICAgICAgICAgcmVjb3JkVHlwZTogJ0NPTU1PTl9ISkxKJywgLy8g5Yik5pat5Y2V5Y+M5Y+R55So55qE77yM6ICD6JmR56e76ZmkXG4gICAgICAgICAgbWV0aG9kOiBtZXRob2QgfHwgJ0dFVCdcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcmRhdGE6IHtcbiAgICAgICAgICBsb2drZXk6IGxvZ2tleSxcbiAgICAgICAgICBnbWtleTogZ21rZXksXG4gICAgICAgICAgZ29rZXk6IGdva2V5XG4gICAgICAgIH0sXG4gICAgICAgIHB1YnN1YlR5cGU6ICdoamxqJyxcbiAgICAgICAgLy8gbWVzc2FnZUZuUXVldWU6IGZuX2FmdGVyX3JlY29yZCxcbiAgICAgICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfaGpsaidcbiAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGNiKSkge1xuICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgXG4gIGdldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgdmFyIF8kID0gYXBsdXMuXyQgfHwge307XG4gICAgdmFyIHNwbSA9IF8kLnNwbSB8fCB7fTtcbiAgICB2YXIgZGF0YSA9IHNwbS5kYXRhIHx8IHt9O1xuICAgIHJldHVybiBbZGF0YS5hLCBkYXRhLmJdO1xuICB9LFxuXG4gIC8qKlxuICAgKiDmm7TmlrDpobXpnaLnmoQgYeOAgWIg5L2NXG4gICAqIOmcgOaxguWPguinge+8mmh0dHA6Ly9naXRsYWIuYWxpYmFiYS1pbmMuY29tL2FsaWxvZy9rYi9pc3N1ZXMvMTM3XG4gICAqIEBwYXJhbSBhIHtTdHJpbmd9XG4gICAqIEBwYXJhbSBbYl0ge1N0cmluZ31cbiAgICogQHBhcmFtIFtjYl0ge0Z1bmN0aW9ufVxuICAgKi9cbiAgX3NldFBhZ2VTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0ge307XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGNiO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9iaiA9IGFyZ3NbMF07XG4gICAgICBjYiA9IGFyZ3NbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iai5zcG1DbnQgPSBbYXJnc1swXSwgYXJnc1sxXSwgJzAnLCAnMCddLmpvaW4oJy4nKTtcbiAgICAgIGNiID0gYXJnc1syXTtcbiAgICB9XG4gICAgdmFyIG1zZ3M7XG4gICAgaWYgKCFvYmouc3BtQ250ICYmICFvYmouc3BtVXJsICYmIG1ldGFJbmZvLmdldE1ldGFJbmZvKCdwYWdlQ29uZmlnJykpIHtcbiAgICAgIG1zZ3MgPSBbJ2NsZWFyUGFnZVNQTSddO1xuICAgICAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhtc2dzKTtcbiAgICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtcyBvYmoge09iamVjdH0ge1xuICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuICAgICAgICogfVxuICAgICAgICovXG4gICAgICBtc2dzID0gWydzZXRQYWdlU1BNJywgb2JqXTtcbiAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2cobXNncyk7XG4gICAgICB1dGlsUHVic3ViLmRvQ2FjaGVQdWJzKG1zZ3MpO1xuICAgIH1cbiAgICB2YXIgY2FsbGJhY2sgPSB0eXBlb2YgY2IgPT09ICdmdW5jdGlvbicgPyBjYiA6IGZ1bmN0aW9uICgpIHt9O1xuICAgIGNhbGxiYWNrKG1zZ3MpO1xuICB9LFxuXG5cbiAgLyoqXG4gICAqIOWKqOaAgemFjee9rm1ldGFcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtcbiAgICogQHBhcmFtIHtPYmplY3R9IHZcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdHMge1xuICAgKiAgIGZyb206ICdhcHBlbmRNZXRhSW5mbydcbiAgICogfVxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cbiAgX3NldE1ldGFJbmZvOiBmdW5jdGlvbihhcmcxLCB2YWx1ZSkge1xuICAgIHJldHVybiBtZXRhSW5mby5fc2V0TWV0YUluZm8oYXJnMSwgdmFsdWUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2FwbHVzanMvcHJvamVjdC9hcGx1c19jbG91ZCMzMzJkZTYyY1xuICAgKiDkuI3mlK/mjIF1cGRhdGVQYWdlUHJvcGVydGllc++8jOaUueeUqOabv+S7o+aWueahiHNldE1ldGFJbmZvXG4gICAqIEBwYXJhbXMge1N0cmluZ30g6YCP5LyganNvbuWtl+espuS4su+8jOW/hemhu+aYr+Wtl+espuS4slxuICAgKi9cbiAgX3VwZGF0ZVBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYXJhbXMpe1xuICAgIGlmICh0eXBlb2YgcGFyYW1zID09PSAnb2JqZWN0Jykge1xuICAgICAgLy8g5paw5a655ZmoVHJpdmVy6YeH55SodXBkYXRlUGFnZVByb3BlcnRpZXNcbiAgICAgIGlmIChpc1RyaXZlcigpKSB7XG4gICAgICAgIG15LnJlcG9ydEFuYWx5dGljcygndXBkYXRlUGFnZVByb3BlcnRpZXMnLCBwYXJhbXMpO1xuICAgICAgfSBlbHNlIGlmKG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCk9PT0nbXknKXtcbiAgICAgICAgbXkuY2FsbCgncmVwb3J0RGF0YScse1xuICAgICAgICAgIHNwbURldGFpbDpwYXJhbXMsXG4gICAgICAgICAgaWdub3JlRGVmYXVsdFBhZ2VNb25pdG9yOnRydWVcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyDlkJHkuIvlhbzlrrnvvIzkuI3nrqHmgI7kuYjmoLfpg73lvoBtZXRhSW5mb+iuvue9ruS4gOS7vVxuICAgICAgdmFyIGN1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgdmFyIHBhZ2VOYW1lID0gY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMgfHwgJ3BhZ2UnO1xuICAgICAgdmFyIGRhdGEgPSB7fTtcbiAgICAgIGRhdGFbcGFnZU5hbWVdID0gcGFyYW1zO1xuICAgICAgbWV0YUluZm8uYXBwZW5kTWV0YUluZm8oJ2FwbHVzLXBhZ2UtcHJvcGVydGllcycsIGRhdGEpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIGh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9wcm9qZWN0L2FwbHVzX2Nsb3VkIzYwMzRjMWRhXG4gICAqL1xuICBfdXBkYXRlTmV4dFBhZ2VQcm9wZXJ0aWVzOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICBpZiAobXkpIHtcbiAgICAgIHZhciBkYXRhID0ge1xuICAgICAgICB0eXBlOiAndXBkYXRlTmV4dFByb3AnLFxuICAgICAgICBldmVudElkOiAtMSxcbiAgICAgICAgZXZlbnRpZDogLTEsXG4gICAgICAgIG5hbWU6ICcnLFxuICAgICAgICBwYWdlTmFtZTogJycsXG4gICAgICAgIGNvbU5hbWU6ICcnLFxuICAgICAgICBhcmcxOiAnJyxcbiAgICAgICAgYXJnMjogJycsXG4gICAgICAgIGFyZzM6ICcnLFxuICAgICAgICBwYXJhbTogcGFyYW1zLFxuICAgICAgICBwYXJhbXM6IHBhcmFtc1xuICAgICAgfTtcbiAgICAgIGlmIChteS5jYWxsVXNlclRyYWNrKSB7XG4gICAgICAgIG15LmNhbGxVc2VyVHJhY2soJ2NvbW1pdHV0JywgZGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKG15LnJlcG9ydEFuYWx5dGljcykge1xuICAgICAgICBteS5yZXBvcnRBbmFseXRpY3MoJ2VudGVyJywgZGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUbyBhcHBlbmQgYG1ldGFgIHRhZyBpZiB0aGVyZSdzIG5vbmUgYXBsdXMgbWV0YS5cbiAgICogT3RoZXJ3aXNlLCBtZXJnZSBjb250ZW50IGF0dHJpYnV0ZXM6XG4gICAqICAtIGBBcnJheS5wcm90b3R5cGUuY29uY2F0YCBjYWxsZWQgb24gQXJyYXkgdmFsdWVzLlxuICAgKiAgLSBgT2JqZWN0LmFzc2lnbmAgY2FsbGVkIG9uIE9iamVjdCB2YWx1ZXMuXG4gICAqICBAcGFyYW0ga1xuICAgKiAgQHBhcmFtIHZcbiAgICovXG4gIF9hcHBlbmRNZXRhSW5mbzogbWV0YUluZm8uYXBwZW5kTWV0YUluZm8sXG5cbiAgLyoqXG4gICAqIGdldCBtZXRhSW5mbyBieSBrZXlcbiAgICogQHBhcmFtIHtTdHJpbmd9XG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG4gIGdldE1ldGFJbmZvOiBmdW5jdGlvbiAoaykge1xuICAgIHJldHVybiBtZXRhSW5mby5nZXRNZXRhSW5mbyhrKTtcbiAgfSxcblxuICAvLyDmt7HluqblhYvpmobvvIzku47moLjlv4PlupPmmrTpnLLlh7rljrvkvpthcGx1c0pT5o+S5Lu25L2/55SoXG4gIGNsb25lRGVlcDogY2xvbmVEZWVwLFxuICAvKipcbiAgICog5aaC5p6c5a655Zmo5a6e546w5LqGYXBwZWFy44CBZGlzYXBwZWFy77yM5L2G5Lia5Yqh5Y+I5oOz5omL5Yqo5o6n5Yi25omT54K555Sf5ZG95ZGo5pyf5pe25L2/55SoXG4gICAqXG4gICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cbiAgICovXG4gIF9za2lwUGFnZTogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKCkge1xuICAgIC8vIFVzZXJUcmFjay5za2lwUGFnZSgpO1xuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCdza2lwUGFnZScpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIOWmguaenOWuueWZqOacquaPkOS+m2FwcGVhcuOAgWRpc2FwcGVhcuaXtumcgOimgeS4muWKoeaJi+WKqOiwg+eUqFxuICAgKlxuICAgKiBAcmV0dXJuIHtVbmRlZmluZWR9XG4gICAqL1xuICBfcGFnZUFwcGVhcjogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24oKXtcbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjayAmJiBpc1BhZ2VEaXNBcHBlYXIpIHtcbiAgICAgIGlzUGFnZURpc0FwcGVhciA9IGZhbHNlO1xuICAgICAgaXNQYWdlQXBwZWFyID0gdHJ1ZTtcbiAgICAgIG15LmNhbGxVc2VyVHJhY2soJ3BhZ2VBcHBlYXInKTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiDlpoLmnpzlrrnlmajmnKrmj5DkvpthcHBlYXLjgIFkaXNhcHBlYXLml7bpnIDopoHkuJrliqHmiYvliqjosIPnlKhcbiAgICpcbiAgICogQHJldHVybiB7VW5kZWZpbmVkfVxuICAgKi9cbiAgX3BhZ2VEaXNhcHBlYXI6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKCl7XG4gICAgaWYgKG15ICYmIG15LmNhbGxVc2VyVHJhY2sgJiYgaXNQYWdlQXBwZWFyKSB7XG4gICAgICBpc1BhZ2VEaXNBcHBlYXIgPSB0cnVlO1xuICAgICAgaXNQYWdlQXBwZWFyID0gZmFsc2U7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCdwYWdlRGlzYXBwZWFyJyk7XG4gICAgfVxuICB9LFxuICBfdXBkYXRlUGFnZVV0cGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICBpZiAoIXBhcmFtcykge1xuICAgICAgcGFyYW1zID0ge307XG4gICAgfVxuICAgIGlmIChteSAmJiBteS5jYWxsVXNlclRyYWNrKSB7XG4gICAgICBteS5jYWxsVXNlclRyYWNrKCd1cGRhdGVQYWdlVXRwYXJhbScsIHtcbiAgICAgICAgJ3V0UGFyYW1Kc29uJzogSlNPTi5zdHJpbmdpZnkocGFyYW1zKVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIF91cGRhdGVOZXh0UGFnZVV0cGFyYW06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhcmFtcyl7XG4gICAgaWYgKCFwYXJhbXMpIHtcbiAgICAgIHBhcmFtcyA9IHt9O1xuICAgIH1cbiAgICBpZiAobXkgJiYgbXkuY2FsbFVzZXJUcmFjaykge1xuICAgICAgbXkuY2FsbFVzZXJUcmFjaygndXBkYXRlTmV4dFBhZ2VVdHBhcmFtJywge1xuICAgICAgICAndXRQYXJhbUpzb24nOiBKU09OLnN0cmluZ2lmeShwYXJhbXMpXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIOS7heaJi+a3mO+8iFY5LjEwLjDvvInlsI/nqIvluo/mlK/mjIFcbiAgICogQHBhcmFtcyB7T2JqZWN0fSBwcm9wZXJ0aWVzXG4gICAqIEByZXR1cm4ge1VuZGVmaW5lZH1cbiAgICovXG4gIF91cGRhdGVTZXNzaW9uUHJvcGVydGllczogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gZnVuY3Rpb24gKHByb3BlcnRpZXMpIHtcbiAgICAvLyBpZiAobXkgJiYgbXkucmVwb3J0QW5hbHl0aWNzICYmIHR5cGVvZiBwcm9wZXJ0aWVzID09PSAnb2JqZWN0Jykge1xuICAgIC8vICAgbXkucmVwb3J0QW5hbHl0aWNzKCd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsIHByb3BlcnRpZXMpO1xuICAgIC8vIH1cbiAgICBpZiAobXkgJiYgbXkuY2FsbCAmJiB0eXBlb2YgcHJvcGVydGllcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG15LmNhbGwoJ2hhbmRsZUxvZ2dpbmdBY3Rpb24nLCB7XG4gICAgICAgIHR5cGU6ICdiZWhhdmlvcicsXG4gICAgICAgIHN1YlR5cGU6ICd1cGRhdGVTZXNzaW9uUHJvcGVydGllcycsXG4gICAgICAgIGV4dERhdGE6IHByb3BlcnRpZXMsXG4gICAgICB9KTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiDku4XmiYvmt5jvvIhWOS45LjDvvInlsI/nqIvluo/mlK/mjIFcbiAgICogQHBhcmFtcyB7RnVuY3Rpb259IGNhbGxiYWNrOiB7c3BtVXJsOiAnJ31cbiAgICovXG4gIF9nZXRQYWdlU3BtVXJsOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBfZ2V0UGFnZVNwbSh7XG4gICAgICBzdWJUeXBlOiAnZ2V0UGFnZVNwbVVybCcsXG4gICAgICBzcG1UeXBlOiAnc3BtVXJsJ1xuICAgIH0sIGNhbGxiYWNrKTtcbiAgfSxcblxuICAvKipcbiAgICog5LuF5omL5reY77yIVjkuOS4w77yJ5bCP56iL5bqP5pSv5oyBXG4gICAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFjayA6IHtzcG1QcmU6ICcnfVxuICAgKi9cbiAgX2dldFBhZ2VTcG1QcmU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIF9nZXRQYWdlU3BtKHtcbiAgICAgIHN1YlR5cGU6ICdnZXRQYWdlU3BtUHJlJyxcbiAgICAgIHNwbVR5cGU6ICdzcG1QcmUnXG4gICAgfSwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiDorr7nva5QYWdlTmFtZSBcbiAgKi9cbiAgX3NldFBhZ2VOYW1lOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBmdW5jdGlvbihwYWdlTmFtZSwgcGF0aCkge1xuICAgIGlmICghcGFnZU5hbWUpIHtcbiAgICAgIHVsb2coKS53KCdzZXRQYWdlTmFtZSBmYWlsZWQ6ICcgKyAnIHBhZ2VOYW1lPScgKyBwYWdlTmFtZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBjdXJQYXRoID0gcGF0aCB8fCBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcbiAgICBcbiAgICB2YXIgcGFnZU1ldGEgPSBjbG9uZURlZXAobWV0YUluZm8uZ2V0TWV0YUluZm8oJ3BhZ2VDb25maWcnKSB8fCB7fSk7XG4gICAgcGFnZU1ldGFbY3VyUGF0aF0gPSBwYWdlTmFtZTtcbiAgICBtZXRhSW5mby5hcHBlbmRNZXRhSW5mbygncGFnZUNvbmZpZycsIHBhZ2VNZXRhKTtcbiAgfSxcblxuICAvKipcbiAgICog6I635Y+WUGFnZU5hbWVcbiAgKi9cbiAgZ2V0UGFnZU5hbWU6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICByZXR1cm4gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUocGF0aCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIOiOt+WPluWFg+e0oOeahHNwbVxuICAgKiAqLyBcbiAgX2dldEVsZW1lbnRTUE06IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovIGZ1bmN0aW9uKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB2YXIgc3BtQiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgJyc7IFxuXG4gICAgaWYgKHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YXIgdHJhY2tlclBhcmFtcyA9IHRhcmdldC5kYXRhc2V0ICYmIHRhcmdldC5kYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwgJyc7XG4gICAgICB2YXIgc3BtQ0QgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04odHJhY2tlclBhcmFtcyk7XG4gICAgICByZXR1cm4gW3NwbUIsIHNwbUNELnNwbUMsIHNwbUNELnNwbURdLmpvaW4oJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgdmFyIGF1dG9fY2xrX21ldGFpbmZvID0gbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykgfHwgW107XG4gICAgICB2YXIgYXV0b19leHBfbWV0YWluZm8gPSBtZXRhSW5mby5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKSB8fCBbXTtcbiAgICAgIHZhciB0YXJnZXRTcG07XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgLy/oh6rliqjngrnlh7vkvJjlhYjnuqfmm7Tpq5hcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19jbGtfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIHZhciBjbGtfaW5mbyA9IGF1dG9fY2xrX21ldGFpbmZvW2ldO1xuICAgICAgICAgIGlmIChjbGtfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgY2xrX2luZm8uc3BtQywgY2xrX2luZm8uc3BtRF0uam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgZm9yKGkgPSAwOyBpIDwgYXV0b19leHBfbWV0YWluZm8ubGVuZ3RoOyBpKyspe1xuICAgICAgICAgIHZhciBleHBfaW5mbyA9IGF1dG9fZXhwX21ldGFpbmZvW2ldO1xuICAgICAgICAgIGlmIChleHBfaW5mby5jc3NTZWxlY3RvciA9PT0gdGFyZ2V0KSB7XG4gICAgICAgICAgICB0YXJnZXRTcG0gPSBbc3BtQiwgZXhwX2luZm8uc3BtQywgZXhwX2luZm8uc3BtRF0uam9pbignLicpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9OyBcblxuICAgICAgICB2YXIgZWxlbWVudHMgPSBjdHguY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbCh0YXJnZXQpO1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICBkYXRhc2V0OiB0cnVlLFxuICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICBpZiAocmV0ICYmIHJldC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IHJldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKHRhcmdldFNwbSArICdfJyArIGkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXN1bHQpOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KS5leGVjKCk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHVsb2coKS53KCdjdXJyZW50IG1pbmlhcHAgcGxhdGZvcm0gZG9lcyBub3Qgc3VwcG9ydCBkb20gZWxlbWVudCBxdWVyeSwgZXJybXNnOiAnLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiDkuZ3plKHpnIDmsYLvvJpodHRwczovL3l1cXVlLmFudGZpbi1pbmMuY29tL2x4bG43aC9idnp5bXIvYWtiNDlmI2hQYVhMXG4gICAqIGFwcOWUpOi1t+S6i+S7tuaOpeWPo++8jOWunumZheWwseaYr3JlY29yZFxuICAgKi9cbiAgX3JlY29yZEFwcExpbms6IGZ1bmN0aW9uIChnb2tleSwgbWV0aG9kLCBjYikge1xuICAgIGlmKCFnb2tleS50YXJnZXRBcHBLZXkpIHtcbiAgICAgIHVsb2coKS53KCdzZW5kICQkX2FwcF9saW5rIGZhaWxlZDogdGFyZ2V0QXBwS2V5IGlzIG51bGwnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICAgIHJldHVybiBhcGx1cy5fcmVjb3JkKCckJF9hcHBfbGluaycsICdPVEhFUicsIGdva2V5LCBtZXRob2QsIGNiKTtcbiAgfSxcbn0pO1xuXG5leHBvcnRzLnJ1biA9IHJ1bjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX2FwaS9hcGx1c19taW5pLmpzXG4vLyBtb2R1bGUgaWQgPSA2OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuICogZGVzY3JpcHRpb25cbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbnZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIENvbXBvc2UgPSByZXF1aXJlKCdAY29yZS9jb21wb3NlJyk7XG52YXIgcGx1Z2luc0xvYWRlciA9IHJlcXVpcmUoJ0Bjb3JlL3BsdWdpbnNMb2FkZXInKTtcblxuLyoqXG4gKiBzZW5wdlxuICogQHBhcmFtIFtPYmplY3RdIGNvbmZpZzoge1xuICogICBjaGVja3N1bTogMTExMTExMTEsICAgLy8g5qC55o2uc3BtYSxzcG1i6Ieq5Yqo55Sf5oiQ55qE5LiA5Liq5a2X56ym5LiyXG4gKiAgIGlzX2F1dG86IHRydWUvZmFsc2XvvIwgLy8g5qCH6K+G5piv5ZCm6Ieq5Yqo5omT54K577yM6buY6K6k5Li6dHJ1Ze+8jOWNlemhteW6lOeUqOmcgOimgeS8oGZhbHNlXG4gKiAgIHBhZ2VfaWQ6IDEyMywgICAgICAgIC8vIOWwhuS8muS9k+eOsOWcqHNwbWLkvY3kuIpcbiAqICAgZ29rZXk6ICcnLCAgICAgICAgICAgLy8g55uu5YmN5bey57uP5aSx5pWIXG4gKiAgIHJlZmVycmVyOiAnaHR0cDovL3d3dy50YW9iYW8uY29tJyAgIC8vIOWwhuS8muabv+aNonB26K+35rGC55qEcHJl5Y+C5pWwXG4gKiB9IC8vIOWQjCBhcGx1cy5sYXVuY2jnrKzkuozkuKrlhaXlj4LigJxtYW51YWzigJ1cbiAqXG4gKiBAcGFyYW0gW09iamVjdF0gdXNlcmRhdGEgICAvLyDlkITnp43oh6rlrprkuYlwduWPguaVsFxuICpcbiAqIEBwYXJhbSBbT2JqZWN0XSBvYmogLSB7Zm5fYWZ0ZXJfcHY6IGZuX2FmdGVyX3B2LCB4eHg6IHh4eH1cbiAqXG4gKiBzdGVwMTogbG9hZGVyIHBsdWdpbnMgIG1pZGRsZXdhcmVcbiAqIHN0ZXAyOiBsb2FkZXIgZG9TZW5kUHYgbWlkZGxld2FyZVxuICogc3RlcDM6IHJ1biBtaWRkbGV3YXJlc1xuICovXG5cbnZhciBSZWR1Y2VyID0gZnVuY3Rpb24oKSB7XG59O1xuXG4vKipcbiAqIEBwYXJhbXMgT2JqZWN0IENPTkZJRyB7XG4gKiAgIGNvbnRleHQ6IHh4eCxcbiAqICAgcGx1Z2luczogeHh4IFxuICogfVxuICogQHBhcmFtcyBPYmplY3Qgb3B0cyB7XG4gKiAgIGNvbmZpZzogY29uZmlnLFxuICogICB1c2VyZGF0YTogdXNlcmRhdGEsXG4gKiAgIHB1YnN1YlR5cGU6ICdwdicgfHwgJ2hqbGonIHx8ICdwcmVwdidcbiAqICAgbWlkZGxld2FyZU1lc3NhZ2VLZXk6ICdtd19jaGFuZ2VfcHYnIHx8ICdtd19jaGFuZ2VfaGpsaicgfHwgJ213X2NoYW5nZV9wcmVwdidcbiAqICAgbWVzc2FnZUZuUXVldWU6IFtmbjEsIGZuMiAuLi5dXG4gKiB9XG4gKi9cblJlZHVjZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uIChDT05GSUcsIG9wdHMsIGNhbGxiYWNrKSB7XG4gIC8vIDHjgIFpbml0IHBsdWdpbnNcbiAgdmFyIHBsID0gbmV3IHBsdWdpbnNMb2FkZXIoKTtcbiAgcGwuaW5pdCh7XG4gICAgbWlkZGxld2FyZTogW10sXG4gICAgY29uZmlnOiBvcHRzLmNvbmZpZyxcbiAgICBwbHVnaW5zOiBDT05GSUcucGx1Z2luc1xuICB9KTtcbiAgdmFyIG1pZGRsZXdhcmUgPSBwbC5ydW4oKTtcblxuICAvLyDliJ3lp4vljJbkuIrkuIvmlofnjq/looPvvIxjb250ZXh05YaF55qEZGF0YeWwhuS8muWcqOWQhOS4quaPkuS7tuS4rei/m+ihjOi1i+WAvOaIluiAheS/ruaUue+8iOmHjeimge+8iVxuICB2YXIgY29udGV4dCA9IGlzRnVuY3Rpb24oQ09ORklHLmNvbnRleHQpID8gbmV3IENPTkZJRy5jb250ZXh0KCkgOiBDT05GSUcuY29udGV4dDtcbiAgY29udGV4dC51c2VyZGF0YSA9IG9wdHMudXNlcmRhdGE7XG4gIGNvbnRleHQubG9nZ2VyID0gdXRpbExvZ2dlci5sb2dnZXI7XG5cbiAgdmFyIGFwcCA9IHtcbiAgICBjb250ZXh0OiBjb250ZXh0LFxuICAgIHB1YnN1YjogdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnYXBsdXNfcHVic3ViJyksXG4gICAgcHVic3ViVHlwZTogb3B0cyAmJiBvcHRzLnB1YnN1YlR5cGVcbiAgfTtcblxuICB2YXIgY29tcG9zZSA9IG5ldyBDb21wb3NlKCk7XG4gIGNvbXBvc2UuY3JlYXRlKGFwcCk7XG4gIC8vIOaJp+ihjOS4remXtOS7tlxuICBjb21wb3NlLndyYXAobWlkZGxld2FyZSwgZnVuY3Rpb24oKSB7XG4gICAgYXBwLmNvbnRleHQuc3RhdHVzID0gYXBsdXNTdGF0aWMuQ09NUExFVEU7XG4gICAgaWYgKG9wdHMpIHtcbiAgICAgIGlmIChvcHRzLm1pZGRsZXdhcmVNZXNzYWdlS2V5KSB7XG4gICAgICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coW29wdHMubWlkZGxld2FyZU1lc3NhZ2VLZXksIGFwcC5jb250ZXh0XSk7ICBcbiAgICAgIH1cbiAgICAgIGlmIChvcHRzLm1lc3NhZ2VGblF1ZXVlKSB7XG4gICAgICAgIGVhY2gob3B0cy5tZXNzYWdlRm5RdWV1ZSwgZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgZm4odXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpLCBDT05GSUcpO1xuICAgICAgICB9KTsgIFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcbiAgICAgIGNhbGxiYWNrKGFwcC5jb250ZXh0KTtcbiAgICB9XG4gIH0pKCk7XG5cbn07XG5tb2R1bGUuZXhwb3J0cyA9IFJlZHVjZXI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL1JlZHVjZXIuanNcbi8vIG1vZHVsZSBpZCA9IDY5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDml6Xlv5fnsbvlt6Xlhbfpm4blkIhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEBwYXJhbXMge09iamVjdH0gbyA6e1xuICogICBsZXZlbDogJ3dhcm4vaW5mby9sb2cnIGRlZmF1bHQgaXMgd2FyblxuICogICBtc2c6ICdtc2cnXG4gKiB9XG4gKi9cbnZhciBtZXRhSW5mbyA9IHJlcXVpcmUoJ0BwL2xpYl9tZXRhL21ldGFJbmZvTWluaScpO1xudmFyIHByZWZpeCA9ICdbQVBMVVNdIC0tICc7XG5leHBvcnRzLmxvZ2dlciA9IGZ1bmN0aW9uIChvKSB7XG4gIGlmICghbykge1xuICAgIG8gPSB7fTtcbiAgfVxuICB2YXIgbGV2ZWwgPSBvLmxldmVsIHx8ICd3YXJuJztcbiAgY29uc29sZSAmJiBjb25zb2xlW2xldmVsXSAmJiBjb25zb2xlW2xldmVsXShwcmVmaXgrby5tc2cpO1xufTtcbmV4cG9ydHMubG9nID0gZnVuY3Rpb24oKXtcbiAgdmFyIGRlYnVnID0gbWV0YUluZm8gJiYgbWV0YUluZm8uZ2V0TWV0YUluZm8oJ2RlYnVnJyk7XG4gIGRlYnVnICYmIGNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsW3ByZWZpeF0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5hcHBseShhcmd1bWVudHMpKSk7XG59O1xuXG5leHBvcnRzLmRlYnVnTG9nID0gZnVuY3Rpb24obykge1xuICB2YXIgYXBsdXMgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKS5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgaWYgKGFwbHVzICYmIGFwbHVzLmFwbHVzRGVidWcpIHtcbiAgICB0aGlzLmxvZ2dlcihvKTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxMb2dnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2NvbXBvc2UuanNcbiAqIOWHveaVsOmYn+WIl+WMheijheWZqCBFeHBvc2UgY29tcG9zaXRvclxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbnZhciB1dGlsQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEFycmF5Jyk7XG4vLyB2YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG5cbmZ1bmN0aW9uIGNvbXBvc2UgKCkge307XG5cbmNvbXBvc2UucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIC8qKlxuICAgKiBjcmVhdGXlrp7pmYXkuIrmmK/lr7luZXfnmoTlsIHoo4XvvJtcbiAgICogY3JlYXRl6L+U5Zue55qE5a6e5L6L5a6e6ZmF5LiK5bCx5pivbmV35p6E6YCg5Ye655qE5a6e5L6L77ybXG4gICAqIHRoaXPljbPmjIflkJHosIPnlKjlvZPliY1jcmVhdGXnmoTmnoTpgKDlh73mlbDvvJtcbiAgICovXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpZiAodHlwZW9mIHRoaXNbbmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzO1xufTtcblxuY29tcG9zZS5wcm90b3R5cGUuY2FsbGVkTGlzdCA9IFtdO1xuXG5jb21wb3NlLnByb3RvdHlwZS5zZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oaSkge1xuICBpZiAodXRpbEFycmF5LmluZGV4b2YodGhpcy5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcbiAgICB0aGlzLmNhbGxlZExpc3QucHVzaChpKTtcbiAgfVxufTtcblxuY29tcG9zZS5wcm90b3R5cGUucmVzZXRDYWxsZWRMaXN0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY2FsbGVkTGlzdCA9IFtdO1xufTtcblxuY29tcG9zZS5wcm90b3R5cGUud3JhcCA9IGZ1bmN0aW9uKG13LCBjYWxsYmFjaykge1xuICB2YXIgY29udGV4dCA9IHRoaXM7XG4gIHZhciBjdHggPSB0aGlzLmNvbnRleHQgfHwge307XG4gIHZhciBjb21wb3NlID0gY3R4LmNvbXBvc2UgfHwge307XG4gIHZhciBtYXhUaW1lb3V0ID0gY29tcG9zZS5tYXhUaW1lb3V0IHx8IDEwICogMTAwMDtcblxuICByZXR1cm4gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgdmFyIHNpemUgPSBtdy5sZW5ndGg7IC8vIOS4remXtOS7tumYn+WIl+mVv+W6plxuICAgIHZhciBpID0gMDsgLy8g5Lit6Ze05Lu257Si5byVXG4gICAgdmFyIGogPSAwOyAvLyDkuIDkuKrmoIfor4bvvIwwLeWIneWni+eKtuaAge+8jDEt5Lit6Ze05Lu25Zue6LCD5omn6KGM5LqGXG4gICAgdmFyIHNsZWVwSGFuZGVyMTtcbiAgICB2YXIgcnVuID0gZnVuY3Rpb24oaW5kZXgsIHN0YXR1cykge1xuICAgICAgLy8gY29udGV4dC5wdWJzdWJJbmZvKGNvbnRleHQsIG13W2ldKTtcbiAgICAgIC8vIOS4remXtOS7tumYn+WIl+aJp+ihjOWujOavleWQjui/lOWbnlxuICAgICAgaWYgKGkgPT09IHNpemUpIHtcbiAgICAgICAgc3RhdGUgPSAnZG9uZSc7XG4gICAgICAgIGNvbnRleHQucmVzZXRDYWxsZWRMaXN0KCk7IC8vIOmHjee9rmNhbGxlZExpc3Tlj5jph49cbiAgICAgICAgLy8gc3RhdHVz5aaC5p6c562J5LqOZG9uZe+8jOivtOaYjuaYr+S4remAlOmAgOWHuueahOS4remXtOS7tu+8jOS4jemcgOimgeaJp+ihjOWbnuiwg1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihjYWxsYmFjaykgJiYgc3RhdHVzICE9PSBzdGF0ZSkge1xuICAgICAgICAgIGNhbGxiYWNrLmNhbGwoY29udGV4dCwgc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyVGltZW91dChzbGVlcEhhbmRlcjEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyB2YXIgY2Jfc3RhdGUgPSBudWxsO1xuICAgICAgLy8g5L+d6K+B5q+P5Liq5Lit6Ze05Lu25Y+q5Lya5omn6KGM5LiA5qyhXG4gICAgICBpZiAodXRpbEFycmF5LmluZGV4b2YoY29udGV4dC5jYWxsZWRMaXN0LCBpKSA9PT0gLTEpIHtcbiAgICAgICAgY29udGV4dC5zZXRDYWxsZWRMaXN0ICYmIGNvbnRleHQuc2V0Q2FsbGVkTGlzdChpKTtcbiAgICAgICAgaWYgKG13ICYmIG13W2ldICYmIGlzRnVuY3Rpb24obXdbaV1bMF0pKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtcyB7QXJyYXl9IG1pZGRsZXdhcmVcbiAgICAgICAgICAgICAqIEBwYXJhbXMge0FycmF5fSBtc2dcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhdGUgPSBtd1tpXVswXS5jYWxsKGNvbnRleHQsIHN0YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGkrKztcbiAgICAgICAgICAgICAgaiA9IDE7ICAvLyAxLeS4remXtOS7tuWbnuiwg+aJp+ihjOS6hlxuICAgICAgICAgICAgICBydW4oaSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB1bG9nKCkudyhlKTtcbiAgICAgICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgICAgIC8vICAgbXNnOiBlXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyDnirbmgIHkuLpwYXVzZeetieW+hTIwMG1z6L2u6K+i77yM54q25oCB5Li6bnVtYmVy57G75Z6L55qE5pWw5YC8562J5b6Fc3RhdGVtc+i9ruivolxuICAgICAgdmFyIGlzTnVtYmVyID0gdHlwZW9mIHN0YXRlID09PSAnbnVtYmVyJztcbiAgICAgIGlmIChzdGF0ZSA9PT0gJ3BhdXNlJyB8fCBpc051bWJlcikge1xuICAgICAgICBqID0gMDtcbiAgICAgICAgLy8g5pyA5aSn562J5b6F5pe26ZW/XG4gICAgICAgIHZhciBfdGltZV9vdXQgPSBpc051bWJlciA/IHN0YXRlIDogbWF4VGltZW91dDtcbiAgICAgICAgdmFyIF9td19uYW1lID0gbXdbaV0gPyBtd1tpXVsxXSA6ICcnO1xuICAgICAgICBzbGVlcEhhbmRlcjEgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChqID09PSAwKSB7XG4gICAgICAgICAgICB1bG9nKCkudygnanVtcCB0aGUgbWlkZGxld2FyZSBhYm91dCAnICsgX213X25hbWUgKyAnLCBiZWNhdXNlIHdhaXRpbmcgdGltZW91dCBtYXhUaW1lb3V0ID0gJyArIF90aW1lX291dCk7XG4gICAgICAgICAgICAvLyB1dGlsTG9nZ2VyLmxvZ2dlcih7XG4gICAgICAgICAgICAvLyAgIG1zZzogJ2p1bXAgdGhlIG1pZGRsZXdhcmUgYWJvdXQgJyArIF9td19uYW1lICsgJywgYmVjYXVzZSB3YWl0aW5nIHRpbWVvdXQgbWF4VGltZW91dCA9ICcgKyBfdGltZV9vdXRcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICAgICAgc3RhdGUgPSBudWxsO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgcnVuKGkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgX3RpbWVfb3V0KTtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb25lJykge1xuICAgICAgICAvLyDnirbmgIHkuLpkb25l6KGo56S657uT5p2f77yM5LiN566h5ZCO6Z2i6L+Y5pyJ5rKh5pyJ5Lit6Ze05Lu26YO957uT5p2fXG4gICAgICAgIGkgPSBzaXplO1xuICAgICAgICBydW4oaSwgc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g6buY6K6k54q25oCB77yM5Y+q566h5omn6KGM5Lit6Ze05Lu26Zif5YiXXG4gICAgICAgIGkrKztcbiAgICAgICAgcnVuKGkpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKGNvbnRleHQuY2FsbGVkTGlzdCAmJiBjb250ZXh0LmNhbGxlZExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgY29udGV4dC5yZXNldENhbGxlZExpc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIHJ1bihpKTtcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gY29tcG9zZTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS9jb3JlL2NvbXBvc2UuanNcbi8vIG1vZHVsZSBpZCA9IDcxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL3BsdWdpbnMvcGx1Z2luc0xvYWRlci5qc1xuICog5o+S5Lu25Yqg6L295ZmoXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJ0B1dGlscy9hc3NpZ24nKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW1zIG9wdHMge1xuICAgICAqICAgbWlkZGxld2FyZTogW10sXG4gICAgICogICBwbHVnaW5zOiBbXSxcbiAgICAgKiAgIGNvbmZpZzoge31cbiAgICAgKiB9XG4gICAgICovXG4gICAgaW5pdDogZnVuY3Rpb24ob3B0cykge1xuICAgICAgdGhpcy5vcHRzID0gb3B0cztcbiAgICAgIGlmIChvcHRzICYmIHR5cGVvZiBvcHRzLm1pZGRsZXdhcmUgPT09ICdvYmplY3QnICYmIG9wdHMubWlkZGxld2FyZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IG9wdHMubWlkZGxld2FyZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWlkZGxld2FyZSA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5wbHVnaW5zX25hbWUgPSBbXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICog5YiG5Y+R6K6i6ZiF5Y+Y5YyWXG4gICAgICogQHBhcmFtIG8ge1xuICAgICAqICAgcHVic3ViOiB7Li4ufSxcbiAgICAgKiAgIGNvbnRleHQ6IHsuLi59XG4gICAgICogfSxcbiAgICAgKiBAcGFyYW0gbXcg5b2T5YmN5omn6KGM55qE5Lit6Ze05Lu2XG4gICAgICovXG4gICAgcHVic3ViSW5mbzogZnVuY3Rpb24oY3R4LCBtdykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHB1YnN1YiA9IGN0eC5wdWJzdWI7XG4gICAgICAgIGlmIChwdWJzdWIpIHtcbiAgICAgICAgICBwdWJzdWIucHVibGlzaCgncGx1Z2luc19jaGFuZ2VfJyArIGN0eC5wdWJzdWJUeXBlLCBtdyk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdWxvZygpLncoZSk7XG4gICAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgICAgLy8gICBtc2c6IGVcbiAgICAgICAgLy8gfSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIHJ1bjogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICBpZighaW5kZXgpIGluZGV4ID0gMDtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgbWlkZGxld2FyZSA9IHRoaXMubWlkZGxld2FyZTtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRzIHx8IHt9O1xuICAgICAgdmFyIHBsdWdpbnMgPSBvcHRzLnBsdWdpbnM7XG4gICAgICBpZiAocGx1Z2lucyAmJiB0eXBlb2YgcGx1Z2lucyA9PT0gJ29iamVjdCcgJiYgcGx1Z2lucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBwbHVnaW4gPSBwbHVnaW5zW2luZGV4XTtcbiAgICAgICAgdGhpcy5wbHVnaW5zX25hbWUucHVzaChwbHVnaW4ubmFtZSk7XG4gICAgICAgIG1pZGRsZXdhcmUucHVzaChbZnVuY3Rpb24oc3RhdGUsIGNiKXtcbiAgICAgICAgICBfc2VsZi5wdWJzdWJJbmZvKHRoaXMsIHBsdWdpbik7XG4gICAgICAgICAgLy8g6I635Y+W5o+S5Lu25qih5Z2X6Lev5b6E5bm25Yid5aeL5YyWXG4gICAgICAgICAgdmFyIG0gPSBuZXcgcGx1Z2luLnBhdGgoKTtcblxuICAgICAgICAgIC8vIOS4uuiKguecgeS7o+eggemHj++8jOm7mOiupOeahOWIneWni+WMluaWueazleWcqOWKoOi9veWZqOWGheWBmuWFnOW6leWkhOeQhu+8jOWNs+aPkuS7tuWGheaXoOeJueauiuaDheWGteaXoOmcgOWunueOsGluaXTmlrnms5VcbiAgICAgICAgICBpZiAoIW0uaW5pdCkge1xuICAgICAgICAgICAgbS5pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIOWwhuS4iuS4i+aWh+azqOWFpeWIsOaPkuS7tuWGhVxuICAgICAgICAgIG0uaW5pdCh7XG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICBjb25maWc6IGFzc2lnbihwbHVnaW4uY29uZmlnIHx8IHt9LCBvcHRzLmNvbmZpZylcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4gbS5ydW4oc3RhdGUsIGZ1bmN0aW9uIChtc2cpIHtcbiAgICAgICAgICAgIC8vIOi/memHjOS9v+eUqDHmr6vnp5Llu7bov5/miafooYzvvIzpmLLmraLkuK3pl7Tku7bkuLvkvZPlhoXnmoRjYWxsYmFja+WFiOaJp+ihjO+8jOWvvOiHtOahhuaetuaLv+S4jeWIsOS4remXtOS7tnJldHVybueahOetieW+heaXtumVv++8jOS7juiAjOWvvOiHtOebkeaOp+W8guW4uFxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGNiKHBsdWdpbiwgbXNnKTtcbiAgICAgICAgICAgIH0sIDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LCBwbHVnaW4ubmFtZV0pO1xuXG4gICAgICAgIGluZGV4Kys7XG4gICAgICAgIGlmKHBsdWdpbnNbaW5kZXhdKXtcbiAgICAgICAgICByZXR1cm4gdGhpcy5ydW4oaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbWlkZGxld2FyZTtcbiAgICB9XG4gIH07XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L2NvcmUvcGx1Z2luc0xvYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiZnVuY3Rpb24gaXNUcml2ZXIoKSB7XG4gIHRyeSB7XG4gICAgdmFyIFVBID0gbmF2aWdhdG9yID8gKG5hdmlnYXRvci51c2VyQWdlbnQgfHwgbmF2aWdhdG9yLnN3dXNlckFnZW50KSA6ICcnO1xuICAgIHJldHVybiAvVHJpdmVyL2cudGVzdChVQSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUcml2ZXI7XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL2lzVHJpdmVyLmpzXG4vLyBtb2R1bGUgaWQgPSA3M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcblxuXG4ndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24gKCkge1xuICAgICAgcmVxdWlyZSgnLi9saWJfYXV0b19jbGsvbWFpbicpKCk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfY2xrLmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjb2xsZWN0X2NsayA9IHJlcXVpcmUoJy4vY29sbGVjdF9jbGsnKTtcbi8vIHZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgUGFnZU1hbmFnZXIgPSByZXF1aXJlKCdAL3BsdWdpbnMvbGliX3VtL3BhZ2VNYW5hZ2VyJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuICAvLyB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gIHZhciBhcGx1c0N0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBjbGtfY29uZmlnID0gW107XG5cbiAgdmFyIGluaXRDbGsgPSBmdW5jdGlvbiAob3B0KSB7XG4gICAgY2xrX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycpO1xuICAgIHZhciBzcG1CID0gUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKTtcbiAgICB2YXIgZWxlbWVudHNHcm91cHMgPSBbXTtcbiAgICBmdW5jdGlvbiBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2soZWxlbWVudHMsY29uZmlnKXtcbiAgICAgIGlmKHV0aWxBcnJheS5pc0FycmF5KGVsZW1lbnRzKSl7XG4gICAgICAgIGVsZW1lbnRzR3JvdXBzLnB1c2goe1xuICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxuICAgICAgICAgIGVsZW1lbnRzOiBlbGVtZW50c1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmKGVsZW1lbnRzR3JvdXBzLmxlbmd0aD09PWNsa19jb25maWcubGVuZ3RoKXtcbiAgICAgICAgY29sbGVjdF9jbGsud2F0Y2hfY2xpY2sob3B0LmV2ZW50LCBlbGVtZW50c0dyb3Vwcywgb3B0LmNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkoY2xrX2NvbmZpZykpIHtcbiAgICAgIGNsa19jb25maWcuZm9yRWFjaChmdW5jdGlvbiAoY29uZmlnKSB7XG4gICAgICAgIGlmICghdXRpbERhc2guaXNTdGFydFdpdGgoY29uZmlnLmNzc1NlbGVjdG9yLCAnLicpKSB7XG4gICAgICAgICAgY29uZmlnLmNzc1NlbGVjdG9yID0gJy4nICsgY29uZmlnLmNzc1NlbGVjdG9yO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY29uZmlnLnNwbUIpIHtcbiAgICAgICAgICBjb25maWcuc3BtQiA9IHNwbUI7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGVsZW1lbnRzID0gbWluaS5nZXRDb250ZXh0KCkuY3JlYXRlU2VsZWN0b3JRdWVyeSgpLnNlbGVjdEFsbChjb25maWcuY3NzU2VsZWN0b3IpO1xuICAgICAgICBpZiAodHlwZW9mIGVsZW1lbnRzLmZpZWxkcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG4gICAgICAgICAgICByZWN0OiB0cnVlLFxuICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0OiB0cnVlXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJldCkge1xuICAgICAgICAgICAgZWxlbWVudHNRdWVyeVJlc3VsdENhbGxiYWNrKHJldCxjb25maWcpO1xuICAgICAgICAgIH0pLmV4ZWMoKTsgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g5LiN5pSv5oyBZmllbGRz5pa55rOV55qE5Zy65pmv77yI5pSv5LuY5a6d5LiL77yM5pS555So5Z2Q5qCH77yJXG4gICAgICAgICAgZWxlbWVudHMuYm91bmRpbmdDbGllbnRSZWN0KCkuZXhlYyhmdW5jdGlvbiAocmV0KSB7XG4gICAgICAgICAgICBlbGVtZW50c1F1ZXJ5UmVzdWx0Q2FsbGJhY2socmV0LGNvbmZpZyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbiAgXG4gIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydhcGx1c1JlYWR5JywgZnVuY3Rpb24gKHN0YXR1cykge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlJykge1xuICAgICAgICBjbGtfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG4gIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAvLyAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAoKSB7XG4gIC8vICAgICAvLyBUT0RPXG4gIC8vICAgfV1cbiAgLy8gfSk7XG4gIC8vIGFwbHVzQ3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAvLyAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAvLyAgIGFyZ3VtZW50czogWydvbkhpZGUnLCBmdW5jdGlvbiAoKSB7XG4gIC8vICAgICAvLyBUT0RPXG4gIC8vICAgfV1cbiAgLy8gfSk7XG5cbiAgYXBsdXNDdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ29uQXBsdXNDbGsnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBpbml0Q2xrKG9wdCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbiAgLy8gYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG4gIC8vICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgLy8gICAgIC8vIFRPRE9cbiAgLy8gICB9XG4gIC8vIH0pO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fY2xrL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgd2F0Y2hUcmFja2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvd2F0Y2hUcmFja2VyJyk7XG52YXIgZ2V0SGFzaEtleSA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldEhhc2hLZXknKTtcbnZhciByYXhVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMvcmF4VXRpbCcpO1xuLyoqXG4gKiDmioroh6rliqjmm53lhYnnm7jlkIxjc3NTZWxlY3RvcueahOebuOWQjOS9jee9rueahGRhdGFzZXTmi7/liLDnu5noh6rliqjngrnlh7vkvb/nlKhcbiAqIOWboOS4uuWcqOaUr+S7mOWuneeOr+Wig+S4i+iHquWKqOeCueWHu+S6i+S7tuaLv+S4jeWIsGRhdGFzZXRcbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YVNldCAoY29uZmlnLCBpbmRleCkge1xuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICBcbiAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG4gICAgdmFyIGVsZV9zID0gX2hhc2hNYXBbbG9na2V5XSB8fCBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlX3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG4gICAgICB2YXIgZXhwQ29uZmlnID0gdi5leHBDb25maWcgfHwge307XG4gICAgICAvLyDmm53lhYljc3NTZWxlY3RvcuS4jueCueWHu+eahGNzc1NlbGVjdG9y55u45ZCM5omN6K6k5Li65piv5ZCM57G75Z6L5YWD57SgXG4gICAgICBpZiAoY29uZmlnLmNzc1NlbGVjdG9yID09PSBleHBDb25maWcuY3NzU2VsZWN0b3IpIHtcbiAgICAgICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KHtcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfSwgZXhwQ29uZmlnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY2xvbmVEZWVwKHYuZGF0YXNldCk7XG4gICAgICAgIH0gIFxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy53YXRjaF9jbGljayA9IGZ1bmN0aW9uIChjbGtJbmZvLCBlbGVtZW50c0dyb3VwcywgcGFnZUN0eCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgZWFjaChlbGVtZW50c0dyb3VwcyxmdW5jdGlvbihncm91cCl7XG4gICAgdmFyIGVsZW1lbnRzID0gZ3JvdXAuZWxlbWVudHM7XG4gICAgdmFyIGNvbmZpZyA9IGdyb3VwLmNvbmZpZztcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGVsZW1lbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgX3ZhbHVlID0gZWxlbWVudHNbal07XG4gICAgICBpZiAoaXNJbkFyZWEoY2xrSW5mbywgX3ZhbHVlKSkge1xuICAgICAgICB2YXIgaW5kZXggPSBqICsgMTtcbiAgICAgICAgdmFyIGRhdGFzZXQgPSBfdmFsdWUuZGF0YXNldCB8fCBnZXREYXRhU2V0KGNvbmZpZywgaW5kZXgpIHx8IHt9O1xuICAgICAgICB2YXIgc3BtRGF0YSA9IHt9O1xuICAgICAgICB2YXIgX3NwbURhdGEgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZGF0YXNldC50cmFja2VyUGFyYW1zKSB8fCB7fTtcbiAgICAgICAgaWYgKGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICAgIC8vIOWPlmRhdGEtdHJhY2tlciDmiJYgY3NzU2VsZWN0b3JcbiAgICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQgJiYgYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAgICAgICAgICAgdmFyIGRvbURhdGFTZXQgPSByYXhVdGlsLmdldERhdGFTZXQoY29uZmlnLCBpbmRleC0xKTtcbiAgICAgICAgICAgIHZhciBjID0gZG9tRGF0YVNldC5zcG1DIHx8IGNvbmZpZy5zcG1DIHx8ICcwJztcbiAgICAgICAgICAgIHZhciBkID0gZG9tRGF0YVNldC5zcG1EIHx8IGNvbmZpZy5zcG1EIHx8ICcwJztcbiAgICAgICAgICAgIHNwbURhdGEuYyA9IGM7XG4gICAgICAgICAgICBzcG1EYXRhLmQgPSBkO1xuICAgICAgICAgICAgLy8g6KGl5YWFIHJheCBkYXRhLSog5bGe5oCnXG4gICAgICAgICAgICBkYXRhc2V0ID0gT2JqZWN0LmFzc2lnbihkYXRhc2V0LCBkb21EYXRhU2V0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNwbUMgPSBkYXRhc2V0LnRyYWNrZXIgfHwgY29uZmlnLmNzc1NlbGVjdG9yLnJlcGxhY2UoL1xcJ3xcXFwifFxcO3xcXDp8XFw9fFxcW3xcXF18XFwufFxcI3xcXC18XFwvfFxcfC9nLCAnJyk7IC8vIOWOu+aOieeJueauiuWtl+esplxuICAgICAgICAgICAgc3BtRGF0YS5jID0gc3BtQztcbiAgICAgICAgICAgIGlmIChzcG1EYXRhLmMgJiYgc3BtRGF0YS5jICE9PSAnMCcpIHtcbiAgICAgICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBpbmRleDtcbiAgICAgICAgICAgICAgc3BtRGF0YS5kID0gc3BtRDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5iID0gY29uZmlnLnNwbUI7XG4gICAgICAgICAgaWYgKGNvbmZpZy5zcG1DKSB7XG4gICAgICAgICAgICBzcG1EYXRhLmMgPSBjb25maWcuc3BtQztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3BtRGF0YS5jID0gX3NwbURhdGEuc3BtQyA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1DKSA6ICcnO1xuICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgaWYgKGNvbmZpZy5zcG1EKSB7XG4gICAgICAgICAgICBzcG1EYXRhLmQgPSBpbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgaW5kZXggOiBjb25maWcuc3BtRDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgIGRhdGFzZXQ6IGRhdGFzZXQsXG4gICAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgICAgZWxlbWVudDogX3ZhbHVlLFxuICAgICAgICAgIHNwbURhdGE6IHNwbURhdGFcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcbiAgaWYocmVzdWx0cy5sZW5ndGg9PT0xKXtcbiAgICByZXN1bHQgPSByZXN1bHRzWzBdO1xuICB9ZWxzZSBpZihyZXN1bHRzLmxlbmd0aD4xKXtcbiAgICByZXN1bHQgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbihwcmV2aW91cyxjdXJyZW50KXtcbiAgICAgIHZhciBtYXRjaGVkUmVzdWx0ID0gcHJldmlvdXM7XG4gICAgICB2YXIgcHJldmlvdXNFbGVtZW50ID0gcHJldmlvdXMuZWxlbWVudDtcbiAgICAgIHZhciBjdXJyZW50RWxlbWVudCA9IGN1cnJlbnQuZWxlbWVudDtcbiAgICAgIGlmKGN1cnJlbnRFbGVtZW50LnRvcCA+PSBwcmV2aW91c0VsZW1lbnQudG9wICYmIGN1cnJlbnRFbGVtZW50LnJpZ2h0IDw9IHByZXZpb3VzRWxlbWVudC5yaWdodCAmJiBjdXJyZW50RWxlbWVudC5ib3R0b20gPD0gcHJldmlvdXNFbGVtZW50LmJvdHRvbSAmJiBjdXJyZW50RWxlbWVudC5sZWZ0ID49IHByZXZpb3VzRWxlbWVudC5sZWZ0KXtcbiAgICAgICAgbWF0Y2hlZFJlc3VsdCA9IGN1cnJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWF0Y2hlZFJlc3VsdDtcbiAgICB9KTtcbiAgfVxuICBpZihyZXN1bHQpe1xuICAgIHdhdGNoVHJhY2tlci5wdXNoRXZlbnQoJ0NMSycsIHJlc3VsdC5kYXRhc2V0LCByZXN1bHQuY29uZmlnLCByZXN1bHQuZWxlbWVudCwgcmVzdWx0LnNwbURhdGEsIHBhZ2VDdHgpO1xuICB9XG4gIGZ1bmN0aW9uIGlzSW5BcmVhIChjbGtJbmZvLCBlbGVJbmZvKSB7XG4gICAgdmFyIGNoYW5nZWRUb3VjaCA9IHt9O1xuICAgIGlmIChjbGtJbmZvKSB7XG4gICAgICBpZiAoY2xrSW5mby5jaGFuZ2VkVG91Y2hlcykge1xuICAgICAgICAvLyDlvq7kv6FcbiAgICAgICAgY2hhbmdlZFRvdWNoID0gY2xrSW5mby5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIH0gZWxzZSBpZiAoY2xrSW5mby5kZXRhaWwpIHtcbiAgICAgICAgLy8g5pSv5LuY5a6dXG4gICAgICAgIGNoYW5nZWRUb3VjaCA9IGNsa0luZm8uZGV0YWlsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgeCA9IGNoYW5nZWRUb3VjaC5jbGllbnRYIHx8IDA7XG4gICAgdmFyIHkgPSBjaGFuZ2VkVG91Y2guY2xpZW50WSB8fCAwO1xuXG4gICAgdmFyIF90b3AgPSBlbGVJbmZvLnRvcDtcbiAgICB2YXIgX2JvdHRvbSA9IGVsZUluZm8uYm90dG9tO1xuICAgIGlmIChlbGVJbmZvLnNjcm9sbFRvcCkge1xuICAgICAgX3RvcCArPSBlbGVJbmZvLnNjcm9sbFRvcDtcbiAgICAgIF9ib3R0b20gKz0gZWxlSW5mby5zY3JvbGxUb3A7XG4gICAgfVxuXG4gICAgaWYgKGVsZUluZm8ubGVmdCA8IHggJiYgeCA8IGVsZUluZm8ucmlnaHQgJiYgX3RvcCA8IHkgJiYgeSA8IF9ib3R0b20pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2Nsay9jb2xsZWN0X2Nsay5qc1xuLy8gbW9kdWxlIGlkID0gNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBmb3JtYXQgPSByZXF1aXJlKCdAdXRpbHMvZm9ybWF0Jyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIGlzQXJyYXkgPSByZXF1aXJlKCdAdXRpbHMvaXNBcnJheScpO1xudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbExvZ2dlciA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTG9nZ2VyJyk7XG52YXIgcmVjb3JkRXhwTWFwUXVldWUgPSB7fTtcbnZhciBERUZBVUxUX1BLR19TSVpFID0gMztcbnZhciBQT1NUID0gJ1BPU1QnO1xudmFyIEVYUCA9ICdFWFAnO1xuXG4vKipcbiAqIOiOt+WPlueUqOaIt+azqOWFpeeahOWfi+eCueS/oeaBr++8mmh0dHBzOi8veXVxdWUuYW50ZmluLWluYy5jb20vYXBsdXNqcy9kb2NzL21ldGEjYjdkOGNjYzdcbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSB1c2VyRm5OYW1lXG4gKiBAcGFyYW1zIHtPYmplY3R9IGVsZW1lbnRcbiAqIEBwYXJhbXMge09iamVjdH0gc2VsZWN0b3JcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldFVzZXJJbmZvICh1c2VyRm5OYW1lLCBlbGVtZW50LCBzZWxlY3Rvciwgc3BtRGF0YSkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKSB8fCB7fTtcbiAgdmFyIGdldE1ldGFJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm87XG4gIGlmICh0eXBlb2YgZ2V0TWV0YUluZm8gPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgdXNlckZuID0gZ2V0TWV0YUluZm8odXNlckZuTmFtZSk7XG4gICAgdmFyIHVzZXJJbmZvID0ge307XG4gICAgaWYgKHR5cGVvZiB1c2VyRm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHVzZXJJbmZvID0gdXNlckZuKGVsZW1lbnQgPyBjbG9uZURlZXAoZWxlbWVudCkgOiB7fSwgc2VsZWN0b3IsIHNwbURhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gZm9ybWF0LnBhcmFtMm9iaih1c2VySW5mbyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG59XG5cbi8vIOiBmuWQiOS4iuaKpeabneWFieaXpeW/l1xudmFyIEV2ZW50QXJyYXkgPSBCYXNlLmV4dGVuZCh7XG4gIHB1c2g6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHRoaXMuYnVmZmVyLnB1c2godmFsdWUpO1xuICAgIHdoaWxlICh0aGlzLmJ1ZmZlci5sZW5ndGggPj0gdGhpcy5wa2dTaXplKSB7XG4gICAgICB2YXIgZ29rZXlzID0gdGhpcy5idWZmZXIuc3BsaWNlKDAsIHRoaXMucGtnU2l6ZSk7XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZCh0aGlzLmxvZ2tleSwgRVhQLCBnb2tleXMsIHRoaXMubWV0aG9kKTtcbiAgICAgIH1cbiAgICB9IFxuICB9XG59KTtcblxuZnVuY3Rpb24gZ2V0Rml4ZWROdW1iZXIgKHZhbHVlLCBsZW5ndGgpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJztcbiAgdHJ5IHtcbiAgICB2YXIgX251bSA9IG5ldyBOdW1iZXIodmFsdWUpO1xuICAgIF9yZXN1bHQgPSBwYXJzZUZsb2F0KF9udW0udG9GaXhlZChsZW5ndGgpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIF9yZXN1bHQgPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gX3Jlc3VsdDtcbn1cblxuZXhwb3J0cy5wdXNoRXZlbnQgPSBmdW5jdGlvbiAoZ21rZXksIGRhdGEsIGNvbmZpZywgZWxlbWVudCwgc3BtRGF0YSwgcGFnZUN0eCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnID8gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpIDogZmFsc2U7XG4gIHZhciBwcm9wcyA9IGNvbmZpZy5wcm9wcztcbiAgdmFyIHBhcmFtcyA9IHt9O1xuICB2YXIgZGF0YXNldCA9IHt9O1xuXG4gIGlmIChkYXRhKSB7XG4gICAgZm9yICh2YXIgZGF0YWtleSBpbiBkYXRhKSB7XG4gICAgICBpZiAoISFkYXRha2V5LnRvTG93ZXJDYXNlKCkubWF0Y2goL15kYXRhLS8pKSB7XG4gICAgICAgIGRhdGFzZXRbZGF0YWtleS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL15kYXRhLS8sICcnKS5yZXBsYWNlKC8tL2csICcnKV0gPSBkYXRhW2RhdGFrZXldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETzog5a+55LqO5reY5a6d5bCP56iL5bqPLGRhdGFrZXnlt7Lnu4/lnKhkYXRh5YaF5LqG77yM5bm25LiU5LiN5ZCrZGF0YS3liY3nvIAs6ZyA5Y2V54us5Yqg5YWlQOmSsOaYrVxuICAgICAgICBkYXRhc2V0W2RhdGFrZXldID0gZGF0YVtkYXRha2V5XTtcbiAgICAgIH1cbiAgICB9ICBcbiAgfVxuICBpZiAocHJvcHMgJiYgaXNBcnJheShwcm9wcykpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0gcHJvcHNbaV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9eZGF0YS0vLCAnJykucmVwbGFjZSgvLS9nLCAnJyk7XG4gICAgICBwYXJhbXNba2V5XSA9IGRhdGFzZXRba2V5XTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YXNldCk7XG4gIH1cbiAgXG4gIGlmIChlbGVtZW50ICYmIGdta2V5ID09PSBFWFApIHtcbiAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMsIHtcbiAgICAgICdfdyc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQud2lkdGgsIDIpLFxuICAgICAgJ19oJzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC5oZWlnaHQsIDIpLFxuICAgICAgJ194JzogZ2V0Rml4ZWROdW1iZXIoZWxlbWVudC54LCAyKSxcbiAgICAgICdfeSc6IGdldEZpeGVkTnVtYmVyKGVsZW1lbnQueSwgMiksXG4gICAgICAvLyAnX2hhc2gnOiBlbGVtZW50Lmhhc2hfdmFsdWUgfHwgJycsXG4gICAgICAnX3JhdGUnOiBnZXRGaXhlZE51bWJlcihlbGVtZW50LnZpZXdhYmlsaXR5UmF0ZSB8fCBlbGVtZW50LmludGVyc2VjdGlvblJhdGlvLCAyKSxcbiAgICAgICdfdmlld2FiaWxpdHknOiAnaW50ZXJzZWN0aW9uJ1xuICAgIH0pO1xuICB9ICBcbiAgaWYgKGNvbmZpZy5fdnQpIHtcbiAgICBwYXJhbXMuX3Z0ID0gY29uZmlnLl92dDtcbiAgfVxuXG4gIC8vIGlmIChkb2N1bWVudCAmJiBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtdnQtY2ZnLXVybCcpKSB7XG4gIC8vICAgdmFyIHNwbURhdGEgPSBcbiAgLy8gfVxuXG4gIHZhciB1c2VyRm5OYW1lID0gZ21rZXkgPT09IEVYUCA/ICdhcGx1cy1hdXRvLWV4cC11c2VyZm4nIDogJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbic7XG4gIHZhciB1c2VySW5mbyA9IGdldFVzZXJJbmZvKHVzZXJGbk5hbWUsIGVsZW1lbnQsIGNvbmZpZy5jc3NTZWxlY3Rvciwgc3BtRGF0YSk7XG5cbiAgaWYgKCF1c2VySW5mby5zcG0pIHtcbiAgICBpZiAoaXNBbGkgJiYgc3BtRGF0YSAmJiBzcG1EYXRhLmEgJiYgc3BtRGF0YS5iKSB7XG4gICAgICB1c2VySW5mby5zcG0gPSBbc3BtRGF0YS5hLCBzcG1EYXRhLmIsIHNwbURhdGEuYyB8fCAnMCcsIHNwbURhdGEuZCB8fCAnMCddLmpvaW4oJy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlckluZm8uc3BtID0gc3BtRGF0YSAmJiBzcG1EYXRhLmIgPyBzcG1EYXRhIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHZhciBnb2tleSA9IHt9O1xuICB2YXIgdHJhY2tlclBhcmFtcyA9IGRhdGEudHJhY2tlclBhcmFtcyB8fCBkYXRhWyd0cmFja2VyLXBhcmFtcyddO1xuICBpZiAodHJhY2tlclBhcmFtcykge1xuICAgIHRyeSB7XG4gICAgICB2YXIgX3RyYWNrZXJQYXJhbXMgPSBKU09OLnBhcnNlKHRyYWNrZXJQYXJhbXMpO1xuICAgICAgcGFyYW1zID0gT2JqZWN0LmFzc2lnbihwYXJhbXMsIF90cmFja2VyUGFyYW1zKTtcbiAgICAgIGRlbGV0ZSBwYXJhbXMudHJhY2tlclBhcmFtcztcbiAgICAgIGRlbGV0ZSBwYXJhbXMudHJhY2tlcnBhcmFtcztcbiAgICB9IGNhdGNoIChlKSB7fVxuICB9XG4gIFxuICBpZiAoZ21rZXkgPT09ICdFWFAnICYmIGlzQWxpICYmIHJlY29yZEV4cE1hcFF1ZXVlW2NvbmZpZy5sb2drZXldKSB7XG4gICAgdmFyIGV4ZGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcywgdXNlckluZm8pO1xuICAgIGdva2V5ID0gT2JqZWN0LmFzc2lnbih7fSwge1xuICAgICAgZXhhcmdzOiBleGRhdGFcbiAgICB9KTtcbiAgICB1dGlsTG9nZ2VyLmxvZygnYXV0byBleHA6Jyxjb25maWcubG9na2V5LGV4ZGF0YSk7XG4gICAgcmVjb3JkRXhwTWFwUXVldWVbY29uZmlnLmxvZ2tleV0ucHVzaChjbG9uZURlZXAoZ29rZXkpKTtcbiAgfSBlbHNlIHsgICAgXG4gICAgZ29rZXkgPSBPYmplY3QuYXNzaWduKHtpc19hdXRvOiAxfSwgcGFyYW1zLCB1c2VySW5mbywgY29uZmlnLmN1c3RvbUFyZ3MpO1xuICAgIHV0aWxMb2dnZXIubG9nKCdhdXRvIGNsazonLGNvbmZpZy5sb2drZXksZ29rZXkpO1xuICAgIGlmIChwYWdlQ3R4KSB7XG4gICAgICB2YXIgY3VyID0gcGFnZUN0eC5yb3V0ZTtcbiAgICAgIGFwbHVzLnJlY29yZChjb25maWcubG9na2V5LCBnbWtleSwgT2JqZWN0LmFzc2lnbih7fSwgZ29rZXksIHtjdXJyZW50UGF0aDogY3VyIH0pLCBQT1NUKTsgIFxuICAgIH0gZWxzZSB7XG4gICAgICBhcGx1cy5yZWNvcmQoY29uZmlnLmxvZ2tleSwgZ21rZXksIGdva2V5LCBQT1NUKTtcbiAgICB9XG5cbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW1zIHtBcnJheU9iamVjdH0gY29uZmlnIDogW3tcbiAqICAgICdwb3NpdGlvblNlbGVjdG9yJzogJy5zY3JvbGwtdmlldycsXG4gKiAgICAnY3NzU2VsZWN0b3InOicuYmFsbCcsXG4gKiAgICAnbG9na2V5JzonL3Rlc3QuYmFsbC4xJyxcbiAqICAgICdwcm9wcyc6IFsnZGF0YS10cmFja2VyJ10sXG4gKiAgfSwge1xuICogICAgJ2Nzc1NlbGVjdG9yJzonLm15YnV0dG9uJyxcbiAqICAgICdsb2drZXknOicvdGVzdC5teWJ1dHRvbi4xJyxcbiAqICAgICdwcm9wcyc6IFsnZGF0YS10cmFja2VyJ10sXG4gKiAgfV1cbiAqL1xuZXhwb3J0cy53YXRjaFJlY29yZCA9IGZ1bmN0aW9uIChjb25maWcpIHtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBpc0FsaSA9IGFwbHVzLmdsb2JhbENvbmZpZyA/IGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSA6IGZhbHNlO1xuICBcbiAgaWYgKGlzQWxpICYmIGNvbmZpZykge1xuICAgIGNvbmZpZy5mb3JFYWNoKGZ1bmN0aW9uIChjZmcpIHtcbiAgICAgIGlmICghcmVjb3JkRXhwTWFwUXVldWUuaGFzT3duUHJvcGVydHkoY2ZnLmxvZ2tleSkpIHtcbiAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbY2ZnLmxvZ2tleV0gPSBFdmVudEFycmF5LmNyZWF0ZSh7XG4gICAgICAgICAgbGVuZ3RoOiAwLFxuICAgICAgICAgIGJ1ZmZlcjogW10sXG4gICAgICAgICAgbG9na2V5OiBjZmcubG9na2V5LFxuICAgICAgICAgIHBrZ1NpemU6IHR5cGVvZiBjZmcucGtnU2l6ZSA9PT0gJ251bWJlcicgJiYgY2ZnLnBrZ1NpemUgfHwgREVGQVVMVF9QS0dfU0laRSxcbiAgICAgICAgICBtZXRob2Q6IGNmZy5tZXRob2QgfHwgUE9TVFxuICAgICAgICB9KTtcbiAgICAgIH0gXG4gICAgfSk7ICAgIFxuICB9XG59O1xuXG5leHBvcnRzLmNsZWFyUmVjb3JkID0gZnVuY3Rpb24gKCkge1xuICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgdmFyIGlzQWxpID0gYXBsdXMuZ2xvYmFsQ29uZmlnID8gYXBsdXMuZ2xvYmFsQ29uZmlnLmlzQWxpIDogZmFsc2U7XG5cbiAgaWYgKGlzQWxpKSB7XG4gICAgZm9yICh2YXIgbG9na2V5IGluIHJlY29yZEV4cE1hcFF1ZXVlKSB7XG4gICAgICB2YXIgZ29rZXlzID0gcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgfHwgW107XG4gICAgICBpZiAoZ29rZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXBsdXMuY29tYmluZVJlY29yZChsb2drZXksIEVYUCwgZ29rZXlzLCBQT1NUKTtcbiAgICAgICAgcmVjb3JkRXhwTWFwUXVldWVbbG9na2V5XS5idWZmZXIgPSBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy93YXRjaFRyYWNrZXIuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5qC55o2u5YWD57Sg5bGe5oCn5ZKM5Z+L54K56YWN572u57K+56Gu6I635Y+W5LiA5Liq5YWD57Sg55qEaGFzaEtleVxuICogQHBhcmFtcyB7T2JqZWN0fSBlbGVtZW50QXR0ciB7XG4gKiAgIGlkXG4gKiB9XG4gKiBAcGFyYW1zIHtPYmplY3R9IGNvbmZpZyB7XG4gKiAgIGxvZ2tleSwgY3NzU2VsZWN0b3IsIHBvc2l0aW9uU2VsZWN0b3JcbiAqIH1cbiAqIEByZXR1cm4ge1N0cmluZ30gaGFzaEtleVxuICovXG5cbi8vIG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGVsZW1lbnRBdHRyLCBjb25maWcpIHtcbi8vICAgdmFyIGhhc2hLZXkgPSBbXG4vLyAgICAgY29uZmlnLmxvZ2tleSxcbi8vICAgICBjb25maWcuY3NzU2VsZWN0b3IsXG4vLyAgICAgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IsXG4vLyAgICAgZWxlbWVudEF0dHIuaW5kZXhcbi8vICAgXS5qb2luKCdfJyk7XG4vLyAgIHJldHVybiBoYXNoS2V5O1xuLy8gfTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoZWxlbWVudEF0dHIsIGNvbmZpZykge1xuICB2YXIgaGFzaEtleSA9IFtcbiAgICBjb25maWcubG9na2V5LFxuICAgIGNvbmZpZy5jc3NTZWxlY3RvcixcbiAgICAvLyBjb25maWcucG9zaXRpb25TZWxlY3RvciB8fCAnJyxcbiAgICAvLyBlbGVtZW50QXR0ci5pbmRleCAvL+a3mOWuneWwj+eoi+W6j+WIpOaWrWhhc2hLZXlcbiAgXTtcblxuICBpZiAoY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcbiAgICBoYXNoS2V5LnB1c2goY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpO1xuICB9XG4gIFxuICBpZiAoZWxlbWVudEF0dHIuaWQpIHtcbiAgICBoYXNoS2V5LnB1c2goZWxlbWVudEF0dHIuaWQpO1xuICB9XG5cbiAgaWYgKGVsZW1lbnRBdHRyLmluZGV4ID49IDApIHtcbiAgICBoYXNoS2V5LnB1c2goZWxlbWVudEF0dHIuaW5kZXgpO1xuICB9XG4gIC8vIFJheOahhuaetui/kOihjOaXtuiOt+W+l+eahGRhdGFzZXTliY3lkI7kuI3kuIDoh7TvvIzliKDpmaTml6DmlYjlsZ7mgKcgQOmSsOaYrSAyMDIxLTA5LTE4IDA5OjE3OjUyXG4gIGlmIChlbGVtZW50QXR0ci5kYXRhc2V0ICYmIGVsZW1lbnRBdHRyLmRhdGFzZXRbJ3ByaXZhdGVOb2RlSWQnXSkge1xuICAgIGRlbGV0ZSBlbGVtZW50QXR0ci5kYXRhc2V0Wydwcml2YXRlTm9kZUlkJ107XG4gIH1cbiAgaWYgKGVsZW1lbnRBdHRyLmRhdGFzZXQpIHtcbiAgICBoYXNoS2V5LnB1c2goSlNPTi5zdHJpbmdpZnkoZWxlbWVudEF0dHIuZGF0YXNldCkpO1xuICB9XG4gIGhhc2hLZXkgPSBoYXNoS2V5LmpvaW4oJ18nKTtcbiAgcmV0dXJuIGhhc2hLZXk7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS91dGlscy9nZXRIYXNoS2V5LmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogcmF4VXRpbC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWwgPSByZXF1aXJlKCdAdXRpbHMvdXRpbCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG5cbmV4cG9ydHMuZ2V0RGF0YVNldCA9IGZ1bmN0aW9uIChjb25maWcsaW5kZXgpIHtcbiAgdmFyIGQgPSB7fTtcbiAgdmFyIGNseDtcbiAgaWYgKHV0aWxEYXNoLmlzU3RhcnRXaXRoKGNvbmZpZy5jc3NTZWxlY3RvciwgJy4nKSkge1xuICAgIGNseCA9IGNvbmZpZy5jc3NTZWxlY3Rvci5zbGljZSgxLCBjb25maWcuY3NzU2VsZWN0b3IubGVuZ3RoKTtcbiAgfSBlbHNlIHtcbiAgICBjbHggPSBjb25maWcuY3NzU2VsZWN0b3I7XG4gIH1cbiAgdmFyIGRvbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGNseCk7XG4gIGlmIChkb21zICYmIGRvbXMubGVuZ3RoID4gMCl7XG4gICAgdmFyIGRvbURhdGFTZXQgPSBkb21zW2luZGV4XS5kYXRhc2V0IHx8IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBkb21EYXRhU2V0KSB7XG4gICAgICB2YXIgdCA9IGRvbURhdGFTZXRba2V5XTtcbiAgICAgIHN3aXRjaCh0eXBlb2YgdCl7XG4gICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgIGRba2V5XSA9IHQoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICBkID0gT2JqZWN0LmFzc2lnbihkLCB0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBpZiAoa2V5ID09PSAndHJhY2tlclBhcmFtcycpIHtcbiAgICAgICAgICB2YXIgdHAgPSB1dGlsLmpzb25MaWtlU3RyMkpTT04oZG9tRGF0YVNldC50cmFja2VyUGFyYW1zKTtcbiAgICAgICAgICBkID0gT2JqZWN0LmFzc2lnbihkLCB0cCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZFtrZXldID0gdDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgZFtrZXldID0gdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGQ7XG59O1xuXG5leHBvcnRzLmlzUmF4ID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGRvY3VtZW50ID8gdHJ1ZSA6IGZhbHNlO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvdXRpbHMvcmF4VXRpbC5qc1xuLy8gbW9kdWxlIGlkID0gNzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG5cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJlcXVpcmUoJy4vbGliX2F1dG9fZXhwL21haW4nKSgpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvYXV0b190cmFja2VyX2V4cC5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBjb2xsZWN0X2V4cCA9IHJlcXVpcmUoJy4vY29sbGVjdF9leHAnKTtcbnZhciBjb25maWcgPSByZXF1aXJlKCdAcF93ZWIvbGliX2NvbW1vbi9jb25maWcnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuLy8gdmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcblxuLy8g55So5LqO55uR5ZCsXG52YXIgUEFHRV9EQVRBX01BUCA9IHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGlzU3RhcnQgPSAwO1xuICB2YXIgaXNGaXJzdFRvdWNoID0gMDtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIGlmIChhcGx1cy5fYXBsdXNfYXV0b19leHApIHtcbiAgICByZXR1cm47XG4gIH0gZWxzZSB7XG4gICAgYXBsdXMuX2FwbHVzX2F1dG9fZXhwID0ge1xuICAgICAgaGFzaE1hcDoge31cbiAgICB9O1xuICB9XG5cbiAgdmFyIF9jb25maWcgPSBbXTtcblxuICBmdW5jdGlvbiB3YXRjaE1ldGFJbmZvKGNvbnRleHQsIGlzRmlyc3QsIHdhdGNoVHlwZSkge1xuICAgIHZhciBoYW5kbGVyTWV0YUluZm8gPSBmdW5jdGlvbiAobWV0YUtleSwgbWV0YVZhbHVlKSB7ICAgXG4gICAgICBpZiAobWV0YUtleSA9PT0gJ2FwbHVzLWF1dG8tZXhwJykge1xuICAgICAgICB2YXIgX2NvbmZpZzIgPSBjb25maWcuZ2V0QXV0b0V4cENvbmZpZyhtZXRhVmFsdWUpO1xuICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkoX2NvbmZpZzIpID09PSBKU09OLnN0cmluZ2lmeShfY29uZmlnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfY29uZmlnID0gX2NvbmZpZzI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGFWYWx1ZSAmJiBfY29uZmlnICYmIF9jb25maWcubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbGxlY3RfZXhwLndhdGNoX2V4cG9zdXJlKGNvbnRleHQsIF9jb25maWcsIGlzRmlyc3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgICBjdHguYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICBhY3Rpb246IHdhdGNoVHlwZSwgLy8gYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgICAgYXJndW1lbnRzOiBbJ3NldE1ldGFJbmZvJywgaGFuZGxlck1ldGFJbmZvXVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdEV4cCAoY29udGV4dCwgaXNGaXJzdCkge1xuICAgIF9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXV0by1leHAnKTtcbiAgICAvLyBUYXJv5qGG5p625Z+65LqO6L+Q6KGM5pe277yM6Ieq5Yqo5pud5YWJ5Lya5Ye6546w6I635Y+W5LiN5Yiw5pud5YWJ5YWD57Sg55qE5oOF5Ya1XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGNvbGxlY3RfZXhwLndhdGNoX2V4cG9zdXJlKGNvbnRleHQsIF9jb25maWcsIGlzRmlyc3QpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvblNob3cnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICB3YXRjaE1ldGFJbmZvKG9wdC5jb250ZXh0LCAxLCBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUpO1xuICAgICAgICBpZiAoaXNTdGFydCA9PT0gMCkge1xuICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDEpO1xuICAgICAgICAgIGlzU3RhcnQgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDApO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdmFyIF9jdXJyZW50UGFnZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgICB2YXIgX3BhdGggPSBfY3VycmVudFBhZ2Uucm91dGUgfHwgX2N1cnJlbnRQYWdlLmlzO1xuICAgICAgICAgIFBBR0VfREFUQV9NQVBbX3BhdGhdID0gX3BhdGg7IC8vIEpTT04uc3RyaW5naWZ5KF9jdXJyZW50UGFnZS5kYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XVxuICB9KTtcblxuICBmdW5jdGlvbiByZXNldEF1dG9FeHAgKG9wdCkge1xuICAgIHRyeSB7XG4gICAgICB2YXIgX2N1cnJlbnRQYWdlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgICAgdmFyIF9wYXRoID0gX2N1cnJlbnRQYWdlLnJvdXRlIHx8IF9jdXJyZW50UGFnZS5pcztcbiAgICAgIHZhciBfZGF0YSA9IFBBR0VfREFUQV9NQVBbX3BhdGhdO1xuICAgICAgXG4gICAgICB2YXIgX2N1cnJlbnREYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0LmRhdGEpO1xuICAgICAgaWYgKF9kYXRhICE9PSBfY3VycmVudERhdGEpIHtcbiAgICAgICAgUEFHRV9EQVRBX01BUFtfcGF0aF0gPSBfY3VycmVudERhdGE7XG4gICAgICAgIGluaXRFeHAob3B0LmNvbnRleHQsIDApO1xuICAgICAgfSAgXG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuXG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnb25BcGx1c1RvdWNoJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgaWYgKGlzRmlyc3RUb3VjaCA9PT0gMCkge1xuICAgICAgICAgIGlzRmlyc3RUb3VjaCA9IDE7XG4gICAgICAgICAgaW5pdEV4cChvcHQuY29udGV4dCwgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XVxuICB9KTtcbiAgY3R4LmFwbHVzX3F1ZXVlLnB1c2goe1xuICAgIGFjdGlvbjogYXBsdXNTdGF0aWMuU1VCU0NSSUJFLFxuICAgIGFyZ3VtZW50czogWydvblBhZ2VEYXRhQ2hhbmdlZCcsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgcmVzZXRBdXRvRXhwKG9wdCk7XG4gICAgICB9LCAyMDApO1xuICAgIH1dXG4gIH0pO1xuXG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnb25IaWRlJywgZnVuY3Rpb24gKG9wdCkge1xuICAgICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgICAgUEFHRV9EQVRBX01BUCA9IHt9O1xuICAgICAgICBpc1N0YXJ0ID0gMDtcbiAgICAgICAgaXNGaXJzdFRvdWNoID0gMDtcbiAgICAgICAgd2F0Y2hNZXRhSW5mbyhvcHQuY29udGV4dCwgMSwgYXBsdXNTdGF0aWMuVU5TVUJTQ1JJQkUpO1xuICAgICAgICBjb2xsZWN0X2V4cC5jbGVhcigpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG4gIGN0eC5hcGx1c19xdWV1ZS5wdXNoKHtcbiAgICBhY3Rpb246IGFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICBhcmd1bWVudHM6IFsnb25VbmxvYWQnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICBQQUdFX0RBVEFfTUFQID0ge307XG4gICAgICAgIGNvbGxlY3RfZXhwLmNsZWFyKCk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG5cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX2F1dG9fZXhwL21haW4uanNcbi8vIG1vZHVsZSBpZCA9IDgxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBfY29uZmlnID0gcmVxdWlyZSgnQHBfd2ViL2xpYl9jb21tb24vY29uZmlnJyk7XG52YXIgY2xvbmVEZWVwID0gcmVxdWlyZSgnQHV0aWxzL2Nsb25lRGVlcCcpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgdXRpbEFycmF5ID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIHdhdGNoVHJhY2tlciA9IHJlcXVpcmUoJy4uL3V0aWxzL3dhdGNoVHJhY2tlcicpO1xudmFyIGdldEhhc2hLZXkgPSByZXF1aXJlKCcuLi91dGlscy9nZXRIYXNoS2V5Jyk7XG52YXIgcmF4VXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3JheFV0aWwnKTtcbnZhciBtaW5pVXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWxzJyk7XG52YXIgb2JzZXJ2ZXJzID0gW107XG52YXIgY3R4O1xuXG4vLyByZWxvYWRDdHgg55So5LqO5Y2V5YWD5rWL6K+V77yM5Y2V5rWL5Lit6ZyA6KaB5YiH5o2i5pSv5LuY5a6d44CB5b6u5L+h546v5aKD77yM5a6e6ZmF55Sf5Lqn546v5aKD55So5LiN5YiwXG5leHBvcnRzLndhdGNoX2V4cG9zdXJlID0gZnVuY3Rpb24gKGNvbnRleHQsIGNvbmYsIGlzRmlyc3QsIHJlbG9hZEN0eCkge1xuICBpZiAoIWN0eCB8fCByZWxvYWRDdHgpIHtcbiAgICBjdHggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgfVxuICB2YXIgX2FwbHVzX2F1dG9fZXhwID0gdXRpbEdvbGRsb2cuZ2V0R29sZGxvZ1ZhbCgnX2FwbHVzX2F1dG9fZXhwJykgfHwge307XG4gIHZhciBfaGFzaE1hcCA9IF9hcGx1c19hdXRvX2V4cC5oYXNoTWFwIHx8IHt9O1xuICB2YXIgZHVwO1xuICBcbiAgd2F0Y2hUcmFja2VyLndhdGNoUmVjb3JkKGNvbmYpO1xuICBcbiAgZnVuY3Rpb24gd2FpdCAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCBjb25mLmxlbmd0aCkge1xuICAgICAgdmFyIGNvbmZpZyA9IGNvbmZbY291bnRdO1xuICAgICAgZHVwID0gMDtcbiAgICAgIG9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50LnN1YmplY3RbMF0gPT09IGNvbmZpZy5jc3NTZWxlY3RvciAmJlxuICAgICAgICAgIGVsZW1lbnQuc3ViamVjdFsxXSA9PT0gY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcbiAgICAgICAgICBkdXAgPSAxO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHZhciBzdWJqZWN0ID0gW2NvbmZpZy5jc3NTZWxlY3RvciwgY29uZmlnLnBvc2l0aW9uU2VsZWN0b3JdO1xuICAgICAgZnVuY3Rpb24gaGFzaGluZyAoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gc3ViamVjdFswXTtcbiAgICAgICAgaWYgKGNzc1NlbGVjdG9yICYmICF1dGlsRGFzaC5pc1N0YXJ0V2l0aChzdWJqZWN0WzBdLCAnLicpKSB7XG4gICAgICAgICAgY3NzU2VsZWN0b3IgPSAnLicgKyBjc3NTZWxlY3RvcjtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciBlbGVtZW50cyA9IGN0eC5jcmVhdGVTZWxlY3RvclF1ZXJ5KCkuc2VsZWN0QWxsKGNzc1NlbGVjdG9yKTsgICAgICAgICAgXG4gICAgICAgICAgaWYgKHR5cGVvZiBlbGVtZW50cy5maWVsZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGVsZW1lbnRzLmZpZWxkcyh7XG4gICAgICAgICAgICAgIGRhdGFzZXQ6IHRydWUsXG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgfSwgZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgICAgICAgIC8vIOmFjee9ruWMluWfi+eCueWFvOWuueeCueS9jeaXoOaViOaXtuS4jemYu+WhnuabneWFieino+aekFxuICAgICAgICAgICAgICBpZiAodXRpbEFycmF5LmlzQXJyYXkocmV0KSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgIGVsZW1lbnRzOiByZXQsXG4gICAgICAgICAgICAgICAgICB0eXBlOiAnQ09NTU9OJ1xuICAgICAgICAgICAgICAgIH0pOyAgXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLmV4ZWMoKTsgIFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ2N1cnJlbnQgcGxhdGZvcm0gZG9lcyBub3Qgc3VwcG9ydCBhdXRvIGV4cG9zdXJlIHRyYWNraW5nIScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyB9XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdjdXJyZW50IHBsYXRmb3JtIGRvZXMgbm90IHN1cHBvcnQgYXV0byBleHBvc3VyZSB0cmFja2luZyEgZXJyID0gJywgZXJyKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaGFzaGluZyhmdW5jdGlvbiAob3B0cykge1xuICAgICAgICAvLyB2YXIgdHlwZSA9IG9wdHMudHlwZTtcbiAgICAgICAgaWYgKGR1cCA9PT0gMCB8fCBpc0ZpcnN0ID09PSAwKSB7XG4gICAgICAgICAgdmFyIG5ld09ic2VydmVyID0gaW5pdE9ic2VydmVyKGNvbnRleHQpO1xuICAgICAgICAgIG5ld09ic2VydmVyLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICAgIGlmKG9ic2VydmVycy5sZW5ndGg+Y29uZi5sZW5ndGgtMSl7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlZE9ic2VydmVyID0gb2JzZXJ2ZXJzLnNoaWZ0KCk7XG4gICAgICAgICAgICByZW1vdmVkT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBvYnNlcnZlcnMucHVzaChuZXdPYnNlcnZlcik7XG4gICAgICAgICAgLy8g5pu05pawaGFzaG1hcFxuICAgICAgICAgIGVhY2gob3B0cy5lbGVtZW50cyxmdW5jdGlvbihpdGVtLGluZGV4KXtcbiAgICAgICAgICAgIGl0ZW0uaW5kZXggPSAoaW5kZXgrMSkgKyAnJztcbiAgICAgICAgICAgIGlmICghY2hlY2tJc0luSGFzaE1hcChpdGVtLCBjb25maWcpKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZUhhc2hNYXAoaXRlbSwgY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhZGRPYnNlcnZlKG5ld09ic2VydmVyLCBjb25maWcsIGZ1bmN0aW9uIChlbnRyeSwgX2NvbmZpZykge1xuICAgICAgICAgICAgbWluaVV0aWwuZ2V0SW5kZXhCeVJlY3QoX2NvbmZpZy5jc3NTZWxlY3RvcixlbnRyeS5ib3VuZGluZ0NsaWVudFJlY3QsZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgICAgICAgICB2YXIgX2luZGV4ID0gaW5kZXggKyAxO1xuICAgICAgICAgICAgICBpZiAoX2luZGV4KSB7XG4gICAgICAgICAgICAgICAgdmFyIF9lbnRyeSA9IGNsb25lRGVlcChlbnRyeSk7XG4gICAgICAgICAgICAgICAgX2VudHJ5LmluZGV4ID0gJycgKyBfaW5kZXg7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFzZXQgPSBjbG9uZURlZXAoX2VudHJ5LmRhdGFzZXQpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUhhc2hNYXAoe1xuICAgICAgICAgICAgICAgICAgaWQ6IF9lbnRyeS5pZCxcbiAgICAgICAgICAgICAgICAgIGluZGV4OiBfZW50cnkuaW5kZXgsXG4gICAgICAgICAgICAgICAgICBkYXRhc2V0OiBkYXRhc2V0LFxuICAgICAgICAgICAgICAgIH0sIF9jb25maWcpO1xuICAgICAgICAgICAgICAgIGV4cG9zdXJlSGFuZGxlKF9lbnRyeSwgZGF0YXNldCwgY29uZmlnKTsgIFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB3YWl0KCsrY291bnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG4gIHdhaXQoMCk7XG5cbiAgZnVuY3Rpb24gY2hlY2tJc0luSGFzaE1hcCAoZWxlbWVudCwgY29uZmlnKSB7XG4gICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGVsZW1lbnQsIGNvbmZpZyk7XG4gICAgdmFyIGluZGV4ID0gZWxlbWVudC5pbmRleDtcbiAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcbiAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldLmZvckVhY2goZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5oYXNoX3ZhbHVlID09PSBoYXNoICYmIGVsZW1lbnQuaW5kZXggPT09IGluZGV4KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbXMge09iamVjdH0gZSB7XG4gICAqICAgaWQsIGRhdGFzZXQsIHBvc2l0aW9uXG4gICAqIH1cbiAgICovXG4gIGZ1bmN0aW9uIHVwZGF0ZUhhc2hNYXAoZSwgY29uZmlnKSB7XG4gICAgdmFyIGhhc2ggPSBnZXRIYXNoS2V5KGUsIGNvbmZpZyk7XG4gICAgdHJ5IHtcbiAgICAgIHZhciBpbmRleCA9IGUuaW5kZXg7XG4gICAgICBpZiAoX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0pIHtcbiAgICAgICAgdmFyIGV4aXN0ID0gMDtcbiAgICAgICAgX2hhc2hNYXBbY29uZmlnLmxvZ2tleV0uZm9yRWFjaChmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgICAgICAgaWYgKGVsZW1lbnQuaGFzaF92YWx1ZSA9PT0gaGFzaCkge1xuICAgICAgICAgICAgZXhpc3QgPSAxO1xuICAgICAgICAgICAgaWYgKGUuaWQpIGVsZW1lbnQuaWQgPSBlLmlkO1xuICAgICAgICAgICAgaWYgKGUuZGF0YXNldCkgZWxlbWVudC5kYXRhc2V0ID0gZS5kYXRhc2V0O1xuICAgICAgICAgICAgaWYgKGUuc3RhdHVzKSBlbGVtZW50LnN0YXR1cyA9IGUuc3RhdHVzO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghZXhpc3QpIHtcbiAgICAgICAgICBfaGFzaE1hcFtjb25maWcubG9na2V5XS5wdXNoKHtcbiAgICAgICAgICAgIGlkOiBlLmlkLFxuICAgICAgICAgICAgaGFzaF92YWx1ZTogaGFzaCxcbiAgICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICAgIGV4cENvbmZpZzogY29uZmlnLFxuICAgICAgICAgICAgZGF0YXNldDogZS5kYXRhc2V0LFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9oYXNoTWFwW2NvbmZpZy5sb2drZXldID0gW3tcbiAgICAgICAgICBpZDogZS5pZCxcbiAgICAgICAgICBoYXNoX3ZhbHVlOiBoYXNoLFxuICAgICAgICAgIHN0YXR1czogMCxcbiAgICAgICAgICBleHBDb25maWc6IGNvbmZpZyxcbiAgICAgICAgICBkYXRhc2V0OiBlLmRhdGFzZXQsXG4gICAgICAgICAgaW5kZXg6IGluZGV4XG4gICAgICAgIH1dO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdlcnJvciA9PT0gJywgZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5pdE9ic2VydmVyKGNvbnRleHQpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgIHRocmVzaG9sZHM6IFtfY29uZmlnLkFVVE9fQVRfVklFV19SQVRFXSxcbiAgICAgIGluaXRpYWxSYXRpbzogMFxuICAgIH07XG4gICAgdmFyIGlzTVkgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgaWYgKG15KSB7XG4gICAgICAgIGlzTVkgPSB0cnVlO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgaWYgKGlzTVkpIHtcbiAgICAgIC8vIOiaguiageeahOabneWFieebkeWQrOWSjOW+ruS/oeS4jeS4gOiHtO+8jGh0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlwcm9ncmFtL2Rldi9hcGkvd3htbC93eC5jcmVhdGVJbnRlcnNlY3Rpb25PYnNlcnZlci5odG1sXG4gICAgICAvLyBodHRwczovL29wZW5kb2NzLmFsaXBheS5jb20vbWluaS9hcGkvaW50ZXJzZWN0aW9ub2JzZXJ2ZXJcbiAgICAgIG9wdGlvbnMuc2VsZWN0QWxsID0gdHJ1ZTtcbiAgICAgIHJldHVybiBjdHguY3JlYXRlSW50ZXJzZWN0aW9uT2JzZXJ2ZXIob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbnMub2JzZXJ2ZUFsbCA9IHRydWU7XG4gICAgICByZXR1cm4gY3R4LmNyZWF0ZUludGVyc2VjdGlvbk9ic2VydmVyKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZE9ic2VydmUob2JzZXJ2ZXIsIGNvbmZpZywgY2FsbGJhY2spIHtcbiAgICB2YXIgY3NzID0gY29uZmlnLmNzc1NlbGVjdG9yO1xuICAgIGlmIChjc3MgJiYgIXV0aWxEYXNoLmlzU3RhcnRXaXRoKGNzcywgJy4nKSkge1xuICAgICAgY3NzID0gJy4nICsgY3NzO1xuICAgIH1cbiAgICBpZiAoY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpIHtcbiAgICAgIG9ic2VydmVyLnJlbGF0aXZlVG8oY29uZmlnLnBvc2l0aW9uU2VsZWN0b3IpLm9ic2VydmUoY3NzLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY2FsbGJhY2socmVzLCBjb25maWcpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yTWVzc2FnZTogJywgZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBvYnNlcnZlci5yZWxhdGl2ZVRvVmlld3BvcnQoKS5vYnNlcnZlKGNzcywgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNhbGxiYWNrKHJlcywgY29uZmlnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvck1lc3NhZ2U6ICcsIGUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBleHBvc3VyZUhhbmRsZSAoZW50cnksIGRhdGFzZXQsIGNvbmZpZykge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBleHBvc3VyZVRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB2YXIgZXhwRWxlbWVudHMgPSBjaGVja1N0YXJ0KGV4cG9zdXJlVGltZSwgZW50cnksIGNvbmZpZyk7XG5cbiAgICBpZiAoZXhwRWxlbWVudHMgJiYgZXhwRWxlbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGVsZW1lbnQgPSBleHBFbGVtZW50c1swXTtcblxuICAgICAgdmFyIHNwbURhdGEgPSB7fTtcbiAgICAgIHZhciBfc3BtRGF0YSA9IHV0aWwuanNvbkxpa2VTdHIySlNPTihkYXRhc2V0LnRyYWNrZXJQYXJhbXMgfHwge30pIHx8IHt9O1xuICAgICAgdmFyIF9pbmRleCA9IGVsZW1lbnQuaW5kZXg7XG4gICAgICBpZiAoYXBsdXMuZ2xvYmFsQ29uZmlnICYmIGFwbHVzLmdsb2JhbENvbmZpZy5pc0FsaSkge1xuICAgICAgICBzcG1EYXRhID0gY2xvbmVEZWVwKGFwbHVzLl8kLnNwbS5kYXRhIHx8IHt9KTtcbiAgICAgICAgaWYgKHJheFV0aWwuaXNSYXgoKSkge1xuICAgICAgICAgIHZhciBkb21EYXRhU2V0ID0gcmF4VXRpbC5nZXREYXRhU2V0KGNvbmZpZyxfaW5kZXgtMSk7XG4gICAgICAgICAgdmFyIGMgPSBkb21EYXRhU2V0LnNwbUMgfHwgY29uZmlnLnNwbUMgfHwgJzAnO1xuICAgICAgICAgIHZhciBkID0gZG9tRGF0YVNldC5zcG1EIHx8IGNvbmZpZy5zcG1EIHx8ICcwJztcbiAgICAgICAgICBzcG1EYXRhLmMgPSBjO1xuICAgICAgICAgIHNwbURhdGEuZCA9IGQ7XG4gICAgICAgICAgLy8g6KGl5YWFIHJheCBkYXRhLSog5bGe5oCnXG4gICAgICAgICAgZGF0YXNldCA9IE9iamVjdC5hc3NpZ24oZGF0YXNldCwgZG9tRGF0YVNldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g5Y+WZGF0YS10cmFja2VyIOaIliBjc3NTZWxlY3RvclxuICAgICAgICAgIHZhciBzcG1DID0gZGF0YXNldC50cmFja2VyIHx8IGNvbmZpZy5jc3NTZWxlY3Rvci5yZXBsYWNlKC9cXCd8XFxcInxcXDt8XFw6fFxcPXxcXFt8XFxdfFxcLnxcXCN8XFwtfFxcL3xcXHwvZywgJycpOyAvLyDljrvmjonnibnmrorlrZfnrKZcbiAgICAgICAgICAvLyDmm53lhYnop6blj5HnmoRzcG3kuI3msaHmn5PlhajlsYBhcGx1cy5fJC5zcG0uZGF0Ye+8jOaVhei/memHjOWBmua3seaLt+i0nVxuICAgICAgICAgIHNwbURhdGEuYyA9IHNwbUM7XG4gICAgICAgICAgaWYgKHNwbURhdGEuYyAmJiBzcG1EYXRhLmMgIT09ICcwJykge1xuICAgICAgICAgICAgdmFyIHNwbUQgPSAnZCcgKyBfaW5kZXg7XG4gICAgICAgICAgICBzcG1EYXRhLmQgPSBzcG1EO1xuICAgICAgICAgIH0gIFxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSkge1xuICAgICAgICAgIHNwbURhdGEuYiA9IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChjb25maWcuc3BtQykge1xuICAgICAgICAgIHNwbURhdGEuYyA9IGNvbmZpZy5zcG1DO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNwbURhdGEuYyA9IF9zcG1EYXRhLnNwbUMgPyBlbmNvZGVVUklDb21wb25lbnQoX3NwbURhdGEuc3BtQykgOiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjb25maWcuc3BtRCkge1xuICAgICAgICAgIHNwbURhdGEuZCA9IF9pbmRleCA/IGNvbmZpZy5zcG1EICsgJ18nICsgX2luZGV4IDogY29uZmlnLnNwbUQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3BtRGF0YS5kID0gX3NwbURhdGEuc3BtRCA/IGVuY29kZVVSSUNvbXBvbmVudChfc3BtRGF0YS5zcG1EKSA6ICcnO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB3YXRjaFRyYWNrZXIucHVzaEV2ZW50KCdFWFAnLCBkYXRhc2V0LCBjb25maWcsIE9iamVjdC5hc3NpZ24oe30sIGVudHJ5LCB7XG4gICAgICAgIHg6IGVsZW1lbnQueCxcbiAgICAgICAgeTogZWxlbWVudC55LFxuICAgICAgICB3aWR0aDogZWxlbWVudC53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmhlaWdodCxcbiAgICAgICAgaGFzaF92YWx1ZTogZWxlbWVudC5oYXNoX3ZhbHVlXG4gICAgICB9KSwgc3BtRGF0YSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2hlY2tTdGFydCAoZXhwb3N1cmVUaW1lLCBlbnRyeSwgY29uZmlnKSB7XG4gICAgLy8gdmFyIHNpemUgPSAwO1xuICAgIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcbiAgICB2YXIgX2hhc2hNYXAgPSBfYXBsdXNfYXV0b19leHAuaGFzaE1hcCB8fCB7fTsgICAgXG4gICAgdmFyIHRlbXBzID0gW107XG4gICAgZm9yICh2YXIgbG9na2V5IGluIF9oYXNoTWFwKSB7XG4gICAgICB2YXIgZWxlX3MgPSBfaGFzaE1hcFtsb2drZXldIHx8IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVfcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAvLyB2YXIgc3RyaW5nID0gY29uZmlnLmxvZ2tleSArICdfJyArIGNvbmZpZy5jc3NTZWxlY3RvciArICdfJ1xuICAgICAgICAvLyAgICAgICAgICAgICAgKyBjb25maWcucG9zaXRpb25TZWxlY3RvciArICdfJyArIG9wdHMuaWQgKyBKU09OLnN0cmluZ2lmeShvcHRzLmRhdGFzZXQpO1xuICAgICAgICB2YXIgaGFzaCA9IGdldEhhc2hLZXkoZW50cnksIGNvbmZpZyk7XG4gICAgICAgIHZhciB2ID0gZWxlX3NbaV0gfHwge307XG4gICAgICAgIGlmICh2LnN0YXR1cyA9PT0gMCAmJiB2LmV4cENvbmZpZyAmJiBoYXNoID09PSB2Lmhhc2hfdmFsdWUpIHtcbiAgICAgICAgICB2YXIgX2VsZVBvcyA9IGVudHJ5LmJvdW5kaW5nQ2xpZW50UmVjdCB8fCB7fTtcbiAgICAgICAgICBpZiAoX2VsZVBvcy53aWR0aCAmJiBfZWxlUG9zLmhlaWdodCkge1xuICAgICAgICAgICAgdi5kYXRhc2V0ID0gZW50cnkuZGF0YXNldDtcbiAgICAgICAgICAgIHYueCA9IF9lbGVQb3MubGVmdDtcbiAgICAgICAgICAgIHYueSA9IF9lbGVQb3MudG9wO1xuICAgICAgICAgICAgdi53aWR0aCA9IF9lbGVQb3Mud2lkdGg7XG4gICAgICAgICAgICB2LmhlaWdodCA9IF9lbGVQb3MuaGVpZ2h0O1xuICAgICAgICAgICAgdi5zaXplID0gX2VsZVBvcy53aWR0aCAqIF9lbGVQb3MuaGVpZ2h0O1xuICAgICAgICAgICAgLy8gUmF45qGG5p625YaF77yM5reY5a6d5bCP56iL5bqPIOmAmui/hyB0aHJlc2hvbGRzLCBvYnNlcnZlci5vYnNlcnZlIOayoeaciWNhbGxiYWNr6L+U5Zue77yM5Zug5q2k5pS55oiQ6buY6K6k5YC85Li6MFxuICAgICAgICAgICAgdmFyIGRlZmF1bHRSYXRpbyA9IF9jb25maWcuQVVUT19BVF9WSUVXX1JBVEU7XG4gICAgICAgICAgICBpZiAoZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPj0gZGVmYXVsdFJhdGlvKSB7XG4gICAgICAgICAgICAgIHYuZXhwb3N1cmVUaW1lID0gZXhwb3N1cmVUaW1lO1xuICAgICAgICAgICAgICB2LnN0YXR1cyA9IDE7IC8vIOabneWFieeKtuaAgVxuICAgICAgICAgICAgICB0ZW1wcy5wdXNoKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGVtcHM7XG4gIH1cbn07XG5cbmV4cG9ydHMucmVzZXQgPSBmdW5jdGlvbiAoKSB7fTtcblxuZXhwb3J0cy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHdhdGNoVHJhY2tlci5jbGVhclJlY29yZCgpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IG9ic2VydmVycy5sZW5ndGg7IGkrKykge1xuICAgIG9ic2VydmVyc1tpXS5kaXNjb25uZWN0KCk7XG4gIH1cbiAgb2JzZXJ2ZXJzID0gW107XG4gIHZhciBfYXBsdXNfYXV0b19leHAgPSB1dGlsR29sZGxvZy5nZXRHb2xkbG9nVmFsKCdfYXBsdXNfYXV0b19leHAnKSB8fCB7fTtcbiAgdmFyIF9oYXNoTWFwID0gX2FwbHVzX2F1dG9fZXhwLmhhc2hNYXAgfHwge307XG4gIGZvciAodmFyIGxvZ2tleSBpbiBfaGFzaE1hcCkge1xuICAgIGRlbGV0ZSBfaGFzaE1hcFtsb2drZXldO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL2xpYl9hdXRvX2V4cC9jb2xsZWN0X2V4cC5qc1xuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciB1dGlsTWV0YSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsTWV0YScpO1xuLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xuZXhwb3J0cy5EQVRBX0FQTFVTX0FFX0tFWSA9ICdkYXRhLWFwbHVzLWFlJztcbmV4cG9ydHMuREFUQV9BUExVU19BQ19LRVkgPSAnZGF0YS1hcGx1cy1jbGsnO1xuZXhwb3J0cy5EQVRBX0FQTFVTX1NQTV9BTkNIT1JfSURfS0VZID0gJ2RhdGEtc3BtLWFuY2hvci1pZCc7XG5leHBvcnRzLkRBVEFfQVBMVVNfVlRfSVRFTV9JTkRFWF9LRVkgPSAnZGF0YS1hcGx1cy12dC1wb3MnO1xuXG4vLyDkuI3mlK/mjIFvYnNlcnZlcueahOaDheWGteS4i++8jOi9ruivoumXtOmalO+8iG1zKVxuZXhwb3J0cy5MT09QX1RJTUUgPSAxMDAwO1xuXG5leHBvcnRzLmdldERlZmF1bHRSZXF1ZXN0Q2ZnID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4ge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHBrZ1NpemU6IDEwXG4gIH07XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRhVmFsdWUgKGtleSkge1xuICBpZiAoYXBsdXMgJiYgYXBsdXMuZ2V0TWV0YUluZm8pIHtcbiAgICByZXR1cm4gYXBsdXMuZ2V0TWV0YUluZm8oa2V5KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdXRpbE1ldGEuZ2V0TWV0YUNudChrZXkpO1xuICB9XG59XG5cbi8vIOiHquWKqOabneWFieaJk+eCuSAtIOWIpOWumuWPr+inhueahOavlOS+i+eOh1xudmFyIGdldEF1dG9FeHBWaWV3UmF0ZSA9IGZ1bmN0aW9uKGRlZmF1bHRfdmFsdWUpIHtcbiAgdmFyIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuICB0cnkge1xuICAgIHZhciB2aXNpYmxlX3JhdGUgPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXZpc2libGUnKTtcbiAgICBpZiAodmlzaWJsZV9yYXRlKSB7XG4gICAgICByYXRlID0gcGFyc2VGbG9hdCh2aXNpYmxlX3JhdGUpO1xuICAgIH1cbiAgICBpZiAocmF0ZSA8PSAwKSB7XG4gICAgICByYXRlID0gZGVmYXVsdF92YWx1ZTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIHJhdGUgPSBkZWZhdWx0X3ZhbHVlO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiByYXRlO1xuICB9XG59O1xuZXhwb3J0cy5BVVRPX0FUX1ZJRVdfUkFURSA9IGdldEF1dG9FeHBWaWV3UmF0ZSgwLjMpO1xuXG4vLyB2YXIgRVhQX0RFQk9VTkNFX0RVUkFUSU9OID0gMTAwOyAvLyBkZWJvdWNlIGR1cmF0aW9uIDEwMG1zXG5cbi8qKlxuICog5pyJ5pWI5pud5YWJ5pe26ZW/5bqV57q/IC0g5q+r56eS5pWwKG1zKVxuICogQHBhcmFtcyB7TnVtYmVyfSBkZWZhdWx0X3ZhbHVlIGlzIDMwMG1zXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IGR1cmF0aW9uXG4gKi9cbnZhciBnZXRBdXRvRXhwRHVyYXRpb24gPSBmdW5jdGlvbihkZWZhdWx0X3ZhbHVlKSB7XG4gIHZhciBkdXJhdGlvbiA9IGRlZmF1bHRfdmFsdWU7XG4gIHRyeSB7XG4gICAgdmFyIHRtcF9kdXJhdGlvbiA9IGdldE1ldGFWYWx1ZSgnYXBsdXMtYXV0by1leHAtZHVyYXRpb24nKTtcbiAgICB2YXIgZHVyYXRpb25fbiA9IHBhcnNlSW50KHRtcF9kdXJhdGlvbik7XG4gICAgaWYgKChkdXJhdGlvbl9uICsgJycpICE9PSAnTmFOJykge1xuICAgICAgZHVyYXRpb24gPSBkdXJhdGlvbl9uO1xuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGR1cmF0aW9uO1xuICB9XG59O1xuZXhwb3J0cy5FWFBfRFVSQVRJT04gPSBnZXRBdXRvRXhwRHVyYXRpb24oMzAwKTsgLy/pu5jorqQzMDBtc1xuXG4vLyBkZWJvdWNlIGR1cmF0aW9uIDEwMG1zXG4vLyBleHBvcnRzLmdldERlYm91bmNlRHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4vLyAgIHJldHVybiBFWFBfREVCT1VOQ0VfRFVSQVRJT047XG4vLyB9O1xuXG4vKipcbiAqIOiOt+WPluiHquWKqOabneWFiemFjee9rumhue+8jOW5tuWwhmZpbHRlcuOAgXRhZ+WSjGNzc1NlbGVjdG9y5ZCI5bm25Li6ZWxlbWVudFNlbGVjdG9yXG4gKiBUT0RPIEpTT04ucGFyc2Ug5LuF5pSv5oyBSUU45Y+K5Lul5LiK5rWP6KeI5ZmoID0+IGpzIGFwaVxuICogQHBhcmFtcyBrZXkge1N0cmluZ30gJ2FwbHVzLWF1dG8tZXhwJy8nYXBsdXMtYXV0by1jbGsnXG4gKiBAcmV0dXJuIHtBcnJheX0gW3tcbiAqICAgIGxvZ2tleTogL2EuYi5jMSxcbiAqICAgIGVsZW1lbnRTZWxlY3RvcjogJ2RpdltzY209MTIzNF0nLFxuICogICAgdGFnOiBkaXYsXG4gKiAgICBmaWx0ZXI6IHNjbT0xMjM0XG4gKiAgICBwb3NpdGlvblNlbGVjdG9yOiB0cnVlLy5wYXJlbnRDbGFzc25hbWUgLy8g55u45a+55a6a5L2N5Lia5Yqh5Z+L54K5XG4gKiB9LCB7XG4gKiAgICBsb2drZXk6IC9hLmIuYzIsXG4gKiAgICBlbGVtZW50U2VsZWN0b3I6ICdwW3NjbT0yMzQ1XS5vbmUnLFxuICogICAgdGFnOiBwLFxuICogICAgZmlsdGVyOiBzY209MjM0NSxcbiAqICAgIGNzc1NlbGVjdG9yOiAub25lXG4gKiB9LCB7XG4gKiAgICBsb2drZXk6IC9hLmIuYzMsXG4gKiAgICBlbGVtZW50U2VsZWN0b3I6ICdwW2RhdGEtc3BtLWNsaWNrXScsXG4gKiAgICB0YWc6IHAsXG4gKiAgICBmaWx0ZXI6IGRhdGEtc3BtLWNsaWNrXG4gKiB9XVxuICovXG52YXIgZ2V0QXV0b0NvbmZpZyA9IGZ1bmN0aW9uKGNvbmZpZ0tleSwgbWV0YU9iaikge1xuICB2YXIgY29uZmlncyA9IFtdO1xuICAvLyB2YXIgdG1wX2xvZ2tleXMgPSBbXTtcbiAgdmFyIHRtcF90YWdfZmlsdGVyID0gW107XG4gIHZhciBhcGx1c0F1dG9FeHA7XG4gIHRyeSB7XG4gICAgYXBsdXNBdXRvRXhwID0gbWV0YU9iaiB8fCBnZXRNZXRhVmFsdWUoY29uZmlnS2V5KTtcbiAgICB2YXIgdGVtcHMgPSBbXTtcbiAgICBpZiAoYXBsdXNBdXRvRXhwICYmIHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0ZW1wcyA9IEpTT04ucGFyc2UoYXBsdXNBdXRvRXhwKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGVtcHMgPSBKU09OLnBhcnNlKGFwbHVzQXV0b0V4cC5yZXBsYWNlKC8nL2csICdcIicpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcGx1c0F1dG9FeHAgPT09ICdvYmplY3QnICYmIGFwbHVzQXV0b0V4cC5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcbiAgICAgIHRlbXBzID0gYXBsdXNBdXRvRXhwO1xuICAgIH1cbiAgICBpZiAodGVtcHMgJiYgdGVtcHMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRlbXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0bXAgPSB0ZW1wc1tpXSB8fCB7fTtcbiAgICAgICAgdmFyIGxvZ2tleSA9IHRtcC5sb2drZXkgfHwgJyc7XG4gICAgICAgIHZhciB0YWcgPSB0bXAudGFnID8gdG1wLnRhZyA6ICcnO1xuICAgICAgICB2YXIgZmlsdGVyID0gdG1wLmZpbHRlcjtcbiAgICAgICAgdmFyIGNzc1NlbGVjdG9yID0gdG1wLmNzc1NlbGVjdG9yO1xuICAgICAgICB2YXIgd2hvbGVTZWxlY3RvciA9IGNzc1NlbGVjdG9yIHx8ICh0YWcgJiYgZmlsdGVyKTtcbiAgICAgICAgaWYgKCFsb2drZXkgfHwgIXdob2xlU2VsZWN0b3IpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCAnICsgSlNPTi5zdHJpbmdpZnkodG1wKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gMjAxNy0xMS0yMyDmiYvmt5jmjqXlhaXlkoxsYXphZGHkuJrliqHpnIDmsYLvvIzlhYHorrhsb2drZXnph43lpI1cbiAgICAgICAgLy8gaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF9sb2drZXlzLCBsb2drZXkpID4gLTEpIHtcbiAgICAgICAgLy8gICB0aHJvdyBuZXcgRXJyb3IoJ21ldGEgJyArIGNvbmZpZ0tleSArICcgY29uZmlnIGVycm9yLCBsb2drZXkgJyArIGxvZ2tleSArICcgcmVwZWF0ZWQnKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBmaWx0ZXIgPSB0eXBlb2YgZmlsdGVyID09PSAnc3RyaW5nJyA/IGZpbHRlci5zcGxpdChcIj1cIikgOiBbXTtcbiAgICAgICAgdmFyIHRhZ19maWx0ZXIgPSB0YWc7XG4gICAgICAgIGlmIChmaWx0ZXIubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICB0YWdfZmlsdGVyICs9ICdbJyArIGZpbHRlci5zaGlmdCgpICsgJz1cIicgKyBkZWNvZGVVUklDb21wb25lbnQoZmlsdGVyLmpvaW4oJycpKSArICdcIl0nO1xuICAgICAgICB9IGVsc2UgaWYgKGZpbHRlci5sZW5ndGggPT0gMSAmJiBmaWx0ZXJbMF0pIHtcbiAgICAgICAgICB0YWdfZmlsdGVyICs9ICdbJyArIGRlY29kZVVSSUNvbXBvbmVudChmaWx0ZXJbMF0pICsgJ10nO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjc3NTZWxlY3Rvcikge1xuICAgICAgICAgIHRhZ19maWx0ZXIgKz0gY3NzU2VsZWN0b3I7XG4gICAgICAgIH1cblxuICAgICAgICB0bXAuZWxlbWVudFNlbGVjdG9yID0gdGFnX2ZpbHRlcjtcbiAgICAgICAgaWYgKHV0aWxBcnJheS5pbmRleG9mKHRtcF90YWdfZmlsdGVyLCB0YWdfZmlsdGVyKSA+IC0xKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRhICcgKyBjb25maWdLZXkgKyAnIGNvbmZpZyBlcnJvciwgdGFnX2ZpbHRlcl9jc3NTZWxlY3RvciAnICsgdGFnX2ZpbHRlciArICcgcmVwZWF0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyB0bXBfbG9na2V5cy5wdXNoKGxvZ2tleSk7XG4gICAgICAgIHRtcF90YWdfZmlsdGVyLnB1c2godGFnX2ZpbHRlcik7XG4gICAgICAgIGNvbmZpZ3MucHVzaCh0bXApO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gVE9ETyDnm5Hmjqfov5nlnZflhoXlrrlcbiAgICB1bG9nKCkudyhlcnIpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZXJyXG4gICAgLy8gfSk7XG4gIH0gZmluYWxseSB7XG4gICAgcmV0dXJuIGNvbmZpZ3M7XG4gIH1cbn07XG5cbi8qKlxuICog6I635Y+W5pud5YWJ6Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0V4cENvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcbiAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tZXhwJywgbWV0YU9iaikgfHwgW107XG59O1xuLyoqXG4gKiDojrflj5bmm53lhYnoh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvRXhwVXNlckZuID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhZUF1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tZXhwLXVzZXJmbicpO1xuICBpZiAoYWVBdXRvVXNlckZuKSB7XG4gICAgdmFyIGZuID0gd2luZG93W2FlQXV0b1VzZXJGbl0gfHwgYWVBdXRvVXNlckZuO1xuICAgIGlmICh0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vLyA8bWV0YSBuYW1lPVwiYXBsdXMtYXV0by1leHAtd2F0Y2hkb21cIiBjb250ZW50PVwidGhyb3R0bGVcIiAvPlxuZXhwb3J0cy5pc1Rocm90dGxlV2F0Y2hEb20gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBycyA9IGZhbHNlO1xuICB0cnkge1xuICAgIHJzID0gZ2V0TWV0YVZhbHVlKCdhcGx1cy1hdXRvLWV4cC13YXRjaGRvbScpID09PSAndGhyb3R0bGUnO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIHJzO1xufTtcbi8qKlxuICog6I635Y+W54K55Ye76Ieq5Yqo6YeH6ZuG55qE6YWN572u6aG5XG4gKi9cbmV4cG9ydHMuZ2V0QXV0b0Nsa0NvbmZpZyA9IGZ1bmN0aW9uKG1ldGFPYmopIHtcbiAgcmV0dXJuIGdldEF1dG9Db25maWcoJ2FwbHVzLWF1dG8tY2xrJywgbWV0YU9iaikgfHwgW107XG59O1xuLyoqXG4gKiDojrflj5bngrnlh7voh6rliqjph4fpm4bnmoTphY3nva7poblcbiAqL1xuZXhwb3J0cy5nZXRBdXRvQ2xrVXNlckZuID0gZnVuY3Rpb24oKSB7XG4gIHZhciBhY0F1dG9Vc2VyRm4gPSBnZXRNZXRhVmFsdWUoJ2FwbHVzLWF1dG8tY2xrLXVzZXJmbicpO1xuICBpZiggYWNBdXRvVXNlckZuICl7XG4gICAgdmFyIGZuID0gd2luZG93W2FjQXV0b1VzZXJGbl0gfHwgYWNBdXRvVXNlckZuO1xuICAgIGlmKCB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicgKXtcbiAgICAgIHJldHVybiBmbjtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc193ZWIvbGliX2NvbW1vbi9jb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogcHJvamVjdCAtIGZpbGVwYXRoXG4gKiDmk43kvZxtZXRh55qE5bel5YW357G7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIF9oZWFkX25vZGU7XG52YXIgX21ldGFfbm9kZXM7XG5cbnZhciB1dGlsQXR0cmlidXRlID0gcmVxdWlyZSgnLi91dGlsQXR0cmlidXRlJyk7XG4vKipcbiAqIOWPluW+l+mhtemdouS4iiBoZWFkIOS4reeahOaJgOaciSBtZXRhIOWFg+e0oFxuICogQHBhcmFtIFtmb3JjZV0ge2Jvb2xlYW59IOaYr+WQpuW8uuWItuiOt+WPluaWsOWGheWuuVxuICovXG5mdW5jdGlvbiBnZXRNZXRhVGFncyhmb3JjZSkge1xuICBfaGVhZF9ub2RlID0gX2hlYWRfbm9kZSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuXG4gIGlmIChfbWV0YV9ub2RlcyAmJiAhZm9yY2UpIHtcbiAgICByZXR1cm4gX21ldGFfbm9kZXM7XG4gIH1cblxuICByZXR1cm4gX2hlYWRfbm9kZSA/IChfbWV0YV9ub2RlcyA9IF9oZWFkX25vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ21ldGEnKSkgOiBbXTtcbn07XG5leHBvcnRzLmdldE1ldGFUYWdzID0gZ2V0TWV0YVRhZ3M7XG5cbi8qKlxuICog5Y+W5b6XIGhlYWQgLyBtZXRhIOS4reaMh+WumiBtZXRhIOeahCAoYXR0ciB8fCBjb250ZW50KSDlgLxcbiAqIDxtZXRhIG5hbWU9XCJhcGx1cy10ZXJtaW5hbFwiIGNvbnRlbnQ9XCIxXCI+XG4gKi9cbmZ1bmN0aW9uIGdldE1ldGFDbnQobmFtZSwgYXR0cikge1xuICB2YXIgaTtcbiAgdmFyIG1ldGE7XG4gIHZhciBtZXRhX25vZGVzID0gZ2V0TWV0YVRhZ3MoKTtcbiAgdmFyIGwgPSBtZXRhX25vZGVzLmxlbmd0aDtcbiAgdmFyIGNvbnRlbnQ7XG5cbiAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgIG1ldGEgPSBtZXRhX25vZGVzW2ldO1xuICAgIGlmICh1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsICduYW1lJykgPT09IG5hbWUpIHtcbiAgICAgIGNvbnRlbnQgPSB1dGlsQXR0cmlidXRlLnRyeVRvR2V0QXR0cmlidXRlKG1ldGEsIGF0dHIgfHwgJ2NvbnRlbnQnKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29udGVudCB8fCAnJztcbn07XG5leHBvcnRzLmdldE1ldGFDbnQgPSBnZXRNZXRhQ250O1xuXG5cbi8qKlxuICog56Gu5a6aIGhlYWQgLyBtZXRhIOS4reeahCBpc29uZXBhZ2Ug55qE5pWw5o2uXG4gKiDlvaLlpoLvvJpcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMFwiIC8+IOihqOekuuS4jeaYr29uZXBhZ2VcbiAqIDxtZXRhIG5hbWU9XCJpc29uZXBhZ2VcIiBjb250ZW50PVwiMXxodHRwOi8vaDUubS50YW9iYW8uY29tL3dlL2luZGV4Lmh0bSNkZXRhaWxcIiAvPiDooajnpLrmmK9vbmVwYWdlXG4gKi9cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBnZXRPbmVQYWdlSW5mbyhtZXRhSW5mbykge1xuICB2YXIgb2JqID0ge1xuICAgIGlzb25lcGFnZTogJy0xJyxcbiAgICB1cmxwYWdlbmFtZTogJydcbiAgfTtcbiAgdmFyIG1ldGFfaW5mbyA9IG1ldGFJbmZvLnFHZXQoKTtcbiAgaWYgKG1ldGFfaW5mbyAmJiBtZXRhX2luZm8uaGFzT3duUHJvcGVydHkoJ2lzb25lcGFnZV9kYXRhJykpIHtcbiAgICBvYmouaXNvbmVwYWdlID0gbWV0YV9pbmZvLmlzb25lcGFnZV9kYXRhLmlzb25lcGFnZTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBtZXRhX2luZm8uaXNvbmVwYWdlX2RhdGEudXJscGFnZW5hbWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRlbnQgPSBnZXRNZXRhQ250KCdpc29uZXBhZ2UnKSB8fCAnLTEnO1xuICAgIHZhciBhcnJfY29udGVudCA9IGNvbnRlbnQuc3BsaXQoXCJ8XCIpO1xuICAgIG9iai5pc29uZXBhZ2UgPSBhcnJfY29udGVudFswXTtcbiAgICBvYmoudXJscGFnZW5hbWUgPSBhcnJfY29udGVudFsxXSA/IGFycl9jb250ZW50WzFdIDogXCJcIjtcbiAgfVxuICByZXR1cm4gb2JqO1xufTtcbmV4cG9ydHMuZ2V0T25lUGFnZUluZm8gPSBnZXRPbmVQYWdlSW5mbztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL3V0aWxNZXRhLmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zL3NyYy9saWJfdS91dGlscy91dGlsQXR0cmlidXRlLmpzXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0cy50cnlUb0dldEF0dHJpYnV0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGF0dHJfbmFtZSkge1xuICByZXR1cm4gZWxlbWVudCAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSA/IChlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyX25hbWUpIHx8ICcnKSA6ICcnO1xufTtcblxudmFyIHRyeVRvU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJfbmFtZSwgYXR0cl92YWx1ZSkge1xuICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LnNldEF0dHJpYnV0ZSkge1xuICAgIHRyeSB7XG4gICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyX25hbWUsIGF0dHJfdmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gIH1cbn07XG5leHBvcnRzLnRyeVRvU2V0QXR0cmlidXRlID0gdHJ5VG9TZXRBdHRyaWJ1dGU7XG5cbmV4cG9ydHMudHJ5VG9SZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cl9uYW1lKSB7XG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJfbmFtZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdHJ5VG9TZXRBdHRyaWJ1dGUoZWxlbWVudCwgYXR0cl9uYW1lLCAnJyk7XG4gICAgfVxuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGRlc2NyaXB0aW9uXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgYXBsdXNTdGF0aWMgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbi8vIHZhciBVUERBVEUgPSAndXBkYXRlJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcHVzaFF1ZXVlOmZ1bmN0aW9uKG1ldGhvZE5hbWUsIGFyZ3Mpe1xuICAgICAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzX3F1ZXVlJyk7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMuJyArIG1ldGhvZE5hbWUsXG4gICAgICAgIGFyZ3VtZW50czogYXJnc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVUyk7XG4gICAgICBlYWNoKGFwbHVzU3RhdGljLm9wZW5BUElzLCBmdW5jdGlvbiAodikge1xuICAgICAgICBhcGx1c1t2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICAgICAgICBlYWNoKGFyZ3VtZW50cywgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdmFyIG1ldGhvZE5hbWUgPSB2ID09PSAnZW50ZXInID8gJ19zZW5kUFYnIDogJ18nICsgdjtcblxuICAgICAgICAgIF9zZWxmLnB1c2hRdWV1ZShtZXRob2ROYW1lLCBpdGVtcyk7XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2luc19taW5pL29wZW5fYXBpLmpzXG4vLyBtb2R1bGUgaWQgPSA4NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIGFsaWxvZy9zIC0gc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcbiAqXG4gKiBjbGllbnRJbmZvIGZvciBtaW5pYXBwXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIG1pbmkgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy9taW5pJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCcuLi9saWJfdS91dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJbmqKHlnZcsIOS4quaAp+WMlumDqOWIhuWtkOexu+S4reWunueOsFxuICAgICAqL1xuICAgIC8vIGluaXQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAvLyAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgLy8gfSxcblxuICAgIF9nZXROZXR3b3JrVHlwZTogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgY3R4ID0gbWluaS5nZXRDb250ZXh0KCk7XG4gICAgICBpZiAoY3R4LmdldE5ldHdvcmtUeXBlKSB7XG4gICAgICAgIGN0eC5nZXROZXR3b3JrVHlwZSh7XG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY2FsbGJhY2socmVzID8gcmVzLm5ldHdvcmtUeXBlIDogJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYWxsYmFjaygnJyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluezu+e7n+S/oeaBryBodHRwczovL2RvY3MuYWxpcGF5LmNvbS9taW5pL2FwaS9zeXN0ZW0taW5mb1xuICAgICAqIOaJi+acuuWei+WPt+OAgeWxj+W5leWIhui+qOeOh+OAgeezu+e7n+eJiOacrOetieS/oeaBr1xuICAgICAqL1xuICAgIF9nZXRTeXN0ZW1JbmZvOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgZW1wdHlPYmogPSB7fTtcbiAgICAgIHZhciBzeXNJbmZvID0gX3NlbGYuU1lTVEVNX0lORk8gfHwge307XG4gICAgICBpZiAoc3lzSW5mbyAmJiBzeXNJbmZvLnZlcnNpb24pIHtcbiAgICAgICAgY2FsbGJhY2soX3NlbGYuU1lTVEVNX0lORk8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBtaW5pLmdldENvbnRleHQoKS5nZXRTeXN0ZW1JbmZvKHtcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgIGlmIChyZXMgJiYgcmVzLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBfc2VsZi5fZ2V0TmV0d29ya1R5cGUoZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgICAgICAgIHJlcy5uZXR3b3JrVHlwZSA9IG47XG4gICAgICAgICAgICAgICAgICBfc2VsZi5TWVNURU1fSU5GTyA9IHJlcztcbiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHJlcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX3NlbGYuX2dldE5ldHdvcmtUeXBlKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICBlbXB0eU9iai5uZXR3b3JrVHlwZSA9IG47XG4gICAgICAgICAgICAgICAgICBjYWxsYmFjayhlbXB0eU9iaik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGNhbGxiYWNrKGVtcHR5T2JqKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBfZ2V0QWNjb3VudEluZm9TeW5jOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgaW5mbyA9IHt9O1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgICAgICBpZiAoY3R4LmdldEFjY291bnRJbmZvU3luYyAmJiBjdHguY2FuSVVzZSgnZ2V0QWNjb3VudEluZm9TeW5jJykpIHtcbiAgICAgICAgICAvLyDlvq7kv6FcbiAgICAgICAgICB2YXIgYWNjb3VudEluZm8gPSBjdHguZ2V0QWNjb3VudEluZm9TeW5jKCk7XG4gICAgICAgICAgdmFyIG1pbmlQcm9ncmFtID0gYWNjb3VudEluZm8ubWluaVByb2dyYW0gfHwge307XG4gICAgICAgICAgdmFyIHBsdWdpbiA9IGFjY291bnRJbmZvLnBsdWdpbiB8fCB7fTtcbiAgICAgICAgICBpbmZvLmFwcElkID0gbWluaVByb2dyYW0uYXBwSWQ7ICAvLyDlsI/nqIvluo8gYXBwSWRcbiAgICAgICAgICBpbmZvLmFwcFZlcnNpb24gPSBtaW5pUHJvZ3JhbS52ZXJzaW9uIHx8IG1pbmlQcm9ncmFtLmVudlZlcnNpb247ICAvLyDlsI/nqIvluo8gYXBwVmVyc2lvblxuICAgICAgICAgIGluZm8ucGx1Z2luQXBwSWQgPSBwbHVnaW4uYXBwSWQ7IC8vIOaPkuS7tiBhcHBJZFxuICAgICAgICAgIGluZm8ucGx1Z2luQXBwVmVyc2lvbiA9IHBsdWdpbi52ZXJzaW9uOyAvLyDmj5Lku7YgYXBwVmVyc2lvbiAgXG4gICAgICAgIH0gZWxzZSBpZiAoY3R4LmdldEFwcElkU3luYyAmJiBjdHguY2FuSVVzZSgnZ2V0QXBwSWRTeW5jJykpIHtcbiAgICAgICAgICB2YXIgYXBwSW5mbyA9IGN0eC5nZXRBcHBJZFN5bmMoKSB8fCB7fTtcbiAgICAgICAgICBpbmZvLmFwcElkID0gYXBwSW5mby5hcHBJZCB8fCAnJztcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIHJldHVybiBpbmZvO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiB3b3Jrbm9cbiAgICAgKiAgIDEuIGNvb2tpZS5nZXRDb29raWUoJ3dvcmtubycpXG4gICAgICogICAyLiBjb29raWUuZ2V0Q29va2llKCdlbXBsSWQnKVxuICAgICAqIEByZXR1cm4gXCJkb25lXCIgfHwgdW5kZWZpbmVkXG4gICAgICovXG4gICAgcnVuOiBmdW5jdGlvbiAoc3RhdGUsIGNiKSB7XG4gICAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgICAgLy8gY29uc29sZS5sb2coJ1RPRE8gZ2V0U3lzdGVtSW5mbycpO1xuICAgICAgdGhpcy5fZ2V0U3lzdGVtSW5mbyhmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIC8vIOaUr+S7mOWuneWwj+eoi+W6j+aWh+ahoyAgc3lzdGVtLeezu+e7n+eJiOacrCBwbGF0Zm9ybS3ns7vnu5/lkI1cbiAgICAgICAgcmVzLnVzZXJBZ2VudCA9ICctJztcbiAgICAgICAgcmVzLm9zID0gcmVzLnBsYXRmb3JtID8gcmVzLnBsYXRmb3JtLnRvTG9jYWxlVXBwZXJDYXNlKCkgOiAnJztcbiAgICAgICAgcmVzLm9zX3ZlcnNpb24gPSByZXMuc3lzdGVtID8gcmVzLnN5c3RlbSA6ICcnO1xuICAgICAgICByZXMuYWNjZXNzID0gcmVzLmJyYW5kID8gcmVzLmJyYW5kIDogJyc7XG4gICAgICAgIHZhciBob3N0ID0gJyc7XG4gICAgICAgIGlmKHJlcy5ob3N0ICYmICh0eXBlb2YgcmVzLmhvc3QuZW52ID09PSAnc3RyaW5nJykpe1xuICAgICAgICAgIGhvc3QgPSByZXMuaG9zdC5lbnY7XG4gICAgICAgIH1cbiAgICAgICAgcmVzLmhvc3QgPSBob3N0O1xuXG4gICAgICAgIHZhciBhY2NvdW50SW5mbyA9IF9zZWxmLl9nZXRBY2NvdW50SW5mb1N5bmMoKTtcbiAgICAgICAgdmFyIHJzID0gT2JqZWN0LmFzc2lnbih7fSwgcmVzLCBhY2NvdW50SW5mbyk7XG5cbiAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgICAgIGFwbHVzLl9hcGx1c19jbGllbnQgPSBycztcbiAgICAgICAgY2IoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIDIwMDA7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvYXBsdXNfY2xpZW50X21pbmkuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5bCP56iL5bqP5LiL6Z2i55qEc3Bt5L2T57O7XG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIGlzQXJyYXkgID0gcmVxdWlyZSgnQHV0aWxzL2lzQXJyYXknKTtcbnZhciBhcGx1c1N0YXRpYyAgPSByZXF1aXJlKCdAdXRpbHMvYXBsdXNTdGF0aWMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcmVzZXRMYXN0UGFnZVNwbTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG4gICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuICAgICAgc3BtLnNwbV9jbnQgPSAnJztcbiAgICB9LFxuICAgIGxpc3RlbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICAgIHZhciBhcGx1c19xdWV1ZSA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKGFwbHVzU3RhdGljLkFQTFVTX1FVRVVFLFtdKTsgIFxuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgIGFyZ3VtZW50czpbJ29uU2hvdycsZnVuY3Rpb24ob3B0KXtcbiAgICAgICAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMse30pOyBcbiAgICAgICAgICAgIHZhciBwYWdlcyA9IGFwbHVzLmdldE1ldGFJbmZvKCdwYWdlcycpO1xuICAgICAgICAgICAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVBhdGggPSBwYWdlSW5zdGFuY2Uucm91dGUgfHwgcGFnZUluc3RhbmNlLmlzO1xuICAgICAgICAgICAgaWYgKGlzQXJyYXkocGFnZXMpKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9IHBhZ2VzW2ldO1xuICAgICAgICAgICAgICAgIGlmKGN1cnJlbnQubWF0Y2hVcmwgPT09IGN1cnJlbnRQYWdlUGF0aCl7XG4gICAgICAgICAgICAgICAgICBhcGx1cy5zZXRQYWdlU1BNKGN1cnJlbnQuc3BtQSwgY3VycmVudC5zcG1CKTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjphcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgICAgIGFyZ3VtZW50czpbJ2NsZWFyUGFnZVNQTScsZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF9zZWxmLnJlc2V0TGFzdFBhZ2VTcG0oKTtcbiAgICAgICAgfV0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW1zIGRhdGEge09iamVjdH0ge1xuICAgICAgICogICBzcG1DbnQ6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1Vcmw6ICdhLmIuMC4wJ1xuICAgICAgICogICBzcG1QcmU6ICdhLmIuMC4wJ1xuICAgICAgICogfVxuICAgICAgICovXG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOmFwbHVzU3RhdGljLlNVQlNDUklCRSxcbiAgICAgICAgYXJndW1lbnRzOlsnc2V0UGFnZVNQTScsZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMsIHt9KTsgXG4gICAgICAgICAgICB2YXIgc3BtID0gYXBsdXMuXyQuc3BtIHx8IHt9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcGFnZXMgPSBnZXRDdXJyZW50UGFnZXMoKSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBzcG1hYiA9IGRhdGEuc3BtQ250ID8gZGF0YS5zcG1DbnQuc3BsaXQoJy4nKSA6IFtzcG0uZGF0YS5hIHx8ICcwJywgc3BtLmRhdGEuYiB8fCAnMCddO1xuICAgICAgICAgICAgaWYgKHNwbWFiLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICBzcG1hYiA9IHNwbWFiLmNvbmNhdChbJzAnLCAnMCddKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzcG1hYnN0ciA9IHNwbWFiLmpvaW4oJy4nKTtcblxuICAgICAgICAgICAgdmFyIGN1cnJlbnRQYWdlID0gcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICB2YXIgcHJlUGFnZSA9IHBhZ2VzW3BhZ2VzLmxlbmd0aCAtIDJdIHx8IHt9O1xuICAgICAgICAgICAgdmFyIHByZVByZVBhZ2UgPSBwYWdlc1twYWdlcy5sZW5ndGggLSAzXSB8fCB7fTtcblxuICAgICAgICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDAgJiYgY3VycmVudFBhZ2UpIHtcbiAgICAgICAgICAgICAgcGFnZXNbcGFnZXMubGVuZ3RoIC0gMV0uc3BtID0gc3BtYWJzdHI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50UGFnZVNwbSA9IHNwbS5kYXRhICYmIHNwbS5kYXRhLmEgPyBbc3BtLmRhdGEuYSwgc3BtLmRhdGEuYiwgc3BtLmRhdGEuYyB8fCAnMCcsIHNwbS5kYXRhLmQgfHwgJzAnXS5qb2luKCcuJykgOiAnJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmEgPSBzcG1hYlswXSA/ICcnICsgc3BtYWJbMF0gOiAnMCc7XG4gICAgICAgICAgICBzcG0uZGF0YS5iID0gc3BtYWJbMV0gPyAnJyArIHNwbWFiWzFdIDogJzAnO1xuICAgICAgICAgICAgc3BtLmRhdGEuYyA9ICcwJztcbiAgICAgICAgICAgIHNwbS5kYXRhLmQgPSAnMCc7XG4gICAgICAgICAgICBzcG0ucGFnZV9yZWZlcnJlciA9IHBhZ2VzLmxlbmd0aCA+IDEgJiYgY3VycmVudFBhZ2UgPyAoY3VycmVudFBhZ2Uucm91dGUgfHwgY3VycmVudFBhZ2UuaXMpIDogJyc7XG4gICAgICAgICAgICBzcG0uc3BtX2NudCA9IHNwbWFic3RyO1xuXG4gICAgICAgICAgICAvLyDku6XnlKjmiLflnKhVUkzkuIrmi7zmjqXnmoRzcG3kuLrlh4bvvIxhcGx1cy5zcG1fb3JpZ27mnaXmupDkuo5hdXRvX2luaXQvaW5qZWN0X2FwcC5qc1xuICAgICAgICAgICAgdmFyIHNwbV9vcmlnbiA9IGFwbHVzLnNwbV9vcmlnbiB8fCBzcG0uc3BtX29yaWduO1xuICAgICAgICAgICAgc3BtLnNwbV9wcmUgPSBkYXRhLnNwbVByZSB8fCBzcG0uc3BtX3VybCB8fCBwcmVQcmVQYWdlLnNwbSB8fCAnJztcbiAgICAgICAgICAgIHNwbS5zcG1fdXJsID0gZGF0YS5zcG1VcmwgfHwgY3VycmVudFBhZ2VTcG0gfHwgcHJlUGFnZS5zcG0gfHwgc3BtX29yaWduIHx8ICAnJztcbiAgICAgICAgICAgIGFwbHVzLl8kLnNwbSA9IHNwbTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc2V0UGFnZVNQTSBlcnJvciwgdGhlIGVycm9ySW5mbyBpcyAnLCBlKTtcbiAgICAgICAgICAgIHVsb2coKS53KCdzZXRQYWdlU1BNIGVycm9yLCB0aGUgZXJyb3JJbmZvIGlzICcsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgfV0sXG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmxpc3RlbigpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbWluaV9zcG0uanNcbi8vIG1vZHVsZSBpZCA9IDg4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBhcGx1c19taW5pX3JlcG9ydF91bS5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4ge1xuICAgIHJ1bjogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgTWFpbiA9IHJlcXVpcmUoJy4vbGliX2Nvbm5lY3Rpb24vbWFpbl9taW5pX3VtX2h0dHAuanMnKTtcbiAgICAgIHZhciBtYWluID0gTWFpbi5jcmVhdGUoKTtcbiAgICAgIG1haW4ucnVuKHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICB9O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2FwbHVzX21pbmlfcmVwb3J0X3VtLmpzXG4vLyBtb2R1bGUgaWQgPSA4OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKlxuICogRmlsZTogbWFpbl9taW5pX3VtX2h0dHAuanNcbiAqIFByb2plY3Q6IEBhbGkvYXBsdXNcbiAqICAgICAgXG4gKiBBdXRob3I6IOmSsOaYrSAoY2hhbmdsaWFuZy5sY2xAdW1lbmcuY29tKVxuICogICAgICBcbiAqIENvcHlyaWdodCAtIDIwMjEgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuLy8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG52YXIgbWFpbl9iYXNlX2h0dHAgPSByZXF1aXJlKCcuL21haW5fYmFzZV9odHRwJyk7XG52YXIgZXZlbnRNYW5hZ2VyID0gcmVxdWlyZSgnLi4vbGliX3VtL2V2ZW50TWFuYWdlcicpO1xudmFyIHJlcXVlc3RRdWV1ZSA9IHJlcXVpcmUoJy4uL2xpYl91bS9yZXF1ZXN0UXVldWUnKTtcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL2xpYl91bS91dGlscycpO1xudmFyIHVsb2cgPSByZXF1aXJlKCdAdXRpbHMvdWxvZycpO1xudmFyIGNsb25lRGVlcCA9IHJlcXVpcmUoJ0B1dGlscy9jbG9uZURlZXAnKTtcbnZhciB1dGlsRGFzaCA9IHJlcXVpcmUoJ0B1dGlscy91dGlsRGFzaCcpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIFBhZ2VNYW5hZ2VyID0gcmVxdWlyZSgnQC9wbHVnaW5zL2xpYl91bS9wYWdlTWFuYWdlcicpO1xudmFyIHV0aWxNb25pdG9yID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxNb25pdG9yJyk7XG5cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50KGlkLCBvcHRpb25zKSB7XG4gIGlmICh1dGlscy5jaGVja0V2ZW50KGlkLCBvcHRpb25zKSkge1xuICAgIHZhciBldmVudCA9IHJlcXVpcmUoJy4uL2xpYl91bS9ldmVudC5qcycpKGlkLCBvcHRpb25zKTtcbiAgICBldmVudC5yYW5rID0gdXRpbE1vbml0b3IucmFuaygpO1xuICAgIGlmIChldmVudCAmJiBldmVudC5pZCA9PT0gYXBsdXNTdGF0aWMuQVBQX0VORCkge1xuICAgICAgZXZlbnQuYW1vdW50ID0gZXZlbnQucmFuaztcbiAgICB9XG4gICAgdWxvZygpLmkoJ2V2ZW50OiAnLCBpZCwgb3B0aW9ucyk7XG4gICAgZXZlbnRNYW5hZ2VyKCkuYWRkRXZlbnQoZXZlbnQpO1xuICAgIC8vIOavj+asoWFkZEV2ZW505ZCO77yM5Yik5pat5piv5ZCmZWt2c+WGheeahOaXpeW/l+adoeaVsOaYr+WQpui2heWHum1heExpbWl0XG4gICAgLy8gbWF4LXF1ZXVlLWNvdW5055So5LqO6Ieq5a6a5LmJ6IGa5ZCI6Zif5YiX6ZW/5bqmXG4gICAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gICAgdmFyIG1heFF1ZXVlQ291bnQgPSBhcGx1cy5nZXRNZXRhSW5mbygnbWF4LXF1ZXVlLWNvdW50JykgfHwgYXBsdXNTdGF0aWMuTUFYX1FVRVVFX0NPVU5UO1xuICAgIGlmKGlkID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EIHx8IGV2ZW50TWFuYWdlcigpLmdldEVrdnNMZW4oKSA+PSBtYXhRdWV1ZUNvdW50KSB7XG4gICAgICByZXF1ZXN0UXVldWUoYXBsdXNTdGF0aWMuUkVRVUVTVFMpLnNlbmQodXRpbHMuRGF0YVR5cGUuRUtWLCB7IG5vQ2FjaGU6IGZhbHNlIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgIHVsb2coKS5pKCdldmVudCBzZW5kIHN1Y2Nlc3M6ICcsIGlkLCBldmVudCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbWFpbl9iYXNlX2h0dHAuZXh0ZW5kKHtcblxuICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICAvLyBA5paH5b+DIOWFqOWfi+eCuSB0cmFja190eXBlXG4gICAgdWxvZygpLnNldERlYnVnKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ0RFQlVHJykpO1xuICAgIHZhciB1c2VyRXZlbnRBcmdzLCBnb2tleTtcbiAgICB2YXIgbG9na2V5ID0gZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEubG9na2V5O1xuICAgIHZhciBnbWtleSA9IGRhdGEgJiYgZGF0YS51c2VyZGF0YSAmJiBkYXRhLnVzZXJkYXRhLmdta2V5O1xuICAgIHZhciBsb2dkYXRhID0gZGF0YSAmJiBkYXRhLndoYXRfdG9fc2VuZCAmJiBkYXRhLndoYXRfdG9fc2VuZC5sb2dkYXRhICYmIGRhdGEud2hhdF90b19zZW5kLmxvZ2RhdGEgfHwge307XG4gICAgdmFyIGdwID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2dsb2JhbHByb3BlcnR5Jyk7XG4gICAgdmFyIHBhZ2VfbmFtZTtcbiAgICBpZiAoZ21rZXkgPT09ICdDTEsnIHx8IGdta2V5ID09PSAnRVhQJyB8fCBnbWtleSA9PT0gJ09USEVSJyB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9TVEFSVCB8fCBsb2drZXkgPT09IGFwbHVzU3RhdGljLkFQUF9FTkQpIHtcbiAgICAgIHVzZXJFdmVudEFyZ3MgPSBjbG9uZURlZXAoZGF0YSAmJiBkYXRhLnVzZXJkYXRhICYmIGRhdGEudXNlcmRhdGEuZ29rZXkpIHx8IHt9O1xuICAgICAgZ29rZXkgPSBsb2dkYXRhLmdva2V5IHx8IHt9O1xuICAgICAgdmFyIGV2ZW50X2FyZ3M7XG4gICAgICB2YXIgc2RrQXJncyA9IHt9O1xuICAgICAgaWYgKGxvZ2tleSA9PT0gJyQkX3NoYXJlJykge1xuICAgICAgICBzZGtBcmdzLnJlZmVyX3BhZ2UgPSBsb2dkYXRhLnVybDtcbiAgICAgICAgc2RrQXJncy5zaGFyZV90eXBlID0gdXNlckV2ZW50QXJncy5zaGFyZV90eXBlO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZ29rZXkuc2NlbmUpIHtcbiAgICAgICAgc2RrQXJncy5zY2VuZSA9IG1pbmkuZ2V0UGxhdGZvcm1UeXBlKCkgKyAnXycgKyBnb2tleS5zY2VuZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gJCRfYXBwX2xpbmvkuovku7bnmoR0YXJnZXRBcHBLZXlcbiAgICAgIGlmKGdva2V5LnRhcmdldEFwcEtleSkge1xuICAgICAgICBzZGtBcmdzLnRhcmdldEFwcEtleSA9IHVzZXJFdmVudEFyZ3MudGFyZ2V0QXBwS2V5O1xuICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy50YXJnZXRBcHBLZXk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHBhZ2VfbmFtZSA9IHVzZXJFdmVudEFyZ3NbJ2RhdGEtcGFnZW5hbWUnXSB8fCB1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZSB8fCAodXNlckV2ZW50QXJncy5zcG0gJiYgdXNlckV2ZW50QXJncy5zcG0uYikgfHwgYXBsdXMuZ2V0UGFnZU5hbWUoKSB8fCBsb2dkYXRhLnVybCB8fCAnJztcbiAgICAgIHNka0FyZ3MucGFnZV9uYW1lID0gcGFnZV9uYW1lO1xuICAgICAgXG4gICAgICBzZGtBcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgIGlmICh1c2VyRXZlbnRBcmdzLnBhZ2VfbmFtZSB8fCB1c2VyRXZlbnRBcmdzWydkYXRhLXBhZ2VuYW1lJ10pIHtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MucGFnZV9uYW1lO1xuICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJnc1snZGF0YS1wYWdlbmFtZSddO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIXV0aWxEYXNoLmlzRW1wdHlPYmplY3QoZ3ApKSB7XG4gICAgICAgIHNka0FyZ3MuZ3AgPSBncDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHVzZXJFdmVudEFyZ3Muc3BtKSB7XG4gICAgICAgIHNka0FyZ3NbJ3NwbS1jbnQnXSA9IFtlbmNvZGVVUklDb21wb25lbnQocGFnZV9uYW1lKSwgdXNlckV2ZW50QXJncy5zcG0uYywgdXNlckV2ZW50QXJncy5zcG0uZF0uZmlsdGVyKGZ1bmN0aW9uKHYpe1xuICAgICAgICAgIHJldHVybiAhIXY7XG4gICAgICAgIH0pLmpvaW4oJy4nKTtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3Muc3BtO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAodXNlckV2ZW50QXJncy5wYWdlX3RpdGxlKSB7XG4gICAgICAgIHNka0FyZ3MucGFnZV90aXRsZSA9IHVzZXJFdmVudEFyZ3MucGFnZV90aXRsZSB8fCBQYWdlTWFuYWdlci5nZXRQYWdlVGl0bGUobG9nZGF0YS51cmwpIHx8ICcnO1xuICAgICAgICBkZWxldGUgdXNlckV2ZW50QXJncy5wYWdlX3RpdGxlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2RrQXJncy5wYWdlX3RpdGxlID0gZ29rZXkuX3BhZ2VfdGl0bGUgfHwgJyc7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICh1c2VyRXZlbnRBcmdzLmlzX2F1dG8pIHtcbiAgICAgICAgc2RrQXJncy5pc19hdXRvID0gdXNlckV2ZW50QXJncy5pc19hdXRvO1xuICAgICAgICBzZGtBcmdzLnRyYWNrX3R5cGUgPSBcIjFcIjtcbiAgICAgICAgZGVsZXRlIHVzZXJFdmVudEFyZ3MuaXNfYXV0bztcbiAgICAgICAgaWYgKGxvZ2RhdGEuZXZlbnRfY29kZSkgeyAvL+WFqOWfi+eCueS4u+WKqOS4iuaKpeS6i+S7tuexu+WeiyBA6ZKw5pitIEDmloflv4NcbiAgICAgICAgICBzZGtBcmdzLmV2ZW50X3R5cGVfaWQgPSBsb2dkYXRhLmV2ZW50X2NvZGU7IC8vIEDmloflv4Mg5LqL5Lu257G75Z6L5Y+C5pWw5ZCN5pu05pS5XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNka0FyZ3MuaXNfYXV0byA9IDA7XG4gICAgICAgIHNka0FyZ3MudHJhY2tfdHlwZSA9IFwiMFwiO1xuICAgICAgfVxuXG4gICAgICB2YXIgY2xvbmVQID0gY2xvbmVEZWVwKHVzZXJFdmVudEFyZ3MpO1xuICAgICAgZm9yICh2YXIgayBpbiBjbG9uZVApIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrID09PSAnc3RyaW5nJyAmJiB1dGlscy5zdGFydHNXaXRoKGssICdfJykpIHtcbiAgICAgICAgICBzZGtBcmdzW2tdID0gY2xvbmVQW2tdO1xuICAgICAgICAgIGRlbGV0ZSB1c2VyRXZlbnRBcmdzW2tdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfU1RBUlQgfHwgbG9na2V5ID09PSBhcGx1c1N0YXRpYy5BUFBfRU5EKSB7XG4gICAgICAgIGV2ZW50X2FyZ3MgPSB1dGlsRGFzaC5hc3NpZ24oc2RrQXJncywgdXNlckV2ZW50QXJncyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBldmVudF9hcmdzID0gdXRpbERhc2guYXNzaWduKHNka0FyZ3MsIHsgY3VzcDogdXNlckV2ZW50QXJncyB9KTtcbiAgICAgIH1cbiAgICAgIGhhbmRsZUV2ZW50KGxvZ2tleSwgZXZlbnRfYXJncyk7XG4gICAgfSBlbHNlIGlmIChsb2dkYXRhLmV2ZW50X2NvZGUgPT09ICcyMDAxJykgeyBcbiAgICAgIHZhciBwdmFyZ3MgPSB7fTtcbiAgICAgIHZhciBwYWdlX2lkID0gYXBsdXNTdGF0aWMuUEFHRV9TVEFSVDtcbiAgICAgIGdva2V5ID0gY2xvbmVEZWVwKGxvZ2RhdGEuZ29rZXkpIHx8IHt9O1xuICAgICAgcGFnZV9uYW1lID0gZ29rZXkucGFnZV9uYW1lIHx8IGFwbHVzLmdldFBhZ2VOYW1lKCkgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUobG9nZGF0YS51cmwpIHx8IGxvZ2RhdGEudXJsIHx8ICcnO1xuICAgICAgcHZhcmdzLnIgPSBsb2dkYXRhLmFyZzEgfHwgbG9nZGF0YS5sb2drZXkgfHwgJy0nO1xuICAgICAgcHZhcmdzLnBhZ2VfbmFtZSA9IHBhZ2VfbmFtZTtcbiAgICAgIGlmIChnb2tleS5fcGFnZV9hdXRvX3B2KSB7XG4gICAgICAgIHB2YXJncy5pc19hdXRvID0gMTtcbiAgICAgICAgcHZhcmdzLnVybCA9IGdva2V5LnBhdGggfHwgJy0nO1xuICAgICAgICBwdmFyZ3MucmVmX3VybCA9IGdva2V5LnJlZmVycmVyO1xuICAgICAgICBwdmFyZ3MudHJhY2tfdHlwZSA9IFwiMVwiO1xuICAgICAgICBkZWxldGUgZ29rZXkuX3BhZ2VfYXV0b19wdjtcbiAgICAgICAgZGVsZXRlIGdva2V5LnJlZmVycmVyO1xuICAgICAgICBkZWxldGUgZ29rZXkucGF0aDtcbiAgICAgICAgZGVsZXRlIGdva2V5LnBhZ2VfbmFtZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB2YXJncy5pc19hdXRvID0gMDtcbiAgICAgICAgcHZhcmdzLnVybCA9IGxvZ2RhdGEudXJsIHx8ICctJztcbiAgICAgICAgcHZhcmdzLnJlZl91cmwgPSBsb2dkYXRhLnByZTtcbiAgICAgICAgcHZhcmdzLnRyYWNrX3R5cGUgPSBcIjBcIjtcbiAgICAgIH1cblxuICAgICAgaWYgKGdva2V5LmR1cmF0aW9uKSB7XG4gICAgICAgIHB2YXJncy5kdXJhdGlvbiA9IGdva2V5LmR1cmF0aW9uO1xuICAgICAgICBkZWxldGUgZ29rZXkuZHVyYXRpb247XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghdXRpbERhc2guaXNFbXB0eU9iamVjdChncCkpIHtcbiAgICAgICAgcHZhcmdzLmdwID0gZ3A7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChnb2tleS5zY2VuZSkge1xuICAgICAgICBwdmFyZ3Muc2NlbmUgPSBtaW5pLmdldFBsYXRmb3JtVHlwZSgpICsgJ18nICsgZ29rZXkuc2NlbmU7XG4gICAgICB9XG4gICAgICBnb2tleSA9IHV0aWxzLmRlbGV0ZUluZm8oZ29rZXksIFsnX2Fub255X2lkJywgJ19kZXZfaWQnLCAnX3Nlc3Npb25faWQnLCAnX3VzZXJfaWQnLCAnX3VzZXJfbmljaycsICd1YWlkJywgJ3B2aWQnLCAnc2NlbmUnXSk7XG4gICAgICBwdmFyZ3NbJ3NwbS1jbnQnXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYWdlX25hbWUpO1xuICAgICAgaWYgKGdva2V5Ll9wYWdlX2F1dG9faWQpIHtcbiAgICAgICAgcGFnZV9pZCA9IGdva2V5Ll9wYWdlX2F1dG9faWQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5fcGFnZV9hdXRvX2lkO1xuICAgICAgfVxuXG4gICAgICBpZiAoZ29rZXkucGFnZV9zdGFydCkge1xuICAgICAgICBwdmFyZ3MucGFnZV9zdGFydCA9IGdva2V5LnBhZ2Vfc3RhcnQ7XG4gICAgICAgIGRlbGV0ZSBnb2tleS5wYWdlX3N0YXJ0O1xuICAgICAgfVxuXG4gICAgICAvLyDph4fpm4bpobXpnaJwYWdlX3RpdGxlXG4gICAgICBpZiAoZ29rZXkucGFnZV90aXRsZSkge1xuICAgICAgICBwdmFyZ3MucGFnZV90aXRsZSA9IGdva2V5LnBhZ2VfdGl0bGUgfHwgUGFnZU1hbmFnZXIuZ2V0UGFnZVRpdGxlKGxvZ2RhdGEudXJsKSB8fCAnJztcbiAgICAgICAgZGVsZXRlIGdva2V5LnBhZ2VfdGl0bGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdmFyZ3MucGFnZV90aXRsZSA9IGdva2V5Ll9wYWdlX3RpdGxlO1xuICAgICAgfVxuICAgICAgZGVsZXRlIGdva2V5Ll9wYWdlX3RpdGxlO1xuXG4gICAgICBwdmFyZ3MudXJsID0gUGFnZU1hbmFnZXIuZ2V0RnVsbFBhdGgocHZhcmdzLnVybCk7XG4gICAgICBwdmFyZ3MucmVmX3VybCA9IFBhZ2VNYW5hZ2VyLmdldEZ1bGxQYXRoKHB2YXJncy5yZWZfdXJsKTtcbiAgICAgIGhhbmRsZUV2ZW50KHBhZ2VfaWQsIHV0aWxEYXNoLmFzc2lnbihwdmFyZ3MsIHsgY3VzcDogZ29rZXl9ICkpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygyMjIyLCBkYXRhKTtcbiAgICB9XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLndhdGNoTE9HKCk7XG4gIH1cbiAgXG59KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9jb25uZWN0aW9uL21haW5fbWluaV91bV9odHRwLmpzXG4vLyBtb2R1bGUgaWQgPSA5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOaLpuaIquW5tuaMiWh0dHDljY/orq7lj5HpgIHml6Xlv5dcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgUmljaGFyZHzosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCYXNlID0gcmVxdWlyZSgnQGNvcmUvQmFzZScpO1xuLy8gdmFyIGxvZ19jbG91ZCA9IHJlcXVpcmUoJy4vbG9nX2Nsb3VkJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIGFwbHVzU3RhdGljID0gcmVxdWlyZSgnQHV0aWxzL2FwbHVzU3RhdGljJyk7XG4vLyB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbi8vIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHtcblxuICBzdWJzY3JpYmVMb2dzOiBmdW5jdGlvbiAoYWN0aW9uLCBjYWxsYmFjaykge1xuICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFthY3Rpb24sIGZ1bmN0aW9uIChvcmlEYXRhcykge1xuICAgICAgaWYgKG9yaURhdGFzLnN0YXR1cyA9PT0gYXBsdXNTdGF0aWMuQ09NUExFVEUpIHtcbiAgICAgICAgY2FsbGJhY2sob3JpRGF0YXMpO1xuICAgICAgfVxuICAgIH1dKTtcbiAgfSxcblxuICBnZXRMb2dpY1N5bWJvbDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmZvcm1hdCA9PT0gJ0FMSScgPyAnJicgOiAnfHwnO1xuICB9LFxuXG4gIC8qKlxuICAgKiDlnKjlrZDnsbvkuK3lrp7njrBcbiAgICogQHBhcmFtcyB7T2JqZWN0fSBkYXRhXG4gICAqL1xuICBoYW5kbGVyTWlkZGxld2FyZTogZnVuY3Rpb24gKCkge30sXG4gIFxuXG4gIHdhdGNoTE9HOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICBcbiAgICAvLyDorqLpmIVwduS6i+S7tlxuICAgIF9zZWxmLnN1YnNjcmliZUxvZ3MoYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgX3NlbGYuaGFuZGxlck1pZGRsZXdhcmUoZGF0YSwgJ3B2Jyk7XG4gICAgfSk7XG5cbiAgICAvLyDorqLpmIVoamxqL2FwbHVz5LqL5Lu2XG4gICAgX3NlbGYuc3Vic2NyaWJlTG9ncyhhcGx1c1N0YXRpYy5NV19DSEFOR0VfSEpMSiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIF9zZWxmLmhhbmRsZXJNaWRkbGV3YXJlKGRhdGEsIGFwbHVzU3RhdGljLkFQTFVTKTtcbiAgICB9KTtcbiAgfSxcblxuICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLndhdGNoTE9HKCk7XG4gIH1cbn0pO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvcGx1Z2lucy9saWJfY29ubmVjdGlvbi9tYWluX2Jhc2VfaHR0cC5qc1xuLy8gbW9kdWxlIGlkID0gOTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEdRLmpzXG4gKiDmk43kvZxhcGx1c19xdWV1ZeeahOW3peWFt+exu1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJy4vdXRpbEdvbGRsb2cnKTtcblxuZXhwb3J0cy5wdXNoSW50b0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChhY3Rpb24sIGFyZ3MpIHtcbiAgdmFyIGFwbHVzX3F1ZXVlID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzX3F1ZXVlJyk7XG4gIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICB2YXIgbmFtZXMgPSBhY3Rpb24uc3BsaXQoJy4nKTtcbiAgdmFyIGFwbHVzXzEgPSBhcGx1c1tuYW1lc1sxXV07XG4gIHZhciBhcGx1c18yID0gYXBsdXNfMSA/IGFwbHVzXzFbbmFtZXNbMl1dIDogbnVsbDtcblxuICBpZiAoYXBsdXMgJiYgbmFtZXMubGVuZ3RoID09PSAyICYmIGFwbHVzXzEpIHtcbiAgICBhcGx1c18xLmFwcGx5KGFwbHVzLCBhcmdzKTtcbiAgfSBlbHNlIGlmIChuYW1lcy5sZW5ndGggPT09IDMgJiYgYXBsdXNfMikge1xuICAgIGFwbHVzXzIuYXBwbHkoYXBsdXNfMSwgYXJncyk7ICBcbiAgfSBlbHNlIHtcbiAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgIGFjdGlvbjogYWN0aW9uLFxuICAgICAgYXJndW1lbnRzOiBhcmdzXG4gICAgfSk7XG4gIH1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsR1EuanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qXG4gKiBGaWxlOiBldmVudC5qc1xuICogUHJvamVjdDogQGFsaS9hcGx1c1xuICogICAgICBcbiAqIEF1dGhvcjog6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKiAgICAgIFxuICogQ29weXJpZ2h0IC0gMjAyMSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqL1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgdXRpbERhc2ggPSByZXF1aXJlKCdAdXRpbHMvdXRpbERhc2gnKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBqc29uVXRpbCA9IHJlcXVpcmUoJy4vanNvblV0aWwnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgcHJvcGVydGllcykge1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJyB8fCAhaWQpIHtcbiAgICB1bG9nKCkudygnZXZlbnQgbG9na2V5IGlzIGludmFsaWQsIGlkID0nLCBpZCB8fCBcIicnIGV2ZW50IHByb3BlcnRpZXMgPSBcIiwganNvblV0aWwuc3RyaW5nZnkocHJvcGVydGllcy5jdXNwKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBldmVudCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV2ZW50LmlkID0gaWQ7XG4gIGlmICghcHJvcGVydGllcyB8fCAhcHJvcGVydGllcy50cykge1xuICAgIGV2ZW50LnRzID0gRGF0ZS5ub3coKTtcbiAgfVxuICB2YXIgcHJvcHNUeXBlID0gdHlwZW9mIHByb3BlcnRpZXM7XG4gIGlmIChwcm9wc1R5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BlcnRpZXMpIHtcbiAgICAgIGlmICh7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkpIHtcbiAgICAgICAgZXZlbnRba2V5XSA9IHByb3BlcnRpZXNba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG4gIHZhciBncCA9IGFwbHVzLmdldE1ldGFJbmZvKCdnbG9iYWxwcm9wZXJ0eScpO1xuICBpZiAoIXV0aWxEYXNoLmlzRW1wdHlPYmplY3QoZ3ApKSB7XG4gICAgZXZlbnRbJ2dwJ10gPSBncDsgXG4gIH1cbiAgcmV0dXJuIGV2ZW50O1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl91bS9ldmVudC5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBhbGlsb2cvcyAtIHNyYy9saWJfdS9jb25maWcvaW5pdC9pbml0TG9hZF9iYXNlLmpzXG4gKiDliJ3lp4vljJbln7rnoYDmqKHlnZfvvIzkuI3og73nm7TmjqXkvb/nlKjvvIzpnIDopoHpgJrov4dpbml0TG9hZF9wYy5qc+aIlmluaXRMb2FkX3dhcC5qc+etieWFt+S9k+eahOWcuuaZr+aooeWdl+iwg+eUqFxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICBAYXV0aG9yIGppemhhLnd5aiBAYmxvZyBodHRwOi8vb2xkai5uZXRcbiAqICAg6LCL5aOrIDxxaW5nbGlhbmcuaHFsQGFsaWJhYmEtaW5jLmNvbT5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgYWN0aW9uID0gcmVxdWlyZSgnLi9hY3Rpb24nKTtcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46ICBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXBsdXNfY29uZmlnID0gdGhpcy5vcHRpb25zLmNvbnRleHQuYXBsdXNfY29uZmlnO1xuICAgICAgdmFyIEFQTFVTX1FVRVVFID0gYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRTtcblxuICAgICAgdmFyIGNvbnRleHQgPSB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG4gICAgICB2YXIgcXVlID0gY29udGV4dFtBUExVU19RVUVVRV0gfHwgW107XG4gICAgICB2YXIgcnMgPSBhY3Rpb24uZ2V0Rm9ybWF0UXVldWUocXVlLCAnbWV0YVF1ZXVlJyk7XG4gICAgICBjb250ZXh0W0FQTFVTX1FVRVVFXSA9IHJzLnF1ZXVlO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocnMuZm9ybWF0UXVldWUsIHRoaXMub3B0aW9ucy5jb25maWcpO1xuICAgIH1cbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9tZXRhX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xudmFyIHV0aWxBcnJheSA9IHJlcXVpcmUoJ0B1dGlscy91dGlsQXJyYXknKTtcbnZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnQHV0aWxzL2lzRnVuY3Rpb24nKTtcbi8vIHZhciB1dGlsTG9nZ2VyID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxMb2dnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xuXG4vKipcbiAqIEBwYXJhbXMge0FycmF5fSBRVUVVRVxuICogQHBhcmFtcyB7T2JqZWN0fSBvcHRzIHtcbiAqICAgaXNPcGVuQXBpOiB0cnVlIHx8IGZhbHNlIFxuICogfVxuICovXG52YXIgcHJvY2Vzc0dvbGRsb2dRdWV1ZSA9IGZ1bmN0aW9uIChRVUVVRSwgb3B0cykge1xuICBmdW5jdGlvbiBmKCkge1xuICAgIGlmICghUVVFVUUgfHwgIXV0aWxBcnJheS5pc0FycmF5KFFVRVVFKSB8fCAhUVVFVUUubGVuZ3RoKSByZXR1cm47XG4gICAgLy8g5o6S5bqPXG4gICAgdmFyIHF1ZSA9IGdldEZvcm1hdFF1ZXVlKFFVRVVFKS5xdWV1ZTtcbiAgICB2YXIgdGFzayA9IHt9O1xuICAgIHZhciBkZWxheVRhc2tzID0gW107XG4gICAgd2hpbGUgKHRhc2sgPSBxdWUuc2hpZnQoKSkgeyAvLyDkvp3mrKHmiafooYwgd2luZG93LmFwbHVzX3F1ZXVlIOS4reeahOS7u+WKoVxuICAgICAgcHJvY2Vzc1Rhc2sodGFzaywgb3B0cywgZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgZGVsYXlUYXNrcy5wdXNoKHQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChkZWxheVRhc2tzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICB3aGlsZSAodGFzayA9IGRlbGF5VGFza3Muc2hpZnQoKSkge1xuICAgICAgICAgIHByb2Nlc3NUYXNrKHRhc2ssIG9wdHMpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDApO1xuICAgIH1cbiAgfTtcbiAgdHJ5IHtcbiAgICBmKCk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHVsb2coKS53KGUpO1xuICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAvLyAgIG1zZzogZVxuICAgIC8vIH0pO1xuICB9XG59O1xuZXhwb3J0cy5wcm9jZXNzR29sZGxvZ1F1ZXVlID0gcHJvY2Vzc0dvbGRsb2dRdWV1ZTtcblxuZnVuY3Rpb24gZ2V0TWV0YUluZm8oKSB7XG4gIHZhciBfJCA9IHV0aWxHb2xkbG9nLmdldEdvbGRsb2dWYWwoJ18kJykgfHwge307XG4gIHZhciBtZXRhX2luZm8gPSBfJC5tZXRhX2luZm87IC8vIHx8IG1ldGFJbmZvLmdldEluZm8oKTtcbiAgcmV0dXJuIG1ldGFfaW5mbztcbn1cblxuZnVuY3Rpb24gZ2V0QXBsdXNIb2xkVHlwZSAoKSB7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgdWFpZCA9IG1ldGFfaW5mby51YWlkICsgJyc7XG4gIGlmICh1YWlkID09PSAnMScgJiYgIW1ldGFfaW5mby5fYW5vbnlfaWQpIHtcbiAgICByZXR1cm4gJ0JMT0NLJztcbiAgfVxuICByZXR1cm4gbWV0YV9pbmZvWydfaG9sZCddIHx8IG1ldGFfaW5mb1snYXBsdXMtd2FpdGluZyddO1xufVxuXG52YXIgQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUgPSBbXTtcbnZhciBBUExVU19IT0xEX0FOT05ZX1FVRVVFID0gW107XG52YXIgQVBMVVNfSE9MRF9RVUVVRSA9IFtdO1xuXG5mdW5jdGlvbiBmaWx0ZXJUYXNrICh0YXNrKSB7XG4gIHZhciBob2xkVHlwZSA9IGdldEFwbHVzSG9sZFR5cGUoKTtcbiAgLy8gY29uc29sZS5sb2coJ2hvbGRUeXBlID09PSAnLCBob2xkVHlwZSk7XG4gIHZhciBtZXRhX2luZm8gPSBnZXRNZXRhSW5mbygpIHx8IHt9O1xuICB2YXIgZmxhZyA9IHRydWU7XG5cbiAgLy8gMDogXCJfaG9sZFwiXG4gIC8vIDE6IFwiU1RBUlRcIlxuICB2YXIgYXJncyA9IHRhc2suYXJndW1lbnRzIHx8IFtdO1xuICB2YXIgbWV0YUtleSA9IGFyZ3NbMF07XG4gIHZhciBtZXRhVmFsdWUgPSBhcmdzWzFdO1xuICB2YXIgU1RBUlQgPSAnU1RBUlQnO1xuICBpZiAobWV0YUtleSA9PT0gJ19ob2xkJyAmJiBtZXRhVmFsdWUgPT09IFNUQVJUKSB7XG4gICAgcmV0dXJuIFNUQVJUO1xuICB9XG4gIGlmIChtZXRhS2V5ID09PSAnX2Fub255X2lkJyAmJiBtZXRhVmFsdWUpIHtcbiAgICByZXR1cm4gU1RBUlQ7XG4gIH1cbiAgaWYgKHRhc2sgJiYgL3NlbmRQVnxyZWNvcmR8c2V0UGFnZVNQTXxzZXRNZXRhSW5mb3xhcHBlbmRNZXRhSW5mbyQvLnRlc3QodGFzay5hY3Rpb24pKSB7XG4gICAgc3dpdGNoIChob2xkVHlwZSkge1xuICAgIGNhc2UgJ0JMT0NLJzpcbiAgICAgIGlmICghbWV0YV9pbmZvW2hvbGRUeXBlXSkge1xuICAgICAgICBBUExVU19IT0xEX1FVRVVFLnB1c2godGFzayk7XG4gICAgICAgIGZsYWcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZsYWc7XG59XG5cblxuLy8gdmFyIHByb2Nlc3NlZCA9IGZhbHNlO1xuZnVuY3Rpb24gcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUgKG9wdHMpIHtcbiAgLy8gaWYgKCFwcm9jZXNzZWQpIHtcbiAgLy8gICBwcm9jZXNzZWQgPSB0cnVlO1xuICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfVVNFUklEX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX0FOT05ZX1FVRVVFLCBvcHRzKTtcbiAgcHJvY2Vzc0dvbGRsb2dRdWV1ZShBUExVU19IT0xEX1FVRVVFLCBvcHRzKTsgIFxuICAvLyB9XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSBxdWV1ZU5hbWU6IGFwbHVzX3F1ZXVlIHx8IGdvbGRsb2dfcXVldWVcbiAqIEBwYXJhbXMge09iamVjdH0gb3B0cyB7XG4gKiAgIGlzT3BlbkFwaTogdHJ1ZSB8fCBmYWxzZSBcbiAqIH1cbiAqL1xuZXhwb3J0cy5zdWJzY3JpYmVBbmRQcm9jZXNzUXVldWUgPSBmdW5jdGlvbiAocXVldWVOYW1lLCBvcHRzKSB7XG4gIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICBxdWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbYXBsdXNTdGF0aWMuU0VUX01FVEFfSU5GTywgZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9VU0VSX0lEICYmIHZhbHVlKSB7XG4gICAgICAgIHByb2Nlc3NHb2xkbG9nUXVldWUoQVBMVVNfSE9MRF9VU0VSSURfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09IGFwbHVzU3RhdGljLl9BTk9OWV9JRCAmJiB2YWx1ZSkge1xuICAgICAgICBwcm9jZXNzR29sZGxvZ1F1ZXVlKEFQTFVTX0hPTERfQU5PTllfUVVFVUUsIG9wdHMpO1xuICAgICAgfSBlbHNlIGlmIChrZXkgPT09ICdfaG9sZCcgJiYgdmFsdWUgPT09ICdTVEFSVCcpIHtcbiAgICAgICAgcHJvY2Vzc0hvbGRHb2xkbG9nUXVldWUob3B0cyk7XG4gICAgICB9XG4gICAgfV1cbiAgfSk7XG59O1xuXG5mdW5jdGlvbiBnZXRNZXRob2ROYW1lIChrZXksIGlzT3BlbkFwaSkge1xuICBpZiAoaXNPcGVuQXBpICYmIGFwbHVzU3RhdGljLm9wZW5BUElzLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAga2V5ID0gJ18nICsga2V5O1xuICB9XG4gIHJldHVybiBrZXk7XG59XG5cbi8qKlxuICogQHBhcmFtcyB7T2JqZWN0fSB0YXNrXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBpc09wZW5BcGk6IHRydWUgfHwgZmFsc2UgXG4gKiB9XG4gKi9cbnZhciBwcm9jZXNzVGFzayA9IGZ1bmN0aW9uKHRhc2ssIG9wdHMsIGNhbGxiYWNrKSB7XG4gIHZhciBpc09wZW5BcGkgPSAhIW9wdHMuaXNPcGVuQXBpO1xuICB2YXIgYWN0aW9uID0gdGFzayA/IHRhc2suYWN0aW9uIDogJyc7XG4gIHZhciBhcmdzID0gdGFzayA/IHRhc2suYXJndW1lbnRzIDogJyc7XG5cbiAgdmFyIHJlc3VsdCA9IGZpbHRlclRhc2sodGFzayk7XG4gIGlmICghcmVzdWx0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZXh0ID0gdXRpbEdvbGRsb2cuZ2V0Q29udGV4dCgpO1xuICB0cnkgeyAvLyDnoa7kv53mn5DkuKrku7vliqHmiafooYzlpLHotKXkuI3kvJrlvbHlk43lhbblroPku7vliqFcbiAgICBpZiAoYWN0aW9uICYmIGFyZ3MgJiYgdXRpbEFycmF5LmlzQXJyYXkoYXJncykpIHtcbiAgICAgIHZhciBhID0gYWN0aW9uLnNwbGl0KCcuJyk7XG4gICAgICB2YXIgb2JqID0gY29udGV4dDtcbiAgICAgIHZhciBfZm4gPSBjb250ZXh0O1xuICAgICAgdmFyIG1ldGhvZE5hbWU7XG4gICAgICBpZiAoYS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgb2JqID0gY29udGV4dFthWzBdXVthWzFdXSB8fCB7fTtcbiAgICAgICAgbWV0aG9kTmFtZSA9IGdldE1ldGhvZE5hbWUoYVsyXSwgaXNPcGVuQXBpKTtcbiAgICAgICAgX2ZuID0gb2JqW21ldGhvZE5hbWVdID8gb2JqW21ldGhvZE5hbWVdIDogJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3aGlsZSAoYS5sZW5ndGgpIHtcbiAgICAgICAgICBtZXRob2ROYW1lID0gZ2V0TWV0aG9kTmFtZShhLnNoaWZ0KCksIGlzT3BlbkFwaSk7XG4gICAgICAgICAgX2ZuID0gb2JqID0gb2JqW21ldGhvZE5hbWVdO1xuICAgICAgICAgIGlmICghb2JqKSB7IC8vIOmdnuazlSBhY3Rpb25cbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xuICAgICAgICAgICAgICBjYWxsYmFjayh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uKF9mbikpIHtcbiAgICAgICAgX2ZuLmFwcGx5KG9iaiwgYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzdWx0ID09PSAnU1RBUlQnKSB7XG4gICAgICAgIHByb2Nlc3NIb2xkR29sZGxvZ1F1ZXVlKG9wdHMpO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaChlKSB7XG4gICAgdWxvZygpLncoZSk7XG4gICAgLy8gdXRpbExvZ2dlci5sb2dnZXIoe1xuICAgIC8vICAgbXNnOiBlXG4gICAgLy8gfSk7XG4gIH1cbn07XG5leHBvcnRzLnByb2Nlc3NUYXNrID0gcHJvY2Vzc1Rhc2s7XG5cbnZhciBnZXRGb3JtYXRRdWV1ZSA9IGZ1bmN0aW9uIChxdWV1ZSwgdHlwZSkge1xuICB2YXIgcXVldWVNYXAgPSB7XG4gICAgc3Vic2NyaWJlTXdDaGFuZ2VRdWV1ZTogW10sXG4gICAgc3Vic2NyaWJlTWV0YVF1ZXVlOiBbXSxcbiAgICBzdWJzY3JpYmVRdWV1ZTogW10sXG4gICAgbWV0YVF1ZXVlOiBbXSxcbiAgICBvdGhlcnNRdWV1ZTogW11cbiAgfTtcblxuICB2YXIgcSA9IFtdO1xuICB2YXIgdGFzayA9IHt9O1xuICB3aGlsZSAodGFzayA9IHF1ZXVlLnNoaWZ0KCkpIHsgLy8g5L6d5qyh5omn6KGMIHdpbmRvdy5hcGx1c19xdWV1ZSDkuK3nmoTku7vliqFcbiAgICB0cnkge1xuICAgICAgdmFyIGFjID0gdGFzay5hY3Rpb247XG4gICAgICB2YXIga2V5ID0gdGFzay5hcmd1bWVudHNbMF07XG4gICAgICBpZiAoL3N1YnNjcmliZS8udGVzdChhYykpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ3NldE1ldGFJbmZvJykge1xuICAgICAgICAgIHF1ZXVlTWFwLnN1YnNjcmliZU1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX1BWIHx8IGtleSA9PT0gYXBsdXNTdGF0aWMuTVdfQ0hBTkdFX0hKTEopIHtcbiAgICAgICAgICBxdWV1ZU1hcC5zdWJzY3JpYmVNd0NoYW5nZVF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVldWVNYXAuc3Vic2NyaWJlUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICgvTWV0YUluZm8vLnRlc3QoYWMpKSB7XG4gICAgICAgIHF1ZXVlTWFwLm1ldGFRdWV1ZS5wdXNoKHRhc2spO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVNYXAub3RoZXJzUXVldWUucHVzaCh0YXNrKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB1bG9nKCkudyhlKTtcbiAgICAgIC8vIHV0aWxMb2dnZXIubG9nZ2VyKHtcbiAgICAgIC8vICAgbXNnOiBlXG4gICAgICAvLyB9KTtcbiAgICAgIHF1ZXVlTWFwLm90aGVyc1F1ZXVlLnB1c2godGFzayk7XG4gICAgfVxuICB9XG4gIHZhciBmb3JtYXRRdWV1ZTtcbiAgaWYgKHR5cGUgJiYgcXVldWVNYXBbdHlwZV0pIHtcbiAgICBmb3JtYXRRdWV1ZSA9IHF1ZXVlTWFwW3R5cGVdO1xuICAgIHF1ZXVlTWFwW3R5cGVdID0gW107XG4gIH1cbiAgcSA9IHF1ZXVlTWFwLnN1YnNjcmliZU13Q2hhbmdlUXVldWUuY29uY2F0KHF1ZXVlTWFwLm1ldGFRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVRdWV1ZSk7XG4gIHEgPSBxLmNvbmNhdChxdWV1ZU1hcC5zdWJzY3JpYmVNZXRhUXVldWUsIHF1ZXVlTWFwLm90aGVyc1F1ZXVlKTtcbiAgcmV0dXJuIHtcbiAgICBxdWV1ZTogcSxcbiAgICBmb3JtYXRRdWV1ZTogZm9ybWF0UXVldWVcbiAgfTtcbn07XG5leHBvcnRzLmdldEZvcm1hdFF1ZXVlID0gZ2V0Rm9ybWF0UXVldWU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zL2xpYl9xdWV1ZS9hY3Rpb24uanNcbi8vIG1vZHVsZSBpZCA9IDk1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICogYWxpbG9nL3MgLSBzcmMvbGliX3UvY29uZmlnL2luaXQvaW5pdExvYWRfYmFzZS5qc1xuICog5Yid5aeL5YyW5Z+656GA5qih5Z2X77yM5LiN6IO955u05o6l5L2/55So77yM6ZyA6KaB6YCa6L+HaW5pdExvYWRfcGMuanPmiJZpbml0TG9hZF93YXAuanPnrYnlhbfkvZPnmoTlnLrmma/mqKHlnZfosIPnlKhcbiAqXG4gKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4gKlxuICogQXV0aG9yczpcbiAqICAgQGF1dGhvciBqaXpoYS53eWogQGJsb2cgaHR0cDovL29sZGoubmV0XG4gKiAgIOiwi+WjqyA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIEJhc2UgPSByZXF1aXJlKCdAY29yZS9CYXNlJyk7XG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhY3Rpb24gPSByZXF1aXJlKCcuL2FjdGlvbicpO1xuXG52YXIgUXVldWUgPSBCYXNlLmV4dGVuZCh7XG4gIHB1c2g6IGZ1bmN0aW9uKHRhc2spIHtcbiAgICB0aGlzLmxlbmd0aCsrO1xuICAgIGFjdGlvbi5wcm9jZXNzVGFzayh0YXNrLCB0aGlzLm9wdHMpOyAgXG4gIH0sXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgcHJvY2Vzc0FwbHVzUXVldWU6IGZ1bmN0aW9uIChxdWV1ZU5hbWUpIHtcbiAgICAgIHZhciBvcHRzID0gdGhpcy5vcHRpb25zLmNvbmZpZyB8fCB7fTtcbiAgICAgIHZhciBxdWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShxdWV1ZU5hbWUpO1xuICAgICAgYWN0aW9uLnByb2Nlc3NHb2xkbG9nUXVldWUocXVlLCBvcHRzKTtcbiAgICAgIHV0aWxHb2xkbG9nLnNldEdsb2JhbFZhbHVlKHF1ZXVlTmFtZSwgUXVldWUuY3JlYXRlKHtcbiAgICAgICAgb3B0czogb3B0cywgXG4gICAgICAgIHN0YXJ0TGVuZ3RoOiBxdWUubGVuZ3RoLFxuICAgICAgICBsZW5ndGg6IDBcbiAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtcyB7U3RyaW5nfSB0eXBlXG4gICAgICovXG4gICAgcnVuOiAgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFwbHVzX2NvbmZpZyA9IHRoaXMub3B0aW9ucy5jb250ZXh0LmFwbHVzX2NvbmZpZztcbiAgICAgIHZhciBBUExVU19RVUVVRSA9IGFwbHVzX2NvbmZpZy5nbG9iYWxDb25maWcuQVBMVVNfUVVFVUU7XG5cbiAgICAgIHRoaXMucHJvY2Vzc0FwbHVzUXVldWUoQVBMVVNfUVVFVUUpO1xuXG4gICAgICBpZiAoQVBMVVNfUVVFVUUgPT09ICdhcGx1c19xdWV1ZScpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzQXBsdXNRdWV1ZSgnZ29sZGxvZ19xdWV1ZScpO1xuICAgICAgfVxuICAgICAgYWN0aW9uLnN1YnNjcmliZUFuZFByb2Nlc3NRdWV1ZShBUExVU19RVUVVRSwgdGhpcy5vcHRpb25zLmNvbmZpZyk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnMvbGliX3F1ZXVlL2FwbHVzX3F1ZXVlLmpzXG4vLyBtb2R1bGUgaWQgPSA5NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKipcbiAqIOWPi+ebn+S6keadoeS7tuS4i+eahOiHquWKqOS6i+S7tuaPkuS7tiAgICAgXG4gKiBcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICogXG4gKiBBdXRob3I6IFxuICogICAg6ZKw5pitIChjaGFuZ2xpYW5nLmxjbEB1bWVuZy5jb20pXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xudmFyIEZldGNoQ29uZmlnID0gcmVxdWlyZSgnLi9saWJfbWluaXZ0L2ZldGNoQ29uZmlnJyk7XG52YXIgdXRpbEdRID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHUScpO1xudmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xudmFyIHV0aWxWVCA9IHJlcXVpcmUoJy4vbGliX21pbml2dC91dGlsVlQnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcbnZhciB1bG9nID0gcmVxdWlyZSgnQHV0aWxzL3Vsb2cnKTtcblxuZnVuY3Rpb24gYXV0b1RyYWNrZXIgKCkge1xuICB2YXIgcmJfY29uZmlnLCBwZHJfY29uZmlnLCBzaGFyZV9jb25maWc7XG4gIC8vIHZhciBwcmVmaXggPSBtaW5pLmdldENvbnRleHQoKTtcbiAgdmFyIGN0eCA9IHV0aWxHb2xkbG9nLmdldENvbnRleHQoKTtcbiAgdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNTdGF0aWMuQVBMVVMpO1xuICB2YXIgYXBsdXNfcXVldWUgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZShhcGx1c1N0YXRpYy5BUExVU19RVUVVRSk7XG4gIHZhciBfaGFzVHJhY2tlZCA9IGZhbHNlO1xuICB2YXIgX2N1cnJlbnRQYWdlID0ge1xuICAgIHRzOiBEYXRlLm5vdygpXG4gIH07XG4gIHZhciBjb3VudCA9IHtcbiAgICAnb25QdWxsRG93blJlZnJlc2gnOiAwLFxuICAgICdvblNoYXJlVGltZWxpbmUnOiAwLFxuICAgICdvblJlYWNoQm90dG9tJzogMCxcbiAgICAnb25TaGFyZUFwcE1lc3NhZ2UnOiAwLFxuICAgICdvbkNsaWNrJzogMFxuICB9O1xuXG4gIGZ1bmN0aW9uIGV2ZW50SGFuZGxlICgpIHtcbiAgICB2YXIgZXZlbnROYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gPyBhcmd1bWVudHNbMF0gOiAnJztcbiAgICB2YXIgcGFnZUluc3RhbmNlID0gbWluaS5nZXRDdXJyZW50UGFnZSgpO1xuICAgIHZhciBjdXJyZW50UGFnZSA9IHBhZ2VJbnN0YW5jZS5yb3V0ZSB8fCBwYWdlSW5zdGFuY2UuaXM7XG4gICAgLy8gdmFyIHA7XG4gICAgXG4gICAgc3dpdGNoIChldmVudE5hbWUpIHtcbiAgICBjYXNlICdvblB1bGxEb3duUmVmcmVzaCc6XG4gICAgICBjb3VudC5vblB1bGxEb3duUmVmcmVzaCArPSAxO1xuICAgICAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ2FwbHVzLnJlY29yZCcsXG4gICAgICAgIGFyZ3VtZW50czogW3Bkcl9jb25maWcubG9na2V5IHx8ICckJF9wdWxsX2Rvd25fcmVmcmVzaCcsICdDTEsnLCB7XG4gICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcbiAgICAgICAgICBjb3VudDogY291bnQub25QdWxsRG93blJlZnJlc2hcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25SZWFjaEJvdHRvbSc6XG4gICAgICBjb3VudC5vblJlYWNoQm90dG9tICs9IDE7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbcmJfY29uZmlnLmxvZ2tleSB8fCAnJCRfcmVhY2hfYm90dG9tJywgJ0NMSycsIHtcbiAgICAgICAgICBldmVudDogZXZlbnROYW1lLFxuICAgICAgICAgIHBhZ2VuYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IGN1cnJlbnRQYWdlLFxuICAgICAgICAgIGNvdW50OiBjb3VudC5vblJlYWNoQm90dG9tXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ29uU2hhcmVBcHBNZXNzYWdlJzpcbiAgICAgIGNvdW50Lm9uU2hhcmVBcHBNZXNzYWdlICs9IDE7XG4gICAgICBhcGx1c19xdWV1ZS5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiAnYXBsdXMucmVjb3JkJyxcbiAgICAgICAgYXJndW1lbnRzOiBbc2hhcmVfY29uZmlnLmxvZ2tleSB8fCAnJCRfc2hhcmUnLCAnQ0xLJywge1xuICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXG4gICAgICAgICAgcGFnZW5hbWU6IFBhZ2VNYW5hZ2VyLmdldFBhZ2VDb2RlKCkgfHwgY3VycmVudFBhZ2UsXG4gICAgICAgICAgY291bnQ6IGNvdW50Lm9uU2hhcmVBcHBNZXNzYWdlLFxuICAgICAgICAgIHNoYXJlX3R5cGU6IDFcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25TaGFyZVRpbWVsaW5lJzogXG4gICAgICBjb3VudC5vblNoYXJlVGltZWxpbmUgKz0gMTtcbiAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdhcGx1cy5yZWNvcmQnLFxuICAgICAgICBhcmd1bWVudHM6IFtzaGFyZV9jb25maWcubG9na2V5IHx8ICckJF9zaGFyZScsICdDTEsnLCB7XG4gICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcbiAgICAgICAgICBwYWdlbmFtZTogUGFnZU1hbmFnZXIuZ2V0UGFnZUNvZGUoKSB8fCBjdXJyZW50UGFnZSxcbiAgICAgICAgICBjb3VudDogY291bnQub25TaGFyZVRpbWVsaW5lLFxuICAgICAgICAgIHNoYXJlX3R5cGU6IDBcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnb25QYWdlU2hvdyc6XG4gICAgICBpZiAocGFnZUluc3RhbmNlLnJvdXRlICYmICFfaGFzVHJhY2tlZCkge1xuICAgICAgICBfY3VycmVudFBhZ2UgPSB7XG4gICAgICAgICAgcGF0aDogcGFnZUluc3RhbmNlLnJvdXRlLFxuICAgICAgICAgIHBhZ2VfbmFtZTogcGFnZUluc3RhbmNlLnJvdXRlLFxuICAgICAgICB9O1xuICAgICAgICBfY3VycmVudFBhZ2UudHMgPSBEYXRlLm5vdygpO1xuICAgICAgICBfaGFzVHJhY2tlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdvblBhZ2VIaWRlJzogIFxuICAgICAgaWYgKF9oYXNUcmFja2VkKSB7XG4gICAgICAgIHZhciBkdXJhdGlvbiA9IERhdGUubm93KCkgLSBfY3VycmVudFBhZ2UudHMgfHwgMDtcbiAgICAgICAgLy8g5Yqg6L295pe25py655qE6Zeu6aKY77yM5pS+5Zyo5q2k5aSE5Y+WcmVmZXJyZXLnm7jmr5Tkuo5taW5pYXBwX2RhdGHlh4bnoa5cbiAgICAgICAgdmFyIHJlZmVycmVyID0gbWluaS5nZXRSZWZlcnJlclBhZ2UoKS5yb3V0ZSB8fCBtaW5pLmdldFJlZmVycmVyUGFnZSgpLmlzIHx8ICctJztcbiAgICAgICAgdmFyIGV4dHJhUGFyYW1zID0gKFBhZ2VNYW5hZ2VyLmdldFBhZ2VOYW1lKCkgfHwge30pLmV4dHJhUGFyYW1zO1xuICAgICAgICB2YXIgcHZhcmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZXh0cmFQYXJhbXMsIHtcbiAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgcGF0aDogX2N1cnJlbnRQYWdlLnBhdGgsXG4gICAgICAgICAgcGFnZV9uYW1lOiBQYWdlTWFuYWdlci5nZXRQYWdlQ29kZSgpIHx8IF9jdXJyZW50UGFnZS5wYWdlX25hbWUsXG4gICAgICAgICAgcGFnZV9zdGFydDogX2N1cnJlbnRQYWdlLnRzLFxuICAgICAgICAgIGlzTWluaTogdHJ1ZSxcbiAgICAgICAgICBfcGFnZV9hdXRvX2lkOiBhcGx1c1N0YXRpYy5QQUdFX0VORCxcbiAgICAgICAgICBfcGFnZV9hdXRvX3B2OiB0cnVlLFxuICAgICAgICAgIHJlZmVycmVyOiByZWZlcnJlcixcbiAgICAgICAgfSk7XG4gICAgICAgIGFwbHVzX3F1ZXVlLnB1c2goe1xuICAgICAgICAgIGFjdGlvbjogXCJhcGx1cy5zZW5kUFZcIixcbiAgICAgICAgICBhcmd1bWVudHM6IFt7IGlzX2F1dG86IHRydWUsIHRyYWNrX3R5cGU6IFwiMVwiIH0sIHB2YXJnc11cbiAgICAgICAgfSk7XG4gICAgICAgIF9jdXJyZW50UGFnZSA9IG51bGw7XG4gICAgICAgIF9oYXNUcmFja2VkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldENvbmZpZyAoKSB7XG4gICAgcmJfY29uZmlnID0gYXBsdXMuZ2V0TWV0YUluZm8oJ3JiX2NvbmZpZycpO1xuICAgIHBkcl9jb25maWcgPSBhcGx1cy5nZXRNZXRhSW5mbygncGRyX2NvbmZpZycpO1xuICAgIHNoYXJlX2NvbmZpZyA9IGFwbHVzLmdldE1ldGFJbmZvKCdzaGFyZV9jb25maWcnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoVmVyaWZ5Q29uZmlnKGNvZGUsIGFwcEluZm9JZCkge1xuICAgIGlmICghY29kZSB8fCAhYXBwSW5mb0lkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHsgXG4gICAgICB2YXIgYXBpX2hvc3QgPSBhcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtYXBpLWhvc3QnKTtcbiAgICAgIHZhciByZWcgPSAvW1thLXp8XFwtfFxcX3wwLTlcXC5dK1thLXp8XFwtfFxcX3wwLTldKDpcXGQqKT8vO1xuICAgICAgdmFyIHZlcmlmeV9ob3N0ID0gYXBpX2hvc3QubWF0Y2gocmVnKTtcbiAgICAgIFxuICAgICAgaWYgKHZlcmlmeV9ob3N0ICYmIHZlcmlmeV9ob3N0WzBdKSB7XG4gICAgICAgIHZhciBwcm90b2NhbCA9IGFwbHVzU3RhdGljLkhUVFBTO1xuICAgICAgICBpZiAoLyhcXGQrXFwuKXszLH1cXGQrLy50ZXN0KHZlcmlmeV9ob3N0WzBdKSkge1xuICAgICAgICAgIHByb3RvY2FsID0gJ2h0dHA6JztcbiAgICAgICAgfVxuICAgICAgICB2YXIgdmVyaWZ5VXJsID0gcHJvdG9jYWwgKyAnLy8nICsgYXBpX2hvc3QrICcvdnQvbG9hZFRyYW5zZmVyQ29uZmlnP2NvZGU9JyArIGNvZGUgKyAnJmFwcEluZm9JZD0nICsgYXBwSW5mb0lkO1xuICAgICAgICBtaW5pLnJlcXVlc3QodmVyaWZ5VXJsLCB7fSwgZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBjZmdEYXRhID0gKHJlc3AuZGF0YSAmJiByZXNwLmRhdGEuZGF0YSAmJiByZXNwLmRhdGEuZGF0YS5jb25maWcpIHx8ICcnO1xuICAgICAgICAgICAgdmFyIGRlYnVnSWQgPSAocmVzcC5kYXRhICYmIHJlc3AuZGF0YS5kYXRhICYmIHJlc3AuZGF0YS5kYXRhLmRlYnVnSWQpIHx8ICcnO1xuICAgICAgICAgICAgaWYoZGVidWdJZCl7XG4gICAgICAgICAgICAgIGFwbHVzLmFwcGVuZE1ldGFJbmZvKCdhcGx1cy1nbG9iYWwtYXJncycse1xuICAgICAgICAgICAgICAgIGRlYnVnSWQ6ZGVidWdJZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBfYmVnaW5Mb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSBfYmVnaW5Mb2FkO1xuICAgICAgICAgICAgaWYgKGNmZ0RhdGEpIHtcbiAgICAgICAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IEpTT04ucGFyc2UoY2ZnRGF0YSkgfHwge307XG4gICAgICAgICAgICAgIHV0aWxWVC52dDJhdXRvRXZlbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB1bG9nKCkudygnZmV0Y2ggcmVhbC10aW1lIHZpc3VhbGl6YXRpb24gdmVyaWZpY2F0aW9uIGZhaWxlZCwgZXJyIG1zZzonICsgZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgXG4gICAgfVxuICB9XG5cbiAgYXBsdXNfcXVldWUucHVzaCh7XG4gICAgYWN0aW9uOiBhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsXG4gICAgYXJndW1lbnRzOiBbJ2FwbHVzUmVhZHknLCBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gICAgICBpZiAoc3RhdHVzID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgIGdldENvbmZpZygpO1xuICAgICAgfVxuICAgIH1dXG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uTG9hZCcsIGZ1bmN0aW9uKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgY29kZSA9IFBhZ2VNYW5hZ2VyLmdldFZUUmVhbHRpbWVDb2RlKCk7XG4gICAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgICAgdmFyIGFwcEluZm9JZCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcHBJbmZvSWQnKTtcbiAgICAgICAgICBmZXRjaFZlcmlmeUNvbmZpZyhjb2RlLCBhcHBJbmZvSWQpO1xuICAgICAgICB9IGVsc2UgeyAgICAgICAgICBcbiAgICAgICAgICAhIWFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJykgJiYgdXRpbFZULnZ0MmF1dG9FdmVudCgpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgdWxvZygpLncoJ2ZldGNoIHJlYWwtdGltZSB2aXN1YWxpemF0aW9uIHZlcmlmaWNhdGlvbiBmYWlsZWQsIGVycm1zZzonICsgZSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBhcGx1cy5hcGx1c19wdWJzdWIuc3Vic2NyaWJlKCdvblNob3cnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIHZhciBpc0F1dG8gPSBjdHguYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXdhaXRpbmcnKSAhPT0gJ01BTic7XG4gICAgICBpc0F1dG8gJiYgZXZlbnRIYW5kbGUoJ29uUGFnZVNob3cnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uSGlkZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgdmFyIGlzQXV0byA9IGN0eC5hcGx1cy5nZXRNZXRhSW5mbygnYXBsdXMtd2FpdGluZycpICE9PSAnTUFOJztcbiAgICAgIGlzQXV0byAmJiBldmVudEhhbmRsZSgnb25QYWdlSGlkZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25QdWxsRG93blJlZnJlc2gnLCBmdW5jdGlvbiAob3B0KSB7XG4gICAgaWYgKG9wdC5zdGF0dXMgPT09ICdyZWFkeScpIHtcbiAgICAgIGV2ZW50SGFuZGxlKCdvblB1bGxEb3duUmVmcmVzaCcpO1xuICAgIH1cbiAgfSk7XG5cbiAgYXBsdXMuYXBsdXNfcHVic3ViLnN1YnNjcmliZSgnb25SZWFjaEJvdHRvbScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uUmVhY2hCb3R0b20nKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVBcHBNZXNzYWdlJywgZnVuY3Rpb24gKG9wdCkge1xuICAgIGlmIChvcHQuc3RhdHVzID09PSAncmVhZHknKSB7XG4gICAgICBldmVudEhhbmRsZSgnb25TaGFyZUFwcE1lc3NhZ2UnKTtcbiAgICB9XG4gIH0pO1xuXG4gIGFwbHVzLmFwbHVzX3B1YnN1Yi5zdWJzY3JpYmUoJ29uU2hhcmVUaW1lbGluZScsIGZ1bmN0aW9uIChvcHQpIHtcbiAgICBpZiAob3B0LnN0YXR1cyA9PT0gJ3JlYWR5Jykge1xuICAgICAgZXZlbnRIYW5kbGUoJ29uU2hhcmVUaW1lbGluZScpO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKCEhYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXZ0LWNmZy11cmwnKSkge1xuICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShhcGx1c1N0YXRpYy5TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19GT1JNQVQsIGZ1bmN0aW9uKG9wdGlvbnMpe1xuICAgICAgdmFyIHBhZ2VDb25maWcgPSBvcHRpb25zLnBhZ2VDb25maWc7XG4gICAgICBpZiAocGFnZUNvbmZpZyAmJiBwYWdlQ29uZmlnLmVuYWJsZWQpIHtcbiAgICAgICAgYXBsdXMuX2FwbHVzX3Z0X2NmZyA9IHBhZ2VDb25maWc7XG4gICAgICB9XG4gICAgfV0pO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHtcbiAgICBydW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgICAgYXV0b1RyYWNrZXIoKTtcbiAgICAgIGlmICghYXBsdXMuX2FwbHVzX2FsZWFkeV9sb2FkX21pbml2dCl7XG4gICAgICAgIGFwbHVzLl9hcGx1c19hbGVhZHlfbG9hZF9taW5pdnQgPSAxO1xuICAgICAgICB2YXIgZmMgPSBGZXRjaENvbmZpZy5jcmVhdGUoKTtcbiAgICAgICAgZmMucnVuKCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9hdXRvX3RyYWNrZXJfdW0uanNcbi8vIG1vZHVsZSBpZCA9IDk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxuICog5Y+v6KeG5YyW5Z+L54K56YWN572u5L+h5oGv6K+35rGCIFxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIEFhcm9ufOmSsOaYrSA8cWluZ2xpYW5nLmhxbEBhbGliYWJhLWluYy5jb20+XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQmFzZSA9IHJlcXVpcmUoJ0Bjb3JlL0Jhc2UnKTtcbnZhciB1dGlsR1EgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdRJyk7XG52YXIgdXRpbENhdGNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxDYXRjaCcpO1xudmFyIGVhY2ggPSByZXF1aXJlKCdAdXRpbHMvZWFjaCcpO1xudmFyIHV0aWxEYXNoID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxEYXNoJyk7XG52YXIgbWluaXZ0U3RvcmUgPSByZXF1aXJlKCdAdXRpbHMvbWluaXZ0U3RvcmUnKTtcbi8vIHZhciB1dGlsVXJsID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxVcmwnKTtcbnZhciBhcGx1c1N0YXRpYyA9IHJlcXVpcmUoJ0B1dGlscy9hcGx1c1N0YXRpYycpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG4vLyB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBNSU5JX1ZUX0NPTkZJR19CQUNLID0gJ01pbmlWdENvbmZpZ0JhY2snO1xudmFyIE1JTklfVlRfQ09ORklHX0ZPUk1BVCA9ICdNaW5pVnRDb25maWdGb3JtYXQnO1xuXG52YXIgR09MRExPR19QVUJMSVNIID0gYXBsdXNTdGF0aWMuUFVCTElTSDtcbi8vIHByb2Q6IGh0dHBzOi8vYWxpZHQuYWxpY2RuLmNvbS9hbGlsb2cvdnRkYWlseS8ke2NvbXBvbmVudElEfS5qc29uXG4vLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnQvYTF6MWQxXzEyMjc5OTE0Lmpzb25cbi8vIHZhciBIT1NUID0gJy8vZy5hbGljZG4uY29tL2FsaWxvZyc7XG4vLyB2YXIgSE9TVCA9ICcvL2QuYWxpY2RuLmNvbS9hbGlsb2cnO1xuXG4vLyBmdW5jdGlvbiBpc0RhaWx5ICgpIHtcbi8vICAgdmFyIHJzID0gZmFsc2U7XG4vLyAgIGlmIChhcGx1cyAmJiBhcGx1cy5hcGx1c0RlYnVnKSB7XG4vLyAgICAgcmV0dXJuIHRydWU7XG4vLyAgIH1cbi8vICAgcmV0dXJuIHJzO1xuLy8gfVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhc2UuZXh0ZW5kKHV0aWxEYXNoLmFzc2lnbihtaW5pdnRTdG9yZSwge1xuXG4gIHBhdGhuYW1lOiAnJyxcblxuICBwYWdlQ29uZmlnOiB7fSxcblxuICBvcmlnaW5TcG06IHtcbiAgICBzcG1BOiAnJyxcbiAgICBzcG1COiAnJ1xuICB9LFxuXG4gIHVwZGF0ZUNmZ0xzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIF9zZWxmLmZldGNoRnJvbUNkbigpO1xuICAgIH0sMTAwMCk7XG4gIH0sXG5cbiAgZmV0Y2hGcm9tQ2RuOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIF9zZWxmID0gdGhpcztcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICB2YXIgcGF0aCA9IGFwbHVzLmdldE1ldGFJbmZvKCdhcGx1cy12dC1jZmctdXJsJyk7XG4gICAgaWYgKCFwYXRoKSByZXR1cm47XG4gICAgdmFyIF9iZWdpbkxvYWQgPSAobmV3IERhdGUpLmdldFRpbWUoKTtcbiAgICBhcGx1cy5yZXF1ZXN0VlRDb25maWcocGF0aCwgZnVuY3Rpb24ocmVzcCkge1xuICAgICAgdmFyIGNmZ0RhdGEgPSByZXNwLmRhdGE7XG4gICAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gKG5ldyBEYXRlKS5nZXRUaW1lKCkgLSBfYmVnaW5Mb2FkO1xuICAgICAgaWYgKGNmZ0RhdGEpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdHlwZW9mIGNmZ0RhdGEgPT09ICdvYmplY3QnID8gY2ZnRGF0YSA6IEpTT04ucGFyc2UoY2ZnRGF0YSk7XG4gICAgICAgICAgaWYgKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzKSB7XG4gICAgICAgICAgICBlYWNoKGFwbHVzLl9hcGx1c192dF9jZmcucG9pbnRzLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICB2LnNlbGVjdG9yID0gZGVjb2RlVVJJQ29tcG9uZW50KHYuc2VsZWN0b3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIF9zZWxmLnNldENvbmZpZ0ludG9McyhhcGx1cy5fYXBsdXNfdnRfY2ZnKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGFwbHVzLl9hcGx1c192dF9jZmcgPSB7XG4gICAgICAgICAgICBlbmFibGVkOiBmYWxzZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZShHT0xETE9HX1BVQkxJU0gsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCB7cGFnZUNvbmZpZzphcGx1cy5fYXBsdXNfdnRfY2ZnLCBlbmFibGU6IDB9XSk7XG4gICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICBpZiAoYXBsdXMuX2FwbHVzX3Z0X2NmZyAmJiBhcGx1cy5fYXBsdXNfdnRfY2ZnLmVuYWJsZWQpIHtcbiAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOmFwbHVzLl9hcGx1c192dF9jZmcsIGVuYWJsZTogMH1dKTsgIFxuICAgICAgfVxuICAgICAgdXRpbENhdGNoLmNhdGNoRXhjZXB0aW9uKCdnZXRUcmFja2VyQ2ZnJywgZXJyb3IsIHtcbiAgICAgICAgbXNnOiBwYXRoXG4gICAgICB9KTtcbiAgICB9LCB7XG4gICAgICB0aW1lb3V0OiA1MDAwXG4gICAgfSk7XG4gIH0sXG5cbiAgZ2V0TWluaVZ0RGF0YTogZnVuY3Rpb24oY2RucGF0aCwgcHJlVXJsLCBmcm9tQ0ROKXtcbiAgICB2YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbiAgICBhcGx1cy5fbWluaWNmZ19sb2FkID0gMDtcbiAgICBpZiAoY2RucGF0aCkge1xuICAgICAgdmFyIHZ0Q29uZmlnID0gdGhpcy5mZXRjaEZyb21MUyhjZG5wYXRoKTtcbiAgICAgIGlmKHR5cGVvZiB2dENvbmZpZyA9PSAnc3RyaW5nJykge1xuICAgICAgICB0cnl7XG4gICAgICAgICAgdnRDb25maWcgPSBKU09OLnBhcnNlKHZ0Q29uZmlnKTtcbiAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgdnRDb25maWcgPSB7fTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodnRDb25maWcgJiYgdnRDb25maWcuZW5hYmxlZCkge1xuICAgICAgICBhcGx1cy5fYXBsdXNfdnRfY2ZnID0gdnRDb25maWc7XG4gICAgICB9XG4gICAgICBpZiggIWZyb21DRE4pIHtcbiAgICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0JBQ0ssIHtwYWdlQ29uZmlnOnZ0Q29uZmlnLCBlbmFibGU6IDB9XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZldGNoRnJvbUNkbihjZG5wYXRoLCBwcmVVcmwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvLyBodHRwczovL2QuYWxpY2RuLmNvbS9hbGlsb2cvdnRfZGFpbHkvYTF6MWQxXzEyMjc5OTE0Lmpzb25cbiAgc3luY01pbmlWdERhdGE6IGZ1bmN0aW9uKCl7XG4gICAgLy9zdWJzY3JpYmUgIHdzLnJlYWR5XG4gICAgdmFyIGNkbnBhdGggPSB0aGlzLmdldFZ0Q29uZmlnUGF0aCgpO1xuICAgIHRoaXMuZ2V0TWluaVZ0RGF0YShjZG5wYXRoLCAnJywgdHJ1ZSk7XG4gIH0sXG5cbiAgaW5pdDogZnVuY3Rpb24oKXtcbiAgICB2YXIgX3NlbGYgPSB0aGlzO1xuICAgIFxuICAgIHZhciBHT0xETE9HX1NVQlNDUklCRSA9IGFwbHVzU3RhdGljLlNVQlNDUklCRTtcbiAgICAvL3RoaXMgZXZlbnQgZnJvbSBMUyBvciBmcm9tIFdTIHRvIGdldCBjb25maWdcbiAgICB1dGlsR1EucHVzaEludG9Hb2xkbG9nUXVldWUoR09MRExPR19TVUJTQ1JJQkUsIFtNSU5JX1ZUX0NPTkZJR19CQUNLLCBmdW5jdGlvbiAob3JpRGF0YXMpIHtcbiAgICAgIGlmKCFvcmlEYXRhcy5lbmFibGUpIHtcbiAgICAgICAgX3NlbGYucGFnZUNvbmZpZyA9IG9yaURhdGFzLnBhZ2VDb25maWc7XG4gICAgICB9XG4gICAgICAvL3RoaXMgZXZlbnQgdG8gdXNlO1xuICAgICAgdXRpbEdRLnB1c2hJbnRvR29sZGxvZ1F1ZXVlKEdPTERMT0dfUFVCTElTSCwgW01JTklfVlRfQ09ORklHX0ZPUk1BVCwge1xuICAgICAgICBwYWdlQ29uZmlnOiBfc2VsZi5wYWdlQ29uZmlnLFxuICAgICAgICBvcmlnaW5TcG06IF9zZWxmLm9yaWdpblNwbVxuICAgICAgfV0pO1xuICAgICAgIW9yaURhdGFzLmVuYWJsZSAmJiBfc2VsZi5zZXRDb25maWdJbnRvTHMoX3NlbGYucGFnZUNvbmZpZyk7XG4gICAgfV0pO1xuICAgIF9zZWxmLnN5bmNNaW5pVnREYXRhKCk7XG4gIH0sXG5cbiAgcnVuOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3BsdWdpbnNfbWluaS9saWJfbWluaXZ0L2ZldGNoQ29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSA5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhbGlsb2cvcy9zcmMvbGliX3UvdXRpbHMvdXRpbEF0dHJpYnV0ZS5qc1xuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR1EgPSByZXF1aXJlKCcuL3V0aWxHUScpO1xuXG5leHBvcnRzLmNhdGNoRXhjZXB0aW9uID0gZnVuY3Rpb24gKGZpbGVuYW1lLCBlcnJvcikge1xuICB2YXIgbWVzc2FnZSA9IGZpbGVuYW1lO1xuICBpZiAodHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiBlcnJvci5tZXNzYWdlKSB7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgKyAnXycgKyBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHV0aWxHUS5wdXNoSW50b0dvbGRsb2dRdWV1ZSgnYXBsdXMuX2FwbHVzX2NwbHVnaW5fbS5kb190cmFja2VyX2pzZXJyb3InLCBbe1xuICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgZXJyb3I6IEpTT04uc3RyaW5naWZ5KGVycm9yKSxcbiAgICBmaWxlbmFtZTogZmlsZW5hbWVcbiAgfV0pO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9saWJfdS91dGlscy91dGlsQ2F0Y2guanNcbi8vIG1vZHVsZSBpZCA9IDk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qIGlzdGFuYnVsIGlnbm9yZSBmaWxlICovXG4vKipcbiAqIHByb2plY3QgLSBmaWxlcGF0aFxuKiBkZXNjcmlwdGlvblxuKlxuKiBDb3B5cmlnaHQoYykgQWxpYmFiYSBHcm91cCBIb2xkaW5nIExpbWl0ZWQuXG4qXG4qIEF1dGhvcnM6XG4qICAgQWFyb24gfCDpkrDmmK0gPGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbT5cbiovXG4ndXNlIHN0cmljdCc7XG5cbnZhciB1dGlsR29sZGxvZyA9IHJlcXVpcmUoJ0B1dGlscy91dGlsR29sZGxvZycpO1xuLy8gdmFyIGFwbHVzID0gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoJ2FwbHVzJyk7XG52YXIgbWluaSA9IHJlcXVpcmUoJ0B1dGlscy9taW5pJyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzL3V0aWwnKTtcbm1vZHVsZS5leHBvcnRzID0ge1xuICBsc01pbml2dENvbmZpZ0tleTogJ0FQTFVTX01JTklfQ09ORklHJyxcblxuICAvKipcbiAgICog5YWs5YWx5qih5p2/5Zy65pmv77yM5aaC5p6cdHVybm9uPT09JzEnIOaLieWPlnZhbHVl5YaF55qE5YaF5a65XG4gICAqIG1ldGFJbmZvOiB7XG4gICAqICAnYXBsdXMtdHJhY2stY29uZmlnLWlkJzoge1xuICAgKiAgICAndmFsdWUnOiAncGFDd1psRzJXdjdsbGhobScsXG4gICAqICAgICd0dXJub24nOiAnMCcgb3IgJzEnICAgXG4gICAqICB9XG4gICAqIH1cbiAgICovXG4gIGdldE1pbmlWdFRwbENkblBhdGg6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcGx1cyA9IHV0aWxHb2xkbG9nLmdldEdsb2JhbFZhbHVlKCdhcGx1cycpO1xuICAgIHZhciBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvID0gYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLXRyYWNrLWNvbmZpZy1pZCcpO1xuICAgIHZhciB0dXJub24gPSBhcGx1c1RyYWNrQ29uZmlnSWRJbmZvICYmIGFwbHVzVHJhY2tDb25maWdJZEluZm8udHVybm9uO1xuICAgIHZhciB2YWx1ZSA9IGFwbHVzVHJhY2tDb25maWdJZEluZm8gJiYgYXBsdXNUcmFja0NvbmZpZ0lkSW5mby52YWx1ZTtcbiAgICBpZiAodHVybm9uID09PSAnMScgJiYgdmFsdWUpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuICcnO1xuICB9LFxuXG4gIGdldFZ0Q29uZmlnUGF0aDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRlbXBsYXRlVmFsID0gdGhpcy5nZXRNaW5pVnRUcGxDZG5QYXRoKCk7XG4gICAgdmFyIHNwbUFCID0gW107XG4gICAgdmFyIHNwbUlkO1xuICAgIHZhciBhcHBrZXkgPSB1dGlsLmdldEFwcEtleSgpO1xuICAgIGlmIChhcHBrZXkpIHtcbiAgICAgIHNwbUlkID0gYXBwa2V5O1xuICAgIH1cbiAgICBcbiAgICBpZiAoc3BtSWQpIHtcbiAgICAgIHNwbUFCID0gc3BtSWQuc3BsaXQoJy4nKTtcbiAgICB9IFxuICAgIC8vIHJlbW92ZSBlbHNlIGxvZ2ljIGluc2lkZSB3ZWJ2dFN0b3JlLCBiZWNhdXNlIG1pbmlfY2xvdWQgZG9udCBzdXBwb3J0IHNwbVxuICAgIGlmIChzcG1BQi5sZW5ndGggPT09IDIpIHtcbiAgICAgIHRoaXMub3JpZ2luU3BtID0ge1xuICAgICAgICBzcG1BOiBzcG1BQlswXSxcbiAgICAgICAgc3BtQjogc3BtQUJbMV1cbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChzcG1BQi5sZW5ndGggPT09IDEpIHtcbiAgICAgIHRoaXMub3JpZ2luU3BtLnNwbUEgPSBzcG1BQlswXTtcbiAgICB9XG5cbiAgICBpZiAodGVtcGxhdGVWYWwpIHtcbiAgICAgIHJldHVybiB0ZW1wbGF0ZVZhbDtcbiAgICB9XG4gICAgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHNwbUFCLmpvaW4oJ18nKTtcbiAgICB9IGVsc2UgaWYgKHNwbUFCLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHNwbUFCWzBdO1xuICAgIH1cbiAgfSxcblxuICBmZXRjaEZyb21MUzogZnVuY3Rpb24gKGNkbnBhdGgpIHtcbiAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuICAgICAgdGhpcy5jZG5wYXRoID0gY2RucGF0aCB8fCB0aGlzLmdldE1pbmlWdFRwbENkblBhdGgoKTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoY3R4LmdldFN0b3JhZ2VTeW5jKHRoaXMubHNNaW5pdnRDb25maWdLZXkgKyAnLScgKyBjZG5wYXRoKSkgfHwge307XG4gIH0sXG5cbiAgc2V0Q29uZmlnSW50b0xzOiBmdW5jdGlvbihjb25maWcpIHtcbiAgICBpZiAoIXRoaXMuY2RucGF0aCkge1xuICAgICAgdGhpcy5jZG5wYXRoID0gdGhpcy5nZXRWdENvbmZpZ1BhdGgoKTtcbiAgICB9XG4gICAgdmFyIGN0eCA9IG1pbmkuZ2V0Q29udGV4dCgpO1xuICAgIGN0eC5zZXRTdG9yYWdlU3luYyh0aGlzLmxzTWluaXZ0Q29uZmlnS2V5ICsgJy0nICsgdGhpcy5jZG5wYXRoLCBlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoY29uZmlnKSkpO1xuICAgIC8vIHV0aWxTdG9yZS5zZXQodGhpcy5sc01pbml2dENvbmZpZ0tleSArICctJyArIHRoaXMuY2RucGF0aCwgZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KGNvbmZpZykpKTtcbiAgfVxuXG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2xpYl91L3V0aWxzL21pbml2dFN0b3JlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLypcbiAqIEZpbGU6IHV0aWxWVC5qc1xuICog5Y+v6KeG5YyW6YWN572uIOino+aekOmFjee9ruS/oeaBr+S4uuiHquWKqOeCueWHu+OAgeiHquWKqOabneWFieOAgeiHquWKqHB25YWs5YWx5Ye95pWwXG4gKiBQcm9qZWN0OiBAYWxpL2FwbHVzXG4gKiAgICAgIFxuICogQXV0aG9yOiDpkrDmmK0gKGNoYW5nbGlhbmcubGNsQHVtZW5nLmNvbSlcbiAqICAgICAgXG4gKiBDb3B5cmlnaHQgLSAyMDIxIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICovXG5cbid1c2Ugc3RyaWN0JztcbnZhciBtaW5pID0gcmVxdWlyZSgnQHV0aWxzL21pbmknKTtcbnZhciB1dGlsQXJyYXkgID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxBcnJheScpO1xudmFyIHV0aWxHb2xkbG9nID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxHb2xkbG9nJyk7XG52YXIgZWFjaCA9IHJlcXVpcmUoJ0B1dGlscy9lYWNoJyk7XG52YXIgYXBsdXMgPSB1dGlsR29sZGxvZy5nZXRHbG9iYWxWYWx1ZSgnYXBsdXMnKTtcbnZhciBQYWdlTWFuYWdlciA9IHJlcXVpcmUoJ0AvcGx1Z2lucy9saWJfdW0vcGFnZU1hbmFnZXInKTtcblxuZXhwb3J0cy5nZXRDdXJyZW50UGFnZVZUQ2ZnID0gZnVuY3Rpb24oKSB7XG4gIHZhciB2dENmZyA9IGFwbHVzLl9hcGx1c192dF9jZmc7XG4gIGlmICghdnRDZmcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhdGggPSBQYWdlTWFuYWdlci5nZXRDdXJyZW50UGFnZVBhdGgoKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHZ0Q2ZnLnBhZ2VzLmxlbmd0aDsgaSsrICl7XG4gICAgdmFyIHBhZ2VDb25maWcgPSB2dENmZy5wYWdlc1tpXTtcbiAgICBpZiAocGFnZUNvbmZpZy5tYXRjaFVybCA9PT0gcGF0aCkge1xuICAgICAgcmV0dXJuIHBhZ2VDb25maWc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuO1xufTtcblxuZnVuY3Rpb24gbWVyZ2VBdXRvQ2ZncyAoY2ZnMSxjZmcyKXtcbiAgY2ZnMSA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzEpP2NmZzEgOiBbXTtcbiAgY2ZnMiA9IHV0aWxBcnJheS5pc0FycmF5KGNmZzIpP2NmZzIgOiBbXTtcbiAgdmFyIHRvdGFsQXV0b0NmZ3MgPSBbXS5jb25jYXQoY2ZnMixjZmcxKTtcbiAgZnVuY3Rpb24gZ2V0SW5kZXggKGl0ZW0sYXJyKXtcbiAgICB2YXIgaW5kZXggPSAtMTtcbiAgICBmb3IodmFyIGkgPSAwOyBpPGFyci5sZW5ndGg7IGkrKyl7XG4gICAgICB2YXIgY3VycmVudCA9IGFycltpXTtcbiAgICAgIGlmKGN1cnJlbnQuY3NzU2VsZWN0b3I9PT1pdGVtLmNzc1NlbGVjdG9yJiZjdXJyZW50LmxvZ2tleT09PWl0ZW0ubG9na2V5KXtcbiAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGluZGV4O1xuICB9XG4gIHZhciBmaW5hbEF1dG9DZmdzID0gdG90YWxBdXRvQ2Zncy5maWx0ZXIoZnVuY3Rpb24oaXRlbSxpbmRleCxhcnJheSl7XG4gICAgcmV0dXJuIGdldEluZGV4KGl0ZW0sYXJyYXkpID09PSBpbmRleDtcbiAgfSk7XG4gIHJldHVybiBmaW5hbEF1dG9DZmdzO1xufVxuZnVuY3Rpb24gcmVtb3ZlQXV0b0NmZ3NGcm9tVnQoY29uZmlncyl7XG4gIGlmKCB1dGlsQXJyYXkuaXNBcnJheShjb25maWdzKSl7XG4gICAgcmV0dXJuIGNvbmZpZ3MuZmlsdGVyKGZ1bmN0aW9uKGNvbmZpZyl7XG4gICAgICByZXR1cm4gY29uZmlnLl92dCA9PT0gdm9pZCAwO1xuICAgIH0pO1xuICB9XG4gIHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIGZvcm1hdFNlbGVjdG9yKHNlbGVjdG9yKXtcbiAgaWYoL15bLiNdLy50ZXN0KHNlbGVjdG9yKSl7XG4gICAgcmV0dXJuIHNlbGVjdG9yO1xuICB9ZWxzZXtcbiAgICByZXR1cm4gc2VsZWN0b3IgPyAnLicgKyBzZWxlY3RvciA6ICcnO1xuICB9XG59XG5mdW5jdGlvbiBnZXRUcmFja0NvbmZpZ0J5UGF0aChwYXRoKXtcbiAgdmFyIHBhZ2VJbnN0YW5jZSA9IG1pbmkuZ2V0Q3VycmVudFBhZ2UoKTtcbiAgdmFyIGZpbmFsUGF0aCA9IHBhdGggfHwgcGFnZUluc3RhbmNlLnJvdXRlO1xuICB2YXIgZnVsbExvd0NvZGVDb25maWcgPSBhcGx1cy5fYXBsdXNfdnRfY2ZnIHx8IGFwbHVzLl9hcGx1c190cmFja2luZ19jZmc7XG4gIHZhciBhdXRvRXhwQXJyID0gW107XG4gIHZhciBhdXRvQ2xrQXJyID0gW107XG4gIGlmIChmdWxsTG93Q29kZUNvbmZpZyAmJiBmdWxsTG93Q29kZUNvbmZpZy5wYWdlcyl7XG4gICAgZWFjaChmdWxsTG93Q29kZUNvbmZpZy5wYWdlcywgZnVuY3Rpb24ocGMpIHtcbiAgICAgIGFwbHVzLnNldFBhZ2VOYW1lKHsgcGFnZU5hbWU6IHBjLnNwbUIsIGV4dHJhUGFyYW1zOiBwYy5leHRyYVBhcmFtcyB9LCBwYy5tYXRjaFVybCk7XG4gICAgICBpZiAocGMubWF0Y2hVcmwgPT09IGZpbmFsUGF0aCkge1xuICAgICAgICBlYWNoKGZ1bGxMb3dDb2RlQ29uZmlnLnBvaW50cywgZnVuY3Rpb24ocCl7XG4gICAgICAgICAgaWYgKHBjLnNwbUIgPT09IHAuc3BtQikge1xuICAgICAgICAgICAgaWYgKHAudHJhY2tlclR5cGUgPT09IFwiZXhwb3N1cmVcIikgeyBcbiAgICAgICAgICAgICAgYXV0b0V4cEFyci5wdXNoKHtcbiAgICAgICAgICAgICAgICAnY3NzU2VsZWN0b3InOiBmb3JtYXRTZWxlY3RvcihwLnNlbGVjdG9yKSxcbiAgICAgICAgICAgICAgICAncG9zaXRpb25TZWxlY3Rvcic6IHAucG9zaXRpb25TZWxlY3RvcixcbiAgICAgICAgICAgICAgICAnbG9na2V5JzogcC5sb2drZXksXG4gICAgICAgICAgICAgICAgJ3Byb3BzJzogcC5wcm9wcyxcbiAgICAgICAgICAgICAgICAnc3BtQic6IHAuc3BtQixcbiAgICAgICAgICAgICAgICAnc3BtQyc6IHAuc3BtQyxcbiAgICAgICAgICAgICAgICAnc3BtRCc6IHAuc3BtRCxcbiAgICAgICAgICAgICAgICAnY3VzdG9tQXJncyc6IHAuY3VzdG9tQXJncyxcbiAgICAgICAgICAgICAgICAnX3Z0JzogcGMudGVtcGxhdGUgfHwgcGMuc3RkSWQgPyAyIDogMVxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGF1dG9DbGtBcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgJ2Nzc1NlbGVjdG9yJzogZm9ybWF0U2VsZWN0b3IocC5zZWxlY3RvciksXG4gICAgICAgICAgICAgICAgJ2xvZ2tleSc6IHAubG9na2V5LFxuICAgICAgICAgICAgICAgICdwcm9wcyc6IHAucHJvcHMsIFxuICAgICAgICAgICAgICAgICdzcG1CJzogcC5zcG1CLFxuICAgICAgICAgICAgICAgICdzcG1DJzogcC5zcG1DLFxuICAgICAgICAgICAgICAgICdzcG1EJzogcC5zcG1ELFxuICAgICAgICAgICAgICAgICdjdXN0b21BcmdzJzogcC5jdXN0b21BcmdzLFxuICAgICAgICAgICAgICAgICdfdnQnOiBwYy50ZW1wbGF0ZSB8fCBwYy5zdGRJZCA/IDIgOiAxXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gIFxuICAgICAgICBpZiAoZnVsbExvd0NvZGVDb25maWcuY29tbW9uX2V4ZGF0YSAmJiB0eXBlb2YgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX2V4ZGF0YSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICBhcGx1cy5zZXRNZXRhSW5mbygnYXBsdXMtZXhkYXRhJywgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX2V4ZGF0YSk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGlmIChmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fcHZkYXRhICYmIHR5cGVvZiBmdWxsTG93Q29kZUNvbmZpZy5jb21tb25fcHZkYXRhID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1jcHZkYXRhJywgZnVsbExvd0NvZGVDb25maWcuY29tbW9uX3B2ZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0gICAgICBcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIEVYUDogYXV0b0V4cEFycixcbiAgICBDTEs6IGF1dG9DbGtBcnJcbiAgfTtcbn07XG5leHBvcnRzLmdldFRyYWNrQ29uZmlnQnlQYXRoID0gZ2V0VHJhY2tDb25maWdCeVBhdGg7XG5leHBvcnRzLmdldFRyYWNrQ29uZmlnQnlQb2ludENzc1NlbGVjdG9yID0gZnVuY3Rpb24oY3NzU2VsZWN0b3IsdHlwZSxwYXRoKXtcbiAgdmFyIHRyYWNrQ29uZmlnID0gZ2V0VHJhY2tDb25maWdCeVBhdGgocGF0aClbdHlwZV0gfHwgW107XG4gIHZhciBtYXRjaGVkQ29uZmlnID0gbnVsbDtcbiAgZWFjaCh0cmFja0NvbmZpZyxmdW5jdGlvbihjb25maWdJdGVtKXtcbiAgICBpZihjb25maWdJdGVtLmNzc1NlbGVjdG9yID09PSBjc3NTZWxlY3Rvcil7XG4gICAgICBtYXRjaGVkQ29uZmlnID0gY29uZmlnSXRlbTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gbWF0Y2hlZENvbmZpZztcbn07XG5leHBvcnRzLnZ0MmF1dG9FdmVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdnRfY2ZnID0gYXBsdXMuX2FwbHVzX3Z0X2NmZyB8fCBhcGx1cy5fYXBsdXNfdHJhY2tpbmdfY2ZnO1xuICBpZiAodnRfY2ZnICYmIHZ0X2NmZy5wYWdlcyl7XG4gICAgdmFyIG1hdGNoZWRDb25maWcgPSBnZXRUcmFja0NvbmZpZ0J5UGF0aCgpO1xuICAgIHZhciBvbGRfYXV0b19leHBfYXJyID0gcmVtb3ZlQXV0b0NmZ3NGcm9tVnQoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tZXhwJykpO1xuICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWV4cCcsIG1lcmdlQXV0b0NmZ3Mob2xkX2F1dG9fZXhwX2FycixtYXRjaGVkQ29uZmlnLkVYUCkpO1xuICAgIHZhciBvbGRfYXV0b19jbGtfYXJyID0gcmVtb3ZlQXV0b0NmZ3NGcm9tVnQoYXBsdXMuZ2V0TWV0YUluZm8oJ2FwbHVzLWF1dG8tY2xrJykpO1xuICAgIGFwbHVzLnNldE1ldGFJbmZvKCdhcGx1cy1hdXRvLWNsaycsIG1lcmdlQXV0b0NmZ3Mob2xkX2F1dG9fY2xrX2FycixtYXRjaGVkQ29uZmlnLkNMSykpO1xuICB9XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9wbHVnaW5zX21pbmkvbGliX21pbml2dC91dGlsVlQuanNcbi8vIG1vZHVsZSBpZCA9IDEwMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqL1xuLyoqXG4gKiBhcGx1c19taW5pX2Jhc2ljXG4gKiDlsI/nqIvluo/mqKHlnZfljJbnmoRhcGx1c0pz5YWl5Y+jXG4gKlxuICogQ29weXJpZ2h0KGMpIEFsaWJhYmEgR3JvdXAgSG9sZGluZyBMaW1pdGVkLlxuICpcbiAqIEF1dGhvcnM6XG4gKiAgIOm+mempuSA8Y2hlbmdwaW5nLnJjcEBhbGliYWJhLWluYy5jb20+XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoYXBwQ29uZmlnLGFwbHVzX2NvbmZpZykge1xuICB2YXIgdXRpbEdvbGRsb2cgPSByZXF1aXJlKCdAdXRpbHMvdXRpbEdvbGRsb2cnKTtcbiAgLy8gcmVxdWlyZSgnQHV0aWxzL2RlYnVnJykuaXNEZWJ1Z0FwbHVzKHRydWUpO1xuXG4gIHZhciB1dGlsUHVic3ViID0gcmVxdWlyZSgnQHV0aWxzL3V0aWxQdWJzdWInKTtcbiAgLy8gdmFyIHV0aWxMb2dnZXIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbExvZ2dlcicpO1xuICB2YXIgdWxvZyA9IHJlcXVpcmUoJ0B1dGlscy91bG9nJyk7XG4gIHZhciBlYWNoID0gcmVxdWlyZSgnQHV0aWxzL2VhY2gnKTtcbiAgdmFyIG1pbmkgPSByZXF1aXJlKCdAdXRpbHMvbWluaScpO1xuICB2YXIgYXBsdXNpbml0ID0gcmVxdWlyZSgnQGNvcmUvYXBsdXNpbml0Jyk7XG4gIG1pbmkuaW5pdElzVEIoKTtcblxuICBpZiAodHlwZW9mIGFwcENvbmZpZyA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoYXBwQ29uZmlnLnNpdGVJZCkge1xuICAgICAgYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5zaXRlSWQgPSBhcHBDb25maWcuc2l0ZUlkO1xuICAgIH1cbiAgICBhcGx1c19jb25maWcubWV0YUluZm8gPSBPYmplY3QuYXNzaWduKHt9LCBhcGx1c19jb25maWcubWV0YUluZm8sIGFwcENvbmZpZy5tZXRhSW5mbyk7XG4gIH1cblxuICB2YXIgUlVOTklORyA9ICdydW5uaW5nJztcbiAgdmFyIENPTVBMRVRFID0gJ2NvbXBsZXRlJztcbiAgdmFyIGFwbHVzU3RhdHVzID0gWydhcGx1c1JlYWR5JywgUlVOTklOR107XG5cbiAgdXRpbFB1YnN1Yi5kb1B1Yk1zZyhhcGx1c1N0YXR1cyk7XG5cbiAgYXBsdXNpbml0LnJ1bih7XG4gICAgcGx1Z2luczogYXBsdXNfY29uZmlnLnBsdWdpbnMsXG4gICAgY29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbmZpZ19wdl9jb250ZXh0ID0ge1xuICAgICAgICBQQUdFX0xPQURfVElNRTogbmV3IERhdGUoKVxuICAgICAgfTtcbiAgICAgIHZhciBQTFVHSU5TX1BWID0gW107XG4gICAgICBlYWNoKGFwbHVzX2NvbmZpZy5wbHVnaW5zLCBmdW5jdGlvbiAodikge1xuICAgICAgICBjb25maWdfcHZfY29udGV4dFt2Lm5hbWVdID0gdi5jb25maWc7XG4gICAgICAgIGlmICh2Lm5hbWUgPT09ICdhcGx1c19sb2dfaW5qZWN0JyAmJiB2LmNvbmZpZyAmJiB2LmNvbmZpZy5wbHVnaW5zKSB7XG4gICAgICAgICAgUExVR0lOU19QViA9IHYuY29uZmlnLnBsdWdpbnMucHY7XG4gICAgICAgICAgZWFjaChQTFVHSU5TX1BWLCBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgY29uZmlnX3B2X2NvbnRleHRbdi5uYW1lXSA9IHYuY29uZmlnO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCBjb25maWdfcHZfY29udGV4dCwge1xuICAgICAgICBhcGx1c19jb25maWc6IGFwbHVzX2NvbmZpZ1xuICAgICAgfSk7XG4gICAgfVxuICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgdWxvZygpLnYoJ0FQTFVTIElOSVQgU1VDQ0VTUycpO1xuICAgIC8vIGFwbHVz5YeG5aSH5aW95LqG77yM5YiG5Y+R5LiA5LiqcmVhZHnkuovku7ZcbiAgICBhcGx1c1N0YXR1c1sxXSA9IENPTVBMRVRFO1xuICAgIHV0aWxQdWJzdWIuZG9QdWJNc2coYXBsdXNTdGF0dXMpO1xuICB9KTtcblxuICAvLyByZXR1cm4gdXRpbEdvbGRsb2cuZ2V0R2xvYmFsVmFsdWUoYXBsdXNfY29uZmlnLmdsb2JhbENvbmZpZy5BUExVU19RVUVVRSk7XG4gIHJldHVybiB1dGlsR29sZGxvZy5nZXRDb250ZXh0KCk7XG59O1xuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9hcGx1c19taW5pX2Jhc2ljLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqXG4gKiBwcm9qZWN0IC0gZmlsZXBhdGhcbiAqIGFwbHVzIEFQSVxuICpcbiAqIENvcHlyaWdodChjKSBBbGliYWJhIEdyb3VwIEhvbGRpbmcgTGltaXRlZC5cbiAqXG4gKiBBdXRob3JzOlxuICogICDosIvlo6sgPHFpbmdsaWFuZy5ocWxAYWxpYmFiYS1pbmMuY29tPlxuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWR1Y2VyID0gcmVxdWlyZSgnQGNvcmUvUmVkdWNlcicpO1xudmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCdAdXRpbHMvaXNGdW5jdGlvbicpO1xudmFyIHV0aWxQdWJzdWIgPSByZXF1aXJlKCdAdXRpbHMvdXRpbFB1YnN1YicpO1xuXG4vKipcbiAqIOWwhuWQjue7reeahGluaXTliqjkvZzpg73lgZrmiJDmj5Lku7bvvIznm67liY3lj6rmnIl3aGVyZV90b19zZW5kcHbkuIDpoblcbiAqXG4gKiBAcGFyYW1zIHtPYmplY3R9IG9wdHMge1xuICogICBwbHVnaW5zXG4gKiAgIGNvbnRleHRcbiAqIH1cbiAqIEBwYXJhbXMge0Z1bmN0aW9ufSBjYWxsYmFja1xuICpcbiAqL1xuZXhwb3J0cy5ydW4gPSBmdW5jdGlvbiAob3B0cywgY2FsbGJhY2spIHtcbiAgdmFyIHJlZHVjZXIgPSBuZXcgUmVkdWNlcigpO1xuICByZWR1Y2VyLnJ1bih7XG4gICAgcGx1Z2luczogb3B0cy5wbHVnaW5zLFxuICAgIGNvbnRleHQ6IG9wdHMuY29udGV4dFxuICB9LCB7XG4gICAgY29uZmlnOiB7fSxcbiAgICB1c2VyZGF0YToge30sXG4gICAgcHVic3ViVHlwZTogJ2FwbHVzaW5pdCcsXG4gICAgbWVzc2FnZUZuUXVldWU6IFtdLFxuICAgIG1pZGRsZXdhcmVNZXNzYWdlS2V5OiAnbXdfY2hhbmdlX2FwbHVzaW5pdCdcbiAgfSwgZnVuY3Rpb24gKGN0eCkge1xuICAgIHZhciBtc2dzID0gWydhcGx1c0luaXRDb250ZXh0JywgY3R4XTtcbiAgICB1dGlsUHVic3ViLmRvUHViTXNnKG1zZ3MpO1xuICAgIHV0aWxQdWJzdWIuZG9DYWNoZVB1YnMobXNncyk7XG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICBjYWxsYmFjayhjdHgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbGliX3UvY29yZS9hcGx1c2luaXQuanNcbi8vIG1vZHVsZSBpZCA9IDEwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9