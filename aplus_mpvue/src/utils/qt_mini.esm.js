/**!
   * qt_mini_v2.1.7
   * generated by QuickTracking
   * 2023-11-09 10:30:15
  */
function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(){n=function(){return e};var t,e={},r=Object.prototype,a=r.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),s=new M(r||[]);return o(i,"_invoke",{value:O(t,n,s)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var g="suspendedStart",h="suspendedYield",_="executing",d="completed",m={};function v(){}function y(){}function S(){}var I={};f(I,s,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(x([])));P&&P!==r&&a.call(P,s)&&(I=P);var E=S.prototype=v.prototype=Object.create(I);function A(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,o,i,s){var c=l(t[r],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var r;o(this,"_invoke",{value:function(t,a){function o(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(o,o):o()}})}function O(e,n,r){var a=g;return function(o,i){if(a===_)throw new Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=w(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===g)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var u=l(e,n,r);if("normal"===u.type){if(a=r.done?d:h,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=d,r.method="throw",r.arg=u.arg)}}}function w(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=l(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function x(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=S,o(E,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:y,configurable:!0}),y.displayName=f(S,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},A(T.prototype),f(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new T(p(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(E),f(E,u,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=x,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function a(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){a(i,r,o,s,c,"next",t)}function c(t){a(i,r,o,s,c,"throw",t)}s(void 0)}))}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,d(r.key),r)}}function c(t,e,n){e&&s(t.prototype,e);n&&s(t,n);Object.defineProperty(t,"prototype",{writable:!1});return t}function u(t,e,n){(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&l(t,e)}function p(t){p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return p(t)}function l(t,e){l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return l(t,e)}function g(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return g(t)}function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function d(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function m(t,e){if(b(t)&&void 0===t.length)for(var n in t)t.hasOwnProperty(n)&&e(n,t[n],t);else{var r,a=t.length;for(r=0;r<a;r++){if("break"===e(t[r],r))break}}}function v(t){return Array.isArray?Array.isArray(t):/Array/.test(Object.prototype.toString.call(t))}var y={isArray:v,indexOf:function(t,e){var n=-1;try{n=t.indexOf(e)}catch(a){for(var r=0;r<t.length;r++)t[r]===e&&(n=r)}finally{return n}},itemMatch:function(t,e){var n=!1;try{if(!this.isArray(t))return n;n=t.some((function(t){return t&&t.length>0&&-1!==e.indexOf(t)}))}catch(a){for(var r=0;r<t.length;r++)if(-1!==e.indexOf(t[r])){n=!0;break}}return n},find:function(t,e){try{return t.find(e)}catch(r){for(var n=0;n<t.length;n++){if(e(t[n]))return t[n]}}},flat:function t(e){var n=[];if(v(e))for(var r=0;r<e.length;r++){var a=e[r];if(v(a)){e[r]=t(a);n=n.concat(e[r])}else n.push(a)}return n},assign:S,some:function(t,e){var n,r=t.length;for(n=0;n<r;n++)if(e(t[n]))return!0;return!1},each:m};function S(t,e){return"function"!=typeof Object.assign?function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}(t,e):Object.assign({},t,e)}function I(t){var e,n=Array.isArray(t)?[]:{};if("object"===r(t)){if(JSON&&JSON.parse){e=JSON.stringify(t);n=JSON.parse(e)}else for(var a in t)n[a]="object"===r(t[a])?I(t[a]):t[a];return n}}function b(t){if("object"!==r(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var P={isObject:b,assign:S,cloneDeep:I,isEmptyObject:function(t){try{if(!t)return!0;if("function"==typeof Object.keys&&0===Object.keys(t).length)return!0;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}catch(t){return!1}},each:m,eachMap:function(t,e){if(Object&&Object.keys)for(var n=Object.keys(t),r=n.length,a=0;a<r;a++){var o=n[a];e(o,t[o])}else for(var i in t)e(i,t[i])},deleteKeys:function(t,e){m(e,(function(e){delete t[e]}));return t}};var E={isNumber:function(t){return"number"==typeof t},isNaN:function t(e){return t?t(e):e!=e}};var A={stringfy:function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},parse:function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},jsonStr2json:function(t){if(!t||"string"!=typeof t)return{};for(var e=t.replace(/['"{}]+/g,"").split(","),n=[],r=0;r<e.length;r++)n.push(e[r].split(":"));return w(n)}};function T(t){return"function"==typeof t}function O(t){return void 0===t}function w(t){var e,n,r,a={},o=t.length;for(r=0;r<o;r++){e=t[r][0]&&t[r][0].trim();n=t[r][1];a[e]=n}return a}function C(t){if("object"===r(t))return t;var e={};if(!t||"string"!=typeof t)return e;for(var n=t.split("&"),a=0;a<n.length;a++){var o=n[a],i=o.indexOf("="),s=o.split("="),c=o.length;if(2===s.length)e[s[0]]=s[1]||"";else if(i>0){var u=o.slice(0,i),f=o.slice(i+1,c)||"";e[u]=f}else e[s[0]]=""}return e}var k="::-plain-::";function M(t,e){var n,a,o,i=[];for(n in t)if(n&&t.hasOwnProperty(n)){o="object"===r(t[n])?a=""+this.obj2queryStr(t[n]):n+"="+(a=""+t[n]);e?i.push(o):i.push(0===n.indexOf(k)?a:o)}return i.join("&")}function x(t){for(var e,n=t.split("&"),r=0,a=n.length,o=[];r<a;r++){e=n[r].split("=");o.push([e.shift(),e.join("=")])}return o}var N={isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isStartWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&0===t.indexOf(e)},isEndWith:function(t,e){if(String.prototype.endsWith)return t.endsWith(e);var n=t.length,r=e.length;return n>=r&&t.substring(n-r)===e},isContain:function(t,e){return t.indexOf(e)>-1},getRandomStr:function(t){for(var e="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<Number(t);r++){e+=n[Math.round(Math.random()*(n.length-1))]}return e},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/g,""):""},query2obj:C},D={query2obj:C,arr2obj:w,arr2queryStr:function(t,e){var n,r,a,o=[],i=t.length;for(a=0;a<i;a++){n=t[a][0];r=t[a][1];var s=0===n.indexOf(k),c=s||e?r:encodeURIComponent(r);o.push(s?c:n+"="+c)}return o.join("&")},obj2queryStr:M},R=function(){var t=null,e=!1,n="";function r(){this.setDebug=function(t,r){e=t;n=r?"[APLUS] -- ":"[QT] -- "};this.i=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.info.apply(console,arguments)}catch(t){}};this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(t){}};this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.v=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.tip_w=function(t){try{console.log("%c "+n+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}};this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){null===t&&(t=new r);return t}}();function U(){}U.prototype.extend=function(){};U.prototype.create=function(){};U.extend=function(t){return this.prototype.extend.call(this,t)};U.prototype.create=function(t){var e=new this;for(var n in t)e[n]=t[n];return e};U.prototype.extend=function(t){var e=function(){};try{T(Object.create)||(Object.create=function(t){function e(){}e.prototype=t;return new e});e.prototype=Object.create(this.prototype);for(var n in t)e.prototype[n]=t[n];e.prototype.constructor=e;e.extend=e.prototype.extend;e.create=e.prototype.create}catch(t){R&&R().w(t)}finally{return e}};var L,j=U.extend({create:function(t,e){var n=e.apiName,r=e.queueName,a=new this;a._sdkApiName=n;a._sdkQueueName=r;t[n]=t[n]||(t[n]={});t[r]=t[r]||(t[r]=[]);a.ctx=t;return a},getSdkApiName:function(){return this._sdkApiName},getSdkQueueName:function(){return this._sdkQueueName},setContextValue:function(t,e){this.ctx[this._sdkApiName]&&(this.ctx[this._sdkApiName][t]=e)},getContextValue:function(t){var e;this.ctx[this._sdkApiName]&&(e=this.ctx[this._sdkApiName][t]);!e&&this.ctx.goldlog&&(e=this.ctx.goldlog[t]);return e}});function B(){return L}function F(){return B().getSdkApiName()}function V(){return B().getSdkQueueName()}function K(t){return B().ctx[t]}function G(t,e){B().ctx[t]=e}function q(t){return B().getContextValue(t)}function H(t,e){B().setContextValue(t,e)}var Y="function",Q=function(){var t=K(F())[F()+"_pubsub"]||{};return r(t.publish)===Y?t:""};function $(t){var e=Q();e&&r(e.publish)===Y&&e.publish.apply(e,t)}function z(t){var e=Q();e&&r(e.cachePubs)===Y&&e.cachePubs.apply(e,t)}var W=y.indexOf;function J(){}J.prototype.create=function(t){for(var e in t)void 0===this[e]&&(this[e]=t[e]);return this};J.prototype.calledList=[];J.prototype.setCalledList=function(t){-1===W(this.calledList,t)&&this.calledList.push(t)};J.prototype.resetCalledList=function(){this.calledList=[]};J.prototype.wrap=function(t,e){var n=this,r=((this.context||{}).Compose||{}).maxTimeout||1e4;return function(a){var o,i=t.length,s=0,c=0;n.calledList&&n.calledList.length>0&&n.resetCalledList();return function u(f,p){if(s!==i){if(-1===W(n.calledList,s)){n.setCalledList&&n.setCalledList(s);if(!(t&&t[s]&&T(t[s][0])))return;try{a=t[s][0].call(n,a,(function(){s++;c=1;u(s)}))}catch(t){console.log(t)}}var l="number"==typeof a;if("pause"===a||l){c=0;var g=l?a:r,h=t[s]?t[s][1]:"";o=setTimeout((function(){if(0===c){R().w("jump the middleware about "+h+", because waiting timeout maxTimeout = "+g);a=null;s++;u()}}),g)}else if("done"===a)u(s=i,a);else{s++;u()}}else{a="done";n.resetCalledList();T(e)&&p!==a&&e.call(n,a);clearTimeout(o)}}()}};function X(){return{init:function(t){this.opts=t;t&&"object"===r(t.middleware)&&t.middleware.length>0?this.middleware=t.middleware:this.middleware=[];this.plugins_name=[]},pubsubInfo:function(t,e){try{var n=t.pubsub;n&&n.publish("plugins_change_"+t.pubsubType,e)}catch(t){console.log(t)}},isConstructor:function(t){var e=!0;try{new t}catch(t){e=!1}return e},run:function(t){t||(t=0);var e=this,n=this.middleware,a=this.opts||{},o=a.plugins;if(o&&"object"===r(o)&&o.length>0){var i=o[t];this.plugins_name.push(i.name);n.push([function(t,n){e.pubsubInfo(this,i);var r;i.path&&e.isConstructor(i.path)?r=i.path:i.path.default&&e.isConstructor(i.path.default)&&(r=i.path.default);if(r){var o=new r({context:this.context,config:S(i.config||{},a.config)});if(!o.options){o.init||(o.init=function(t){this.options=t});o.init({context:this.context,config:S(i.config||{},a.config)})}return o.run(t,(function(t){setTimeout((function(){n(i,t)}),1)}))}},i.name]);if(o[++t])return this.run(t)}return n}}}var Z=function(){};Z.prototype.run=function(t,e,n){var r=new X;r.init({middleware:[],config:e.config,plugins:t.plugins});var a=r.run(),o=T(t.context)?new t.context:t.context;o.userdata=e.userdata;var i={context:o,pubsub:q(F()+"_pubsub"),pubsubType:e&&e.pubsubType},s=new J;s.create(i);s.wrap(a,(function(){i.context.status="complete";if(e){e.middlewareMessageKey&&$([e.middlewareMessageKey,i.context]);e.messageFnQueue&&m(e.messageFnQueue,(function(e){e(getGlobalValue(F()),t)}))}T(n)&&n(i.context)}))()};var et="mw_change",nt="MetaInfo",rt="append".concat(nt),at="set".concat(nt),ot="_pubsub",it="2101",st="2201",ct="19999",ut="aplus",ft={PAGE_ENTER:"PAGE_ENTER",CURRENT_PAGE_CONFIG:"CURRENT_PAGE_CONFIG",_ANONY_ID:"_anony_id",_DEV_ID:"_dev_id",_CNA:"cna",_browerFP:"_abfpc",_USER_ID:"_user_id",OTHER:ct,UNSUBSCRIBE:"".concat(ut,".").concat(ut).concat(ot,".unsubscribe"),SUBSCRIBE:"".concat(ut,".").concat(ut).concat(ot,".subscribe"),PUBLISH:"".concat(ut,".").concat(ut).concat(ot,".publish"),CACHE_PUBS:"".concat(ut,".").concat(ut).concat(ot,".cachePubs"),SDK_READY:"".concat(ut,"Ready"),SDK_PUB:"".concat(ut).concat(ot),COMPLETE:"complete",PV_CODE:"2001",EXP_CODE:st,CLK_CODE:it,OTHER_CODE:ct,CLK:"CLK",EXP:"EXP",SPM_CNT:"spm-cnt",SPM_URL:"spm-url",SPM_PRE:"spm-pre",MW_CHANGE_PV:"".concat(et,"_pv"),MW_CHANGE_HJLJ:"".concat(et,"_hjlj"),HTTP:"".concat("http",":"),HTTPS:"https:",APPEND_META_INFO:rt,SET_META_INFO:at,SDK_APPEND_META_INFO:"".concat(ut,".").concat(rt),SDK_SET_META_INFO:"".concat(ut,".").concat(at),PVID:"pvid",WEB_PC_PV_SUFFIX:"v.gif",WEB_WAP_PV_SUFFIX:"m.gif",NATIVE_TRANSP_READY:"".concat(ut,"NativeTranspReady")},pt=["send","enter","sendPV","record","combineRecord","recordUdata","requestVTConfig","requestRemoteConfig","setPageSPM","setMetaInfo","appendMetaInfo","updatePageProperties","updateNextPageProperties","updatePageUtparam","updateNextPageUtparam","pageAppear","pageDisappear","skipPage","updateSessionProperties","getPageSpmUrl","getPageSpmPre","setPageName","getElementSPM","recordAppLink","onPageShow","onPageHide","reportUserInfo"],lt={EXP:st,IMPEXP:"2202",CLK:it,OTHER:ct,SHOW:"1023",H_OR_U:"1010"},gt={ekvs:"e",active_user:"active_user"},ht=e(e({},gt),{},{sessions:"sn"}),_t={sdk_type:"sdt",device_model:"dm",language:"lang",device_type:"dt",os_version:"ov",appkey:"ak",sdk_version:"sv",resolution:"rl",pixel_ratio:"pr",_id:"id",id_type:"it",id_tracking:"itr"},dt=e(e({},_t),{},{imprint:"imp",debugId:"dk"}),mt=e(e({},_t),{},{access:"ac",access_subtype:"acs",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",font_size_setting:"fss",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",imprint:"imp",miniappDebugId:"dk"}),vt={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},yt={APLUS:ut,APPKEY:"appKey",APLUS_PV_DOMAIN:"aplus-rhost-v",APLUS_EKV_DOMAIN:"aplus-rhost-g",SESSION_INTERVAL:3e4,PAGE_SCROLL_DURATION:4e3,SESSION_PAUSE_TIME:"session_pause_time",IMPRINT:"imprint",CURRENT_SESSION:"current_session",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,FAILED_REQUESTS:"failed_requests",REQUESTS:"requests",SHARES:"shares",EKVS:"ekvs",EVENT_MAX_COUNT:1e4,MEMORY_MAX_COUNT:1,MAX_QUEUE_COUNT:1,EVENT_SEND_DEFAULT_INTERVAL:3e3,PAGE_START:"$$_page_start",PAGE_END:"$$_page_end",APP_START:"$$_app_start",APP_END:"$$_app_end",USER_PROFILE:"$$_user_profile",SHARE_CACHE_INTERVAL:18e5,GLOBAL_PROPERTY:"globalproperty",JSBRIDGE_ONLY:"aplus-jsbridge-only",JSBRIDGE_AGENT:"Umeng4Aplus",APLUS_SKIP_APV_RULES:"aplus-skip-apv-rules",APLUS_IMPRINT_VERSION:"APLUS_IMPRINT_VERSION",APLUS_REMOTE_CONFIG:"APLUS_REMOTE_CONFIG",WEB_EVENT_SUFFIX:"/web_logs",PAGE_LEAVE:"$$_page_leave",PAGE_STAY:"$$_page_stay",APLUS_AUTOTRACK_ENABLED:"aplus-autotrack-enabled",APLUS_AUTOTRACK_ENABLED_REMOTE:"apus-autotrack-enabled-remote",APLUS_AUTOTRACK_CONFIG:"aplus-autotrack-config",APLUS_AUTOTRACK_CONFIG_REMOTE:"aplus-autotrack-config-remote",APLUS_DISABLE_AUTOEVENT:"aplus-disable-autoevent",APLUS_DISABLE_AUTOEVENT_REMOTE:"aplus-disable-autoevent",APLUS_DISABLE_AUTOPV:"aplus-disable-apv",APLUS_DISABLE_AUTOPV_REMOTE:"aplus-disable-apv-remote",APLUS_EVENT_LIMITRATES:"aplus-event-limitrates",APLUS_DEVICE_ENABLE:"aplus-device-enable",PERFORMANCE_WARING:"$$_perf_warning",START_ID:"START_ID",AUTO_GET_OPENID:"autoGetOpenid",TRACKDOMAIN:"trackDomain",APLUS_MINI_REQUEST_TIMEOUT:"aplus-request-timeout",APLUS_LATEAST_UTM:"APLUS_LATEAST_UTM",APLUS_FORWARD_APPKEY:"aplus-forward-appkey",APLUS_FORWARD_DOMAIN:"aplus-forward-domain",APLUS_FORWARD_EVENT_FILTER:"aplus-forward-event-filter",CNA_SYNC_READY:"cnaSyncReady",PAGE_CONFIG:"pageConfig",APLUS_VT_CONFIG_URL:"aplus-vt-cfg-url",APLUS_EXPOSURE_EVENT_CAN_REPEAT:"aplus-exposure-event-can-repeat",APLUS_MINI_REQUESTS_LIMIT:"aplus-mini-requests-limit",DEBUG:"DEBUG",APLUS_UTM_EXPIRE_DAYS:"aplus-utm-expire-days",APLUS_PAGEVIEW_DURATION_CAN_TRACK:"aplus-pageview-duration-can-track",APLUS_PRESET_EVENTS_DISABLED:"aplus-preset-events-disabled",APLUS_GLOBALPROPERTY_SYNC_ENABLE:"aplus-globalproperty-sync-enable",APLUS_NEXT_PAGE_TRANSP:"aplus-nextpage-properties",APLUS_LOCALSTORE_PAGE_TRANSP:"aplus-native-page-properties",APLUS_CALLBACK:"qtCallback"},St={record:"".concat(ut,".record"),sendPV:"".concat(ut,".sendPV"),setMetaInfo:"".concat(ut,".setMetaInfo"),appendMetaInfo:"".concat(ut,".appendMetaInfo")},It="half_session",bt="close_session",Pt="ekv";var Et,At,Tt,Ot={pushIntoGoldlogQueue:function(t,e){var n=K(V()),r=K(F()),a=t.split("."),o=r[a[1]],i=o?o[a[2]]:null;r&&2===a.length&&o?o.apply(r,e):3===a.length&&i?i.apply(o,e):n.push({action:t,arguments:e})}};function wt(t,e){return t&&t.getAttribute&&t.getAttribute(e)||""}function Ct(t){try{return localStorage.getItem(t)}catch(t){return""}}function kt(t,e){var n,r="";if(!t||!e)return r;try{var a=new RegExp("".concat(t,"=([^&|#|?|/]+)"));if("spm"===t||"scm"===t){var o=new RegExp("\\?.*".concat(t,"=([\\w\\.\\-\\*/]+)")),i=e.match(a),s=e.match(o),c=i&&2===i.length?i[1]:"",u=s&&2===s.length?s[1]:"";r=c>u?c:u;r=decodeURIComponent(r)}else r=(n=e.match(a))&&2===n.length?n[1]:"";return r}catch(t){R().w("get param from url failed",t);return r}}function Mt(t){Et=Et||document.getElementsByTagName("head")[0];return Tt&&!t?Tt:Et?Tt=Et.getElementsByTagName("meta"):[]}function xt(t,e){var n="aplus&sidx=aplusSidex&ckx=aplusCkx",r=t||n;try{if(e){var a=C(e),o=[yt.APLUS,"cna",ft.SPM_CNT,ft.SPM_URL,ft.SPM_PRE,"logtype","pre","uidaplus","asid","sidx","trid","gokey"];y.each(o,(function(t){if(Object.prototype.hasOwnProperty.call(a,t)){R().w("Can not inject keywords: ".concat(t));delete a[t]}}));delete a[""];var i="";if(t){var s=t.match(/aplus&/).index,c=s>0?C(t.substring(0,s)):{};delete c[""];i="".concat(M(P.assign(c,a)),"&").concat(t.substring(s,t.length))}else i="".concat(M(a),"&").concat(n);return i}return r}catch(t){return r}}function Nt(){var t,e=xt(wt(function(){At||(At=document.getElementById("beacon-aplus")||document.getElementById("tb-beacon-aplus"));return At}(),"exparams"),(((t=K(F()))&&t._$?t._$:{}).meta_info||{})["aplus-exparams"]||"")||"";return e&&e.replace(/&amp;/g,"&").replace(/\buser(i|I)d=/,"uidaplus=")}var Dt={set:function(t,e){try{localStorage.setItem(t,e);return!0}catch(t){return!1}},get:Ct,test:function(){var t="grey_test_key";try{localStorage.setItem(t,1);localStorage.removeItem(t);return!0}catch(t){return!1}},remove:function(t){try{localStorage.removeItem(t);return!0}catch(t){return!1}},getLocalStorageFP:function(){var t,e=Ct(ft._browerFP);e&&(t=e.split("_")[0]);return t}},Rt={getQueryFromUrl:function(){function t(t){for(var e=decodeURIComponent(t),n=e.indexOf("?")+1,r=e.substring(n),a=Object.create(null),o=r.split("&"),i=0;i<o.length;i++)a[o[i].split("=")[0]]=decodeURIComponent(o[i].split("=")[1]);return a}try{var e=location&&location.hash,n=location&&location.search;if(e&&-1!==e.indexOf("?"))return t(e);if(n&&-1!==n.indexOf("?"))return t(n)}catch(t){R().w("get query failed, current url =",location.href)}},getAParamFromUrl:kt,addParamsIntoUrl:function(t,e){var n,r,a,o=e||location.href,i="&",s=[];y.each(t,(function(t,e){new RegExp("".concat(t,"=")).test(o)||s.push("".concat(t,"=").concat(e))}));if(0===s.length)return o;if(-1!==o.indexOf("#")){a=o.split("#");o=a.shift();r=a.join("#")}var c=o.split("?"),u=c.length-1;a=(a=c[0].split("//"))[a.length-1].split("/");if(u>0){n=c.pop();o=c.join("?")}n&&u>1&&-1===n.indexOf("&")&&-1!==n.indexOf("%")&&(i="%26");return o="".concat(o,"?").concat(s.join("&")).concat(n?i+n:"").concat(r?"#".concat(r):"")},getSPMFromUrl:function(t){return kt("spm",t)},tryToEncode:function(t){var e=t||"";if(t)try{e=encodeURIComponent(decodeURIComponent(t))}catch(t){}return e},tryToDecode:function(t,e){var n=e||"";if(t)try{n=decodeURIComponent(t)}catch(t){}return n},getWebUrlParams:function(){for(var t=/[?&]([^=#]+)=([^&#]*)/g,e=window.location.href,n={},r=t.exec(e);r;){n[r[1]]=r[2];r=t.exec(e)}return n}},Ut={getMetaTags:Mt,getMetaCnt:function(t,e){var n,r,a,o=Mt(),i=o.length;for(n=0;n<i;n++)wt(r=o[n],"name")===t&&(a=wt(r,e||"content"));return a||""},mergeExparams:xt,getExParams:Nt,getExparamsInfos:function(t,e){for(var n={},r=t||["uidaplus","pc_i","pu_i"],a=Nt()||"",o=x(a=a.replace(/&aplus&/,"&"))||[],i=function(t){return y.indexOf(r,t)>-1},s=0;s<o.length;s++){var c=o[s],u=c[0]||"",f=c[1]||"";u&&f&&("EXPARAMS"===e||i(u))&&(n[u]=f)}return n}},Lt=0,jt={},Bt={getStartId:function(){return N.getRandomStr(10)+Date.now()+N.getRandomStr(9)},getUUID:function(){return N.getRandomStr(10)+Date.now()+N.getRandomStr(9)},fixDomain:function(t){if(-1!==t.indexOf("https://")||-1!==t.indexOf("http://"))return t;t=(/^\/\//.test(t)?"":"//")+t;return/(\d+\.){3,}\d+/.test(t)?ft.HTTP+t:ft.HTTPS+t},getAppKey:function(){var t=K(F());return t.getMetaInfo("appkey")||t.getMetaInfo("appId")||t.getMetaInfo("appKey")},getTrackDomain:function(){var t=K(F());return t.getMetaInfo(yt.APLUS_PV_DOMAIN)||t.getMetaInfo(yt.TRACKDOMAIN)},checkDomain:function(t,e){var n=new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)(\/.*)?$/),r=((t||"").match(n)||[])[0];if(!t||!r){R().tip_w(R().repeat("!"));R().tip_w("trackDomain error, please check ".concat(e," setting, current value is: ").concat(t)||"undefined");R().tip_w("we accept these three patterns:");R().tip_w("eg1: https://test-qtracking-xxx.com:port/a/b/c, port is optional");R().tip_w("eg2: http://test-qtracking-xxx.com:port/a/b/c, port is optional");R().tip_w("eg3: test-qtracking-xxx.com:port/a/b/c, port is optional");R().tip_w(R().repeat("!"));return!1}return!0},checkOpenid:function(t){if(!t){R().tip_w(R().repeat("!"));R().tip_w("QT need an unique id as QT's deviceid!!");R().tip_w("setting examples: aplus_queue.push({action: '".concat(F(),".setMetaInfo', arguments: ['_anony_id', xxxxxx]});"));R().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS");R().tip_w(R().repeat("!"));return!1}return!0},checkEvent:function(t,e){if(!t||"string"!=typeof t){R().w("event logkey is invalid, id =",t||"'' event properties = ",A.stringfy(e.cusp));return!1}var n=["id","du"],a={};n.forEach((function(t){a[t]=1}));if(a[t]){R().e("eventId has conflict with reservewords: ".concat(n.join(",")));return!1}if(t.length>yt.MAX_EVENTID_LENGTH){R().e("The maximum length of event id shall not exceed ".concat(yt.MAX_EVENTID_LENGTH));return!1}if(e&&("object"!==r(e)||y.isArray(e))&&"string"!=typeof e){R().e("please check trackEvent properties. properties should be string or object(not include Array)");return!1}if("object"===r(e)){var o=0;for(var i in e)if({}.hasOwnProperty.call(e,i)){if(i.length>yt.MAX_PROPERTY_KEY_LENGTH){R().e("The maximum length of property key shall not exceed ".concat(yt.MAX_PROPERTY_KEY_LENGTH));return!1}if(o>=yt.MAX_PROPERTY_KEYS_COUNT){R().e("The maximum count of properties shall not exceed ".concat(yt.MAX_PROPERTY_KEYS_COUNT));return!1}if(a[i]){R().e("property key has conflict with reserveWords: ".concat(n.join(",")));return!1}o+=1}}return!0},rank:function(){Lt++;Object.prototype.hasOwnProperty.call(jt,Lt)?Lt++:jt[Lt]=Lt;return Lt},clear:function(){Lt=0;jt={}},zeroFill:function(t,e,n){var r="".concat(Math.abs(t)),a=e-r.length,o=t>=0,i=Math.pow(10,Math.max(0,a)).toString().substring(1)+r;return o?(n?"+":"")+i:"-".concat(i)},date2YYMMDD:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0)].join(t||"")}catch(t){return""}},date2YYMMDDHHMMSS:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0),this.zeroFill(e.getHours(),2,0),this.zeroFill(e.getMinutes(),2,0),this.zeroFill(e.getSeconds(),2,0)].join(t||"")}catch(t){return""}},mapEventSampleRates:function(t){var e=[];m(t,(function(t){t.eventIds&&t.eventIds.length>0&&m(t.eventIds,(function(n){e.push({eventId:n,samplingRate:t.samplingRate})}))}));return e},hash:function(t,e){var n,r=e||1315423911;for(n=t.length-1;n>=0;n--)r^=(r<<5)+t.charCodeAt(n)+(r>>2);for(var a=(2147483647&r).toString(16);a.length<8;)a+="0";return a},isDebug:function(){var t=!1,e=K(F());try{t=/debugMode=true/.test(location.search)||e.getMetaInfo("DEBUG")}catch(t){}return t},localAutoEventDisabled:function(){return!!K(F()).getMetaInfo(yt.APLUS_DISABLE_AUTOEVENT)},localAutoPVDisabled:function(){var t=K(F());return!(!t.getMetaInfo(yt.APLUS_DISABLE_AUTOPV)&&"MAN"!==t.getMetaInfo("aplus-waiting"))},getAutoTrackStatus:function(){return!!K(F()).getMetaInfo(yt.APLUS_AUTOTRACK_ENABLED)},semicolonStr2Obj:function(t,e,n){e=e||{};var r,a,o=t.split(";"),i=o.length;for(a=0;a<i;a++){r=o[a].split("=");var s=N.trim(r.slice(1).join("="));e[N.trim(r[0])||""]=n?s:Rt.tryToDecode(s)}return e},getEtagUrl:function(t){var e=K(F()),n=t;try{var r=e.getMetaInfo(yt.APLUS_PV_DOMAIN);r=this.fixDomain(r);n="".concat(r,"/eg.js")}catch(t){}return n},getImprintFromStorage:function(t){if(Dt.get&&Dt.test()){var e="",n=Dt.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return decodeURIComponent(e)}return""},setImprintToStorage:function(t,e){e&&Dt.set&&Dt.test()&&Dt.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(e)))},setRemoteConfigToStorage:function(t,e){if(e&&Dt.set&&Dt.test()){var n=P.cloneDeep(e);"object"===r(n)&&(n=JSON.stringify(n));Dt.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(n)))}},getRemoteConfigFromStorage:function(t){if(Dt.get&&Dt.test()){var e="",n=Dt.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return A.parse(decodeURIComponent(e))}return""},setCnaToStorage:function(t,e,n){n&&Dt.set&&Dt.test()&&Dt.set(t,"".concat(e,"_").concat(encodeURIComponent(n)))},getCnaFromStorage:function(t,e){if(Dt.get&&Dt.test()){var n="",r=Dt.get(t);if(r){var a=r.split("_")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return decodeURIComponent(n)}return""},deleteInfo:function(t,e){m(e,(function(e){delete t[e]}));return t},resetFn:function(){var t=arguments.length>0&&arguments[0]?arguments[0]:{},e=arguments.length>1&&arguments[1]?arguments[1]:"",n=arguments.length>2&&arguments[2]?arguments[2]:function(){},r=t[e];t[e]=function(){var t=r&&r.apply(this,arguments);return t?n.call(this,t):n.apply(this,arguments)}},rewriteFn:function(t,e,n){var r=t[e];t[e]=function(t){n.call(this,t);r&&r.call(this,t)}},getHashKey:function(t,e){var n=[e.logkey,e.cssSelector];e.positionSelector&&n.push(e.positionSelector);t.id&&n.push(t.id);t.index>=0&&n.push(t.index);t.dataset&&t.dataset.privateNodeId&&delete t.dataset.privateNodeId;t.dataset&&n.push(JSON.stringify(t.dataset));return n=n.join("_")},getTimeZone:function(){var t=-(new Date).getTimezoneOffset()/60;return Math.abs(parseInt(t,10))},convertNativeMapStringToJSON:function(t){var e=t.replace(/(\w+)=([^,]+)/g,'"$1":"$2"').replace(/[{}]/g,""),n="{".concat(e,"}");return JSON.parse(n)}},Ft={rank:Bt.rank,clear:Bt.clear},Vt={localAutoEventDisabled:Bt.localAutoEventDisabled,localAutoPVDisabled:Bt.localAutoPVDisabled,getAutoTrackStatus:Bt.getAutoTrackStatus},Kt={set:Bt.setRemoteConfigToStorage,get:Bt.getRemoteConfigFromStorage},Gt={set:Bt.setImprintToStorage,get:Bt.getImprintFromStorage},qt={set:Bt.setCnaToStorage,get:Bt.getCnaFromStorage},Ht={resetFn:Bt.resetFn,rewriteFn:Bt.rewriteFn};Bt.LocalCfgUtils=Vt;Bt.RemoteCfgUtils=Kt;Bt.CNAUtils=qt;Bt.ImprintUtils=Gt;Bt.AccessType={MOBILE_NETWORK_2G:"2g",MOBILE_NETWORK_3G:"3g",MOBILE_NETWORK_4G:"4g",MOBILE_NETWORK_NONE:"none"};Bt.FunctionUtils=Ht;Bt.RankUtils=Ft;var Yt,Qt="httpRequest",$t="request",zt=function(){};function Wt(){try{return{ctx:dd,platType:"dd",sdkType:"ddmp",logDomain:"/ddm_logs"}}catch(t){try{return{ctx:my,platType:my&&my.tb?"taobao":"my",sdkType:my&&my.tb?"taobaomp":"mymp",logDomain:"/alipaym_logs"}}catch(t){try{return{ctx:tt,platType:"tt",sdkType:"ttmp",logDomain:"/bytedancem_logs"}}catch(t){try{return{ctx:swan,platType:"bd",sdkType:"bdmp",logDomain:"/baidum_logs"}}catch(t){try{return{ctx:wx,platType:"wx",sdkType:"wxmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:xhs,platType:"xhs",sdkType:"xhsmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:jd,platType:"jd",sdkType:"jdmp",logDomain:"/wxm_logs"}}catch(t){return{ctx:{},platType:"UNKNOW",sdkType:"UNKNOW"}}}}}}}}}function Jt(){return Wt().platType}function Xt(){return Wt().ctx}function Zt(){if("boolean"==typeof Yt)return Yt;var t=!1;try{var e=navigator?navigator.userAgent||navigator.swuserAgent:"";t=!!/AliApp/i.test(e);/AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(e)&&(t=!1);/AliApp\(KB/i.test(e)&&(t=!!/Mist/.test(e));/AlipayIDE Taobao/.test(e)&&(t=!0);if(t){var n=Jt().ctx;T(n.canIUse)&&(t=!!n.canIUse("callUserTrack"))}}catch(t){}Yt=t;return t}var te={getPlatformType:Jt,getPlatformSdkType:function(){return Wt().sdkType},getPlatformContext:Xt,getLogDomain:function(){return Wt().logDomain},getCurrentPage:function(){var t=getCurrentPages();return t[t.length-1]||{}},getReferrerPage:function(){var t=getCurrentPages();return t[t.length-2]||{}},resetIsTB:function(t){Yt=t},initIsTB:Zt,isTB:function(){return"boolean"==typeof Yt?!!Yt:Zt()},getWxTitle:function(t){if(!t)return"";var e=Jt(),n="";try{if("wx"===e&&__wxConfig){var r=__wxConfig,a=__wxConfig.page||{},o=a[t]||a[t+".html"],i={},s={};r.global&&r.global.window&&r.global.window.navigationBarTitleText&&(i.title=r.global.window.navigationBarTitleText);o&&o.window&&o.window.navigationBarTitleText&&(s.title=o.window.navigationBarTitleText);if(!s.title&&__wxAppCode__){var c=__wxAppCode__[t+".json"];c&&c.navigationBarTitleText&&(s.title=c.navigationBarTitleText)}var u=B().ctx;u[F()].globalTitleMap&&eachMap(u[F()].globalTitleMap,(function(e,r){e===t&&(n=r)}));0===n.length&&(n=s.title||i.title||"")}return n}catch(t){R().w("current platform can not track page title");return n}},setStorageSync:function(t,e){try{var n=Jt(),r=Xt();"my"===n||"taobao"===n?r.setStorageSync({key:t,data:e}):r.setStorageSync(t,e)}catch(t){}},getStorageSync:function(t){try{var e=Jt(),n=Xt();return"my"===e||"taobao"===e?n.getStorageSync({key:t}).data:n.getStorageSync(t)}catch(t){}},request:function(t,e,n,a){var o=K(F()),i=Xt();T(a)||(a=zt);T(n)||(n=zt);var s=e.requestMethodName||$t,c=i[s];T(c)||s===$t||(c=i[s=$t]);T(c)||s===Qt||(c=i[s=Qt]);var u,f,p=e&&e.dataType?e.dataType:"base64",l=o.getMetaInfo(yt.APLUS_MINI_REQUEST_TIMEOUT),g=e&&e.timeout?e.timeout:l,h=e.method||"GET";t=Bt.fixDomain(t);if(T(c)){var _={url:t,method:h,dataType:p,timeout:g,success:function(t){if(!u){u=!0;n(t)}},fail:function(t){if(!u){u=!0;a({failure:!0,data:t})}}};if("POST"===h&&"object"===r(e.data)){_.url=_.url.split("?")[0];if(Qt===s){_.headers={"Content-Type":"application/json"};_.dataType="json";_.data=JSON.stringify(e.data)}else _.data=e.data}var d=(o=K(F())).getMetaInfo("aplus-request-extinfo");"object"===r(d)&&(_._extInfo=d);c(_)}else if(!u){u=!0;a({failure:!0,data:f})}setTimeout((function(){if(!u){u=!0;f='aplus log request"'+t+' timeout", time spend'+g+"ms";console&&console.warn(f);a({failure:!0,data:f})}}),g)},getUtmParamsObj:function(t){var e={};try{P.eachMap(t,(function(t,n){if(0===t.indexOf("utm_"))e[t]="".concat(n);else if("scene"===t&&N.isString(n)){var r=decodeURIComponent(n)||"",a=N.query2obj(r);P.eachMap(a,(function(t,n){0===t.indexOf("utm_")&&(e[t]="".concat(n))}))}}))}catch(t){}return e}};function ee(t,e,n){var a,o,i=te.getPlatformContext();a=i,o={apiName:e.apiName,queueName:e.queueName},L=a._sdk_context||j.create(a,o);"object"===r(t)&&(e.metaInfo=Object.assign({},e.metaInfo,t.metaInfo));R().setDebug(t.metaInfo.DEBUG);$([ft.SDK_READY,"running"]);!function(t,e){(new Z).run({plugins:t.plugins,context:t.context},{config:{},userdata:{},pubsubType:"aplusinit",messageFnQueue:[],middlewareMessageKey:"mw_change_aplusinit"},(function(t){var n=["aplusInitContext",t];$(n);z(n);T(e)&&e(t)}))}({plugins:e.plugins,context:function(){var t={PAGE_LOAD_TIME:new Date},n=[];y.each(e.plugins,(function(e){t[e.name]=e.config;if("aplus_log_inject"===e.name&&e.config&&e.config.plugins){n=e.config.plugins.pv;y.each(n,(function(e){t[e.name]=e.config}))}}));return Object.assign({},t,{sdk_config:e})}},(function(t){n&&T(n)&&n(t)}));return B()}function ne(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];n.push.apply(n,arguments);return new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};Object.defineProperty(n,"__esModule",{value:!0});Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}));return n}var re="2.1.7";function ae(t,e){try{!function(){if(t&&y.isArray(t)&&t.length){for(var n=ge(t).queue,r={},a=[];r=n.shift();)le(r,e,(function(t){a.push(t)}));a.length>0&&setTimeout((function(){for(;r=a.shift();)le(r,e)}),100)}}()}catch(t){R().w(t)}}function oe(){return(q("_$")||{}).meta_info}var ie=[],se=[],ce=[];function ue(t){var e=function(){var t=oe()||{};return"1"!=="".concat(t.uaid)||t._anony_id?t._hold||t["aplus-waiting"]:"BLOCK"}(),n=oe()||{},r=!0,a=t.arguments||[],o=a[0],i=a[1],s="START";if("_hold"===o&&i===s)return s;if("_anony_id"===o&&i)return s;if(t&&/sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(t.action)&&"BLOCK"===e)if(!n[e]){ce.push(t);r=!1}return r}function fe(t){ae(ie,t);ae(se,t);ae(ce,t)}function pe(t,e){e&&pt.indexOf(t)>-1&&(t="_".concat(t));return t}function le(t,e,n){var r=!!e.isOpenApi,a=t?t.action:"",o=t?t.arguments:"",i=ue(t);if(i){var s=B().ctx;try{if(a&&o&&y.isArray(o)){var c,u=a.split("."),f=s,p=s;if(3===u.length)p=(f=s[u[0]][u[1]]||{})[c=pe(u[2],r)]?f[c]:"";else for(;u.length;){p=f=f[c=pe(u.shift(),r)];if(!f){T(n)&&n(t);return}}T(p)&&p.apply(f,o);"START"===i&&fe(e)}}catch(t){R().w(t)}}}function ge(t,e){for(var n,r={subscribeMwChangeQueue:[],subscribeMetaQueue:[],subscribeQueue:[],metaQueue:[],othersQueue:[]},a={};a=t.shift();)try{var o=a.action,i=a.arguments[0];/subscribe/.test(o)?"setMetaInfo"===i?r.subscribeMetaQueue.push(a):i===ft.MW_CHANGE_PV||i===ft.MW_CHANGE_HJLJ?r.subscribeMwChangeQueue.push(a):r.subscribeQueue.push(a):/MetaInfo/.test(o)?r.metaQueue.push(a):r.othersQueue.push(a)}catch(t){R().w(t);r.othersQueue.push(a)}if(e&&r[e]){n=r[e];r[e]=[]}return{queue:r.subscribeMwChangeQueue.concat(r.metaQueue).concat(r.subscribeQueue).concat(r.subscribeMetaQueue,r.othersQueue),formatQueue:n}}var he=U.extend({push:function(t){this.length++;le(t,this.opts)}}),_e=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"processAplusQueue",value:function(t){var e=this.options.config||{},n=K(t);ae(n,e);G(t,he.create({opts:e,startLength:n.length,length:0}))}},{key:"run",value:function(){var t,e,n=this.options.context.sdk_config.queueName;this.processAplusQueue(n);t=n,e=this.options.config,K(t).push({action:ft.SUBSCRIBE,arguments:[ft.SET_META_INFO,function(t,n){t===yt.DEBUG?R().setDebug(!!n):t===ft._USER_ID&&n?ae(ie,e):t===ft._ANONY_ID&&n?ae(se,e):"_hold"===t&&"START"===n&&fe(e)}]})}}]);return t}(),de=ne(Object.freeze({__proto__:null,default:_e})),me=function(){var t=null,e="",n=null,a=!1;function o(){var t=te.getPlatformContext();this.load=function(r){if(n){t.removeStorage({key:e});T(r)&&r()}else{e="aplus_cache_".concat(Bt.getAppKey());t.getStorage({key:e,success:function(o){n=o&&o.data&&A.parse(o.data)||{};a=!0;t.removeStorage({key:e});T(r)&&r()},fail:function(o){R().w("".concat(e,": ").concat(o.errMsg));n={};a=!0;t.removeStorage({key:e});T(r)&&r()}})}};this.save=function(){n&&t.setStorage({key:e,data:A.stringfy(n)})};this.set=function(t,e){n&&(n[t]=e)};this.get=function(t){return(n||{})[t]};this.remove=function(t){n&&n[t]&&delete n[t]};this.getAll=function(){return n};this.clear=function(){n=null};this.has=function(t){return!!this.get(t)};this.isLoaded=function(){return a};this.getSync=function(t){try{var e=te.getStorageSync(t);return t===yt.APLUS_IMPRINT_VERSION?e:"string"==typeof e?A.parse(e):e}catch(t){}};this.setSync=function(t,e){try{"object"===r(e)?te.setStorageSync(t,JSON.stringify(e)):te.setStorageSync(t,e)}catch(t){}}}return function(){t||(t=new o);return t}}(),ve=function(){var t=null,e=null,n=null;function r(){return{resume:function(t){var r=!1;n||(n=me().get(yt.CURRENT_SESSION));e=Date.now();if(!n||!n.end_time||e-n.end_time>yt.SESSION_INTERVAL){r=!0;!function(t){try{var e=(n||{}).options||{},r=S({},function(t){var e={};for(var n in t)e[n]=t[n];return e}(t.query));r.path=t.path||e.path;r.scene=t.scene?"".concat(te.getPlatformType(),"_").concat(t.scene):e.scene;var a=t.referrerInfo;a&&(r.referrerAppId=a.appId);R().i("current launch options: ",r);var o=K(F()).getMetaInfo("globalproperty"),i=Date.now();n={id:N.getRandomStr(10)+i,start_time:i,options:r,state_s:1};o&&(n.gp=o)}catch(t){R().e("generate new session failed, errmsg: ",t)}}(t)}return r},pause:function(){!function(){if(n){var t=new Date;n.end_time=Date.now();"number"!=typeof n.duration&&(n.duration=0);n.duration=n.end_time-e;n.state_s=0;me().set(yt.CURRENT_SESSION,n);R().i("session end (%s): %s ",n.id,t.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return I(n)}}}return function(){t||(t=r());return t}}(),ye=function(){var t,e,n,r=[],a=[];function o(){if(r.length){var t=me().get(yt.EKVS);if(function(t){var e=0;for(var n in t)v(t[n])&&(e+=t[n].length);return e}(t)+r.length<=yt.EVENT_MAX_COUNT){t=i(t,r);me().set(yt.EKVS,t)}}}function i(t,n){var r=(t=t||{})[e];v(r)&&r.length?t[e]=r.concat(n):t[e]=[].concat(n);return t}return function(){t||(t={addEvent:function(t){if(t&&(e=e||"sessionid")){r.unshift(t);if(r.length>yt.MEMORY_MAX_COUNT){o();r.length=0}}},setSessionId:function(t){e=t;if(v(a)&&a.length&&e){for(var n=0;n<a.length;n++)this.addEvent(a[n]);a.length=0}},setStartId:function(t){n=t},getStartId:function(){return n},getEkvs:function(){var t=me().get(yt.EKVS);r&&r.length&&(t=i(t,r));return t},getEkvsLen:function(){var t=(me().get(yt.EKVS)||{})[e]||[],n=r?r.length:0;return t.length+n},clear:function(){me().remove(yt.EKVS);r.length=0;a.length=0}});return t}}();function Se(t){var e;return(e=function(){try{return window}catch(t){}}()?Bt.RemoteCfgUtils.get(yt.APLUS_REMOTE_CONFIG):me().getSync(yt.APLUS_REMOTE_CONFIG))&&e[t]}function Ie(){return K(F()).getMetaInfo(yt.APLUS_DISABLE_AUTOEVENT_REMOTE)||Se("codelessClickEventStatus")}function be(){var t=K(F());return Se("currentDeviceEnable")||t.getMetaInfo(yt.APLUS_DEVICE_ENABLE)}function Pe(){return K(F()).getMetaInfo(yt.APLUS_DISABLE_AUTOPV_REMOTE)||Se("codelessCollectorPageStatus")}function Ee(){return K(F()).getMetaInfo(yt.APLUS_AUTOTRACK_ENABLED_REMOTE)||Se("codelessStatus")}function Ae(t){var e=F(),n=K(V());if(t&&!P.isEmptyObject(t)){!function(t){var e=K(V()),n=F();e.push({action:"".concat(n,".setMetaInfo"),arguments:[yt.APLUS_DISABLE_AUTOEVENT_REMOTE,t]})}(t.codelessClickEventStatus);!function(t){var e=K(V()),n=F();e.push({action:"".concat(n,".setMetaInfo"),arguments:[yt.APLUS_DISABLE_AUTOPV_REMOTE,t]})}(t.codelessCollectorPageStatus);!function(t){var e=F();K(V()).push({action:"".concat(e,".setMetaInfo"),arguments:[yt.APLUS_AUTOTRACK_ENABLED_REMOTE,t]})}(t.codelessStatus);!function(t){var e=K(V()),n=F();e.push({action:"".concat(n,".setMetaInfo"),arguments:[yt.APLUS_DEVICE_ENABLE,t]})}(t.currentDeviceEnable);t.eventSamplingRate&&t.eventSamplingRate.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[yt.APLUS_EVENT_LIMITRATES,Bt.mapEventSampleRates(t.eventSamplingRate)]});t.codelessIgnoreComponent&&t.codelessIgnoreComponent.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[yt.APLUS_AUTOTRACK_CONFIG_REMOTE,t.codelessIgnoreComponent]})}}var Te={getAutoEventStatus:Ie,enableCfg:Ae,getAutoTrackStatus:Ee,getAutoPageStatus:Pe,getDeviceStatus:be},Oe=new(function(){function t(){i(this,t);if(!t.instance){t.instance=this;t.instance.capacity=1;t.instance.tokens=1;t.instance.fillRate=1;t.instance.lastFillTime=Date.now();t.instance.loaded=!1}return t.instance}c(t,[{key:"run",value:function(){var t=this;setInterval((function(){t.fill()}),1e3)}},{key:"load",value:function(){if(!this.loaded){var t=K(F()).getMetaInfo(yt.APLUS_MINI_REQUESTS_LIMIT);this.capacity="number"==typeof t&&t<=5&&t>=1?t:1;this.loaded=!0}}},{key:"fill",value:function(){var t=Date.now(),e=(t-this.lastFillTime)*(this.fillRate/1e3);this.tokens=Math.ceil(Math.min(this.tokens+e,this.capacity));this.lastFillTime=t}},{key:"consume",value:(e=o(n().mark((function t(e){var r;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<=this.tokens)){t.next=5;break}this.tokens-=e;return t.abrupt("return",{allowed:!0});case 5:r=1e3*Math.ceil((e-this.tokens)/this.fillRate);return t.abrupt("return",{allowed:!1,waitTime:r});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}());function we(t){var e=t,n=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue();n.push(t)};this.dequeue=function(){return n.shift()};this.front=function(){return n[0]};this.isEmpty=function(){return 0===n.length};this.clear=function(){n.length=0};this.size=function(){return n.length};this.items=function(){return n};this.print=function(){R().i("---queue: ",n.toString())}}function Ce(t){var e=null;switch(t){case It:e=function(){var t=null,e=ve().cloneCurrentSession();e&&(t={header:{st:"1"},analytics:{sessions:[e]}});return t}();break;case bt:e=function(){var t=null,e={},n=ve().cloneCurrentSession();n&&(e.sessions=[n]);var r=ye().getEkvs();if(r){e.ekvs=I(r);ye().clear()}(e.sessions||e.ekvs)&&(t={analytics:e});return t}();break;case Pt:e=function(){var t=null,e=ye().getEkvs();if(e){t={analytics:{ekvs:I(e)}};ye().clear()}return t}()}return e}function ke(t){var e={},n=t.networkType;"none"===n&&(n="unknown");switch(n=n?n.toLowerCase():""){case Bt.AccessType.MOBILE_NETWORK_4G:e.access_subtype="LTE";e.access="4G";break;case Bt.AccessType.MOBILE_NETWORK_3G:e.access_subtype="CDMA";e.access="3G";break;case Bt.AccessType.MOBILE_NETWORK_2G:e.access_subtype="GRPS";e.access="2G";break;default:e.access=n;delete e.access_subtype}return e}var Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xe=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(Me),Ne=String.fromCharCode,De=function(t){var e;if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Ne(192|e>>>6)+Ne(128|63&e):Ne(224|e>>>12&15)+Ne(128|e>>>6&63)+Ne(128|63&e);e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Ne(240|e>>>18&7)+Ne(128|e>>>12&63)+Ne(128|e>>>6&63)+Ne(128|63&e)},Re=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ue=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Me.charAt(n>>>18),Me.charAt(n>>>12&63),e>=2?"=":Me.charAt(n>>>6&63),e>=1?"=":Me.charAt(63&n)].join("")},Le=function(t){return e=function(t){return t.replace(Re,De)}(t),e.replace(/[\s\S]{1,3}/g,Ue);var e};function je(t,e){return e?Le(String(t)).replace(/[+\/]/g,(function(t){return"+"===t?"-":"_"})).replace(/\=/g,""):Le(String(t))}var Be=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),Fe=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return Ne(55296+(e>>>10))+Ne(56320+(1023&e));case 3:return Ne((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Ne((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Ve=function(t){var e=t.length,n=e%4,r=(e>0?xe[t.charAt(0)]<<18:0)|(e>1?xe[t.charAt(1)]<<12:0)|(e>2?xe[t.charAt(2)]<<6:0)|(e>3?xe[t.charAt(3)]:0),a=[Ne(r>>>16),Ne(r>>>8&255),Ne(255&r)];a.length-=[0,0,2,1][n];return a.join("")},Ke=function(t){return e=function(t){return t.replace(/[\s\S]{1,4}/g,Ve)}(t),e.replace(Be,Fe);var e};var Ge=[];function qe(t,e){var n=He(t,e);t&&t.id_tracking&&(n[e.id_tracking||"id_tracking"]=He(t.id_tracking,vt));return n}function He(t,e){var n={};for(var r in t)e[r]?n[e[r]]=t[r]:n[r]=t[r];return n}function Ye(t,e){var n={};if(t)for(var r in t)t[r]&&(n[e[r]]=t[r]);return n}var Qe=function(){function t(){i(this,t);this._imprint=""}c(t,[{key:"set",value:function(t){this._imprint="string"==typeof t?t:je(JSON.stringify(t))}},{key:"get",value:function(){return this._imprint}},{key:"getImpObj",value:function(){return A.parse((t=this._imprint,Ke(String(t).replace(/[-_]/g,(function(t){return"-"===t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))));var t}},{key:"getItem",value:function(t){var e=this.getImpObj();return e&&e[t]||""}},{key:"load",value:function(){this._imprint=me().get(yt.IMPRINT)}},{key:"save",value:function(){this._imprint&&me().set(yt.IMPRINT,this._imprint)}}]);return t}(),$e=new Qe;function ze(t,n,r,a){var o=K(F()),i=function(){var t={},e=K(F()),n=e.globalConfig||{},r=e._aplus_client||{},a=me().get(yt.IMPRINT);a&&(t.imprint=a);t.device_type="Phone";t.sdk_version=n.lver;t.appkey=Bt.getAppKey();t.device_info="";t.appid=r.appId;t.app_version=e.getMetaInfo("appVersion")||"devtools";var o=e.getMetaInfo("aplus-global-args");o&&o.debugId?t.miniappDebugId=o.debugId:me().get("miniappDebugId")&&(t.miniappDebugId=me().get("miniappDebugId"));var i=r||{};i.safeArea=i.safeArea||{};var s=i.model||"",c=i.platform||"",u=i.brand||"",f=u.toLowerCase();t.sdk_type=te.getPlatformSdkType();t.platform=te.getPlatformType();t.platform_sdk_version=i.SDKVersion;t.platform_version=i.platformVersion;var p=Math.round(i.screenWidth*i.pixelRatio),l=Math.round(i.screenHeight*i.pixelRatio);t.resolution=p>l?"".concat(p,"*").concat(l):"".concat(l,"*").concat(p);t.pixel_ratio=i.pixelRatio;t.os=c;t.font_size_setting=i.fontSizeSetting;t.device_model=s;t.device_brand=u;t.device_manufacturer=f;t.device_manuid=s;t.device_name=s;t.os_version=i.os_version;t.language=i.language;var g=ke(r);t.access=g.access;g.access_subtype&&(t.access_subtype=g.access_subtype);return t}();try{if("my"===te.getPlatformType()||"taobao"===te.getPlatformType()){i.id_type="alipay_id";i.id_tracking={alipay_id:o.getMetaInfo(ft._ANONY_ID)||me().get(ft._ANONY_ID)||"",unionid:o.getMetaInfo(ft._DEV_ID)||me().get(ft._DEV_ID)||"",userId:o.getMetaInfo(ft._USER_ID)||""}}else{i.id_type="openid";i.id_tracking={openid:o.getMetaInfo(ft._ANONY_ID)||me().get(ft._ANONY_ID)||"",unionid:o.getMetaInfo(ft._DEV_ID)||me().get(ft._DEV_ID)||"",userId:o.getMetaInfo(ft._USER_ID)||""}}$e.get()&&(i[yt.IMPRINT]=$e.get());if(t.analytics){var s=o.getMetaInfo(ft._USER_ID)||te.getStorageSync(ft._USER_ID),c=o.getMetaInfo("_user_nick");t.analytics.active_user={puid:s,provider:c}}var u=Date.now();t.header=P.assign(i,e(e({},t.header),{},{traceId:N.getRandomStr(10)+u+N.getRandomStr(9),start_id:ye().getStartId()}));var f=function(t,e){return{h:qe(t.header,"mini"===e?mt:dt),a:Ye(t.analytics,"mini"===e?gt:ht)}}(t,"mini"),p=A.stringfy(f),l=function(){var t=K(F()),e=t.getMetaInfo(yt.TRACKDOMAIN)||t.getMetaInfo(yt.APLUS_PV_DOMAIN);if(!Bt.checkDomain(e))return"";var n=te.getLogDomain();if(!n){R().tip_w("current miniapp framework is not supported!!");return""}return Bt.fixDomain(e)+n}(),g=o.getMetaInfo(yt.APLUS_MINI_REQUEST_TIMEOUT)||yt.DEFAULT_REQUEST_TIMEOUT,h={url:l,method:"POST",data:je(p),timeout:g,success:function(e){var a,o,i=e.code||e.status||e.statusCode;if(200===i||413===i){R().i("event send success:",t,p);try{if(e.profile){a={end:e.profile.responseEnd,start:e.profile.requestStart},"number"==typeof(o=a.end-a.start)&&o>=300?Ge.push(o):Ge=[];!function(){if(Ge.length>=10){K(F())._record(yt.PERFORMANCE_WARING,"OTHER",{});Ge=[]}}()}}catch(t){R().w("current miniapp not support profile API")}!function(t){var e=me().getSync(yt.APLUS_IMPRINT_VERSION);if(t){var n=K(F());if(t.imprintVersion&&t.imprintVersion!==e){var r=t.imprintVersion;me().setSync(yt.APLUS_IMPRINT_VERSION,r);var a=n.getMetaInfo(yt.APLUS_PV_DOMAIN)||n.getMetaInfo(yt.TRACKDOMAIN),o=Bt.fixDomain(a)+r;n.requestRemoteConfig(o,(function(t){if(t.data&&t.data.data){Ae(t.data.data);me().setSync(yt.APLUS_REMOTE_CONFIG,t.data.data)}}),(function(t){R().w("remote configuration request failed, errmsg:",t)}))}else{Ae(me().getSync(yt.APLUS_REMOTE_CONFIG))}}}(e.data||{});T(n)&&n(e)}else{R().w("event send failed:",p);T(r)&&r()}},fail:function(t){if(Date.now()-u<_){R().w("event send failed:",p);R().w("event send failed because ",t)}else{R().w("current request timeout:",_);R().w("event send timeout:",p)}T(r)&&r()},complete:function(){T(a)&&a()}},_=o.getMetaInfo(yt.APLUS_MINI_REQUEST_TIMEOUT);_&&(h.timeout=_);!function(t){var e=te.getPlatformContext();try{e.request(t)}catch(e){try{dd&&dd.httpRequest(t)}catch(t){R().w("request send failed, err msg: ",t)}}}(P.assign(h,function(){var t="".concat(te.getPlatformSdkType(),"/json"),e=!1;try{my&&(e=!0)}catch(t){}return e?{headers:{"Content-Type":t,"Msg-Type":t}}:{header:{"Content-Type":t,"Msg-Type":t}}}()))}catch(t){}}var We=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Je=function(t){if(t&&t.analytics&&t.analytics.ekvs){return Object.keys(t.analytics.ekvs)[0]}},Xe=function(t){var e=[];if(y.isArray(t)&&t.length>0){var n=Array.from(new Set(t.map((function(t){return t.header.start_id}))));n.forEach((function(n){var r,a=t.filter((function(t){return t.header.start_id===n})),o=a.reduce((function(t,e,n,a){if(t){r=P.cloneDeep(t);var o=Je(t);r.analytics.ekvs[o]=r.analytics.ekvs[o].concat(e.analytics.ekvs[o]);return r}return t=a[n]}));e.push(o)}));for(var r=new Array(e.length).fill([]),a=Object.create(null),o=0;o<e.length;o++){for(var i=e[o],s=Je(i),c=i.analytics.ekvs[s].filter((function(t){return!!t})).map((function(t){return t.uuid})),u=0;u<c.length;u++){var f=c[u];a[f]?r[o].push(u):a[f]=1}r[o].length>0&&i.analytics.ekvs[s].splice(r[o][0],r[o].length)}}return e},Ze=function(){function t(){i(this,t);this.queue=new we;this.isProcessing=!1;this.Tag=""}c(t,[{key:"enqueue",value:function(t,e,n){e=e||{};var r=Ce(t);if(r){var a=K(F())._aplus_client||{};r.header=S(r.header,ke(a));r.noCache=e.noCache;this.queue.enqueue(r)}this.isProcessing||this.processQueue(n)}},{key:"load",value:function(t){var e=this,n=me().get(t);n&&n.length&&n.forEach((function(t){e.queue.enqueue(t)}));me().remove(t)}},{key:"processQueue",value:(e=o(n().mark((function t(e){var r,a,o,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isProcessing=!0;case 1:if(!(this.queue.size()>0)){t.next=17;break}r=this.queue.front();t.next=5;return Oe.consume(1);case 5:a=t.sent;o=a.allowed;i=a.waitTime;if(!o){t.next=13;break}this.queue.dequeue();rn(r);t.next=15;break;case 13:t.next=15;return We(i);case 15:t.next=1;break;case 17:this.isProcessing=!1;T(e)&&e();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}(),tn=function(t){f(n,Ze);var e=_(n);function n(){var t;i(this,n);t=e.call(this);n.instance||(n.instance=g(t));return h(t,n.instance)}c(n,[{key:"prepare",value:function(t,e,n){var r=K(F());Bt.checkOpenid(r.getMetaInfo(ft._ANONY_ID));if(t===Pt)this.enqueue(t,e,(function(){T(n)&&n()}));else this.isProcessing||this.processQueue(n)}}]);return n}(),en=new(function(t){f(n,Ze);var e=_(n);function n(){var t;i(this,n);t=e.call(this);if(!n.instance){n.instance=g(t);n.instance.failedRequests=[]}return h(t,n.instance)}c(n,[{key:"prepare",value:function(){var t=this;Xe(this.failedRequests).forEach((function(e){t.queue.enqueue(e)}))}},{key:"clearFailedRequests",value:function(){this.failedRequests.length=0}},{key:"save",value:function(){var t=(me().get(yt.FAILED_REQUESTS)||[]).concat(this.failedRequests),e=Xe(t);e&&e.length&&me().set(yt.FAILED_REQUESTS,e);this.clearFailedRequests()}}]);return n}()),nn=new tn,rn=function(){var t=o(n().mark((function t(e){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&ze(e,(function(){}),(function(){e&&!e.noCache&&en.failedRequests.push(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),an=0;function on(t,e){var n={};e&&(n.scene=e);t&&t.miniappDebugId&&(n.debugId=t.miniappDebugId);for(var r in t)"$$_share_uid"!==r&&0!==r.indexOf("$$_utm_")||(n[r]=t[r]);return n}function sn(){var t=App,e=!1,n=!1,a=B().ctx,o=V(),i=te.getPlatformContext(),s=function(t){te.initIsTB();var e=t?t.query:{},n=t?t.referrerInfo:{};Te.enableCfg(me().getSync(yt.APLUS_REMOTE_CONFIG));an+=1;a[o].push({action:St.appendMetaInfo,arguments:["aplus-session-args",P.assign(n,{scene:t.scene||""})]});if(e){var r={};e.spm&&(a.aplus.spm_orign=e.spm);t.scene&&(r.scene=t.scene);if(e.miniappDebugId){var i=e.miniappDebugId.trim(),s=i.split("_");r=P.assign(r,{aplus_work_no:s.length>2?s[1]:i,aplus_track_debug_id:i,aplus_flag:"aplus_test"})}a[o].push({action:St.appendMetaInfo,arguments:["aplus-exdata",r]});a[o].push({action:St.appendMetaInfo,arguments:["aplus-cpvdata",r]});a[o].push({action:St.appendMetaInfo,arguments:["aplus-global-args",on(e,t.scene)]})}},c=function(t){an+=1;var n,i=t?t.query:{},s=t?t.scene:"";a[o].push({action:ft.SDK_APPEND_META_INFO,arguments:["aplus-global-args",on(i,s)]});a[o].push({action:St.appendMetaInfo,arguments:[yt.GLOBAL_PROPERTY,te.getUtmParamsObj(i)]});if(s){a[o].push({action:St.appendMetaInfo,arguments:["aplus-exdata",{scene:s}]});a[o].push({action:St.appendMetaInfo,arguments:["aplus-cpvdata",{scene:s}]});a[o].push({action:St.appendMetaInfo,arguments:["aplus-session-args",{scene:s}]})}2===an?n=1:1===an?n=0:R().w("APP_LAUNCH_TYPE should not reach this, value = ".concat(an));Oe.load();Oe.run();if(!e){e=!0;!function(t){me().load((function(){R().w("cache init success");t.query&&t.query.miniappDebugId&&t.query.miniappDebugId!==me().get("miniappDebugId")&&me().set("miniappDebugId",t.query.miniappDebugId)}));var e={},n=P.cloneDeep(t);for(var a in n)"object"===r(n[a])?e=P.assign(n[a],e):n[a]&&(e[a]=n[a]);var o=ve().resume(e),i=ve().getCurrentSessionId();ye().setSessionId(i);if(o){en.load(yt.FAILED_REQUESTS);en.processQueue()}}(t)}Bt.RankUtils.clear();var c=Bt.getStartId();ye().setStartId(c);a.onAppShowTime=Date.now();a[V()].push({action:St.record,arguments:[yt.APP_START,"SHOW",{start_type:n,is_auto:1,currentPath:t.path||""}]})},u=function(){var t=Date.now()-a.onAppShowTime;a[V()].push({action:St.record,arguments:[yt.APP_END,"H_OR_U",{duration:t,end_type:0,start_time:a.onAppShowTime,is_auto:1}]});e=!1;!function(){ve().pause();en.prepare();en.processQueue().then((function(){en.save();me().save()}))}();an=0};if(t.after)t.after({methods:{onLaunch:function(t){t.thisObject&&(t.thisObject[F()]=a[F()]);s(t.args)},onShow:function(t){c(t.args)},onHide:function(){u()}}});else{App=function(e){e[F()]=a[F()];t(e)};try{i.onAppShow((function(t){if(!n){var e={};e=T(i.getLaunchOptionsSync)?i.getLaunchOptionsSync()||{}:t;s(e);n=!0}c(t)}));i.onAppHide((function(){u()}));!function(t){try{my&&my.onTitleCloseClick&&t&&my.onTitleCloseClick(t)}catch(t){}}(u)}catch(t){R().w("hook app failed, errmsg = ",t)}}}var cn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){["object","function"].indexOf("undefined"==typeof App?"undefined":r(App))>-1&&sn()}}]);return t}(),un=ne(Object.freeze({__proto__:null,default:cn})),fn="",pn={};function ln(t){var e=K(F()).getMetaInfo("pageConfig")||{},n=t||fn;try{if(e&&"object"===r(e))for(var a in e){if(a===n)break;if(e[a]&&e[a].regRule&&e[a].regRule.test(n)){n=a;break}}}catch(t){}return e[n]}var gn={getCurrentPagePath:function(){return fn},getPrePagePath:function(t){return t&&-1!==t.indexOf("?")?t.split("?")[0]:t},setCurrentPath:function(t){t&&(fn=t)},getPageQuery:function(t){if(t)return pn[t]},setPageQuery:function(t,e){t&&(pn[t]=e)},getFullPath:function(t){return function(t,e){if(!t||"-"===t)return"";var n=[];for(var r in e)n.push("".concat(r,"=").concat(e[r]));var a=n.join("&");return a?"".concat(t,"?").concat(a):t}(t,pn[t])},getPageOptions:ln,getPageName:function(t){return(ln(t)||{}).pageName},getPrePageName:function(t){return(ln(t)||{}).pageName},getPageTitle:function(t){return(ln(t)||{}).pageTitle||te.getWxTitle(t)},getVTRealtimeCode:function(){if(fn){var t=pn[fn]||{},e=/^\$vt_/,n=decodeURIComponent(t.scene);return n&&e.test(n)&&n.replace(e,"")}},getPageProperties:function(t){return(ln(t)||{}).properties},skipPage:function(t){return(ln(t)||{}).skipMe}};var hn={onAplusReady:function(t,e,n){t.push({action:e,arguments:[ft.SDK_READY,function(t){"complete"===t&&"function"==typeof n&&n()}]})},click_proxy:function(t,e){var n=K(F()),r=t[e];t[e]=function(){var t=r.apply(this,arguments),e=arguments[0];P.isObject(e)&&n&&n.record&&n.record("$$_auto_clk","CLK",{});return t}},getIndexByRect:function(t,e,n){var r=-1;te.getPlatformContext().createSelectorQuery().selectAll(t).boundingClientRect().exec((function(t){y.each(t[0],(function(t,n){t.width===e.width&&t.height===e.height&&t.left===e.left&&t.top===e.top&&t.right===e.right&&t.bottom===e.bottom&&(r=n)}));n(r)}))}};function _n(t,e){var n=te.getCurrentPage(),a=n.route||n.is||"",o=n.options||{},i=B().ctx,s=V(),c=D.obj2queryStr(o,!0),u=P.cloneDeep(t);c&&(a="".concat(a,"?").concat(c));P.isEmptyObject(u.query)?u.query=o:"string"==typeof u.query&&(u.query=N.query2obj(u.query));if("object"===r(u.query)){u.query.$$_share_uid=i[F()].getMetaInfo("_anony_id");u.query.$$_utm_medium=3;u.query=D.obj2queryStr(u.query)}var f=u.path||a,p="$$_share_uid=".concat(u.query.$$_share_uid,"&$$_utm_medium=3");f.indexOf("?")>-1?u.path="".concat(f,"&").concat(p):u.path="".concat(f,"?").concat(p);u.status="ready";t.promise&&(u.promise=t.promise);i[s].push({action:ft.PUBLISH,arguments:[e,u]});return u}function dn(){B().ctx[V()].push({action:ft.PUBLISH,arguments:["onPullDownRefresh",{status:"ready"}]})}function mn(){var t={status:"ready",context:this};B().ctx[V()].push({action:ft.PUBLISH,arguments:["onReachBottom",t]})}function vn(t){var e=B().ctx,n=V();try{gn.setCurrentPath(this.route);t&&gn.setPageQuery(this.route,t);R().i("Page onLoad: ",this.route,t);var r=this;hn.onAplusReady(e[n],ft.SUBSCRIBE,(function(){var a=function(t){var e=B().ctx[F()].getMetaInfo(yt.GLOBAL_PROPERTY),n=Object.keys(t);P.eachMap(e,(function(r){var a=!1;m(n,(function(t){if(N.isStartWith(t,"utm_")){a=!0;return"break"}}));a&&0===r.indexOf("utm_")&&!t[r]&&delete e[r]}));return Object.assign({},e,t)}(te.getUtmParamsObj(t));e[F()].appendMetaInfo(yt.GLOBAL_PROPERTY,a);e[n].push({action:ft.PUBLISH,arguments:["onLoad",{status:"ready",context:r}]});var o=te.getCurrentPage();Bt.resetFn(o,"setData",(function(t){e[n].push({action:ft.PUBLISH,arguments:["onPageDataChanged",{data:t,context:r}]})}))}))}catch(t){R().w("onPageLoad: ",t)}}function yn(){var t=B().ctx,e=V(),n=this;try{gn.setCurrentPath(this.route);var r=this;setTimeout((function(){hn.onAplusReady(t[e],ft.SUBSCRIBE,(function(){t[e].push({action:ft.PUBLISH,arguments:["onShow",{status:"ready",context:r,route:n.route}]})}))}),0)}catch(t){R().w("onPageShow: ",t)}}function Sn(){var t=B().ctx,e=V();try{t[e].push({action:ft.PUBLISH,arguments:["onReady",{status:"ready",context:this,route:this.route}]})}catch(t){R().w("onPageReady: ",t)}}function In(){var t=B().ctx,e=V();try{t[e].push({action:ft.PUBLISH,arguments:["onHide",{status:"ready",route:this.route}]})}catch(t){R().w("onPageHide: ",t)}}function bn(t){B().ctx[V()].push({action:ft.PUBLISH,arguments:["onAplusClk",{status:"ready",event:t,context:this}]})}function Pn(t){B().ctx[V()].push({action:ft.PUBLISH,arguments:["onAplusTouch",{status:"ready",context:this,event:t}]})}function En(t){if(t.onShareAppMessage){var e=t.onShareAppMessage;t.onShareAppMessage=function(t){return _n(e.call(this,t)||{},"onShareAppMessage")}}}function An(){try{var t,e=Page;e.after&&(t=e.after);Page=function(t){Bt.FunctionUtils.rewriteFn(t,"onShow",yn);Bt.FunctionUtils.rewriteFn(t,"onHide",In);Bt.FunctionUtils.rewriteFn(t,"onUnload",In);Bt.FunctionUtils.rewriteFn(t,"onLoad",vn);Bt.FunctionUtils.rewriteFn(t,"onReady",Sn);Bt.FunctionUtils.rewriteFn(t,"onPullDownRefresh",dn);Bt.FunctionUtils.rewriteFn(t,"onReachBottom",mn);Bt.FunctionUtils.rewriteFn(t,"onAplusClk",bn);Bt.FunctionUtils.rewriteFn(t,"onAplusTouch",Pn);En(t);!function(t){if(t.onShareTimeline){var e=t.onShareTimeline;t.onShareTimeline=function(t){return _n(e.call(this,t)||{},"onShareTimeline")}}}(t);e(t)};t&&(Page.after=function(){t.apply(this,arguments)})}catch(t){R().w("Page hook error")}}function Tn(){try{var t=Component;Component=function(e){try{e.methods=e.methods||{};var n=e.methods;Bt.FunctionUtils.rewriteFn(n,"onShow",yn);Bt.FunctionUtils.rewriteFn(n,"onHide",In);Bt.FunctionUtils.rewriteFn(n,"onUnload",In);Bt.FunctionUtils.rewriteFn(n,"onLoad",vn);En(n);t(e)}catch(n){t(e)}}}catch(t){R().w("Component hook error")}}function On(t,e,n){["object","function"].indexOf(r(t))>-1?n():R().w("typeof ".concat(e," is not object cant watchExp."))}var wn={};var Cn,kn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){On(Page,"Page",An);On(Component,"Component",Tn);!function(){var t=this,e=B().ctx,n=te.getPlatformContext();try{if(n&&n.setNavigationBarTitle){var r=n.setNavigationBarTitle;Object.defineProperty(n,"setNavigationBarTitle",{get:function(){return function(n){var a=te.getCurrentPage(),o=a.route||a.is;n=P.isObject(n)?n:{};wn[o]=n.title;e[F()].globalTitleMap=wn;r.call(t,n)}}})}}catch(t){R().w(t)}}()}}]);return t}(),Mn=ne(Object.freeze({__proto__:null,default:kn})),xn=function(t){for(var e=t.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=t[r];return n},Nn=U.extend({callable:function(t){if(!T(t))throw new TypeError(t+" is not a function");return t},create:function(t){var e=new this;for(var n in t)e[n]=t[n];e.handlers=[];e.pubs={};return e},setHandlers:function(t){this.handlers=t},subscribe:function(t,e){this.callable(e);var n=this,r=(n.pubs||{})[t]||[];if(r)for(var a=0;a<r.length;a++){var o=r[a]();e.apply(n,o)}var i=n.handlers||[];t in i||(i[t]=[]);i[t].push(e);n.setHandlers(i);return n},unsubscribe:function(t,e){this.callable(e);try{var n=this.handlers[t];if(!n)return this;if("object"===r(n)&&n.length>0){for(var a=0;a<n.length;a++){e.toString()===n[a].toString()&&n.splice(a,1)}this.handlers[t]=n}else delete this.handlers[t]}catch(t){}return this},publish:function(t){var e=xn(arguments),n=this.handlers||[],r=n[t]?n[t].length:0;if(r>0)for(var a=0;a<r;a++){var o=n[t][a];T(o)&&o.apply(this,e)}return this},cachePubs:function(t){var e=this.pubs||{},n=xn(arguments);e[t]||(e[t]=[]);e[t].push((function(){return n}))}}),Dn=ne(Object.freeze({__proto__:null,default:Nn})),Rn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=K(F()),e="".concat(F(),"_pubsub");if(!t[e]){var n=Dn.default.create();t[e]=n}}}]);return t}(),Un=ne(Object.freeze({__proto__:null,default:Rn})),Ln={};function jn(){return Cn||function(){Cn=Ln||{};return Ln}()}function Bn(t,e){var n=K(F());Cn||(Cn={});if("aplus-inject-record-gokey"===t){!function(t){try{R().w(t)}catch(t){}}("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter");n.record("/inject.record.gokey","OTHER","")}Cn[t]=e;return!0}function Fn(t){Cn||(Cn={});return Cn[t]||""}function Vn(t,e){if(t&&e){var n,a=function(n){n.constructor===Array?function(n){try{var r="string"==typeof e?JSON.parse(e):e;o(t,n.concat(r))}catch(t){}}(n):function(n){try{var r="string"==typeof e?JSON.parse(e):e;o(t,Object.assign({},n,r))}catch(t){}}(n)},o=function(t,e){Kn(t,e)},i=Fn(t);if("aplus-exinfo"===t){o(t,P.assign(i,C(e)));n=!0}if("aplus-page-properties"===t){var s=e;if(i)for(var c in i)e[c]?s[c]=P.assign(i[c],e[c]):s[c]=i[c];o(t,s);n=!0}if(i)if("object"===r(i)){a(i);n=!0}else try{var u=JSON.parse(i);if("object"===r(u)){a(u);n=!0}}catch(t){}n||o(t,e)}}function Kn(t,e){var n,a,o="OVERWRITE",i=o;if("object"===r(t)){n=t.metaName;a=t.metaValue;i=t.mode||o}else{n=t;a=e}if(i!==o)return Vn(n,a);if(Bn(n,a)){var s=q("_$")||{};s.meta_info=jn();var c=H("_$",s),u=["setMetaInfo",n,a,{}];$(u);z(u);if(n===ft._ANONY_ID||n===ft._DEV_ID||n===ft._USER_ID)te.setStorageSync(n,a||"");else{!te.getStorageSync(ft._ANONY_ID)&&s.meta_info[ft._ANONY_ID]&&te.setStorageSync(ft._ANONY_ID,s.meta_info[ft._ANONY_ID]);!te.getStorageSync(ft._DEV_ID)&&s.meta_info[ft._DEV_ID]&&te.setStorageSync(ft._DEV_ID,s.meta_info[ft._DEV_ID]);!te.getStorageSync(ft._USER_ID)&&s.meta_info[ft._USER_ID]&&te.setStorageSync(ft._USER_ID,s.meta_info[ft._USER_ID])}return c}}var Gn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=this.options.context&&this.options.context.sdk_config,e=K(F()),n=e._$=e._$||{};n.is_terminal=!0;n.send_pv_count=0;n.spm={data:{}};n.meta_info=jn()||{};e.globalConfig=t.globalConfig;for(var r in t.metaInfo)Bn(r,t.metaInfo[r]);e._$=n;e.isInternational=function(){return!1}}}]);return t}(),qn=ne(Object.freeze({__proto__:null,default:Gn})),Hn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getLogConfig",value:function(){var t={},e=this.options.config.plugins,n=function(n){t[n]={plugins:e[n],context:{}};m(e[n],(function(e){t[n].context[e.name]=e.config||{}}))};for(var r in e)n(r);return t}},{key:"run",value:function(){this.options.context.logConfig=this.getLogConfig();this.options.context.logConfig.pageLoadTime=this.options.context.PAGE_LOAD_TIME}}]);return t}(),Yn=ne(Object.freeze({__proto__:null,default:Hn})),Qn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getMetaInfo",value:function(){return(q("_$")||{}).meta_info}},{key:"getAplusWaiting",value:function(){return(this.getMetaInfo()||{})["aplus-waiting"]}},{key:"run",value:function(t,e){var n=this.options.config||{},r=this.getAplusWaiting();if(r&&n.is_auto){r="".concat(this.getAplusWaiting());this.options.context.when_to_sendpv={aplusWaiting:r};switch(r){case ft._USER_ID:case ft._ANONY_ID:case"MAN":return"done";case"1":this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),6e3);return 6e3;default:var a=1*r;if("NaN"!=="".concat(a)){this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),a);return a}}}}}]);return t}(),$n=ne(Object.freeze({__proto__:null,default:Qn})),zn=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getMetaInfo",value:function(t){return((q("_$")||{}).meta_info||{})[t]}},{key:"getHostUrl",value:function(){var t=this.getMetaInfo(yt.TRACKDOMAIN)||this.getMetaInfo(yt.APLUS_PV_DOMAIN);if(Bt.checkDomain(t)){var e=te.getLogDomain();if(!e){R().tip_w("current miniapp framework is not supported!!");return""}return Bt.fixDomain(t)+e}}},{key:"run",value:function(){this.options.context.where_to_send.method="POST";var t=this.getHostUrl();if(!t||t.indexOf("https://")<0&&t.indexOf("http://")){R().w("current trackDomain invalid: ".concat(t));return"done"}this.options.context.where_to_send.url=t}}]);return t}(),Wn=ne(Object.freeze({__proto__:null,default:zn}));function Jn(t,e,n){return t?Bt.hash(encodeURIComponent(t)).substring(0,e):n}var Xn={getLogId:function(t,e){var n=function(t){var e,n="",r=!1;function a(t){return 1===t?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):2===t?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):"0"}for(;n.length<t;){e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(62*Math.random()),1);if(!r&&n.length<=2&&("g"===e.toLowerCase()||"l"===e.toLowerCase()))if(0===n.length&&"g"===e.toLowerCase()){if(Math.random()<.5){e=a(1);r=!0}}else if(1===n.length&&"l"===e.toLowerCase()&&"g"===n.charAt(0).toLowerCase()){e=a(2);r=!0}n+=e}return n}(8),r=n.substring(0,4),a=n.substring(0,6);return[Jn(t,4,r),Jn(e,4,r),a].join("")}},Zn=ft.SPM_CNT,tr=ft.SPM_URL,er=ft.SPM_PRE,nr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getCommonParams",value:function(){var t=K(F()),e=this.options.context||{},n=e.etag||{},r=e.userdata||{},a=q("_$")||{},o=a.spm||{},i=this.options.config||{},s=t.getMetaInfo("platformType")||te.getPlatformType(),c={_dev_id:t.getMetaInfo("_dev_id"),_anony_id:t.getMetaInfo(ft._ANONY_ID),_user_id:t.getMetaInfo(ft._USER_ID),_user_nick:t.getMetaInfo("_user_nick"),_session_id:t.getMetaInfo("_session_id"),uaid:"1"==="".concat(t.getMetaInfo("uaid"))?1:0},u=t._aplus_client||{},f=t.globalConfig||{},p="";try{var l=getCurrentPages(),g=l[l.length-1]||{};p=r.gokey&&r.gokey.currentPath||g.route||g.is;r.gokey.currentPath&&delete r.gokey.currentPath}catch(t){}var h=(new Date).getTime()+p,_=u.model+u.networkType+i.title+n.cna,d=(f.isDecodeUrl?"DC_":"")+Xn.getLogId(h,_),m=Bt.getAppKey();m||R().w("please set appKey in aplus metaInfo before sendPV!");var v=Object.assign({},{appKey:m,cache:d,cna:n.cna,etag:n,pre:a.page_referrer||"-",sdk_info:{jsver:f.script_name,skv:f.lver,customSdkId:t.getMetaInfo("customSdkId")||"",platformType:s.toLowerCase()},title:i.title||"",url:p,client:u,timeZone:Bt.getTimeZone(),gmkey:r.gmkey||"",method:this.options.context.where_to_send.method},c),y=c;o.spm_url&&(y[tr]=o.spm_url||"");o.spm_pre&&(y[er]=o.spm_pre||"");o.spm_cnt&&(y[Zn]=o.spm_cnt||"");y[ft.PVID]=t.pvid||"";v.sessionArgs=t.getMetaInfo("aplus-session-args");v.globalArgs=t.getMetaInfo("aplus-global-args");v.gokey=y;return v}},{key:"getPvParams",value:function(){var t=K(F()),e=this.getCommonParams();this.options.config.is_auto||(e.sdk_info.mansndlog=1);return Object.assign({},e,{event_code:ft.PV_CODE,logtype:"1",logkey:"/vx.gif",event_timestamp:t._$.send_pv_count>0?new Date:t.logConfig.pageLoadTime})}},{key:"getHjljParams",value:function(){var t=(this.options.context||{}).userdata||{},e={event_code:lt[t.gmkey]||t.gmkey,logkey:t.logkey,event_timestamp:new Date};return Object.assign({},this.getCommonParams(),e)}},{key:"run",value:function(){var t={};t="PV"===this.options.config.recordType?this.getPvParams():this.getHjljParams();this.options.context.what_to_send.logdata=t}}]);return t}(),rr=ne(Object.freeze({__proto__:null,default:nr})),ar=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=te.isTB(),e=K(F()),n=this.options.context.what_to_send.logdata||{},r=getCurrentPages(),a=r[r.length-1]||{};a&&!n.title&&(n.title=a.route||"");var o="-";if(r.length>1){var i=r[r.length-2]||{};o=(!t&&e.globalConfig.isAli?"https://".concat(n.client.appId,"_"):"")+(i.route||i.is||"-")}n.pre=o;n.sdk_info&&(n.sdk_info.windmill="1");this.options.context.what_to_send.logdata=n}}]);return t}(),or=ne(Object.freeze({__proto__:null,default:ar})),ir=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getUserdata",value:function(){var t=K(F()),e=this.options.config||{},n={};e&&!e.is_auto&&e.gokey&&("string"==typeof e.gokey?n=C(e.gokey):"object"===r(e.gokey)&&(n=e.gokey));var a=function(t){y.isArray(t)?t.forEach((function(t){n=Object.assign({},n,t)})):n=Object.assign({},n,t)};a(t.getMetaInfo("aplus-cpvdata"));var o=te.getCurrentPage(),i=o.route||o.is||"page",s=(t.getMetaInfo("aplus-page-properties")||{})[i];"object"===r(s)&&a(s);a((this.options.context||{}).userdata||{});return n}},{key:"updatePre",value:function(t){var e=this.options.config||{},n=q("_$")||{};if(e&&e.referrer){n.page_referrer=e.referrer;t.pre=e.referrer}H("_$",n);return t}},{key:"updateUrl",value:function(t){var e=this.options.config||{};e&&e.pageUrl&&(t.url=e.pageUrl);return t}},{key:"updateSpmUrl",value:function(t){var e=this.options.config||{},n=e[ft.SPM_URL]||e.spmUrl;O(n)||(t.gokey[ft.SPM_URL]=n);return t}},{key:"updateSpmPre",value:function(t){var e=this.options.config||{},n=e[ft.SPM_PRE]||e.spmPre;O(n)||(t.gokey[ft.SPM_PRE]=n);return t}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=Object.assign({},this.getUserdata(),t.userdata||{});t.gokey=Object.assign({},t.gokey,e);t=this.updatePre(t);t=this.updateUrl(t);t=this.updateSpmUrl(t);t=this.updateSpmPre(t);this.options.context.what_to_send.logdata=t;this.options.context.userdata=t.gokey}}]);return t}(),sr=ne(Object.freeze({__proto__:null,default:ir}));function cr(t,e){if(!be())try{var n=te.getPlatformContext();return P.isEmptyObject(n)?void 0:e===yt.APP_START||e===yt.APP_END}catch(t){}var r=Ee(),a=Ie(),o=Bt.LocalCfgUtils.getAutoTrackStatus();if(("string"==typeof t?w(x(t)):t||{}).auto_element){if(2===a||2===r)return;if(!r&&!o)return}if(function(t){var e=K(F()).getMetaInfo(yt.APLUS_EVENT_LIMITRATES);if(e&&e.length>0){var n=y.find(e,(function(e){return e.eventId===t}));return!n||Math.ceil(1e3*Math.random())<1e3*n.samplingRate}return!0}(e))return!0}var ur=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=q("_$")||{},e=this.options.context.can_to_sendpv||{},n=t.send_pv_count||0;if(!function(t){var e=be(),n=Pe(),r=Bt.LocalCfgUtils.localAutoPVDisabled(),a=!0;if(e){if(t)return!(2===n||!n&&r)}else a=!1;return a}((this.options.config||{}).track_type))return"done";e.flag="YES";this.options.context.can_to_sendpv=e;t.send_pv_count=++n;H("_$",t)}}]);return t}(),fr=ne(Object.freeze({__proto__:null,default:ur})),pr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"getUserData",value:function(){var t=K(F()),e=this.options.context||{},n=e.userdata||{},r=e.what_to_send.logdata.gokey;r=P.assign(r,C(n.gokey));r=P.assign(r,C(t.getMetaInfo("aplus-exinfo")||{}));var a=t.getMetaInfo("aplus-exdata");y.isArray(a)?a.forEach((function(t){r=P.assign(r,t)})):r=P.assign(r,a||{});return r}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=this.getUserData();"1010"===t.gmkey&&(t.arg1=e.duration||t.logkey);t.gokey=e;this.options.context.what_to_send.logdata=t}}]);return t}(),lr=ne(Object.freeze({__proto__:null,default:pr})),gr=U.extend({_send:function(t,e,n,a,o){"object"===r(e)&&"POST"===n?te.request(t,{method:n,data:e,dataType:"base64"},a,o):te.request("".concat(t,"?").concat(e),{method:n,dataType:"base64"},a,o);return t},_requestVTConfig:function(t,e,n){te.request(t,{method:"GET",dataType:"json"},e,n)},_requestRemoteConfig:function(t,e,n){te.request(t,{method:"GET",dataType:"json"},e,n)},_sendPV:function(t,e){var n=K(F());(t=t||{}).pageName&&n._setMetaInfo("".concat(yt.APLUS,"-pagename"),t.pageName);var r=new Z;t.recordType="PV";t.method||(t.method="GET");var a=n.logConfig.pv;r.run({plugins:a.plugins,context:P.cloneDeep(a.context)},{config:t,userdata:e||{},pubsubType:"pv",middlewareMessageKey:"mw_change_pv"});return!0},_combineRecord:function(t,e,n,a){var o=K(F()),i="EXP";if(!o.globalConfig.isAli||e!==i&&"CLK"!==e)R().w("only support EXP or CLK log to combile record!");else if(y.isArray(n)){a||(a="POST");var s=[],c="true";n.forEach((function(t){s.push({exargs:"object"===r(t.exargs)?t.exargs:{},scm:t.scm,spm:t.spm,aplusContentId:t.aplusContentId});"false"===t._aplus_sendtomy&&"true"===c&&(c="false")}));var u=[];u.push((e===i?"expdata=":"clkdata=")+JSON.stringify(s));u.push(e===i?"_is_auto_exp=1":"_is_auto_clk=1");u.push("_eventType=custom");u.push("_method=".concat(a));u.push("_pkgSize=".concat(n.length));"false"===c&&u.push("_aplus_sendtomy=false");o.record(t,e,u.join("&"),a)}else R().w("type of gokeys must be ArrayObject!")},_record:function(t,e,n,a,o){var i=K(F());!function(t,e){var n=Q();n&&r(n.subscribe)===Y&&n.subscribe(t,e)}("aplusInitContext",(function(r){if("complete"===r.status){n=function(t){var e=Fn("aplus-inject-record-gokey");return"function"==typeof e?e(t):t.gokey}({logkey:t,gmkey:e,gokey:n});t+="";var s=new Z,c=i.logConfig.hjlj;cr(n,t)&&s.run({plugins:c.plugins,context:P.cloneDeep(c.context)},{config:{recordType:"COMMON_HJLJ",method:a||"GET"},userdata:{logkey:t,gmkey:e,gokey:n},pubsubType:"hjlj",middlewareMessageKey:"mw_change_hjlj"},(function(){T(o)&&o()}))}}));return!0},getPageSPM:function(){var t=((K(F())._$||{}).spm||{}).data||{};return[t.a,t.b]},_setPageSPM:function(){var t,e,n={},a=arguments;if("object"===r(a[0])){n=a[0];t=a[1]}else{n.spmCnt=[a[0],a[1],"0","0"].join(".");t=a[2]}if(n.spmCnt||n.spmUrl||!Fn("pageConfig")){$(e=["setPageSPM",n]);z(e)}else{$(e=["clearPageSPM"]);z(e)}("function"==typeof t?t:function(){})(e)},_setMetaInfo:function(t,e){return Kn(t,e)},_appendMetaInfo:Vn,getMetaInfo:function(t){return Fn(t)},cloneDeep:P.cloneDeep,_setPageName:function(t,e){if(t){var n=e||gn.getCurrentPagePath(),r=P.cloneDeep(Fn("pageConfig")||{});r[n]=t;Vn("pageConfig",r)}else R().w("setPageName failed: pageName=".concat(t))},getPageName:function(t){return gn.getPageName(t)},_getElementSPM:function(t,e){if(t){var n=gn.getPageName()||"";if("string"!=typeof t){var r=t.dataset&&t.dataset.trackerParams||"",a=A.jsonStr2json(r);return[n,a.spmC,a.spmD].join(".")}var o,i=te.getPlatformContext(),s=Fn("aplus-auto-clk")||[],c=Fn("aplus-auto-exp")||[];try{var u;for(u=0;u<s.length;u++){var f=s[u];if(f.cssSelector===t){o=[f.spmB||n,f.spmC,f.spmD].join(".");break}}for(u=0;u<c.length;u++){var p=c[u];if(p.cssSelector===t){o=[p.spmB||n,p.spmC,p.spmD].join(".");break}}var l=i.createSelectorQuery().selectAll(t);"function"==typeof l.fields&&l.fields({dataset:!0,id:!0},(function(t){var n=[];if(t&&t.length>0){for(var r=1;r<=t.length;r++)n.push("".concat(o,"_").concat(r));e&&"function"==typeof e&&e(n)}})).exec()}catch(t){R().w("current miniapp platform does not support dom element query, errmsg: ",t)}}},_recordAppLink:function(t,e,n){if(!t.targetAppKey){R().w("send $$_app_link failed: targetAppKey is null");return!1}return K(F())._record("$$_app_link","OTHER",t,e,n)},_updatePageProperties:function(t,e){var n,r=e||gn.getCurrentPagePath(),a=K(F()).getMetaInfo(yt.PAGE_CONFIG);if(!P.isEmptyObject(t))if(a&&a[r]){a[r].properties=t;n=a}else{var o=Object.create(null);o[r]={properties:t};n=o}n&&Vn(yt.PAGE_CONFIG,n)},_reportUserInfo:function(t,e){var n={};t&&("string"==typeof t?n._user_email=t:R().w("user_email"));e&&("string"==typeof e?n._user_mobile=e:R().w("user_mobile"));if(Object.keys(n).length){K(F()).record("$$_user_profile","OTHER",n)}}});exports.run=gr;var hr={run:gr};var _r=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){!function(t){var e=K(F());if(!e._aplus_api){e._aplus_api={status:ft.COMPLETE};var n=hr.run.create({logConfig:t});for(var r in n)e[r]=n[r];G(F(),e);var a=[ft.SDK_READY,ft.COMPLETE];$(a);z(a)}}(this.options.context.logConfig)}}]);return t}(),dr=ne(Object.freeze({__proto__:null,default:_r})),mr="POST";function vr(t,e){var n="";try{var r=Number(t);n=parseFloat(r.toFixed(e))}catch(e){n=t}return n}var yr={pushEvent:function(t,e,n,r,a,o){var i=K(F()),s=n.props,c={},u={};if(e)for(var f in e)f.toLowerCase().match(/^data-/)?u[f.toLowerCase().replace(/^data-/,"").replace(/-/g,"")]=e[f]:u[f]=e[f];if(s&&y.isArray(s))for(var p=0;p<s.length;p++){var l=s[p].toLowerCase().replace(/^data-/,"").replace(/-/g,"");c[l]=u[l]}r&&"EXP"===t&&(c=Object.assign({},c,{_w:vr(r.width,2),_h:vr(r.height,2),_x:vr(r.x,2),_y:vr(r.y,2),_rate:vr(r.viewabilityRate||r.intersectionRatio,2),_viewability:"intersection"}));n._vt&&(c._vt=n._vt);var g=function(t,e,n,r){var a=K(F()).getMetaInfo;if("function"==typeof a){var o=a(t),i={};"function"==typeof o&&(i=o(e?P.cloneDeep(e):{},n,r));return D.query2obj(i)}return{}}("EXP"===t?"aplus-auto-exp-userfn":"aplus-auto-clk-userfn",r,n.cssSelector,a);g.spm||(g.spm=a&&a.b?a:void 0);var h,_=e.trackerParams||e["tracker-params"];if(_)try{var d=JSON.parse(_);delete(c=Object.assign(c,d)).trackerParams;delete c.trackerparams}catch(t){}h=Object.assign({is_auto:1},c,g,n.customArgs);if(o){var m=o.route;i.record(n.logkey,t,Object.assign({},h,{currentPath:m}),mr)}else i.record(n.logkey,t,h,mr)}};function Sr(t,e){var n=(q("_aplus_auto_exp")||{}).hashMap||{};for(var r in n)for(var a=n[r]||[],o=0;o<a.length;o++){var i=a[o]||{},s=i.expConfig||{};if(t.cssSelector===s.cssSelector){if(Bt.getHashKey({index:e},s)===i.hash_value)return P.cloneDeep(i.dataset)}}}function Ir(){var t=B().ctx,e=K(F()),n=V(),r=[],a=function(t){r=e.getMetaInfo("aplus-auto-clk");var n=gn.getPageName(),a=[];function o(e,n){y.isArray(e)&&a.push({config:n,elements:e});a.length===r.length&&function(t,e,n){var r,a=[];y.each(e,(function(e){for(var n=e.elements,r=e.config,i=0;i<n.length;i++){var s=n[i];if(o(t,s)){var c=i+1,u=s.dataset||Sr(r,c)||{},f={},p=A.jsonStr2json(u.trackerParams)||{};f.b=r.spmB;r.spmC?f.c=r.spmC:f.c=p.spmC?encodeURIComponent(p.spmC):"";r.spmD?f.d=c?"".concat(r.spmD,"_").concat(c):r.spmD:f.d=p.spmD?encodeURIComponent(p.spmD):"";a.push({dataset:u,config:r,element:s,spmData:f})}}}));1===a.length?r=a[0]:a.length>1&&(r=a.reduce((function(t,e){var n=t,r=t.element,a=e.element;a.top>=r.top&&a.right<=r.right&&a.bottom<=r.bottom&&a.left>=r.left&&(n=e);return n})));r&&yr.pushEvent("CLK",r.dataset,r.config,r.element,r.spmData,n);function o(t,e){var n={};t&&(t.changedTouches?n=t.changedTouches[0]:t.touches?n=t.touches[0]:t.detail&&(n=t.detail));var r=n.clientX||0,a=n.clientY||0,o=e.top,i=e.bottom;if(e.scrollTop){o+=e.scrollTop;i+=e.scrollTop}return e.left<r&&r<e.right&&o<a&&a<i}}(t.event,a,t.context)}y.isArray(r)&&r.forEach((function(t){N.isStartWith(t.cssSelector,".")||(t.cssSelector=".".concat(t.cssSelector));t.spmB||(t.spmB=n);var e=te.getPlatformContext().createSelectorQuery().selectAll(t.cssSelector);"function"==typeof e.fields?e.fields({id:!0,dataset:!0,rect:!0,scrollOffset:!0},(function(e){o(e,t)})).exec():e.boundingClientRect().exec((function(e){o(e,t)}))}))};t[n].push({action:ft.SUBSCRIBE,arguments:[ft.SDK_READY,function(t){"complete"===t&&(r=e.getMetaInfo("aplus-auto-clk"))}]});t[n].push({action:ft.SUBSCRIBE,arguments:["onAplusClk",function(t){"ready"===t.status&&a(t)}]})}var br=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){Ir()}}]);return t}(),Pr=ne(Object.freeze({__proto__:null,default:br}));function Er(t){var e=K(F());return e&&e.getMetaInfo?e.getMetaInfo(t):Ut.getMetaCnt(t)}var Ar=function(t){var e=t;try{var n=Er("aplus-auto-exp-visible");n&&(e=parseFloat(n));e<=0&&(e=t);return e}catch(n){return e=t}},Tr=Ar(.3);Ar("aplus-auto-exp-visible");Ar("aplus-auto-exp-window");!function(t){var e=t;try{var n=Er("aplus-auto-exp-duration"),r=parseInt(n,10);"NaN"!=="".concat(r)&&(e=r);return e}catch(t){return e}}(300);function Or(t){return function(t,e){var n,a=[],o=[];try{n=e||Er(t);var i=[];if(n&&"string"==typeof n)try{i=JSON.parse(n)}catch(t){i=JSON.parse(n.replace(/'/g,'"'))}else"object"===r(n)&&n.constructor===Array&&(i=n);if(i&&i.constructor===Array)for(var s=0;s<i.length;s++){var c=i[s]||{},u=c.logkey||"",f=c.tag?c.tag:"",p=c.filter,l=c.cssSelector;if(!u||!(l||f&&p))throw new Error("meta ".concat(t," config error, ").concat(JSON.stringify(c)));p="string"==typeof p?p.split("="):[];var g=f;p.length>=2?g+="[".concat(p.shift(),'="').concat(decodeURIComponent(p.join("")),'"]'):1===p.length&&p[0]&&(g+="[".concat(decodeURIComponent(p[0]),"]"));l&&(g+=l);c.elementSelector=g;if(y.indexOf(o,g)>-1)throw new Error("meta ".concat(t," config error, tag_filter_cssSelector ").concat(g," repeated"));o.push(g);a.push(c)}return a}catch(t){R().w(t);return a}}("aplus-auto-exp",t)||[]}var wr,Cr=[];function kr(t,e,n,r){wr&&!r||(wr=te.getPlatformContext());var a,o=(q("_aplus_auto_exp")||{}).hashMap||{};!function r(s){if(s<e.length){var c=e[s];a=0;Cr.forEach((function(t){t.subject[0]===c.cssSelector&&t.subject[1]===c.positionSelector&&(a=1)}));var u=[c.cssSelector,c.positionSelector];!function(t){var e=u[0];e&&!N.isStartWith(u[0],".")&&(e=".".concat(e));try{var n=wr.createSelectorQuery().selectAll(e);"function"==typeof n.fields?n.fields({dataset:!0,id:!0},(function(e){y.isArray(e)&&t({elements:e,type:"COMMON"})})).exec():R().w("current platform does not support auto exposure tracking!")}catch(t){R().w("current platform does not support auto exposure tracking! err = ",t)}}((function(f){if(0===a||0===n){var p=function(t){var e={thresholds:[Tr],initialRatio:0},n=!1;try{my&&(n=!0)}catch(t){}if(n){e.selectAll=!0;return wr.createIntersectionObserver(e)}e.observeAll=!0;return wr.createIntersectionObserver(t,e)}(t);p.subject=u;if(Cr.length>e.length-1){Cr.shift().disconnect()}Cr.push(p);y.each(f.elements,(function(t,e){t.index="".concat(e+1);(function(t,e){var n=Bt.getHashKey(t,e),r=t.index;o[e.logkey]&&o[e.logkey].forEach((function(t){if(t.hash_value===n&&t.index===r)return!0}));return!1})(t,c)||i(t,c)}));!function(t,e,n){var r=e.cssSelector;r&&!N.isStartWith(r,".")&&(r=".".concat(r));e.positionSelector?t.relativeTo(e.positionSelector).observe(r,(function(t){try{n(t,e)}catch(t){R().w("errorMessage: ",t)}})):t.relativeToViewport().observe(r,(function(t){try{n(t,e)}catch(t){R().w("errorMessage: ",t)}}))}(p,c,(function(t,e){hn.getIndexByRect(e.cssSelector,t.boundingClientRect,(function(n){var r=n+1;if(r){var a=P.cloneDeep(t);a.index="".concat(r);var o=P.cloneDeep(a.dataset);i({id:a.id,index:a.index,dataset:o},e);!function(t,e,n){var r=function(t,e,n){var r=(q("_aplus_auto_exp")||{}).hashMap||{},a=[];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))for(var i=r[o]||[],s=0;s<i.length;s++){var c=Bt.getHashKey(e,n),u=i[s]||{};if(0===u.status&&u.expConfig&&c===u.hash_value){var f=e.boundingClientRect||{};if(f.width&&f.height){u.dataset=e.dataset;u.x=f.left;u.y=f.top;u.width=f.width;u.height=f.height;u.size=f.width*f.height;var p=Tr;if(e.intersectionRatio>=p){u.exposureTime=t;u.status=1;a.push(u)}}}}return a}((new Date).getTime(),t,n);if(r&&r.length>0){var a=r[0],o={},i=A.jsonStr2json(e.trackerParams||{})||{},s=a.index;gn.getPageName()&&(o.b=gn.getPageName());n.spmC?o.c=n.spmC:o.c=i.spmC?encodeURIComponent(i.spmC):"";n.spmD?o.d=s?"".concat(n.spmD,"_").concat(s):n.spmD:o.d=i.spmD?encodeURIComponent(i.spmD):"";yr.pushEvent("EXP",e,n,Object.assign({},t,{x:a.x,y:a.y,width:a.width,height:a.height,hash_value:a.hash_value}),o)}}(a,o,c)}}))}))}r(++s)}))}}(0);function i(t,e){var n=Bt.getHashKey(t,e);try{var r=t.index;if(o[e.logkey]){var a=0;o[e.logkey].forEach((function(e){if(e.hash_value===n){a=1;t.id&&(e.id=t.id);t.dataset&&(e.dataset=t.dataset);t.status&&(e.status=t.status)}}));a||o[e.logkey].push({id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r})}else o[e.logkey]=[{id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r}]}catch(t){R().w("error === ",t)}}}function Mr(){for(var t=0;t<Cr.length;t++)Cr[t].disconnect();Cr=[];var e=(q("_aplus_auto_exp")||{}).hashMap||{};for(var n in e)delete e[n]}var xr={};var Nr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){!function(){var t=B().ctx,e=0,n=0,r=K(F()),a=V();if(!r._aplus_auto_exp){r._aplus_auto_exp={hashMap:{}};var o=[];t[a].push({action:ft.SUBSCRIBE,arguments:["onShow",function(t){if("ready"===t.status){i(t.context,1,ft.SUBSCRIBE);if(0===e){s(t.context,1);e=1}else s(t.context,0);try{var n=te.getCurrentPage(),r=n.route||n.is;xr[r]=r}catch(t){}}}]});t[a].push({action:ft.SUBSCRIBE,arguments:["onAplusTouch",function(t){if("ready"===t.status)if(0===n){n=1;s(t.context,1)}else c(t)}]});t[a].push({action:ft.SUBSCRIBE,arguments:["onPageDataChanged",function(t){setTimeout((function(){c(t)}),200)}]});t[a].push({action:ft.SUBSCRIBE,arguments:["onHide",function(t){if("ready"===t.status){xr={};e=0;n=0;i(t.context,1,ft.UNSUBSCRIBE);Mr()}}]});t[a].push({action:ft.SUBSCRIBE,arguments:["onUnload",function(t){if("ready"===t.status){xr={};Mr()}}]})}function i(e,n,r){t[a].push({action:r,arguments:["setMetaInfo",function(t,r){if("aplus-auto-exp"===t){var a=Or(r);if(JSON.stringify(a)===JSON.stringify(o))return;o=a;r&&o&&o.length>0&&kr(e,o,n)}}]})}function s(t,e){o=r.getMetaInfo("aplus-auto-exp");setTimeout((function(){kr(t,o,e)}),0)}function c(t){try{var e=te.getCurrentPage(),n=e.route||e.is,r=xr[n],a=JSON.stringify(t.data);if(r!==a){xr[n]=a;s(t.context,0)}}catch(t){}}}()}}]);return t}(),Dr=ne(Object.freeze({__proto__:null,default:Nr})),Rr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"pushQueue",value:function(t,e){K(V()).push({action:"".concat(F(),".").concat(t),arguments:e})}},{key:"run",value:function(){var t=this,e=K(F());m(pt,(function(n){e[n]=function(){var e=[];m(arguments,(function(t){e.push(t)}));var r="enter"===n?"_sendPV":"_".concat(n);t.pushQueue(r,e)}}))}}]);return t}(),Ur=ne(Object.freeze({__proto__:null,default:Rr})),Lr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"_getNetworkType",value:function(t){var e=te.getPlatformContext();e.getNetworkType?e.getNetworkType({success:function(e){t(e?e.networkType:"")}}):t("")}},{key:"_getSystemInfo",value:function(t){var e=this,n={},r=e.SYSTEM_INFO||{};if(r&&r.version)t(e.SYSTEM_INFO);else try{te.getPlatformContext().getSystemInfo({complete:function(r){r&&r.version?e._getNetworkType((function(n){r.networkType=n;e.SYSTEM_INFO=r;t(r)})):e._getNetworkType((function(e){n.networkType=e;t(n)}))}})}catch(e){t(n)}}},{key:"_getAccountInfoSync",value:function(){var t={};try{var e=te.getPlatformContext();if(e.getAccountInfoSync&&e.canIUse("getAccountInfoSync")){var n=e.getAccountInfoSync(),r=n.miniProgram||{},a=n.plugin||{};t.appId=r.appId;t.appVersion=r.version||r.envVersion;t.pluginAppId=a.appId;t.pluginAppVersion=a.version}else if(e.getAppIdSync&&e.canIUse("getAppIdSync")){var o=e.getAppIdSync()||{};t.appId=o.appId||""}}catch(t){}return t}},{key:"run",value:function(t,e){var n=this;this._getSystemInfo((function(t){t.userAgent="-";t.os=t.platform?t.platform.toLocaleUpperCase():"";t.os_version=t.system?t.system:"";t.access=t.brand?t.brand:"";var r="";t.host&&"string"==typeof t.host.env&&(r=t.host.env);t.host=r;var a=n._getAccountInfoSync(),o=Object.assign({},t,a);K(F())._aplus_client=o;e()}));return 2e3}}]);return t}(),jr=ne(Object.freeze({__proto__:null,default:Lr})),Br=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.queueName,e=B(),n=ge(e[t]||[],"metaQueue");e[t]=n.queue;ae(n.formatQueue,this.options.config)}}]);return t}(),Fr=ne(Object.freeze({__proto__:null,default:Br})),Vr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"enableSDK",value:function(t){B().ctx[V()].push({action:ft.SDK_SET_META_INFO,arguments:["_hold",t?"START":"BLOCK"]})}},{key:"emptyAnonyID",value:function(){B().ctx[V()].push({action:ft.SDK_SET_META_INFO,arguments:[ft._ANONY_ID,""]})}},{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo,e=K(F()),n=K(V()),r=t[yt.AUTO_GET_OPENID],a=te.getPlatformContext(),o=e&&e.getMetaInfo&&e.getMetaInfo(ft._ANONY_ID);if(r&&!o){var i=this;i.enableSDK(!1);var s=te.getPlatformType();try{if("wx"===s){var c=a.getAccountInfoSync().miniProgram.appId,u=a.getStorageSync&&a.getStorageSync(ft._ANONY_ID),f=a.getStorageSync&&a.getStorageSync(ft._DEV_ID);if(u){n.push({action:ft.SDK_SET_META_INFO,arguments:[ft._ANONY_ID,u]});n.push({action:ft.SDK_SET_META_INFO,arguments:[ft._DEV_ID,f]});i.enableSDK(!0)}else{var p=t.appKey||Bt.getAppKey();a.login({success:function(r){if(r.code){var a=t[yt.APLUS_PV_DOMAIN]||t[yt.TRACKDOMAIN],o="".concat(a,"/mp/get_openid");te.request(o,{method:"POST",dataType:"json",data:{appkey:p,code:r.code,appid:c,platform:s}},(function(t){if(t&&t.data&&200===t.data.code){var r=t.data.data;me().set(ft._ANONY_ID,r.od);me().set(ft._DEV_ID,r.ud);e.od=r.od;n.push({action:ft.SDK_SET_META_INFO,arguments:[ft._ANONY_ID,r.od]});n.push({action:ft.SDK_SET_META_INFO,arguments:[ft._DEV_ID,r.ud]});i.enableSDK(!0)}else{R().w("auto get openid failed errMsg:",t.data.message);i.emptyAnonyID();i.enableSDK(!0)}}),(function(t){R().w("auto get openid failed, errmsg = ",t&&t.message);i.emptyAnonyID();i.enableSDK(!0)}))}else{R().w("auto get openid failed");i.emptyAnonyID();i.enableSDK(!0)}},fail:function(){R().w("wechat login failed");i.emptyAnonyID();i.enableSDK(!0)}})}}else R().w("current miniapp platform:".concat(s," not support autoGetOpenid, please setMetaInfo _anony_id by yourself!"))}catch(t){R().w("get openid failed, errmsg = ",t);i.emptyAnonyID();i.enableSDK(!0)}}else R().w("auto get openid setting is",r?"true":"false")}}]);return t}(),Kr=ne(Object.freeze({__proto__:null,default:Vr}));var Gr={catchException:function(t,e){var n=t;"object"===r(e)&&e.message&&(n="".concat(n,"_").concat(e.message));Ot.pushIntoGoldlogQueue("".concat(F(),"._aplus_cplugin_m.do_tracker_jserror"),[{message:n,error:JSON.stringify(e),filename:t}])}},qr={lsMinivtConfigKey:"APLUS_MINI_CONFIG",getMiniVtTplCdnPath:function(){var t=K(F()).getMetaInfo("aplus-track-config-id"),e=t&&t.turnon,n=t&&t.value;return"1"===e&&n?n:""},getVtConfigPath:function(){var t,e=this.getMiniVtTplCdnPath(),n=[],r=Bt.getAppKey();r&&(t=r);t&&(n=t.split("."));2===n.length?this.originSpm={spmA:n[0],spmB:n[1]}:1===n.length&&(this.originSpm.spmA=n[0]);return e||(2===n.length?n.join("_"):1===n.length?n[0]:void 0)},fetchFromLS:function(t){this.cdnpath||(this.cdnpath=t||this.getMiniVtTplCdnPath());var e=te.getPlatformContext();return decodeURIComponent(e.getStorageSync("".concat(this.lsMinivtConfigKey,"-").concat(t)))||{}},setConfigIntoLs:function(t){this.cdnpath||(this.cdnpath=this.getVtConfigPath());te.getPlatformContext().setStorageSync("".concat(this.lsMinivtConfigKey,"-").concat(this.cdnpath),encodeURIComponent(JSON.stringify(t)))}},Hr="MiniVtConfigBack",Yr=ft.PUBLISH,Qr=U.extend(P.assign(qr,{pathname:"",pageConfig:{},originSpm:{spmA:"",spmB:""},updateCfgLs:function(){var t=this;setTimeout((function(){t.fetchFromCdn()}),1e3)},fetchFromCdn:function(){var t=this,e=K(F()),n=e.getMetaInfo("aplus-vt-cfg-url");if(n){var a=(new Date).getTime();e.requestVTConfig(n,(function(n){var o=n.data;e._minicfg_load=(new Date).getTime()-a;if(o)try{e._aplus_vt_cfg="object"===r(o)?o:JSON.parse(o);e._aplus_vt_cfg.points&&y.each(e._aplus_vt_cfg.points,(function(t){t.selector=decodeURIComponent(t.selector)}));t.setConfigIntoLs(e._aplus_vt_cfg)}catch(t){e._aplus_vt_cfg={enabled:!1}}Ot.pushIntoGoldlogQueue(Yr,[Hr,{pageConfig:e._aplus_vt_cfg,enable:0}])}),(function(t){e._aplus_vt_cfg&&e._aplus_vt_cfg.enabled&&Ot.pushIntoGoldlogQueue(Yr,[Hr,{pageConfig:e._aplus_vt_cfg,enable:0}]);Gr.catchException("getTrackerCfg",t,{msg:n})}),{timeout:5e3})}},getMiniVtData:function(t,e,n){var r=K(F());r._minicfg_load=0;if(t){var a=this.fetchFromLS(t);if("string"==typeof a)try{a=JSON.parse(a)}catch(t){a={}}a&&a.enabled&&(r._aplus_vt_cfg=a);n?this.fetchFromCdn(t,e):Ot.pushIntoGoldlogQueue(Yr,[Hr,{pageConfig:a,enable:0}])}},syncMiniVtData:function(){var t=this.getVtConfigPath();this.getMiniVtData(t,"",!0)},init:function(){var t=this,e=ft.SUBSCRIBE;Ot.pushIntoGoldlogQueue(e,[Hr,function(e){e.enable||(t.pageConfig=e.pageConfig);Ot.pushIntoGoldlogQueue(Yr,["MiniVtConfigFormat",{pageConfig:t.pageConfig,originSpm:t.originSpm}]);!e.enable&&t.setConfigIntoLs(t.pageConfig)}]);t.syncMiniVtData()},run:function(){this.init();return this}}));function $r(t,e){t=y.isArray(t)?t:[];e=y.isArray(e)?e:[];return[].concat(e,t).filter((function(t,e,n){return function(t,e){for(var n=-1,r=0;r<e.length;r++){var a=e[r];if(a.cssSelector===t.cssSelector&&a.logkey===t.logkey){n=r;break}}return n}(t,n)===e}))}function zr(t){return y.isArray(t)?t.filter((function(t){return void 0===t._vt})):[]}function Wr(t){return/^[.#]/.test(t)?t:t?".".concat(t):""}function Jr(){var t=K(F()),e=t._aplus_vt_cfg||t._aplus_tracking_cfg;if(e&&e.pages){var n=function(t){var e=te.getCurrentPage(),n=t||e.route,a=K(F()),o=a._aplus_vt_cfg||a._aplus_tracking_cfg,i=[],s=[];o&&o.pages&&y.each(o.pages,(function(t){a.setPageName({pageName:t.spmB,extraParams:t.extraParams},t.matchUrl);if(t.matchUrl===n){y.each(o.points,(function(e){t.spmB===e.spmB&&("exposure"===e.trackerType?i.push({cssSelector:Wr(e.selector),positionSelector:e.positionSelector,logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}):s.push({cssSelector:Wr(e.selector),logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}))}));o.common_exdata&&"object"===r(o.common_exdata)&&a.setMetaInfo("aplus-exdata",o.common_exdata);o.common_pvdata&&"object"===r(o.common_pvdata)&&a.setMetaInfo("aplus-cpvdata",o.common_pvdata)}}));return{EXP:i,CLK:s}}(),a=zr(t.getMetaInfo("aplus-auto-exp"));t.setMetaInfo("aplus-auto-exp",$r(a,n.EXP));var o=zr(t.getMetaInfo("aplus-auto-clk"));t.setMetaInfo("aplus-auto-clk",$r(o,n.CLK))}}function Xr(){var t,e,n,r=B().ctx,a=K(F()),o="".concat(F(),"_pubsub"),i=V(),s=!1,c={ts:Date.now()},u={onPullDownRefresh:0,onShareTimeline:0,onReachBottom:0,onShareAppMessage:0,onClick:0};function f(){var a=arguments.length>0&&arguments[0]?arguments[0]:"",o=arguments.length>1&&arguments[1]?arguments[1]:"",f=te.getCurrentPage(),p=o||f.route||f.is;switch(a){case"onPullDownRefresh":u.onPullDownRefresh+=1;r[i].push({action:St.record,arguments:[e.logkey||"$$_pull_down_refresh","CLK",{event:a,page_name:gn.getPageName()||p,count:u.onPullDownRefresh,is_auto:1}]});break;case"onReachBottom":u.onReachBottom+=1;r[i].push({action:St.record,arguments:[t.logkey||"$$_reach_bottom","CLK",{event:a,page_name:gn.getPageName()||p,count:u.onReachBottom,is_auto:1}]});break;case"onShareAppMessage":u.onShareAppMessage+=1;r[i].push({action:St.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:gn.getPageName()||p,count:u.onShareAppMessage,share_type:1,is_auto:1}]});break;case"onShareTimeline":u.onShareTimeline+=1;r[i].push({action:St.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:gn.getPageName()||p,count:u.onShareTimeline,share_type:0,is_auto:1}]});break;case"onPageShow":if(p&&!s){(c={path:p}).ts=Date.now();s=!0}break;case"onPageHide":if(s){var l=Date.now()-c.ts||0,g=te.getReferrerPage().route||te.getReferrerPage().is||"-",h=gn.getPageProperties(c.path)||{},_=P.assign(h,{duration:l,path:c.path,page_name:h.page_name||gn.getPageName()||c.path,page_start:c.ts,isMini:!0,_page_auto_id:yt.PAGE_END,_page_auto_pv:!0,referrer:g});gn.skipPage(c.path)||function(t){r[i].push({action:St.sendPV,arguments:[{is_auto:!0,track_type:"1"},t]})}(_);c=null;s=!1}}}r[i].push({action:ft.SUBSCRIBE,arguments:[ft.SDK_READY,function(r){"complete"===r&&function(){t=a.getMetaInfo("rb_config");e=a.getMetaInfo("pdr_config");n=a.getMetaInfo("share_config")}()}]});a[o].subscribe("onLoad",(function(t){if("ready"===t.status)try{var e=gn.getVTRealtimeCode();if(e){!function(t,e){if(t&&e)try{var n=a.getMetaInfo("aplus-api-host"),r=n.match(/[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/);if(r&&r[0]){var o=ft.HTTPS;/(\d+\.){3,}\d+/.test(r[0])&&(o="http:");var i="".concat(o,"//").concat(n,"/vt/loadTransferConfig?code=").concat(t,"&appInfoId=").concat(e);te.request(i,{},(function(t){try{var e=t.data&&t.data.data&&t.data.data.config||"",n=t.data&&t.data.data&&t.data.data.debugId||"";n&&a.appendMetaInfo("aplus-global-args",{debugId:n});var r=Date.now();a._minicfg_load=Date.now()-r;if(e){a._aplus_vt_cfg=JSON.parse(e)||{};Jr()}}catch(t){R().w("fetch real-time visualization verification failed, err msg:".concat(t))}}))}}catch(t){}}(e,a.getMetaInfo("appInfoId"))}else a.getMetaInfo("aplus-vt-cfg-url")&&Jr()}catch(t){R().w("fetch real-time visualization verification failed, errmsg:".concat(t))}}));a[o].subscribe("onShow",(function(t){if("ready"===t.status){!a.getMetaInfo("aplus-disable-apv")&&f("onPageShow",t.route)}}));a[o].subscribe("onHide",(function(t){if("ready"===t.status){!a.getMetaInfo("aplus-disable-apv")&&f("onPageHide",t.route)}}));a[o].subscribe("onPullDownRefresh",(function(t){"ready"===t.status&&f("onPullDownRefresh")}));a[o].subscribe("onReachBottom",(function(t){"ready"===t.status&&f("onReachBottom")}));a[o].subscribe("onShareAppMessage",(function(t){"ready"===t.status&&f("onShareAppMessage")}));a[o].subscribe("onShareTimeline",(function(t){"ready"===t.status&&f("onShareTimeline")}));a.getMetaInfo("aplus-vt-cfg-url")&&Ot.pushIntoGoldlogQueue(ft.SUBSCRIBE,["MiniVtConfigFormat",function(t){var e=t.pageConfig;e&&e.enabled&&(a._aplus_vt_cfg=e)}])}var Zr=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=K(F());Xr();if(!t._aplus_aleady_load_minivt){t._aplus_aleady_load_minivt=1;Qr.create().run()}}}]);return t}(),ta=ne(Object.freeze({__proto__:null,default:Zr}));function ea(t,e,n){if(Bt.checkEvent(t,e)){var a=function(t,e){if("string"!=typeof t||!t){R().w("event logkey is invalid, id =",t||"'' event properties = ",A.stringfy(e.cusp));return null}var n=Object.create(null),a=Date.now();n.id=t;e&&e.ts||(n.ts=a);e&&e.uuid||(n.uuid=Bt.getUUID());if("object"===r(e))for(var o in e)({}).hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,e);a.rank=Bt.RankUtils.rank();a&&a.id===yt.APP_END&&(a.amount=a.rank);R().i("event: ",t,e);ye().addEvent(a);var o=K(V()),i=K(F()),s=yt.MAX_QUEUE_COUNT,c=i.getMetaInfo("max-queue-count");E.isNumber(c)&&!isNaN(parseInt(c,10))&&(s=parseInt(c,10));var u=i.getMetaInfo(ft._ANONY_ID);(t===yt.APP_END||ye().getEkvsLen()>=s)&&(n?u?nn.prepare(Pt,{noCache:!1}):o.push({action:ft.SUBSCRIBE,arguments:[ft.SET_META_INFO,function(t){t===ft._ANONY_ID&&nn.prepare(Pt,{noCache:!1})}]}):nn.prepare(Pt,{noCache:!1}))}}var na=U.extend({subscribeLogs:function(t,e){Ot.pushIntoGoldlogQueue(ft.SUBSCRIBE,[t,function(t){t.status===ft.COMPLETE&&e(t)}])},getLogicSymbol:function(){return"ALI"===this.format?"&":"||"},handlerMiddleware:function(){},watchLOG:function(){var t=this;t.subscribeLogs(ft.MW_CHANGE_PV,(function(e){t.handlerMiddleware(e,"pv")}));t.subscribeLogs(ft.MW_CHANGE_HJLJ,(function(e){t.handlerMiddleware(e,F())}))},run:function(){this.watchLOG()}}).extend({handlerMiddleware:function(t){var e,n,r=this.metaInfo&&this.metaInfo.autoGetOpenid,a=B().ctx,o=F(),i=t&&t.userdata&&t.userdata.logkey,s=a[o].getMetaInfo(yt.APLUS_PRESET_EVENTS_DISABLED);if(!(s&&y.isArray(s)&&i&&i.indexOf("$$_")>-1&&-1!==s.indexOf(i))){var c,u=t&&t.userdata&&t.userdata.gmkey,f=t&&t.what_to_send&&t.what_to_send.logdata&&t.what_to_send.logdata||{},p=a[o].getMetaInfo(yt.GLOBAL_PROPERTY);if("CLK"===u||"EXP"===u||"OTHER"===u||i===yt.APP_START||i===yt.APP_END){e=P.cloneDeep(t&&t.userdata&&t.userdata.gokey)||{};n=f.gokey||{};var l={};if("$$_share"===i){l.refer_page=f.url;l.share_type=e.share_type}n.scene&&(l.scene="".concat(te.getPlatformType(),"_").concat(n.scene));if(n.targetAppKey){l.targetAppKey=e.targetAppKey;delete e.targetAppKey}c=e.page_name||gn.getPageName(f.url)||f.url||"";l.page_name=c;l.url=f.url||"";l.ref_url="-"!==f.pre?f.pre:"";l.ref_page_name=gn.getPrePageName(gn.getPrePagePath(l.ref_url))||gn.getPrePagePath(l.ref_url);if(e.page_name||e["data-pagename"]){delete e.page_name;delete e["data-pagename"]}P.isEmptyObject(p)||(l.gp=p);if(e.spm){l["spm-cnt"]=[encodeURIComponent(c),e.spm.c,e.spm.d].filter((function(t){return!!t})).join(".");delete e.spm}if(e.page_title){l.page_title=e.page_title;delete e.page_title}else l.page_title=n._page_title||gn.getPageTitle(f.url)||"";if(e.is_auto){l.is_auto=e.is_auto;l.track_type="1";delete e.is_auto;f.event_code&&(l.event_type_id=f.event_code)}else{l.is_auto=0;l.track_type="0"}ea(i,i===yt.APP_START||i===yt.APP_END?P.assign(l,e):P.assign(l,{cusp:e}),r)}else if("2001"===f.event_code){var g={},h=yt.PAGE_START;c=(n=P.cloneDeep(f.gokey)||{}).page_name||gn.getPageName(f.url)||f.url||"";g.r=f.arg1||f.logkey||"-";g.page_name=c;if(n._page_auto_pv){g.is_auto=1;g.url=n.path||"";g.ref_url="-"!==n.referrer?n.referrer:"";g.track_type="1";delete n._page_auto_pv;delete n.referrer;delete n.path;delete n.page_name}else{g.is_auto=0;g.url=f.url||"";g.ref_url="-"!==f.pre?f.pre:"";g.track_type="0"}if(n.duration){g.duration=n.duration;delete n.duration}P.isEmptyObject(p)||(g.gp=p);n.scene&&(g.scene="".concat(te.getPlatformType(),"_").concat(n.scene));n=Bt.deleteInfo(n,["_anony_id","_dev_id","_session_id","_user_id","_user_nick","uaid","pvid","scene"]);g["spm-cnt"]=encodeURIComponent(c);if(n._page_auto_id){h=n._page_auto_id;delete n._page_auto_id}if(n.page_start){g.page_start=n.page_start;delete n.page_start}if(n.page_title){g.page_title=n.page_title;delete n.page_title}else g.page_title=n._page_title||gn.getPageTitle(f.url)||"";delete n._page_title;g.url=gn.getFullPath(g.url);g.ref_url=gn.getFullPath(g.ref_url);g.ref_page_name=gn.getPrePageName(gn.getPrePagePath(g.ref_url))||gn.getPrePagePath(g.ref_url);ea(h,P.assign(g,{cusp:n}),r)}}},run:function(){this.watchLOG()}}),ra=function(){function t(e){i(this,t);this.options=e}c(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo;na.create({metaInfo:t}).run(this.options)}}]);return t}(),aa={apiName:"aplus",queueName:"aplus_queue",metaInfo:{sdk_version:re,trackDomain:"",appKey:"",sdkId:"qt_mini","aplus-cpvdata":{},"aplus-exdata":{},"aplus-globaldata":{},"aplus-mmstat-timeout":"10000","aplus-disable-autoevent":!1,"aplus-disable-apv":!1,"aplus-device-enable":!0,"aplus-request-timeout":3e3,"aplus-mini-requests-limit":1},globalConfig:{ETAG_STORAGE_KEY:"__ETAG__CNA__ID__",script_name:"qt_mini.js",lver:re},plugins:[{name:"aplus_queue",path:de},{name:"inject_app_um",path:un},{name:"inject_page_um",path:Mn},{name:"pubsub",path:Un},{name:"aplus_meta_inject",path:qn},{name:"aplus_log_inject",path:Yn,deps:["aplus_meta_inject"],config:{plugins:{pv:[{name:"when_to_sendpv",path:$n,config:{aplusWaiting:""}},{name:"where_to_send",path:Wn},{name:"what_to_send",path:rr},{name:"miniapp_data",path:or},{name:"what_to_sendpv_userdata",path:sr,deps:["what_to_send"]},{name:"can_to_sendpv",path:fr}],hjlj:[{name:"where_to_send",path:Wn},{name:"what_to_send",path:rr,deps:[]},{name:"miniapp_data",path:or},{name:"what_to_hjlj_userdata",path:lr}]}}},{name:"aplus_api",path:dr,deps:["aplus_log_inject","aplus_meta_inject"]},{name:"aplus_ac",path:Pr,deps:["inject_page_um"]},{name:"aplus_ae",path:Dr,deps:["inject_page_um"]},{name:"open_api",path:Ur},{name:"aplus_client",path:jr},{name:"meta_queue",path:Fr},{name:"auto_openid",enable:!0,path:Kr,config:{},deps:["aplus_meta_inject"]},{name:"auto_tracker_um",path:ta,deps:["inject_page_um"]},{name:"aplus_mini_report_um",path:ne(Object.freeze({__proto__:null,default:ra}))}]};function oa(t){return e="QuickTracking SDK INIT SUCCESS!",ee(t,aa,(function(){R().v(e||"QT SDK INIT SUCCESS!")}));var e}export{oa as default,oa as initQTSDK};
