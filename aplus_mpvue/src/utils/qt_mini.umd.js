/**!
   * qt_mini_v2.1.7
   * generated by QuickTracking
   * 2023-11-07 09:05:43
  */
t=this,e=function(t){"use strict";function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function r(){r=function(){return e};var t,e={},n=Object.prototype,a=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var a=e&&e.prototype instanceof v?e:v,i=Object.create(a.prototype),s=new M(r||[]);return o(i,"_invoke",{value:O(t,n,s)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var g="suspendedStart",h="suspendedYield",_="executing",d="completed",m={};function v(){}function y(){}function S(){}var I={};f(I,s,(function(){return this}));var b=Object.getPrototypeOf,P=b&&b(b(x([])));P&&P!==n&&a.call(P,s)&&(I=P);var E=S.prototype=v.prototype=Object.create(I);function A(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,o,i,s){var c=l(t[r],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var r;o(this,"_invoke",{value:function(t,a){function o(){return new e((function(e,r){n(t,a,e,r)}))}return r=r?r.then(o,o):o()}})}function O(e,n,r){var a=g;return function(o,i){if(a===_)throw new Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=w(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===g)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var u=l(e,n,r);if("normal"===u.type){if(a=r.done?d:h,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=d,r.method="throw",r.arg=u.arg)}}}function w(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=l(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function x(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=S,o(E,"constructor",{value:S,configurable:!0}),o(S,"constructor",{value:y,configurable:!0}),y.displayName=f(S,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},A(T.prototype),f(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new T(p(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(E),f(E,u,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=x,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,c,"next",t)}function c(t){o(i,r,a,s,c,"throw",t)}s(void 0)}))}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,m(r.key),r)}}function u(t,e,n){e&&c(t.prototype,e);n&&c(t,n);Object.defineProperty(t,"prototype",{writable:!1});return t}function f(t,e,n){(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&g(t,e)}function l(t){l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return l(t)}function g(t,e){g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return g(t,e)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return!0}catch(t){return!1}}();return function(){var n,r=l(t);if(e){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _(this,n)}}function m(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function v(t,e){if(P(t)&&void 0===t.length)for(var n in t)t.hasOwnProperty(n)&&e(n,t[n],t);else{var r,a=t.length;for(r=0;r<a&&"break"!==e(t[r],r);r++);}}function y(t){return Array.isArray?Array.isArray(t):/Array/.test(Object.prototype.toString.call(t))}var S={isArray:y,indexOf:function(t,e){var n=-1;try{n=t.indexOf(e)}catch(a){for(var r=0;r<t.length;r++)t[r]===e&&(n=r)}finally{return n}},itemMatch:function(t,e){var n=!1;try{if(!this.isArray(t))return n;n=t.some((function(t){return t&&t.length>0&&-1!==e.indexOf(t)}))}catch(a){for(var r=0;r<t.length;r++)if(-1!==e.indexOf(t[r])){n=!0;break}}return n},find:function(t,e){try{return t.find(e)}catch(r){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}},flat:function t(e){var n=[];if(y(e))for(var r=0;r<e.length;r++){var a=e[r];if(y(a)){e[r]=t(a);n=n.concat(e[r])}else n.push(a)}return n},assign:I,some:function(t,e){var n,r=t.length;for(n=0;n<r;n++)if(e(t[n]))return!0;return!1},each:v};function I(t,e){return"function"!=typeof Object.assign?function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}(t,e):Object.assign({},t,e)}function b(t){var e,n=Array.isArray(t)?[]:{};if("object"===a(t)){if(JSON&&JSON.parse){e=JSON.stringify(t);n=JSON.parse(e)}else for(var r in t)n[r]="object"===a(t[r])?b(t[r]):t[r];return n}}function P(t){if("object"!==a(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var E={isObject:P,assign:I,cloneDeep:b,isEmptyObject:function(t){try{if(!t)return!0;if("function"==typeof Object.keys&&0===Object.keys(t).length)return!0;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}catch(t){return!1}},each:v,eachMap:function(t,e){if(Object&&Object.keys)for(var n=Object.keys(t),r=n.length,a=0;a<r;a++){var o=n[a];e(o,t[o])}else for(var i in t)e(i,t[i])},deleteKeys:function(t,e){v(e,(function(e){delete t[e]}));return t}},A={isNumber:function(t){return"number"==typeof t},isNaN:function t(e){return t?t(e):e!=e}},T={stringfy:function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},parse:function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},jsonStr2json:function(t){if(!t||"string"!=typeof t)return{};for(var e=t.replace(/['"{}]+/g,"").split(","),n=[],r=0;r<e.length;r++)n.push(e[r].split(":"));return C(n)}};function O(t){return"function"==typeof t}function w(t){return void 0===t}function C(t){var e,n,r,a={},o=t.length;for(r=0;r<o;r++){e=t[r][0]&&t[r][0].trim();n=t[r][1];a[e]=n}return a}function k(t){if("object"===a(t))return t;var e={};if(!t||"string"!=typeof t)return e;for(var n=t.split("&"),r=0;r<n.length;r++){var o=n[r],i=o.indexOf("="),s=o.split("="),c=o.length;if(2===s.length)e[s[0]]=s[1]||"";else if(i>0){var u=o.slice(0,i),f=o.slice(i+1,c)||"";e[u]=f}else e[s[0]]=""}return e}var M="::-plain-::";function x(t,e){var n,r,o,i=[];for(n in t)if(n&&t.hasOwnProperty(n)){o="object"===a(t[n])?r=""+this.obj2queryStr(t[n]):n+"="+(r=""+t[n]);e?i.push(o):i.push(0===n.indexOf(M)?r:o)}return i.join("&")}function N(t){for(var e,n=t.split("&"),r=0,a=n.length,o=[];r<a;r++){e=n[r].split("=");o.push([e.shift(),e.join("=")])}return o}var D={isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isStartWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&0===t.indexOf(e)},isEndWith:function(t,e){if(String.prototype.endsWith)return t.endsWith(e);var n=t.length,r=e.length;return n>=r&&t.substring(n-r)===e},isContain:function(t,e){return t.indexOf(e)>-1},getRandomStr:function(t){for(var e="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<Number(t);r++)e+=n[Math.round(Math.random()*(n.length-1))];return e},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/g,""):""},query2obj:k},R={query2obj:k,arr2obj:C,arr2queryStr:function(t,e){var n,r,a,o=[],i=t.length;for(a=0;a<i;a++){n=t[a][0];r=t[a][1];var s=0===n.indexOf(M),c=s||e?r:encodeURIComponent(r);o.push(s?c:n+"="+c)}return o.join("&")},obj2queryStr:x},U=function(){var t=null,e=!1,n="";function r(){this.setDebug=function(t,r){e=t;n=r?"[APLUS] -- ":"[QT] -- "};this.i=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.info.apply(console,arguments)}catch(t){}};this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(t){}};this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.v=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.tip_w=function(t){try{console.log("%c "+n+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}};this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){null===t&&(t=new r);return t}}();function L(){}L.prototype.extend=function(){};L.prototype.create=function(){};L.extend=function(t){return this.prototype.extend.call(this,t)};L.prototype.create=function(t){var e=new this;for(var n in t)e[n]=t[n];return e};L.prototype.extend=function(t){var e=function(){};try{O(Object.create)||(Object.create=function(t){function e(){}e.prototype=t;return new e});e.prototype=Object.create(this.prototype);for(var n in t)e.prototype[n]=t[n];e.prototype.constructor=e;e.extend=e.prototype.extend;e.create=e.prototype.create}catch(t){U&&U().w(t)}finally{return e}};var j,B=L.extend({create:function(t,e){var n=e.apiName,r=e.queueName,a=new this;a._sdkApiName=n;a._sdkQueueName=r;t[n]=t[n]||(t[n]={});t[r]=t[r]||(t[r]=[]);a.ctx=t;return a},getSdkApiName:function(){return this._sdkApiName},getSdkQueueName:function(){return this._sdkQueueName},setContextValue:function(t,e){this.ctx[this._sdkApiName]&&(this.ctx[this._sdkApiName][t]=e)},getContextValue:function(t){var e;this.ctx[this._sdkApiName]&&(e=this.ctx[this._sdkApiName][t]);!e&&this.ctx.goldlog&&(e=this.ctx.goldlog[t]);return e}});function F(){return j}function V(){return F().getSdkApiName()}function K(){return F().getSdkQueueName()}function G(t){return F().ctx[t]}function q(t,e){F().ctx[t]=e}function H(t){return F().getContextValue(t)}function Y(t,e){F().setContextValue(t,e)}var Q="function",$=function(){var t=G(V())[V()+"_pubsub"]||{};return a(t.publish)===Q?t:""};function z(t){var e=$();e&&a(e.publish)===Q&&e.publish.apply(e,t)}function W(t){var e=$();e&&a(e.cachePubs)===Q&&e.cachePubs.apply(e,t)}var J=S.indexOf;function X(){}X.prototype.create=function(t){for(var e in t)void 0===this[e]&&(this[e]=t[e]);return this};X.prototype.calledList=[];X.prototype.setCalledList=function(t){-1===J(this.calledList,t)&&this.calledList.push(t)};X.prototype.resetCalledList=function(){this.calledList=[]};X.prototype.wrap=function(t,e){var n=this,r=((this.context||{}).Compose||{}).maxTimeout||1e4;return function(a){var o,i=t.length,s=0,c=0;n.calledList&&n.calledList.length>0&&n.resetCalledList();return function u(f,p){if(s!==i){if(-1===J(n.calledList,s)){n.setCalledList&&n.setCalledList(s);if(!(t&&t[s]&&O(t[s][0])))return;try{a=t[s][0].call(n,a,(function(){s++;c=1;u()}))}catch(t){console.log(t)}}var l="number"==typeof a;if("pause"===a||l){c=0;var g=l?a:r,h=t[s]?t[s][1]:"";o=setTimeout((function(){if(0===c){U().w("jump the middleware about "+h+", because waiting timeout maxTimeout = "+g);a=null;s++;u()}}),g)}else if("done"===a)u(s=i,a);else{s++;u()}}else{a="done";n.resetCalledList();O(e)&&p!==a&&e.call(n,a);clearTimeout(o)}}()}};function Z(){return{init:function(t){this.opts=t;t&&"object"===a(t.middleware)&&t.middleware.length>0?this.middleware=t.middleware:this.middleware=[];this.plugins_name=[]},pubsubInfo:function(t,e){try{var n=t.pubsub;n&&n.publish("plugins_change_"+t.pubsubType,e)}catch(t){console.log(t)}},isConstructor:function(t){var e=!0;try{new t}catch(t){e=!1}return e},run:function(t){t||(t=0);var e=this,n=this.middleware,r=this.opts||{},o=r.plugins;if(o&&"object"===a(o)&&o.length>0){var i=o[t];this.plugins_name.push(i.name);n.push([function(t,n){e.pubsubInfo(this,i);var a;i.path&&e.isConstructor(i.path)?a=i.path:i.path.default&&e.isConstructor(i.path.default)&&(a=i.path.default);if(a){var o=new a({context:this.context,config:I(i.config||{},r.config)});if(!o.options){o.init||(o.init=function(t){this.options=t});o.init({context:this.context,config:I(i.config||{},r.config)})}return o.run(t,(function(t){setTimeout((function(){n(i,t)}),1)}))}},i.name]);if(o[++t])return this.run(t)}return n}}}var et=function(){};et.prototype.run=function(t,e,n){var r=new Z;r.init({middleware:[],config:e.config,plugins:t.plugins});var a=r.run(),o=O(t.context)?new t.context:t.context;o.userdata=e.userdata;var i={context:o,pubsub:H(V()+"_pubsub"),pubsubType:e&&e.pubsubType},s=new X;s.create(i);s.wrap(a,(function(){i.context.status="complete";if(e){e.middlewareMessageKey&&z([e.middlewareMessageKey,i.context]);e.messageFnQueue&&v(e.messageFnQueue,(function(e){e(getGlobalValue(V()),t)}))}O(n)&&n(i.context)}))()};var nt,rt,at,ot="mw_change",it="MetaInfo",st="append".concat(it),ct="set".concat(it),ut="_pubsub",ft="2101",pt="2201",lt="19999",gt="aplus",ht={PAGE_ENTER:"PAGE_ENTER",CURRENT_PAGE_CONFIG:"CURRENT_PAGE_CONFIG",_ANONY_ID:"_anony_id",_DEV_ID:"_dev_id",_CNA:"cna",_browerFP:"_abfpc",_USER_ID:"_user_id",OTHER:lt,UNSUBSCRIBE:"".concat(gt,".").concat(gt).concat(ut,".unsubscribe"),SUBSCRIBE:"".concat(gt,".").concat(gt).concat(ut,".subscribe"),PUBLISH:"".concat(gt,".").concat(gt).concat(ut,".publish"),CACHE_PUBS:"".concat(gt,".").concat(gt).concat(ut,".cachePubs"),SDK_READY:"".concat(gt,"Ready"),SDK_PUB:"".concat(gt).concat(ut),COMPLETE:"complete",PV_CODE:"2001",EXP_CODE:pt,CLK_CODE:ft,OTHER_CODE:lt,CLK:"CLK",EXP:"EXP",SPM_CNT:"spm-cnt",SPM_URL:"spm-url",SPM_PRE:"spm-pre",MW_CHANGE_PV:"".concat(ot,"_pv"),MW_CHANGE_HJLJ:"".concat(ot,"_hjlj"),HTTP:"".concat("http",":"),HTTPS:"https:",APPEND_META_INFO:st,SET_META_INFO:ct,SDK_APPEND_META_INFO:"".concat(gt,".").concat(st),SDK_SET_META_INFO:"".concat(gt,".").concat(ct),PVID:"pvid",WEB_PC_PV_SUFFIX:"v.gif",WEB_WAP_PV_SUFFIX:"m.gif",NATIVE_TRANSP_READY:"".concat(gt,"NativeTranspReady")},_t=["send","enter","sendPV","record","combineRecord","recordUdata","requestVTConfig","requestRemoteConfig","setPageSPM","setMetaInfo","appendMetaInfo","updatePageProperties","updateNextPageProperties","updatePageUtparam","updateNextPageUtparam","pageAppear","pageDisappear","skipPage","updateSessionProperties","getPageSpmUrl","getPageSpmPre","setPageName","getElementSPM","recordAppLink","onPageShow","onPageHide","reportUserInfo"],dt={EXP:pt,IMPEXP:"2202",CLK:ft,OTHER:lt,SHOW:"1023",H_OR_U:"1010"},mt={ekvs:"e",active_user:"active_user"},vt=n(n({},mt),{},{sessions:"sn"}),yt={sdk_type:"sdt",device_model:"dm",language:"lang",device_type:"dt",os_version:"ov",appkey:"ak",sdk_version:"sv",resolution:"rl",pixel_ratio:"pr",_id:"id",id_type:"it",id_tracking:"itr"},St=n(n({},yt),{},{imprint:"imp",debugId:"dk"}),It=n(n({},yt),{},{access:"ac",access_subtype:"acs",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",font_size_setting:"fss",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",imprint:"imp",miniappDebugId:"dk"}),bt={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},Pt={APLUS:gt,APPKEY:"appKey",APLUS_PV_DOMAIN:"aplus-rhost-v",APLUS_EKV_DOMAIN:"aplus-rhost-g",SESSION_INTERVAL:3e4,PAGE_SCROLL_DURATION:4e3,SESSION_PAUSE_TIME:"session_pause_time",IMPRINT:"imprint",CURRENT_SESSION:"current_session",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,FAILED_REQUESTS:"failed_requests",REQUESTS:"requests",SHARES:"shares",EKVS:"ekvs",EVENT_MAX_COUNT:1e4,MEMORY_MAX_COUNT:1,MAX_QUEUE_COUNT:1,EVENT_SEND_DEFAULT_INTERVAL:3e3,PAGE_START:"$$_page_start",PAGE_END:"$$_page_end",APP_START:"$$_app_start",APP_END:"$$_app_end",USER_PROFILE:"$$_user_profile",SHARE_CACHE_INTERVAL:18e5,GLOBAL_PROPERTY:"globalproperty",JSBRIDGE_ONLY:"aplus-jsbridge-only",JSBRIDGE_AGENT:"Umeng4Aplus",APLUS_SKIP_APV_RULES:"aplus-skip-apv-rules",APLUS_IMPRINT_VERSION:"APLUS_IMPRINT_VERSION",APLUS_REMOTE_CONFIG:"APLUS_REMOTE_CONFIG",WEB_EVENT_SUFFIX:"/web_logs",PAGE_LEAVE:"$$_page_leave",PAGE_STAY:"$$_page_stay",APLUS_AUTOTRACK_ENABLED:"aplus-autotrack-enabled",APLUS_AUTOTRACK_ENABLED_REMOTE:"apus-autotrack-enabled-remote",APLUS_AUTOTRACK_CONFIG:"aplus-autotrack-config",APLUS_AUTOTRACK_CONFIG_REMOTE:"aplus-autotrack-config-remote",APLUS_DISABLE_AUTOEVENT:"aplus-disable-autoevent",APLUS_DISABLE_AUTOEVENT_REMOTE:"aplus-disable-autoevent",APLUS_DISABLE_AUTOPV:"aplus-disable-apv",APLUS_DISABLE_AUTOPV_REMOTE:"aplus-disable-apv-remote",APLUS_EVENT_LIMITRATES:"aplus-event-limitrates",APLUS_DEVICE_ENABLE:"aplus-device-enable",PERFORMANCE_WARING:"$$_perf_warning",START_ID:"START_ID",AUTO_GET_OPENID:"autoGetOpenid",TRACKDOMAIN:"trackDomain",APLUS_MINI_REQUEST_TIMEOUT:"aplus-request-timeout",APLUS_LATEAST_UTM:"APLUS_LATEAST_UTM",APLUS_FORWARD_APPKEY:"aplus-forward-appkey",APLUS_FORWARD_DOMAIN:"aplus-forward-domain",APLUS_FORWARD_EVENT_FILTER:"aplus-forward-event-filter",CNA_SYNC_READY:"cnaSyncReady",PAGE_CONFIG:"pageConfig",APLUS_VT_CONFIG_URL:"aplus-vt-cfg-url",APLUS_EXPOSURE_EVENT_CAN_REPEAT:"aplus-exposure-event-can-repeat",APLUS_MINI_REQUESTS_LIMIT:"aplus-mini-requests-limit",DEBUG:"DEBUG",APLUS_UTM_EXPIRE_DAYS:"aplus-utm-expire-days",APLUS_PAGEVIEW_DURATION_CAN_TRACK:"aplus-pageview-duration-can-track",APLUS_PRESET_EVENTS_DISABLED:"aplus-preset-events-disabled",APLUS_GLOBALPROPERTY_SYNC_ENABLE:"aplus-globalproperty-sync-enable",APLUS_NEXT_PAGE_TRANSP:"aplus-nextpage-properties",APLUS_LOCALSTORE_PAGE_TRANSP:"aplus-native-page-properties",APLUS_CALLBACK:"qtCallback"},Et={record:"".concat(gt,".record"),sendPV:"".concat(gt,".sendPV"),setMetaInfo:"".concat(gt,".setMetaInfo"),appendMetaInfo:"".concat(gt,".appendMetaInfo")},At="half_session",Tt="close_session",Ot="ekv",wt={pushIntoGoldlogQueue:function(t,e){var n=G(K()),r=G(V()),a=t.split("."),o=r[a[1]],i=o?o[a[2]]:null;r&&2===a.length&&o?o.apply(r,e):3===a.length&&i?i.apply(o,e):n.push({action:t,arguments:e})}};function Ct(t,e){return t&&t.getAttribute&&t.getAttribute(e)||""}function kt(t){try{return localStorage.getItem(t)}catch(t){return""}}function Mt(t,e){var n,r="";if(!t||!e)return r;try{var a=new RegExp("".concat(t,"=([^&|#|?|/]+)"));if("spm"===t||"scm"===t){var o=new RegExp("\\?.*".concat(t,"=([\\w\\.\\-\\*/]+)")),i=e.match(a),s=e.match(o),c=i&&2===i.length?i[1]:"",u=s&&2===s.length?s[1]:"";r=c>u?c:u;r=decodeURIComponent(r)}else r=(n=e.match(a))&&2===n.length?n[1]:"";return r}catch(t){U().w("get param from url failed",t);return r}}function xt(t){nt=nt||document.getElementsByTagName("head")[0];return at&&!t?at:nt?at=nt.getElementsByTagName("meta"):[]}function Nt(t,e){var n="aplus&sidx=aplusSidex&ckx=aplusCkx",r=t||n;try{if(e){var a=k(e),o=[Pt.APLUS,"cna",ht.SPM_CNT,ht.SPM_URL,ht.SPM_PRE,"logtype","pre","uidaplus","asid","sidx","trid","gokey"];S.each(o,(function(t){if(Object.prototype.hasOwnProperty.call(a,t)){U().w("Can not inject keywords: ".concat(t));delete a[t]}}));delete a[""];var i="";if(t){var s=t.match(/aplus&/).index,c=s>0?k(t.substring(0,s)):{};delete c[""];i="".concat(x(E.assign(c,a)),"&").concat(t.substring(s,t.length))}else i="".concat(x(a),"&").concat(n);return i}return r}catch(t){return r}}function Dt(){var t,e=Nt(Ct(function(){rt||(rt=document.getElementById("beacon-aplus")||document.getElementById("tb-beacon-aplus"));return rt}(),"exparams"),(((t=G(V()))&&t._$?t._$:{}).meta_info||{})["aplus-exparams"]||"")||"";return e&&e.replace(/&amp;/g,"&").replace(/\buser(i|I)d=/,"uidaplus=")}var Rt={set:function(t,e){try{localStorage.setItem(t,e);return!0}catch(t){return!1}},get:kt,test:function(){var t="grey_test_key";try{localStorage.setItem(t,1);localStorage.removeItem(t);return!0}catch(t){return!1}},remove:function(t){try{localStorage.removeItem(t);return!0}catch(t){return!1}},getLocalStorageFP:function(){var t,e=kt(ht._browerFP);e&&(t=e.split("_")[0]);return t}},Ut={getQueryFromUrl:function(){function t(t){for(var e=decodeURIComponent(t),n=e.indexOf("?")+1,r=e.substring(n),a=Object.create(null),o=r.split("&"),i=0;i<o.length;i++)a[o[i].split("=")[0]]=decodeURIComponent(o[i].split("=")[1]);return a}try{var e=location&&location.hash,n=location&&location.search;if(e&&-1!==e.indexOf("?"))return t(e);if(n&&-1!==n.indexOf("?"))return t(n)}catch(t){U().w("get query failed, current url =",location.href)}},getAParamFromUrl:Mt,addParamsIntoUrl:function(t,e){var n,r,a,o=e||location.href,i="&",s=[];S.each(t,(function(t,e){new RegExp("".concat(t,"=")).test(o)||s.push("".concat(t,"=").concat(e))}));if(0===s.length)return o;if(-1!==o.indexOf("#")){a=o.split("#");o=a.shift();r=a.join("#")}var c=o.split("?"),u=c.length-1;a=(a=c[0].split("//"))[a.length-1].split("/");if(u>0){n=c.pop();o=c.join("?")}n&&u>1&&-1===n.indexOf("&")&&-1!==n.indexOf("%")&&(i="%26");return o="".concat(o,"?").concat(s.join("&")).concat(n?i+n:"").concat(r?"#".concat(r):"")},getSPMFromUrl:function(t){return Mt("spm",t)},tryToEncode:function(t){var e=t||"";if(t)try{e=encodeURIComponent(decodeURIComponent(t))}catch(t){}return e},tryToDecode:function(t,e){var n=e||"";if(t)try{n=decodeURIComponent(t)}catch(t){}return n},getWebUrlParams:function(){for(var t=/[?&]([^=#]+)=([^&#]*)/g,e=window.location.href,n={},r=t.exec(e);r;){n[r[1]]=r[2];r=t.exec(e)}return n}},Lt={getMetaTags:xt,getMetaCnt:function(t,e){var n,r,a,o=xt(),i=o.length;for(n=0;n<i;n++)Ct(r=o[n],"name")===t&&(a=Ct(r,e||"content"));return a||""},mergeExparams:Nt,getExParams:Dt,getExparamsInfos:function(t,e){for(var n={},r=t||["uidaplus","pc_i","pu_i"],a=Dt()||"",o=N(a=a.replace(/&aplus&/,"&"))||[],i=function(t){return S.indexOf(r,t)>-1},s=0;s<o.length;s++){var c=o[s],u=c[0]||"",f=c[1]||"";u&&f&&("EXPARAMS"===e||i(u))&&(n[u]=f)}return n}},jt=0,Bt={},Ft={getStartId:function(){return D.getRandomStr(10)+Date.now()+D.getRandomStr(9)},getUUID:function(){return D.getRandomStr(10)+Date.now()+D.getRandomStr(9)},fixDomain:function(t){if(-1!==t.indexOf("https://")||-1!==t.indexOf("http://"))return t;t=(/^\/\//.test(t)?"":"//")+t;return/(\d+\.){3,}\d+/.test(t)?ht.HTTP+t:ht.HTTPS+t},getAppKey:function(){var t=G(V());return t.getMetaInfo("appkey")||t.getMetaInfo("appId")||t.getMetaInfo("appKey")},getTrackDomain:function(){var t=G(V());return t.getMetaInfo(Pt.APLUS_PV_DOMAIN)||t.getMetaInfo(Pt.TRACKDOMAIN)},checkDomain:function(t,e){var n=new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)(\/.*)?$/),r=((t||"").match(n)||[])[0];if(!t||!r){U().tip_w(U().repeat("!"));U().tip_w("trackDomain error, please check ".concat(e," setting, current value is: ").concat(t)||"undefined");U().tip_w("we accept these three patterns:");U().tip_w("eg1: https://test-qtracking-xxx.com:port/a/b/c, port is optional");U().tip_w("eg2: http://test-qtracking-xxx.com:port/a/b/c, port is optional");U().tip_w("eg3: test-qtracking-xxx.com:port/a/b/c, port is optional");U().tip_w(U().repeat("!"));return!1}return!0},checkOpenid:function(t){if(!t){U().tip_w(U().repeat("!"));U().tip_w("QT need an unique id as QT's deviceid!!");U().tip_w("setting examples: aplus_queue.push({action: '".concat(V(),".setMetaInfo', arguments: ['_anony_id', xxxxxx]});"));U().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS");U().tip_w(U().repeat("!"));return!1}return!0},checkEvent:function(t,e){if(!t||"string"!=typeof t){U().w("event logkey is invalid, id =",t||"'' event properties = ",T.stringfy(e.cusp));return!1}var n=["id","du"],r={};n.forEach((function(t){r[t]=1}));if(r[t]){U().e("eventId has conflict with reservewords: ".concat(n.join(",")));return!1}if(t.length>Pt.MAX_EVENTID_LENGTH){U().e("The maximum length of event id shall not exceed ".concat(Pt.MAX_EVENTID_LENGTH));return!1}if(e&&("object"!==a(e)||S.isArray(e))&&"string"!=typeof e){U().e("please check trackEvent properties. properties should be string or object(not include Array)");return!1}if("object"===a(e)){var o=0;for(var i in e)if({}.hasOwnProperty.call(e,i)){if(i.length>Pt.MAX_PROPERTY_KEY_LENGTH){U().e("The maximum length of property key shall not exceed ".concat(Pt.MAX_PROPERTY_KEY_LENGTH));return!1}if(o>=Pt.MAX_PROPERTY_KEYS_COUNT){U().e("The maximum count of properties shall not exceed ".concat(Pt.MAX_PROPERTY_KEYS_COUNT));return!1}if(r[i]){U().e("property key has conflict with reserveWords: ".concat(n.join(",")));return!1}o+=1}}return!0},rank:function(){jt++;Object.prototype.hasOwnProperty.call(Bt,jt)?jt++:Bt[jt]=jt;return jt},clear:function(){jt=0;Bt={}},zeroFill:function(t,e,n){var r="".concat(Math.abs(t)),a=e-r.length,o=t>=0,i=Math.pow(10,Math.max(0,a)).toString().substring(1)+r;return o?(n?"+":"")+i:"-".concat(i)},date2YYMMDD:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0)].join(t||"")}catch(t){return""}},date2YYMMDDHHMMSS:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0),this.zeroFill(e.getHours(),2,0),this.zeroFill(e.getMinutes(),2,0),this.zeroFill(e.getSeconds(),2,0)].join(t||"")}catch(t){return""}},mapEventSampleRates:function(t){var e=[];v(t,(function(t){t.eventIds&&t.eventIds.length>0&&v(t.eventIds,(function(n){e.push({eventId:n,samplingRate:t.samplingRate})}))}));return e},hash:function(t,e){var n,r=e||1315423911;for(n=t.length-1;n>=0;n--)r^=(r<<5)+t.charCodeAt(n)+(r>>2);for(var a=(2147483647&r).toString(16);a.length<8;)a+="0";return a},isDebug:function(){var t=!1,e=G(V());try{t=/debugMode=true/.test(location.search)||e.getMetaInfo("DEBUG")}catch(t){}return t},localAutoEventDisabled:function(){return!!G(V()).getMetaInfo(Pt.APLUS_DISABLE_AUTOEVENT)},localAutoPVDisabled:function(){var t=G(V());return!(!t.getMetaInfo(Pt.APLUS_DISABLE_AUTOPV)&&"MAN"!==t.getMetaInfo("aplus-waiting"))},getAutoTrackStatus:function(){return!!G(V()).getMetaInfo(Pt.APLUS_AUTOTRACK_ENABLED)},semicolonStr2Obj:function(t,e,n){e=e||{};var r,a,o=t.split(";"),i=o.length;for(a=0;a<i;a++){r=o[a].split("=");var s=D.trim(r.slice(1).join("="));e[D.trim(r[0])||""]=n?s:Ut.tryToDecode(s)}return e},getEtagUrl:function(t){var e=G(V()),n=t;try{var r=e.getMetaInfo(Pt.APLUS_PV_DOMAIN);r=this.fixDomain(r);n="".concat(r,"/eg.js")}catch(t){}return n},getImprintFromStorage:function(t){if(Rt.get&&Rt.test()){var e="",n=Rt.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return decodeURIComponent(e)}return""},setImprintToStorage:function(t,e){e&&Rt.set&&Rt.test()&&Rt.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(e)))},setRemoteConfigToStorage:function(t,e){if(e&&Rt.set&&Rt.test()){var n=E.cloneDeep(e);"object"===a(n)&&(n=JSON.stringify(n));Rt.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(n)))}},getRemoteConfigFromStorage:function(t){if(Rt.get&&Rt.test()){var e="",n=Rt.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return T.parse(decodeURIComponent(e))}return""},setCnaToStorage:function(t,e,n){n&&Rt.set&&Rt.test()&&Rt.set(t,"".concat(e,"_").concat(encodeURIComponent(n)))},getCnaFromStorage:function(t,e){if(Rt.get&&Rt.test()){var n="",r=Rt.get(t);if(r){var a=r.split("_")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return decodeURIComponent(n)}return""},deleteInfo:function(t,e){v(e,(function(e){delete t[e]}));return t},resetFn:function(){var t=arguments.length>0&&arguments[0]?arguments[0]:{},e=arguments.length>1&&arguments[1]?arguments[1]:"",n=arguments.length>2&&arguments[2]?arguments[2]:function(){},r=t[e];t[e]=function(){var t=r&&r.apply(this,arguments);return t?n.call(this,t):n.apply(this,arguments)}},rewriteFn:function(t,e,n){var r=t[e];t[e]=function(t){n.call(this,t);r&&r.call(this,t)}},getHashKey:function(t,e){var n=[e.logkey,e.cssSelector];e.positionSelector&&n.push(e.positionSelector);t.id&&n.push(t.id);t.index>=0&&n.push(t.index);t.dataset&&t.dataset.privateNodeId&&delete t.dataset.privateNodeId;t.dataset&&n.push(JSON.stringify(t.dataset));return n=n.join("_")},getTimeZone:function(){var t=-(new Date).getTimezoneOffset()/60;return Math.abs(parseInt(t,10))},convertNativeMapStringToJSON:function(t){var e=t.replace(/(\w+)=([^,]+)/g,'"$1":"$2"').replace(/[{}]/g,""),n="{".concat(e,"}");return JSON.parse(n)}},Vt={rank:Ft.rank,clear:Ft.clear},Kt={localAutoEventDisabled:Ft.localAutoEventDisabled,localAutoPVDisabled:Ft.localAutoPVDisabled,getAutoTrackStatus:Ft.getAutoTrackStatus},Gt={set:Ft.setRemoteConfigToStorage,get:Ft.getRemoteConfigFromStorage},qt={set:Ft.setImprintToStorage,get:Ft.getImprintFromStorage},Ht={set:Ft.setCnaToStorage,get:Ft.getCnaFromStorage},Yt={resetFn:Ft.resetFn,rewriteFn:Ft.rewriteFn};Ft.LocalCfgUtils=Kt;Ft.RemoteCfgUtils=Gt;Ft.CNAUtils=Ht;Ft.ImprintUtils=qt;Ft.AccessType={MOBILE_NETWORK_2G:"2g",MOBILE_NETWORK_3G:"3g",MOBILE_NETWORK_4G:"4g",MOBILE_NETWORK_NONE:"none"};Ft.FunctionUtils=Yt;Ft.RankUtils=Vt;var Qt,$t="httpRequest",zt="request",Wt=function(){};function Jt(){try{return{ctx:dd,platType:"dd",sdkType:"ddmp",logDomain:"/ddm_logs"}}catch(t){try{return{ctx:my,platType:my&&my.tb?"taobao":"my",sdkType:my&&my.tb?"taobaomp":"mymp",logDomain:"/alipaym_logs"}}catch(t){try{return{ctx:tt,platType:"tt",sdkType:"ttmp",logDomain:"/bytedancem_logs"}}catch(t){try{return{ctx:swan,platType:"bd",sdkType:"bdmp",logDomain:"/baidum_logs"}}catch(t){try{return{ctx:wx,platType:"wx",sdkType:"wxmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:xhs,platType:"xhs",sdkType:"xhsmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:jd,platType:"jd",sdkType:"jdmp",logDomain:"/wxm_logs"}}catch(t){return{ctx:{},platType:"UNKNOW",sdkType:"UNKNOW"}}}}}}}}}function Xt(){return Jt().platType}function Zt(){return Jt().ctx}function te(){if("boolean"==typeof Qt)return Qt;var t=!1;try{var e=navigator?navigator.userAgent||navigator.swuserAgent:"";t=!!/AliApp/i.test(e);/AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(e)&&(t=!1);/AliApp\(KB/i.test(e)&&(t=!!/Mist/.test(e));/AlipayIDE Taobao/.test(e)&&(t=!0);if(t){var n=Xt().ctx;O(n.canIUse)&&(t=!!n.canIUse("callUserTrack"))}}catch(t){}Qt=t;return t}var ee={getPlatformType:Xt,getPlatformSdkType:function(){return Jt().sdkType},getPlatformContext:Zt,getLogDomain:function(){return Jt().logDomain},getCurrentPage:function(){var t=getCurrentPages();return t[t.length-1]||{}},getReferrerPage:function(){var t=getCurrentPages();return t[t.length-2]||{}},resetIsTB:function(t){Qt=t},initIsTB:te,isTB:function(){return"boolean"==typeof Qt?!!Qt:te()},getWxTitle:function(t){if(!t)return"";var e=Xt(),n="";try{if("wx"===e&&__wxConfig){var r=__wxConfig,a=__wxConfig.page||{},o=a[t]||a[t+".html"],i={},s={};r.global&&r.global.window&&r.global.window.navigationBarTitleText&&(i.title=r.global.window.navigationBarTitleText);o&&o.window&&o.window.navigationBarTitleText&&(s.title=o.window.navigationBarTitleText);if(!s.title&&__wxAppCode__){var c=__wxAppCode__[t+".json"];c&&c.navigationBarTitleText&&(s.title=c.navigationBarTitleText)}var u=F().ctx;u[V()].globalTitleMap&&eachMap(u[V()].globalTitleMap,(function(e,r){e===t&&(n=r)}));0===n.length&&(n=s.title||i.title||"")}return n}catch(t){U().w("current platform can not track page title");return n}},setStorageSync:function(t,e){try{var n=Xt(),r=Zt();"my"===n||"taobao"===n?r.setStorageSync({key:t,data:e}):r.setStorageSync(t,e)}catch(t){}},getStorageSync:function(t){try{var e=Xt(),n=Zt();return"my"===e||"taobao"===e?n.getStorageSync({key:t}).data:n.getStorageSync(t)}catch(t){}},request:function(t,e,n,r){var o=G(V()),i=Zt();O(r)||(r=Wt);O(n)||(n=Wt);var s=e.requestMethodName||zt,c=i[s];O(c)||s===zt||(c=i[s=zt]);O(c)||s===$t||(c=i[s=$t]);var u,f,p=e&&e.dataType?e.dataType:"base64",l=o.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT),g=e&&e.timeout?e.timeout:l,h=e.method||"GET";t=Ft.fixDomain(t);if(O(c)){var _={url:t,method:h,dataType:p,timeout:g,success:function(t){if(!u){u=!0;n(t)}},fail:function(t){if(!u){u=!0;r({failure:!0,data:t})}}};if("POST"===h&&"object"===a(e.data)){_.url=_.url.split("?")[0];if($t===s){_.headers={"Content-Type":"application/json"};_.dataType="json";_.data=JSON.stringify(e.data)}else _.data=e.data}var d=(o=G(V())).getMetaInfo("aplus-request-extinfo");"object"===a(d)&&(_._extInfo=d);c(_)}else if(!u){u=!0;r({failure:!0,data:f})}setTimeout((function(){if(!u){u=!0;f='aplus log request"'+t+' timeout", time spend'+g+"ms";console&&console.warn(f);r({failure:!0,data:f})}}),g)},getUtmParamsObj:function(t){var e={};try{E.eachMap(t,(function(t,n){if(0===t.indexOf("utm_"))e[t]="".concat(n);else if("scene"===t&&D.isString(n)){var r=decodeURIComponent(n)||"",a=D.query2obj(r);E.eachMap(a,(function(t,n){0===t.indexOf("utm_")&&(e[t]="".concat(n))}))}}))}catch(t){}return e}};function ne(t,e,n){var r,o,i=ee.getPlatformContext();r=i,o={apiName:e.apiName,queueName:e.queueName},j=r._sdk_context||B.create(r,o);"object"===a(t)&&(e.metaInfo=Object.assign({},e.metaInfo,t.metaInfo));U().setDebug(t.metaInfo.DEBUG);z([ht.SDK_READY,"running"]);!function(t,e){(new et).run({plugins:t.plugins,context:t.context},{config:{},userdata:{},pubsubType:"aplusinit",messageFnQueue:[],middlewareMessageKey:"mw_change_aplusinit"},(function(t){var n=["aplusInitContext",t];z(n);W(n);O(e)&&e(t)}))}({plugins:e.plugins,context:function(){var t={PAGE_LOAD_TIME:new Date},n=[];S.each(e.plugins,(function(e){t[e.name]=e.config;if("aplus_log_inject"===e.name&&e.config&&e.config.plugins){n=e.config.plugins.pv;S.each(n,(function(e){t[e.name]=e.config}))}}));return Object.assign({},t,{sdk_config:e})}},(function(t){n&&O(n)&&n(t)}));return F()}function re(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];n.push.apply(n,arguments);return new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};Object.defineProperty(n,"__esModule",{value:!0});Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}));return n}var ae="2.1.7";function oe(t,e){try{!function(){if(t&&S.isArray(t)&&t.length){for(var n=he(t).queue,r={},a=[];r=n.shift();)ge(r,e,(function(t){a.push(t)}));a.length>0&&setTimeout((function(){for(;r=a.shift();)ge(r,e)}),100)}}()}catch(t){U().w(t)}}function ie(){return(H("_$")||{}).meta_info}var se=[],ce=[],ue=[];function fe(t){var e=function(){var t=ie()||{};return"1"!=="".concat(t.uaid)||t._anony_id?t._hold||t["aplus-waiting"]:"BLOCK"}(),n=ie()||{},r=!0,a=t.arguments||[],o=a[0],i=a[1],s="START";if("_hold"===o&&i===s)return s;if("_anony_id"===o&&i)return s;if(t&&/sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(t.action)&&"BLOCK"===e&&!n[e]){ue.push(t);r=!1}return r}function pe(t){oe(se,t);oe(ce,t);oe(ue,t)}function le(t,e){e&&_t.indexOf(t)>-1&&(t="_".concat(t));return t}function ge(t,e,n){var r=!!e.isOpenApi,a=t?t.action:"",o=t?t.arguments:"",i=fe(t);if(i){var s=F().ctx;try{if(a&&o&&S.isArray(o)){var c,u=a.split("."),f=s,p=s;if(3===u.length)p=(f=s[u[0]][u[1]]||{})[c=le(u[2],r)]?f[c]:"";else for(;u.length;){p=f=f[c=le(u.shift(),r)];if(!f){O(n)&&n(t);return}}O(p)&&p.apply(f,o);"START"===i&&pe(e)}}catch(t){U().w(t)}}}function he(t,e){for(var n,r={subscribeMwChangeQueue:[],subscribeMetaQueue:[],subscribeQueue:[],metaQueue:[],othersQueue:[]},a={};a=t.shift();)try{var o=a.action,i=a.arguments[0];/subscribe/.test(o)?"setMetaInfo"===i?r.subscribeMetaQueue.push(a):i===ht.MW_CHANGE_PV||i===ht.MW_CHANGE_HJLJ?r.subscribeMwChangeQueue.push(a):r.subscribeQueue.push(a):/MetaInfo/.test(o)?r.metaQueue.push(a):r.othersQueue.push(a)}catch(t){U().w(t);r.othersQueue.push(a)}if(e&&r[e]){n=r[e];r[e]=[]}return{queue:r.subscribeMwChangeQueue.concat(r.metaQueue).concat(r.subscribeQueue).concat(r.subscribeMetaQueue,r.othersQueue),formatQueue:n}}var _e=L.extend({push:function(t){this.length++;ge(t,this.opts)}}),de=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"processAplusQueue",value:function(t){var e=this.options.config||{},n=G(t);oe(n,e);q(t,_e.create({opts:e,startLength:n.length,length:0}))}},{key:"run",value:function(){var t,e,n=this.options.context.sdk_config.queueName;this.processAplusQueue(n);t=n,e=this.options.config,G(t).push({action:ht.SUBSCRIBE,arguments:[ht.SET_META_INFO,function(t,n){t===Pt.DEBUG?U().setDebug(!!n):t===ht._USER_ID&&n?oe(se,e):t===ht._ANONY_ID&&n?oe(ce,e):"_hold"===t&&"START"===n&&pe(e)}]})}}]);return t}(),me=re(Object.freeze({__proto__:null,default:de})),ve=function(){var t=null,e="",n=null,r=!1;function o(){var t=ee.getPlatformContext();this.load=function(a){if(n){t.removeStorage({key:e});O(a)&&a()}else{e="aplus_cache_".concat(Ft.getAppKey());t.getStorage({key:e,success:function(o){n=o&&o.data&&T.parse(o.data)||{};r=!0;t.removeStorage({key:e});O(a)&&a()},fail:function(o){U().w("".concat(e,": ").concat(o.errMsg));n={};r=!0;t.removeStorage({key:e});O(a)&&a()}})}};this.save=function(){n&&t.setStorage({key:e,data:T.stringfy(n)})};this.set=function(t,e){n&&(n[t]=e)};this.get=function(t){return(n||{})[t]};this.remove=function(t){n&&n[t]&&delete n[t]};this.getAll=function(){return n};this.clear=function(){n=null};this.has=function(t){return!!this.get(t)};this.isLoaded=function(){return r};this.getSync=function(t){try{var e=ee.getStorageSync(t);return t===Pt.APLUS_IMPRINT_VERSION?e:"string"==typeof e?T.parse(e):e}catch(t){}};this.setSync=function(t,e){try{"object"===a(e)?ee.setStorageSync(t,JSON.stringify(e)):ee.setStorageSync(t,e)}catch(t){}}}return function(){t||(t=new o);return t}}(),ye=function(){var t=null,e=null,n=null;function r(){return{resume:function(t){var r=!1;n||(n=ve().get(Pt.CURRENT_SESSION));e=Date.now();if(!n||!n.end_time||e-n.end_time>Pt.SESSION_INTERVAL){r=!0;!function(t){try{var e=(n||{}).options||{},r=I({},function(t){var e={};for(var n in t)e[n]=t[n];return e}(t.query));r.path=t.path||e.path;r.scene=t.scene?"".concat(ee.getPlatformType(),"_").concat(t.scene):e.scene;var a=t.referrerInfo;a&&(r.referrerAppId=a.appId);U().i("current launch options: ",r);var o=G(V()).getMetaInfo("globalproperty"),i=Date.now();n={id:D.getRandomStr(10)+i,start_time:i,options:r,state_s:1};o&&(n.gp=o)}catch(t){U().e("generate new session failed, errmsg: ",t)}}(t)}return r},pause:function(){!function(){if(n){var t=new Date;n.end_time=Date.now();"number"!=typeof n.duration&&(n.duration=0);n.duration=n.end_time-e;n.state_s=0;ve().set(Pt.CURRENT_SESSION,n);U().i("session end (%s): %s ",n.id,t.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return b(n)}}}return function(){t||(t=r());return t}}(),Se=function(){var t,e,n,r=[],a=[];function o(){if(r.length){var t=ve().get(Pt.EKVS);if(function(t){var e=0;for(var n in t)y(t[n])&&(e+=t[n].length);return e}(t)+r.length<=Pt.EVENT_MAX_COUNT){t=i(t,r);ve().set(Pt.EKVS,t)}}}function i(t,n){var r=(t=t||{})[e];y(r)&&r.length?t[e]=r.concat(n):t[e]=[].concat(n);return t}return function(){t||(t={addEvent:function(t){if(t&&(e=e||"sessionid")){r.unshift(t);if(r.length>Pt.MEMORY_MAX_COUNT){o();r.length=0}}},setSessionId:function(t){e=t;if(y(a)&&a.length&&e){for(var n=0;n<a.length;n++)this.addEvent(a[n]);a.length=0}},setStartId:function(t){n=t},getStartId:function(){return n},getEkvs:function(){var t=ve().get(Pt.EKVS);r&&r.length&&(t=i(t,r));return t},getEkvsLen:function(){var t=(ve().get(Pt.EKVS)||{})[e]||[],n=r?r.length:0;return t.length+n},clear:function(){ve().remove(Pt.EKVS);r.length=0;a.length=0}});return t}}();function Ie(t){var e;return(e=function(){try{return window}catch(t){}}()?Ft.RemoteCfgUtils.get(Pt.APLUS_REMOTE_CONFIG):ve().getSync(Pt.APLUS_REMOTE_CONFIG))&&e[t]}function be(){return G(V()).getMetaInfo(Pt.APLUS_DISABLE_AUTOEVENT_REMOTE)||Ie("codelessClickEventStatus")}function Pe(){var t=G(V());return Ie("currentDeviceEnable")||t.getMetaInfo(Pt.APLUS_DEVICE_ENABLE)}function Ee(){return G(V()).getMetaInfo(Pt.APLUS_DISABLE_AUTOPV_REMOTE)||Ie("codelessCollectorPageStatus")}function Ae(){return G(V()).getMetaInfo(Pt.APLUS_AUTOTRACK_ENABLED_REMOTE)||Ie("codelessStatus")}function Te(t){var e=V(),n=G(K());if(t&&!E.isEmptyObject(t)){!function(t){var e=G(K()),n=V();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DISABLE_AUTOEVENT_REMOTE,t]})}(t.codelessClickEventStatus);!function(t){var e=G(K()),n=V();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DISABLE_AUTOPV_REMOTE,t]})}(t.codelessCollectorPageStatus);!function(t){var e=V();G(K()).push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_AUTOTRACK_ENABLED_REMOTE,t]})}(t.codelessStatus);!function(t){var e=G(K()),n=V();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DEVICE_ENABLE,t]})}(t.currentDeviceEnable);t.eventSamplingRate&&t.eventSamplingRate.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_EVENT_LIMITRATES,Ft.mapEventSampleRates(t.eventSamplingRate)]});t.codelessIgnoreComponent&&t.codelessIgnoreComponent.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_AUTOTRACK_CONFIG_REMOTE,t.codelessIgnoreComponent]})}}var Oe={getAutoEventStatus:be,enableCfg:Te,getAutoTrackStatus:Ae,getAutoPageStatus:Ee,getDeviceStatus:Pe},we=function(){function t(){s(this,t);if(!t.instance){t.instance=this;t.instance.capacity=1;t.instance.tokens=1;t.instance.fillRate=1;t.instance.lastFillTime=Date.now();t.instance.loaded=!1}return t.instance}u(t,[{key:"run",value:function(){var t=this;setInterval((function(){t.fill()}),1e3)}},{key:"load",value:function(){if(!this.loaded){var t=G(V()).getMetaInfo(Pt.APLUS_MINI_REQUESTS_LIMIT);this.capacity="number"==typeof t&&t<=5&&t>=1?t:1;this.loaded=!0}}},{key:"fill",value:function(){var t=Date.now(),e=(t-this.lastFillTime)*(this.fillRate/1e3);this.tokens=Math.ceil(Math.min(this.tokens+e,this.capacity));this.lastFillTime=t}},{key:"consume",value:(e=i(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<=this.tokens)){t.next=5;break}this.tokens-=e;return t.abrupt("return",{allowed:!0});case 5:n=1e3*Math.ceil((e-this.tokens)/this.fillRate);return t.abrupt("return",{allowed:!1,waitTime:n});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}(),Ce=new we;function ke(t){var e=t,n=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue();n.push(t)};this.dequeue=function(){return n.shift()};this.front=function(){return n[0]};this.isEmpty=function(){return 0===n.length};this.clear=function(){n.length=0};this.size=function(){return n.length};this.items=function(){return n};this.print=function(){U().i("---queue: ",n.toString())}}function Me(t){var e=null;switch(t){case At:e=function(){var t=null,e=ye().cloneCurrentSession();e&&(t={header:{st:"1"},analytics:{sessions:[e]}});return t}();break;case Tt:e=function(){var t=null,e={},n=ye().cloneCurrentSession();n&&(e.sessions=[n]);var r=Se().getEkvs();if(r){e.ekvs=b(r);Se().clear()}(e.sessions||e.ekvs)&&(t={analytics:e});return t}();break;case Ot:e=function(){var t=null,e=Se().getEkvs();if(e){t={analytics:{ekvs:b(e)}};Se().clear()}return t}()}return e}function xe(t){var e={},n=t.networkType;"none"===n&&(n="unknown");switch(n=n?n.toLowerCase():""){case Ft.AccessType.MOBILE_NETWORK_4G:e.access_subtype="LTE";e.access="4G";break;case Ft.AccessType.MOBILE_NETWORK_3G:e.access_subtype="CDMA";e.access="3G";break;case Ft.AccessType.MOBILE_NETWORK_2G:e.access_subtype="GRPS";e.access="2G";break;default:e.access=n;delete e.access_subtype}return e}var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(Ne),Re=String.fromCharCode,Ue=function(t){var e;if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Re(192|e>>>6)+Re(128|63&e):Re(224|e>>>12&15)+Re(128|e>>>6&63)+Re(128|63&e);e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Re(240|e>>>18&7)+Re(128|e>>>12&63)+Re(128|e>>>6&63)+Re(128|63&e)},Le=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,je=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Ne.charAt(n>>>18),Ne.charAt(n>>>12&63),e>=2?"=":Ne.charAt(n>>>6&63),e>=1?"=":Ne.charAt(63&n)].join("")},Be=function(t){return e=function(t){return t.replace(Le,Ue)}(t),e.replace(/[\s\S]{1,3}/g,je);var e};function Fe(t,e){return e?Be(String(t)).replace(/[+\/]/g,(function(t){return"+"===t?"-":"_"})).replace(/\=/g,""):Be(String(t))}var Ve=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),Ke=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return Re(55296+(e>>>10))+Re(56320+(1023&e));case 3:return Re((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Re((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Ge=function(t){var e=t.length,n=e%4,r=(e>0?De[t.charAt(0)]<<18:0)|(e>1?De[t.charAt(1)]<<12:0)|(e>2?De[t.charAt(2)]<<6:0)|(e>3?De[t.charAt(3)]:0),a=[Re(r>>>16),Re(r>>>8&255),Re(255&r)];a.length-=[0,0,2,1][n];return a.join("")},qe=function(t){return e=function(t){return t.replace(/[\s\S]{1,4}/g,Ge)}(t),e.replace(Ve,Ke);var e},He=[];function Ye(t,e){var n=Qe(t,e);t&&t.id_tracking&&(n[e.id_tracking||"id_tracking"]=Qe(t.id_tracking,bt));return n}function Qe(t,e){var n={};for(var r in t)e[r]?n[e[r]]=t[r]:n[r]=t[r];return n}function $e(t,e){var n={};if(t)for(var r in t)t[r]&&(n[e[r]]=t[r]);return n}var ze=function(){function t(){s(this,t);this._imprint=""}u(t,[{key:"set",value:function(t){this._imprint="string"==typeof t?t:Fe(JSON.stringify(t))}},{key:"get",value:function(){return this._imprint}},{key:"getImpObj",value:function(){return T.parse((t=this._imprint,qe(String(t).replace(/[-_]/g,(function(t){return"-"===t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))));var t}},{key:"getItem",value:function(t){var e=this.getImpObj();return e&&e[t]||""}},{key:"load",value:function(){this._imprint=ve().get(Pt.IMPRINT)}},{key:"save",value:function(){this._imprint&&ve().set(Pt.IMPRINT,this._imprint)}}]);return t}(),We=new ze;function Je(t,e,r,a){var o=G(V()),i=function(){var t={},e=G(V()),n=e.globalConfig||{},r=e._aplus_client||{},a=ve().get(Pt.IMPRINT);a&&(t.imprint=a);t.device_type="Phone";t.sdk_version=n.lver;t.appkey=Ft.getAppKey();t.device_info="";t.appid=r.appId;t.app_version=e.getMetaInfo("appVersion")||"devtools";var o=e.getMetaInfo("aplus-global-args");o&&o.debugId?t.miniappDebugId=o.debugId:ve().get("miniappDebugId")&&(t.miniappDebugId=ve().get("miniappDebugId"));var i=r||{};i.safeArea=i.safeArea||{};var s=i.model||"",c=i.platform||"",u=i.brand||"",f=u.toLowerCase();t.sdk_type=ee.getPlatformSdkType();t.platform=ee.getPlatformType();t.platform_sdk_version=i.SDKVersion;t.platform_version=i.platformVersion;var p=Math.round(i.screenWidth*i.pixelRatio),l=Math.round(i.screenHeight*i.pixelRatio);t.resolution=p>l?"".concat(p,"*").concat(l):"".concat(l,"*").concat(p);t.pixel_ratio=i.pixelRatio;t.os=c;t.font_size_setting=i.fontSizeSetting;t.device_model=s;t.device_brand=u;t.device_manufacturer=f;t.device_manuid=s;t.device_name=s;t.os_version=i.os_version;t.language=i.language;var g=xe(r);t.access=g.access;g.access_subtype&&(t.access_subtype=g.access_subtype);return t}();try{if("my"===ee.getPlatformType()||"taobao"===ee.getPlatformType()){i.id_type="alipay_id";i.id_tracking={alipay_id:o.getMetaInfo(ht._ANONY_ID)||ve().get(ht._ANONY_ID)||"",unionid:o.getMetaInfo(ht._DEV_ID)||ve().get(ht._DEV_ID)||"",userId:o.getMetaInfo(ht._USER_ID)||""}}else{i.id_type="openid";i.id_tracking={openid:o.getMetaInfo(ht._ANONY_ID)||ve().get(ht._ANONY_ID)||"",unionid:o.getMetaInfo(ht._DEV_ID)||ve().get(ht._DEV_ID)||"",userId:o.getMetaInfo(ht._USER_ID)||""}}We.get()&&(i[Pt.IMPRINT]=We.get());if(t.analytics){var s=o.getMetaInfo(ht._USER_ID)||ee.getStorageSync(ht._USER_ID),c=o.getMetaInfo("_user_nick");t.analytics.active_user={puid:s,provider:c}}var u=Date.now();t.header=E.assign(i,n(n({},t.header),{},{traceId:D.getRandomStr(10)+u+D.getRandomStr(9),start_id:Se().getStartId()}));var f=function(t,e){return{h:Ye(t.header,"mini"===e?It:St),a:$e(t.analytics,"mini"===e?mt:vt)}}(t,"mini"),p=T.stringfy(f),l=function(){var t=G(V()),e=t.getMetaInfo(Pt.TRACKDOMAIN)||t.getMetaInfo(Pt.APLUS_PV_DOMAIN);if(!Ft.checkDomain(e))return"";var n=ee.getLogDomain();if(!n){U().tip_w("current miniapp framework is not supported!!");return""}return Ft.fixDomain(e)+n}(),g=o.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT)||Pt.DEFAULT_REQUEST_TIMEOUT,h={url:l,method:"POST",data:Fe(p),timeout:g,success:function(n){var a,o,i=n.code||n.status||n.statusCode;if(200===i||413===i){U().i("event send success:",t,p);try{if(n.profile){a={end:n.profile.responseEnd,start:n.profile.requestStart},"number"==typeof(o=a.end-a.start)&&o>=300?He.push(o):He=[];!function(){if(He.length>=10){G(V())._record(Pt.PERFORMANCE_WARING,"OTHER",{});He=[]}}()}}catch(t){U().w("current miniapp not support profile API")}!function(t){var e=ve().getSync(Pt.APLUS_IMPRINT_VERSION);if(t){var n=G(V());if(t.imprintVersion&&t.imprintVersion!==e){var r=t.imprintVersion;ve().setSync(Pt.APLUS_IMPRINT_VERSION,r);var a=n.getMetaInfo(Pt.APLUS_PV_DOMAIN)||n.getMetaInfo(Pt.TRACKDOMAIN),o=Ft.fixDomain(a)+r;n.requestRemoteConfig(o,(function(t){if(t.data&&t.data.data){Te(t.data.data);ve().setSync(Pt.APLUS_REMOTE_CONFIG,t.data.data)}}),(function(t){U().w("remote configuration request failed, errmsg:",t)}))}else Te(ve().getSync(Pt.APLUS_REMOTE_CONFIG))}}(n.data||{});O(e)&&e(n)}else{U().w("event send failed:",p);O(r)&&r()}},fail:function(t){if(Date.now()-u<_){U().w("event send failed:",p);U().w("event send failed because ",t)}else{U().w("current request timeout:",_);U().w("event send timeout:",p)}O(r)&&r()},complete:function(){O(a)&&a()}},_=o.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT);_&&(h.timeout=_);!function(t){var e=ee.getPlatformContext();try{e.request(t)}catch(e){try{dd&&dd.httpRequest(t)}catch(t){U().w("request send failed, err msg: ",t)}}}(E.assign(h,function(){var t="".concat(ee.getPlatformSdkType(),"/json"),e=!1;try{my&&(e=!0)}catch(t){}return e?{headers:{"Content-Type":t,"Msg-Type":t}}:{header:{"Content-Type":t,"Msg-Type":t}}}()))}catch(t){}}var Xe=function(t){return new Promise((function(e){return setTimeout(e,t)}))},Ze=function(t){if(t&&t.analytics&&t.analytics.ekvs)return Object.keys(t.analytics.ekvs)[0]},tn=function(t){var e=[];if(S.isArray(t)&&t.length>0){var n=Array.from(new Set(t.map((function(t){return t.header.start_id}))));n.forEach((function(n){var r,a=t.filter((function(t){return t.header.start_id===n})),o=a.reduce((function(t,e,n,a){if(t){r=E.cloneDeep(t);var o=Ze(t);r.analytics.ekvs[o]=r.analytics.ekvs[o].concat(e.analytics.ekvs[o]);return r}return t=a[n]}));e.push(o)}));for(var r=new Array(e.length).fill([]),a=Object.create(null),o=0;o<e.length;o++){for(var i=e[o],s=Ze(i),c=i.analytics.ekvs[s].filter((function(t){return!!t})).map((function(t){return t.uuid})),u=0;u<c.length;u++){var f=c[u];a[f]?r[o].push(u):a[f]=1}r[o].length>0&&i.analytics.ekvs[s].splice(r[o][0],r[o].length)}}return e},en=function(){function t(){s(this,t);this.queue=new ke;this.isProcessing=!1;this.Tag=""}u(t,[{key:"enqueue",value:function(t,e,n){e=e||{};var r=Me(t);if(r){var a=G(V())._aplus_client||{};r.header=I(r.header,xe(a));r.noCache=e.noCache;this.queue.enqueue(r)}this.isProcessing||this.processQueue(n)}},{key:"load",value:function(t){var e=this,n=ve().get(t);n&&n.length&&n.forEach((function(t){e.queue.enqueue(t)}));ve().remove(t)}},{key:"processQueue",value:(e=i(r().mark((function t(e){var n,a,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isProcessing=!0;case 1:if(!(this.queue.size()>0)){t.next=17;break}n=this.queue.front();t.next=5;return Ce.consume(1);case 5:a=t.sent;o=a.allowed;i=a.waitTime;if(!o){t.next=13;break}this.queue.dequeue();on(n);t.next=15;break;case 13:t.next=15;return Xe(i);case 15:t.next=1;break;case 17:this.isProcessing=!1;O(e)&&e();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}(),nn=function(t){p(n,t);var e=d(n);function n(){var t;s(this,n);t=e.call(this);n.instance||(n.instance=h(t));return _(t,n.instance)}u(n,[{key:"prepare",value:function(t,e,n){var r=G(V());Ft.checkOpenid(r.getMetaInfo(ht._ANONY_ID));t===Ot?this.enqueue(t,e,(function(){O(n)&&n()})):this.isProcessing||this.processQueue(n)}}]);return n}(en),rn=new(function(t){p(n,t);var e=d(n);function n(){var t;s(this,n);t=e.call(this);if(!n.instance){n.instance=h(t);n.instance.failedRequests=[]}return _(t,n.instance)}u(n,[{key:"prepare",value:function(){var t=this;tn(this.failedRequests).forEach((function(e){t.queue.enqueue(e)}))}},{key:"clearFailedRequests",value:function(){this.failedRequests.length=0}},{key:"save",value:function(){var t=(ve().get(Pt.FAILED_REQUESTS)||[]).concat(this.failedRequests),e=tn(t);e&&e.length&&ve().set(Pt.FAILED_REQUESTS,e);this.clearFailedRequests()}}]);return n}(en)),an=new nn,on=function(){var t=i(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&Je(e,(function(){}),(function(){e&&!e.noCache&&rn.failedRequests.push(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),sn=0;function cn(t,e){var n={};e&&(n.scene=e);t&&t.miniappDebugId&&(n.debugId=t.miniappDebugId);for(var r in t)"$$_share_uid"!==r&&0!==r.indexOf("$$_utm_")||(n[r]=t[r]);return n}function un(){var t=App,e=!1,n=!1,r=F().ctx,o=K(),i=ee.getPlatformContext(),s=function(t){ee.initIsTB();var e=t?t.query:{},n=t?t.referrerInfo:{};Oe.enableCfg(ve().getSync(Pt.APLUS_REMOTE_CONFIG));sn+=1;r[o].push({action:Et.appendMetaInfo,arguments:["aplus-session-args",E.assign(n,{scene:t.scene||""})]});if(e){var a={};e.spm&&(r.aplus.spm_orign=e.spm);t.scene&&(a.scene=t.scene);if(e.miniappDebugId){var i=e.miniappDebugId.trim(),s=i.split("_");a=E.assign(a,{aplus_work_no:s.length>2?s[1]:i,aplus_track_debug_id:i,aplus_flag:"aplus_test"})}r[o].push({action:Et.appendMetaInfo,arguments:["aplus-exdata",a]});r[o].push({action:Et.appendMetaInfo,arguments:["aplus-cpvdata",a]});r[o].push({action:Et.appendMetaInfo,arguments:["aplus-global-args",cn(e,t.scene)]})}},c=function(t){sn+=1;var n,i=t?t.query:{},s=t?t.scene:"";r[o].push({action:ht.SDK_APPEND_META_INFO,arguments:["aplus-global-args",cn(i,s)]});r[o].push({action:Et.appendMetaInfo,arguments:[Pt.GLOBAL_PROPERTY,ee.getUtmParamsObj(i)]});if(s){r[o].push({action:Et.appendMetaInfo,arguments:["aplus-exdata",{scene:s}]});r[o].push({action:Et.appendMetaInfo,arguments:["aplus-cpvdata",{scene:s}]});r[o].push({action:Et.appendMetaInfo,arguments:["aplus-session-args",{scene:s}]})}2===sn?n=1:1===sn?n=0:U().w("APP_LAUNCH_TYPE should not reach this, value = ".concat(sn));Ce.load();Ce.run();if(!e){e=!0;!function(t){ve().load((function(){U().w("cache init success");t.query&&t.query.miniappDebugId&&t.query.miniappDebugId!==ve().get("miniappDebugId")&&ve().set("miniappDebugId",t.query.miniappDebugId)}));var e={},n=E.cloneDeep(t);for(var r in n)"object"===a(n[r])?e=E.assign(n[r],e):n[r]&&(e[r]=n[r]);var o=ye().resume(e),i=ye().getCurrentSessionId();Se().setSessionId(i);if(o){rn.load(Pt.FAILED_REQUESTS);rn.processQueue()}}(t)}Ft.RankUtils.clear();var c=Ft.getStartId();Se().setStartId(c);r.onAppShowTime=Date.now();r[K()].push({action:Et.record,arguments:[Pt.APP_START,"SHOW",{start_type:n,is_auto:1,currentPath:t.path||""}]})},u=function(){var t=Date.now()-r.onAppShowTime;r[K()].push({action:Et.record,arguments:[Pt.APP_END,"H_OR_U",{duration:t,end_type:0,start_time:r.onAppShowTime,is_auto:1}]});e=!1;!function(){ye().pause();rn.prepare();rn.processQueue().then((function(){rn.save();ve().save()}))}();sn=0};if(t.after)t.after({methods:{onLaunch:function(t){t.thisObject&&(t.thisObject[V()]=r[V()]);s(t.args)},onShow:function(t){c(t.args)},onHide:function(){u()}}});else{App=function(e){e[V()]=r[V()];t(e)};try{i.onAppShow((function(t){if(!n){var e={};e=O(i.getLaunchOptionsSync)?i.getLaunchOptionsSync()||{}:t;s(e);n=!0}c(t)}));i.onAppHide((function(){u()}));!function(t){try{my&&my.onTitleCloseClick&&t&&my.onTitleCloseClick(t)}catch(t){}}(u)}catch(t){U().w("hook app failed, errmsg = ",t)}}}var fn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){["object","function"].indexOf("undefined"==typeof App?"undefined":a(App))>-1&&un()}}]);return t}(),pn=re(Object.freeze({__proto__:null,default:fn})),ln="",gn={};function hn(t){var e=G(V()).getMetaInfo("pageConfig")||{},n=t||ln;try{if(e&&"object"===a(e))for(var r in e){if(r===n)break;if(e[r]&&e[r].regRule&&e[r].regRule.test(n)){n=r;break}}}catch(t){}return e[n]}var _n={getCurrentPagePath:function(){return ln},getPrePagePath:function(t){return t&&-1!==t.indexOf("?")?t.split("?")[0]:t},setCurrentPath:function(t){t&&(ln=t)},getPageQuery:function(t){if(t)return gn[t]},setPageQuery:function(t,e){t&&(gn[t]=e)},getFullPath:function(t){return function(t,e){if(!t||"-"===t)return"";var n=[];for(var r in e)n.push("".concat(r,"=").concat(e[r]));var a=n.join("&");return a?"".concat(t,"?").concat(a):t}(t,gn[t])},getPageOptions:hn,getPageName:function(t){return(hn(t)||{}).pageName},getPrePageName:function(t){return(hn(t)||{}).pageName},getPageTitle:function(t){return(hn(t)||{}).pageTitle||ee.getWxTitle(t)},getVTRealtimeCode:function(){if(ln){var t=gn[ln]||{},e=/^\$vt_/,n=decodeURIComponent(t.scene);return n&&e.test(n)&&n.replace(e,"")}},getPageProperties:function(t){return(hn(t)||{}).properties},skipPage:function(t){return(hn(t)||{}).skipMe}},dn={onAplusReady:function(t,e,n){t.push({action:e,arguments:[ht.SDK_READY,function(t){"complete"===t&&"function"==typeof n&&n()}]})},click_proxy:function(t,e){var n=G(V()),r=t[e];t[e]=function(){var t=r.apply(this,arguments),e=arguments[0];E.isObject(e)&&n&&n.record&&n.record("$$_auto_clk","CLK",{});return t}},getIndexByRect:function(t,e,n){var r=-1;ee.getPlatformContext().createSelectorQuery().selectAll(t).boundingClientRect().exec((function(t){S.each(t[0],(function(t,n){t.width===e.width&&t.height===e.height&&t.left===e.left&&t.top===e.top&&t.right===e.right&&t.bottom===e.bottom&&(r=n)}));n(r)}))}};function mn(t,e){var n=ee.getCurrentPage(),r=n.route||n.is||"",o=n.options||{},i=F().ctx,s=K(),c=R.obj2queryStr(o,!0),u=E.cloneDeep(t);c&&(r="".concat(r,"?").concat(c));E.isEmptyObject(u.query)?u.query=o:"string"==typeof u.query&&(u.query=D.query2obj(u.query));if("object"===a(u.query)){u.query.$$_share_uid=i[V()].getMetaInfo("_anony_id");u.query.$$_utm_medium=3;u.query=R.obj2queryStr(u.query)}var f=u.path||r,p="$$_share_uid=".concat(u.query.$$_share_uid,"&$$_utm_medium=3");f.indexOf("?")>-1?u.path="".concat(f,"&").concat(p):u.path="".concat(f,"?").concat(p);u.status="ready";t.promise&&(u.promise=t.promise);i[s].push({action:ht.PUBLISH,arguments:[e,u]});return u}function vn(){F().ctx[K()].push({action:ht.PUBLISH,arguments:["onPullDownRefresh",{status:"ready"}]})}function yn(){var t={status:"ready",context:this};F().ctx[K()].push({action:ht.PUBLISH,arguments:["onReachBottom",t]})}function Sn(t){var e=F().ctx,n=K();try{_n.setCurrentPath(this.route);t&&_n.setPageQuery(this.route,t);U().i("Page onLoad: ",this.route,t);var r=this;dn.onAplusReady(e[n],ht.SUBSCRIBE,(function(){var a=function(t){var e=F().ctx[V()].getMetaInfo(Pt.GLOBAL_PROPERTY),n=Object.keys(t);E.eachMap(e,(function(r){var a=!1;v(n,(function(t){if(D.isStartWith(t,"utm_")){a=!0;return"break"}}));a&&0===r.indexOf("utm_")&&!t[r]&&delete e[r]}));return Object.assign({},e,t)}(ee.getUtmParamsObj(t));e[V()].appendMetaInfo(Pt.GLOBAL_PROPERTY,a);e[n].push({action:ht.PUBLISH,arguments:["onLoad",{status:"ready",context:r}]});var o=ee.getCurrentPage();Ft.resetFn(o,"setData",(function(t){e[n].push({action:ht.PUBLISH,arguments:["onPageDataChanged",{data:t,context:r}]})}))}))}catch(t){U().w("onPageLoad: ",t)}}function In(){var t=F().ctx,e=K(),n=this;try{_n.setCurrentPath(this.route);var r=this;setTimeout((function(){dn.onAplusReady(t[e],ht.SUBSCRIBE,(function(){t[e].push({action:ht.PUBLISH,arguments:["onShow",{status:"ready",context:r,route:n.route}]})}))}),0)}catch(t){U().w("onPageShow: ",t)}}function bn(){var t=F().ctx,e=K();try{t[e].push({action:ht.PUBLISH,arguments:["onReady",{status:"ready",context:this,route:this.route}]})}catch(t){U().w("onPageReady: ",t)}}function Pn(){var t=F().ctx,e=K();try{t[e].push({action:ht.PUBLISH,arguments:["onHide",{status:"ready",route:this.route}]})}catch(t){U().w("onPageHide: ",t)}}function En(t){F().ctx[K()].push({action:ht.PUBLISH,arguments:["onAplusClk",{status:"ready",event:t,context:this}]})}function An(t){F().ctx[K()].push({action:ht.PUBLISH,arguments:["onAplusTouch",{status:"ready",context:this,event:t}]})}function Tn(t){if(t.onShareAppMessage){var e=t.onShareAppMessage;t.onShareAppMessage=function(t){return mn(e.call(this,t)||{},"onShareAppMessage")}}}function On(){try{var t,e=Page;e.after&&(t=e.after);Page=function(t){Ft.FunctionUtils.rewriteFn(t,"onShow",In);Ft.FunctionUtils.rewriteFn(t,"onHide",Pn);Ft.FunctionUtils.rewriteFn(t,"onUnload",Pn);Ft.FunctionUtils.rewriteFn(t,"onLoad",Sn);Ft.FunctionUtils.rewriteFn(t,"onReady",bn);Ft.FunctionUtils.rewriteFn(t,"onPullDownRefresh",vn);Ft.FunctionUtils.rewriteFn(t,"onReachBottom",yn);Ft.FunctionUtils.rewriteFn(t,"onAplusClk",En);Ft.FunctionUtils.rewriteFn(t,"onAplusTouch",An);Tn(t);!function(t){if(t.onShareTimeline){var e=t.onShareTimeline;t.onShareTimeline=function(t){return mn(e.call(this,t)||{},"onShareTimeline")}}}(t);e(t)};t&&(Page.after=function(){t.apply(this,arguments)})}catch(t){U().w("Page hook error")}}function wn(){try{var t=Component;Component=function(e){try{e.methods=e.methods||{};var n=e.methods;Ft.FunctionUtils.rewriteFn(n,"onShow",In);Ft.FunctionUtils.rewriteFn(n,"onHide",Pn);Ft.FunctionUtils.rewriteFn(n,"onUnload",Pn);Ft.FunctionUtils.rewriteFn(n,"onLoad",Sn);Tn(n);t(e)}catch(n){t(e)}}}catch(t){U().w("Component hook error")}}function Cn(t,e,n){["object","function"].indexOf(a(t))>-1?n():U().w("typeof ".concat(e," is not object cant watchExp."))}var kn,Mn={},xn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){Cn(Page,"Page",On);Cn(Component,"Component",wn);!function(){var t=this,e=F().ctx,n=ee.getPlatformContext();try{if(n&&n.setNavigationBarTitle){var r=n.setNavigationBarTitle;Object.defineProperty(n,"setNavigationBarTitle",{get:function(){return function(n){var a=ee.getCurrentPage(),o=a.route||a.is;n=E.isObject(n)?n:{};Mn[o]=n.title;e[V()].globalTitleMap=Mn;r.call(t,n)}}})}}catch(t){U().w(t)}}()}}]);return t}(),Nn=re(Object.freeze({__proto__:null,default:xn})),Dn=function(t){for(var e=t.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=t[r];return n},Rn=L.extend({callable:function(t){if(!O(t))throw new TypeError(t+" is not a function");return t},create:function(t){var e=new this;for(var n in t)e[n]=t[n];e.handlers=[];e.pubs={};return e},setHandlers:function(t){this.handlers=t},subscribe:function(t,e){this.callable(e);var n=this,r=(n.pubs||{})[t]||[];if(r)for(var a=0;a<r.length;a++){var o=r[a]();e.apply(n,o)}var i=n.handlers||[];t in i||(i[t]=[]);i[t].push(e);n.setHandlers(i);return n},unsubscribe:function(t,e){this.callable(e);try{var n=this.handlers[t];if(!n)return this;if("object"===a(n)&&n.length>0){for(var r=0;r<n.length;r++)e.toString()===n[r].toString()&&n.splice(r,1);this.handlers[t]=n}else delete this.handlers[t]}catch(t){}return this},publish:function(t){var e=Dn(arguments),n=this.handlers||[],r=n[t]?n[t].length:0;if(r>0)for(var a=0;a<r;a++){var o=n[t][a];O(o)&&o.apply(this,e)}return this},cachePubs:function(t){var e=this.pubs||{},n=Dn(arguments);e[t]||(e[t]=[]);e[t].push((function(){return n}))}}),Un=re(Object.freeze({__proto__:null,default:Rn})),Ln=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=G(V()),e="".concat(V(),"_pubsub");if(!t[e]){var n=Un.default.create();t[e]=n}}}]);return t}(),jn=re(Object.freeze({__proto__:null,default:Ln})),Bn={};function Fn(){return kn||function(){kn=Bn||{};return Bn}()}function Vn(t,e){var n=G(V());kn||(kn={});if("aplus-inject-record-gokey"===t){!function(t){try{U().w(t)}catch(t){}}("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter");n.record("/inject.record.gokey","OTHER","")}kn[t]=e;return!0}function Kn(t){kn||(kn={});return kn[t]||""}function Gn(t,e){if(t&&e){var n,r=function(n){n.constructor===Array?function(n){try{var r="string"==typeof e?JSON.parse(e):e;o(t,n.concat(r))}catch(t){}}(n):function(n){try{var r="string"==typeof e?JSON.parse(e):e;o(t,Object.assign({},n,r))}catch(t){}}(n)},o=function(t,e){qn(t,e)},i=Kn(t);if("aplus-exinfo"===t){o(t,E.assign(i,k(e)));n=!0}if("aplus-page-properties"===t){var s=e;if(i)for(var c in i)e[c]?s[c]=E.assign(i[c],e[c]):s[c]=i[c];o(t,s);n=!0}if(i)if("object"===a(i)){r(i);n=!0}else try{var u=JSON.parse(i);if("object"===a(u)){r(u);n=!0}}catch(t){}n||o(t,e)}}function qn(t,e){var n,r,o="OVERWRITE",i=o;if("object"===a(t)){n=t.metaName;r=t.metaValue;i=t.mode||o}else{n=t;r=e}if(i!==o)return Gn(n,r);if(Vn(n,r)){var s=H("_$")||{};s.meta_info=Fn();var c=Y("_$",s),u=["setMetaInfo",n,r,{}];z(u);W(u);if(n===ht._ANONY_ID||n===ht._DEV_ID||n===ht._USER_ID)ee.setStorageSync(n,r||"");else{!ee.getStorageSync(ht._ANONY_ID)&&s.meta_info[ht._ANONY_ID]&&ee.setStorageSync(ht._ANONY_ID,s.meta_info[ht._ANONY_ID]);!ee.getStorageSync(ht._DEV_ID)&&s.meta_info[ht._DEV_ID]&&ee.setStorageSync(ht._DEV_ID,s.meta_info[ht._DEV_ID]);!ee.getStorageSync(ht._USER_ID)&&s.meta_info[ht._USER_ID]&&ee.setStorageSync(ht._USER_ID,s.meta_info[ht._USER_ID])}return c}}var Hn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=this.options.context&&this.options.context.sdk_config,e=G(V()),n=e._$=e._$||{};n.is_terminal=!0;n.send_pv_count=0;n.spm={data:{}};n.meta_info=Fn()||{};e.globalConfig=t.globalConfig;for(var r in t.metaInfo)Vn(r,t.metaInfo[r]);e._$=n;e.isInternational=function(){return!1}}}]);return t}(),Yn=re(Object.freeze({__proto__:null,default:Hn})),Qn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getLogConfig",value:function(){var t={},e=this.options.config.plugins,n=function(n){t[n]={plugins:e[n],context:{}};v(e[n],(function(e){t[n].context[e.name]=e.config||{}}))};for(var r in e)n(r);return t}},{key:"run",value:function(){this.options.context.logConfig=this.getLogConfig();this.options.context.logConfig.pageLoadTime=this.options.context.PAGE_LOAD_TIME}}]);return t}(),$n=re(Object.freeze({__proto__:null,default:Qn})),zn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getMetaInfo",value:function(){return(H("_$")||{}).meta_info}},{key:"getAplusWaiting",value:function(){return(this.getMetaInfo()||{})["aplus-waiting"]}},{key:"run",value:function(t,e){var n=this.options.config||{},r=this.getAplusWaiting();if(r&&n.is_auto){r="".concat(this.getAplusWaiting());this.options.context.when_to_sendpv={aplusWaiting:r};switch(r){case ht._USER_ID:case ht._ANONY_ID:case"MAN":return"done";case"1":this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),6e3);return 6e3;default:var a=1*r;if("NaN"!=="".concat(a)){this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),a);return a}}}}}]);return t}(),Wn=re(Object.freeze({__proto__:null,default:zn})),Jn=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getMetaInfo",value:function(t){return((H("_$")||{}).meta_info||{})[t]}},{key:"getHostUrl",value:function(){var t=this.getMetaInfo(Pt.TRACKDOMAIN)||this.getMetaInfo(Pt.APLUS_PV_DOMAIN);if(Ft.checkDomain(t)){var e=ee.getLogDomain();if(!e){U().tip_w("current miniapp framework is not supported!!");return""}return Ft.fixDomain(t)+e}}},{key:"run",value:function(){this.options.context.where_to_send.method="POST";var t=this.getHostUrl();if(!t||t.indexOf("https://")<0&&t.indexOf("http://")){U().w("current trackDomain invalid: ".concat(t));return"done"}this.options.context.where_to_send.url=t}}]);return t}(),Xn=re(Object.freeze({__proto__:null,default:Jn}));function Zn(t,e,n){return t?Ft.hash(encodeURIComponent(t)).substring(0,e):n}var tr={getLogId:function(t,e){var n=function(t){var e,n="",r=!1;function a(t){return 1===t?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):2===t?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):"0"}for(;n.length<t;){e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(62*Math.random()),1);if(!r&&n.length<=2&&("g"===e.toLowerCase()||"l"===e.toLowerCase()))if(0===n.length&&"g"===e.toLowerCase()){if(Math.random()<.5){e=a(1);r=!0}}else if(1===n.length&&"l"===e.toLowerCase()&&"g"===n.charAt(0).toLowerCase()){e=a(2);r=!0}n+=e}return n}(8),r=n.substring(0,4),a=n.substring(0,6);return[Zn(t,4,r),Zn(e,4,r),a].join("")}},er=ht.SPM_CNT,nr=ht.SPM_URL,rr=ht.SPM_PRE,ar=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getCommonParams",value:function(){var t=G(V()),e=this.options.context||{},n=e.etag||{},r=e.userdata||{},a=H("_$")||{},o=a.spm||{},i=this.options.config||{},s=t.getMetaInfo("platformType")||ee.getPlatformType(),c={_dev_id:t.getMetaInfo("_dev_id"),_anony_id:t.getMetaInfo(ht._ANONY_ID),_user_id:t.getMetaInfo(ht._USER_ID),_user_nick:t.getMetaInfo("_user_nick"),_session_id:t.getMetaInfo("_session_id"),uaid:"1"==="".concat(t.getMetaInfo("uaid"))?1:0},u=t._aplus_client||{},f=t.globalConfig||{},p="";try{var l=getCurrentPages(),g=l[l.length-1]||{};p=r.gokey&&r.gokey.currentPath||g.route||g.is;r.gokey.currentPath&&delete r.gokey.currentPath}catch(t){}var h=(new Date).getTime()+p,_=u.model+u.networkType+i.title+n.cna,d=(f.isDecodeUrl?"DC_":"")+tr.getLogId(h,_),m=Ft.getAppKey();m||U().w("please set appKey in aplus metaInfo before sendPV!");var v=Object.assign({},{appKey:m,cache:d,cna:n.cna,etag:n,pre:a.page_referrer||"-",sdk_info:{jsver:f.script_name,skv:f.lver,customSdkId:t.getMetaInfo("customSdkId")||"",platformType:s.toLowerCase()},title:i.title||"",url:p,client:u,timeZone:Ft.getTimeZone(),gmkey:r.gmkey||"",method:this.options.context.where_to_send.method},c),y=c;o.spm_url&&(y[nr]=o.spm_url||"");o.spm_pre&&(y[rr]=o.spm_pre||"");o.spm_cnt&&(y[er]=o.spm_cnt||"");y[ht.PVID]=t.pvid||"";v.sessionArgs=t.getMetaInfo("aplus-session-args");v.globalArgs=t.getMetaInfo("aplus-global-args");v.gokey=y;return v}},{key:"getPvParams",value:function(){var t=G(V()),e=this.getCommonParams();this.options.config.is_auto||(e.sdk_info.mansndlog=1);return Object.assign({},e,{event_code:ht.PV_CODE,logtype:"1",logkey:"/vx.gif",event_timestamp:t._$.send_pv_count>0?new Date:t.logConfig.pageLoadTime})}},{key:"getHjljParams",value:function(){var t=(this.options.context||{}).userdata||{},e={event_code:dt[t.gmkey]||t.gmkey,logkey:t.logkey,event_timestamp:new Date};return Object.assign({},this.getCommonParams(),e)}},{key:"run",value:function(){var t={};t="PV"===this.options.config.recordType?this.getPvParams():this.getHjljParams();this.options.context.what_to_send.logdata=t}}]);return t}(),or=re(Object.freeze({__proto__:null,default:ar})),ir=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=ee.isTB(),e=G(V()),n=this.options.context.what_to_send.logdata||{},r=getCurrentPages(),a=r[r.length-1]||{};a&&!n.title&&(n.title=a.route||"");var o="-";if(r.length>1){var i=r[r.length-2]||{};o=(!t&&e.globalConfig.isAli?"https://".concat(n.client.appId,"_"):"")+(i.route||i.is||"-")}n.pre=o;n.sdk_info&&(n.sdk_info.windmill="1");this.options.context.what_to_send.logdata=n}}]);return t}(),sr=re(Object.freeze({__proto__:null,default:ir})),cr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getUserdata",value:function(){var t=G(V()),e=this.options.config||{},n={};e&&!e.is_auto&&e.gokey&&("string"==typeof e.gokey?n=k(e.gokey):"object"===a(e.gokey)&&(n=e.gokey));var r=function(t){S.isArray(t)?t.forEach((function(t){n=Object.assign({},n,t)})):n=Object.assign({},n,t)};r(t.getMetaInfo("aplus-cpvdata"));var o=ee.getCurrentPage(),i=o.route||o.is||"page",s=(t.getMetaInfo("aplus-page-properties")||{})[i];"object"===a(s)&&r(s);r((this.options.context||{}).userdata||{});return n}},{key:"updatePre",value:function(t){var e=this.options.config||{},n=H("_$")||{};if(e&&e.referrer){n.page_referrer=e.referrer;t.pre=e.referrer}Y("_$",n);return t}},{key:"updateUrl",value:function(t){var e=this.options.config||{};e&&e.pageUrl&&(t.url=e.pageUrl);return t}},{key:"updateSpmUrl",value:function(t){var e=this.options.config||{},n=e[ht.SPM_URL]||e.spmUrl;w(n)||(t.gokey[ht.SPM_URL]=n);return t}},{key:"updateSpmPre",value:function(t){var e=this.options.config||{},n=e[ht.SPM_PRE]||e.spmPre;w(n)||(t.gokey[ht.SPM_PRE]=n);return t}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=Object.assign({},this.getUserdata(),t.userdata||{});t.gokey=Object.assign({},t.gokey,e);t=this.updatePre(t);t=this.updateUrl(t);t=this.updateSpmUrl(t);t=this.updateSpmPre(t);this.options.context.what_to_send.logdata=t;this.options.context.userdata=t.gokey}}]);return t}(),ur=re(Object.freeze({__proto__:null,default:cr}));function fr(t,e){if(!Pe())try{var n=ee.getPlatformContext();return E.isEmptyObject(n)?void 0:e===Pt.APP_START||e===Pt.APP_END}catch(t){}var r=Ae(),a=be(),o=Ft.LocalCfgUtils.getAutoTrackStatus();if(("string"==typeof t?C(N(t)):t||{}).auto_element){if(2===a||2===r)return;if(!r&&!o)return}if(function(t){var e=G(V()).getMetaInfo(Pt.APLUS_EVENT_LIMITRATES);if(e&&e.length>0){var n=S.find(e,(function(e){return e.eventId===t}));return!n||Math.ceil(1e3*Math.random())<1e3*n.samplingRate}return!0}(e))return!0}var pr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=H("_$")||{},e=this.options.context.can_to_sendpv||{},n=t.send_pv_count||0;if(!function(t){var e=Pe(),n=Ee(),r=Ft.LocalCfgUtils.localAutoPVDisabled(),a=!0;if(e){if(t)return!(2===n||!n&&r)}else a=!1;return a}((this.options.config||{}).track_type))return"done";e.flag="YES";this.options.context.can_to_sendpv=e;t.send_pv_count=++n;Y("_$",t)}}]);return t}(),lr=re(Object.freeze({__proto__:null,default:pr})),gr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"getUserData",value:function(){var t=G(V()),e=this.options.context||{},n=e.userdata||{},r=e.what_to_send.logdata.gokey;r=E.assign(r,k(n.gokey));r=E.assign(r,k(t.getMetaInfo("aplus-exinfo")||{}));var a=t.getMetaInfo("aplus-exdata");S.isArray(a)?a.forEach((function(t){r=E.assign(r,t)})):r=E.assign(r,a||{});return r}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=this.getUserData();"1010"===t.gmkey&&(t.arg1=e.duration||t.logkey);t.gokey=e;this.options.context.what_to_send.logdata=t}}]);return t}(),hr=re(Object.freeze({__proto__:null,default:gr})),_r=L.extend({_send:function(t,e,n,r,o){"object"===a(e)&&"POST"===n?ee.request(t,{method:n,data:e,dataType:"base64"},r,o):ee.request("".concat(t,"?").concat(e),{method:n,dataType:"base64"},r,o);return t},_requestVTConfig:function(t,e,n){ee.request(t,{method:"GET",dataType:"json"},e,n)},_requestRemoteConfig:function(t,e,n){ee.request(t,{method:"GET",dataType:"json"},e,n)},_sendPV:function(t,e){var n=G(V());(t=t||{}).pageName&&n._setMetaInfo("".concat(Pt.APLUS,"-pagename"),t.pageName);var r=new et;t.recordType="PV";t.method||(t.method="GET");var a=n.logConfig.pv;r.run({plugins:a.plugins,context:E.cloneDeep(a.context)},{config:t,userdata:e||{},pubsubType:"pv",middlewareMessageKey:"mw_change_pv"});return!0},_combineRecord:function(t,e,n,r){var o=G(V()),i="EXP";if(!o.globalConfig.isAli||e!==i&&"CLK"!==e)U().w("only support EXP or CLK log to combile record!");else if(S.isArray(n)){r||(r="POST");var s=[],c="true";n.forEach((function(t){s.push({exargs:"object"===a(t.exargs)?t.exargs:{},scm:t.scm,spm:t.spm,aplusContentId:t.aplusContentId});"false"===t._aplus_sendtomy&&"true"===c&&(c="false")}));var u=[];u.push((e===i?"expdata=":"clkdata=")+JSON.stringify(s));u.push(e===i?"_is_auto_exp=1":"_is_auto_clk=1");u.push("_eventType=custom");u.push("_method=".concat(r));u.push("_pkgSize=".concat(n.length));"false"===c&&u.push("_aplus_sendtomy=false");o.record(t,e,u.join("&"),r)}else U().w("type of gokeys must be ArrayObject!")},_record:function(t,e,n,r,o){var i=G(V());!function(t,e){var n=$();n&&a(n.subscribe)===Q&&n.subscribe(t,e)}("aplusInitContext",(function(a){if("complete"===a.status){n=function(t){var e=Kn("aplus-inject-record-gokey");return"function"==typeof e?e(t):t.gokey}({logkey:t,gmkey:e,gokey:n});t+="";var s=new et,c=i.logConfig.hjlj;fr(n,t)&&s.run({plugins:c.plugins,context:E.cloneDeep(c.context)},{config:{recordType:"COMMON_HJLJ",method:r||"GET"},userdata:{logkey:t,gmkey:e,gokey:n},pubsubType:"hjlj",middlewareMessageKey:"mw_change_hjlj"},(function(){O(o)&&o()}))}}));return!0},getPageSPM:function(){var t=((G(V())._$||{}).spm||{}).data||{};return[t.a,t.b]},_setPageSPM:function(){var t,e,n={},r=arguments;if("object"===a(r[0])){n=r[0];t=r[1]}else{n.spmCnt=[r[0],r[1],"0","0"].join(".");t=r[2]}if(n.spmCnt||n.spmUrl||!Kn("pageConfig")){z(e=["setPageSPM",n]);W(e)}else{z(e=["clearPageSPM"]);W(e)}("function"==typeof t?t:function(){})(e)},_setMetaInfo:function(t,e){return qn(t,e)},_appendMetaInfo:Gn,getMetaInfo:function(t){return Kn(t)},cloneDeep:E.cloneDeep,_setPageName:function(t,e){if(t){var n=e||_n.getCurrentPagePath(),r=E.cloneDeep(Kn("pageConfig")||{});r[n]=t;Gn("pageConfig",r)}else U().w("setPageName failed: pageName=".concat(t))},getPageName:function(t){return _n.getPageName(t)},_getElementSPM:function(t,e){if(t){var n=_n.getPageName()||"";if("string"!=typeof t){var r=t.dataset&&t.dataset.trackerParams||"",a=T.jsonStr2json(r);return[n,a.spmC,a.spmD].join(".")}var o,i=ee.getPlatformContext(),s=Kn("aplus-auto-clk")||[],c=Kn("aplus-auto-exp")||[];try{var u;for(u=0;u<s.length;u++){var f=s[u];if(f.cssSelector===t){o=[f.spmB||n,f.spmC,f.spmD].join(".");break}}for(u=0;u<c.length;u++){var p=c[u];if(p.cssSelector===t){o=[p.spmB||n,p.spmC,p.spmD].join(".");break}}var l=i.createSelectorQuery().selectAll(t);"function"==typeof l.fields&&l.fields({dataset:!0,id:!0},(function(t){var n=[];if(t&&t.length>0){for(var r=1;r<=t.length;r++)n.push("".concat(o,"_").concat(r));e&&"function"==typeof e&&e(n)}})).exec()}catch(t){U().w("current miniapp platform does not support dom element query, errmsg: ",t)}}},_recordAppLink:function(t,e,n){if(!t.targetAppKey){U().w("send $$_app_link failed: targetAppKey is null");return!1}return G(V())._record("$$_app_link","OTHER",t,e,n)},_updatePageProperties:function(t,e){var n,r=e||_n.getCurrentPagePath(),a=G(V()).getMetaInfo(Pt.PAGE_CONFIG);if(!E.isEmptyObject(t))if(a&&a[r]){a[r].properties=t;n=a}else{var o=Object.create(null);o[r]={properties:t};n=o}n&&Gn(Pt.PAGE_CONFIG,n)},_reportUserInfo:function(t,e){var n={};t&&("string"==typeof t?n._user_email=t:U().w("请输入正确类型的user_email"));e&&("string"==typeof e?n._user_mobile=e:U().w("请输入正确类型的user_mobile"));Object.keys(n).length&&G(V()).record("$$_user_profile","OTHER",n)}});t.run=_r;var dr={run:_r},mr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){!function(t){var e=G(V());if(!e._aplus_api){e._aplus_api={status:ht.COMPLETE};var n=dr.run.create({logConfig:t});for(var r in n)e[r]=n[r];q(V(),e);var a=[ht.SDK_READY,ht.COMPLETE];z(a);W(a)}}(this.options.context.logConfig)}}]);return t}(),vr=re(Object.freeze({__proto__:null,default:mr})),yr="POST";function Sr(t,e){var n="";try{var r=Number(t);n=parseFloat(r.toFixed(e))}catch(e){n=t}return n}var Ir={pushEvent:function(t,e,n,r,a,o){var i=G(V()),s=n.props,c={},u={};if(e)for(var f in e)f.toLowerCase().match(/^data-/)?u[f.toLowerCase().replace(/^data-/,"").replace(/-/g,"")]=e[f]:u[f]=e[f];if(s&&S.isArray(s))for(var p=0;p<s.length;p++){var l=s[p].toLowerCase().replace(/^data-/,"").replace(/-/g,"");c[l]=u[l]}r&&"EXP"===t&&(c=Object.assign({},c,{_w:Sr(r.width,2),_h:Sr(r.height,2),_x:Sr(r.x,2),_y:Sr(r.y,2),_rate:Sr(r.viewabilityRate||r.intersectionRatio,2),_viewability:"intersection"}));n._vt&&(c._vt=n._vt);var g=function(t,e,n,r){var a=G(V()).getMetaInfo;if("function"==typeof a){var o=a(t),i={};"function"==typeof o&&(i=o(e?E.cloneDeep(e):{},n,r));return R.query2obj(i)}return{}}("EXP"===t?"aplus-auto-exp-userfn":"aplus-auto-clk-userfn",r,n.cssSelector,a);g.spm||(g.spm=a&&a.b?a:void 0);var h,_=e.trackerParams||e["tracker-params"];if(_)try{var d=JSON.parse(_);delete(c=Object.assign(c,d)).trackerParams;delete c.trackerparams}catch(t){}h=Object.assign({is_auto:1},c,g,n.customArgs);if(o){var m=o.route;i.record(n.logkey,t,Object.assign({},h,{currentPath:m}),yr)}else i.record(n.logkey,t,h,yr)}};function br(t,e){var n=(H("_aplus_auto_exp")||{}).hashMap||{};for(var r in n)for(var a=n[r]||[],o=0;o<a.length;o++){var i=a[o]||{},s=i.expConfig||{};if(t.cssSelector===s.cssSelector&&Ft.getHashKey({index:e},s)===i.hash_value)return E.cloneDeep(i.dataset)}}function Pr(){var t=F().ctx,e=G(V()),n=K(),r=[],a=function(t){r=e.getMetaInfo("aplus-auto-clk");var n=_n.getPageName(),a=[];function o(e,n){S.isArray(e)&&a.push({config:n,elements:e});a.length===r.length&&function(t,e,n){var r,a=[];S.each(e,(function(e){for(var n=e.elements,r=e.config,i=0;i<n.length;i++){var s=n[i];if(o(t,s)){var c=i+1,u=s.dataset||br(r,c)||{},f={},p=T.jsonStr2json(u.trackerParams)||{};f.b=r.spmB;r.spmC?f.c=r.spmC:f.c=p.spmC?encodeURIComponent(p.spmC):"";r.spmD?f.d=c?"".concat(r.spmD,"_").concat(c):r.spmD:f.d=p.spmD?encodeURIComponent(p.spmD):"";a.push({dataset:u,config:r,element:s,spmData:f})}}}));1===a.length?r=a[0]:a.length>1&&(r=a.reduce((function(t,e){var n=t,r=t.element,a=e.element;a.top>=r.top&&a.right<=r.right&&a.bottom<=r.bottom&&a.left>=r.left&&(n=e);return n})));r&&Ir.pushEvent("CLK",r.dataset,r.config,r.element,r.spmData,n);function o(t,e){var n={};t&&(t.changedTouches?n=t.changedTouches[0]:t.detail&&(n=t.detail));var r=n.clientX||0,a=n.clientY||0,o=e.top,i=e.bottom;if(e.scrollTop){o+=e.scrollTop;i+=e.scrollTop}return e.left<r&&r<e.right&&o<a&&a<i}}(t.event,a,t.context)}S.isArray(r)&&r.forEach((function(t){D.isStartWith(t.cssSelector,".")||(t.cssSelector=".".concat(t.cssSelector));t.spmB||(t.spmB=n);var e=ee.getPlatformContext().createSelectorQuery().selectAll(t.cssSelector);"function"==typeof e.fields?e.fields({id:!0,dataset:!0,rect:!0,scrollOffset:!0},(function(e){o(e,t)})).exec():e.boundingClientRect().exec((function(e){o(e,t)}))}))};t[n].push({action:ht.SUBSCRIBE,arguments:[ht.SDK_READY,function(t){"complete"===t&&(r=e.getMetaInfo("aplus-auto-clk"))}]});t[n].push({action:ht.SUBSCRIBE,arguments:["onAplusClk",function(t){"ready"===t.status&&a(t)}]})}var Er=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){Pr()}}]);return t}(),Ar=re(Object.freeze({__proto__:null,default:Er}));function Tr(t){var e=G(V());return e&&e.getMetaInfo?e.getMetaInfo(t):Lt.getMetaCnt(t)}var Or=function(t){var e=t;try{var n=Tr("aplus-auto-exp-visible");n&&(e=parseFloat(n));e<=0&&(e=t);return e}catch(n){return e=t}},wr=Or(.3);Or("aplus-auto-exp-visible");Or("aplus-auto-exp-window");!function(t){var e=t;try{var n=Tr("aplus-auto-exp-duration"),r=parseInt(n,10);"NaN"!=="".concat(r)&&(e=r);return e}catch(t){return e}}(300);function Cr(t){return function(t,e){var n,r=[],o=[];try{n=e||Tr(t);var i=[];if(n&&"string"==typeof n)try{i=JSON.parse(n)}catch(t){i=JSON.parse(n.replace(/'/g,'"'))}else"object"===a(n)&&n.constructor===Array&&(i=n);if(i&&i.constructor===Array)for(var s=0;s<i.length;s++){var c=i[s]||{},u=c.logkey||"",f=c.tag?c.tag:"",p=c.filter,l=c.cssSelector;if(!u||!(l||f&&p))throw new Error("meta ".concat(t," config error, ").concat(JSON.stringify(c)));p="string"==typeof p?p.split("="):[];var g=f;p.length>=2?g+="[".concat(p.shift(),'="').concat(decodeURIComponent(p.join("")),'"]'):1===p.length&&p[0]&&(g+="[".concat(decodeURIComponent(p[0]),"]"));l&&(g+=l);c.elementSelector=g;if(S.indexOf(o,g)>-1)throw new Error("meta ".concat(t," config error, tag_filter_cssSelector ").concat(g," repeated"));o.push(g);r.push(c)}return r}catch(t){U().w(t);return r}}("aplus-auto-exp",t)||[]}var kr,Mr=[];function xr(t,e,n,r){kr&&!r||(kr=ee.getPlatformContext());var a,o=(H("_aplus_auto_exp")||{}).hashMap||{};!function r(s){if(s<e.length){var c=e[s];a=0;Mr.forEach((function(t){t.subject[0]===c.cssSelector&&t.subject[1]===c.positionSelector&&(a=1)}));var u=[c.cssSelector,c.positionSelector];!function(t){var e=u[0];e&&!D.isStartWith(u[0],".")&&(e=".".concat(e));try{var n=kr.createSelectorQuery().selectAll(e);"function"==typeof n.fields?n.fields({dataset:!0,id:!0},(function(e){S.isArray(e)&&t({elements:e,type:"COMMON"})})).exec():U().w("current platform does not support auto exposure tracking!")}catch(t){U().w("current platform does not support auto exposure tracking! err = ",t)}}((function(f){if(0===a||0===n){var p=function(t){var e={thresholds:[wr],initialRatio:0},n=!1;try{my&&(n=!0)}catch(t){}if(n){e.selectAll=!0;return kr.createIntersectionObserver(e)}e.observeAll=!0;return kr.createIntersectionObserver(t,e)}(t);p.subject=u;Mr.length>e.length-1&&Mr.shift().disconnect();Mr.push(p);S.each(f.elements,(function(t,e){t.index="".concat(e+1);(function(t,e){var n=Ft.getHashKey(t,e),r=t.index;o[e.logkey]&&o[e.logkey].forEach((function(t){if(t.hash_value===n&&t.index===r)return!0}));return!1})(t,c)||i(t,c)}));!function(t,e,n){var r=e.cssSelector;r&&!D.isStartWith(r,".")&&(r=".".concat(r));e.positionSelector?t.relativeTo(e.positionSelector).observe(r,(function(t){try{n(t,e)}catch(t){U().w("errorMessage: ",t)}})):t.relativeToViewport().observe(r,(function(t){try{n(t,e)}catch(t){U().w("errorMessage: ",t)}}))}(p,c,(function(t,e){dn.getIndexByRect(e.cssSelector,t.boundingClientRect,(function(n){var r=n+1;if(r){var a=E.cloneDeep(t);a.index="".concat(r);var o=E.cloneDeep(a.dataset);i({id:a.id,index:a.index,dataset:o},e);!function(t,e,n){var r=function(t,e,n){var r=(H("_aplus_auto_exp")||{}).hashMap||{},a=[];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))for(var i=r[o]||[],s=0;s<i.length;s++){var c=Ft.getHashKey(e,n),u=i[s]||{};if(0===u.status&&u.expConfig&&c===u.hash_value){var f=e.boundingClientRect||{};if(f.width&&f.height){u.dataset=e.dataset;u.x=f.left;u.y=f.top;u.width=f.width;u.height=f.height;u.size=f.width*f.height;var p=wr;if(e.intersectionRatio>=p){u.exposureTime=t;u.status=1;a.push(u)}}}}return a}((new Date).getTime(),t,n);if(r&&r.length>0){var a=r[0],o={},i=T.jsonStr2json(e.trackerParams||{})||{},s=a.index;_n.getPageName()&&(o.b=_n.getPageName());n.spmC?o.c=n.spmC:o.c=i.spmC?encodeURIComponent(i.spmC):"";n.spmD?o.d=s?"".concat(n.spmD,"_").concat(s):n.spmD:o.d=i.spmD?encodeURIComponent(i.spmD):"";Ir.pushEvent("EXP",e,n,Object.assign({},t,{x:a.x,y:a.y,width:a.width,height:a.height,hash_value:a.hash_value}),o)}}(a,o,c)}}))}))}r(++s)}))}}(0);function i(t,e){var n=Ft.getHashKey(t,e);try{var r=t.index;if(o[e.logkey]){var a=0;o[e.logkey].forEach((function(e){if(e.hash_value===n){a=1;t.id&&(e.id=t.id);t.dataset&&(e.dataset=t.dataset);t.status&&(e.status=t.status)}}));a||o[e.logkey].push({id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r})}else o[e.logkey]=[{id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r}]}catch(t){U().w("error === ",t)}}}function Nr(){for(var t=0;t<Mr.length;t++)Mr[t].disconnect();Mr=[];var e=(H("_aplus_auto_exp")||{}).hashMap||{};for(var n in e)delete e[n]}var Dr={},Rr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){!function(){var t=F().ctx,e=0,n=0,r=G(V()),a=K();if(!r._aplus_auto_exp){r._aplus_auto_exp={hashMap:{}};var o=[];t[a].push({action:ht.SUBSCRIBE,arguments:["onShow",function(t){if("ready"===t.status){i(t.context,1,ht.SUBSCRIBE);if(0===e){s(t.context,1);e=1}else s(t.context,0);try{var n=ee.getCurrentPage(),r=n.route||n.is;Dr[r]=r}catch(t){}}}]});t[a].push({action:ht.SUBSCRIBE,arguments:["onAplusTouch",function(t){if("ready"===t.status)if(0===n){n=1;s(t.context,1)}else c(t)}]});t[a].push({action:ht.SUBSCRIBE,arguments:["onPageDataChanged",function(t){setTimeout((function(){c(t)}),200)}]});t[a].push({action:ht.SUBSCRIBE,arguments:["onHide",function(t){if("ready"===t.status){Dr={};e=0;n=0;i(t.context,1,ht.UNSUBSCRIBE);Nr()}}]});t[a].push({action:ht.SUBSCRIBE,arguments:["onUnload",function(t){if("ready"===t.status){Dr={};Nr()}}]})}function i(e,n,r){t[a].push({action:r,arguments:["setMetaInfo",function(t,r){if("aplus-auto-exp"===t){var a=Cr(r);if(JSON.stringify(a)===JSON.stringify(o))return;o=a;r&&o&&o.length>0&&xr(e,o,n)}}]})}function s(t,e){o=r.getMetaInfo("aplus-auto-exp");setTimeout((function(){xr(t,o,e)}),0)}function c(t){try{var e=ee.getCurrentPage(),n=e.route||e.is,r=Dr[n],a=JSON.stringify(t.data);if(r!==a){Dr[n]=a;s(t.context,0)}}catch(t){}}}()}}]);return t}(),Ur=re(Object.freeze({__proto__:null,default:Rr})),Lr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"pushQueue",value:function(t,e){G(K()).push({action:"".concat(V(),".").concat(t),arguments:e})}},{key:"run",value:function(){var t=this,e=G(V());v(_t,(function(n){e[n]=function(){var e=[];v(arguments,(function(t){e.push(t)}));var r="enter"===n?"_sendPV":"_".concat(n);t.pushQueue(r,e)}}))}}]);return t}(),jr=re(Object.freeze({__proto__:null,default:Lr})),Br=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"_getNetworkType",value:function(t){var e=ee.getPlatformContext();e.getNetworkType?e.getNetworkType({success:function(e){t(e?e.networkType:"")}}):t("")}},{key:"_getSystemInfo",value:function(t){var e=this,n={},r=e.SYSTEM_INFO||{};if(r&&r.version)t(e.SYSTEM_INFO);else try{ee.getPlatformContext().getSystemInfo({complete:function(r){r&&r.version?e._getNetworkType((function(n){r.networkType=n;e.SYSTEM_INFO=r;t(r)})):e._getNetworkType((function(e){n.networkType=e;t(n)}))}})}catch(e){t(n)}}},{key:"_getAccountInfoSync",value:function(){var t={};try{var e=ee.getPlatformContext();if(e.getAccountInfoSync&&e.canIUse("getAccountInfoSync")){var n=e.getAccountInfoSync(),r=n.miniProgram||{},a=n.plugin||{};t.appId=r.appId;t.appVersion=r.version||r.envVersion;t.pluginAppId=a.appId;t.pluginAppVersion=a.version}else if(e.getAppIdSync&&e.canIUse("getAppIdSync")){var o=e.getAppIdSync()||{};t.appId=o.appId||""}}catch(t){}return t}},{key:"run",value:function(t,e){var n=this;this._getSystemInfo((function(t){t.userAgent="-";t.os=t.platform?t.platform.toLocaleUpperCase():"";t.os_version=t.system?t.system:"";t.access=t.brand?t.brand:"";var r="";t.host&&"string"==typeof t.host.env&&(r=t.host.env);t.host=r;var a=n._getAccountInfoSync(),o=Object.assign({},t,a);G(V())._aplus_client=o;e()}));return 2e3}}]);return t}(),Fr=re(Object.freeze({__proto__:null,default:Br})),Vr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.queueName,e=F(),n=he(e[t]||[],"metaQueue");e[t]=n.queue;oe(n.formatQueue,this.options.config)}}]);return t}(),Kr=re(Object.freeze({__proto__:null,default:Vr})),Gr=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"enableSDK",value:function(t){F().ctx[K()].push({action:ht.SDK_SET_META_INFO,arguments:["_hold",t?"START":"BLOCK"]})}},{key:"emptyAnonyID",value:function(){F().ctx[K()].push({action:ht.SDK_SET_META_INFO,arguments:[ht._ANONY_ID,""]})}},{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo,e=G(V()),n=G(K()),r=t[Pt.AUTO_GET_OPENID],a=ee.getPlatformContext(),o=e&&e.getMetaInfo&&e.getMetaInfo(ht._ANONY_ID);if(r&&!o){var i=this;i.enableSDK(!1);var s=ee.getPlatformType();try{if("wx"===s){var c=a.getAccountInfoSync().miniProgram.appId,u=a.getStorageSync&&a.getStorageSync(ht._ANONY_ID),f=a.getStorageSync&&a.getStorageSync(ht._DEV_ID);if(u){n.push({action:ht.SDK_SET_META_INFO,arguments:[ht._ANONY_ID,u]});n.push({action:ht.SDK_SET_META_INFO,arguments:[ht._DEV_ID,f]});i.enableSDK(!0)}else{var p=t.appKey||Ft.getAppKey();a.login({success:function(r){if(r.code){var a=t[Pt.APLUS_PV_DOMAIN]||t[Pt.TRACKDOMAIN],o="".concat(a,"/mp/get_openid");ee.request(o,{method:"POST",dataType:"json",data:{appkey:p,code:r.code,appid:c,platform:s}},(function(t){if(t&&t.data&&200===t.data.code){var r=t.data.data;ve().set(ht._ANONY_ID,r.od);ve().set(ht._DEV_ID,r.ud);e.od=r.od;n.push({action:ht.SDK_SET_META_INFO,arguments:[ht._ANONY_ID,r.od]});n.push({action:ht.SDK_SET_META_INFO,arguments:[ht._DEV_ID,r.ud]});i.enableSDK(!0)}else{U().w("auto get openid failed errMsg:",t.data.message);i.emptyAnonyID();i.enableSDK(!0)}}),(function(t){U().w("auto get openid failed, errmsg = ",t&&t.message);i.emptyAnonyID();i.enableSDK(!0)}))}else{U().w("auto get openid failed");i.emptyAnonyID();i.enableSDK(!0)}},fail:function(){U().w("wechat login failed");i.emptyAnonyID();i.enableSDK(!0)}})}}else U().w("current miniapp platform:".concat(s," not support autoGetOpenid, please setMetaInfo _anony_id by yourself!"))}catch(t){U().w("get openid failed, errmsg = ",t);i.emptyAnonyID();i.enableSDK(!0)}}else U().w("auto get openid setting is",r?"true":"false")}}]);return t}(),qr=re(Object.freeze({__proto__:null,default:Gr})),Hr={catchException:function(t,e){var n=t;"object"===a(e)&&e.message&&(n="".concat(n,"_").concat(e.message));wt.pushIntoGoldlogQueue("".concat(V(),"._aplus_cplugin_m.do_tracker_jserror"),[{message:n,error:JSON.stringify(e),filename:t}])}},Yr={lsMinivtConfigKey:"APLUS_MINI_CONFIG",getMiniVtTplCdnPath:function(){var t=G(V()).getMetaInfo("aplus-track-config-id"),e=t&&t.turnon,n=t&&t.value;return"1"===e&&n?n:""},getVtConfigPath:function(){var t,e=this.getMiniVtTplCdnPath(),n=[],r=Ft.getAppKey();r&&(t=r);t&&(n=t.split("."));2===n.length?this.originSpm={spmA:n[0],spmB:n[1]}:1===n.length&&(this.originSpm.spmA=n[0]);return e||(2===n.length?n.join("_"):1===n.length?n[0]:void 0)},fetchFromLS:function(t){this.cdnpath||(this.cdnpath=t||this.getMiniVtTplCdnPath());var e=ee.getPlatformContext();return decodeURIComponent(e.getStorageSync("".concat(this.lsMinivtConfigKey,"-").concat(t)))||{}},setConfigIntoLs:function(t){this.cdnpath||(this.cdnpath=this.getVtConfigPath());ee.getPlatformContext().setStorageSync("".concat(this.lsMinivtConfigKey,"-").concat(this.cdnpath),encodeURIComponent(JSON.stringify(t)))}},Qr="MiniVtConfigBack",$r=ht.PUBLISH,zr=L.extend(E.assign(Yr,{pathname:"",pageConfig:{},originSpm:{spmA:"",spmB:""},updateCfgLs:function(){var t=this;setTimeout((function(){t.fetchFromCdn()}),1e3)},fetchFromCdn:function(){var t=this,e=G(V()),n=e.getMetaInfo("aplus-vt-cfg-url");if(n){var r=(new Date).getTime();e.requestVTConfig(n,(function(n){var o=n.data;e._minicfg_load=(new Date).getTime()-r;if(o)try{e._aplus_vt_cfg="object"===a(o)?o:JSON.parse(o);e._aplus_vt_cfg.points&&S.each(e._aplus_vt_cfg.points,(function(t){t.selector=decodeURIComponent(t.selector)}));t.setConfigIntoLs(e._aplus_vt_cfg)}catch(t){e._aplus_vt_cfg={enabled:!1}}wt.pushIntoGoldlogQueue($r,[Qr,{pageConfig:e._aplus_vt_cfg,enable:0}])}),(function(t){e._aplus_vt_cfg&&e._aplus_vt_cfg.enabled&&wt.pushIntoGoldlogQueue($r,[Qr,{pageConfig:e._aplus_vt_cfg,enable:0}]);Hr.catchException("getTrackerCfg",t,{msg:n})}),{timeout:5e3})}},getMiniVtData:function(t,e,n){var r=G(V());r._minicfg_load=0;if(t){var a=this.fetchFromLS(t);if("string"==typeof a)try{a=JSON.parse(a)}catch(t){a={}}a&&a.enabled&&(r._aplus_vt_cfg=a);n?this.fetchFromCdn(t,e):wt.pushIntoGoldlogQueue($r,[Qr,{pageConfig:a,enable:0}])}},syncMiniVtData:function(){var t=this.getVtConfigPath();this.getMiniVtData(t,"",!0)},init:function(){var t=this,e=ht.SUBSCRIBE;wt.pushIntoGoldlogQueue(e,[Qr,function(e){e.enable||(t.pageConfig=e.pageConfig);wt.pushIntoGoldlogQueue($r,["MiniVtConfigFormat",{pageConfig:t.pageConfig,originSpm:t.originSpm}]);!e.enable&&t.setConfigIntoLs(t.pageConfig)}]);t.syncMiniVtData()},run:function(){this.init();return this}}));function Wr(t,e){t=S.isArray(t)?t:[];e=S.isArray(e)?e:[];return[].concat(e,t).filter((function(t,e,n){return function(t,e){for(var n=-1,r=0;r<e.length;r++){var a=e[r];if(a.cssSelector===t.cssSelector&&a.logkey===t.logkey){n=r;break}}return n}(t,n)===e}))}function Jr(t){return S.isArray(t)?t.filter((function(t){return void 0===t._vt})):[]}function Xr(t){return/^[.#]/.test(t)?t:t?".".concat(t):""}function Zr(){var t=G(V()),e=t._aplus_vt_cfg||t._aplus_tracking_cfg;if(e&&e.pages){var n=function(t){var e=ee.getCurrentPage(),n=t||e.route,r=G(V()),o=r._aplus_vt_cfg||r._aplus_tracking_cfg,i=[],s=[];o&&o.pages&&S.each(o.pages,(function(t){r.setPageName({pageName:t.spmB,extraParams:t.extraParams},t.matchUrl);if(t.matchUrl===n){S.each(o.points,(function(e){t.spmB===e.spmB&&("exposure"===e.trackerType?i.push({cssSelector:Xr(e.selector),positionSelector:e.positionSelector,logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}):s.push({cssSelector:Xr(e.selector),logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}))}));o.common_exdata&&"object"===a(o.common_exdata)&&r.setMetaInfo("aplus-exdata",o.common_exdata);o.common_pvdata&&"object"===a(o.common_pvdata)&&r.setMetaInfo("aplus-cpvdata",o.common_pvdata)}}));return{EXP:i,CLK:s}}(),r=Jr(t.getMetaInfo("aplus-auto-exp"));t.setMetaInfo("aplus-auto-exp",Wr(r,n.EXP));var o=Jr(t.getMetaInfo("aplus-auto-clk"));t.setMetaInfo("aplus-auto-clk",Wr(o,n.CLK))}}function ta(){var t,e,n,r=F().ctx,a=G(V()),o="".concat(V(),"_pubsub"),i=K(),s=!1,c={ts:Date.now()},u={onPullDownRefresh:0,onShareTimeline:0,onReachBottom:0,onShareAppMessage:0,onClick:0};function f(){var a=arguments.length>0&&arguments[0]?arguments[0]:"",o=arguments.length>1&&arguments[1]?arguments[1]:"",f=ee.getCurrentPage(),p=o||f.route||f.is;switch(a){case"onPullDownRefresh":u.onPullDownRefresh+=1;r[i].push({action:Et.record,arguments:[e.logkey||"$$_pull_down_refresh","CLK",{event:a,page_name:_n.getPageName()||p,count:u.onPullDownRefresh,is_auto:1}]});break;case"onReachBottom":u.onReachBottom+=1;r[i].push({action:Et.record,arguments:[t.logkey||"$$_reach_bottom","CLK",{event:a,page_name:_n.getPageName()||p,count:u.onReachBottom,is_auto:1}]});break;case"onShareAppMessage":u.onShareAppMessage+=1;r[i].push({action:Et.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:_n.getPageName()||p,count:u.onShareAppMessage,share_type:1,is_auto:1}]});break;case"onShareTimeline":u.onShareTimeline+=1;r[i].push({action:Et.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:_n.getPageName()||p,count:u.onShareTimeline,share_type:0,is_auto:1}]});break;case"onPageShow":if(p&&!s){(c={path:p}).ts=Date.now();s=!0}break;case"onPageHide":if(s){var l=Date.now()-c.ts||0,g=ee.getReferrerPage().route||ee.getReferrerPage().is||"-",h=_n.getPageProperties(c.path)||{},_=E.assign(h,{duration:l,path:c.path,page_name:h.page_name||_n.getPageName()||c.path,page_start:c.ts,isMini:!0,_page_auto_id:Pt.PAGE_END,_page_auto_pv:!0,referrer:g});_n.skipPage(c.path)||function(t){r[i].push({action:Et.sendPV,arguments:[{is_auto:!0,track_type:"1"},t]})}(_);c=null;s=!1}}}r[i].push({action:ht.SUBSCRIBE,arguments:[ht.SDK_READY,function(r){"complete"===r&&function(){t=a.getMetaInfo("rb_config");e=a.getMetaInfo("pdr_config");n=a.getMetaInfo("share_config")}()}]});a[o].subscribe("onLoad",(function(t){if("ready"===t.status)try{var e=_n.getVTRealtimeCode();e?function(t,e){if(t&&e)try{var n=a.getMetaInfo("aplus-api-host"),r=n.match(/[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/);if(r&&r[0]){var o=ht.HTTPS;/(\d+\.){3,}\d+/.test(r[0])&&(o="http:");var i="".concat(o,"//").concat(n,"/vt/loadTransferConfig?code=").concat(t,"&appInfoId=").concat(e);ee.request(i,{},(function(t){try{var e=t.data&&t.data.data&&t.data.data.config||"",n=t.data&&t.data.data&&t.data.data.debugId||"";n&&a.appendMetaInfo("aplus-global-args",{debugId:n});var r=Date.now();a._minicfg_load=Date.now()-r;if(e){a._aplus_vt_cfg=JSON.parse(e)||{};Zr()}}catch(t){U().w("fetch real-time visualization verification failed, err msg:".concat(t))}}))}}catch(t){}}(e,a.getMetaInfo("appInfoId")):a.getMetaInfo("aplus-vt-cfg-url")&&Zr()}catch(t){U().w("fetch real-time visualization verification failed, errmsg:".concat(t))}}));a[o].subscribe("onShow",(function(t){"ready"===t.status&&!a.getMetaInfo("aplus-disable-apv")&&f("onPageShow",t.route)}));a[o].subscribe("onHide",(function(t){"ready"===t.status&&!a.getMetaInfo("aplus-disable-apv")&&f("onPageHide",t.route)}));a[o].subscribe("onPullDownRefresh",(function(t){"ready"===t.status&&f("onPullDownRefresh")}));a[o].subscribe("onReachBottom",(function(t){"ready"===t.status&&f("onReachBottom")}));a[o].subscribe("onShareAppMessage",(function(t){"ready"===t.status&&f("onShareAppMessage")}));a[o].subscribe("onShareTimeline",(function(t){"ready"===t.status&&f("onShareTimeline")}));a.getMetaInfo("aplus-vt-cfg-url")&&wt.pushIntoGoldlogQueue(ht.SUBSCRIBE,["MiniVtConfigFormat",function(t){var e=t.pageConfig;e&&e.enabled&&(a._aplus_vt_cfg=e)}])}var ea=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=G(V());ta();if(!t._aplus_aleady_load_minivt){t._aplus_aleady_load_minivt=1;zr.create().run()}}}]);return t}(),na=re(Object.freeze({__proto__:null,default:ea}));function ra(t,e,n){if(Ft.checkEvent(t,e)){var r=function(t,e){if("string"!=typeof t||!t){U().w("event logkey is invalid, id =",t||"'' event properties = ",T.stringfy(e.cusp));return null}var n=Object.create(null),r=Date.now();n.id=t;e&&e.ts||(n.ts=r);e&&e.uuid||(n.uuid=Ft.getUUID());if("object"===a(e))for(var o in e)({}).hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,e);r.rank=Ft.RankUtils.rank();r&&r.id===Pt.APP_END&&(r.amount=r.rank);U().i("event: ",t,e);Se().addEvent(r);var o=G(K()),i=G(V()),s=Pt.MAX_QUEUE_COUNT,c=i.getMetaInfo("max-queue-count");A.isNumber(c)&&!isNaN(parseInt(c,10))&&(s=parseInt(c,10));var u=i.getMetaInfo(ht._ANONY_ID);(t===Pt.APP_END||Se().getEkvsLen()>=s)&&(n?u?an.prepare(Ot,{noCache:!1}):o.push({action:ht.SUBSCRIBE,arguments:[ht.SET_META_INFO,function(t){t===ht._ANONY_ID&&an.prepare(Ot,{noCache:!1})}]}):an.prepare(Ot,{noCache:!1}))}}var aa=L.extend({subscribeLogs:function(t,e){wt.pushIntoGoldlogQueue(ht.SUBSCRIBE,[t,function(t){t.status===ht.COMPLETE&&e(t)}])},getLogicSymbol:function(){return"ALI"===this.format?"&":"||"},handlerMiddleware:function(){},watchLOG:function(){var t=this;t.subscribeLogs(ht.MW_CHANGE_PV,(function(e){t.handlerMiddleware(e,"pv")}));t.subscribeLogs(ht.MW_CHANGE_HJLJ,(function(e){t.handlerMiddleware(e,V())}))},run:function(){this.watchLOG()}}).extend({handlerMiddleware:function(t){var e,n,r=this.metaInfo&&this.metaInfo.autoGetOpenid,a=F().ctx,o=V(),i=t&&t.userdata&&t.userdata.logkey,s=a[o].getMetaInfo(Pt.APLUS_PRESET_EVENTS_DISABLED);if(!(s&&S.isArray(s)&&i&&i.indexOf("$$_")>-1&&-1!==s.indexOf(i))){var c,u=t&&t.userdata&&t.userdata.gmkey,f=t&&t.what_to_send&&t.what_to_send.logdata&&t.what_to_send.logdata||{},p=a[o].getMetaInfo(Pt.GLOBAL_PROPERTY);if("CLK"===u||"EXP"===u||"OTHER"===u||i===Pt.APP_START||i===Pt.APP_END){e=E.cloneDeep(t&&t.userdata&&t.userdata.gokey)||{};n=f.gokey||{};var l={};if("$$_share"===i){l.refer_page=f.url;l.share_type=e.share_type}n.scene&&(l.scene="".concat(ee.getPlatformType(),"_").concat(n.scene));if(n.targetAppKey){l.targetAppKey=e.targetAppKey;delete e.targetAppKey}c=e.page_name||_n.getPageName(f.url)||f.url||"";l.page_name=c;l.url=f.url||"";l.ref_url="-"!==f.pre?f.pre:"";l.ref_page_name=_n.getPrePageName(_n.getPrePagePath(l.ref_url))||_n.getPrePagePath(l.ref_url);if(e.page_name||e["data-pagename"]){delete e.page_name;delete e["data-pagename"]}E.isEmptyObject(p)||(l.gp=p);if(e.spm){l["spm-cnt"]=[encodeURIComponent(c),e.spm.c,e.spm.d].filter((function(t){return!!t})).join(".");delete e.spm}if(e.page_title){l.page_title=e.page_title;delete e.page_title}else l.page_title=n._page_title||_n.getPageTitle(f.url)||"";if(e.is_auto){l.is_auto=e.is_auto;l.track_type="1";delete e.is_auto;f.event_code&&(l.event_type_id=f.event_code)}else{l.is_auto=0;l.track_type="0"}ra(i,i===Pt.APP_START||i===Pt.APP_END?E.assign(l,e):E.assign(l,{cusp:e}),r)}else if("2001"===f.event_code){var g={},h=Pt.PAGE_START;c=(n=E.cloneDeep(f.gokey)||{}).page_name||_n.getPageName(f.url)||f.url||"";g.r=f.arg1||f.logkey||"-";g.page_name=c;if(n._page_auto_pv){g.is_auto=1;g.url=n.path||"";g.ref_url="-"!==n.referrer?n.referrer:"";g.track_type="1";delete n._page_auto_pv;delete n.referrer;delete n.path;delete n.page_name}else{g.is_auto=0;g.url=f.url||"";g.ref_url="-"!==f.pre?f.pre:"";g.track_type="0"}if(n.duration){g.duration=n.duration;delete n.duration}E.isEmptyObject(p)||(g.gp=p);n.scene&&(g.scene="".concat(ee.getPlatformType(),"_").concat(n.scene));n=Ft.deleteInfo(n,["_anony_id","_dev_id","_session_id","_user_id","_user_nick","uaid","pvid","scene"]);g["spm-cnt"]=encodeURIComponent(c);if(n._page_auto_id){h=n._page_auto_id;delete n._page_auto_id}if(n.page_start){g.page_start=n.page_start;delete n.page_start}if(n.page_title){g.page_title=n.page_title;delete n.page_title}else g.page_title=n._page_title||_n.getPageTitle(f.url)||"";delete n._page_title;g.url=_n.getFullPath(g.url);g.ref_url=_n.getFullPath(g.ref_url);g.ref_page_name=_n.getPrePageName(_n.getPrePagePath(g.ref_url))||_n.getPrePagePath(g.ref_url);ra(h,E.assign(g,{cusp:n}),r)}}},run:function(){this.watchLOG()}}),oa=function(){function t(e){s(this,t);this.options=e}u(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo;aa.create({metaInfo:t}).run(this.options)}}]);return t}(),ia={apiName:"aplus",queueName:"aplus_queue",metaInfo:{sdk_version:ae,trackDomain:"",appKey:"",sdkId:"qt_mini","aplus-cpvdata":{},"aplus-exdata":{},"aplus-globaldata":{},"aplus-mmstat-timeout":"10000","aplus-disable-autoevent":!1,"aplus-disable-apv":!1,"aplus-device-enable":!0,"aplus-request-timeout":3e3,"aplus-mini-requests-limit":1},globalConfig:{ETAG_STORAGE_KEY:"__ETAG__CNA__ID__",script_name:"qt_mini.js",lver:ae},plugins:[{name:"aplus_queue",path:me},{name:"inject_app_um",path:pn},{name:"inject_page_um",path:Nn},{name:"pubsub",path:jn},{name:"aplus_meta_inject",path:Yn},{name:"aplus_log_inject",path:$n,deps:["aplus_meta_inject"],config:{plugins:{pv:[{name:"when_to_sendpv",path:Wn,config:{aplusWaiting:""}},{name:"where_to_send",path:Xn},{name:"what_to_send",path:or},{name:"miniapp_data",path:sr},{name:"what_to_sendpv_userdata",path:ur,deps:["what_to_send"]},{name:"can_to_sendpv",path:lr}],hjlj:[{name:"where_to_send",path:Xn},{name:"what_to_send",path:or,deps:[]},{name:"miniapp_data",path:sr},{name:"what_to_hjlj_userdata",path:hr}]}}},{name:"aplus_api",path:vr,deps:["aplus_log_inject","aplus_meta_inject"]},{name:"aplus_ac",path:Ar,deps:["inject_page_um"]},{name:"aplus_ae",path:Ur,deps:["inject_page_um"]},{name:"open_api",path:jr},{name:"aplus_client",path:Fr},{name:"meta_queue",path:Kr},{name:"auto_openid",enable:!0,path:qr,config:{},deps:["aplus_meta_inject"]},{name:"auto_tracker_um",path:na,deps:["inject_page_um"]},{name:"aplus_mini_report_um",path:re(Object.freeze({__proto__:null,default:oa}))}]};function sa(t){return e="QuickTracking SDK INIT SUCCESS!",ne(t,ia,(function(){U().v(e||"QT SDK INIT SUCCESS!")}));var e}t.default=sa;t.initQTSDK=sa;Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).qt_mini={});var t,e;
