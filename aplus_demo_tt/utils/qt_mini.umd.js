/**!
   * qt_mini_v2.1.15
   * generated by QuickTracking
   * 2024-01-31 20:44:37
  */
t=this,e=function(t){"use strict";function e(t,e,r){return e=_(e),v(t,n()?Reflect.construct(e,r||[],_(t).constructor):e.apply(t,r))}function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(n=function(){return!!t})()}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(){o=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),s=new M(r||[]);return a(i,"_invoke",{value:O(t,n,s)}),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=p;var g="suspendedStart",h="suspendedYield",_="executing",d="completed",m={};function v(){}function y(){}function S(){}var I={};f(I,s,(function(){return this}));var b=Object.getPrototypeOf,E=b&&b(b(x([])));E&&E!==n&&r.call(E,s)&&(I=E);var P=S.prototype=v.prototype=Object.create(I);function A(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(a,o,i,s){var c=l(t[a],t,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,i,s)}),(function(t){n("throw",t,i,s)})):e.resolve(f).then((function(t){u.value=t,i(u)}),(function(t){return n("throw",t,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(t,r){function a(){return new e((function(e,a){n(t,r,e,a)}))}return o=o?o.then(a,a):a()}})}function O(e,n,r){var a=g;return function(o,i){if(a===_)throw new Error("Generator is already running");if(a===d){if("throw"===o)throw i;return{value:t,done:!0}}for(r.method=o,r.arg=i;;){var s=r.delegate;if(s){var c=w(s,r);if(c){if(c===m)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===g)throw a=d,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=_;var u=l(e,n,r);if("normal"===u.type){if(a=r.done?d:h,u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=d,r.method="throw",r.arg=u.arg)}}}function w(e,n){var r=n.method,a=e.iterator[r];if(a===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var o=l(a,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function x(e){if(e||""===e){var n=e[s];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=S,a(P,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:y,configurable:!0}),y.displayName=f(S,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,f(t,u,"GeneratorFunction")),t.prototype=Object.create(P),t},e.awrap=function(t){return{__await:t}},A(T.prototype),f(T.prototype,c,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,o){void 0===o&&(o=Promise);var i=new T(p(t,n,r,a),o);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},A(P),f(P,u,"Generator"),f(P,s,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=x,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;k(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:x(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}function i(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e,n,r,a,o,i){try{var s=t[o](i),c=s.value}catch(t){n(t);return}s.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){c(o,r,a,i,s,"next",t)}function s(t){c(o,r,a,i,s,"throw",t)}i(void 0)}))}}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(t,i(r.key),r)}}function l(t,e,n){e&&p(t.prototype,e);n&&p(t,n);Object.defineProperty(t,"prototype",{writable:!1});return t}function g(t,e,n){(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}});Object.defineProperty(t,"prototype",{writable:!1});e&&d(t,e)}function _(t){_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)};return _(t)}function d(t,e){d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){t.__proto__=e;return t};return d(t,e)}function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return m(t)}function y(t,e){if(P(t)&&void 0===t.length)for(var n in t)t.hasOwnProperty(n)&&e(n,t[n],t);else{var r,a=t.length;for(r=0;r<a&&"break"!==e(t[r],r);r++);}}function S(t){return Array.isArray?Array.isArray(t):/Array/.test(Object.prototype.toString.call(t))}var I={isArray:S,indexOf:function(t,e){var n=-1;try{n=t.indexOf(e)}catch(a){for(var r=0;r<t.length;r++)t[r]===e&&(n=r)}finally{return n}},itemMatch:function(t,e){var n=!1;try{if(!this.isArray(t))return n;n=t.some((function(t){return t&&t.length>0&&-1!==e.indexOf(t)}))}catch(a){for(var r=0;r<t.length;r++)if(-1!==e.indexOf(t[r])){n=!0;break}}return n},find:function(t,e){try{return t.find(e)}catch(r){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}},flat:function t(e){var n=[];if(S(e))for(var r=0;r<e.length;r++){var a=e[r];if(S(a)){e[r]=t(a);n=n.concat(e[r])}else n.push(a)}return n},assign:b,some:function(t,e){var n,r=t.length;for(n=0;n<r;n++)if(e(t[n]))return!0;return!1},each:y};function b(t,e){return"function"!=typeof Object.assign?function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}(t,e):Object.assign({},t,e)}function E(t){var e,n=Array.isArray(t)?[]:{};if("object"===s(t)){if(JSON&&JSON.parse){e=JSON.stringify(t);n=JSON.parse(e)}else for(var r in t)n[r]="object"===s(t[r])?E(t[r]):t[r];return n}}function P(t){if("object"!==s(t)||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var A={isObject:P,assign:b,cloneDeep:E,isEmptyObject:function(t){try{if(!t)return!0;if("function"==typeof Object.keys&&0===Object.keys(t).length)return!0;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}catch(t){return!1}},each:y,eachMap:function(t,e){if(Object&&Object.keys)for(var n=Object.keys(t),r=n.length,a=0;a<r;a++){var o=n[a];e(o,t[o])}else for(var i in t)e(i,t[i])},deleteKeys:function(t,e){y(e,(function(e){delete t[e]}));return t}},T={isNumber:function(t){return"number"==typeof t},isNaN:function t(e){return t?t(e):e!=e}},O={stringfy:function(t){if(t)try{return JSON.stringify(t)}catch(t){}return""},parse:function(t){if(t)try{return JSON.parse(t)}catch(t){}return null},jsonStr2json:function(t){if(!t||"string"!=typeof t)return{};for(var e=t.replace(/['"{}]+/g,"").split(","),n=[],r=0;r<e.length;r++)n.push(e[r].split(":"));return k(n)}};function w(t){return"function"==typeof t}function C(t){return void 0===t}function k(t){var e,n,r,a={},o=t.length;for(r=0;r<o;r++){e=t[r][0]&&t[r][0].trim();n=t[r][1];a[e]=n}return a}function M(t){if("object"===s(t))return t;var e={};if(!t||"string"!=typeof t)return e;for(var n=t.split("&"),r=0;r<n.length;r++){var a=n[r],o=a.indexOf("="),i=a.split("="),c=a.length;if(2===i.length)e[i[0]]=i[1]||"";else if(o>0){var u=a.slice(0,o),f=a.slice(o+1,c)||"";e[u]=f}else e[i[0]]=""}return e}var x="::-plain-::";function N(t,e){var n,r,a,o=[];for(n in t)if(n&&t.hasOwnProperty(n)){a="object"===s(t[n])?r=""+this.obj2queryStr(t[n]):n+"="+(r=""+t[n]);e?o.push(a):o.push(0===n.indexOf(x)?r:a)}return o.join("&")}function R(t){for(var e,n=t.split("&"),r=0,a=n.length,o=[];r<a;r++){e=n[r].split("=");o.push([e.shift(),e.join("=")])}return o}var D={isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isStartWith:function(t,e){return!(!t||!e||0===e.length||e.length>t.length)&&0===t.indexOf(e)},isEndWith:function(t,e){if(String.prototype.endsWith)return t.endsWith(e);var n=t.length,r=e.length;return n>=r&&t.substring(n-r)===e},isContain:function(t,e){return t.indexOf(e)>-1},getRandomStr:function(t){for(var e="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<Number(t);r++)e+=n[Math.round(Math.random()*(n.length-1))];return e},trim:function(t){return"string"==typeof t?t.replace(/^\s+|\s+$/g,""):""},query2obj:M},U={query2obj:M,arr2obj:k,arr2queryStr:function(t,e){var n,r,a,o=[],i=t.length;for(a=0;a<i;a++){n=t[a][0];r=t[a][1];var s=0===n.indexOf(x),c=s||e?r:encodeURIComponent(r);o.push(s?c:n+"="+c)}return o.join("&")},obj2queryStr:N},L=function(){var t=null,e=!1,n="";function r(){this.setDebug=function(t,r){e=t;n=r?"[APLUS] -- ":"[QT] -- "};this.i=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.info.apply(console,arguments)}catch(t){}};this.e=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(t){}};this.w=function(){if(e)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.v=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(t){}};this.tip_w=function(t){try{console.log("%c "+n+t,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(t){}};this.repeat=function(t){for(var e=t;e.length<86;)e+=t;return e}}return function(){null===t&&(t=new r);return t}}();function j(){}j.prototype.extend=function(){};j.prototype.create=function(){};j.extend=function(t){return this.prototype.extend.call(this,t)};j.prototype.create=function(t){var e=new this;for(var n in t)e[n]=t[n];return e};j.prototype.extend=function(t){var e=function(){};try{w(Object.create)||(Object.create=function(t){function e(){}e.prototype=t;return new e});e.prototype=Object.create(this.prototype);for(var n in t)e.prototype[n]=t[n];e.prototype.constructor=e;e.extend=e.prototype.extend;e.create=e.prototype.create}catch(t){L&&L().w(t)}finally{return e}};var F,B=j.extend({create:function(t,e){var n=e.apiName,r=e.queueName,a=new this;a._sdkApiName=n;a._sdkQueueName=r;t[n]=t[n]||(t[n]={});t[r]=t[r]||(t[r]=[]);a.ctx=t;return a},getSdkApiName:function(){return this._sdkApiName},getSdkQueueName:function(){return this._sdkQueueName},setContextValue:function(t,e){this.ctx[this._sdkApiName]&&(this.ctx[this._sdkApiName][t]=e)},getContextValue:function(t){var e;this.ctx[this._sdkApiName]&&(e=this.ctx[this._sdkApiName][t]);!e&&this.ctx.goldlog&&(e=this.ctx.goldlog[t]);return e}});function V(){return F}function K(){return V().getSdkApiName()}function G(){return V().getSdkQueueName()}function q(t){return V().ctx[t]}function H(t,e){V().ctx[t]=e}function $(t){return V().getContextValue(t)}function Y(t,e){V().setContextValue(t,e)}var Q="function",z=function(){var t=q(K())[K()+"_pubsub"]||{};return s(t.publish)===Q?t:""};function W(t){var e=z();e&&s(e.publish)===Q&&e.publish.apply(e,t)}function J(t){var e=z();e&&s(e.cachePubs)===Q&&e.cachePubs.apply(e,t)}var X=I.indexOf;function Z(){}Z.prototype.create=function(t){for(var e in t)void 0===this[e]&&(this[e]=t[e]);return this};Z.prototype.calledList=[];Z.prototype.setCalledList=function(t){-1===X(this.calledList,t)&&this.calledList.push(t)};Z.prototype.resetCalledList=function(){this.calledList=[]};Z.prototype.wrap=function(t,e){var n=this,r=((this.context||{}).Compose||{}).maxTimeout||1e4;return function(a){var o,i=t.length,s=0,c=0;n.calledList&&n.calledList.length>0&&n.resetCalledList();return function u(f,p){if(s!==i){if(-1===X(n.calledList,s)){n.setCalledList&&n.setCalledList(s);if(!(t&&t[s]&&w(t[s][0])))return;try{a=t[s][0].call(n,a,(function(){s++;c=1;u()}))}catch(t){console.log(t)}}var l="number"==typeof a;if("pause"===a||l){c=0;var g=l?a:r,h=t[s]?t[s][1]:"";o=setTimeout((function(){if(0===c){L().w("jump the middleware about "+h+", because waiting timeout maxTimeout = "+g);a=null;s++;u()}}),g)}else if("done"===a)u(s=i,a);else{s++;u()}}else{a="done";n.resetCalledList();w(e)&&p!==a&&e.call(n,a);clearTimeout(o)}}()}};function et(){return{init:function(t){this.opts=t;t&&"object"===s(t.middleware)&&t.middleware.length>0?this.middleware=t.middleware:this.middleware=[];this.plugins_name=[]},pubsubInfo:function(t,e){try{var n=t.pubsub;n&&n.publish("plugins_change_"+t.pubsubType,e)}catch(t){console.log(t)}},isConstructor:function(t){var e=!0;try{new t}catch(t){e=!1}return e},run:function(t){t||(t=0);var e=this,n=this.middleware,r=this.opts||{},a=r.plugins;if(a&&"object"===s(a)&&a.length>0){var o=a[t];this.plugins_name.push(o.name);n.push([function(t,n){e.pubsubInfo(this,o);var a;o.path&&e.isConstructor(o.path)?a=o.path:o.path.default&&e.isConstructor(o.path.default)&&(a=o.path.default);if(a){var i=new a({context:this.context,config:b(o.config||{},r.config)});if(!i.options){i.init||(i.init=function(t){this.options=t});i.init({context:this.context,config:b(o.config||{},r.config)})}return i.run(t,(function(t){setTimeout((function(){n(o,t)}),1)}))}},o.name]);if(a[++t])return this.run(t)}return n}}}var nt=function(){};nt.prototype.run=function(t,e,n){var r=new et;r.init({middleware:[],config:e.config,plugins:t.plugins});var a=r.run(),o=w(t.context)?new t.context:t.context;o.userdata=e.userdata;var i={context:o,pubsub:$(K()+"_pubsub"),pubsubType:e&&e.pubsubType},s=new Z;s.create(i);s.wrap(a,(function(){i.context.status="complete";if(e){e.middlewareMessageKey&&W([e.middlewareMessageKey,i.context]);e.messageFnQueue&&y(e.messageFnQueue,(function(e){e(getGlobalValue(K()),t)}))}w(n)&&n(i.context)}))()};var rt,at,ot,it="mw_change",st="MetaInfo",ct="append".concat(st),ut="set".concat(st),ft="_pubsub",pt="2101",lt="2201",gt="19999",ht="aplus",_t={PAGE_ENTER:"PAGE_ENTER",CURRENT_PAGE_CONFIG:"CURRENT_PAGE_CONFIG",_ANONY_ID:"_anony_id",_DEV_ID:"_dev_id",_CNA:"cna",_browerFP:"_abfpc",_USER_ID:"_user_id",OTHER:gt,UNSUBSCRIBE:"".concat(ht,".").concat(ht).concat(ft,".unsubscribe"),SUBSCRIBE:"".concat(ht,".").concat(ht).concat(ft,".subscribe"),PUBLISH:"".concat(ht,".").concat(ht).concat(ft,".publish"),CACHE_PUBS:"".concat(ht,".").concat(ht).concat(ft,".cachePubs"),SDK_READY:"".concat(ht,"Ready"),SDK_PUB:"".concat(ht).concat(ft),COMPLETE:"complete",PV_CODE:"2001",EXP_CODE:lt,CLK_CODE:pt,OTHER_CODE:gt,CLK:"CLK",EXP:"EXP",SPM_CNT:"spm-cnt",SPM_URL:"spm-url",SPM_PRE:"spm-pre",MW_CHANGE_PV:"".concat(it,"_pv"),MW_CHANGE_HJLJ:"".concat(it,"_hjlj"),HTTP:"".concat("http",":"),HTTPS:"https:",APPEND_META_INFO:ct,SET_META_INFO:ut,SDK_APPEND_META_INFO:"".concat(ht,".").concat(ct),SDK_SET_META_INFO:"".concat(ht,".").concat(ut),PVID:"pvid",WEB_PC_PV_SUFFIX:"v.gif",WEB_WAP_PV_SUFFIX:"m.gif",NATIVE_TRANSP_READY:"".concat(ht,"NativeTranspReady")},dt=["send","enter","sendPV","record","combineRecord","recordUdata","requestVTConfig","requestRemoteConfig","setPageSPM","setMetaInfo","appendMetaInfo","updatePageProperties","updateNextPageProperties","updatePageUtparam","updateNextPageUtparam","pageAppear","pageDisappear","skipPage","updateSessionProperties","getPageSpmUrl","getPageSpmPre","setPageName","getElementSPM","recordAppLink","onPageShow","onPageHide","reportUserInfo"],mt={EXP:lt,IMPEXP:"2202",CLK:pt,OTHER:gt,SHOW:"1023",H_OR_U:"1010"},vt={ekvs:"e",active_user:"active_user"},yt=a(a({},vt),{},{sessions:"sn"}),St={sdk_type:"sdt",device_model:"dm",language:"lang",device_type:"dt",os_version:"ov",appkey:"ak",sdk_version:"sv",resolution:"rl",pixel_ratio:"pr",_id:"id",id_type:"it",id_tracking:"itr"},It=a(a({},St),{},{imprint:"imp",debugId:"dk"}),bt=a(a({},St),{},{access:"ac",access_subtype:"acs",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",font_size_setting:"fss",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",imprint:"imp",miniappDebugId:"dk"}),Et={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},Pt={APLUS:ht,APPKEY:"appKey",APLUS_PV_DOMAIN:"aplus-rhost-v",APLUS_EKV_DOMAIN:"aplus-rhost-g",SESSION_INTERVAL:3e4,PAGE_SCROLL_DURATION:4e3,SESSION_PAUSE_TIME:"session_pause_time",IMPRINT:"imprint",CURRENT_SESSION:"current_session",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,FAILED_REQUESTS:"failed_requests",REQUESTS:"requests",SHARES:"shares",EKVS:"ekvs",EVENT_MAX_COUNT:1e4,MEMORY_MAX_COUNT:1,MAX_QUEUE_COUNT:1,EVENT_SEND_DEFAULT_INTERVAL:3e3,PAGE_START:"$$_page_start",PAGE_END:"$$_page_end",APP_START:"$$_app_start",APP_END:"$$_app_end",USER_PROFILE:"$$_user_profile",SHARE_CACHE_INTERVAL:18e5,GLOBAL_PROPERTY:"globalproperty",JSBRIDGE_ONLY:"aplus-jsbridge-only",JSBRIDGE_AGENT:"Umeng4Aplus",APLUS_SKIP_APV_RULES:"aplus-skip-apv-rules",APLUS_IMPRINT_VERSION:"APLUS_IMPRINT_VERSION",APLUS_REMOTE_CONFIG:"APLUS_REMOTE_CONFIG",WEB_EVENT_SUFFIX:"/web_logs",PAGE_LEAVE:"$$_page_leave",PAGE_STAY:"$$_page_stay",APLUS_AUTOTRACK_ENABLED:"aplus-autotrack-enabled",APLUS_AUTOTRACK_ENABLED_REMOTE:"apus-autotrack-enabled-remote",APLUS_AUTOTRACK_CONFIG:"aplus-autotrack-config",APLUS_AUTOTRACK_CONFIG_REMOTE:"aplus-autotrack-config-remote",APLUS_DISABLE_AUTOEVENT:"aplus-disable-autoevent",APLUS_DISABLE_AUTOEVENT_REMOTE:"aplus-disable-autoevent",APLUS_DISABLE_AUTOPV:"aplus-disable-apv",APLUS_DISABLE_AUTOPV_REMOTE:"aplus-disable-apv-remote",APLUS_EVENT_LIMITRATES:"aplus-event-limitrates",APLUS_DEVICE_ENABLE:"aplus-device-enable",PERFORMANCE_WARING:"$$_perf_warning",START_ID:"START_ID",AUTO_GET_OPENID:"autoGetOpenid",TRACKDOMAIN:"trackDomain",APLUS_MINI_REQUEST_TIMEOUT:"aplus-request-timeout",APLUS_LATEAST_UTM:"APLUS_LATEAST_UTM",APLUS_FORWARD_APPKEY:"aplus-forward-appkey",APLUS_FORWARD_DOMAIN:"aplus-forward-domain",APLUS_FORWARD_EVENT_FILTER:"aplus-forward-event-filter",CNA_SYNC_READY:"cnaSyncReady",PAGE_CONFIG:"pageConfig",APLUS_VT_CONFIG_URL:"aplus-vt-cfg-url",APLUS_EXPOSURE_EVENT_CAN_REPEAT:"aplus-exposure-event-can-repeat",APLUS_MINI_REQUESTS_LIMIT:"aplus-mini-requests-limit",DEBUG:"DEBUG",APLUS_UTM_EXPIRE_DAYS:"aplus-utm-expire-days",APLUS_PAGEVIEW_DURATION_CAN_TRACK:"aplus-pageview-duration-can-track",APLUS_PRESET_EVENTS_DISABLED:"aplus-preset-events-disabled",APLUS_GLOBALPROPERTY_SYNC_ENABLE:"aplus-globalproperty-sync-enable",APLUS_NEXT_PAGE_TRANSP:"aplus-nextpage-properties",APLUS_LOCALSTORE_PAGE_TRANSP:"aplus-native-page-properties",APLUS_CALLBACK:"qtCallback",START_TIME:"start_time"},At={record:"".concat(ht,".record"),sendPV:"".concat(ht,".sendPV"),setMetaInfo:"".concat(ht,".setMetaInfo"),appendMetaInfo:"".concat(ht,".appendMetaInfo")},Tt="half_session",Ot="close_session",wt="ekv",Ct={pushIntoGoldlogQueue:function(t,e){var n=q(G()),r=q(K()),a=t.split("."),o=r[a[1]],i=o?o[a[2]]:null;r&&2===a.length&&o?o.apply(r,e):3===a.length&&i?i.apply(o,e):n.push({action:t,arguments:e})}};function kt(t,e){return t&&t.getAttribute&&t.getAttribute(e)||""}function Mt(t){try{return localStorage.getItem(t)}catch(t){return""}}function xt(t,e){var n,r="";if(!t||!e)return r;try{var a=new RegExp("".concat(t,"=([^&|#|?|/]+)"));if("spm"===t||"scm"===t){var o=new RegExp("\\?.*".concat(t,"=([\\w\\.\\-\\*/]+)")),i=e.match(a),s=e.match(o),c=i&&2===i.length?i[1]:"",u=s&&2===s.length?s[1]:"";r=c>u?c:u;r=decodeURIComponent(r)}else r=(n=e.match(a))&&2===n.length?n[1]:"";return r}catch(t){L().w("get param from url failed",t);return r}}function Nt(t){rt=rt||document.getElementsByTagName("head")[0];return ot&&!t?ot:rt?ot=rt.getElementsByTagName("meta"):[]}function Rt(t,e){var n="aplus&sidx=aplusSidex&ckx=aplusCkx",r=t||n;try{if(e){var a=M(e),o=[Pt.APLUS,"cna",_t.SPM_CNT,_t.SPM_URL,_t.SPM_PRE,"logtype","pre","uidaplus","asid","sidx","trid","gokey"];I.each(o,(function(t){if(Object.prototype.hasOwnProperty.call(a,t)){L().w("Can not inject keywords: ".concat(t));delete a[t]}}));delete a[""];var i="";if(t){var s=t.match(/aplus&/).index,c=s>0?M(t.substring(0,s)):{};delete c[""];i="".concat(N(A.assign(c,a)),"&").concat(t.substring(s,t.length))}else i="".concat(N(a),"&").concat(n);return i}return r}catch(t){return r}}function Dt(){var t,e=Rt(kt(function(){at||(at=document.getElementById("beacon-aplus")||document.getElementById("tb-beacon-aplus"));return at}(),"exparams"),(((t=q(K()))&&t._$?t._$:{}).meta_info||{})["aplus-exparams"]||"")||"";return e&&e.replace(/&amp;/g,"&").replace(/\buser(i|I)d=/,"uidaplus=")}var Ut={set:function(t,e){try{localStorage.setItem(t,e);return!0}catch(t){return!1}},get:Mt,test:function(){var t="grey_test_key";try{localStorage.setItem(t,1);localStorage.removeItem(t);return!0}catch(t){return!1}},remove:function(t){try{localStorage.removeItem(t);return!0}catch(t){return!1}},getLocalStorageFP:function(){var t,e=Mt(_t._browerFP);e&&(t=e.split("_")[0]);return t}},Lt={getQueryFromUrl:function(){function t(t){for(var e=decodeURIComponent(t),n=e.indexOf("?")+1,r=e.substring(n),a=Object.create(null),o=r.split("&"),i=0;i<o.length;i++)a[o[i].split("=")[0]]=decodeURIComponent(o[i].split("=")[1]);return a}try{var e=location&&location.hash,n=location&&location.search;if(e&&-1!==e.indexOf("?"))return t(e);if(n&&-1!==n.indexOf("?"))return t(n)}catch(t){L().w("get query failed, current url =",location.href)}},getAParamFromUrl:xt,addParamsIntoUrl:function(t,e){var n,r,a,o=e||location.href,i="&",s=[];I.each(t,(function(t,e){new RegExp("".concat(t,"=")).test(o)||s.push("".concat(t,"=").concat(e))}));if(0===s.length)return o;if(-1!==o.indexOf("#")){a=o.split("#");o=a.shift();r=a.join("#")}var c=o.split("?"),u=c.length-1;a=(a=c[0].split("//"))[a.length-1].split("/");if(u>0){n=c.pop();o=c.join("?")}n&&u>1&&-1===n.indexOf("&")&&-1!==n.indexOf("%")&&(i="%26");return o="".concat(o,"?").concat(s.join("&")).concat(n?i+n:"").concat(r?"#".concat(r):"")},getSPMFromUrl:function(t){return xt("spm",t)},tryToEncode:function(t){var e=t||"";if(t)try{e=encodeURIComponent(decodeURIComponent(t))}catch(t){}return e},tryToDecode:function(t,e){var n=e||"";if(t)try{n=decodeURIComponent(t)}catch(t){}return n},getWebUrlParams:function(){for(var t=/[?&]([^=#]+)=([^&#]*)/g,e=window.location.href,n={},r=t.exec(e);r;){n[r[1]]=r[2];r=t.exec(e)}return n}},jt={getMetaTags:Nt,getMetaCnt:function(t,e){var n,r,a,o=Nt(),i=o.length;for(n=0;n<i;n++)kt(r=o[n],"name")===t&&(a=kt(r,e||"content"));return a||""},mergeExparams:Rt,getExParams:Dt,getExparamsInfos:function(t,e){for(var n={},r=t||["uidaplus","pc_i","pu_i"],a=Dt()||"",o=R(a=a.replace(/&aplus&/,"&"))||[],i=function(t){return I.indexOf(r,t)>-1},s=0;s<o.length;s++){var c=o[s],u=c[0]||"",f=c[1]||"";u&&f&&("EXPARAMS"===e||i(u))&&(n[u]=f)}return n}},Ft=0,Bt={},Vt={getStartId:function(){return D.getRandomStr(10)+Date.now()+D.getRandomStr(9)},getUUID:function(){return D.getRandomStr(10)+Date.now()+D.getRandomStr(9)},fixDomain:function(t){if(-1!==t.indexOf("https://")||-1!==t.indexOf("http://"))return t;t=(/^\/\//.test(t)?"":"//")+t;return/(\d+\.){3,}\d+/.test(t)?_t.HTTP+t:_t.HTTPS+t},getAppKey:function(){var t=q(K());return t.getMetaInfo("appkey")||t.getMetaInfo("appId")||t.getMetaInfo("appKey")},getTrackDomain:function(){var t=q(K());return t.getMetaInfo(Pt.APLUS_PV_DOMAIN)||t.getMetaInfo(Pt.TRACKDOMAIN)},checkDomain:function(t,e){var n=new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)(\/.*)?$/),r=((t||"").match(n)||[])[0];if(!t||!r){L().tip_w(L().repeat("!"));L().tip_w("trackDomain error, please check ".concat(e," setting, current value is: ").concat(t)||"undefined");L().tip_w("we accept these three patterns:");L().tip_w("eg1: https://test-qtracking-xxx.com:port/a/b/c, port is optional");L().tip_w("eg2: http://test-qtracking-xxx.com:port/a/b/c, port is optional");L().tip_w("eg3: test-qtracking-xxx.com:port/a/b/c, port is optional");L().tip_w(L().repeat("!"));return!1}return!0},checkOpenid:function(t){if(!t){L().tip_w(L().repeat("!"));L().tip_w("QT need an unique id as QT's deviceid!!");L().tip_w("setting examples: aplus_queue.push({action: '".concat(K(),".setMetaInfo', arguments: ['_anony_id', xxxxxx]});"));L().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS");L().tip_w(L().repeat("!"));return!1}return!0},checkEvent:function(t,e){if(!t||"string"!=typeof t){L().w("event logkey is invalid, id =",t||"'' event properties = ",O.stringfy(e.cusp));return!1}var n=["id","du"],r={};n.forEach((function(t){r[t]=1}));if(r[t]){L().e("eventId has conflict with reservewords: ".concat(n.join(",")));return!1}if(t.length>Pt.MAX_EVENTID_LENGTH){L().e("The maximum length of event id shall not exceed ".concat(Pt.MAX_EVENTID_LENGTH));return!1}if(e&&("object"!==s(e)||I.isArray(e))&&"string"!=typeof e){L().e("please check trackEvent properties. properties should be string or object(not include Array)");return!1}if("object"===s(e)){var a=0;for(var o in e)if({}.hasOwnProperty.call(e,o)){if(o.length>Pt.MAX_PROPERTY_KEY_LENGTH){L().e("The maximum length of property key shall not exceed ".concat(Pt.MAX_PROPERTY_KEY_LENGTH));return!1}if(a>=Pt.MAX_PROPERTY_KEYS_COUNT){L().e("The maximum count of properties shall not exceed ".concat(Pt.MAX_PROPERTY_KEYS_COUNT));return!1}if(r[o]){L().e("property key has conflict with reserveWords: ".concat(n.join(",")));return!1}a+=1}}return!0},rank:function(){Ft++;Object.prototype.hasOwnProperty.call(Bt,Ft)?Ft++:Bt[Ft]=Ft;return Ft},clear:function(){Ft=0;Bt={}},zeroFill:function(t,e,n){var r="".concat(Math.abs(t)),a=e-r.length,o=t>=0,i=Math.pow(10,Math.max(0,a)).toString().substring(1)+r;return o?(n?"+":"")+i:"-".concat(i)},date2YYMMDD:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0)].join(t||"")}catch(t){return""}},date2YYMMDDHHMMSS:function(t){try{var e=new Date;return[e.getFullYear(),this.zeroFill(e.getMonth()+1,2,0),this.zeroFill(e.getDate(),2,0),this.zeroFill(e.getHours(),2,0),this.zeroFill(e.getMinutes(),2,0),this.zeroFill(e.getSeconds(),2,0)].join(t||"")}catch(t){return""}},mapEventSampleRates:function(t){var e=[];y(t,(function(t){t.eventIds&&t.eventIds.length>0&&y(t.eventIds,(function(n){e.push({eventId:n,samplingRate:t.samplingRate})}))}));return e},hash:function(t,e){var n,r=e||1315423911;for(n=t.length-1;n>=0;n--)r^=(r<<5)+t.charCodeAt(n)+(r>>2);for(var a=(2147483647&r).toString(16);a.length<8;)a+="0";return a},isDebug:function(){var t=!1,e=q(K());try{t=/debugMode=true/.test(location.href)||e.getMetaInfo("DEBUG")}catch(t){}return t},localAutoEventDisabled:function(){return!!q(K()).getMetaInfo(Pt.APLUS_DISABLE_AUTOEVENT)},localAutoPVDisabled:function(){var t=q(K());return!(!t.getMetaInfo(Pt.APLUS_DISABLE_AUTOPV)&&"MAN"!==t.getMetaInfo("aplus-waiting"))},getAutoTrackStatus:function(){return!!q(K()).getMetaInfo(Pt.APLUS_AUTOTRACK_ENABLED)},semicolonStr2Obj:function(t,e,n){e=e||{};var r,a,o=t.split(";"),i=o.length;for(a=0;a<i;a++){r=o[a].split("=");var s=D.trim(r.slice(1).join("="));e[D.trim(r[0])||""]=n?s:Lt.tryToDecode(s)}return e},getEtagUrl:function(t){var e=q(K()),n=t;try{var r=e.getMetaInfo(Pt.APLUS_PV_DOMAIN);r=this.fixDomain(r);n="".concat(r,"/eg.js")}catch(t){}return n},getImprintFromStorage:function(t){if(Ut.get&&Ut.test()){var e="",n=Ut.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return decodeURIComponent(e)}return""},setImprintToStorage:function(t,e){e&&Ut.set&&Ut.test()&&Ut.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(e)))},setRemoteConfigToStorage:function(t,e){if(e&&Ut.set&&Ut.test()){var n=A.cloneDeep(e);"object"===s(n)&&(n=JSON.stringify(n));Ut.set(t,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(n)))}},getRemoteConfigFromStorage:function(t){if(Ut.get&&Ut.test()){var e="",n=Ut.get(t);if(n){var r=n.split("||")||[];e=r.length>1&&r[1]}return O.parse(decodeURIComponent(e))}return""},setCnaToStorage:function(t,e,n){n&&Ut.set&&Ut.test()&&Ut.set(t,"".concat(e,"_").concat(encodeURIComponent(n)))},getCnaFromStorage:function(t,e){if(Ut.get&&Ut.test()){var n="",r=Ut.get(t);if(r){var a=r.split("_")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return decodeURIComponent(n)}return""},deleteInfo:function(t,e){y(e,(function(e){delete t[e]}));return t},resetFn:function(){var t=arguments.length>0&&arguments[0]?arguments[0]:{},e=arguments.length>1&&arguments[1]?arguments[1]:"",n=arguments.length>2&&arguments[2]?arguments[2]:function(){},r=t[e];t[e]=function(){var t=r&&r.apply(this,arguments);return t?n.call(this,t):n.apply(this,arguments)}},rewriteFn:function(t,e,n){var r=t[e];t[e]=function(t){n.call(this,t);r&&r.call(this,t)}},getHashKey:function(t,e){var n=[e.logkey,e.cssSelector];e.positionSelector&&n.push(e.positionSelector);t.id&&n.push(t.id);t.index>=0&&n.push(t.index);t.dataset&&t.dataset.privateNodeId&&delete t.dataset.privateNodeId;t.dataset&&n.push(JSON.stringify(t.dataset));return n=n.join("_")},getTimeZone:function(){var t=-(new Date).getTimezoneOffset()/60;return Math.abs(parseInt(t,10))},convertNativeMapStringToJSON:function(t){var e=t.replace(/(\w+)=([^,]+)/g,'"$1":"$2"').replace(/[{}]/g,""),n="{".concat(e,"}");return JSON.parse(n)}},Kt={rank:Vt.rank,clear:Vt.clear},Gt={localAutoEventDisabled:Vt.localAutoEventDisabled,localAutoPVDisabled:Vt.localAutoPVDisabled,getAutoTrackStatus:Vt.getAutoTrackStatus},qt={set:Vt.setRemoteConfigToStorage,get:Vt.getRemoteConfigFromStorage},Ht={set:Vt.setImprintToStorage,get:Vt.getImprintFromStorage},$t={set:Vt.setCnaToStorage,get:Vt.getCnaFromStorage},Yt={resetFn:Vt.resetFn,rewriteFn:Vt.rewriteFn};Vt.LocalCfgUtils=Gt;Vt.RemoteCfgUtils=qt;Vt.CNAUtils=$t;Vt.ImprintUtils=Ht;Vt.AccessType={MOBILE_NETWORK_2G:"2g",MOBILE_NETWORK_3G:"3g",MOBILE_NETWORK_4G:"4g",MOBILE_NETWORK_NONE:"none"};Vt.FunctionUtils=Yt;Vt.RankUtils=Kt;var Qt,zt="httpRequest",Wt="request",Jt=function(){};function Xt(){try{return{ctx:dd,platType:"dd",sdkType:"ddmp",logDomain:"/ddm_logs"}}catch(t){try{return{ctx:my,platType:my&&my.tb?"taobao":"my",sdkType:my&&my.tb?"taobaomp":"mymp",logDomain:"/alipaym_logs"}}catch(t){try{return{ctx:tt,platType:"tt",sdkType:"ttmp",logDomain:"/bytedancem_logs"}}catch(t){try{return{ctx:swan,platType:"bd",sdkType:"bdmp",logDomain:"/baidum_logs"}}catch(t){try{return{ctx:wx,platType:"wx",sdkType:"wxmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:xhs,platType:"xhs",sdkType:"xhsmp",logDomain:"/wxm_logs"}}catch(t){try{return{ctx:jd,platType:"jd",sdkType:"jdmp",logDomain:"/wxm_logs"}}catch(t){return{ctx:{},platType:"UNKNOW",sdkType:"UNKNOW"}}}}}}}}}function Zt(){return Xt().platType}function te(){return Xt().ctx}function ee(){if("boolean"==typeof Qt)return Qt;var t=!1;try{var e=navigator?navigator.userAgent||navigator.swuserAgent:"";t=!!/AliApp/i.test(e);/AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(e)&&(t=!1);/AliApp\(KB/i.test(e)&&(t=!!/Mist/.test(e));/AlipayIDE Taobao/.test(e)&&(t=!0);if(t){var n=Zt().ctx;w(n.canIUse)&&(t=!!n.canIUse("callUserTrack"))}}catch(t){}Qt=t;return t}var ne={getPlatformType:Zt,getPlatformSdkType:function(){return Xt().sdkType},getPlatformContext:te,getLogDomain:function(){return Xt().logDomain},getCurrentPage:function(){var t=getCurrentPages();return t[t.length-1]||{}},getReferrerPage:function(){var t=getCurrentPages();return t[t.length-2]||{}},resetIsTB:function(t){Qt=t},initIsTB:ee,isTB:function(){return"boolean"==typeof Qt?!!Qt:ee()},getWxTitle:function(t){if(!t)return"";var e=Zt(),n="";try{if("wx"===e&&__wxConfig){var r=__wxConfig,a=__wxConfig.page||{},o=a[t]||a[t+".html"],i={},s={};r.global&&r.global.window&&r.global.window.navigationBarTitleText&&(i.title=r.global.window.navigationBarTitleText);o&&o.window&&o.window.navigationBarTitleText&&(s.title=o.window.navigationBarTitleText);if(!s.title&&__wxAppCode__){var c=__wxAppCode__[t+".json"];c&&c.navigationBarTitleText&&(s.title=c.navigationBarTitleText)}var u=V().ctx;u[K()].globalTitleMap&&eachMap(u[K()].globalTitleMap,(function(e,r){e===t&&(n=r)}));0===n.length&&(n=s.title||i.title||"")}return n}catch(t){L().w("current platform can not track page title");return n}},setStorageSync:function(t,e){try{var n=Zt(),r=te();"my"===n||"taobao"===n?r.setStorageSync({key:t,data:e}):r.setStorageSync(t,e)}catch(t){}},getStorageSync:function(t){try{var e=Zt(),n=te();return"my"===e||"taobao"===e?n.getStorageSync({key:t}).data:n.getStorageSync(t)}catch(t){}},request:function(t,e,n,r){var a=q(K()),o=te();w(r)||(r=Jt);w(n)||(n=Jt);var i=e.requestMethodName||Wt,c=o[i];w(c)||i===Wt||(c=o[i=Wt]);w(c)||i===zt||(c=o[i=zt]);var u,f,p=e&&e.dataType?e.dataType:"base64",l=a.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT),g=e&&e.timeout?e.timeout:l,h=e.method||"GET";t=Vt.fixDomain(t);if(w(c)){var _={url:t,method:h,dataType:p,timeout:g,success:function(t){if(!u){u=!0;n(t)}},fail:function(t){if(!u){u=!0;r({failure:!0,data:t})}}};if("POST"===h&&"object"===s(e.data)){_.url=_.url.split("?")[0];if(zt===i){_.headers={"Content-Type":"application/json"};_.dataType="json";_.data=JSON.stringify(e.data)}else _.data=e.data}var d=(a=q(K())).getMetaInfo("aplus-request-extinfo");"object"===s(d)&&(_._extInfo=d);c(_)}else if(!u){u=!0;r({failure:!0,data:f})}setTimeout((function(){if(!u){u=!0;f='aplus log request"'+t+' timeout", time spend'+g+"ms";console&&console.warn(f);r({failure:!0,data:f})}}),g)},getUtmParamsObj:function(t){var e={};try{A.eachMap(t,(function(t,n){if(0===t.indexOf("utm_"))e[t]="".concat(n);else if("scene"===t&&D.isString(n)){var r=decodeURIComponent(n)||"",a=D.query2obj(r);A.eachMap(a,(function(t,n){0===t.indexOf("utm_")&&(e[t]="".concat(n))}))}}))}catch(t){}return e}};function re(t,e,n){var r,a,o=ne.getPlatformContext();r=o,a={apiName:e.apiName,queueName:e.queueName},F=r._sdk_context||B.create(r,a);"object"===s(t)&&(e.metaInfo=Object.assign({},e.metaInfo,t.metaInfo));L().setDebug(t.metaInfo.DEBUG);W([_t.SDK_READY,"running"]);!function(t,e){(new nt).run({plugins:t.plugins,context:t.context},{config:{},userdata:{},pubsubType:"aplusinit",messageFnQueue:[],middlewareMessageKey:"mw_change_aplusinit"},(function(t){var n=["aplusInitContext",t];W(n);J(n);w(e)&&e(t)}))}({plugins:e.plugins,context:function(){var t={PAGE_LOAD_TIME:new Date},n=[];I.each(e.plugins,(function(e){t[e.name]=e.config;if("aplus_log_inject"===e.name&&e.config&&e.config.plugins){n=e.config.plugins.pv;I.each(n,(function(e){t[e.name]=e.config}))}}));return Object.assign({},t,{sdk_config:e})}},(function(t){n&&w(n)&&n(t)}));return V()}function ae(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var n=function t(){if(this instanceof t){var n=[null];n.push.apply(n,arguments);return new(Function.bind.apply(e,n))}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};Object.defineProperty(n,"__esModule",{value:!0});Object.keys(t).forEach((function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}));return n}var oe="2.1.15";function ie(t,e){try{!function(){if(t&&I.isArray(t)&&t.length){for(var n=_e(t).queue,r={},a=[];r=n.shift();)he(r,e,(function(t){a.push(t)}));a.length>0&&setTimeout((function(){for(;r=a.shift();)he(r,e)}),100)}}()}catch(t){L().w(t)}}function se(){return($("_$")||{}).meta_info}var ce=[],ue=[],fe=[];function pe(t){var e=function(){var t=se()||{};return"1"!=="".concat(t.uaid)||t._anony_id?t._hold||t["aplus-waiting"]:"BLOCK"}(),n=se()||{},r=!0,a=t.arguments||[],o=a[0],i=a[1],s="START";if("_hold"===o&&i===s)return s;if("_anony_id"===o&&i)return s;if(t&&/sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo$/.test(t.action)&&"BLOCK"===e&&!n[e]){fe.push(t);r=!1}return r}function le(t){ie(ce,t);ie(ue,t);ie(fe,t)}function ge(t,e){e&&dt.indexOf(t)>-1&&(t="_".concat(t));return t}function he(t,e,n){var r=!!e.isOpenApi,a=t?t.action:"",o=t?t.arguments:"",i=pe(t);if(i){var s=V().ctx;try{if(a&&o&&I.isArray(o)){var c,u=a.split("."),f=s,p=s;if(3===u.length)p=(f=s[u[0]][u[1]]||{})[c=ge(u[2],r)]?f[c]:"";else for(;u.length;){p=f=f[c=ge(u.shift(),r)];if(!f){w(n)&&n(t);return}}w(p)&&p.apply(f,o);"START"===i&&le(e)}}catch(t){L().w(t)}}}function _e(t,e){for(var n,r={subscribeMwChangeQueue:[],subscribeMetaQueue:[],subscribeQueue:[],metaQueue:[],othersQueue:[]},a={};a=t.shift();)try{var o=a.action,i=a.arguments[0];/subscribe/.test(o)?"setMetaInfo"===i?r.subscribeMetaQueue.push(a):i===_t.MW_CHANGE_PV||i===_t.MW_CHANGE_HJLJ?r.subscribeMwChangeQueue.push(a):r.subscribeQueue.push(a):/MetaInfo/.test(o)?r.metaQueue.push(a):r.othersQueue.push(a)}catch(t){L().w(t);r.othersQueue.push(a)}if(e&&r[e]){n=r[e];r[e]=[]}return{queue:r.subscribeMwChangeQueue.concat(r.metaQueue).concat(r.subscribeQueue).concat(r.subscribeMetaQueue,r.othersQueue),formatQueue:n}}var de=j.extend({push:function(t){this.length++;he(t,this.opts)}}),me=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"processAplusQueue",value:function(t){var e=this.options.config||{},n=q(t);ie(n,e);H(t,de.create({opts:e,startLength:n.length,length:0}))}},{key:"run",value:function(){var t,e,n=this.options.context.sdk_config.queueName;this.processAplusQueue(n);t=n,e=this.options.config,q(t).push({action:_t.SUBSCRIBE,arguments:[_t.SET_META_INFO,function(t,n){t===Pt.DEBUG?L().setDebug(!!n):t===_t._USER_ID&&n?ie(ce,e):t===_t._ANONY_ID&&n?ie(ue,e):"_hold"===t&&"START"===n&&le(e)}]})}}]);return t}(),ve=ae(Object.freeze({__proto__:null,default:me})),ye=function(){var t=null,e="",n=null,r=!1;function a(){var t=ne.getPlatformContext();this.load=function(a){if(n){t.removeStorage({key:e});w(a)&&a()}else{e="aplus_cache_".concat(Vt.getAppKey());t.getStorage({key:e,success:function(o){n=o&&o.data&&O.parse(o.data)||{};r=!0;t.removeStorage({key:e});w(a)&&a()},fail:function(o){L().w("".concat(e,": ").concat(o.errMsg));n={};r=!0;t.removeStorage({key:e});w(a)&&a()}})}};this.save=function(){n&&t.setStorage({key:e,data:O.stringfy(n)})};this.set=function(t,e){n&&(n[t]=e)};this.get=function(t){return(n||{})[t]};this.remove=function(t){n&&n[t]&&delete n[t]};this.getAll=function(){return n};this.clear=function(){n=null};this.has=function(t){return!!this.get(t)};this.isLoaded=function(){return r};this.getSync=function(t){try{var e=ne.getStorageSync(t);return t===Pt.APLUS_IMPRINT_VERSION?e:"string"==typeof e?O.parse(e):e}catch(t){}};this.setSync=function(t,e){try{"object"===s(e)?ne.setStorageSync(t,JSON.stringify(e)):ne.setStorageSync(t,e)}catch(t){}}}return function(){t||(t=new a);return t}}(),Se=function(){var t=null,e=null,n=null;function r(){return{resume:function(t){var r=!1;n||(n=ye().get(Pt.CURRENT_SESSION));e=Date.now();if(!n||!n.end_time||e-n.end_time>Pt.SESSION_INTERVAL){r=!0;!function(t){try{var e=(n||{}).options||{},r=b({},function(t){var e={};for(var n in t)e[n]=t[n];return e}(t.query));r.path=t.path||e.path;r.scene=t.scene?"".concat(ne.getPlatformType(),"_").concat(t.scene):e.scene;var a=t.referrerInfo;a&&(r.referrerAppId=a.appId);L().i("current launch options: ",r);var o=q(K()).getMetaInfo("globalproperty"),i=Date.now();n={id:D.getRandomStr(10)+i,start_time:i,options:r,state_s:1};o&&(n.gp=o)}catch(t){L().e("generate new session failed, errmsg: ",t)}}(t)}return r},pause:function(){!function(){if(n){var t=new Date;n.end_time=Date.now();"number"!=typeof n.duration&&(n.duration=0);n.duration=n.end_time-e;n.state_s=0;ye().set(Pt.CURRENT_SESSION,n);L().i("session end (%s): %s ",n.id,t.toLocaleTimeString(),n)}}()},getCurrentSessionId:function(){return(n||{}).id},getCurrentSession:function(){return n},cloneCurrentSession:function(){return E(n)}}}return function(){t||(t=r());return t}}(),Ie=function(){var t,e,n,r=[],a=[];function o(){if(r.length){var t=ye().get(Pt.EKVS);if(function(t){var e=0;for(var n in t)S(t[n])&&(e+=t[n].length);return e}(t)+r.length<=Pt.EVENT_MAX_COUNT){t=i(t,r);ye().set(Pt.EKVS,t)}}}function i(t,n){var r=(t=t||{})[e];S(r)&&r.length?t[e]=r.concat(n):t[e]=[].concat(n);return t}return function(){t||(t={addEvent:function(t){if(t&&(e=e||"sessionid")){r.unshift(t);if(r.length>Pt.MEMORY_MAX_COUNT){o();r.length=0}}},setSessionId:function(t){e=t;if(S(a)&&a.length&&e){for(var n=0;n<a.length;n++)this.addEvent(a[n]);a.length=0}},setStartId:function(t){n=t},getStartId:function(){return n},getEkvs:function(){var t=ye().get(Pt.EKVS);r&&r.length&&(t=i(t,r));return t},getEkvsLen:function(){var t=(ye().get(Pt.EKVS)||{})[e]||[],n=r?r.length:0;return t.length+n},clear:function(){ye().remove(Pt.EKVS);r.length=0;a.length=0}});return t}}();function be(t){var e;return(e=function(){try{return window}catch(t){}}()?Vt.RemoteCfgUtils.get(Pt.APLUS_REMOTE_CONFIG):ye().getSync(Pt.APLUS_REMOTE_CONFIG))&&e[t]}function Ee(){return q(K()).getMetaInfo(Pt.APLUS_DISABLE_AUTOEVENT_REMOTE)||be("codelessClickEventStatus")}function Pe(){var t=q(K());return be("currentDeviceEnable")||t.getMetaInfo(Pt.APLUS_DEVICE_ENABLE)}function Ae(){return q(K()).getMetaInfo(Pt.APLUS_DISABLE_AUTOPV_REMOTE)||be("codelessCollectorPageStatus")}function Te(){return q(K()).getMetaInfo(Pt.APLUS_AUTOTRACK_ENABLED_REMOTE)||be("codelessStatus")}function Oe(t){var e=K(),n=q(G());if(t&&!A.isEmptyObject(t)){!function(t){var e=q(G()),n=K();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DISABLE_AUTOEVENT_REMOTE,t]})}(t.codelessClickEventStatus);!function(t){var e=q(G()),n=K();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DISABLE_AUTOPV_REMOTE,t]})}(t.codelessCollectorPageStatus);!function(t){var e=K();q(G()).push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_AUTOTRACK_ENABLED_REMOTE,t]})}(t.codelessStatus);!function(t){var e=q(G()),n=K();e.push({action:"".concat(n,".setMetaInfo"),arguments:[Pt.APLUS_DEVICE_ENABLE,t]})}(t.currentDeviceEnable);t.eventSamplingRate&&t.eventSamplingRate.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_EVENT_LIMITRATES,Vt.mapEventSampleRates(t.eventSamplingRate)]});t.codelessIgnoreComponent&&t.codelessIgnoreComponent.length>0&&n.push({action:"".concat(e,".setMetaInfo"),arguments:[Pt.APLUS_AUTOTRACK_CONFIG_REMOTE,t.codelessIgnoreComponent]})}}var we={getAutoEventStatus:Ee,enableCfg:Oe,getAutoTrackStatus:Te,getAutoPageStatus:Ae,getDeviceStatus:Pe},Ce=function(){function t(){f(this,t);if(!t.instance){t.instance=this;t.instance.capacity=1;t.instance.tokens=1;t.instance.fillRate=1;t.instance.lastFillTime=Date.now();t.instance.loaded=!1}return t.instance}l(t,[{key:"run",value:function(){var t=this;setInterval((function(){t.fill()}),1e3)}},{key:"load",value:function(){if(!this.loaded){var t=q(K()).getMetaInfo(Pt.APLUS_MINI_REQUESTS_LIMIT);this.capacity="number"==typeof t&&t<=5&&t>=1?t:1;this.loaded=!0}}},{key:"fill",value:function(){var t=Date.now(),e=(t-this.lastFillTime)*(this.fillRate/1e3);this.tokens=Math.ceil(Math.min(this.tokens+e,this.capacity));this.lastFillTime=t}},{key:"consume",value:(e=u(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e<=this.tokens)){t.next=5;break}this.tokens-=e;return t.abrupt("return",{allowed:!0});case 5:n=1e3*Math.ceil((e-this.tokens)/this.fillRate);return t.abrupt("return",{allowed:!1,waitTime:n});case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}(),ke=new Ce;function Me(t){var e=t,n=[];this.enqueue=function(t){"number"==typeof e&&this.size()>=e&&this.dequeue();n.push(t)};this.dequeue=function(){return n.shift()};this.front=function(){return n[0]};this.isEmpty=function(){return 0===n.length};this.clear=function(){n.length=0};this.size=function(){return n.length};this.items=function(){return n};this.print=function(){L().i("---queue: ",n.toString())}}function xe(t){var e=null;switch(t){case Tt:e=function(){var t=null,e=Se().cloneCurrentSession();e&&(t={header:{st:"1"},analytics:{sessions:[e]}});return t}();break;case Ot:e=function(){var t=null,e={},n=Se().cloneCurrentSession();n&&(e.sessions=[n]);var r=Ie().getEkvs();if(r){e.ekvs=E(r);Ie().clear()}(e.sessions||e.ekvs)&&(t={analytics:e});return t}();break;case wt:e=function(){var t=null,e=Ie().getEkvs();if(e){t={analytics:{ekvs:E(e)}};Ie().clear()}return t}()}return e}function Ne(t){var e={},n=t.networkType;"none"===n&&(n="unknown");switch(n=n?n.toLowerCase():""){case Vt.AccessType.MOBILE_NETWORK_4G:e.access_subtype="LTE";e.access="4G";break;case Vt.AccessType.MOBILE_NETWORK_3G:e.access_subtype="CDMA";e.access="3G";break;case Vt.AccessType.MOBILE_NETWORK_2G:e.access_subtype="GRPS";e.access="2G";break;default:e.access=n;delete e.access_subtype}return e}var Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",De=function(t){for(var e={},n=0,r=t.length;n<r;n++)e[t.charAt(n)]=n;return e}(Re),Ue=String.fromCharCode,Le=function(t){var e;if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?Ue(192|e>>>6)+Ue(128|63&e):Ue(224|e>>>12&15)+Ue(128|e>>>6&63)+Ue(128|63&e);e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return Ue(240|e>>>18&7)+Ue(128|e>>>12&63)+Ue(128|e>>>6&63)+Ue(128|63&e)},je=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Fe=function(t){var e=[0,2,1][t.length%3],n=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[Re.charAt(n>>>18),Re.charAt(n>>>12&63),e>=2?"=":Re.charAt(n>>>6&63),e>=1?"=":Re.charAt(63&n)].join("")},Be=function(t){return e=function(t){return t.replace(je,Le)}(t),e.replace(/[\s\S]{1,3}/g,Fe);var e};function Ve(t,e){return e?Be(String(t)).replace(/[+\/]/g,(function(t){return"+"===t?"-":"_"})).replace(/\=/g,""):Be(String(t))}var Ke=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),Ge=function(t){switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return Ue(55296+(e>>>10))+Ue(56320+(1023&e));case 3:return Ue((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return Ue((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},qe=function(t){var e=t.length,n=e%4,r=(e>0?De[t.charAt(0)]<<18:0)|(e>1?De[t.charAt(1)]<<12:0)|(e>2?De[t.charAt(2)]<<6:0)|(e>3?De[t.charAt(3)]:0),a=[Ue(r>>>16),Ue(r>>>8&255),Ue(255&r)];a.length-=[0,0,2,1][n];return a.join("")},He=function(t){return e=function(t){return t.replace(/[\s\S]{1,4}/g,qe)}(t),e.replace(Ke,Ge);var e},$e=[];function Ye(t,e){var n=Qe(t,e);t&&t.id_tracking&&(n[e.id_tracking||"id_tracking"]=Qe(t.id_tracking,Et));return n}function Qe(t,e){var n={};for(var r in t)e[r]?n[e[r]]=t[r]:n[r]=t[r];return n}function ze(t,e){var n={};if(t)for(var r in t)t[r]&&(n[e[r]]=t[r]);return n}var We=function(){function t(){f(this,t);this._imprint=""}l(t,[{key:"set",value:function(t){this._imprint="string"==typeof t?t:Ve(JSON.stringify(t))}},{key:"get",value:function(){return this._imprint}},{key:"getImpObj",value:function(){return O.parse((t=this._imprint,He(String(t).replace(/[-_]/g,(function(t){return"-"===t?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))));var t}},{key:"getItem",value:function(t){var e=this.getImpObj();return e&&e[t]||""}},{key:"load",value:function(){this._imprint=ye().get(Pt.IMPRINT)}},{key:"save",value:function(){this._imprint&&ye().set(Pt.IMPRINT,this._imprint)}}]);return t}(),Je=new We;function Xe(t,e,n,r){var o=q(K()),i=function(){var t={},e=q(K()),n=e.globalConfig||{},r=e._aplus_client||{},a=ye().get(Pt.IMPRINT);a&&(t.imprint=a);t.device_type="Phone";t.sdk_version=n.lver;t.appkey=Vt.getAppKey();t.device_info="";t.appid=r.appId;t.app_version=e.getMetaInfo("appVersion")||"devtools";var o=e.getMetaInfo("aplus-global-args");o&&o.debugId?t.miniappDebugId=o.debugId:ye().get("miniappDebugId")&&(t.miniappDebugId=ye().get("miniappDebugId"));var i=r||{};i.safeArea=i.safeArea||{};var s=i.model||"",c=i.platform||"",u=i.brand||"",f=u.toLowerCase();t.sdk_type=ne.getPlatformSdkType();t.platform=ne.getPlatformType();t.platform_sdk_version=i.SDKVersion;t.platform_version=i.platformVersion;var p=Math.round(i.screenWidth*i.pixelRatio),l=Math.round(i.screenHeight*i.pixelRatio);t.resolution=p>l?"".concat(p,"*").concat(l):"".concat(l,"*").concat(p);t.pixel_ratio=i.pixelRatio;t.os=c;t.font_size_setting=i.fontSizeSetting;t.device_model=s;t.device_brand=u;t.device_manufacturer=f;t.device_manuid=s;t.device_name=s;t.os_version=i.os_version;t.language=i.language;var g=Ne(r);t.access=g.access;g.access_subtype&&(t.access_subtype=g.access_subtype);return t}();try{if("my"===ne.getPlatformType()||"taobao"===ne.getPlatformType()){i.id_type="alipay_id";i.id_tracking={alipay_id:o.getMetaInfo(_t._ANONY_ID)||ye().get(_t._ANONY_ID)||"",unionid:o.getMetaInfo(_t._DEV_ID)||ye().get(_t._DEV_ID)||"",userId:o.getMetaInfo(_t._USER_ID)||""}}else{i.id_type="openid";i.id_tracking={openid:o.getMetaInfo(_t._ANONY_ID)||ye().get(_t._ANONY_ID)||"",unionid:o.getMetaInfo(_t._DEV_ID)||ye().get(_t._DEV_ID)||"",userId:o.getMetaInfo(_t._USER_ID)||""}}Je.get()&&(i[Pt.IMPRINT]=Je.get());if(t.analytics){var s=o.getMetaInfo(_t._USER_ID)||ne.getStorageSync(_t._USER_ID),c=o.getMetaInfo("_user_nick");t.analytics.active_user={puid:s,provider:c}}var u=Date.now();t.header=A.assign(i,a(a({},t.header),{},{traceId:D.getRandomStr(10)+u+D.getRandomStr(9),start_id:Ie().getStartId()}));var f=function(t,e){return{h:Ye(t.header,"mini"===e?bt:It),a:ze(t.analytics,"mini"===e?vt:yt)}}(t,"mini"),p=O.stringfy(f),l=function(){var t=q(K()),e=t.getMetaInfo(Pt.TRACKDOMAIN)||t.getMetaInfo(Pt.APLUS_PV_DOMAIN);if(!Vt.checkDomain(e))return"";var n=ne.getLogDomain();if(!n){L().tip_w("current miniapp framework is not supported!!");return""}return Vt.fixDomain(e)+n}(),g=o.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT)||Pt.DEFAULT_REQUEST_TIMEOUT,h={url:l,method:"POST",data:Ve(p),timeout:g,success:function(r){var a,o,i=r.code||r.status||r.statusCode;if(200===i||413===i){L().i("event send success:",t,p);try{if(r.profile){a={end:r.profile.responseEnd,start:r.profile.requestStart},"number"==typeof(o=a.end-a.start)&&o>=300?$e.push(o):$e=[];!function(){if($e.length>=10){q(K())._record(Pt.PERFORMANCE_WARING,"OTHER",{});$e=[]}}()}}catch(t){L().w("current miniapp not support profile API")}!function(t){var e=ye().getSync(Pt.APLUS_IMPRINT_VERSION);if(t){var n=q(K());if(t.imprintVersion&&t.imprintVersion!==e){var r=t.imprintVersion;ye().setSync(Pt.APLUS_IMPRINT_VERSION,r);var a=n.getMetaInfo(Pt.APLUS_PV_DOMAIN)||n.getMetaInfo(Pt.TRACKDOMAIN),o=Vt.fixDomain(a)+r;n.requestRemoteConfig(o,(function(t){if(t.data&&t.data.data){Oe(t.data.data);ye().setSync(Pt.APLUS_REMOTE_CONFIG,t.data.data)}}),(function(t){L().w("remote configuration request failed, errmsg:",t)}))}else Oe(ye().getSync(Pt.APLUS_REMOTE_CONFIG))}}(r.data||{});w(e)&&e(r)}else{L().w("event send failed:",p);w(n)&&n()}},fail:function(t){if(Date.now()-u<_){L().w("event send failed:",p);L().w("event send failed because ",t)}else{L().w("current request timeout:",_);L().w("event send timeout:",p)}w(n)&&n()},complete:function(){w(r)&&r()}},_=o.getMetaInfo(Pt.APLUS_MINI_REQUEST_TIMEOUT);_&&(h.timeout=_);!function(t){var e=ne.getPlatformContext();try{e.request(t)}catch(e){try{dd&&dd.httpRequest(t)}catch(t){L().w("request send failed, err msg: ",t)}}}(A.assign(h,"dd"===ne.getPlatformType()?{headers:{"Content-Type":"application/json"}}:{header:{"content-type":"application/json"}}))}catch(t){}}var Ze=function(t){return new Promise((function(e){return setTimeout(e,t)}))},tn=function(t){if(t&&t.analytics&&t.analytics.ekvs)return Object.keys(t.analytics.ekvs)[0]},en=function(t){var e=[];if(I.isArray(t)&&t.length>0){var n=Array.from(new Set(t.map((function(t){return t.header.start_id}))));n.forEach((function(n){var r,a=t.filter((function(t){return t.header.start_id===n})),o=a.reduce((function(t,e,n,a){if(t){r=A.cloneDeep(t);var o=tn(t);r.analytics.ekvs[o]=r.analytics.ekvs[o].concat(e.analytics.ekvs[o]);return r}return t=a[n]}));e.push(o)}));for(var r=new Array(e.length).fill([]),a=Object.create(null),o=0;o<e.length;o++){for(var i=e[o],s=tn(i),c=i.analytics.ekvs[s].filter((function(t){return!!t})).map((function(t){return t.uuid})),u=0;u<c.length;u++){var f=c[u];a[f]?r[o].push(u):a[f]=1}r[o].length>0&&i.analytics.ekvs[s].splice(r[o][0],r[o].length)}}return e},nn=function(){function t(){f(this,t);this.queue=new Me;this.isProcessing=!1;this.Tag=""}l(t,[{key:"enqueue",value:function(t,e,n){e=e||{};var r=xe(t);if(r){var a=q(K())._aplus_client||{};r.header=b(r.header,Ne(a));r.noCache=e.noCache;this.queue.enqueue(r)}this.isProcessing||this.processQueue(n)}},{key:"load",value:function(t){var e=this,n=ye().get(t);n&&n.length&&n.forEach((function(t){e.queue.enqueue(t)}));ye().remove(t)}},{key:"processQueue",value:(e=u(o().mark((function t(e){var n,r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.isProcessing=!0;case 1:if(!(this.queue.size()>0)){t.next=17;break}n=this.queue.front();t.next=5;return ke.consume(1);case 5:r=t.sent;a=r.allowed;i=r.waitTime;if(!a){t.next=13;break}this.queue.dequeue();sn(n);t.next=15;break;case 13:t.next=15;return Ze(i);case 15:t.next=1;break;case 17:this.isProcessing=!1;w(e)&&e();case 19:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]);var e;return t}(),rn=function(t){h(n,t);function n(){var t;f(this,n);t=e(this,n);n.instance||(n.instance=m(t));return v(t,n.instance)}l(n,[{key:"prepare",value:function(t,e,n){var r=q(K());Vt.checkOpenid(r.getMetaInfo(_t._ANONY_ID));t===wt?this.enqueue(t,e,(function(){w(n)&&n()})):this.isProcessing||this.processQueue(n)}}]);return n}(nn),an=new(function(t){h(n,t);function n(){var t;f(this,n);t=e(this,n);if(!n.instance){n.instance=m(t);n.instance.failedRequests=[]}return v(t,n.instance)}l(n,[{key:"prepare",value:function(){var t=this;en(this.failedRequests).forEach((function(e){t.queue.enqueue(e)}))}},{key:"clearFailedRequests",value:function(){this.failedRequests.length=0}},{key:"save",value:function(){var t=(ye().get(Pt.FAILED_REQUESTS)||[]).concat(this.failedRequests),e=en(t);e&&e.length&&ye().set(Pt.FAILED_REQUESTS,e);this.clearFailedRequests()}}]);return n}(nn)),on=new rn,sn=function(){var t=u(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&Xe(e,(function(){}),(function(){e&&!e.noCache&&an.failedRequests.push(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),cn=0;function un(t,e){var n={};e&&(n.scene=e);t&&t.miniappDebugId&&(n.debugId=t.miniappDebugId);for(var r in t)"$$_share_uid"!==r&&0!==r.indexOf("$$_utm_")||(n[r]=t[r]);return n}function fn(){var t=App,e=!1,n=!1,r=V().ctx,a=G(),o=ne.getPlatformContext(),i=function(t){ne.initIsTB();var e=t?t.query:{},n=t?t.referrerInfo:{};we.enableCfg(ye().getSync(Pt.APLUS_REMOTE_CONFIG));cn+=1;r[a].push({action:At.appendMetaInfo,arguments:["aplus-session-args",A.assign(n,{scene:t.scene||""})]});if(e){var o={};e.spm&&(r.aplus.spm_orign=e.spm);t.scene&&(o.scene=t.scene);if(e.miniappDebugId){var i=e.miniappDebugId.trim(),s=i.split("_");o=A.assign(o,{aplus_work_no:s.length>2?s[1]:i,aplus_track_debug_id:i,aplus_flag:"aplus_test"})}r[a].push({action:At.appendMetaInfo,arguments:["aplus-exdata",o]});r[a].push({action:At.appendMetaInfo,arguments:["aplus-cpvdata",o]});r[a].push({action:At.appendMetaInfo,arguments:["aplus-global-args",un(e,t.scene)]})}},c=function(t){cn+=1;var n,o=t?t.query:{},i=t?t.scene:"";r[a].push({action:_t.SDK_APPEND_META_INFO,arguments:["aplus-global-args",un(o,i)]});r[a].push({action:At.appendMetaInfo,arguments:[Pt.GLOBAL_PROPERTY,ne.getUtmParamsObj(o)]});if(i){r[a].push({action:At.appendMetaInfo,arguments:["aplus-exdata",{scene:i}]});r[a].push({action:At.appendMetaInfo,arguments:["aplus-cpvdata",{scene:i}]});r[a].push({action:At.appendMetaInfo,arguments:["aplus-session-args",{scene:i}]})}2===cn?n=1:1===cn?n=0:L().w("APP_LAUNCH_TYPE should not reach this, value = ".concat(cn));ke.load();ke.run();if(!e){e=!0;!function(t){ye().load((function(){L().w("cache init success");t.query&&t.query.miniappDebugId&&t.query.miniappDebugId!==ye().get("miniappDebugId")&&ye().set("miniappDebugId",t.query.miniappDebugId)}));var e={},n=A.cloneDeep(t);for(var r in n)"object"===s(n[r])?e=A.assign(n[r],e):n[r]&&(e[r]=n[r]);var a=Se().resume(e),o=Se().getCurrentSessionId();Ie().setSessionId(o);if(a){an.load(Pt.FAILED_REQUESTS);an.processQueue()}}(t)}Vt.RankUtils.clear();var c=Vt.getStartId();Ie().setStartId(c);r.onAppShowTime=Date.now();r[G()].push({action:At.record,arguments:[Pt.APP_START,"SHOW",{start_type:n,is_auto:1,currentPath:t.path||""}]})},u=function(){var t=Date.now()-r.onAppShowTime;r[G()].push({action:At.record,arguments:[Pt.APP_END,"H_OR_U",{duration:t,end_type:0,start_time:r.onAppShowTime,is_auto:1}]});e=!1;!function(){Se().pause();an.prepare();an.processQueue().then((function(){an.save();ye().save()}))}();cn=0};if(t.after)t.after({methods:{onLaunch:function(t){t.thisObject&&(t.thisObject[K()]=r[K()]);i(t.args)},onShow:function(t){c(t.args)},onHide:function(){u()}}});else{App=function(e){e[K()]=r[K()];t(e)};try{o.onAppShow((function(t){if(!n){var e={};e=w(o.getLaunchOptionsSync)?o.getLaunchOptionsSync()||{}:t;i(e);n=!0}c(t)}));o.onAppHide((function(){u()}));!function(t){try{my&&my.onTitleCloseClick&&t&&my.onTitleCloseClick(t)}catch(t){}}(u)}catch(t){L().w("hook app failed, errmsg = ",t)}}}var pn=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){["object","function"].indexOf("undefined"==typeof App?"undefined":s(App))>-1&&fn()}}]);return t}(),ln=ae(Object.freeze({__proto__:null,default:pn})),gn="",hn={};function _n(t){var e=q(K()).getMetaInfo("pageConfig")||{},n=t||gn;try{if(e&&"object"===s(e))for(var r in e){if(r===n)break;if(e[r]&&e[r].regRule&&e[r].regRule.test(n)){n=r;break}}}catch(t){}return e[n]}var dn={getCurrentPagePath:function(){return gn},getPrePagePath:function(t){return t&&-1!==t.indexOf("?")?t.split("?")[0]:t},setCurrentPath:function(t){t&&(gn=t)},getPageQuery:function(t){if(t)return hn[t]},setPageQuery:function(t,e){t&&(hn[t]=e)},getFullPath:function(t){return function(t,e){if(!t||"-"===t)return"";var n=[];for(var r in e)n.push("".concat(r,"=").concat(e[r]));var a=n.join("&");return a?"".concat(t,"?").concat(a):t}(t,hn[t])},getPageOptions:_n,getPageName:function(t){return(_n(t)||{}).pageName},getPrePageName:function(t){return(_n(t)||{}).pageName},getPageTitle:function(t){return(_n(t)||{}).pageTitle||ne.getWxTitle(t)},getVTRealtimeCode:function(){if(gn){var t=hn[gn]||{},e=/^\$vt_/,n=decodeURIComponent(t.scene);return n&&e.test(n)&&n.replace(e,"")}},getPageProperties:function(t){return(_n(t)||{}).properties},skipPage:function(t){return(_n(t)||{}).skipMe}},mn={onAplusReady:function(t,e,n){t.push({action:e,arguments:[_t.SDK_READY,function(t){"complete"===t&&"function"==typeof n&&n()}]})},click_proxy:function(t,e){var n=q(K()),r=t[e];t[e]=function(){var t=r.apply(this,arguments),e=arguments[0];A.isObject(e)&&n&&n.record&&n.record("$$_auto_clk","CLK",{});return t}},getIndexByRect:function(t,e,n){var r=-1;ne.getPlatformContext().createSelectorQuery().selectAll(t).boundingClientRect().exec((function(t){I.each(t[0],(function(t,n){t.width===e.width&&t.height===e.height&&t.left===e.left&&t.top===e.top&&t.right===e.right&&t.bottom===e.bottom&&(r=n)}));n(r)}))}};function vn(t,e){var n=ne.getCurrentPage(),r=n.route||n.is||"",a=n.options||{},o=V().ctx,i=G(),c=U.obj2queryStr(a,!0),u=A.cloneDeep(t);c&&(r="".concat(r,"?").concat(c));A.isEmptyObject(u.query)?u.query=a:"string"==typeof u.query&&(u.query=D.query2obj(u.query));if("object"===s(u.query)){u.query.$$_share_uid=o[K()].getMetaInfo("_anony_id");u.query.$$_utm_medium=3;u.query=U.obj2queryStr(u.query)}var f=u.path||r,p="$$_share_uid=".concat(u.query.$$_share_uid,"&$$_utm_medium=3");f.indexOf("?")>-1?u.path="".concat(f,"&").concat(p):u.path="".concat(f,"?").concat(p);u.status="ready";t.promise&&(u.promise=t.promise);o[i].push({action:_t.PUBLISH,arguments:[e,u]});return u}function yn(){V().ctx[G()].push({action:_t.PUBLISH,arguments:["onPullDownRefresh",{status:"ready"}]})}function Sn(){var t={status:"ready",context:this};V().ctx[G()].push({action:_t.PUBLISH,arguments:["onReachBottom",t]})}function In(t){var e=V().ctx,n=G();try{dn.setCurrentPath(this.route);t&&dn.setPageQuery(this.route,t);L().i("Page onLoad: ",this.route,t);var r=this;mn.onAplusReady(e[n],_t.SUBSCRIBE,(function(){var a=function(t){var e=V().ctx[K()].getMetaInfo(Pt.GLOBAL_PROPERTY),n=Object.keys(t);A.eachMap(e,(function(r){var a=!1;y(n,(function(t){if(D.isStartWith(t,"utm_")){a=!0;return"break"}}));a&&0===r.indexOf("utm_")&&!t[r]&&delete e[r]}));return Object.assign({},e,t)}(ne.getUtmParamsObj(t));e[K()].appendMetaInfo(Pt.GLOBAL_PROPERTY,a);e[n].push({action:_t.PUBLISH,arguments:["onLoad",{status:"ready",context:r}]});var o=ne.getCurrentPage();Vt.resetFn(o,"setData",(function(t){e[n].push({action:_t.PUBLISH,arguments:["onPageDataChanged",{data:t,context:r}]})}))}))}catch(t){L().w("onPageLoad: ",t)}}function bn(){var t=V().ctx,e=G(),n=this;try{dn.setCurrentPath(this.route);var r=this;setTimeout((function(){mn.onAplusReady(t[e],_t.SUBSCRIBE,(function(){t[e].push({action:_t.PUBLISH,arguments:["onShow",{status:"ready",context:r,route:n.route}]})}))}),0)}catch(t){L().w("onPageShow: ",t)}}function En(){var t=V().ctx,e=G();try{t[e].push({action:_t.PUBLISH,arguments:["onReady",{status:"ready",context:this,route:this.route}]})}catch(t){L().w("onPageReady: ",t)}}function Pn(){var t=V().ctx,e=G();try{t[e].push({action:_t.PUBLISH,arguments:["onHide",{status:"ready",route:this.route}]})}catch(t){L().w("onPageHide: ",t)}}function An(t){V().ctx[G()].push({action:_t.PUBLISH,arguments:["onAplusClk",{status:"ready",event:t,context:this}]})}function Tn(t){V().ctx[G()].push({action:_t.PUBLISH,arguments:["onAplusTouch",{status:"ready",context:this,event:t}]})}function On(t){if(t.onShareAppMessage){var e=t.onShareAppMessage;t.onShareAppMessage=function(t){var n=e.call(this,t)||{};n.from=t&&t.from;return vn(n,"onShareAppMessage")}}}function wn(){try{var t,e=Page;e.after&&(t=e.after);Page=function(t){Vt.FunctionUtils.rewriteFn(t,"onShow",bn);Vt.FunctionUtils.rewriteFn(t,"onHide",Pn);Vt.FunctionUtils.rewriteFn(t,"onUnload",Pn);Vt.FunctionUtils.rewriteFn(t,"onLoad",In);Vt.FunctionUtils.rewriteFn(t,"onReady",En);Vt.FunctionUtils.rewriteFn(t,"onPullDownRefresh",yn);Vt.FunctionUtils.rewriteFn(t,"onReachBottom",Sn);Vt.FunctionUtils.rewriteFn(t,"onAplusClk",An);Vt.FunctionUtils.rewriteFn(t,"onAplusTouch",Tn);On(t);!function(t){if(t.onShareTimeline){var e=t.onShareTimeline;t.onShareTimeline=function(t){return vn(e.call(this,t)||{},"onShareTimeline")}}}(t);!function(t){if(t.onAddToFavorites){var e=t.onAddToFavorites;t.onAddToFavorites=function(t){var n=e.call(this,t)||{};V().ctx[G()].push({action:_t.PUBLISH,arguments:["onAddToFavorites",n]})}}}(t);e(t)};t&&(Page.after=function(){t.apply(this,arguments)})}catch(t){L().w("Page hook error")}}function Cn(){try{var t=Component;Component=function(e){try{e.methods=e.methods||{};var n=e.methods;Vt.FunctionUtils.rewriteFn(n,"onShow",bn);Vt.FunctionUtils.rewriteFn(n,"onHide",Pn);Vt.FunctionUtils.rewriteFn(n,"onUnload",Pn);Vt.FunctionUtils.rewriteFn(n,"onLoad",In);On(n);t(e)}catch(n){t(e)}}}catch(t){L().w("Component hook error")}}function kn(t,e,n){["object","function"].indexOf(s(t))>-1?n():L().w("typeof ".concat(e," is not object cant watchExp."))}var Mn={},xn=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){kn(Page,"Page",wn);kn(Component,"Component",Cn);!function(){var t=this,e=V().ctx,n=ne.getPlatformContext();try{if(n&&n.setNavigationBarTitle){var r=n.setNavigationBarTitle;Object.defineProperty(n,"setNavigationBarTitle",{get:function(){return function(n){var a=ne.getCurrentPage(),o=a.route||a.is;n=A.isObject(n)?n:{};Mn[o]=n.title;e[K()].globalTitleMap=Mn;r.call(t,n)}}})}}catch(t){L().w(t)}}()}}]);return t}(),Nn=ae(Object.freeze({__proto__:null,default:xn})),Rn=function(t){for(var e=t.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=t[r];return n},Dn=j.extend({callable:function(t){if(!w(t))throw new TypeError(t+" is not a function");return t},create:function(t){var e=new this;for(var n in t)e[n]=t[n];e.handlers=[];e.pubs={};return e},setHandlers:function(t){this.handlers=t},subscribe:function(t,e){this.callable(e);var n=this,r=(n.pubs||{})[t]||[];if(r)for(var a=0;a<r.length;a++){var o=r[a]();e.apply(n,o)}var i=n.handlers||[];t in i||(i[t]=[]);i[t].push(e);n.setHandlers(i);return n},unsubscribe:function(t,e){this.callable(e);try{var n=this.handlers[t];if(!n)return this;if("object"===s(n)&&n.length>0){for(var r=0;r<n.length;r++)e.toString()===n[r].toString()&&n.splice(r,1);this.handlers[t]=n}else delete this.handlers[t]}catch(t){}return this},publish:function(t){var e=Rn(arguments),n=this.handlers||[],r=n[t]?n[t].length:0;if(r>0)for(var a=0;a<r;a++){var o=n[t][a];w(o)&&o.apply(this,e)}return this},cachePubs:function(t){var e=this.pubs||{},n=Rn(arguments);e[t]||(e[t]=[]);e[t].push((function(){return n}))}}),Un=ae(Object.freeze({__proto__:null,default:Dn})),Ln=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=q(K()),e="".concat(K(),"_pubsub");if(!t[e]){var n=Un.default.create();t[e]=n}}}]);return t}(),jn=ae(Object.freeze({__proto__:null,default:Ln}));function Fn(t,e,n){if(Vt.checkEvent(t,e)){var r=function(t,e){if("string"!=typeof t||!t){L().w("event logkey is invalid, id =",t||"'' event properties = ",O.stringfy(e.cusp));return null}var n=Object.create(null),r=Date.now();n.id=t;e&&e.ts||(n.ts=r);e&&e.uuid||(n.uuid=Vt.getUUID());if("object"===s(e))for(var a in e)({}).hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(t,e);r.rank=Vt.RankUtils.rank();r&&r.id===Pt.APP_END&&(r.amount=r.rank);L().i("event: ",t,e);Ie().addEvent(r);var a=q(G()),o=q(K()),i=Pt.MAX_QUEUE_COUNT,c=o.getMetaInfo("max-queue-count");T.isNumber(c)&&!isNaN(parseInt(c,10))&&(i=parseInt(c,10));var u=o.getMetaInfo(_t._ANONY_ID);(t===Pt.APP_END||Ie().getEkvsLen()>=i)&&(n?u?on.prepare(wt,{noCache:!1}):a.push({action:_t.SUBSCRIBE,arguments:[_t.SET_META_INFO,function(t){t===_t._ANONY_ID&&on.prepare(wt,{noCache:!1})}]}):on.prepare(wt,{noCache:!1}))}}var Bn,Vn=j.extend({subscribeLogs:function(t,e){Ct.pushIntoGoldlogQueue(_t.SUBSCRIBE,[t,function(t){t.status===_t.COMPLETE&&e(t)}])},getLogicSymbol:function(){return"ALI"===this.format?"&":"||"},handlerMiddleware:function(){},watchLOG:function(){var t=this;t.subscribeLogs(_t.MW_CHANGE_PV,(function(e){t.handlerMiddleware(e,"pv")}));t.subscribeLogs(_t.MW_CHANGE_HJLJ,(function(e){t.handlerMiddleware(e,K())}))},run:function(){this.watchLOG()}}).extend({handlerMiddleware:function(t){var e,n,r=this.metaInfo&&this.metaInfo.autoGetOpenid,a=V().ctx,o=K(),i=t&&t.userdata&&t.userdata.logkey,s=a[o].getMetaInfo(Pt.APLUS_PRESET_EVENTS_DISABLED);if(!(s&&I.isArray(s)&&i&&i.indexOf("$$_")>-1&&-1!==s.indexOf(i))){var c,u=t&&t.userdata&&t.userdata.gmkey,f=t&&t.what_to_send&&t.what_to_send.logdata&&t.what_to_send.logdata||{},p=a[o].getMetaInfo(Pt.GLOBAL_PROPERTY);if("CLK"===u||"EXP"===u||"OTHER"===u||i===Pt.APP_START||i===Pt.APP_END){e=A.cloneDeep(t&&t.userdata&&t.userdata.gokey)||{};n=f.gokey||{};var l={};if("$$_share"===i){l.refer_page=f.url;l.share_type=e.share_type}n.scene&&(l.scene="".concat(ne.getPlatformType(),"_").concat(n.scene));if(n.targetAppKey){l.targetAppKey=e.targetAppKey;delete e.targetAppKey}c=e.page_name||dn.getPageName(f.url)||f.url||"";l.page_name=c;l.url=f.url||"";l.ref_url="-"!==f.pre?f.pre:"";l.ref_page_name=dn.getPrePageName(dn.getPrePagePath(l.ref_url))||dn.getPrePagePath(l.ref_url);if(e.page_name||e["data-pagename"]){delete e.page_name;delete e["data-pagename"]}A.isEmptyObject(p)||(l.gp=p);if(e.spm){l["spm-cnt"]=[encodeURIComponent(c),e.spm.c,e.spm.d].filter((function(t){return!!t})).join(".");delete e.spm}if(e.page_title){l.page_title=e.page_title;delete e.page_title}else l.page_title=n._page_title||dn.getPageTitle(f.url)||"";if(e.is_auto){l.is_auto=e.is_auto;l.track_type="1";delete e.is_auto;f.event_code&&(l.event_type_id=f.event_code)}else{l.is_auto=0;l.track_type="0"}"EXP"!==u&&"CLK"!==u||["element_type","element_selector","element_path","element_content","element_id","element_name","element_class_name"].forEach((function(t){if(Object.prototype.hasOwnProperty.call(e,t)){l.ap?l.ap[t]=e[t]:l.ap=g({},t,e[t]);delete e[t]}}));Fn(i,i===Pt.APP_START||i===Pt.APP_END?A.assign(l,e):A.assign(l,{cusp:e}),r)}else if("2001"===f.event_code){var h={},_=Pt.PAGE_START;c=(n=A.cloneDeep(f.gokey)||{}).page_name||dn.getPageName(f.url)||f.url||"";h.r=f.arg1||f.logkey||"-";h.page_name=c;if(n._page_auto_pv){h.is_auto=1;h.url=n.path||"";h.ref_url="-"!==n.referrer?n.referrer:"";h.track_type="1";delete n._page_auto_pv;delete n.referrer;delete n.path;delete n.page_name}else{h.is_auto=0;h.url=f.url||"";h.ref_url="-"!==f.pre?f.pre:"";h.track_type="0"}if(n.duration){h.duration=n.duration;delete n.duration}A.isEmptyObject(p)||(h.gp=p);n.scene&&(h.scene="".concat(ne.getPlatformType(),"_").concat(n.scene));n=Vt.deleteInfo(n,["_anony_id","_dev_id","_session_id","_user_id","_user_nick","uaid","pvid","scene"]);h["spm-cnt"]=encodeURIComponent(c);if(n._page_auto_id){_=n._page_auto_id;delete n._page_auto_id}if(n.page_start){h.page_start=n.page_start;delete n.page_start}if(n.page_title){h.page_title=n.page_title;delete n.page_title}else h.page_title=n._page_title||dn.getPageTitle(f.url)||"";delete n._page_title;h.url=dn.getFullPath(h.url);h.ref_url=dn.getFullPath(h.ref_url);h.ref_page_name=dn.getPrePageName(dn.getPrePagePath(h.ref_url))||dn.getPrePagePath(h.ref_url);Fn(_,A.assign(h,{cusp:n}),r)}}},run:function(){this.watchLOG()}}),Kn=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo;Vn.create({metaInfo:t}).run(this.options)}}]);return t}(),Gn=ae(Object.freeze({__proto__:null,default:Kn})),qn={};function Hn(){return Bn||function(){Bn=qn||{};return qn}()}function $n(t,e){var n=q(K());Bn||(Bn={});if("aplus-inject-record-gokey"===t){!function(t){try{L().w(t)}catch(t){}}("the API aplus-inject-record-gokey is deprecated, if needed please concat APLUS SDK supporter");n.record("/inject.record.gokey","OTHER","")}Bn[t]=e;return!0}function Yn(t){Bn||(Bn={});return Bn[t]||""}function Qn(t,e){if(t&&e){var n,r=function(n){n.constructor===Array?function(n){try{var r="string"==typeof e?JSON.parse(e):e;a(t,n.concat(r))}catch(t){}}(n):function(n){try{var r="string"==typeof e?JSON.parse(e):e;a(t,Object.assign({},n,r))}catch(t){}}(n)},a=function(t,e){zn(t,e)},o=Yn(t);if("aplus-exinfo"===t){a(t,A.assign(o,M(e)));n=!0}if("aplus-page-properties"===t){var i=e;if(o)for(var c in o)e[c]?i[c]=A.assign(o[c],e[c]):i[c]=o[c];a(t,i);n=!0}if(o)if("object"===s(o)){r(o);n=!0}else try{var u=JSON.parse(o);if("object"===s(u)){r(u);n=!0}}catch(t){}n||a(t,e)}}function zn(t,e){var n,r,a="OVERWRITE",o=a;if("object"===s(t)){n=t.metaName;r=t.metaValue;o=t.mode||a}else{n=t;r=e}if(o!==a)return Qn(n,r);if($n(n,r)){var i=$("_$")||{};i.meta_info=Hn();var c=Y("_$",i),u=["setMetaInfo",n,r,{}];W(u);J(u);if(n===_t._ANONY_ID||n===_t._DEV_ID||n===_t._USER_ID)ne.setStorageSync(n,r||"");else{!ne.getStorageSync(_t._ANONY_ID)&&i.meta_info[_t._ANONY_ID]&&ne.setStorageSync(_t._ANONY_ID,i.meta_info[_t._ANONY_ID]);!ne.getStorageSync(_t._DEV_ID)&&i.meta_info[_t._DEV_ID]&&ne.setStorageSync(_t._DEV_ID,i.meta_info[_t._DEV_ID]);!ne.getStorageSync(_t._USER_ID)&&i.meta_info[_t._USER_ID]&&ne.setStorageSync(_t._USER_ID,i.meta_info[_t._USER_ID])}return c}}var Wn=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=this.options.context&&this.options.context.sdk_config,e=q(K()),n=e._$=e._$||{};n.is_terminal=!0;n.send_pv_count=0;n.spm={data:{}};n.meta_info=Hn()||{};e.globalConfig=t.globalConfig;for(var r in t.metaInfo)$n(r,t.metaInfo[r]);e._$=n;e.isInternational=function(){return!1}}}]);return t}(),Jn=ae(Object.freeze({__proto__:null,default:Wn})),Xn=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getLogConfig",value:function(){var t={},e=this.options.config.plugins,n=function(n){t[n]={plugins:e[n],context:{}};y(e[n],(function(e){t[n].context[e.name]=e.config||{}}))};for(var r in e)n(r);return t}},{key:"run",value:function(){this.options.context.logConfig=this.getLogConfig();this.options.context.logConfig.pageLoadTime=this.options.context.PAGE_LOAD_TIME}}]);return t}(),Zn=ae(Object.freeze({__proto__:null,default:Xn})),tr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getMetaInfo",value:function(){return($("_$")||{}).meta_info}},{key:"getAplusWaiting",value:function(){return(this.getMetaInfo()||{})["aplus-waiting"]}},{key:"run",value:function(t,e){var n=this.options.config||{},r=this.getAplusWaiting();if(r&&n.is_auto){r="".concat(this.getAplusWaiting());this.options.context.when_to_sendpv={aplusWaiting:r};switch(r){case _t._USER_ID:case _t._ANONY_ID:case"MAN":return"done";case"1":this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),6e3);return 6e3;default:var a=1*r;if("NaN"!=="".concat(a)){this.options.context.when_to_sendpv.isWait=!0;setTimeout((function(){e()}),a);return a}}}}}]);return t}(),er=ae(Object.freeze({__proto__:null,default:tr})),nr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getMetaInfo",value:function(t){return(($("_$")||{}).meta_info||{})[t]}},{key:"getHostUrl",value:function(){var t=this.getMetaInfo(Pt.TRACKDOMAIN)||this.getMetaInfo(Pt.APLUS_PV_DOMAIN);if(Vt.checkDomain(t)){var e=ne.getLogDomain();if(!e){L().tip_w("current miniapp framework is not supported!!");return""}return Vt.fixDomain(t)+e}}},{key:"run",value:function(){this.options.context.where_to_send.method="POST";var t=this.getHostUrl();if(!t||t.indexOf("https://")<0&&t.indexOf("http://")){L().w("current trackDomain invalid: ".concat(t));return"done"}this.options.context.where_to_send.url=t}}]);return t}(),rr=ae(Object.freeze({__proto__:null,default:nr}));function ar(t,e,n){return t?Vt.hash(encodeURIComponent(t)).substring(0,e):n}var or={getLogId:function(t,e){var n=function(t){var e,n="",r=!1;function a(t){return 1===t?"0123456789abcdefhijklmnopqrstuvwxyzABCDEFHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):2===t?"0123456789abcdefghijkmnopqrstuvwxyzABCDEFGHIJKMNOPQRSTUVWXYZ".substring(Math.floor(60*Math.random()),1):"0"}for(;n.length<t;){e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".substring(Math.floor(62*Math.random()),1);if(!r&&n.length<=2&&("g"===e.toLowerCase()||"l"===e.toLowerCase()))if(0===n.length&&"g"===e.toLowerCase()){if(Math.random()<.5){e=a(1);r=!0}}else if(1===n.length&&"l"===e.toLowerCase()&&"g"===n.charAt(0).toLowerCase()){e=a(2);r=!0}n+=e}return n}(8),r=n.substring(0,4),a=n.substring(0,6);return[ar(t,4,r),ar(e,4,r),a].join("")}},ir=_t.SPM_CNT,sr=_t.SPM_URL,cr=_t.SPM_PRE,ur=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getCommonParams",value:function(){var t=q(K()),e=this.options.context||{},n=e.etag||{},r=e.userdata||{},a=$("_$")||{},o=a.spm||{},i=this.options.config||{},s=t.getMetaInfo("platformType")||ne.getPlatformType(),c={_dev_id:t.getMetaInfo("_dev_id"),_anony_id:t.getMetaInfo(_t._ANONY_ID),_user_id:t.getMetaInfo(_t._USER_ID),_user_nick:t.getMetaInfo("_user_nick"),_session_id:t.getMetaInfo("_session_id"),uaid:"1"==="".concat(t.getMetaInfo("uaid"))?1:0},u=t._aplus_client||{},f=t.globalConfig||{},p="";try{var l=getCurrentPages(),g=l[l.length-1]||{};p=r.gokey&&r.gokey.currentPath||g.route||g.is;r.gokey.currentPath&&delete r.gokey.currentPath}catch(t){}var h=(new Date).getTime()+p,_=u.model+u.networkType+i.title+n.cna,d=(f.isDecodeUrl?"DC_":"")+or.getLogId(h,_),m=Vt.getAppKey();m||L().w("please set appKey in aplus metaInfo before sendPV!");var v=Object.assign({},{appKey:m,cache:d,cna:n.cna,etag:n,pre:a.page_referrer||"-",sdk_info:{jsver:f.script_name,skv:f.lver,customSdkId:t.getMetaInfo("customSdkId")||"",platformType:s.toLowerCase()},title:i.title||"",url:p,client:u,timeZone:Vt.getTimeZone(),gmkey:r.gmkey||"",method:this.options.context.where_to_send.method},c),y=c;o.spm_url&&(y[sr]=o.spm_url||"");o.spm_pre&&(y[cr]=o.spm_pre||"");o.spm_cnt&&(y[ir]=o.spm_cnt||"");y[_t.PVID]=t.pvid||"";v.sessionArgs=t.getMetaInfo("aplus-session-args");v.globalArgs=t.getMetaInfo("aplus-global-args");v.gokey=y;return v}},{key:"getPvParams",value:function(){var t=q(K()),e=this.getCommonParams();this.options.config.is_auto||(e.sdk_info.mansndlog=1);return Object.assign({},e,{event_code:_t.PV_CODE,logtype:"1",logkey:"/vx.gif",event_timestamp:t._$.send_pv_count>0?new Date:t.logConfig.pageLoadTime})}},{key:"getHjljParams",value:function(){var t=(this.options.context||{}).userdata||{},e={event_code:mt[t.gmkey]||t.gmkey,logkey:t.logkey,event_timestamp:new Date};return Object.assign({},this.getCommonParams(),e)}},{key:"run",value:function(){var t={};t="PV"===this.options.config.recordType?this.getPvParams():this.getHjljParams();this.options.context.what_to_send.logdata=t}}]);return t}(),fr=ae(Object.freeze({__proto__:null,default:ur})),pr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=ne.isTB(),e=q(K()),n=this.options.context.what_to_send.logdata||{},r=getCurrentPages(),a=r[r.length-1]||{};a&&!n.title&&(n.title=a.route||"");var o="-";if(r.length>1){var i=r[r.length-2]||{};o=(!t&&e.globalConfig.isAli?"https://".concat(n.client.appId,"_"):"")+(i.route||i.is||"-")}n.pre=o;n.sdk_info&&(n.sdk_info.windmill="1");this.options.context.what_to_send.logdata=n}}]);return t}(),lr=ae(Object.freeze({__proto__:null,default:pr})),gr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getUserdata",value:function(){var t=q(K()),e=this.options.config||{},n={};e&&!e.is_auto&&e.gokey&&("string"==typeof e.gokey?n=M(e.gokey):"object"===s(e.gokey)&&(n=e.gokey));var r=function(t){I.isArray(t)?t.forEach((function(t){n=Object.assign({},n,t)})):n=Object.assign({},n,t)};r(t.getMetaInfo("aplus-cpvdata"));var a=ne.getCurrentPage(),o=a.route||a.is||"page",i=(t.getMetaInfo("aplus-page-properties")||{})[o];"object"===s(i)&&r(i);r((this.options.context||{}).userdata||{});return n}},{key:"updatePre",value:function(t){var e=this.options.config||{},n=$("_$")||{};if(e&&e.referrer){n.page_referrer=e.referrer;t.pre=e.referrer}Y("_$",n);return t}},{key:"updateUrl",value:function(t){var e=this.options.config||{};e&&e.pageUrl&&(t.url=e.pageUrl);return t}},{key:"updateSpmUrl",value:function(t){var e=this.options.config||{},n=e[_t.SPM_URL]||e.spmUrl;C(n)||(t.gokey[_t.SPM_URL]=n);return t}},{key:"updateSpmPre",value:function(t){var e=this.options.config||{},n=e[_t.SPM_PRE]||e.spmPre;C(n)||(t.gokey[_t.SPM_PRE]=n);return t}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=Object.assign({},this.getUserdata(),t.userdata||{});t.gokey=Object.assign({},t.gokey,e);t=this.updatePre(t);t=this.updateUrl(t);t=this.updateSpmUrl(t);t=this.updateSpmPre(t);this.options.context.what_to_send.logdata=t;this.options.context.userdata=t.gokey}}]);return t}(),hr=ae(Object.freeze({__proto__:null,default:gr})),_r={parseSemicolonContent:function(t,e,n){e=e||{};var r,a,o=t.split(";"),i=o.length;for(r=0;r<i;r++){a=o[r].split("=");var s=D.trim(a.slice(1).join("="));e[D.trim(a[0])||""]=n?s:this.tryToDecodeURIComponent(s)}return e},getLsCna:function(t,e){if(Ut.get&&Ut.test()){var n="",r=Ut.get(t);if(r){var a=r.split("_")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return decodeURIComponent(n)}return""},setLsCna:function(t,e,n){n&&Ut.set&&Ut.test()&&Ut.set(t,"".concat(e,"_").concat(encodeURIComponent(n)))},getLsImpv:function(t,e){if(Ut.get&&Ut.test()){var n="",r=Ut.get(t);if(r){var a=r.split("||")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return decodeURIComponent(n)}return""},setLsImpv:function(t,e,n){n&&Ut.set&&Ut.test()&&Ut.set(t,"".concat(e,"||").concat(encodeURIComponent(n)))},setLsRemoteCfg:function(t,e,n){if(n&&Ut.set&&Ut.test()){var r=A.cloneDeep(n);"object"===s(r)&&(r=JSON.stringify(r));Ut.set(t,"".concat(e,"||").concat(encodeURIComponent(r)))}},getLsRemoteCfg:function(t,e){if(Ut.get&&Ut.test()){var n="",r=Ut.get(t);if(r){var a=r.split("||")||[];n=e?a.length>1&&e===a[0]?a[1]:"":a.length>1?a[1]:""}return O.parse(decodeURIComponent(n))}return""}},dr="mini",mr="web";function vr(t,e){var n,r=q(K());e===dr?n=ye().getSync(Pt.APLUS_REMOTE_CONFIG):e===mr&&(n=_r.getLsRemoteCfg(Pt.APLUS_REMOTE_CONFIG));if(n){var a=r.getMetaInfo(Pt.APLUS_EVENT_LIMITRATES)||Vt.mapEventSampleRates(n.eventSamplingRate);if(a&&a.length>0){var o=I.find(a,(function(e){return e.eventId===t}));if(o&&Math.ceil(1e3*Math.random())>1e3*o.samplingRate)return!0}}return!1}function yr(t){var e=q(K()).getMetaInfo(Pt.APLUS_PRESET_EVENTS_DISABLED);if(e&&I.isArray(e)&&t&&t.indexOf("$$_")>-1&&-1!==e.indexOf(t))return!0}function Sr(t,e){return function(t,e,n){if(!Pe())try{var r=ne.getPlatformContext();return A.isEmptyObject(r)?void 0:e===Pt.APP_START||e===Pt.APP_END}catch(t){}var a=Te(),o=Ee(),i=Vt.LocalCfgUtils.getAutoTrackStatus();if(("string"==typeof t?k(R(t)):t||{}).auto_element){if(2===o||2===a)return;if(!a&&!i)return}return!yr(e)&&(!vr(e,n)||void 0)}(t,e,dr)}function Ir(t,e){return function(t,e,n){var r=Pe(),a=Ae(),o=Vt.LocalCfgUtils.localAutoPVDisabled();return!(!r||yr(Pt.PAGE_START)||vr(e,n)||t&&(2===a||!a&&o))}(t,e,dr)}var br=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=$("_$")||{},e=this.options.context.can_to_sendpv||{},n=t.send_pv_count||0,r=this.options.config||{},a=ne.getCurrentPage(),o=a.route||a.is,i=this.options.context.userdata.page_name||dn.getPageName()||o;if(!Ir(r.track_type,i))return"done";e.flag="YES";this.options.context.can_to_sendpv=e;t.send_pv_count=++n;Y("_$",t)}}]);return t}(),Er=ae(Object.freeze({__proto__:null,default:br})),Pr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"getUserData",value:function(){var t=q(K()),e=this.options.context||{},n=e.userdata||{},r=e.what_to_send.logdata.gokey;r=A.assign(r,M(n.gokey));r=A.assign(r,M(t.getMetaInfo("aplus-exinfo")||{}));var a=t.getMetaInfo("aplus-exdata");I.isArray(a)?a.forEach((function(t){r=A.assign(r,t)})):r=A.assign(r,a||{});return r}},{key:"run",value:function(){var t=this.options.context.what_to_send.logdata,e=this.getUserData();"1010"===t.gmkey&&(t.arg1=e.duration||t.logkey);t.gokey=e;this.options.context.what_to_send.logdata=t}}]);return t}(),Ar=ae(Object.freeze({__proto__:null,default:Pr})),Tr=j.extend({_send:function(t,e,n,r,a){"object"===s(e)&&"POST"===n?ne.request(t,{method:n,data:e,dataType:"base64"},r,a):ne.request("".concat(t,"?").concat(e),{method:n,dataType:"base64"},r,a);return t},_requestVTConfig:function(t,e,n){ne.request(t,{method:"GET",dataType:"json"},e,n)},_requestRemoteConfig:function(t,e,n){ne.request(t,{method:"GET",dataType:"json"},e,n)},_sendPV:function(t,e){var n=q(K());(t=t||{}).pageName&&n._setMetaInfo("".concat(Pt.APLUS,"-pagename"),t.pageName);var r=new nt;t.recordType="PV";t.method||(t.method="GET");var a=n.logConfig.pv;r.run({plugins:a.plugins,context:A.cloneDeep(a.context)},{config:t,userdata:e||{},pubsubType:"pv",middlewareMessageKey:"mw_change_pv"});return!0},_combineRecord:function(t,e,n,r){var a=q(K()),o="EXP";if(!a.globalConfig.isAli||e!==o&&"CLK"!==e)L().w("only support EXP or CLK log to combile record!");else if(I.isArray(n)){r||(r="POST");var i=[],c="true";n.forEach((function(t){i.push({exargs:"object"===s(t.exargs)?t.exargs:{},scm:t.scm,spm:t.spm,aplusContentId:t.aplusContentId});"false"===t._aplus_sendtomy&&"true"===c&&(c="false")}));var u=[];u.push((e===o?"expdata=":"clkdata=")+JSON.stringify(i));u.push(e===o?"_is_auto_exp=1":"_is_auto_clk=1");u.push("_eventType=custom");u.push("_method=".concat(r));u.push("_pkgSize=".concat(n.length));"false"===c&&u.push("_aplus_sendtomy=false");a.record(t,e,u.join("&"),r)}else L().w("type of gokeys must be ArrayObject!")},_record:function(t,e,n,r,a){var o=q(K());!function(t,e){var n=z();n&&s(n.subscribe)===Q&&n.subscribe(t,e)}("aplusInitContext",(function(i){if("complete"===i.status){n=function(t){var e=Yn("aplus-inject-record-gokey");return"function"==typeof e?e(t):t.gokey}({logkey:t,gmkey:e,gokey:n});t+="";var s=new nt,c=o.logConfig.hjlj;Sr(n,t)&&s.run({plugins:c.plugins,context:A.cloneDeep(c.context)},{config:{recordType:"COMMON_HJLJ",method:r||"GET"},userdata:{logkey:t,gmkey:e,gokey:n},pubsubType:"hjlj",middlewareMessageKey:"mw_change_hjlj"},(function(){w(a)&&a()}))}}));return!0},getPageSPM:function(){var t=((q(K())._$||{}).spm||{}).data||{};return[t.a,t.b]},_setPageSPM:function(){var t,e,n={},r=arguments;if("object"===s(r[0])){n=r[0];t=r[1]}else{n.spmCnt=[r[0],r[1],"0","0"].join(".");t=r[2]}if(n.spmCnt||n.spmUrl||!Yn("pageConfig")){W(e=["setPageSPM",n]);J(e)}else{W(e=["clearPageSPM"]);J(e)}("function"==typeof t?t:function(){})(e)},_setMetaInfo:function(t,e){return zn(t,e)},_appendMetaInfo:Qn,getMetaInfo:function(t){return Yn(t)},cloneDeep:A.cloneDeep,_setPageName:function(t,e){if(t){var n=e||dn.getCurrentPagePath(),r=A.cloneDeep(Yn("pageConfig")||{});r[n]=t;Qn("pageConfig",r)}else L().w("setPageName failed: pageName=".concat(t))},getPageName:function(t){return dn.getPageName(t)},_getElementSPM:function(t,e){if(t){var n=dn.getPageName()||"";if("string"!=typeof t){var r=t.dataset&&t.dataset.trackerParams||"",a=O.jsonStr2json(r);return[n,a.spmC,a.spmD].join(".")}var o,i=ne.getPlatformContext(),s=Yn("aplus-auto-clk")||[],c=Yn("aplus-auto-exp")||[];try{var u;for(u=0;u<s.length;u++){var f=s[u];if(f.cssSelector===t){o=[f.spmB||n,f.spmC,f.spmD].join(".");break}}for(u=0;u<c.length;u++){var p=c[u];if(p.cssSelector===t){o=[p.spmB||n,p.spmC,p.spmD].join(".");break}}var l=i.createSelectorQuery().selectAll(t);"function"==typeof l.fields&&l.fields({dataset:!0,id:!0},(function(t){var n=[];if(t&&t.length>0){for(var r=1;r<=t.length;r++)n.push("".concat(o,"_").concat(r));e&&"function"==typeof e&&e(n)}})).exec()}catch(t){L().w("current miniapp platform does not support dom element query, errmsg: ",t)}}},_recordAppLink:function(t,e,n){if(!t.targetAppKey){L().w("send $$_app_link failed: targetAppKey is null");return!1}return q(K())._record("$$_app_link","OTHER",t,e,n)},_updatePageProperties:function(t,e){var n,r=e||dn.getCurrentPagePath(),a=q(K()).getMetaInfo(Pt.PAGE_CONFIG);if(!A.isEmptyObject(t))if(a&&a[r]){a[r].properties=t;n=a}else{var o=Object.create(null);o[r]={properties:t};n=o}n&&Qn(Pt.PAGE_CONFIG,n)},_reportUserInfo:function(t,e){var n={};t&&("string"==typeof t?n._user_email=t:L().w("user_email"));e&&("string"==typeof e?n._user_mobile=e:L().w("user_mobile"));Object.keys(n).length&&q(K()).record("$$_user_profile","OTHER",n)}});t.run=Tr;var Or={run:Tr},wr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){!function(t){var e=q(K());if(!e._aplus_api){e._aplus_api={status:_t.COMPLETE};var n=Or.run.create({logConfig:t});for(var r in n)e[r]=n[r];H(K(),e);var a=[_t.SDK_READY,_t.COMPLETE];W(a);J(a)}}(this.options.context.logConfig)}}]);return t}(),Cr=ae(Object.freeze({__proto__:null,default:wr})),kr={catchException:function(t,e){var n=t;"object"===s(e)&&e.message&&(n="".concat(n,"_").concat(e.message));Ct.pushIntoGoldlogQueue("".concat(K(),"._aplus_cplugin_m.do_tracker_jserror"),[{message:n,error:JSON.stringify(e),filename:t}])}},Mr={lsMinivtConfigKey:"APLUS_MINI_CONFIG",getMiniVtTplCdnPath:function(){var t=q(K()).getMetaInfo("aplus-track-config-id"),e=t&&t.turnon,n=t&&t.value;return"1"===e&&n?n:""},getVtConfigPath:function(){var t=this.getMiniVtTplCdnPath();if(t){var e,n=[],r=Vt.getAppKey();r&&(e=r);e&&(n=e.split("."));2===n.length?this.originSpm={spmA:n[0],spmB:n[1]}:1===n.length&&(this.originSpm.spmA=n[0]);return t||(2===n.length?n.join("_"):1===n.length?n[0]:void 0)}},fetchFromLS:function(t){this.cdnpath||(this.cdnpath=t||this.getMiniVtTplCdnPath());var e=ne.getPlatformContext(),n="".concat(this.lsMinivtConfigKey,"-").concat(this.cdnpath);return decodeURIComponent(e.getStorageSync(n))||{}},setConfigIntoLs:function(t){this.cdnpath||(this.cdnpath=this.getVtConfigPath());ne.getPlatformContext().setStorageSync("".concat(this.lsMinivtConfigKey,"-").concat(this.cdnpath),encodeURIComponent(JSON.stringify(t)))}},xr="MiniVtConfigBack",Nr=_t.PUBLISH,Rr=j.extend(A.assign(Mr,{pathname:"",pageConfig:{},originSpm:{spmA:"",spmB:""},updateCfgLs:function(){var t=this;setTimeout((function(){t.fetchFromCdn()}),1e3)},fetchFromCdn:function(){var t=this,e=q(K()),n=e.getMetaInfo("aplus-vt-cfg-url");if(n){var r=(new Date).getTime();e.requestVTConfig(n,(function(n){var a=n.data;e._minicfg_load=(new Date).getTime()-r;if(a)try{e._aplus_vt_cfg="object"===s(a)?a:JSON.parse(a);e._aplus_vt_cfg.points&&I.each(e._aplus_vt_cfg.points,(function(t){t.selector=decodeURIComponent(t.selector)}));t.setConfigIntoLs(e._aplus_vt_cfg)}catch(t){e._aplus_vt_cfg={enabled:!1}}Ct.pushIntoGoldlogQueue(Nr,[xr,{pageConfig:e._aplus_vt_cfg,enable:0}])}),(function(t){e._aplus_vt_cfg&&e._aplus_vt_cfg.enabled&&Ct.pushIntoGoldlogQueue(Nr,[xr,{pageConfig:e._aplus_vt_cfg,enable:0}]);kr.catchException("getTrackerCfg",t,{msg:n})}),{timeout:5e3})}},getMiniVtData:function(t,e,n){var r=q(K());r._minicfg_load=0;if(t){var a=this.fetchFromLS(t);if("string"==typeof a)try{a=JSON.parse(a)}catch(t){a={}}a&&a.enabled&&(r._aplus_vt_cfg=a);n?this.fetchFromCdn(t,e):Ct.pushIntoGoldlogQueue(Nr,[xr,{pageConfig:a,enable:0}])}},syncMiniVtData:function(){var t=this.getVtConfigPath();t&&this.getMiniVtData(t,"",!0)},init:function(){var t=this,e=_t.SUBSCRIBE;Ct.pushIntoGoldlogQueue(e,[xr,function(e){e.enable||(t.pageConfig=e.pageConfig);Ct.pushIntoGoldlogQueue(Nr,["MiniVtConfigFormat",{pageConfig:t.pageConfig,originSpm:t.originSpm}]);!e.enable&&t.setConfigIntoLs(t.pageConfig)}]);t.syncMiniVtData()},run:function(){this.init();return this}}));function Dr(t,e){t=I.isArray(t)?t:[];e=I.isArray(e)?e:[];return[].concat(e,t).filter((function(t,e,n){return function(t,e){for(var n=-1,r=0;r<e.length;r++){var a=e[r];if(a.cssSelector===t.cssSelector&&a.logkey===t.logkey){n=r;break}}return n}(t,n)===e}))}function Ur(t){return I.isArray(t)?t.filter((function(t){return void 0===t._vt})):[]}function Lr(t){return/^[.#]/.test(t)?t:t?".".concat(t):""}function jr(){var t=q(K()),e=t._aplus_vt_cfg||t._aplus_tracking_cfg;if(e&&e.pages){var n=function(t){var e=ne.getCurrentPage(),n=t||e.route,r=q(K()),a=r._aplus_vt_cfg||r._aplus_tracking_cfg,o=[],i=[];a&&a.pages&&I.each(a.pages,(function(t){r.setPageName({pageName:t.spmB,extraParams:t.extraParams},t.matchUrl);if(t.matchUrl===n){I.each(a.points,(function(e){t.spmB===e.spmB&&("exposure"===e.trackerType?o.push({cssSelector:Lr(e.selector),positionSelector:e.positionSelector,logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}):i.push({cssSelector:Lr(e.selector),logkey:e.logkey,props:e.props,spmB:e.spmB,spmC:e.spmC,spmD:e.spmD,customArgs:e.customArgs,_vt:t.template||t.stdId?2:1}))}));a.common_exdata&&"object"===s(a.common_exdata)&&r.setMetaInfo("aplus-exdata",a.common_exdata);a.common_pvdata&&"object"===s(a.common_pvdata)&&r.setMetaInfo("aplus-cpvdata",a.common_pvdata)}}));return{EXP:o,CLK:i}}(),r=Ur(t.getMetaInfo("aplus-auto-exp"));t.setMetaInfo("aplus-auto-exp",Dr(r,n.EXP));var a=Ur(t.getMetaInfo("aplus-auto-clk"));t.setMetaInfo("aplus-auto-clk",Dr(a,n.CLK))}}function Fr(){var t,e,n,r=V().ctx,a=q(K()),o="".concat(K(),"_pubsub"),i=G(),s=!1,c={ts:Date.now()},u={onPullDownRefresh:0,onShareTimeline:0,onReachBottom:0,onShareAppMessage:0,onClick:0};function f(){var a=arguments.length>0&&arguments[0]?arguments[0]:"",o=arguments.length>1&&arguments[1]?arguments[1]:{},f=o.route||"",p=ne.getCurrentPage(),l=f||p.route||p.is;switch(a){case"onPullDownRefresh":u.onPullDownRefresh+=1;r[i].push({action:At.record,arguments:[e.logkey||"$$_pull_down_refresh","CLK",{event:a,page_name:dn.getPageName()||l,count:u.onPullDownRefresh,is_auto:1}]});break;case"onReachBottom":u.onReachBottom+=1;r[i].push({action:At.record,arguments:[t.logkey||"$$_reach_bottom","CLK",{event:a,page_name:dn.getPageName()||l,count:u.onReachBottom,is_auto:1}]});break;case"onShareAppMessage":u.onShareAppMessage+=1;r[i].push({action:At.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:dn.getPageName()||l,count:u.onShareAppMessage,share_type:1,is_auto:1,$$_share_title:o.title||"",$$_share_from:o.from||""}]});break;case"onShareTimeline":u.onShareTimeline+=1;r[i].push({action:At.record,arguments:[n.logkey||"$$_share","CLK",{event:a,page_name:dn.getPageName()||l,count:u.onShareTimeline,share_type:0,is_auto:1,$$_share_title:o.title||""}]});break;case"onAddToFavorites":r[i].push({action:At.record,arguments:[n.logkey||"$$_addtofavorite","CLK",{page_name:dn.getPageName()||l,is_auto:1,$$_favorite_title:o.title||""}]});break;case"onPageShow":if(l&&!s){(c={path:l}).ts=Date.now();s=!0}break;case"onPageHide":if(s){var g=Date.now()-c.ts||0,h=ne.getReferrerPage().route||ne.getReferrerPage().is||"-",_=dn.getPageProperties(c.path)||{},d=A.assign(_,{duration:g,path:c.path,page_name:_.page_name||dn.getPageName()||c.path,page_start:c.ts,isMini:!0,_page_auto_id:Pt.PAGE_END,_page_auto_pv:!0,referrer:h});dn.skipPage(c.path)||function(t){r[i].push({action:At.sendPV,arguments:[{is_auto:!0,track_type:"1"},t]})}(d);c=null;s=!1}}}r[i].push({action:_t.SUBSCRIBE,arguments:[_t.SDK_READY,function(r){"complete"===r&&function(){t=a.getMetaInfo("rb_config");e=a.getMetaInfo("pdr_config");n=a.getMetaInfo("share_config")}()}]});a[o].subscribe("onLoad",(function(t){if("ready"===t.status)try{var e=dn.getVTRealtimeCode();e?function(t,e){if(t&&e)try{var n=a.getMetaInfo("aplus-api-host"),r=n.match(/[[a-z|\-|\_|0-9\.]+[a-z|\-|\_|0-9](:\d*)?/);if(r&&r[0]){var o=_t.HTTPS;/(\d+\.){3,}\d+/.test(r[0])&&(o="http:");var i="".concat(o,"//").concat(n,"/vt/loadTransferConfig?code=").concat(t,"&appInfoId=").concat(e);ne.request(i,{},(function(t){try{var e=t.data&&t.data.data&&t.data.data.config||"",n=t.data&&t.data.data&&t.data.data.debugId||"";n&&a.appendMetaInfo("aplus-global-args",{debugId:n});var r=Date.now();a._minicfg_load=Date.now()-r;if(e){a._aplus_vt_cfg=JSON.parse(e)||{};jr()}}catch(t){L().w("fetch real-time visualization verification failed, err msg:".concat(t))}}))}}catch(t){}}(e,a.getMetaInfo("appInfoId")):a.getMetaInfo("aplus-vt-cfg-url")&&jr()}catch(t){L().w("fetch real-time visualization verification failed, errmsg:".concat(t))}}));a[o].subscribe("onShow",(function(t){"ready"===t.status&&!a.getMetaInfo("aplus-disable-apv")&&f("onPageShow",t)}));a[o].subscribe("onHide",(function(t){"ready"===t.status&&!a.getMetaInfo("aplus-disable-apv")&&f("onPageHide",t)}));a[o].subscribe("onPullDownRefresh",(function(t){"ready"===t.status&&f("onPullDownRefresh")}));a[o].subscribe("onReachBottom",(function(t){"ready"===t.status&&f("onReachBottom")}));a[o].subscribe("onShareAppMessage",(function(t){"ready"===t.status&&f("onShareAppMessage",t)}));a[o].subscribe("onShareTimeline",(function(t){"ready"===t.status&&f("onShareTimeline",t)}));a[o].subscribe("onAddToFavorites",(function(t){f("onAddToFavorites",t)}));a.getMetaInfo("aplus-vt-cfg-url")&&Ct.pushIntoGoldlogQueue(_t.SUBSCRIBE,["MiniVtConfigFormat",function(t){var e=t.pageConfig;e&&e.enabled&&(a._aplus_vt_cfg=e)}])}var Br=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=q(K());Fr();if(!t._aplus_aleady_load_minivt){t._aplus_aleady_load_minivt=1;Rr.create().run()}}}]);return t}(),Vr=ae(Object.freeze({__proto__:null,default:Br})),Kr="POST";function Gr(t,e){var n="";try{var r=Number(t);n=parseFloat(r.toFixed(e))}catch(e){n=t}return n}var qr={pushEvent:function(t,e,n,r,a,o){var i=q(K()),s=n.props,c={},u={};if(e)for(var f in e)f.toLowerCase().match(/^data-/)?u[f.toLowerCase().replace(/^data-/,"").replace(/-/g,"")]=e[f]:u[f]=e[f];if(s&&I.isArray(s))for(var p=0;p<s.length;p++){var l=s[p].toLowerCase().replace(/^data-/,"").replace(/-/g,"");c[l]=u[l]}r&&"EXP"===t&&(c=Object.assign({},c,{_w:Gr(r.width,2),_h:Gr(r.height,2),_x:Gr(r.x,2),_y:Gr(r.y,2),_rate:Gr(r.viewabilityRate||r.intersectionRatio,2),_viewability:"intersection"}));n._vt&&(c._vt=n._vt);var g=function(t,e,n,r){var a=q(K()).getMetaInfo;if("function"==typeof a){var o=a(t),i={};"function"==typeof o&&(i=o(e?A.cloneDeep(e):{},n,r));return U.query2obj(i)}return{}}("EXP"===t?"aplus-auto-exp-userfn":"aplus-auto-clk-userfn",r,n.cssSelector,a);g.spm||(g.spm=a&&a.b?a:void 0);var h,_=e.trackerParams||e["tracker-params"];if(_)try{var d=JSON.parse(_);delete(c=Object.assign(c,d)).trackerParams;delete c.trackerparams}catch(t){}h=Object.assign({is_auto:1},c,g,n.customArgs);if(o){var m=o.route;i.record(n.logkey,t,Object.assign({},h,{currentPath:m}),Kr)}else i.record(n.logkey,t,h,Kr)}};function Hr(t,e){var n=($("_aplus_auto_exp")||{}).hashMap||{};for(var r in n)for(var a=n[r]||[],o=0;o<a.length;o++){var i=a[o]||{},s=i.expConfig||{};if(t.cssSelector===s.cssSelector&&Vt.getHashKey({index:e},s)===i.hash_value)return A.cloneDeep(i.dataset)}}function $r(){var t=V().ctx,e=q(K()),n=G(),r=[],a=function(t){r=e.getMetaInfo("aplus-auto-clk");var n=dn.getPageName(),a=[];function o(e,n){I.isArray(e)&&a.push({config:n,elements:e});a.length===r.length&&function(t,e,n){var r,a=[];I.each(e,(function(e){for(var n=e.elements,r=e.config,i=0;i<n.length;i++){var s=n[i];if(o(t,s)){var c=i+1,u=s.dataset||Hr(r,c)||{},f={},p=O.jsonStr2json(u.trackerParams)||{};f.b=r.spmB;r.spmC?f.c=r.spmC:f.c=p.spmC?encodeURIComponent(p.spmC):"";r.spmD?f.d=c?"".concat(r.spmD,"_").concat(c):r.spmD:f.d=p.spmD?encodeURIComponent(p.spmD):"";a.push({dataset:u,config:r,element:s,spmData:f})}}}));1===a.length?r=a[0]:a.length>1&&(r=a.reduce((function(t,e){var n=t,r=t.element,a=e.element;a.top>=r.top&&a.right<=r.right&&a.bottom<=r.bottom&&a.left>=r.left&&(n=e);return n})));r&&qr.pushEvent("CLK",r.dataset,r.config,r.element,r.spmData,n);function o(t,e){var n={};t&&(t.changedTouches?n=t.changedTouches[0]:t.touches?n=t.touches[0]:t.detail&&(n=t.detail));var r=n.clientX||0,a=n.clientY||0,o=e.top,i=e.bottom;if(e.scrollTop){o+=e.scrollTop;i+=e.scrollTop}return e.left<r&&r<e.right&&o<a&&a<i}}(t.event,a,t.context)}I.isArray(r)&&r.forEach((function(t){D.isStartWith(t.cssSelector,".")||(t.cssSelector=".".concat(t.cssSelector));t.spmB||(t.spmB=n);var e=ne.getPlatformContext().createSelectorQuery().selectAll(t.cssSelector);"function"==typeof e.fields?e.fields({id:!0,dataset:!0,rect:!0,scrollOffset:!0},(function(e){o(e,t)})).exec():e.boundingClientRect().exec((function(e){o(e,t)}))}))};t[n].push({action:_t.SUBSCRIBE,arguments:[_t.SDK_READY,function(t){"complete"===t&&(r=e.getMetaInfo("aplus-auto-clk"))}]});t[n].push({action:_t.SUBSCRIBE,arguments:["onAplusClk",function(t){"ready"===t.status&&a(t)}]})}var Yr=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){$r()}}]);return t}(),Qr=ae(Object.freeze({__proto__:null,default:Yr}));function zr(t){var e=q(K());return e&&e.getMetaInfo?e.getMetaInfo(t):jt.getMetaCnt(t)}var Wr=function(t){var e=t;try{var n=zr("aplus-auto-exp-visible");n&&(e=parseFloat(n));e<=0&&(e=t);return e}catch(n){return e=t}},Jr=Wr(.3);Wr("aplus-auto-exp-visible");Wr("aplus-auto-exp-window");!function(t){var e=t;try{var n=zr("aplus-auto-exp-duration"),r=parseInt(n,10);"NaN"!=="".concat(r)&&(e=r);return e}catch(t){return e}}(300);function Xr(t){return function(t,e){var n,r=[],a=[];try{n=e||zr(t);var o=[];if(n&&"string"==typeof n)try{o=JSON.parse(n)}catch(t){o=JSON.parse(n.replace(/'/g,'"'))}else"object"===s(n)&&n.constructor===Array&&(o=n);if(o&&o.constructor===Array)for(var i=0;i<o.length;i++){var c=o[i]||{},u=c.logkey||"",f=c.tag?c.tag:"",p=c.filter,l=c.cssSelector;if(!u||!(l||f&&p))throw new Error("meta ".concat(t," config error, ").concat(JSON.stringify(c)));p="string"==typeof p?p.split("="):[];var g=f;p.length>=2?g+="[".concat(p.shift(),'="').concat(decodeURIComponent(p.join("")),'"]'):1===p.length&&p[0]&&(g+="[".concat(decodeURIComponent(p[0]),"]"));l&&(g+=l);c.elementSelector=g;if(I.indexOf(a,g)>-1)throw new Error("meta ".concat(t," config error, tag_filter_cssSelector ").concat(g," repeated"));a.push(g);r.push(c)}return r}catch(t){L().w(t);return r}}("aplus-auto-exp",t)||[]}var Zr,ta=[];function ea(t,e,n,r){Zr&&!r||(Zr=ne.getPlatformContext());var a,o=($("_aplus_auto_exp")||{}).hashMap||{};!function r(s){if(s<e.length){var c=e[s];a=0;ta.forEach((function(t){t.subject[0]===c.cssSelector&&t.subject[1]===c.positionSelector&&(a=1)}));var u=[c.cssSelector,c.positionSelector];!function(t){var e=u[0];e&&!D.isStartWith(u[0],".")&&(e=".".concat(e));try{var n=Zr.createSelectorQuery().selectAll(e);"function"==typeof n.fields?n.fields({dataset:!0,id:!0},(function(e){I.isArray(e)&&e.length>0&&t({elements:e,type:"COMMON"})})).exec():L().w("current platform does not support auto exposure tracking!")}catch(t){L().w("current platform does not support auto exposure tracking! err = ",t)}}((function(f){if(0===a||0===n){var p=function(t){var e={thresholds:[Jr],initialRatio:0},n=!1;try{my&&(n=!0)}catch(t){}if(n){e.selectAll=!0;return Zr.createIntersectionObserver(e)}e.observeAll=!0;return Zr.createIntersectionObserver(t,e)}(t);p.subject=u;ta.length>e.length-1&&ta.shift().disconnect();ta.push(p);I.each(f.elements,(function(t,e){t.index="".concat(e+1);(function(t,e){var n=Vt.getHashKey(t,e),r=t.index;o[e.logkey]&&o[e.logkey].forEach((function(t){if(t.hash_value===n&&t.index===r)return!0}));return!1})(t,c)||i(t,c)}));!function(t,e,n){var r=e.cssSelector;r&&!D.isStartWith(r,".")&&(r=".".concat(r));e.positionSelector?t.relativeTo(e.positionSelector).observe(r,(function(t){try{n(t,e)}catch(t){L().w("errorMessage: ",t)}})):t.relativeToViewport().observe(r,(function(t){try{n(t,e)}catch(t){L().w("errorMessage: ",t)}}))}(p,c,(function(t,e){mn.getIndexByRect(e.cssSelector,t.boundingClientRect,(function(n){var r=n+1;if(r){var a=A.cloneDeep(t);a.index="".concat(r);var o=A.cloneDeep(a.dataset);i({id:a.id,index:a.index,dataset:o},e);!function(t,e,n){var r=function(t,e,n){var r=($("_aplus_auto_exp")||{}).hashMap||{},a=[];for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o))for(var i=r[o]||[],s=0;s<i.length;s++){var c=Vt.getHashKey(e,n),u=i[s]||{};if(0===u.status&&u.expConfig&&c===u.hash_value){var f=e.boundingClientRect||{};if(f.width&&f.height){u.dataset=e.dataset;u.x=f.left;u.y=f.top;u.width=f.width;u.height=f.height;u.size=f.width*f.height;var p=Jr;if(e.intersectionRatio>=p){u.exposureTime=t;u.status=1;a.push(u)}}}}return a}((new Date).getTime(),t,n);if(r&&r.length>0){var a=r[0],o={},i=O.jsonStr2json(e.trackerParams||{})||{},s=a.index;dn.getPageName()&&(o.b=dn.getPageName());n.spmC?o.c=n.spmC:o.c=i.spmC?encodeURIComponent(i.spmC):"";n.spmD?o.d=s?"".concat(n.spmD,"_").concat(s):n.spmD:o.d=i.spmD?encodeURIComponent(i.spmD):"";qr.pushEvent("EXP",e,n,Object.assign({},t,{x:a.x,y:a.y,width:a.width,height:a.height,hash_value:a.hash_value}),o)}}(a,o,c)}}))}))}r(++s)}))}}(0);function i(t,e){var n=Vt.getHashKey(t,e);try{var r=t.index;if(o[e.logkey]){var a=0;o[e.logkey].forEach((function(e){if(e.hash_value===n){a=1;t.id&&(e.id=t.id);t.dataset&&(e.dataset=t.dataset);t.status&&(e.status=t.status)}}));a||o[e.logkey].push({id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r})}else o[e.logkey]=[{id:t.id,hash_value:n,status:0,expConfig:e,dataset:t.dataset,index:r}]}catch(t){L().w("error === ",t)}}}function na(){for(var t=0;t<ta.length;t++)ta[t].disconnect();ta=[];var e=($("_aplus_auto_exp")||{}).hashMap||{};for(var n in e)delete e[n]}var ra={},aa=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){!function(){var t=V().ctx,e=0,n=0,r=q(K()),a=G();if(!r._aplus_auto_exp){r._aplus_auto_exp={hashMap:{}};var o=[];t[a].push({action:_t.SUBSCRIBE,arguments:["onShow",function(t){if("ready"===t.status){i(t.context,1,_t.SUBSCRIBE);if(0===e){s(t.context,1);e=1}else s(t.context,0);try{var n=ne.getCurrentPage(),r=n.route||n.is;ra[r]=r}catch(t){}}}]});t[a].push({action:_t.SUBSCRIBE,arguments:["onAplusTouch",function(t){if("ready"===t.status)if(0===n){n=1;s(t.context,1)}else c(t)}]});t[a].push({action:_t.SUBSCRIBE,arguments:["onPageDataChanged",function(t){setTimeout((function(){c(t)}),200)}]});t[a].push({action:_t.SUBSCRIBE,arguments:["onHide",function(t){if("ready"===t.status){ra={};e=0;n=0;i(t.context,1,_t.UNSUBSCRIBE);na()}}]});t[a].push({action:_t.SUBSCRIBE,arguments:["onUnload",function(t){if("ready"===t.status){ra={};na()}}]})}function i(e,n,r){t[a].push({action:r,arguments:["setMetaInfo",function(t,r){if("aplus-auto-exp"===t){var a=Xr(r);if(JSON.stringify(a)===JSON.stringify(o))return;o=a;r&&o&&o.length>0&&ea(e,o,n)}}]})}function s(t,e){o=r.getMetaInfo("aplus-auto-exp");setTimeout((function(){ea(t,o,e)}),0)}function c(t){try{var e=ne.getCurrentPage(),n=e.route||e.is,r=ra[n],a=JSON.stringify(t.data);if(r!==a){ra[n]=a;s(t.context,0)}}catch(t){}}}()}}]);return t}(),oa=ae(Object.freeze({__proto__:null,default:aa})),ia=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"pushQueue",value:function(t,e){q(G()).push({action:"".concat(K(),".").concat(t),arguments:e})}},{key:"run",value:function(){var t=this,e=q(K());y(dt,(function(n){e[n]=function(){var e=[];y(arguments,(function(t){e.push(t)}));var r="enter"===n?"_sendPV":"_".concat(n);t.pushQueue(r,e)}}))}}]);return t}(),sa=ae(Object.freeze({__proto__:null,default:ia})),ca=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"_getNetworkType",value:function(t){var e=ne.getPlatformContext();e.getNetworkType?e.getNetworkType({success:function(e){t(e?e.networkType:"")}}):t("")}},{key:"_getSystemInfo",value:function(t){var e=this,n={},r=e.SYSTEM_INFO||{};if(r&&r.version)t(e.SYSTEM_INFO);else try{ne.getPlatformContext().getSystemInfo({complete:function(r){r&&r.version?e._getNetworkType((function(n){r.networkType=n;e.SYSTEM_INFO=r;t(r)})):e._getNetworkType((function(e){n.networkType=e;t(n)}))}})}catch(e){t(n)}}},{key:"_getAccountInfoSync",value:function(){var t={};try{var e=ne.getPlatformContext();if(e.getAccountInfoSync&&e.canIUse("getAccountInfoSync")){var n=e.getAccountInfoSync(),r=n.miniProgram||{},a=n.plugin||{};t.appId=r.appId;t.appVersion=r.version||r.envVersion;t.pluginAppId=a.appId;t.pluginAppVersion=a.version}else if(e.getAppIdSync&&e.canIUse("getAppIdSync")){var o=e.getAppIdSync()||{};t.appId=o.appId||""}}catch(t){}return t}},{key:"run",value:function(t,e){var n=this;this._getSystemInfo((function(t){t.userAgent="-";t.os=t.platform?t.platform.toLocaleUpperCase():"";t.os_version=t.system?t.system:"";t.access=t.brand?t.brand:"";var r="";t.host&&"string"==typeof t.host.env&&(r=t.host.env);t.host=r;var a=n._getAccountInfoSync(),o=Object.assign({},t,a);q(K())._aplus_client=o;e()}));return 2e3}}]);return t}(),ua=ae(Object.freeze({__proto__:null,default:ca})),fa=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"run",value:function(){var t=this.options.context.sdk_config.queueName,e=V(),n=_e(e[t]||[],"metaQueue");e[t]=n.queue;ie(n.formatQueue,this.options.config)}}]);return t}(),pa=ae(Object.freeze({__proto__:null,default:fa})),la=function(){function t(e){f(this,t);this.options=e}l(t,[{key:"enableSDK",value:function(t){V().ctx[G()].push({action:_t.SDK_SET_META_INFO,arguments:["_hold",t?"START":"BLOCK"]})}},{key:"emptyAnonyID",value:function(){V().ctx[G()].push({action:_t.SDK_SET_META_INFO,arguments:[_t._ANONY_ID,""]})}},{key:"run",value:function(){var t=this.options.context.sdk_config.metaInfo,e=q(K()),n=q(G()),r=t[Pt.AUTO_GET_OPENID],a=ne.getPlatformContext(),o=e&&e.getMetaInfo&&e.getMetaInfo(_t._ANONY_ID);if(r&&!o){var i=this;i.enableSDK(!1);var s=ne.getPlatformType();try{if("wx"===s){var c=a.getAccountInfoSync().miniProgram.appId,u=a.getStorageSync&&a.getStorageSync(_t._ANONY_ID),f=a.getStorageSync&&a.getStorageSync(_t._DEV_ID);if(u){n.push({action:_t.SDK_SET_META_INFO,arguments:[_t._ANONY_ID,u]});n.push({action:_t.SDK_SET_META_INFO,arguments:[_t._DEV_ID,f]});i.enableSDK(!0)}else{var p=t.appKey||Vt.getAppKey();a.login({success:function(r){if(r.code){var a=t[Pt.APLUS_PV_DOMAIN]||t[Pt.TRACKDOMAIN],o="".concat(a,"/mp/get_openid");ne.request(o,{method:"POST",dataType:"json",data:{appkey:p,code:r.code,appid:c,platform:s}},(function(t){if(t&&t.data&&200===t.data.code){var r=t.data.data;ye().set(_t._ANONY_ID,r.od);ye().set(_t._DEV_ID,r.ud);e.od=r.od;n.push({action:_t.SDK_SET_META_INFO,arguments:[_t._ANONY_ID,r.od]});n.push({action:_t.SDK_SET_META_INFO,arguments:[_t._DEV_ID,r.ud]});i.enableSDK(!0)}else{L().w("auto get openid failed errMsg:",t.data.message);i.emptyAnonyID();i.enableSDK(!0)}}),(function(t){L().w("auto get openid failed, errmsg = ",t&&t.message);i.emptyAnonyID();i.enableSDK(!0)}))}else{L().w("auto get openid failed");i.emptyAnonyID();i.enableSDK(!0)}},fail:function(){L().w("wechat login failed");i.emptyAnonyID();i.enableSDK(!0)}})}}else L().w("current miniapp platform:".concat(s," not support autoGetOpenid, please setMetaInfo _anony_id by yourself!"))}catch(t){L().w("get openid failed, errmsg = ",t);i.emptyAnonyID();i.enableSDK(!0)}}else L().w("auto get openid setting is",r?"true":"false")}}]);return t}(),ga={apiName:"aplus",queueName:"aplus_queue",metaInfo:{sdk_version:oe,trackDomain:"",appKey:"",sdkId:"qt_mini","aplus-cpvdata":{},"aplus-exdata":{},"aplus-globaldata":{},"aplus-mmstat-timeout":"10000","aplus-disable-autoevent":!1,"aplus-disable-apv":!1,"aplus-device-enable":!0,"aplus-request-timeout":3e3,"aplus-mini-requests-limit":1},globalConfig:{ETAG_STORAGE_KEY:"__ETAG__CNA__ID__",script_name:"qt_mini.js",lver:oe},plugins:[{name:"aplus_queue",path:ve},{name:"inject_app_um",path:ln},{name:"inject_page_um",path:Nn},{name:"pubsub",path:jn},{name:"aplus_mini_report_um",path:Gn},{name:"aplus_meta_inject",path:Jn},{name:"aplus_log_inject",path:Zn,deps:["aplus_meta_inject"],config:{plugins:{pv:[{name:"when_to_sendpv",path:er,config:{aplusWaiting:""}},{name:"where_to_send",path:rr},{name:"what_to_send",path:fr},{name:"miniapp_data",path:lr},{name:"what_to_sendpv_userdata",path:hr,deps:["what_to_send"]},{name:"can_to_sendpv",path:Er}],hjlj:[{name:"where_to_send",path:rr},{name:"what_to_send",path:fr,deps:[]},{name:"miniapp_data",path:lr},{name:"what_to_hjlj_userdata",path:Ar}]}}},{name:"aplus_api",path:Cr,deps:["aplus_log_inject","aplus_meta_inject"]},{name:"auto_tracker_um",path:Vr,deps:["inject_page_um"]},{name:"aplus_ac",path:Qr,deps:["inject_page_um"]},{name:"aplus_ae",path:oa,deps:["inject_page_um"]},{name:"open_api",path:sa},{name:"aplus_client",path:ua},{name:"meta_queue",path:pa},{name:"auto_openid",enable:!0,path:ae(Object.freeze({__proto__:null,default:la})),config:{},deps:["aplus_meta_inject"]}]};function ha(t){return e="QuickTracking SDK INIT SUCCESS!",re(t,ga,(function(){L().v(e||"QT SDK INIT SUCCESS!")}));var e}t.default=ha;t.initQTSDK=ha;Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).qt_mini={});var t,e;
